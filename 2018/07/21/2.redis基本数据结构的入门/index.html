<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 2.redis基本数据结构的入门 · Eureka-Home</title><meta name="description" content="2.redis基本数据结构的入门 - Eureka"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Eureka-Home"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/sunweiguo" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">2.redis基本数据结构的入门</h1><div class="post-info">Jul 21, 2018</div><div class="post-content"><p>介绍redis最基本的五种数据结构的操作。<br><a id="more"></a></p>
<p>由于不是md文件，所以在这里将我的学习笔记以有道云的链接形式分享出来。</p>
<p><a href="http://note.youdao.com/noteshare?id=48e87aa2830884521b851d76358729b9&amp;sub=B40DB14F22274EAC81B46F4309098294" target="_blank" rel="noopener">有道云笔记-2.redis基本数据结构的入门</a></p>
<p>在这里，说一说每种数据结构的使用场景。</p>
<h3 id="1-String——字符串"><a href="#1-String——字符串" class="headerlink" title="1. String——字符串"></a>1. String——字符串</h3><p>最简单的结构，一般用作缓存，可以完全实现目前 <code>Memcached</code> 的功能，并且效率更高。</p>
<h3 id="2-Hash——字典"><a href="#2-Hash——字典" class="headerlink" title="2. Hash——字典"></a>2. Hash——字典</h3><p>我们经常将一些结构化的信息打包成 <code>hashmap</code>，在客户端序列化后存储为一个字符串的值（一般是 <code>JSON</code> 格式）</p>
<p>比如用户的昵称、年龄、性别、积分等。这时候在需要修改其中某一项时，通常需要将字符串（<code>JSON</code>）取出来，然后进行反序列化，修改某一项的值，再序列化成字符串（<code>JSON</code>）存储回去。</p>
<p>简单修改一个属性就干这么多事情，消耗必定是很大的，也不适用于一些可能并发操作的场合（比如两个并发的操作都需要修改积分）。而 <code>Redis</code> 的 <code>Hash</code> 结构可以使你像在数据库中 <code>Update</code> 一个属性一样只修改某一项属性值。</p>
<h3 id="3-List——列表"><a href="#3-List——列表" class="headerlink" title="3. List——列表"></a>3. List——列表</h3><p><code>List</code> 说白了就是链表（<code>redis</code> 使用双端链表实现的 <code>List</code>），相信学过数据结构知识的人都应该能理解其结构。</p>
<p>使用 <code>List</code> 结构，我们可以轻松地实现最新消息排行等功能（比如新浪微博的 <code>TimeLine</code> ）。</p>
<p><code>List</code> 的另一个应用就是消息队列，可以利用 <code>List</code> 的 <code>*PUSH</code> 操作，将任务存在 <code>List</code> 中，然后工作线程再用 <code>POP</code> 操作将任务取出进行执行。<code>Redis</code> 还提供了操作 <code>List</code> 中某一段元素的 <code>API</code>，你可以直接查询，删除 <code>List</code> 中某一段的元素。</p>
<h3 id="4-Set——集合"><a href="#4-Set——集合" class="headerlink" title="4. Set——集合"></a>4. Set——集合</h3><p><code>Set</code> 就是一个集合，集合的概念就是一堆不重复值的组合。利用 <code>Redis</code> 提供的 <code>Set</code> 数据结构，可以存储一些集合性的数据。</p>
<p>比如在微博应用中，可以将一个用户所有的关注人存在一个集合中，将其所有粉丝存在一个集合。因为 <code>Redis</code> 非常人性化的为集合提供了求交集、并集、差集等操作，那么就可以非常方便的实现如共同关注、共同喜好、二度好友等功能，对上面的所有集合操作，你还可以使用不同的命令选择将结果返回给客户端还是存集到一个新的集合中。</p>
<ol>
<li>共同好友、二度好友</li>
<li>利用唯一性，可以统计访问网站的所有独立 IP</li>
<li>好友推荐的时候，根据 tag 求交集，大于某个 threshold 就可以推荐</li>
</ol>
<h3 id="5-Sorted-Set——有序集合"><a href="#5-Sorted-Set——有序集合" class="headerlink" title="5. Sorted Set——有序集合"></a>5. Sorted Set——有序集合</h3><p>和 <code>Set</code> 相比，<code>Sorted Set</code> 是将 <code>Set</code> 中的元素增加了一个权重参数 <code>score</code>，使得集合中的元素能够按 <code>score</code> 进行有序排列，比如一个存储全班同学成绩的 <code>Sorted Set</code>，其集合 <code>value</code> 可以是同学的学号，而 <code>score</code> 就可以是其考试得分，这样在数据插入集合的时候，就已经进行了天然的排序。</p>
<p>另外还可以用 <code>Sorted Set</code> 来做带权重的队列，比如普通消息的 <code>score</code> 为1，重要消息的 <code>score</code> 为2，然后工作线程可以选择按 <code>score</code> 的倒序来获取工作任务。让重要的任务优先执行。</p>
<ol>
<li>带有权重的元素，比如一个游戏的用户得分排行榜</li>
<li>比较复杂的数据结构，一般用到的场景不算太多</li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/2018/07/21/2.商品和类目开发/" class="prev">PREV</a><a href="/2018/07/21/2.Mybatis面试问题集锦/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2019 <a href="http://yoursite.com">Eureka</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>