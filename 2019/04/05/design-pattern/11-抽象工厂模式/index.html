<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 13-抽象工厂模式 · fossi</title><meta name="description" content="13-抽象工厂模式 - fossi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="https://sunweiguo.github.io/tags/" target="_blank" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="http://bloghello.oursnail.cn/test.html" target="_blank" class="nav-list-link">爱情</a></li><li class="nav-list-item"><a href="https://github.com/sunweiguo" target="_blank" class="nav-list-link">GIT</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">13-抽象工厂模式</h1><div class="post-meta"><span class="post-time">Apr 5, 2019</span></div><div class="post-content"><p>本文学习工厂模式之抽象工厂模式，支持一个工厂生产多个产品。</p>
<a id="more"></a>
<h2>定义</h2>
<ul>
<li>抽象工厂模式提供一个创建一系列相关或相互依赖对象的接口</li>
<li>无须指定他们具体的类</li>
<li>创建型</li>
<li>优点：无须关心创建细节、<strong>将一个系列的产品族统一到一起创建</strong></li>
<li>缺点：增加了系统的抽象性和理解难度；规定了所有可能被创建的产品集合，产品族中扩展新的产品困难，需要修改抽象工厂的接口</li>
<li>美的冰箱和海尔冰箱是同一个产品等级，但是美的冰箱和美的空调是同一个产品族</li>
</ul>
<p><img src="http://bloghello.oursnail.cn/pattern11-1.png" alt="image"></p>
<p>那么，工厂方法针对的是产品等级结构，就是竖着的。抽象工厂针对的是产品族，是横着的。</p>
<p>记法：<strong>不同工厂同一个产品是统一产品等级；同一个工厂不同产品集合是产品族</strong>。</p>
<p>产品族是针对某个工厂而言，这个工厂里面会有很多产品；</p>
<h2>例子</h2>
<p>场景：java教程包含两个东西：java视频+java手记；python教程包含两个东西：python视频+python手记</p>
<p>那么，java视频和java手记是一个产品族；</p>
<p>python视频和python手记是一个产品族；</p>
<p>java视频和python视频是同一个产品等级；</p>
<p>java手记和python手记是同一个产品等级；</p>
<p>OK，分别创建一个视频的抽象类<code>Vedio</code>和手记的抽象类<code>Article</code>（定义生产产品族的抽象类）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Vedio</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Article</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分别创建java视频类、java手记类、python视频类、python手记类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaVedio</span> <span class="keyword">extends</span> <span class="title">Vedio</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"生产java视频"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaArticle</span> <span class="keyword">extends</span> <span class="title">Article</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"生产java手记"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PythonVedio</span> <span class="keyword">extends</span> <span class="title">Vedio</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"生产python视频"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PythonArticle</span> <span class="keyword">extends</span> <span class="title">Article</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"生产python手记"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有了具体的产品之后，先创建一个总工厂确定生产的产品族，然后分别创建java工厂和python工厂去实现它（每个工厂都生产这个产品族）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CourseFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">Vedio <span class="title">getVedio</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Article <span class="title">getArticle</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaCourseFactory</span> <span class="keyword">implements</span> <span class="title">CourseFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Vedio <span class="title">getVedio</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JavaVedio();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Article <span class="title">getArticle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JavaArticle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PythonCourseFactory</span> <span class="keyword">implements</span> <span class="title">CourseFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Vedio <span class="title">getVedio</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PythonVedio();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Article <span class="title">getArticle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PythonArticle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CourseFactory javaCourseFactory = <span class="keyword">new</span> JavaCourseFactory();</span><br><span class="line">        CourseFactory pythonCourseFactory = <span class="keyword">new</span> PythonCourseFactory();</span><br><span class="line">        javaCourseFactory.getArticle().produce();</span><br><span class="line">        javaCourseFactory.getVedio().produce();</span><br><span class="line"></span><br><span class="line">        pythonCourseFactory.getArticle().produce();</span><br><span class="line">        pythonCourseFactory.getVedio().produce();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//运行结果</span></span><br><span class="line">生产java手记</span><br><span class="line">生产java视频</span><br><span class="line">生产python手记</span><br><span class="line">生产python视频</span><br></pre></td></tr></table></figure>
<p>我们可以分析一下，如果此时要增加前端的课程，那么就会非常方便，无非是增加一个前端视频类和前端手记类：<code>FEVedio</code>和<code>FEArticle</code>，然后创建一个<code>FECourseFactory</code>这个类来生产这两个产品即可。其实，就是说，抽象工厂模式对于产品族的扩展是非常友好的。结合具体实例，比如我这里有了海尔工厂和美的工厂，他们都生产冰箱和空调。此时我要新添加一个品牌，比如是松下工厂，那么就可以很方便地扩展松下的产品族。符合开闭原则。不需要动其他工厂以及这个工厂对应的产品族。</p>
<p>每个工厂只生产产品族，就是说美的的工厂只生产美的的空调和冰箱；海尔的工厂只生产海尔的空调和冰箱。那么，我要获取海尔冰箱，我不需要关心如何创建这个冰箱，我只需要知道海尔这个工厂即可。</p>
<p>但是，显然，<strong>这里我们需要固定住<code>CourseFactory</code>，这个相当于是抽象工厂，确定了一个工厂能生产的东西，比如美的工厂，现在<code>CourseFactory</code>只能规定去生产空调和冰箱，但是如果美的要扩张业务，要去生产洗衣机，那么就需要修改<code>CourseFactory</code>这个类，继而其他的工厂也都要去改变。</strong></p>
<p>对应到这里的场景，我的产品等级情况是：java视频和python视频是同一个产品等级；java手记和python手记是同一个产品等级；如果要规定，课程不仅需要有视频和手记，还需要有解答区，那么此时，就是需要修改<code>CourseFactory</code>，将会要修改很多地方。</p>
<p>所以，<strong>⭐抽象工厂适合于产品等级基本不变的场景</strong>（即每个工厂要生产什么基本先确定下来），对于增加产品族（多一家工厂加盟）是完全支持扩展的。</p>
<p><img src="http://bloghello.oursnail.cn/pattern11-2.png" alt="image"></p>
</div></article></div></section><footer><div class="paginator"><a href="/2019/04/13/mmall-front/1、项目初始化相关基础知识/" class="prev">上一篇</a><a href="/2019/04/05/design-pattern/10-工厂方法模式/" class="next">下一篇</a></div><div id="container"></div><link rel="stylesheet" href="https://billts.site/extra_css/gitment.css">
<script src="https://billts.site/js/gitment.js"></script><script>var gitment = new Gitment({
    owner: 'sunweiguo',
    repo: 'sunweiguo.github.io',
    oauth: {
        client_id: '56c422eddebac740f021',
        client_secret: 'b0520b7f71d5d883e029133f06c3328e3d3168e1',
    },
})
gitment.render('container')</script><div class="copyright"><p>© 2019 - 2020 <a href="http://yoursite.com">fossi</a>,苏ICP备17064972号.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-134836068-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>