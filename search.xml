<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Redissonå®žçŽ°Redisåˆ†å¸ƒå¼é”åŽŸç†]]></title>
    <url>%2F2019%2F01%2F22%2Fmiscellany%2F02Redisson%E5%AE%9E%E7%8E%B0Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬å¯ä»¥è‡ªå·±æ¥å®žçŽ°ä¸€ä¸ªredisåˆ†å¸ƒå¼é”ï¼Œä½†æ˜¯å¦‚ä½•ç”¨Redissonä¼˜é›…åœ°å®žçŽ°å‘¢ï¼Ÿæœ¬æ–‡æŽ¢è®¨ä¸€ä¸‹å®ƒçš„åŽŸç†ã€‚ ç”¨Redissonæ¥å®žçŽ°åˆ†å¸ƒå¼é”å¼‚å¸¸åœ°ç®€å•ï¼Œå½¢å¦‚ï¼š è¿˜æ”¯æŒrediså•å®žä¾‹ã€rediså“¨å…µã€redis clusterã€redis master-slaveç­‰å„ç§éƒ¨ç½²æž¶æž„ï¼Œéƒ½å¯ä»¥ç»™ä½ å®Œç¾Žå®žçŽ°ã€‚ åŠ é” åŽŸç†å›¾ï¼š çŽ°åœ¨æŸä¸ªå®¢æˆ·ç«¯è¦åŠ é”ã€‚å¦‚æžœè¯¥å®¢æˆ·ç«¯é¢å¯¹çš„æ˜¯ä¸€ä¸ªredis clusteré›†ç¾¤ï¼Œä»–é¦–å…ˆä¼šæ ¹æ®hashèŠ‚ç‚¹é€‰æ‹©ä¸€å°æœºå™¨ã€‚ç´§æŽ¥ç€ï¼Œå°±ä¼šå‘é€ä¸€æ®µluaè„šæœ¬åˆ°redisä¸Šï¼Œé‚£æ®µluaè„šæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š ä¸ºå•¥è¦ç”¨luaè„šæœ¬å‘¢ï¼Ÿå› ä¸ºä¸€å¤§å¨å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥é€šè¿‡å°è£…åœ¨luaè„šæœ¬ä¸­å‘é€ç»™redisï¼Œä¿è¯è¿™æ®µå¤æ‚ä¸šåŠ¡é€»è¾‘æ‰§è¡Œçš„åŽŸå­æ€§ã€‚ è§£é‡Šä¸€ä¸‹è¿™æ®µè„šæœ¬çš„æ„æ€ã€‚ è¿™é‡Œçš„KEYS[1]ä»£è¡¨çš„æ˜¯ä½ åŠ é”çš„é‚£ä¸ªkeyçš„åå­—ã€‚è¿™ä¸ªkeyå°±æ˜¯æˆ‘ä»¬å¸¸çœ‹åˆ°çš„ï¼š 1RLock lock = redisson.getLock("myLock"); ä¸­çš„myLockï¼Œæˆ‘å°±æ˜¯å¯¹è¿™ä¸ªkeyè¿›è¡ŒåŠ é”ã€‚ è¿™é‡Œçš„ARGV[1]ä»£è¡¨çš„å°±æ˜¯é”keyçš„é»˜è®¤ç”Ÿå­˜æ—¶é—´ï¼Œé»˜è®¤30ç§’ã€‚ARGV[2]ä»£è¡¨çš„æ˜¯åŠ é”çš„å®¢æˆ·ç«¯çš„ID:æ¯”å¦‚8743c9c0-0795-4907-87fd-6c719a6b4586:1 ç¬¬ä¸€æ®µifåˆ¤æ–­è¯­å¥ï¼Œå°±æ˜¯ç›¸å½“äºŽç”¨exists myLockå‘½ä»¤åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æžœä½ è¦åŠ é”çš„é‚£ä¸ªé”keyä¸å­˜åœ¨çš„è¯ï¼Œä½ å°±è¿›è¡ŒåŠ é”ã€‚å¦‚ä½•åŠ é”å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤ï¼šhset myLockã€‚ æ‰§è¡Œå®Œhestä¹‹åŽï¼Œè®¾ç½®äº†ä¸€ä¸ªhashæ•°æ®ç»“æž„ï¼š8743c9c0-0795-4907-87fd-6c719a6b4586:1 1ï¼Œè¿™è¡Œå‘½ä»¤æ‰§è¡ŒåŽï¼Œä¼šå‡ºçŽ°ä¸€ä¸ªç±»ä¼¼ä¸‹é¢çš„æ•°æ®ç»“æž„ï¼š ç´§æŽ¥ç€ä¼šæ‰§è¡Œpexpire myLock 30000å‘½ä»¤ï¼Œè®¾ç½®myLockè¿™ä¸ªé”keyçš„ç”Ÿå­˜æ—¶é—´æ˜¯30ç§’ã€‚å¥½äº†ï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œokï¼ŒåŠ é”å®Œæˆäº†ã€‚ é”äº’æ–¥ é‚£ä¹ˆåœ¨è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æžœå®¢æˆ·ç«¯2æ¥å°è¯•åŠ é”ï¼Œæ‰§è¡Œäº†åŒæ ·çš„ä¸€æ®µluaè„šæœ¬ï¼Œä¼šå’‹æ ·å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç¬¬ä¸€ä¸ªifåˆ¤æ–­ä¼šæ‰§è¡Œexists myLockï¼Œå‘çŽ°myLockè¿™ä¸ªé”keyå·²ç»å­˜åœ¨äº†ã€‚æŽ¥ç€ç¬¬äºŒä¸ªifåˆ¤æ–­ï¼Œåˆ¤æ–­ä¸€ä¸‹ï¼ŒmyLocké”keyçš„hashæ•°æ®ç»“æž„ä¸­ï¼Œæ˜¯å¦åŒ…å«å®¢æˆ·ç«¯2çš„IDï¼Œä½†æ˜¯æ˜Žæ˜¾ä¸æ˜¯çš„ï¼Œå› ä¸ºé‚£é‡ŒåŒ…å«çš„æ˜¯å®¢æˆ·ç«¯1çš„IDã€‚ æ‰€ä»¥è¿™ä¸ªå®¢æˆ·ç«¯2ä¸¤ä¸ªiféƒ½ä¸èƒ½è¿›å…¥ï¼Œåªèƒ½æ‰§è¡Œæœ€åŽçš„pttl myLockï¼Œè¿”å›žå€¼ä»£è¡¨äº†myLockè¿™ä¸ªé”keyçš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ã€‚æ¯”å¦‚è¿˜å‰©15000æ¯«ç§’çš„ç”Ÿå­˜æ—¶é—´ã€‚æ­¤æ—¶å®¢æˆ·ç«¯2ä¼šè¿›å…¥ä¸€ä¸ªwhileå¾ªçŽ¯ï¼Œä¸åœçš„å°è¯•åŠ é”ã€‚ watch dogè‡ªåŠ¨å»¶æœŸæœºåˆ¶ å®¢æˆ·ç«¯1åŠ é”çš„é”keyé»˜è®¤ç”Ÿå­˜æ—¶é—´æ‰30ç§’ï¼Œå¦‚æžœè¶…è¿‡äº†30ç§’ï¼Œå®¢æˆ·ç«¯1è¿˜æƒ³ä¸€ç›´æŒæœ‰è¿™æŠŠé”ï¼Œæ€Žä¹ˆåŠžå‘¢ï¼Ÿ ç®€å•ï¼åªè¦å®¢æˆ·ç«¯1ä¸€æ—¦åŠ é”æˆåŠŸï¼Œå°±ä¼šå¯åŠ¨ä¸€ä¸ªwatch dogçœ‹é—¨ç‹—ï¼Œä»–æ˜¯ä¸€ä¸ªåŽå°çº¿ç¨‹ï¼Œä¼šæ¯éš”10ç§’æ£€æŸ¥ä¸€ä¸‹ï¼Œå¦‚æžœå®¢æˆ·ç«¯1è¿˜æŒæœ‰é”keyï¼Œé‚£ä¹ˆå°±ä¼šä¸æ–­çš„å»¶é•¿é”keyçš„ç”Ÿå­˜æ—¶é—´ã€‚ å¯é‡å…¥åŠ é”æœºåˆ¶ çœ‹ä¸€ä¸‹ä»£ç ï¼Œç›¸åŒçš„å®¢æˆ·è¿›æ¥ï¼Œä¼šè¿›å…¥ç¬¬äºŒä¸ªifï¼Œä¼šæ‰§è¡Œhincrbyï¼Œå³å¢ž1ï¼Œé‚£ä¹ˆè¿™ä¸ªhashç»“æž„å°±ä¼šå˜æˆï¼š é‡Šæ”¾é” å¦‚æžœæ‰§è¡Œlock.unlock()ï¼Œå°±å¯ä»¥é‡Šæ”¾åˆ†å¸ƒå¼é”ï¼Œæ­¤æ—¶çš„ä¸šåŠ¡é€»è¾‘ä¹Ÿæ˜¯éžå¸¸ç®€å•çš„ã€‚å…¶å®žè¯´ç™½äº†ï¼Œå°±æ˜¯æ¯æ¬¡éƒ½å¯¹myLockæ•°æ®ç»“æž„ä¸­çš„é‚£ä¸ªåŠ é”æ¬¡æ•°å‡1ã€‚å¦‚æžœå‘çŽ°åŠ é”æ¬¡æ•°æ˜¯0äº†ï¼Œè¯´æ˜Žè¿™ä¸ªå®¢æˆ·ç«¯å·²ç»ä¸å†æŒæœ‰é”äº†ï¼Œæ­¤æ—¶å°±ä¼šç”¨ï¼šdel myLockå‘½ä»¤ï¼Œä»Žredisé‡Œåˆ é™¤è¿™ä¸ªkeyã€‚ç„¶åŽå‘¢ï¼Œå¦å¤–çš„å®¢æˆ·ç«¯2å°±å¯ä»¥å°è¯•å®ŒæˆåŠ é”äº†ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„åˆ†å¸ƒå¼é”çš„å¼€æºRedissonæ¡†æž¶çš„å®žçŽ°æœºåˆ¶ã€‚ å­˜åœ¨çš„é—®é¢˜ å…¶å®žä¸Šé¢é‚£ç§æ–¹æ¡ˆæœ€å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯å¦‚æžœä½ å¯¹æŸä¸ªredis masterå®žä¾‹ï¼Œå†™å…¥äº†myLockè¿™ç§é”keyçš„valueï¼Œæ­¤æ—¶ä¼šå¼‚æ­¥å¤åˆ¶ç»™å¯¹åº”çš„master slaveå®žä¾‹ã€‚ ä½†æ˜¯å¤åˆ¶çš„è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸€æ—¦å‘ç”Ÿredis masterå®•æœºï¼Œä¸»å¤‡åˆ‡æ¢ï¼Œredis slaveå˜ä¸ºäº†redis masterã€‚ å‡è®¾å®¢æˆ·ç«¯1åœ¨redis masterä¸ŠèŽ·å¾—é”ï¼Œç„¶åŽä¸»æœºå®•æœºï¼Œredis slaveæˆä¸ºæ–°çš„redis masterï¼Œä½†æ˜¯è¿˜æœªåŒæ­¥åˆ°redis slaveä¸Šï¼Œä½†æ˜¯å®¢æˆ·ç«¯1å·²ç»è§‰å¾—è‡ªå·±èŽ·å–åˆ°äº†é”ã€‚ æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯2æ¥å°è¯•åŠ é”çš„æ—¶å€™ï¼Œåœ¨æ–°çš„redis masterä¸Šå®Œæˆäº†åŠ é”ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿå¤šä¸ªå®¢æˆ·ç«¯å®Œæˆå¯¹ä¸€ä¸ªkeyçš„åŠ é”ã€‚è¿™æ—¶ç³»ç»Ÿåœ¨ä¸šåŠ¡è¯­ä¹‰ä¸Šä¸€å®šä¼šå‡ºçŽ°é—®é¢˜ï¼Œå¯¼è‡´å„ç§è„æ•°æ®çš„äº§ç”Ÿã€‚ æ‰€ä»¥è¿™ä¸ªå°±æ˜¯redis clusterï¼Œæˆ–è€…æ˜¯redis master-slaveæž¶æž„çš„ä¸»ä»Žå¼‚æ­¥å¤åˆ¶å¯¼è‡´çš„redisåˆ†å¸ƒå¼é”çš„æœ€å¤§ç¼ºé™·ï¼šåœ¨redis masterå®žä¾‹å®•æœºçš„æ—¶å€™ï¼Œå¯èƒ½å¯¼è‡´å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å®ŒæˆåŠ é”ã€‚]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º]]></title>
    <url>%2F2019%2F01%2F22%2Fmiscellany%2F01%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%2F</url>
    <content type="text"><![CDATA[ç»å¸¸å¬åˆ°æ‹¿åˆ«äººè¯´äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œé‚£åˆ°åº•ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºå‘¢ï¼Ÿ 1.ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ï¼šç”±ä¸€ç³»åˆ—æ•°æ®åº“æ“ä½œç»„æˆçš„ä¸€ä¸ªå®Œæ•´çš„é€»è¾‘è¿‡ç¨‹ã€‚ä¾‹å¦‚é“¶è¡Œè½¬å¸ï¼Œä»ŽåŽŸè´¦æˆ·æ‰£é™¤é‡‘é¢ï¼Œä»¥åŠå‘ç›®æ ‡è´¦æˆ·æ·»åŠ é‡‘é¢ï¼Œè¿™ä¸¤ä¸ªæ•°æ®åº“æ“ä½œçš„æ€»å’Œï¼Œæž„æˆä¸€ä¸ªå®Œæ•´çš„é€»è¾‘è¿‡ç¨‹ï¼Œä¸å¯æ‹†åˆ†ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œå…·æœ‰ACIDç‰¹æ€§ã€‚ ï¼ˆè¿™é‡Œæ³¨æ„ï¼Œå…¶å®žäº‹åŠ¡å°±æ˜¯æ•°æ®åº“æ‰èƒ½ä¿è¯çš„ï¼Œæ‰€ä»¥æŠ›å¼€æ•°æ®åº“å±‚é¢æ¥è°ˆäº‹åŠ¡æœ¬èº«å°±æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥äº‹åŠ¡çš„æ¦‚å¿µå°±æ˜¯æ•°æ®åº“ä¸€ç³»åˆ—æ“ä½œçš„ä¸€ä¸ªå®Œæ•´å•å…ƒã€‚ï¼‰ 2.ä»€ä¹ˆæ˜¯ACIDï¼Ÿ ACIDï¼Œæ˜¯æŒ‡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰åœ¨å†™å…¥æˆ–æ›´æ–°èµ„æ–™çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºä¿è¯äº‹åŠ¡ï¼ˆtransactionï¼‰æ˜¯æ­£ç¡®å¯é çš„ï¼Œæ‰€å¿…é¡»å…·å¤‡çš„å››ä¸ªç‰¹æ€§ï¼šåŽŸå­æ€§ï¼ˆatomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆisolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆdurabilityï¼‰ã€‚ Atomicityï¼ˆåŽŸå­æ€§ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…å…¨éƒ¨å®Œæˆï¼Œæˆ–è€…å…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªçŽ¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«æ¢å¤ï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»Žæ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚å³ï¼Œäº‹åŠ¡ä¸å¯åˆ†å‰²ã€ä¸å¯çº¦ç®€ã€‚ Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åŽï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾çº¦æŸã€è§¦å‘å™¨ã€çº§è”å›žæ»šç­‰ã€‚ Isolationï¼ˆéš”ç¦»æ€§ï¼‰ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºŽäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚ Durabilityï¼ˆæŒä¹…æ€§ï¼‰ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåŽï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ 3.springäº‹åŠ¡ä¼ æ’­è¡Œä¸º åœ¨æˆ‘ä»¬ç”¨SSMå¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯å°†äº‹åŠ¡è®¾ç½®åœ¨Serviceå±‚ é‚£ä¹ˆå½“æˆ‘ä»¬è°ƒç”¨Serviceå±‚çš„ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™å®ƒèƒ½å¤Ÿä¿è¯æˆ‘ä»¬çš„è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œçš„æ‰€æœ‰çš„å¯¹æ•°æ®åº“çš„æ›´æ–°æ“ä½œä¿æŒåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåœ¨äº‹åŠ¡å±‚é‡Œé¢è°ƒç”¨çš„è¿™äº›æ–¹æ³•è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚é‚£ä¹ˆäº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ä¹Ÿæ˜¯ä»Žè¿™é‡Œè¯´èµ·çš„ã€‚ &lt;é‡ç‚¹1&gt; å¦‚æžœä½ åœ¨ä½ çš„Serviceå±‚çš„è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé™¤äº†è°ƒç”¨äº†Daoå±‚çš„æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜è°ƒç”¨äº†æœ¬ç±»çš„å…¶ä»–çš„Serviceæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨å…¶ä»–çš„Serviceæ–¹æ³•çš„æ—¶å€™ï¼Œè¿™ä¸ªäº‹åŠ¡æ˜¯æ€Žä¹ˆè§„å®šçš„å‘¢ï¼Œæˆ‘å¿…é¡»ä¿è¯æˆ‘åœ¨æˆ‘æ–¹æ³•é‡Œè°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•ä¸Žæˆ‘æœ¬èº«çš„æ–¹æ³•å¤„åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¦åˆ™å¦‚æžœä¿è¯äº‹ç‰©çš„ä¸€è‡´æ€§ã€‚äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„. åœ¨Springä¸­æœ‰é’ˆå¯¹ä¼ æ’­ç‰¹æ€§çš„å¤šç§é…ç½®æˆ‘ä»¬å¤§å¤šæ•°æƒ…å†µä¸‹åªç”¨å…¶ä¸­çš„ä¸€ç§:PROPGATION_REQUIREDï¼šè¿™ä¸ªé…ç½®é¡¹çš„æ„æ€æ˜¯è¯´å½“æˆ‘è°ƒç”¨serviceå±‚çš„æ–¹æ³•çš„æ—¶å€™å¼€å¯ä¸€ä¸ªäº‹åŠ¡(å…·ä½“è°ƒç”¨é‚£ä¸€å±‚çš„æ–¹æ³•å¼€å§‹åˆ›å»ºäº‹åŠ¡ï¼Œè¦çœ‹ä½ çš„aopçš„é…ç½®),é‚£ä¹ˆåœ¨è°ƒç”¨è¿™ä¸ªserviceå±‚é‡Œé¢çš„å…¶ä»–çš„æ–¹æ³•çš„æ—¶å€™,å¦‚æžœå½“å‰æ–¹æ³•äº§ç”Ÿäº†äº‹åŠ¡å°±ç”¨å½“å‰æ–¹æ³•äº§ç”Ÿçš„äº‹åŠ¡ï¼Œå¦åˆ™å°±åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚è¿™ä¸ªå·¥ä½œä½¿ç”±Springæ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆçš„ã€‚ &lt;é‡ç‚¹2&gt; é»˜è®¤æƒ…å†µä¸‹å½“å‘ç”ŸRuntimeExceptionçš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡æ‰ä¼šå›žæ»šï¼Œæ‰€ä»¥è¦æ³¨æ„ä¸€ä¸‹ï¼šå¦‚æžœä½ åœ¨ç¨‹åºå‘ç”Ÿé”™è¯¯çš„æƒ…å†µä¸‹ï¼Œæœ‰è‡ªå·±çš„å¼‚å¸¸å¤„ç†æœºåˆ¶å®šä¹‰è‡ªå·±çš„Exceptionï¼Œå¿…é¡»ä»ŽRuntimeExceptionç±»ç»§æ‰¿ï¼Œè¿™æ ·äº‹åŠ¡æ‰ä¼šå›žæ»šï¼ 4.äº‹åŠ¡éš”ç¦»çº§åˆ« 1ã€Serializableï¼šæœ€ä¸¥æ ¼çš„çº§åˆ«ï¼Œäº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œèµ„æºæ¶ˆè€—æœ€å¤§ï¼› 2ã€REPEATABLE READï¼šä¿è¯äº†ä¸€ä¸ªäº‹åŠ¡ä¸ä¼šä¿®æ”¹å·²ç»ç”±å¦ä¸€ä¸ªäº‹åŠ¡è¯»å–ä½†æœªæäº¤ï¼ˆå›žæ»šï¼‰çš„æ•°æ®ã€‚é¿å…äº†â€œè„è¯»å–â€å’Œâ€œä¸å¯é‡å¤è¯»å–â€çš„æƒ…å†µï¼Œä½†æ˜¯å¸¦æ¥äº†æ›´å¤šçš„æ€§èƒ½æŸå¤±ã€‚ 3ã€READ COMMITTED:å¤§å¤šæ•°ä¸»æµæ•°æ®åº“çš„é»˜è®¤äº‹åŠ¡ç­‰çº§ï¼Œä¿è¯äº†ä¸€ä¸ªäº‹åŠ¡ä¸ä¼šè¯»åˆ°å¦ä¸€ä¸ªå¹¶è¡Œäº‹åŠ¡å·²ä¿®æ”¹ä½†æœªæäº¤çš„æ•°æ®ï¼Œé¿å…äº†â€œè„è¯»å–â€ã€‚è¯¥çº§åˆ«é€‚ç”¨äºŽå¤§å¤šæ•°ç³»ç»Ÿã€‚ 4ã€Read Uncommittedï¼šä¿è¯äº†è¯»å–è¿‡ç¨‹ä¸­ä¸ä¼šè¯»å–åˆ°éžæ³•æ•°æ®ã€‚ 5.æ€»ç»“ æœ¬æ–‡çš„é‡ç‚¹æ˜¯åœ¨äºŽç†è§£äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè¿™ä¸ªæ¦‚å¿µï¼Œä»Žäº‹åŠ¡çš„æ¦‚å¿µï¼Œåˆ°äº‹åŠ¡çš„ACIDä»‹ç»ï¼Œå¼•å‡ºäº‹åŠ¡ä¼ æ’­ä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ«è¿™ä¸¤ä¸ªæ¦‚å¿µåŠ ä»¥ç†è§£ã€‚]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ConcurrentHashMap]]></title>
    <url>%2F2019%2F01%2F22%2Fjava-collection%2F12.ConcurrentHashMap%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽå¹¶å‘åœºæ™¯ä¸‹ï¼ŒæŽ¨èä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ concurrentHashMap ï¼Œè€Œä¸æ˜¯ HashMap æˆ–è€…æ˜¯ HashTable .concurrentHashMapåœ¨JDK7å’ŒJDK8ä¸­çš„å®žçŽ°åŽŸç†æ˜¯ä¸ä¸€æ ·çš„ã€‚æœ¬æ–‡åˆ†åˆ«å¯¹å…¶æ ¸å¿ƒæ€æƒ³å’Œæ–¹æ³•è¿›è¡Œé˜è¿°ã€‚ ä¸€ã€JDK7å®žçŽ° ConcurrentHashMap çš„å†…éƒ¨ç»†åˆ†äº†è‹¥å¹²ä¸ªå°çš„ HashMap ï¼Œç§°ä¹‹ä¸ºæ®µï¼ˆ SEGMENT ï¼‰ã€‚ ConcurrentHashMap æ˜¯ä¸€ä¸ª Segment æ•°ç»„ï¼ŒSegment é€šè¿‡ç»§æ‰¿ ReentrantLock æ¥è¿›è¡ŒåŠ é”ï¼Œæ‰€ä»¥æ¯æ¬¡éœ€è¦åŠ é”çš„æ“ä½œé”ä½çš„æ˜¯ä¸€ä¸ª segment ï¼Œè¿™æ ·åªè¦ä¿è¯æ¯ä¸ª Segment æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±å®žçŽ°äº†å…¨å±€çš„çº¿ç¨‹å®‰å…¨ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œæ˜¯ç”± Segment æ•°ç»„ã€HashEntry æ•°ç»„ç»„æˆï¼Œå’Œ HashMap ä¸€æ ·ï¼Œä»ç„¶æ˜¯æ•°ç»„åŠ é“¾è¡¨ç»„æˆã€‚ ConcurrentHashMap é‡‡ç”¨äº†åˆ†æ®µé”æŠ€æœ¯ï¼Œå…¶ä¸­ Segment ç»§æ‰¿äºŽ ReentrantLockã€‚ä¸ä¼šåƒ HashTable é‚£æ ·ä¸ç®¡æ˜¯ put è¿˜æ˜¯ get æ“ä½œéƒ½éœ€è¦åšåŒæ­¥å¤„ç†ï¼Œç†è®ºä¸Š ConcurrentHashMap æ”¯æŒ CurrencyLevel ( Segment æ•°ç»„æ•°é‡)çš„çº¿ç¨‹å¹¶å‘ã€‚æ¯å½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®ä¸€ä¸ª Segment æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ Segmentã€‚ 1.1 getæ–¹æ³• ConcurrentHashMap çš„ get æ–¹æ³•æ˜¯éžå¸¸é«˜æ•ˆçš„ï¼Œå› ä¸ºæ•´ä¸ªè¿‡ç¨‹éƒ½ä¸éœ€è¦åŠ é”ã€‚ åªéœ€è¦å°† Key é€šè¿‡ Hash ä¹‹åŽå®šä½åˆ°å…·ä½“çš„ Segment ï¼Œå†é€šè¿‡ä¸€æ¬¡ Hash å®šä½åˆ°å…·ä½“çš„å…ƒç´ ä¸Šã€‚ç”±äºŽ HashEntry ä¸­çš„ value å±žæ€§æ˜¯ç”¨ volatile å…³é”®è¯ä¿®é¥°çš„ï¼Œä¿è¯äº†å†…å­˜å¯è§æ€§ï¼Œæ‰€ä»¥æ¯æ¬¡èŽ·å–æ—¶éƒ½æ˜¯æœ€æ–°å€¼. å†…éƒ¨ HashEntry ç±» ï¼š 12345678910111213static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; volatile HashEntry&lt;K,V&gt; next; HashEntry(int hash, K key, V value, HashEntry&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125;&#125; 1.2 putæ–¹æ³• è™½ç„¶ HashEntry ä¸­çš„ value æ˜¯ç”¨ volatile å…³é”®è¯ä¿®é¥°çš„ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯å¹¶å‘çš„åŽŸå­æ€§ï¼Œæ‰€ä»¥ put æ“ä½œæ—¶ä»ç„¶éœ€è¦åŠ é”å¤„ç†ã€‚ é¦–å…ˆä¹Ÿæ˜¯é€šè¿‡ Key çš„ Hash å®šä½åˆ°å…·ä½“çš„ Segmentï¼Œåœ¨ put ä¹‹å‰ä¼šè¿›è¡Œä¸€æ¬¡æ‰©å®¹æ ¡éªŒã€‚è¿™é‡Œæ¯” HashMap è¦å¥½çš„ä¸€ç‚¹æ˜¯ï¼šHashMap æ˜¯æ’å…¥å…ƒç´ ä¹‹åŽå†çœ‹æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œæœ‰å¯èƒ½æ‰©å®¹ä¹‹åŽåŽç»­å°±æ²¡æœ‰æ’å…¥å°±æµªè´¹äº†æœ¬æ¬¡æ‰©å®¹(æ‰©å®¹éžå¸¸æ¶ˆè€—æ€§èƒ½)ã€‚ è€Œ ConcurrentHashMap ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯åœ¨å°†æ•°æ®æ’å…¥ä¹‹å‰æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œä¹‹åŽå†åšæ’å…¥æ“ä½œã€‚ 1.3 sizeæ–¹æ³• æ¯ä¸ª Segment éƒ½æœ‰ä¸€ä¸ª volatile ä¿®é¥°çš„å…¨å±€å˜é‡ count ,æ±‚æ•´ä¸ª ConcurrentHashMap çš„ size æ—¶å¾ˆæ˜Žæ˜¾å°±æ˜¯å°†æ‰€æœ‰çš„ count ç´¯åŠ å³å¯ã€‚ä½†æ˜¯ volatile ä¿®é¥°çš„å˜é‡å´ä¸èƒ½ä¿è¯å¤šçº¿ç¨‹çš„åŽŸå­æ€§ï¼Œæ‰€æœ‰ç›´æŽ¥ç´¯åŠ å¾ˆå®¹æ˜“å‡ºçŽ°å¹¶å‘é—®é¢˜ã€‚ ä½†å¦‚æžœæ¯æ¬¡è°ƒç”¨ size æ–¹æ³•å°†å…¶ä½™çš„ä¿®æ”¹æ“ä½œåŠ é”æ•ˆçŽ‡ä¹Ÿå¾ˆä½Žã€‚æ‰€ä»¥åšæ³•æ˜¯å…ˆå°è¯•ä¸¤æ¬¡å°† count ç´¯åŠ ï¼Œå¦‚æžœå®¹å™¨çš„ count å‘ç”Ÿäº†å˜åŒ–å†åŠ é”æ¥ç»Ÿè®¡ sizeã€‚ åœ¨ JDK7 ä¸­ï¼Œç¬¬ä¸€ç§æ–¹æ¡ˆä»–ä¼šä½¿ç”¨ä¸åŠ é”çš„æ¨¡å¼åŽ»å°è¯•å¤šæ¬¡è®¡ç®— ConcurrentHashMap çš„ sizeï¼Œæœ€å¤šä¸‰æ¬¡ï¼Œæ¯”è¾ƒå‰åŽä¸¤æ¬¡è®¡ç®—çš„ç»“æžœï¼Œç»“æžœä¸€è‡´å°±è®¤ä¸ºå½“å‰æ²¡æœ‰å…ƒç´ åŠ å…¥ï¼Œè®¡ç®—çš„ç»“æžœæ˜¯å‡†ç¡®çš„ã€‚ ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯å¦‚æžœç¬¬ä¸€ç§æ–¹æ¡ˆä¸ç¬¦åˆï¼Œä»–å°±ä¼šç»™æ¯ä¸ª Segment åŠ ä¸Šé”ï¼Œç„¶åŽè®¡ç®— ConcurrentHashMap çš„ size è¿”å›žã€‚å…¶æºç å®žçŽ°: 12345678910111213141516171819202122232425262728293031323334353637public int size() &#123; final Segment&lt;K,V&gt;[] segments = this.segments; int size; boolean overflow; // true if size overflows 32 bits long sum; // sum of modCounts long last = 0L; // previous sum int retries = -1; // first iteration isn't retry try &#123; for (;;) &#123; if (retries++ == RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) ensureSegment(j).lock(); // force creation &#125; sum = 0L; size = 0; overflow = false; for (int j = 0; j &lt; segments.length; ++j) &#123; Segment&lt;K,V&gt; seg = segmentAt(segments, j); if (seg != null) &#123; sum += seg.modCount; int c = seg.count; if (c &lt; 0 || (size += c) &lt; 0) overflow = true; &#125; &#125; if (sum == last) break; last = sum; &#125; &#125; finally &#123; if (retries &gt; RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) segmentAt(segments, j).unlock(); &#125; &#125; return overflow ? Integer.MAX_VALUE : size;&#125; å…¶ä¸­ 12// é”ä¹‹å‰é‡è¯•æ¬¡æ•°static final int RETRIES_BEFORE_LOCK = 2; äºŒã€JDK8å®žçŽ° jdk8 ä¸­çš„ ConcurrentHashMap æ•°æ®ç»“æž„å’Œå®žçŽ°ä¸Ž jdk7 è¿˜æ˜¯æœ‰ç€æ˜Žæ˜¾çš„å·®å¼‚ã€‚ å…¶ä¸­æŠ›å¼ƒäº†åŽŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚ ä¹Ÿå°† jdk7 ä¸­å­˜æ”¾æ•°æ®çš„ HashEntry æ”¹ä¸º Nodeï¼Œä½†ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ã€‚ å…¶ä¸­çš„ val next éƒ½ç”¨äº† volatile ä¿®é¥°ï¼Œä¿è¯äº†å¯è§æ€§ã€‚ 2.1 putæ–¹æ³• é‡ç‚¹æ¥çœ‹çœ‹ put å‡½æ•°ï¼š æ ¹æ® key è®¡ç®—å‡º hashcode ã€‚ åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚ f å³ä¸ºå½“å‰ key å®šä½å‡ºçš„ Nodeï¼Œå¦‚æžœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨ CAS å°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸã€‚ å¦‚æžœå½“å‰ä½ç½®çš„ hashcode == MOVED == -1,åˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚ å¦‚æžœéƒ½ä¸æ»¡è¶³(ä¸éœ€è¦åˆå§‹åŒ–ã€Nodeä¸ä¸ºç©ºã€ä¸éœ€è¦æ‰©å®¹)ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®ã€‚ å¦‚æžœæ•°é‡å¤§äºŽ TREEIFY_THRESHOLD åˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚ 2.2 getæ–¹æ³• æ ¹æ®è®¡ç®—å‡ºæ¥çš„ hashcode å¯»å€ï¼Œå¦‚æžœå°±åœ¨æ¡¶ä¸Šé‚£ä¹ˆç›´æŽ¥è¿”å›žå€¼ã€‚ å¦‚æžœæ˜¯çº¢é»‘æ ‘é‚£å°±æŒ‰ç…§æ ‘çš„æ–¹å¼èŽ·å–å€¼ã€‚ éƒ½ä¸æ»¡è¶³é‚£å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éåŽ†èŽ·å–å€¼ã€‚ 2.3 sizeæ–¹æ³• JDK8 å®žçŽ°ç›¸æ¯” JDK7 ç®€å•å¾ˆå¤šï¼Œåªæœ‰ä¸€ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬ç›´æŽ¥çœ‹ size() ä»£ç ï¼š 123456789101112131415161718192021public int size() &#123; long n = sumCount(); return ((n &lt; 0L) ? 0 : (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE : (int)n); &#125;final long sumCount() &#123; CounterCell[] as = counterCells; CounterCell a; //èŽ·å–baseCountå€¼ long sum = baseCount; //éåŽ†CounterCellæ•°ç»„å…¨éƒ¨åŠ åˆ°baseCountä¸Šï¼Œå®ƒä»¬çš„å’Œå°±æ˜¯size if (as != null) &#123; for (int i = 0; i &lt; as.length; ++i) &#123; if ((a = as[i]) != null) sum += a.value; &#125; &#125; return sum; &#125; å¯èƒ½ä½ ä¼šæœ‰æ‰€ç–‘é—®ï¼ŒConcurrentHashMap ä¸­çš„ baseCount å±žæ€§ä¸å°±æ˜¯è®°å½•çš„æ‰€æœ‰é”®å€¼å¯¹çš„æ€»æ•°å—ï¼Ÿç›´æŽ¥è¿”å›žå®ƒä¸å°±è¡Œäº†å—ï¼Ÿ ä¹‹æ‰€ä»¥æ²¡æœ‰è¿™ä¹ˆåšï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„ addCount æ–¹æ³•ç”¨äºŽ CAS æ›´æ–° baseCountï¼Œä½†å¾ˆæœ‰å¯èƒ½åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°å¤±è´¥ï¼Œé‚£ä¹ˆè¿™äº›èŠ‚ç‚¹è™½ç„¶å·²ç»è¢«æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­äº†ï¼Œä½†æ˜¯æ•°é‡å´æ²¡æœ‰è¢«ç»Ÿè®¡ã€‚ è¿˜å¥½ï¼ŒaddCount æ–¹æ³•åœ¨æ›´æ–° baseCount å¤±è´¥çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ fullAddCount å°†è¿™äº›å¤±è´¥çš„ç»“ç‚¹åŒ…è£…æˆä¸€ä¸ª CounterCell å¯¹è±¡ï¼Œä¿å­˜åœ¨ CounterCell æ•°ç»„ä¸­ã€‚é‚£ä¹ˆæ•´å¼ è¡¨å®žé™…çš„ size å…¶å®žæ˜¯ baseCount åŠ ä¸Š CounterCellæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚ ä¸‰ã€æ€»ç»“ å¹¶å‘æƒ…å†µä¸‹è¯·ä½¿ç”¨concurrentHashMap åœ¨jdk7ä¸­ï¼Œç”¨çš„æ˜¯åˆ†æ®µé”ï¼Œé»˜è®¤æ˜¯12æ®µï¼Œé‚£ä¹ˆå¹¶å‘é‡æœ€å¤šä¹Ÿå°±12. getä¸åŠ é”ï¼Œç¬¬ä¸€æ¬¡hashå®šä½åˆ°segmentï¼Œç¬¬äºŒæ¬¡hashå®šä½åˆ°å…ƒç´ ï¼Œå…ƒç´ å€¼æ˜¯ç”¨volatileä¿è¯å†…å­˜å¯è§æ€§ putéœ€è¦åŠ é”ï¼Œhashå®šä½åˆ°segmentåŽï¼Œå…ˆæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹å†æ’å…¥ã€‚ sizeå…ˆä½¿ç”¨ä¸åŠ é”çš„æ¨¡å¼åŽ»å°è¯•å¤šæ¬¡è®¡ç®—sizeï¼Œæœ€å¤šä¸‰æ¬¡ï¼Œæ¯”è¾ƒå‰åŽä¸¤æ¬¡è®¡ç®—çš„ç»“æžœï¼Œç»“æžœä¸€è‡´å°±è®¤ä¸ºå½“å‰æ²¡æœ‰å…ƒç´ åŠ å…¥ï¼›å¦‚æžœä¸ä¸€è‡´ï¼Œç»™æ¯ä¸ª Segment åŠ ä¸Šé”å†ä¾æ¬¡åŽ»è®¡ç®—ä¸ªæ•° åœ¨jdk8ä¸­ï¼Œé‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ putçš„è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œç®€å•æ¥è¯´æ˜¯ï¼šå…ˆè®¡ç®—hashå®šä½åˆ°nodeâ€”ã€‹åˆ¤æ–­æ˜¯å¦åˆå§‹åŒ–â€”ã€‹å¦‚æžœnodeä¸ºç©ºåˆ™è¡¨ç¤ºå¯ä»¥æ’å…¥ï¼Œç”¨casæ’å…¥â€”ã€‹åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹â€”ã€‹å¦‚æžœä¸éœ€è¦åˆå§‹åŒ–ã€Nodeä¸ä¸ºç©ºã€ä¸éœ€è¦æ‰©å®¹ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®â€”ã€‹åˆ¤æ–­æ˜¯å¦éœ€è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ getå°±æ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥æ ¹æ®hashå®šä½åˆ°nodeï¼Œç„¶åŽä»¥é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘çš„æ–¹å¼æ‹¿åˆ° sizeæ–¹æ³•å°±ä¸€ç§æ–¹æ¡ˆï¼šbaseCount+CounterCell[]ä¸­æ‰€æœ‰å…ƒç´  æ•´ç†è‡ªï¼š https://crossoverjie.top/JCSprout/#/thread/ConcurrentHashMap?id=size-æ–¹æ³• https://www.jianshu.com/p/e99e3fcface4]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapæ­»å¾ªçŽ¯é—®é¢˜]]></title>
    <url>%2F2019%2F01%2F21%2Fjava-collection%2F11.HashMap%E6%AD%BB%E5%BE%AA%E7%8E%AF%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[JDK1.7æˆ–è€…æ›´è€çš„ç‰ˆæœ¬ä¸­åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹æ˜¯ä¼šå­˜åœ¨æ­»å¾ªçŽ¯é—®é¢˜ï¼Œç©¶å…¶åŽŸå› æ˜¯putè¿‡ç¨‹ä¸­çš„resizeæ–¹æ³•åœ¨è°ƒç”¨transferæ–¹æ³•çš„æ—¶å€™å¯¼è‡´çš„æ­»é”ã€‚è¿™æ¬¡æˆ‘ä»¬æ¥çœ‹çœ‹åˆ°åº•æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼ æ ¸å¿ƒæºç  åœ¨JDK8ä¸­ï¼Œå†…éƒ¨å·²ç»è°ƒæ•´ï¼Œè§£å†³äº†æ­»å¾ªçŽ¯é—®é¢˜ï¼Œæ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿå°†JDK7ä¸­å¤´æ’å…¥æ³•æ”¹ä¸ºæœ«ç«¯æ’å…¥ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚å…³äºŽè¿™ä¸ªï¼Œå¯ä»¥æŸ¥çœ‹jdk8æºç ä¸­çš„resizeæ–¹æ³•ã€‚ ä¸Šé¢æåˆ°æ˜¯ç”±äºŽputæ—¶å‡ºçŽ°é—®é¢˜ï¼Œé‚£ä¹ˆå…ˆæ¥åˆ°put()ä¸­çœ‹çœ‹ï¼š æˆ‘ä»¬çœ‹åˆ°ï¼Œputä¸€ä¸ªä¸å­˜åœ¨çš„æ–°å…ƒç´ ï¼Œå¿…ç„¶å¢žåŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¿›å…¥è¿™ä¸ªå¢žåŠ èŠ‚ç‚¹çš„æ–¹æ³•ï¼š æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œéœ€è¦çš„è¯å°±resize: ä¸‹é¢å°±æ˜¯å¯¹é“¾è¡¨æ•°æ®è¿›è¡Œè¿ç§»ï¼š æ ¸å¿ƒçš„ä»£ç å°±æ˜¯è¿™ä¹ˆå¤šï¼Œé¦–å…ˆè¦å¼ºè°ƒä¸€ä¸‹ï¼šä¸¤ä¸ªçº¿ç¨‹è¿›æ¥ï¼Œæ˜¯åˆ†åˆ«å»ºç«‹äº†ä¸¤ä¸ªç‹¬ç«‹çš„æ‰©å®¹åŽçš„æ•°ç»„ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯ä¸¤ä¸ªé•¿åº¦ä¸º4çš„æ•°ç»„ã€‚è€çš„æ•°ç»„ä¸º2ä¸ªæ•°å°±æ˜¯å”¯ä¸€çš„ã€‚æ‰€ä»¥åœ¨ç¬¬ä¸€æ­¥ï¼Œçº¿ç¨‹2è¿è¡Œç»“æŸæ—¶ï¼Œè€çš„æ•°ç»„å…ƒç´ å·²ç»ç©ºäº†ã€‚ ä¸‹é¢å…ˆæ¼”ç¤ºä¸€ä¸‹æ­£å¸¸çš„rehashè¿‡ç¨‹ã€‚ æ­£å¸¸æƒ…å†µ å‡è®¾äº†æˆ‘ä»¬çš„hashç®—æ³•å°±æ˜¯ç®€å•çš„ç”¨ key mod ä¸€ä¸‹æ•°ç»„(hashè¡¨)çš„å¤§å° æœ€ä¸Šé¢çš„æ˜¯old hash è¡¨ï¼Œå…¶ä¸­çš„Hashè¡¨çš„size=2, æ‰€ä»¥key = 3, 7, 5ï¼Œåœ¨mod 2ä»¥åŽéƒ½å†²çªåœ¨table[1]è¿™é‡Œäº†ã€‚ æŽ¥ä¸‹æ¥çš„ä¸‰ä¸ªæ­¥éª¤æ˜¯Hashè¡¨ resize æˆ4ï¼Œç„¶åŽæ‰€æœ‰çš„ &lt;key,value&gt; é‡æ–° rehash çš„è¿‡ç¨‹ æ³¨æ„åˆ°ï¼Œåœ¨JDK7ä¸­ï¼Œæ˜¯æŒ‰ç…§å¤´æ’å…¥æ³•ä¾æ¬¡æ’å…¥çš„ã€‚æ‰€ä»¥7æ’åˆ°äº†3å‰é¢ã€‚ å¹¶å‘æƒ…å†µ 1.åˆå§‹æƒ…å†µ å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ã€‚æˆ‘ç”¨çº¢è‰²å’Œæµ…è“è‰²æ ‡æ³¨äº†ä¸€ä¸‹ã€‚ å¯¹äºŽç¬¬ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œå®Œè¿™ä¸€è¡Œï¼Œç„¶åŽæŒ‚èµ·ï¼Œæ­¤æ—¶ e å’Œ next éƒ½é™„å¥½å€¼äº†ï¼š è€Œè®©çº¿ç¨‹äºŒæ‰§è¡Œå®Œæˆã€‚äºŽæ˜¯æˆ‘ä»¬æœ‰ä¸‹é¢çš„è¿™ä¸ªæ ·å­ï¼š å› ä¸ºThread1çš„ e æŒ‡å‘äº† key(3) ï¼Œè€Œ next æŒ‡å‘äº† key(7) ï¼Œå…¶åœ¨ Thread2 rehashåŽï¼ŒæŒ‡å‘äº† Thread2 é‡ç»„åŽçš„é“¾è¡¨ã€‚ 2.Thread1è¢«è°ƒåº¦å›žæ¥æ‰§è¡Œ å…ˆæ˜¯æ‰§è¡Œ newTalbe[i] = e ï¼šæ­¤æ—¶çº¿ç¨‹1çš„ç¬¬ä¸‰ä¸ªä½ç½®å°±æ˜¯æŒ‡å‘å…ƒç´ 3; ç„¶åŽæ˜¯ e = nextï¼Œå¯¼è‡´äº† e æŒ‡å‘äº† key(7) ; è€Œä¸‹ä¸€æ¬¡å¾ªçŽ¯çš„ next = e.next å¯¼è‡´äº† next æŒ‡å‘äº† key(3) ; 3.ä¸€åˆ‡å®‰å¥½ çº¿ç¨‹ä¸€æŽ¥ç€å·¥ä½œã€‚æŠŠ key(7) æ‘˜ä¸‹æ¥ï¼Œæ”¾åˆ° newTable[i] çš„ç¬¬ä¸€ä¸ªï¼Œç„¶åŽæŠŠ e å’Œ next å¾€ä¸‹ç§»ã€‚ 4.çŽ¯å½¢é“¾æŽ¥å‡ºçŽ° e.next = newTable[i] å¯¼è‡´ key(3).next æŒ‡å‘äº† key(7) æ³¨æ„ï¼šæ­¤æ—¶çš„ key(7).next å·²ç»æŒ‡å‘äº† key(3)ï¼Œ çŽ¯å½¢é“¾è¡¨å°±è¿™æ ·å‡ºçŽ°äº†ã€‚ è‡ªå·±çš„ç®€å•æ•´ç† è¿™é‡Œè¿˜æ˜¯æ¯”è¾ƒç»•çš„ï¼Œç†è§£çš„æœ€å¥½æ–¹å¼å·¦è¾¹æ”¾æºç ï¼Œå³è¾¹æ”¾å›¾ï¼Œä¸­é—´ç”¨è‰ç¨¿çº¸ç”»ä¸€ç”»ã€‚ é‚£ä¹ˆï¼Œè¿™é‡Œæˆ‘åœ¨å¯¹å…¶è¿‡ç¨‹å°½å¯èƒ½åœ°è®²æ˜Žç™½ä¸€ç‚¹ã€‚æˆ‘ä»¬å…ˆç¡®å®š7å’Œ3ä¼šå…¨éƒ¨è½åˆ°æ‰©å®¹åŽçš„ä¸‹æ ‡ä¸º3çš„ä½ç½®(3%4=3,7%4=3)ã€‚ è§„å®šçº¿ç¨‹1å¼€è¾Ÿçš„æ•°ç»„ä¸º arr1 ï¼Œçº¿ç¨‹2å¼€è¾Ÿçš„æ•°ç»„ä¸º arr2; 1. åˆå§‹çŠ¶æ€ çº¿ç¨‹ä¸€ï¼š e -&gt; key3 , next -&gt; key7 çº¿ç¨‹äºŒï¼š æ•°ç»„3å·ä½ç½® arr2[3] -&gt; key7 -&gt; key3 æ³¨æ„æ­¤æ—¶ key7 æŒ‡å‘ key3 . æˆ‘ä»¬è¦æ˜Žç¡®ä¸€ä¸‹ï¼Œå‘ç”Ÿæ­»å¾ªçŽ¯ï¼Œæ˜¯æŒ‡åœ¨putæ“ä½œå®Œæ¯•ä¹‹åŽï¼Œæœ€ç»ˆç”Ÿæˆçš„æ•°ç»„ä¸­æœ‰æ­»å¾ªçŽ¯å¼•ç”¨æ‰è¡Œï¼Œåƒä¸‡ä¸è¦ä¸€å¼€å§‹çœ‹çº¿ç¨‹ä¸€ç§key3æŒ‡å‘key7ï¼Œç„¶åŽçº¿ç¨‹äºŒç§key7æŒ‡å‘key3å°±æ˜¯æ­»å¾ªçŽ¯äº†ã€‚ã€‚ã€‚ 2. çº¿ç¨‹ä¸€ç»§ç»­æ‰§è¡Œ i = 3 e.next = key7,æ­¤æ—¶ e=key3 ,æ‰€ä»¥æ˜¯ key3.next = key7ï¼ˆè¿™æ˜¯çº¿ç¨‹1çš„åˆå§‹çŠ¶æ€å†³å®šçš„ï¼‰ arr1[3] æŒ‡å‘ key3 e ä¸º key7 3.ç”±äºŽeä¸ä¸ºç©ºï¼Œæ‰€ä»¥è¿˜ä¼šå¾ªçŽ¯ï¼š ä¸Šä¸€æ­¥ e ä¸º key7ï¼Œæ‰€ä»¥ next = key7.next ï¼Œåˆ°çº¿ç¨‹2ä¸­ä¸€çœ‹æ˜¯ key3 ï¼Œæ‰€ä»¥ next = key3ï¼ˆçº¿ç¨‹2ä¸­key7.nextå°±æ˜¯key3ï¼‰ i = 3 e.next = key3------æ³¨æ„ï¼Œè¿™é‡Œå°±æ˜¯Key7æŒ‡å‘äº†key3,key7çš„nextå¼•ç”¨ä¸‹é¢æ²¡æœ‰å˜è¿‡ï¼Œæ‰€ä»¥è¿™é‡Œåšä¸€ä¸‹è®°å½•ï¼Œå³key7æŒ‡å‘key3 newTable[3] = key7 e = key3 4.ç”±äºŽeä¸ä¸ºç©ºï¼Œæ‰€ä»¥è¿˜ä¼šå¾ªçŽ¯ï¼š ä¸Šä¸€æ­¥ e=key3 , next=null i=3 key3.next = key7ï¼Œæ³¨æ„,ç”±äºŽkey7å·²ç»æŒ‡å‘äº†key3ï¼Œæ­¤æ—¶key3åˆæŒ‡å‘key7,å‘ç”Ÿæ­»å¾ªçŽ¯ newTable[3] = key3 e = null 5.eä¸ºnullï¼Œè·³å‡ºå¾ªçŽ¯ã€‚ æ­¤æ—¶å‘çŽ°key3åˆæŒ‡å‘äº†key7ã€‚å‘ç”Ÿæ­»å¾ªçŽ¯ã€‚ æ•´ç†è‡ª:https://coolshell.cn/articles/9606.html/comment-page-2#comments]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxé‡è¦çš„ä¸€äº›å‘½ä»¤]]></title>
    <url>%2F2019%2F01%2F21%2Flinux%E9%87%8D%E8%A6%81%E7%9A%84%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[å¾ˆå¤šå‘½ä»¤ä¹‹æ‰€ä»¥é‡è¦ï¼Œæ˜¯å› ä¸ºç”¨å®ƒä»¬ä¼šå¤§å¹…æé«˜å·¥ä½œæ•ˆçŽ‡ã€‚æ‰€ä»¥ï¼Œç†Ÿæ‚‰å®ƒä»¬æ˜¯æˆ‘ä»¬å¿…é¡»è¦åšçš„ä¸€ä»¶äº‹æƒ…ã€‚ä¸‹é¢ç€é‡æå–äº†findã€grepã€ç®¡é“ã€wcã€awkä»¥åŠsedç­‰å‡ ä¸ªå‘½ä»¤æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ã€‚ ä¸€ã€Linuxä½“ç³»ç»“æž„ å¯¹è¿™å¹…å›¾è¿›è¡Œè¯¦ç»†è¯´æ˜Žä¸€ä¸‹ã€‚ ä½“ç³»ç»“æž„ä¸»è¦åˆ†ä¸ºç”¨æˆ·æ€(ç”¨æˆ·ä¸Šå±‚æ´»åŠ¨)å’Œå†…æ ¸æ€ å†…æ ¸ï¼šæœ¬è´¨æ˜¯ä¸€æ®µç®¡ç†è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡çš„ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºç›´æŽ¥ç®¡ç†ç¡¬ä»¶ï¼šåŒ…æ‹¬CPUã€å†…å­˜ç©ºé—´ã€ç¡¬ç›˜æŽ¥å£ã€ç½‘ç»œæŽ¥å£ç­‰ã€‚æ‰€æœ‰çš„è®¡ç®—æœºæ“ä½œéƒ½è¦é€šè¿‡å†…æ ¸æ¥æ“ä½œã€‚ ç³»ç»Ÿè°ƒç”¨ï¼šå†…æ ¸çš„è®¿é—®æŽ¥å£ï¼Œæ˜¯ä¸€ç§ä¸èƒ½å†ç®€åŒ–çš„æ“ä½œ(å¯ä»¥è®¤ä¸ºç³»ç»Ÿè°ƒç”¨å·²ç»æ˜¯æœ€å°çš„åŽŸå­æ“ä½œï¼Œä¸Šå±‚å®Œæˆä¸€ä¸ªåŠŸèƒ½è¦ä¾æ‰˜äºŽè‹¥å¹²ç³»ç»Ÿè°ƒç”¨æ‰èƒ½å®Œæˆ) ç”±äºŽç³»ç»Ÿè°ƒç”¨æ¯”è¾ƒåŸºç¡€ï¼Œè¦å®Œæˆä¸€ä¸ªåŠŸèƒ½éœ€è¦å¾ˆå¤šç³»ç»Ÿè°ƒç”¨ç»„åˆæ‰èƒ½å®žçŽ°ï¼Œå¯¹äºŽç¨‹åºå‘˜æ¥è¯´æ¯”è¾ƒå¤æ‚ã€‚è¿™ä¸ªæ—¶å€™æ€Žä¹ˆåŠžå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è°ƒç”¨å…¬å…±å‡½æ•°åº“ï¼šç³»ç»Ÿè°ƒç”¨çš„ç»„åˆæ‹³ã€‚ç®€åŒ–ç¨‹åºå‘˜æ“ä½œã€‚ Shellä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„åº”ç”¨ç¨‹åºï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼Œå¯ä»¥ç¼–ç¨‹ã€‚ Shellä¸‹é€šç³»ç»Ÿè°ƒç”¨ï¼Œä¸Šé€šå„ç§åº”ç”¨ï¼Œæ˜¯ä¸Šå±‚å’Œä¸‹å±‚ä¹‹é—´ç²˜åˆçš„èƒ¶æ°´ï¼Œè®©ä¸åŒç¨‹åºå¯ä»¥å•åŒå·¥ä½œã€‚ åœ¨æ²¡æœ‰å›¾å½¢ç•Œé¢ä¹‹å‰ï¼Œç”¨æˆ·é€šè¿‡shellå‘½ä»¤è¡Œæˆ–è€…å¯ç¼–ç¨‹çš„shellè„šæœ¬å¯ä»¥å®Œæˆå¾ˆå¤šäº‹æƒ…ã€‚ äºŒã€å¦‚ä½•æ ¹æ®æ–‡ä»¶åæ£€ç´¢æ–‡ä»¶ find åœ¨æŒ‡å®šç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶ è¯­æ³• find path [options] params 2.1 ç²¾ç¡®æŸ¥æ‰¾æ–‡ä»¶ æ¯”å¦‚æˆ‘åœ¨å½“å‰ç›®å½•(å¯èƒ½åœ¨å­ç›®å½•ä¸‹)ä¸‹æ‰¾ä¸€ä¸ªæ–‡ä»¶å«åštest.javaï¼š 1find -name "test.java" è¿™ä¸ªæŒ‡ä»¤å°±å¯ä»¥åœ¨æœ¬ç›®å½•ä»¥åŠå­ç›®å½•ä¸‹é€’å½’æŸ¥æ‰¾è¿™ä¸ªæ–‡ä»¶äº†ã€‚ å®žä¾‹ï¼šç²¾ç¡®æŸ¥è¯¢åå­—å«snailmall-api-gateway-8080.jarè¿™ä¸ªæ–‡ä»¶ï¼š 2.2 å…¨å±€æœç´¢ å¦‚æžœæ˜¯å…¨å±€æŸ¥æ‰¾ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œæ— éžæ˜¯ä»Žæ ¹ç›®å½•å¼€å§‹é€’å½’æŸ¥æ‰¾ã€‚ 1find / -name "test.java" å®žä¾‹ï¼šæˆ‘å¯¹è¿™å°æœåŠ¡å™¨å…¨å±€æŸ¥æ‰¾æ–‡ä»¶åä»¥snailmallå¼€å¤´çš„æ‰€æœ‰æ–‡ä»¶ï¼š 2.3 æ¨¡ç³ŠæŸ¥è¯¢ å¦‚æžœæ‰¾ä»¥testæ‰“å¤´çš„æ–‡ä»¶ï¼š 1find -name "test*" å³ç”¨ * é€šé…ç¬¦å°±å¯ä»¥æ¨¡ç³ŠæŸ¥è¯¢åˆ°ä»¥ test æ‰“å¤´çš„æ–‡ä»¶ã€‚ å®žä¾‹ï¼Œæˆ‘çš„è¿™å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²äº†å‡ ä¸ªå…³äºŽå•†åŸŽçš„æœåŠ¡ï¼Œè¿™ä¸ªç›®å½•ä¸‹æˆ‘æ”¾äº†jaråŒ…å’Œç›¸åº”çš„å¯åŠ¨ä¿¡æ¯æ–‡ä»¶ã€‚æˆ‘å¯¹å…¶è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼š 2.4 å¿½ç•¥å¤§å°å†™ 1find -iname "test*" ä¸‰ã€å¦‚ä½•æ ¹æ®æ–‡ä»¶å†…çš„å†…å®¹è¿›è¡Œæ£€ç´¢ 3.1 grepå‘½ä»¤ grep æŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² è¯­æ³•ï¼šgrep [options] pattern file æ¯”å¦‚ test.java ä¸­æœ‰ä¸€å¥è¯æ˜¯ï¼š 1System.out.println("i love java"); é‚£ä¹ˆå¦‚ä½•æŸ¥æ‰¾ test.java ä¸­çš„ java å‘¢ï¼Ÿ 1grep "java" test* è¿™å¥è¯æ„æ€å°±æ˜¯æŸ¥æ‰¾ä»¥ test æ‰“å¤´çš„æ–‡ä»¶ä¸­çš„åŒ…å« java å­—ç¬¦ä¸²æ‰€åœ¨çš„è¡Œã€‚ ç›´æŽ¥è¾“å…¥ï¼š 1grep "hello" ä¼šç­‰å¾…ç”¨æˆ·è¾“å…¥æ–‡æœ¬ã€‚ç„¶åŽå†å¯¹è¾“å…¥çš„å†…å®¹è¿›è¡Œæ£€ç´¢ã€‚ 3.2 ç®¡é“æ“ä½œç¬¦ | å¯å°†æŒ‡ä»¤è¿žæŽ¥èµ·æ¥ï¼Œå‰ä¸€ä¸ªæŒ‡ä»¤çš„è¾“å‡ºä½œä¸ºåŽä¸€ä¸ªæŒ‡ä»¤çš„è¾“å…¥ã€‚ 1find / | grep "test" ä½œç”¨åŒï¼š 1find / -name "test" æ³¨æ„ï¼š åªæœ‰å‰ä¸€ä¸ªæŒ‡ä»¤æ­£ç¡®æ‰ä¼šå†å¤„ç†ã€‚ ç®¡é“å³è¾¹å‘½ä»¤å¿…é¡»èƒ½æŽ¥æ”¶æ ‡å‡†è¾“å…¥æµï¼Œå¦åˆ™ä¼ é€’è¿‡ç¨‹ä¸­æ•°æ®ä¼šè¢«æŠ›å¼ƒ 3.3 grepç»“åˆç®¡é“ 1grep 'xxx' hello.info å¯ä»¥å°† xxx æ‰€åœ¨çš„è¡Œå…¨éƒ¨ç­›é€‰å‡ºæ¥ï¼Œä½†æ˜¯è¿˜æ˜¯ç‰¹åˆ«å¤šï¼Œæˆ‘æ¯”å¦‚å…³å¿ƒè¿™æ¯ä¸€è¡Œä¸­æŸä¸ªå­—æ®µçš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯ param[xx12]è¿™ç§ä¿¡æ¯ã€‚å¦‚ä½•å®žçŽ°ç­›é€‰å‘¢ï¼Ÿ 1grep 'xxx' hello.info | grep -o 'param\[[0-9a-z]*\]' è¿™æ ·å°±åªæŠŠç±»ä¼¼äºŽ param[xx12] è¿™æ ·çš„ä¿¡æ¯æ¸…æ™°åœ°å±•çŽ°å‡ºæ¥ã€‚ å¦‚ä½•è¿‡æ»¤æŽ‰ä¸è¦çš„ä¿¡æ¯å‘¢ï¼Ÿå¯ä»¥ç”¨ï¼š 1grep -v æ¯”å¦‚æˆ‘ä»¬æŸ¥è¯¢ tomcat è¿›ç¨‹ä¿¡æ¯ï¼š 1ps -ef | grep tomcat æˆ‘ä»¬ä¼šå‘çŽ°ï¼Œä¸ä»… tomcat çš„ä¿¡æ¯å±•çŽ°å‡ºæ¥äº†ï¼Œæ‰§è¡Œ grep å‘½ä»¤æœ¬èº«çš„è¿›ç¨‹ä¿¡æ¯ä¹Ÿå±•ç¤ºå‡ºæ¥äº†ã€‚æˆ‘ä»¬è¦å°†è¿™ä¸ª grep å‘½ä»¤è¿‡æ»¤æŽ‰ï¼Œåªå±•çŽ° tomcat è¿›ç¨‹ä¿¡æ¯ï¼Œå¯ä»¥ï¼š 1ps -ef | grep tomcat | grep -v "grep" è¿™æ ·å°±æŠŠ grep è¿›ç¨‹ä¿¡æ¯è¿‡æ»¤æŽ‰äº†ã€‚ å››ã€å¦‚ä½•å¯¹æ–‡ä»¶å†…å®¹åšç»Ÿè®¡ awk ä¸€æ¬¡è¯»å–ä¸€è¡Œæ–‡æœ¬ï¼ŒæŒ‰è¾“å…¥åˆ†éš”ç¬¦è¿›è¡Œåˆ‡ç‰‡ï¼Œåˆ‡æˆå¤šä¸ªç»„æˆéƒ¨åˆ† å°†åˆ‡ç‰‡ç›´æŽ¥ä¿å­˜å†å†…å»ºçš„å˜é‡ä¸­ï¼Œ$1$2â€¦($0è¡¨ç¤ºè¡Œçš„å…¨éƒ¨) æ”¯æŒå¯¹å•ä¸ªåˆ‡ç‰‡çš„åˆ¤æ–­ï¼Œæ”¯æŒå¾ªçŽ¯åˆ¤æ–­ï¼Œé»˜è®¤åˆ†éš”ç¬¦ä¸ºç©ºæ ¼ è¯­æ³•ï¼šawk [options] â€˜cmdâ€™ file æœ‰è¿™æ ·ä¸€ä¸ªæ–‡ä»¶text1.txtï¼š 123456789proto Recv-Q Send-Q Local Address Foreign Address statetcp 0 48 111.34.134.2:ssh 124.213.2.12:12565 ESTABLISHEDtcp 0 48 localhost:mysql 124.213.2.12:12565 ESTABLISHEDudp 0 48 111.34.13.2:s0 124.213.2.12:12565 ESTABLISHEDtcp 0 48 localhost:mysql 124.213.2.12:12565 ESTABLISHEDudp 1 48 localhots:webcac 124.213.2.12:12565 ESTABLISHEDtcp 1 48 111.34.134.2:s1 124.213.2.12:12565 ESTABLISHEDudp 1 48 111.34.134.2:s2 124.213.2.12:12565 ESTABLISHEDudp 0 48 111.34.134.2:s3 124.213.2.12:12565 ESTABLISHED åˆ—å‡ºåˆ‡åˆ†å‡ºæ¥çš„ç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—ï¼š 1awk '&#123;print $1,$2&#125;' test1.txt ç»“æžœï¼š ç­›é€‰å‡ºç¬¬ä¸€åˆ—ä¸ºtcpå’Œç¬¬äºŒåˆ—ä¸º1çš„æ‰€åœ¨è¡Œï¼Œå°†è¿™äº›è¡Œæ•°æ®å…¨éƒ¨æ‰“å°å‡ºæ¥ï¼š 1awk '$1="tcp" &amp;&amp; $2==1&#123;print $0&#125;' test1.txt ç»“æžœï¼š æ‰“å°å¸¦æœ‰è¡¨å¤´çš„æ•°æ®ï¼š 1awk '($1="tcp" &amp;&amp; $2==1) || NR==1 &#123;print $0&#125;' test1.txt é»˜è®¤æ˜¯ä»¥ç©ºæ ¼åˆ†éš”ï¼Œé‚£ä¹ˆä»¥é€—å·æˆ–è€…å…¶ä»–ç¬¦å·å¯ä»¥å—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥ã€‚å¯¹äºŽè¿™æ ·çš„æ–‡ä»¶text2.txtï¼š 12345adas,123wqe,54412321,dddfsdaasd,1235465547,fjigj 1awk -F "," '&#123;print $2&#125;' text2.txt äº”ã€WCç»Ÿè®¡ æœ‰ä¸€ä¸ªæ–‡ä»¶test2.txtï¼Œé‡Œé¢çš„å†…å®¹æ˜¯ï¼š 123swg123eh shwfshsfswg7 121 32n dswg17328 123swg1 2h1jhwjqbsjwqbsh ddddh wg ehdedhd dhsjh å…­ã€sedå‘½ä»¤ sedæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–‡ä»¶å¤„ç†å·¥å…·ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªç®¡é“å‘½ä»¤ï¼Œä¸»è¦æ˜¯ä»¥è¡Œä¸ºå•ä½è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥å°†æ•°æ®è¡Œè¿›è¡Œæ›¿æ¢ã€åˆ é™¤ã€æ–°å¢žã€é€‰å–ç­‰ç‰¹å®šå·¥ä½œ sed [-n/e/f/r/i] â€˜commandâ€™ è¾“å…¥æ–‡æœ¬ å¸¸ç”¨é€‰é¡¹ï¼š -nâˆ¶ä½¿ç”¨å®‰é™(silent)æ¨¡å¼ã€‚åœ¨ä¸€èˆ¬ sed çš„ç”¨æ³•ä¸­ï¼Œæ‰€æœ‰æ¥è‡ª STDINçš„èµ„æ–™ä¸€èˆ¬éƒ½ä¼šè¢«åˆ—å‡ºåˆ°è¤å¹•ä¸Šã€‚ä½†å¦‚æžœåŠ ä¸Š -n å‚æ•°åŽï¼Œåˆ™åªæœ‰ç»è¿‡sed ç‰¹æ®Šå¤„ç†çš„é‚£ä¸€è¡Œ(æˆ–è€…åŠ¨ä½œ)æ‰ä¼šè¢«åˆ—å‡ºæ¥ã€‚ -eâˆ¶ç›´æŽ¥åœ¨æŒ‡ä»¤åˆ—æ¨¡å¼ä¸Šè¿›è¡Œ sed çš„åŠ¨ä½œç¼–è¾‘ï¼› -fâˆ¶ç›´æŽ¥å°† sed çš„åŠ¨ä½œå†™åœ¨ä¸€ä¸ªæ¡£æ¡ˆå†…ï¼Œ -f filename åˆ™å¯ä»¥æ‰§è¡Œ filename å†…çš„sed åŠ¨ä½œï¼› -râˆ¶sed çš„åŠ¨ä½œæ”¯æ´çš„æ˜¯å»¶ä¼¸åž‹æ­£è§„è¡¨ç¤ºæ³•çš„è¯­æ³•ã€‚(é¢„è®¾æ˜¯åŸºç¡€æ­£è§„è¡¨ç¤ºæ³•è¯­æ³•) -iâˆ¶ç›´æŽ¥ä¿®æ”¹è¯»å–çš„æ¡£æ¡ˆå†…å®¹ï¼Œè€Œä¸æ˜¯ç”±è¤å¹•è¾“å‡ºã€‚ å¸¸ç”¨å‘½ä»¤ï¼š a âˆ¶æ–°å¢žï¼Œ a çš„åŽé¢å¯ä»¥æŽ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºçŽ°(ç›®å‰çš„ä¸‹ä¸€è¡Œ)ï½ž c âˆ¶å–ä»£ï¼Œ c çš„åŽé¢å¯ä»¥æŽ¥å­—ä¸²ï¼Œè¿™äº›å­—ä¸²å¯ä»¥å–ä»£ n1,n2 ä¹‹é—´çš„è¡Œï¼ d âˆ¶åˆ é™¤ï¼Œå› ä¸ºæ˜¯åˆ é™¤å•Šï¼Œæ‰€ä»¥ d åŽé¢é€šå¸¸ä¸æŽ¥ä»»ä½•å’šå’šï¼› i âˆ¶æ’å…¥ï¼Œ i çš„åŽé¢å¯ä»¥æŽ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºçŽ°(ç›®å‰çš„ä¸Šä¸€è¡Œ)ï¼› p âˆ¶åˆ—å°ï¼Œäº¦å³å°†æŸä¸ªé€‰æ‹©çš„èµ„æ–™å°å‡ºã€‚é€šå¸¸ p ä¼šä¸Žå‚æ•° sed -n ä¸€èµ·è¿ä½œï½ž s âˆ¶å–ä»£ï¼Œå¯ä»¥ç›´æŽ¥è¿›è¡Œå–ä»£çš„å·¥ä½œå“©ï¼é€šå¸¸è¿™ä¸ª s çš„åŠ¨ä½œå¯ä»¥æ­é…æ­£è§„è¡¨ç¤ºæ³•ï¼ä¾‹å¦‚ 1,20s/old/new/g å°±æ˜¯å•¦ï¼ è¿™é‡Œæˆ‘å°±ä¸»è¦çœ‹ä¸€ä¸‹æ‰¹é‡æ›¿æ¢è¿™ä¸ªåŠŸèƒ½ã€‚ å¦‚æžœåªæ˜¯ç»™ä¸€ä¸ªæ–‡ä»¶ä¸­çš„è‹¥å¹²å­—ç¬¦ä¸²æ‰¹é‡æ›¿æ¢ï¼Œåªéœ€è¦ï¼š 1sed -i "s/oldstring/newstring/g" filename å¦‚æžœæ˜¯å¯¹æŸä¸€è·¯å¾„ä¸‹å¾ˆå¤šçš„æ–‡ä»¶æ‰¹é‡æ›¿æ¢ï¼š 1sed -i &quot;s/oldstring/newstring/g&quot; `grep oldstring -rl path` å…¶ä¸­ï¼Œoldstringæ˜¯å¾…è¢«æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼Œnewstringæ˜¯å¾…æ›¿æ¢oldstringçš„æ–°å­—ç¬¦ä¸²ï¼Œgrepæ“ä½œä¸»è¦æ˜¯æŒ‰ç…§æ‰€ç»™çš„è·¯å¾„æŸ¥æ‰¾oldstringï¼Œpathæ˜¯æ‰€æ›¿æ¢æ–‡ä»¶çš„è·¯å¾„ï¼› -ié€‰é¡¹æ˜¯ç›´æŽ¥åœ¨æ–‡ä»¶ä¸­æ›¿æ¢ï¼Œä¸åœ¨ç»ˆç«¯è¾“å‡ºï¼› -ré€‰é¡¹æ˜¯æ‰€ç»™çš„pathä¸­çš„ç›®å½•é€’å½’æŸ¥æ‰¾ï¼› -lé€‰é¡¹æ˜¯è¾“å‡ºæ‰€æœ‰åŒ¹é…åˆ°oldstringçš„æ–‡ä»¶ï¼› è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œå°†ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ‰¹é‡ä¿®æ”¹ï¼š]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç«™ç‚¹æ–‡ç« æ±‡æ€»]]></title>
    <url>%2F2019%2F01%2F21%2F%E7%AB%99%E7%82%B9%E6%96%87%E7%AB%A0%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[ðŸ”ðŸ”ðŸ”æœ¬æ–‡ä¸ºç½®é¡¶æ–‡ç« ï¼Œç”±äºŽä¹‹å‰æ•´ç†çš„ç¬”è®°æœ‰å‡ ç™¾ç¯‡ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†å’ŒæŸ¥é˜…ï¼Œåœ¨è¿™é‡Œè¯¦ç»†å±•ç¤ºç›®å½•ç´¢å¼•ã€‚ è®¡ç®—æœºç½‘ç»œðŸ­ðŸ­ðŸ­ è¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯å…³äºŽHTTPå’ŒTCPçš„å¿…å¤‡çŸ¥è¯†ã€‚ ã€Šè®¡ç®—æœºç½‘ç»œç›¸å…³ç³»åˆ—ã€‹ï¼š ã€Šä»Žä¸‹åˆ°ä¸Šçœ‹äº”å±‚æ¨¡åž‹ã€‹ ã€Šä»Žä¸Šåˆ°ä¸‹çœ‹äº”å±‚æ¨¡åž‹ã€‹ ã€ŠHTTPçš„å‰ä¸–ä»Šç”Ÿã€‹ ã€ŠTCPåè®®å…¥é—¨ã€‹ ã€ŠTCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ã€‹ ã€ŠHTTPåŸºç¡€çŸ¥è¯†æç‚¼ã€‹ ã€Šä¸€æ­¥ä¸€æ­¥ç†è§£HTTPSã€‹ JAVAå®¹å™¨ðŸ±ðŸ±ðŸ± è¿™ä¸€éƒ¨åˆ†æ˜¯JAVAå®¹å™¨ä¸€ç³»åˆ—æ–‡ç« ï¼Œä¸»è¦è®²äº†å¸¸ç”¨JAVAå®¹å™¨çš„æºç å’Œä¸€äº›ç‰¹æ€§ï¼Œé¢è¯•å¿…é—®ç‚¹ã€‚ ã€ŠJAVAå®¹å™¨ã€‹ï¼š ã€ŠArrayList/Vectorã€‹ ã€ŠLinkedListã€‹ ã€ŠCopyOnWriteArrayListã€‹ ã€ŠHashCode/Equalsã€‹ ã€ŠHashMapã€‹ ã€ŠHashSetã€‹ ã€ŠLinkedHashMapã€‹ ã€ŠHashMapå’ŒLinkedHashMapéåŽ†æœºåˆ¶ã€‹ ã€ŠHashTableã€‹ ã€ŠLinkedHashSetã€‹ ã€ŠJDK7ä¸­HashMapæ­»å¾ªçŽ¯åŽŸå› å‰–æžã€‹ ã€ŠConcurrentHashMapã€‹ Linux&amp;æ“ä½œç³»ç»ŸðŸ¶ðŸ¶ðŸ¶ ä¸€äº›å¿…å¤‡çš„Liunxç›¸å…³çš„çŸ¥è¯†ç‚¹æ•´ç†ã€‚ ã€ŠLinuxã€‹ï¼š ã€ŠLinuxé¢è¯•é‡è¦å‘½ä»¤ã€‹ ã€Šæ“ä½œç³»ç»Ÿç›¸å…³ã€‹ï¼š ã€Šé¢è¯•-è¿›ç¨‹ä¸Žçº¿ç¨‹ã€‹ å®žæˆ˜ä½œå“ðŸ°ðŸ°ðŸ° è®°å½•ä¸€äº›å®žæˆ˜ä½œå“ï¼Œä»£ç ä¸»è¦å­˜æ”¾åœ¨githubä¸Šã€‚ ã€Šæˆ‘çš„å®žæˆ˜ã€‹ï¼š ã€Šå¿«ä¹èœ—ç‰›å•†åŸŽä»£ç ã€‹ ã€Šç ç è´­åˆ†å¸ƒå¼ç”µå•†å®žæˆ˜ä»£ç ã€‹]]></content>
      <tags>
        <tag>æ±‡æ€»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedHashSet]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F10.LinkedHashSet%2F</url>
    <content type="text"><![CDATA[HashSet å’Œ LinkedHashSet çš„å…³ç³»ç±»ä¼¼äºŽ HashMap å’Œ LinkedHashMap çš„å…³ç³»ï¼Œå³åŽè€…ç»´æŠ¤åŒå‘é“¾è¡¨ï¼Œå®žçŽ°è¿­ä»£é¡ºåºå¯ä¸ºæ’å…¥é¡ºåºæˆ–æ˜¯è®¿é—®é¡ºåºã€‚æ‰€ä»¥ä¹Ÿå°±è½»æ¾åŠ æ„‰å¿«å¿«é€Ÿäº†è§£ä¸€ä¸‹å³å¯ã€‚ ä»Žæºç ä¸­å¯ä»¥çœ‹åˆ°å…¶ç©ºçš„æž„é€ å‡½æ•°ä¸ºï¼š 123public LinkedHashSet() &#123; super(16, .75f, true);&#125; è¿™ä¸ªsuperå³çˆ¶ç±»æ˜¯HashSetï¼Œä»Žå®ƒçš„ç»§æ‰¿å…³ç³»å°±å¯ä»¥æ˜¾ç„¶çœ‹åˆ°ï¼š 123public class LinkedHashSet&lt;E&gt; extends HashSet&lt;E&gt; implements Set&lt;E&gt;, Cloneable, java.io.Serializable é‚£ä¹ˆHashSetå†…éƒ¨çš„æ•°æ®ç»“æž„å°±æ˜¯ä¸€ä¸ª HashMapï¼Œå…¶æ–¹æ³•çš„å†…éƒ¨å‡ ä¹Žå°±æ˜¯åœ¨è°ƒç”¨ HashMap çš„æ–¹æ³•ã€‚ LinkedHashSet é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯å®ƒæ˜¯ä¸€ä¸ª Set çš„å®žçŽ°ï¼Œæ‰€ä»¥å®ƒå…¶ä¸­å­˜çš„è‚¯å®šä¸æ˜¯é”®å€¼å¯¹ï¼Œè€Œæ˜¯å€¼ã€‚æ­¤å®žçŽ°ä¸Ž HashSet çš„ä¸åŒä¹‹å¤„åœ¨äºŽï¼ŒLinkedHashSet ç»´æŠ¤ç€ä¸€ä¸ªè¿è¡ŒäºŽæ‰€æœ‰æ¡ç›®çš„åŒå‘å¾ªçŽ¯é“¾è¡¨ã€‚ è¿™ä¸€åˆ‡éƒ½ä¸ŽLinkedHashMapç±»ä¼¼ã€‚ LinkedHashSet å†…éƒ¨æœ‰ä¸ªå±žæ€§ accessOrder æŽ§åˆ¶ç€éåŽ†æ¬¡åºã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥å€¼ä¸º false ,å³æŒ‰æ’å…¥æŽ’åºè®¿é—®ã€‚å¦‚æžœå°†è¯¥å€¼è®¾ç½®ä¸º true çš„è¯ï¼Œåˆ™æŒ‰è®¿é—®æ¬¡åºæŽ’åº(å³æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ”¾åœ¨é“¾è¡¨å¤´éƒ¨ï¼Œæœ€è¿‘è®¿é—®çš„åˆ™åœ¨é“¾è¡¨å°¾éƒ¨)ã€‚ ä¸€ã€ ç¤ºä¾‹ HashSetçš„éåŽ†ï¼š 123456789101112public static void main(String[] args) &#123; Set&lt;String&gt; linkedHashSet = new HashSet&lt;&gt;(); linkedHashSet.add("aaa"); linkedHashSet.add("eee"); linkedHashSet.add("ccc"); linkedHashSet.add("bbb"); Iterator&lt;String&gt; it = linkedHashSet.iterator(); while(it.hasNext())&#123; System.out.println(it.next()); &#125;&#125; è¾“å‡ºç»“æžœæ˜¯ï¼š aaa ccc bbb eee LinkedHashSetçš„éåŽ†ï¼š 1234567891011121314public static void main(String[] args) &#123; Set&lt;String&gt; linkedHashSet = new LinkedHashSet&lt;&gt;(); linkedHashSet.add("aaa"); linkedHashSet.add("eee"); linkedHashSet.add("ccc"); linkedHashSet.add("bbb"); linkedHashSet.add(null); Iterator&lt;String&gt; it = linkedHashSet.iterator(); while(it.hasNext())&#123; System.out.println(it.next()); &#125; &#125; è¾“å‡ºç»“æžœæ˜¯ï¼š aaa eee ccc bbb null å¯ä»¥çœ‹åˆ°ä¸Žè¾“å…¥é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hashtable]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F9.HashTable%2F</url>
    <content type="text"><![CDATA[Hashtable æ˜¯ä¸ªè¿‡æ—¶çš„é›†åˆç±»ï¼Œä¸å»ºè®®åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨ HashMap æ›¿æ¢ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨ ConcurrentHashMap æ›¿æ¢ã€‚ä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬ä¸åŽ»äº†è§£å®ƒçš„ç†ç”±ã€‚æœ€èµ·ç  Hashtable å’Œ HashMap çš„é¢è¯•é¢˜åœ¨é¢è¯•ä¸­ç»å¸¸è¢«é—®åˆ°ã€‚ ä¸€ã€å‰è¨€ Hashtableå’ŒHashMapï¼Œä»Žå­˜å‚¨ç»“æž„å’Œå®žçŽ°æ¥è®²åŸºæœ¬ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚ å®ƒå’ŒHashMapçš„æœ€å¤§çš„ä¸åŒæ˜¯å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦å¤–å®ƒä¸å…è®¸keyå’Œvalueä¸ºnullã€‚ ä¸ºäº†èƒ½åœ¨å“ˆå¸Œè¡¨ä¸­æˆåŠŸåœ°ä¿å­˜å’Œå–å‡ºå¯¹è±¡ï¼Œç”¨ä½œkeyçš„å¯¹è±¡å¿…é¡»å®žçŽ°hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•ã€‚ äºŒã€fail-fastæœºåˆ¶ iteratoræ–¹æ³•è¿”å›žçš„è¿­ä»£å™¨æ˜¯fail-fastçš„ã€‚å¦‚æžœåœ¨è¿­ä»£å™¨è¢«åˆ›å»ºåŽhashtableè¢«ç»“æž„åž‹åœ°ä¿®æ”¹äº†ï¼Œé™¤äº†è¿­ä»£å™¨è‡ªå·±çš„removeæ–¹æ³•ï¼Œè¿­ä»£å™¨ä¼šæŠ›å‡ºä¸€ä¸ªConcurrentModificationExceptionå¼‚å¸¸ã€‚ å› æ­¤ï¼Œé¢å¯¹åœ¨å¹¶å‘çš„ä¿®æ”¹ï¼Œè¿­ä»£å™¨å¹²è„†åˆ©è½çš„å¤±è´¥ï¼Œè€Œä¸æ˜¯å†’é™©çš„ç»§ç»­ã€‚ å…³äºŽè¿™ä¸ªçš„ç†è§£ï¼Œå…¶å®žåœ¨ä¸Šä¸€ç« è®²LinkedHashMapä¸­çš„ç¬¬å…«ç‚¹æåˆ°ï¼š å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒafterNodeAccess() å‡½æ•°ä¸­ï¼Œä¼šä¿®æ”¹modCount,å› æ­¤å½“ä½ æ­£åœ¨accessOrder=trueçš„æ¨¡å¼ä¸‹,è¿­ä»£LinkedHashMapæ—¶ï¼Œå¦‚æžœåŒæ—¶æŸ¥è¯¢è®¿é—®æ•°æ®ï¼Œä¹Ÿä¼šå¯¼è‡´fail-fastï¼Œå› ä¸ºè¿­ä»£çš„é¡ºåºå·²ç»æ”¹å˜ã€‚ ç®€å•è¯´ï¼Œå°±æ˜¯ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åˆ†åˆ«è¿›è¡Œä¿®æ”¹å’ŒéåŽ†æ—¶ï¼Œä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚ é¢è¯•é¢˜ï¼šé›†åˆåœ¨éåŽ†è¿‡ç¨‹ä¸­æ˜¯å¦å¯ä»¥åˆ é™¤å…ƒç´ ï¼Œä¸ºä»€ä¹ˆè¿­ä»£å™¨å°±å¯ä»¥å®‰å…¨åˆ é™¤å…ƒç´ ï¼Ÿ é›†åˆåœ¨ä½¿ç”¨ for å¾ªçŽ¯è¿­ä»£çš„è¿‡ç¨‹ä¸­ä¸å…è®¸ä½¿ç”¨ï¼Œé›†åˆæœ¬èº«çš„ remove æ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œå¦‚æžœè¿›è¡Œé”™è¯¯æ“ä½œå°†ä¼šå¯¼è‡´ ConcurrentModificationException å¼‚å¸¸çš„å‘ç”Ÿ Iterator å¯ä»¥åˆ é™¤è®¿é—®çš„å½“å‰å…ƒç´ (current)ï¼Œä¸€æ—¦åˆ é™¤çš„å…ƒç´ æ˜¯Iterator å¯¹è±¡ä¸­ next æ‰€æ­£åœ¨å¼•ç”¨çš„ï¼Œåœ¨ Iterator åˆ é™¤å…ƒç´ é€šè¿‡ ä¿®æ”¹ modCount ä¸Ž expectedModCount çš„å€¼ï¼Œå¯ä»¥ä½¿ä¸‹æ¬¡åœ¨è°ƒç”¨ remove çš„æ–¹æ³•æ—¶å€™ä¸¤è€…ä»ç„¶ç›¸åŒå› æ­¤ä¸ä¼šæœ‰å¼‚å¸¸äº§ç”Ÿã€‚ è¿­ä»£å™¨çš„fail-fastæœºåˆ¶å¹¶ä¸èƒ½å¾—åˆ°ä¿è¯ï¼Œå®ƒä¸èƒ½å¤Ÿä¿è¯ä¸€å®šå‡ºçŽ°è¯¥é”™è¯¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œfail-fastä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚å› æ­¤ï¼Œä¸ºæé«˜æ­¤ç±»æ“ä½œçš„æ­£ç¡®æ€§è€Œç¼–å†™ä¸€ä¸ªä¾èµ–äºŽæ­¤å¼‚å¸¸çš„ç¨‹åºæ˜¯é”™è¯¯çš„åšæ³•ï¼Œæ­£ç¡®åšæ³•æ˜¯ï¼šConcurrentModificationException åº”è¯¥ä»…ç”¨äºŽæ£€æµ‹ bugã€‚ Hashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æžœä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„å®žçŽ°æ˜¯ä¸éœ€è¦çš„ï¼ŒæŽ¨èä½¿ç”¨HashMapä»£æ›¿Hashtableã€‚å¦‚æžœéœ€è¦çº¿ç¨‹å®‰å…¨çš„å®žçŽ°ï¼ŒæŽ¨èä½¿ç”¨java.util.concurrent.ConcurrentHashMapä»£æ›¿Hashtableã€‚ äºŒã€ç»§æ‰¿å…³ç³» 123public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, java.io.Serializable&#123;&#125; extends Dictionary&lt;K,V&gt;ï¼šDictionaryç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç”¨æ¥å­˜å‚¨é”®/å€¼å¯¹ï¼Œä½œç”¨å’ŒMapç±»ç›¸ä¼¼ã€‚ implements Map&lt;K,V&gt;ï¼šå®žçŽ°äº†Mapï¼Œå®žçŽ°äº†Mapä¸­å£°æ˜Žçš„æ“ä½œå’Œdefaultæ–¹æ³•ã€‚ hashMapä»¥åŠTreeMapçš„æºç ï¼Œéƒ½æ²¡æœ‰ç»§æ‰¿äºŽè¿™ä¸ªç±»ã€‚ä¸è¿‡å½“æˆ‘çœ‹åˆ°æ³¨é‡Šä¸­çš„è§£é‡Šä¹Ÿå°±æ˜Žç™½äº†ï¼Œå…¶ Dictionary æºç æ³¨é‡Šæ˜¯è¿™æ ·çš„ï¼šNOTE: This class is obsolete. New implementations should implement the Map interface, rather than extending this class. è¯¥è¯æŒ‡å‡º Dictionary è¿™ä¸ªç±»è¿‡æ—¶äº†ï¼Œæ–°çš„å®žçŽ°ç±»åº”è¯¥å®žçŽ°MapæŽ¥å£ã€‚ ä¸‰ã€å±žæ€§ 1234567891011121314//å“ˆå¸Œè¡¨private transient Entry&lt;?,?&gt;[] table;//è®°å½•å“ˆå¸Œè¡¨ä¸­é”®å€¼å¯¹çš„ä¸ªæ•°private transient int count;//æ‰©å®¹çš„é˜ˆå€¼private int threshold;//è´Ÿè½½å› å­private float loadFactor;//hashtableè¢«ç»“æž„åž‹ä¿®æ”¹çš„æ¬¡æ•°ã€‚private transient int modCount = 0; HashTableå¹¶æ²¡æœ‰åƒHashMapé‚£æ ·å®šä¹‰äº†å¾ˆå¤šçš„å¸¸é‡ï¼Œè€Œæ˜¯ç›´æŽ¥å†™æ­»åœ¨äº†æ–¹æ³•é‡Œã€‚ Hashtableä¸è¦æ±‚åº•å±‚æ•°ç»„çš„å®¹é‡ä¸€å®šè¦ä¸º2çš„æ•´æ•°æ¬¡å¹‚ï¼Œè€ŒHashMapåˆ™è¦æ±‚ä¸€å®šä¸º2çš„æ•´æ•°æ¬¡å¹‚ã€‚ å››ã€æž„é€ å‡½æ•° 12345678/** * ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å®¹é‡ï¼ˆ11ï¼‰å’Œé»˜è®¤è´Ÿè½½å› å­ï¼ˆ0.75ï¼‰æ¥æž„é€ ä¸€ä¸ªç©ºçš„hashtable. * * è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼ŒHashtableé»˜è®¤åˆå§‹åŒ–å®¹é‡ä¸º16ï¼Œè€ŒHashMapçš„é»˜è®¤åˆå§‹åŒ–å®¹é‡ä¸º11ã€‚ */public Hashtable() &#123; this(11, 0.75f);&#125; æˆ‘ä»¬å¯ä»¥èŽ·å–åˆ°è¿™äº›ä¿¡æ¯ï¼šHashTableé»˜è®¤çš„åˆå§‹åŒ–å®¹é‡ä¸º11ï¼ˆä¸ŽHashMapä¸åŒï¼‰ï¼Œè´Ÿè½½å› å­é»˜è®¤ä¸º0.75ï¼ˆä¸ŽHashMapç›¸åŒï¼‰ã€‚è€Œæ­£å› ä¸ºé»˜è®¤åˆå§‹åŒ–å®¹é‡çš„ä¸åŒï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰å¯¹å®¹é‡åšè°ƒæ•´çš„ç­–ç•¥ï¼Œæ‰€ä»¥å¯ä»¥å…ˆæŽ¨æ–­å‡ºï¼ŒHashTableä½¿ç”¨çš„å“ˆå¸Œå‡½æ•°è·ŸHashMapæ˜¯ä¸ä¸€æ ·çš„ï¼ˆäº‹å®žä¹Ÿç¡®å®žå¦‚æ­¤ï¼‰ã€‚ äº”ã€é‡è¦æ–¹æ³• 5.1 getæ–¹æ³• 12345678910111213public synchronized V get(Object key) &#123; Entry&lt;?,?&gt; tab[] = table; int hash = key.hashCode(); //é€šè¿‡å“ˆå¸Œå‡½æ•°ï¼Œè®¡ç®—å‡ºkeyå¯¹åº”çš„æ¡¶çš„ä½ç½® int index = (hash &amp; 0x7FFFFFFF) % tab.length; //éåŽ†è¯¥æ¡¶çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯»æ‰¾è¯¥key for (Entry&lt;?,?&gt; e = tab[index] ; e != null ; e = e.next) &#123; if ((e.hash == hash) &amp;&amp; e.key.equals(key)) &#123; return (V)e.value; &#125; &#125; return null;&#125; è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼ŒHashtableå’ŒHashMapç¡®è®¤keyåœ¨æ•°ç»„ä¸­çš„ç´¢å¼•çš„æ–¹æ³•ä¸åŒã€‚ Hashtableé€šè¿‡index = (hash &amp; 0x7FFFFFFF) % tab.length;æ¥ç¡®è®¤ HashMapé€šè¿‡i = (n - 1) &amp; hash;æ¥ç¡®è®¤ è·ŸHashMapç›¸æ¯”ï¼ŒHashTableçš„getæ–¹æ³•éžå¸¸ç®€å•ã€‚æˆ‘ä»¬é¦–å…ˆå¯ä»¥çœ‹è§getæ–¹æ³•ä½¿ç”¨äº†synchronizedæ¥ä¿®é¥°ï¼Œæ‰€ä»¥å®ƒèƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å¹¶ä¸”å®ƒæ˜¯é€šè¿‡é“¾è¡¨çš„æ–¹å¼æ¥å¤„ç†å†²çªçš„ã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹è§HashTableå¹¶æ²¡æœ‰åƒHashMapé‚£æ ·å°è£…ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œè€Œæ˜¯ç›´æŽ¥æŠŠå“ˆå¸Œå‡½æ•°å†™åœ¨äº†æ–¹æ³•ä¸­ã€‚è€Œå“ˆå¸Œå‡½æ•°ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå®ƒä»…å¯¹å“ˆå¸Œè¡¨çš„é•¿åº¦è¿›è¡Œäº†å–æ¨¡ã€‚ 5.2 putæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public synchronized V put(K key, V value) &#123; // ç¡®è®¤valueä¸ä¸ºnull if (value == null) &#123; throw new NullPointerException(); &#125; Entry&lt;?,?&gt; tab[] = table; int hash = key.hashCode(); //æ‰¾åˆ°keyåœ¨tableä¸­çš„ç´¢å¼• int index = (hash &amp; 0x7FFFFFFF) % tab.length; @SuppressWarnings("unchecked") //èŽ·å–keyæ‰€åœ¨ç´¢å¼•çš„entry Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index]; //éåŽ†entryï¼Œåˆ¤æ–­keyæ˜¯å¦å·²ç»å­˜åœ¨ for(; entry != null ; entry = entry.next) &#123; //å¦‚æžœkeyå·²ç»å­˜åœ¨ if ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123; //ä¿å­˜æ—§çš„value V old = entry.value; //æ›¿æ¢value entry.value = value; //è¿”å›žæ—§çš„value return old; &#125; &#125; //å¦‚æžœkeyåœ¨hashtableä¸æ˜¯å·²ç»å­˜åœ¨ï¼Œå°±ç›´æŽ¥å°†é”®å€¼å¯¹æ·»åŠ åˆ°tableä¸­ï¼Œè¿”å›žnull addEntry(hash, key, value, index); return null;&#125;private void addEntry(int hash, K key, V value, int index) &#123; modCount++; Entry&lt;?,?&gt; tab[] = table; //å“ˆå¸Œè¡¨çš„é”®å€¼å¯¹ä¸ªæ•°è¾¾åˆ°äº†é˜ˆå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ if (count &gt;= threshold) &#123; // Rehash the table if the threshold is exceeded rehash(); tab = table; hash = key.hashCode(); index = (hash &amp; 0x7FFFFFFF) % tab.length; &#125; // Creates the new entry. @SuppressWarnings("unchecked") Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) tab[index]; //æŠŠæ–°èŠ‚ç‚¹æ’å…¥æ¡¶ä¸­ï¼ˆå¤´æ’æ³•ï¼‰ tab[index] = new Entry&lt;&gt;(hash, key, value, e); count++;&#125; ä»Žä»£ç ä¸­å¯ä»¥æ€»ç»“å‡ºHashtableçš„putæ–¹æ³•çš„æ€»ä½“æ€è·¯ï¼š ç¡®è®¤valueä¸ä¸ºnullã€‚å¦‚æžœä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ æ‰¾åˆ°keyåœ¨tableä¸­çš„ç´¢å¼•ï¼ŒèŽ·å–keyæ‰€åœ¨ä½ç½®çš„entry éåŽ†entryï¼Œåˆ¤æ–­keyæ˜¯å¦å·²ç»å­˜åœ¨ å¦‚æžœkeyå·²ç»å­˜åœ¨ï¼Œæ›¿æ¢valueï¼Œè¿”å›žæ—§çš„value å¦‚æžœkeyåœ¨hashtableä¸æ˜¯å·²ç»å­˜åœ¨ï¼Œå°±ç›´æŽ¥æ·»åŠ ï¼Œå¦åˆ™ç›´æŽ¥å°†é”®å€¼å¯¹æ·»åŠ åˆ°tableä¸­ï¼Œè¿”å›žnull åœ¨æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨éåŽ†æ¡¶ä¸­å…ƒç´ æ—¶ï¼Œæ˜¯æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éåŽ†çš„ã€‚å¯ä»¥å°è¯ï¼ŒHashMapçš„æ¡¶ä¸­å¯èƒ½ä¸ºé“¾è¡¨æˆ–è€…æ ‘ã€‚ä½†Hashtableçš„æ¡¶ä¸­åªå¯èƒ½æ˜¯é“¾è¡¨ã€‚ 5.3 removeæ–¹æ³• 12345678910111213141516171819202122232425public synchronized V remove(Object key) &#123; Entry&lt;?,?&gt; tab[] = table; int hash = key.hashCode(); //è®¡ç®—keyåœ¨hashtableä¸­çš„ç´¢å¼• int index = (hash &amp; 0x7FFFFFFF) % tab.length; @SuppressWarnings("unchecked") Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)tab[index]; //éåŽ†entryï¼Œå¦‚æžœentryä¸­å­˜åœ¨keyä¸ºå‚æ•°keyçš„é”®å€¼å¯¹ï¼Œå°±åˆ é™¤é”®å€¼å¯¹ï¼Œå¹¶è¿”å›žé”®å€¼å¯¹çš„value for(Entry&lt;K,V&gt; prev = null ; e != null ; prev = e, e = e.next) &#123; if ((e.hash == hash) &amp;&amp; e.key.equals(key)) &#123; modCount++; if (prev != null) &#123; prev.next = e.next; &#125; else &#123; tab[index] = e.next; &#125; count--; V oldValue = e.value; e.value = null; return oldValue; &#125; &#125; //å¦‚æžœä¸å­˜åœ¨keyä¸ºå‚æ•°keyçš„é”®å€¼å¯¹ï¼Œè¿”å›žvalue return null;&#125; ä»Žä»£ç ä¸­å¯ä»¥æ€»ç»“å‡ºHashtableçš„removeæ–¹æ³•çš„æ€»ä½“æ€è·¯ï¼š æ‰¾åˆ°keyåœ¨tableä¸­çš„ç´¢å¼•ï¼ŒèŽ·å–keyæ‰€åœ¨ä½ç½®çš„entry éåŽ†entryï¼Œåˆ¤æ–­keyæ˜¯å¦å·²ç»å­˜åœ¨ å¦‚æžœkeyå­˜åœ¨ï¼Œåˆ é™¤keyæ˜ å°„çš„é”®å€¼å¯¹ï¼Œè¿”å›žæ—§çš„value å¦‚æžœkeyåœ¨hashtableä¸å­˜åœ¨ï¼Œè¿”å›žnull 5.4 rehashæ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * å¢žåŠ hashtableçš„å®¹é‡ï¼Œä¸ºäº†æ›´æœ‰æ•ˆåœ°å­˜æ”¾å’Œæ‰¾åˆ°å®ƒçš„entryã€‚ * å½“é”®å€¼å¯¹çš„æ•°é‡è¶…è¿‡äº†ä¸´ç•Œå€¼ï¼ˆcapacity*load factorï¼‰è¿™ä¸ªæ–¹æ³•è‡ªåŠ¨è°ƒç”¨ * é•¿åº¦å˜ä¸ºåŽŸæ¥çš„2å€+1 * */@SuppressWarnings("unchecked")protected void rehash() &#123; //è®°å½•æ—§å®¹é‡ int oldCapacity = table.length; //è®°å½•æ—§æ¡¶çš„æ•°ç»„ Entry&lt;?,?&gt;[] oldMap = table; // overflow-conscious code //æ–°çš„å®¹é‡ä¸ºæ—§çš„å®¹é‡çš„2å€+1 int newCapacity = (oldCapacity &lt;&lt; 1) + 1; //å¦‚æžœæ–°çš„å®¹é‡å¤§äºŽå®¹é‡çš„æœ€å¤§å€¼MAX_ARRAY_SIZE if (newCapacity - MAX_ARRAY_SIZE &gt; 0) &#123; //å¦‚æžœæ—§å®¹é‡ä¸ºMAX_ARRAY_SIZEï¼Œå®¹é‡ä¸å˜ï¼Œä¸­æ–­æ–¹æ³•çš„æ‰§è¡Œ if (oldCapacity == MAX_ARRAY_SIZE) // Keep running with MAX_ARRAY_SIZE buckets return; //å¦‚æžœæ—§å®¹é‡ä¸ä¸ºMAX_ARRAY_SIZEï¼Œæ–°å®¹é‡å˜ä¸ºMAX_ARRAY_SIZE newCapacity = MAX_ARRAY_SIZE; &#125; //åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œå®¹é‡ä¸ºæ–°å®¹é‡ Entry&lt;?,?&gt;[] newMap = new Entry&lt;?,?&gt;[newCapacity]; //ç»“æž„æ€§ä¿®æ”¹æ¬¡æ•°+1 modCount++; //è®¡ç®—æ‰©å®¹çš„ä¸´ç•Œå€¼ threshold = (int)Math.min(newCapacity * loadFactor, MAX_ARRAY_SIZE + 1); table = newMap; //å°†æ—§çš„æ•°ç»„ä¸­çš„é”®å€¼å¯¹è½¬ç§»åˆ°æ–°æ•°ç»„ä¸­ for (int i = oldCapacity ; i-- &gt; 0 ;) &#123; for (Entry&lt;K,V&gt; old = (Entry&lt;K,V&gt;)oldMap[i] ; old != null ; ) &#123; Entry&lt;K,V&gt; e = old; old = old.next; int index = (e.hash &amp; 0x7FFFFFFF) % newCapacity; e.next = (Entry&lt;K,V&gt;)newMap[index]; newMap[index] = e; &#125; &#125;&#125; çœ‹å®Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºrehashçš„æ€»ä½“æ€è·¯ä¸ºï¼š æ–°å»ºå˜é‡æ–°çš„å®¹é‡ï¼Œå€¼ä¸ºæ—§çš„å®¹é‡çš„2å€+1 å¦‚æžœæ–°çš„å®¹é‡å¤§äºŽå®¹é‡çš„æœ€å¤§å€¼MAX_ARRAY_SIZE å¦‚æžœæ—§å®¹é‡ä¸ºMAX_ARRAY_SIZEï¼Œå®¹é‡ä¸å˜ï¼Œä¸­æ–­æ–¹æ³•çš„æ‰§è¡Œ å¦‚æžœæ—§å®¹é‡ä¸ä¸ºMAX_ARRAY_SIZEï¼Œæ–°å®¹é‡å˜ä¸ºMAX_ARRAY_SIZE åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œå®¹é‡ä¸ºæ–°å®¹é‡ å°†æ—§çš„æ•°ç»„ä¸­çš„é”®å€¼å¯¹è½¬ç§»åˆ°æ–°æ•°ç»„ä¸­ è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒHashMapæ‰©å®¹åŽå®¹é‡å˜ä¸ºåŽŸæ¥çš„ä¸¤å€ï¼Œè€ŒHashtableæ‰©å®¹åŽå®¹é‡å˜ä¸ºåŽŸæ¥çš„ä¸¤å€åŠ ä¸€ã€‚ HashTableçš„rehashæ–¹æ³•ç›¸å½“äºŽHashMapçš„resizeæ–¹æ³•ã€‚è·ŸHashMapé‚£ç§å·§å¦™çš„rehashæ–¹å¼ç›¸æ¯”ï¼ŒHashTableçš„rehashè¿‡ç¨‹éœ€è¦å¯¹æ¯ä¸ªé”®å€¼å¯¹éƒ½é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œè€Œæ¯”èµ·å¼‚æˆ–å’Œä¸Žæ“ä½œï¼Œå–æ¨¡æ˜¯ä¸€ä¸ªéžå¸¸è€—æ—¶çš„æ“ä½œï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯å¯¼è‡´æ•ˆçŽ‡è¾ƒä½Žçš„åŽŸå› ä¹‹ä¸€ã€‚ å…­ã€éåŽ† å¯ä»¥ä½¿ç”¨ä¸ŽHashMapä¸€æ ·çš„éåŽ†æ–¹å¼ï¼Œä½†æ˜¯ç”±äºŽåŽ†å²åŽŸå› ï¼Œå¤šäº†Enumerationçš„æ–¹å¼ã€‚ é’ˆå¯¹Enumerationï¼Œè¿™é‡Œä¸Žiteratorè¿›è¡Œå¯¹æ¯”ä¸€ä¸‹ã€‚ ç›¸åŒç‚¹ Iteratorå’ŒEnumerationéƒ½å¯ä»¥å¯¹æŸäº›å®¹å™¨è¿›è¡ŒéåŽ†ã€‚ Iteratorå’ŒEnumerationéƒ½æ˜¯æŽ¥å£ã€‚ ä¸åŒç‚¹ Iteratoræœ‰å¯¹å®¹å™¨è¿›è¡Œä¿®æ”¹çš„æ–¹æ³•ã€‚è€ŒEnumerationåªèƒ½éåŽ†ã€‚ Iteratoræ”¯æŒfail-fastï¼Œè€ŒEnumerationä¸æ”¯æŒã€‚ Iteratoræ¯”Enumerationè¦†ç›–èŒƒå›´å¹¿ï¼ŒåŸºæœ¬æ‰€æœ‰å®¹å™¨ä¸­éƒ½æœ‰Iteratorè¿­ä»£å™¨ï¼Œè€Œåªæœ‰Vectorã€Hashtableæœ‰Enumerationã€‚ Enumerationåœ¨JDK 1.0å°±å·²ç»å­˜åœ¨äº†ï¼Œè€ŒIteratoræ˜¯JDK2.0æ–°åŠ çš„æŽ¥å£ã€‚ ä¸ƒã€Hashtableä¸ŽHashMapå¯¹æ¯” HashTableçš„åº”ç”¨éžå¸¸å¹¿æ³›ï¼ŒHashMapæ˜¯æ–°æ¡†æž¶ä¸­ç”¨æ¥ä»£æ›¿HashTableçš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´å»ºè®®ä½¿ç”¨HashMapã€‚ ä¸‹é¢ç€é‡æ¯”è¾ƒä¸€ä¸‹äºŒè€…çš„åŒºåˆ«ï¼š 1.ç»§æ‰¿ä¸åŒ Hashtableæ˜¯åŸºäºŽé™ˆæ—§çš„Dictionaryç±»çš„ï¼ŒHashMapæ˜¯java1.2å¼•è¿›çš„MapæŽ¥å£çš„ä¸€ä¸ªå®žçŽ°ã€‚ 2.åŒæ­¥ Hashtable ä¸­çš„æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œä¿è¯äº†Hashtableä¸­çš„å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ HashMapä¸­çš„æ–¹æ³•åœ¨ç¼ºçœæƒ…å†µä¸‹æ˜¯éžåŒæ­¥çš„,HashMapä¸­çš„å¯¹è±¡å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„çŽ¯å¢ƒä¸‹ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯è¦ä½¿ç”¨HashMapçš„è¯å°±è¦è‡ªå·±å¢žåŠ åŒæ­¥å¤„ç†äº†ã€‚ 3.æ•ˆçŽ‡ å•çº¿ç¨‹ä¸­, HashMapçš„æ•ˆçŽ‡å¤§äºŽHashtableã€‚å› ä¸ºåŒæ­¥çš„è¦æ±‚ä¼šå½±å“æ‰§è¡Œçš„æ•ˆçŽ‡ï¼Œæ‰€ä»¥å¦‚æžœä½ ä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼ŒHashMapæ˜¯Hashtableçš„è½»é‡çº§å®žçŽ°ï¼Œè¿™æ ·å¯ä»¥é¿å…ç”±äºŽåŒæ­¥å¸¦æ¥çš„ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œä»Žè€Œæé«˜æ•ˆçŽ‡ã€‚ 4.nullå€¼ Hashtableä¸­ï¼Œkeyå’Œvalueéƒ½ä¸å…è®¸å‡ºçŽ°nullå€¼ï¼Œå¦åˆ™å‡ºçŽ°NullPointerExceptionã€‚ åœ¨HashMapä¸­ï¼Œnullå¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼›å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸ºnullã€‚å½“get()æ–¹æ³•è¿”å›žnullå€¼æ—¶ï¼Œå³å¯ä»¥è¡¨ç¤º HashMapä¸­æ²¡æœ‰è¯¥é”®ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯¥é”®æ‰€å¯¹åº”çš„å€¼ä¸ºnullã€‚å› æ­¤ï¼Œåœ¨HashMapä¸­ä¸èƒ½ç”±get()æ–¹æ³•æ¥åˆ¤æ–­HashMapä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé”®ï¼Œè€Œåº”è¯¥ç”¨containsKey()æ–¹æ³•æ¥åˆ¤æ–­ã€‚ 5.éåŽ†æ–¹å¼ Hashtableã€HashMapéƒ½ä½¿ç”¨äº† Iteratorã€‚è€Œç”±äºŽåŽ†å²åŽŸå› ï¼ŒHashtableå¯ä»¥ä½¿ç”¨Enumerationçš„æ–¹å¼ã€‚ 6.å®¹é‡ Hashtableå’ŒHashMapå®ƒä»¬ä¸¤ä¸ªå†…éƒ¨å®žçŽ°æ–¹å¼çš„æ•°ç»„çš„åˆå§‹å¤§å°å’Œæ‰©å®¹çš„æ–¹å¼ã€‚ HashTableä¸­hashæ•°ç»„é»˜è®¤å¤§å°æ˜¯11ï¼Œå¢žåŠ çš„æ–¹å¼æ˜¯ old*2+1ã€‚ HashMapä¸­hashæ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯16ï¼Œè€Œä¸”ä¸€å®šæ˜¯2çš„æŒ‡æ•°ã€‚ å…«ã€æ€»ç»“ æ— è®ºä»€ä¹ˆæ—¶å€™æœ‰å¤šä¸ªçº¿ç¨‹è®¿é—®ç›¸åŒå®žä¾‹çš„å¯èƒ½æ—¶ï¼Œå°±åº”è¯¥ä½¿ç”¨Hashtableï¼Œåä¹‹ä½¿ç”¨HashMapã€‚éžçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æž„èƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚ å¦‚æžœåœ¨å°†æ¥æœ‰ä¸€ç§å¯èƒ½â€”ä½ éœ€è¦æŒ‰é¡ºåºèŽ·å¾—é”®å€¼å¯¹çš„æ–¹æ¡ˆæ—¶ï¼ŒHashMapæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºæœ‰HashMapçš„ä¸€ä¸ªå­ç±» LinkedHashMapã€‚ æ‰€ä»¥å¦‚æžœä½ æƒ³å¯é¢„æµ‹çš„æŒ‰é¡ºåºè¿­ä»£ï¼ˆé»˜è®¤æŒ‰æ’å…¥çš„é¡ºåºï¼‰ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿ç”¨LinkedHashMapæ›¿æ¢HashMapã€‚åè§‚è¦æ˜¯ä½¿ç”¨çš„Hashtableå°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚ å¦‚æžœæœ‰å¤šä¸ªçº¿ç¨‹è®¿é—®HashMapï¼ŒCollections.synchronizedMapï¼ˆï¼‰å¯ä»¥ä»£æ›¿ï¼Œæ€»çš„æ¥è¯´HashMapæ›´çµæ´»ï¼Œæˆ–è€…ç›´æŽ¥ç”¨å¹¶å‘å®¹å™¨ConcurrentHashMapã€‚ æ•´ç†è‡ªï¼š http://blog.csdn.net/panweiwei1994/article/details/77428710 http://blog.csdn.net/u013124587/article/details/52655042]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapå’ŒLinkedHashMapéåŽ†æœºåˆ¶]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F8.HashMap%E5%92%8CLinkedHashMap%E9%81%8D%E5%8E%86%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡å•ç‹¬è®²ä¸€ä¸‹HashMapå’ŒLinkedHashMapéåŽ†æ–¹å¼ã€‚ ä¸€ã€å¯¹HashMapå’ŒLinkedHashMapéåŽ†çš„å‡ ç§æ–¹æ³• è¿™é‡Œä»¥HashMapä¸ºä¾‹ï¼ŒLinkedHashMapä¸€æ ·çš„æ–¹å¼ã€‚ 12345Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; entryIterator = map.entrySet().iterator();while (entryIterator.hasNext()) &#123; Map.Entry&lt;String, Integer&gt; next = entryIterator.next(); System.out.println("key=" + next.getKey() + " value=" + next.getValue());&#125; 123456Iterator&lt;String&gt; iterator = map.keySet().iterator();while (iterator.hasNext())&#123; String key = iterator.next(); System.out.println("key=" + key + " value=" + map.get(key));&#125; 123map.forEach((key,value)-&gt;&#123; System.out.println("key=" + key + " value=" + value);&#125;); å¼ºçƒˆå»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§ EntrySet è¿›è¡ŒéåŽ†ã€‚ ç¬¬ä¸€ç§å¯ä»¥æŠŠ key value åŒæ—¶å–å‡ºï¼Œç¬¬äºŒç§è¿˜å¾—éœ€è¦é€šè¿‡ key å–ä¸€æ¬¡ valueï¼Œæ•ˆçŽ‡è¾ƒä½Ž, ç¬¬ä¸‰ç§éœ€è¦ JDK1.8 ä»¥ä¸Šï¼Œé€šè¿‡å¤–å±‚éåŽ† tableï¼Œå†…å±‚éåŽ†é“¾è¡¨æˆ–çº¢é»‘æ ‘ã€‚ æˆ‘ä»¬çŸ¥é“ï¼ŒHashMapçš„è¾“å‡ºé¡ºåºä¸Žå…ƒç´ çš„è¾“å…¥é¡ºåºæ— å…³ï¼ŒLinkedHashMapå¯ä»¥æŒ‰ç…§è¾“å…¥é¡ºåºè¾“å‡ºï¼Œä¹Ÿå¯ä»¥æ ¹æ®è¯»å–å…ƒç´ çš„é¡ºåºè¾“å‡ºã€‚è¿™ä¸€çŽ°è±¡ï¼Œå·²ç»åœ¨ä¸Šä¸€ç¯‡ä¸­å±•ç¤ºå‡ºæ¥äº†ã€‚ äºŒã€HashMapçš„éåŽ†æœºåˆ¶ HashMap æä¾›äº†ä¸¤ä¸ªéåŽ†è®¿é—®å…¶å†…éƒ¨å…ƒç´ Entry&lt;k,v&gt;çš„æŽ¥å£ï¼š Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()-------&gt;è¿”å›žæ­¤æ˜ å°„æ‰€åŒ…å«çš„æ˜ å°„å…³ç³»çš„ Set è§†å›¾ã€‚ Set&lt;K&gt; keySet()--------&gt;è¿”å›žæ­¤æ˜ å°„ä¸­æ‰€åŒ…å«çš„é”®çš„ Set è§†å›¾ã€‚ å®žé™…ä¸Šï¼Œç¬¬äºŒä¸ªæŽ¥å£è¡¨ç¤ºçš„Keyçš„é¡ºåºï¼Œå’Œç¬¬ä¸€ä¸ªæŽ¥å£è¿”å›žçš„Entryé¡ºåºæ˜¯å¯¹åº”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šè¿™ä¸¤ç§æŽ¥å£å¯¹HashMapçš„å…ƒç´ éåŽ†çš„é¡ºåºç›¸ç›¸åŒçš„ã€‚ é‚£ä¹ˆï¼ŒHashMapéåŽ†å†…éƒ¨Entry&lt;K,V&gt; çš„é¡ºåºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æžæ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œå…ˆè¦çŸ¥é“å…¶å†…éƒ¨ç»“æž„æ˜¯æ€Žæ ·çš„ã€‚ HashMapåœ¨å­˜å‚¨Entryå¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯æ ¹æ®Keyçš„hashå€¼åˆ¤å®šå­˜å‚¨åˆ°Entry[] tableæ•°ç»„çš„å“ªä¸€ä¸ªç´¢å¼•å€¼è¡¨ç¤ºçš„é“¾è¡¨ä¸Šã€‚ å¯¹HashMapéåŽ†Entryå¯¹è±¡çš„é¡ºåºå’ŒEntryå¯¹è±¡çš„å­˜å‚¨é¡ºåºä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ HashMapæ•£åˆ—å›¾ã€Hashtableæ•£åˆ—è¡¨æ˜¯æŒ‰â€œæœ‰åˆ©äºŽéšæœºæŸ¥æ‰¾çš„æ•£åˆ—(hash)çš„é¡ºåºâ€ã€‚å¹¶éžæŒ‰è¾“å…¥é¡ºåºã€‚éåŽ†æ—¶åªèƒ½å…¨éƒ¨è¾“å‡ºï¼Œè€Œæ²¡æœ‰é¡ºåºã€‚ç”šè‡³å¯ä»¥rehash()é‡æ–°æ•£åˆ—ï¼Œæ¥èŽ·å¾—æ›´åˆ©äºŽéšæœºå­˜å–çš„å†…éƒ¨é¡ºåºã€‚ æ‰€ä»¥å¯¹HashMapçš„éåŽ†ï¼Œç”±å†…éƒ¨çš„æœºåˆ¶å†³å®šçš„ï¼Œè¿™ä¸ªæœºåˆ¶æ˜¯åªè€ƒè™‘åˆ©äºŽå¿«é€Ÿå­˜å–ï¼Œä¸è€ƒè™‘è¾“å…¥ç­‰é¡ºåºã€‚ ä¸‰ã€LinkedHashMap çš„éåŽ†æœºåˆ¶ LinkedHashMap æ˜¯HashMapçš„å­ç±»ï¼Œå®ƒå¯ä»¥å®žçŽ°å¯¹å®¹å™¨å†…Entryçš„å­˜å‚¨é¡ºåºå’Œå¯¹Entryçš„éåŽ†é¡ºåºä¿æŒä¸€è‡´ã€‚ ä¸ºäº†å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼ŒLinkedHashMapå†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªEntryç±»åž‹çš„åŒå‘é“¾è¡¨ï¼Œç”¨è¿™ä¸ªåŒå‘é“¾è¡¨è®°å½•Entryçš„å­˜å‚¨é¡ºåºã€‚å½“éœ€è¦å¯¹è¯¥Mapè¿›è¡ŒéåŽ†çš„æ—¶å€™ï¼Œå®žé™…ä¸Šæ˜¯éåŽ†çš„æ˜¯è¿™ä¸ªåŒå‘é“¾è¡¨ã€‚ LinkedHashMapå†…éƒ¨ä½¿ç”¨çš„LinkedHashMap.Entryç±»ç»§æ‰¿è‡ªMap.Entryç±»ï¼Œåœ¨å…¶åŸºç¡€ä¸Šå¢žåŠ äº†LinkedHashMap.Entryç±»åž‹çš„ä¸¤ä¸ªå­—æ®µï¼Œç”¨æ¥å¼•ç”¨è¯¥Entryåœ¨åŒå‘é“¾è¡¨ä¸­çš„å‰é¢çš„Entryå¯¹è±¡å’ŒåŽé¢çš„Entryå¯¹è±¡ã€‚ å®ƒçš„å†…éƒ¨ä¼šåœ¨Map.Entryç±»çš„åŸºç¡€ä¸Šï¼Œå¢žåŠ ä¸¤ä¸ªEntryç±»åž‹çš„å¼•ç”¨ï¼šbeforeï¼Œafterã€‚LinkedHashMapä½¿ç”¨ä¸€ä¸ªåŒå‘è¿žè¡¨ï¼Œå°†å…¶å†…éƒ¨æ‰€æœ‰çš„Entryä¸²èµ·æ¥ã€‚ 1234LinkedHashMap linkedHashMap = new LinkedHashMap(); linkedHashMap.put("name","louis"); linkedHashMap.put("age","24"); linkedHashMap.put("sex","male"); å¯¹LinkedHashMapè¿›è¡ŒéåŽ†çš„ç­–ç•¥ï¼š ä»Ž header.after æŒ‡å‘çš„Entryå¯¹è±¡å¼€å§‹ï¼Œç„¶åŽä¸€ç›´æ²¿ç€æ­¤é“¾è¡¨éåŽ†ä¸‹åŽ»ï¼Œç›´åˆ°æŸä¸ªentry.after == header ä¸ºæ­¢ï¼Œå®ŒæˆéåŽ†ã€‚ æ ¹æ®Entry&lt;K,V&gt;æ’å…¥LinkedHashMapçš„é¡ºåºè¿›è¡ŒéåŽ†çš„æ–¹å¼å«åšï¼šæŒ‰æ’å…¥é¡ºåºéåŽ†ã€‚ å¦å¤–ï¼ŒLinkedHashMapè¿˜æ”¯æŒä¸€ç§éåŽ†é¡ºåºï¼Œå«åšï¼šGetè¯»å–é¡ºåºã€‚ å¦‚æžœLinkedHashMapçš„è¿™ä¸ªGetè¯»å–éåŽ†é¡ºåºå¼€å¯ï¼Œé‚£ä¹ˆï¼Œå½“æˆ‘ä»¬åœ¨LinkedHashMapä¸Šè°ƒç”¨get(key) æ–¹æ³•æ—¶ï¼Œä¼šå¯¼è‡´å†…éƒ¨keyå¯¹åº”çš„Entryåœ¨åŒå‘é“¾è¡¨ä¸­çš„ä½ç½®ç§»åŠ¨åˆ°åŒå‘é“¾è¡¨çš„æœ€åŽã€‚ å››ã€éåŽ†æœºåˆ¶çš„æ€»ç»“ HashMapå¯¹å…ƒç´ çš„éåŽ†é¡ºåºè·ŸEntryæ’å…¥çš„é¡ºåºæ— å…³ï¼Œè€ŒLinkedHashMapå¯¹å…ƒç´ çš„éåŽ†é¡ºåºå¯ä»¥è·ŸEntry&lt;K,V&gt;æ’å…¥çš„é¡ºåºä¿æŒä¸€è‡´ï¼šä»ŽåŒå‘ã€‚ å½“LinkedHashMapå¤„äºŽGetèŽ·å–é¡ºåºéåŽ†æ¨¡å¼ä¸‹ï¼Œå½“æ‰§è¡Œget() æ“ä½œæ—¶ï¼Œä¼šå°†å¯¹åº”çš„Entry&lt;k,v&gt;ç§»åˆ°éåŽ†çš„æœ€åŽä½ç½®ã€‚ LinkedHashMapå¤„äºŽæŒ‰æ’å…¥é¡ºåºéåŽ†çš„æ¨¡å¼ä¸‹ï¼Œå¦‚æžœæ–°æ’å…¥çš„&lt;key,value&gt; å¯¹åº”çš„keyå·²ç»å­˜åœ¨ï¼Œå¯¹åº”çš„Entryåœ¨éåŽ†é¡ºåºä¸­çš„ä½ç½®å¹¶ä¸ä¼šæ”¹å˜ã€‚ é™¤äº†éåŽ†é¡ºåºå¤–ï¼Œå…¶ä»–ç‰¹æ€§HashMapå’ŒLinkedHashMapåŸºæœ¬ç›¸åŒã€‚]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedHashMap]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F7.LinkedHashMap%2F</url>
    <content type="text"><![CDATA[å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªè¦ä¸æ¶‰åŠçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œ Map åŸºæœ¬éƒ½å¯ä»¥ä½¿ç”¨ HashMap ï¼Œä¸è¿‡ HashMap æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿­ä»£ HashMap çš„é¡ºåºå¹¶ä¸æ˜¯ HashMap æ”¾ç½®çš„é¡ºåºï¼Œä¹Ÿå°±æ˜¯æ— åºã€‚ HashMap çš„è¿™ä¸€ç¼ºç‚¹å¾€å¾€ä¼šå¸¦æ¥å›°æ‰°ï¼Œå› ä¸ºæœ‰äº›åœºæ™¯ï¼Œæˆ‘ä»¬æœŸå¾…ä¸€ä¸ªæœ‰åºçš„ Mapã€‚ ç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œä½†æ˜¯åœ¨ç†è§£äº†HashMapä¹‹åŽå°±æ¯”è¾ƒç®€å•äº†ã€‚ è¿™ä¸ªæ—¶å€™ï¼ŒLinkedHashMapå°±é—ªäº®ç™»åœºäº†ï¼Œå®ƒè™½ç„¶å¢žåŠ äº†æ—¶é—´å’Œç©ºé—´ä¸Šçš„å¼€é”€ï¼Œä½†æ˜¯å¯ä»¥è§£å†³æœ‰æŽ’åºéœ€æ±‚çš„åœºæ™¯ã€‚ å®ƒçš„åº•å±‚æ˜¯ç»§æ‰¿äºŽ HashMap å®žçŽ°çš„ï¼Œç”±ä¸€ä¸ªåŒå‘å¾ªçŽ¯é“¾è¡¨æ‰€æž„æˆã€‚ LinkedHashMap çš„æŽ’åºæ–¹å¼æœ‰ä¸¤ç§ï¼š æ ¹æ®å†™å…¥é¡ºåºæŽ’åºã€‚ æ ¹æ®è®¿é—®é¡ºåºæŽ’åºã€‚ å…¶ä¸­æ ¹æ®è®¿é—®é¡ºåºæŽ’åºæ—¶ï¼Œæ¯æ¬¡ get éƒ½ä¼šå°†è®¿é—®çš„å€¼ç§»åŠ¨åˆ°é“¾è¡¨æœ«å°¾ï¼Œè¿™æ ·é‡å¤æ“ä½œå°±èƒ½å¾—åˆ°ä¸€ä¸ªæŒ‰ç…§è®¿é—®é¡ºåºæŽ’åºçš„é“¾è¡¨ã€‚ ä¸€ã€LinkedHashMapæ•°æ®ç»“æž„ LinkedHashMapæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å’ŒåŒå‘å¾ªçŽ¯é“¾è¡¨å®žçŽ°çš„ï¼Œå®ƒé€šè¿‡ç»´æŠ¤ä¸€ä¸ªåŒå‘å¾ªçŽ¯é“¾è¡¨æ¥ä¿è¯å¯¹å“ˆå¸Œè¡¨è¿­ä»£æ—¶çš„æœ‰åºæ€§ï¼Œè€Œè¿™ä¸ªæœ‰åºæ˜¯æŒ‡é”®å€¼å¯¹æ’å…¥çš„é¡ºåºã€‚ æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒéåŽ†æ‰€æœ‰å…ƒç´ åªéœ€è¦ä»Žheaderå¼€å§‹éåŽ†å³å¯ï¼Œä¸€ç›´éåŽ†åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯headerç»“æŸã€‚ å¦å¤–ï¼Œå½“å‘å“ˆå¸Œè¡¨ä¸­é‡å¤æ’å…¥æŸä¸ªé”®çš„æ—¶å€™ï¼Œä¸ä¼šå½±å“åˆ°åŽŸæ¥çš„æœ‰åºæ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾ä½ æ’å…¥çš„é”®çš„é¡ºåºä¸º1ã€2ã€3ã€4ï¼ŒåŽæ¥å†æ¬¡æ’å…¥2ï¼Œè¿­ä»£æ—¶çš„é¡ºåºè¿˜æ˜¯1ã€2ã€3ã€4ï¼Œè€Œä¸ä¼šå› ä¸ºåŽæ¥æ’å…¥çš„2å˜æˆ1ã€3ã€4ã€2ã€‚ï¼ˆä½†å…¶å®žæˆ‘ä»¬å¯ä»¥æ”¹å˜å®ƒçš„è§„åˆ™ï¼Œä½¿å®ƒå˜æˆ1ã€3ã€4ã€2ï¼‰ LinkedHashMapçš„å®žçŽ°ä¸»è¦åˆ†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å“ˆå¸Œè¡¨ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ˜¯é“¾è¡¨ã€‚å“ˆå¸Œè¡¨éƒ¨åˆ†ç»§æ‰¿äº†HashMapï¼Œæ‹¥æœ‰äº†HashMapé‚£ä¸€å¥—é«˜æ•ˆçš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬è¦çœ‹çš„å°±æ˜¯LinkedHashMapä¸­é“¾è¡¨çš„éƒ¨åˆ†ï¼Œäº†è§£å®ƒæ˜¯å¦‚ä½•æ¥ç»´æŠ¤æœ‰åºæ€§çš„ã€‚ äºŒã€demoç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869public static void main(String[] args) &#123; /** * HashMapæ’å…¥æ•°æ®ï¼ŒéåŽ†è¾“å‡ºæ— åº */ System.out.println("----------HashMapæ’å…¥æ•°æ®--------"); Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); map.put("apple", "a"); map.put("watermelon", "b"); map.put("banana", "c"); map.put("peach", "d"); Iterator iter = map.entrySet().iterator(); while (iter.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter.next(); System.out.println(entry.getKey() + "=" + entry.getValue()); &#125; /** * LinkedHashMapæ’å…¥æ•°æ®ï¼ŒéåŽ†ï¼Œé»˜è®¤ä»¥æ’å…¥é¡ºåºä¸ºåº */ System.out.println("----------LinkedHashMapæ’å…¥æ•°æ®,æŒ‰ç…§æ’å…¥é¡ºåºè¿›è¡ŒæŽ’åº--------"); Map&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;(); linkedHashMap.put("apple", "a"); linkedHashMap.put("watermelon", "b"); linkedHashMap.put("banana", "c"); linkedHashMap.put("peach", "d"); Iterator&lt;Map.Entry&lt;String, String&gt;&gt; iterator = linkedHashMap.entrySet().iterator(); while (iterator.hasNext()) &#123; System.out.println(iterator.next()); &#125; /** * LinkedHashMapæ’å…¥æ•°æ®ï¼Œè®¾ç½®accessOrder=trueå®žçŽ°ä½¿å¾—å…¶éåŽ†é¡ºåºæŒ‰ç…§è®¿é—®çš„é¡ºåºè¾“å‡ºï¼Œè¿™é‡Œå…ˆç”¨getæ–¹æ³•æ¥æ¼”ç¤º */ System.out.println("----------LinkedHashMapæ’å…¥æ•°æ®,accessOrder=true:æŒ‰ç…§è®¿é—®é¡ºåºè¿›è¡ŒæŽ’åº--------"); Map&lt;String, String&gt; linkedHashMap2 = new LinkedHashMap&lt;String, String&gt;(16,0.75f,true); linkedHashMap2.put("apple", "aa"); linkedHashMap2.put("watermelon", "bb"); linkedHashMap2.put("banana", "cc"); linkedHashMap2.put("peach", "dd"); linkedHashMap2.get("banana");//bananaç§»åŠ¨åˆ°äº†å†…éƒ¨çš„é“¾è¡¨æœ«å°¾ linkedHashMap2.get("apple");//appleç§»åŠ¨åˆ°äº†å†…éƒ¨çš„é“¾è¡¨æœ«å°¾ Iterator iter2 = linkedHashMap2.entrySet().iterator(); while (iter2.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter2.next(); System.out.println(entry.getKey() + "=" + entry.getValue()); &#125; /** * LinkedHashMapçš„putæ–¹æ³•åœ¨accessOrder=trueçš„æƒ…å†µä¸‹ */ System.out.println("-----------"); linkedHashMap2.put("watermelon", "bb");//watermelonç§»åŠ¨åˆ°äº†å†…éƒ¨çš„é“¾è¡¨æœ«å°¾ linkedHashMap2.put("stawbarrey", "ee");//æœ«å°¾æ’å…¥æ–°å…ƒç´ stawbarrey linkedHashMap2.put(null, null);//æ’å…¥æ–°çš„èŠ‚ç‚¹ null Iterator iter3 = linkedHashMap2.entrySet().iterator(); while (iter3.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter3.next(); System.out.println(entry.getKey() + "=" + entry.getValue()); &#125; &#125; è¾“å‡ºç»“æžœæ˜¯: 12345678910111213141516171819202122----------HashMapæ’å…¥æ•°æ®--------banana=capple=apeach=dwatermelon=b----------LinkedHashMapæ’å…¥æ•°æ®,æŒ‰ç…§æ’å…¥é¡ºåºè¿›è¡ŒæŽ’åº--------apple=awatermelon=bbanana=cpeach=d----------LinkedHashMapæ’å…¥æ•°æ®,æŒ‰ç…§è®¿é—®é¡ºåºè¿›è¡ŒæŽ’åº--------watermelon=bbpeach=ddbanana=cc//bananaåˆ°äº†æœ«å°¾apple=aa//appleåˆ°äº†æœ«å°¾-----------peach=ddbanana=ccapple=aawatermelon=bb//watermelonåˆ°äº†é“¾è¡¨æœ«å°¾stawbarrey=ee//æ–°æ’å…¥çš„æ”¾åœ¨æœ«å°¾null=null//æ–°æ’å…¥çš„æ”¾åœ¨æœ«å°¾ ä¸‰ã€å±žæ€§ LinkedHashMapå¯ä»¥è®¤ä¸ºæ˜¯HashMap+LinkedListï¼Œå³å®ƒæ—¢ä½¿ç”¨HashMapæ“ä½œæ•°æ®ç»“æž„ï¼Œåˆä½¿ç”¨LinkedListç»´æŠ¤æ’å…¥å…ƒç´ çš„å…ˆåŽé¡ºåº 3.1 ç»§æ‰¿å…³ç³» 123public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; LinkedHashMapæ˜¯HashMapçš„å­ç±»ï¼Œè‡ªç„¶LinkedHashMapä¹Ÿå°±ç»§æ‰¿äº†HashMapä¸­æ‰€æœ‰éžprivateçš„æ–¹æ³•ã€‚æ‰€ä»¥å®ƒå·²ç»ä»Ž HashMap é‚£é‡Œç»§æ‰¿äº†ä¸Žå“ˆå¸Œè¡¨ç›¸å…³çš„æ“ä½œäº†ï¼Œé‚£ä¹ˆåœ¨LinkedHashMapä¸­ï¼Œå®ƒå¯ä»¥ä¸“æ³¨äºŽé“¾è¡¨å®žçŽ°çš„é‚£éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸Žé“¾è¡¨å®žçŽ°ç›¸å…³çš„å±žæ€§å¦‚ä¸‹ã€‚ 3.2 å±žæ€§ä»‹ç» 1234567891011121314151617//LinkedHashMapçš„é“¾è¡¨èŠ‚ç‚¹ç»§æ‰¿äº†HashMapçš„èŠ‚ç‚¹ï¼Œè€Œä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«äº†å‰æŒ‡é’ˆå’ŒåŽæŒ‡é’ˆï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥çœ‹å‡ºå®ƒæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123; Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; super(hash, key, value, next); &#125;&#125;//å¤´æŒ‡é’ˆtransient LinkedHashMap.Entry&lt;K,V&gt; head;//å°¾æŒ‡é’ˆtransient LinkedHashMap.Entry&lt;K,V&gt; tail;//é»˜è®¤ä¸ºfalseã€‚å½“ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºé“¾è¡¨ä¸­é”®å€¼å¯¹çš„é¡ºåºä¸Žæ¯ä¸ªé”®çš„æ’å…¥é¡ºåºä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´é‡å¤æ’å…¥é”®ï¼Œä¹Ÿä¼šæ›´æ–°é¡ºåº//ç®€å•æ¥è¯´ï¼Œä¸ºfalseæ—¶ï¼Œå°±æ˜¯ä¸Šé¢æ‰€æŒ‡çš„1ã€2ã€3ã€4çš„æƒ…å†µï¼›ä¸ºtrueæ—¶ï¼Œå°±æ˜¯1ã€3ã€4ã€2çš„æƒ…å†µfinal boolean accessOrder; äº”ã€æž„é€ æ–¹æ³• 1234public LinkedHashMap() &#123; super(); accessOrder = false;&#125; å…¶å®žå°±æ˜¯è°ƒç”¨çš„ HashMap çš„æž„é€ æ–¹æ³•: HashMap å®žçŽ°ï¼š 123456789101112131415public HashMap(int initialCapacity, float loadFactor) &#123; if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); this.loadFactor = loadFactor; threshold = initialCapacity; //HashMap åªæ˜¯å®šä¹‰äº†æ”¹æ–¹æ³•ï¼Œå…·ä½“å®žçŽ°äº¤ç»™äº† LinkedHashMap init();&#125; å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ªç©ºçš„ init()ï¼Œå…·ä½“æ˜¯ç”± LinkedHashMap æ¥å®žçŽ°çš„ï¼š 12345@Overridevoid init() &#123; header = new Entry&lt;&gt;(-1, null, null, null); header.before = header.after = header;&#125; å…¶å®žä¹Ÿå°±æ˜¯å¯¹ header è¿›è¡Œäº†åˆå§‹åŒ–ã€‚ å…­ã€æ·»åŠ å…ƒç´  LinkedHashMapå¹¶æ²¡æœ‰é‡å†™ä»»ä½•putæ–¹æ³•ã€‚ä½†æ˜¯å…¶é‡å†™äº†æž„å»ºæ–°èŠ‚ç‚¹çš„newNode()æ–¹æ³•. newNode() ä¼šåœ¨HashMapçš„putVal() æ–¹æ³•é‡Œè¢«è°ƒç”¨ï¼ŒputVal() æ–¹æ³•ä¼šåœ¨æ‰¹é‡æ’å…¥æ•°æ®putMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) æˆ–è€…æ’å…¥å•ä¸ªæ•°æ®public V put(K key, V value)æ—¶è¢«è°ƒç”¨ã€‚ LinkedHashMapé‡å†™äº†newNode(),åœ¨æ¯æ¬¡æž„å»ºæ–°èŠ‚ç‚¹æ—¶ï¼Œé€šè¿‡linkNodeLast(p);å°†æ–°èŠ‚ç‚¹é“¾æŽ¥åœ¨å†…éƒ¨åŒå‘é“¾è¡¨çš„å°¾éƒ¨ã€‚ 12345678910111213141516171819//åœ¨æž„å»ºæ–°èŠ‚ç‚¹æ—¶ï¼Œæž„å»ºçš„æ˜¯`LinkedHashMap.Entry` ä¸å†æ˜¯`Node`.Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) &#123; LinkedHashMap.Entry&lt;K,V&gt; p = new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e); linkNodeLast(p); return p;&#125;//å°†æ–°å¢žçš„èŠ‚ç‚¹ï¼Œè¿žæŽ¥åœ¨é“¾è¡¨çš„å°¾éƒ¨private void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) &#123; LinkedHashMap.Entry&lt;K,V&gt; last = tail; tail = p; //é›†åˆä¹‹å‰æ˜¯ç©ºçš„ if (last == null) head = p; else &#123;//å°†æ–°èŠ‚ç‚¹è¿žæŽ¥åœ¨é“¾è¡¨çš„å°¾éƒ¨ p.before = last; last.after = p; &#125;&#125; ä»¥åŠHashMapä¸“é—¨é¢„ç•™ç»™LinkedHashMapçš„afterNodeAccess() ã€afterNodeInsertion() ã€afterNodeRemoval() æ–¹æ³•ã€‚ 1234// Callbacks to allow LinkedHashMap post-actionsvoid afterNodeAccess(Node&lt;K,V&gt; p) &#123; &#125;void afterNodeInsertion(boolean evict) &#123; &#125;void afterNodeRemoval(Node&lt;K,V&gt; p) &#123; &#125; å¦‚æžœä½ æ²¡æœ‰æ³¨æ„åˆ°æ³¨é‡Šçš„è§£é‡Šçš„è¯ï¼Œä½ å¯èƒ½ä¼šå¾ˆå¥‡æ€ªä¸ºä»€ä¹ˆä¼šæœ‰ä¸‰ä¸ªç©ºæ–¹æ³•ï¼Œè€Œä¸”æœ‰ä¸å°‘åœ°æ–¹è¿˜è°ƒç”¨è¿‡å®ƒä»¬ã€‚å…¶å®žè¿™ä¸‰ä¸ªæ–¹æ³•è¡¨ç¤ºçš„æ˜¯åœ¨è®¿é—®ã€æ’å…¥ã€åˆ é™¤æŸä¸ªèŠ‚ç‚¹ä¹‹åŽï¼Œè¿›è¡Œä¸€äº›å¤„ç†ï¼Œå®ƒä»¬åœ¨LinkedHashMapæœ‰å„è‡ªçš„å®žçŽ°ã€‚LinkedHashMapæ­£æ˜¯é€šè¿‡é‡å†™è¿™ä¸‰ä¸ªæ–¹æ³•æ¥ä¿è¯é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤çš„æœ‰åºæ€§ã€‚ 123456789101112131415161718//å›žè°ƒå‡½æ•°ï¼Œæ–°èŠ‚ç‚¹æ’å…¥ä¹‹åŽå›žè°ƒ,åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ é™¤æœ€è€æ’å…¥çš„èŠ‚ç‚¹ã€‚//å¦‚æžœå®žçŽ°LruCacheä¼šç”¨åˆ°è¿™ä¸ªæ–¹æ³•ã€‚void afterNodeInsertion(boolean evict) &#123; // possibly remove eldest LinkedHashMap.Entry&lt;K,V&gt; first; //LinkedHashMap é»˜è®¤è¿”å›žfalse åˆ™ä¸åˆ é™¤èŠ‚ç‚¹ if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) &#123; K key = first.key; removeNode(hash(key), key, null, false, true); &#125;&#125;//LinkedHashMap é»˜è®¤è¿”å›žfalse åˆ™ä¸åˆ é™¤èŠ‚ç‚¹ã€‚ //è¿”å›žtrue ä»£è¡¨è¦åˆ é™¤æœ€æ—©çš„èŠ‚ç‚¹ã€‚//é€šå¸¸æž„å»ºä¸€ä¸ªLruCacheä¼šåœ¨è¾¾åˆ°Cacheçš„ä¸Šé™æ˜¯è¿”å›žtrueprotected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123; return false;&#125; void afterNodeInsertion(boolean evict)ä»¥åŠboolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) æ˜¯æž„å»ºLruCacheéœ€è¦çš„å›žè°ƒï¼Œåœ¨è¿™å¯ä»¥å¿½ç•¥å®ƒä»¬ã€‚ ä¸ƒã€åˆ é™¤å…ƒç´  LinkedHashMapä¹Ÿæ²¡æœ‰é‡å†™remove() æ–¹æ³•ï¼Œå› ä¸ºå®ƒçš„åˆ é™¤é€»è¾‘å’ŒHashMapå¹¶æ— åŒºåˆ«ã€‚ ä½†å®ƒé‡å†™äº†afterNodeRemoval() è¿™ä¸ªå›žè°ƒæ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šåœ¨Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) æ–¹æ³•ä¸­å›žè°ƒï¼ŒremoveNode() ä¼šåœ¨æ‰€æœ‰æ¶‰åŠåˆ°åˆ é™¤èŠ‚ç‚¹çš„æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼Œä¸Šæ–‡åˆ†æžè¿‡ï¼Œæ˜¯åˆ é™¤èŠ‚ç‚¹æ“ä½œçš„çœŸæ­£æ‰§è¡Œè€…ã€‚ 1234567891011121314151617//åœ¨åˆ é™¤èŠ‚ç‚¹eæ—¶ï¼ŒåŒæ­¥å°†eä»ŽåŒå‘é“¾è¡¨ä¸Šåˆ é™¤void afterNodeRemoval(Node&lt;K,V&gt; e) &#123; // unlink LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; //å¾…åˆ é™¤èŠ‚ç‚¹ p çš„å‰ç½®åŽç½®èŠ‚ç‚¹éƒ½ç½®ç©º p.before = p.after = null; //å¦‚æžœå‰ç½®èŠ‚ç‚¹æ˜¯nullï¼Œåˆ™çŽ°åœ¨çš„å¤´ç»“ç‚¹åº”è¯¥æ˜¯åŽç½®èŠ‚ç‚¹a if (b == null) head = a; else//å¦åˆ™å°†å‰ç½®èŠ‚ç‚¹bçš„åŽç½®èŠ‚ç‚¹æŒ‡å‘a b.after = a; //åŒç†å¦‚æžœåŽç½®èŠ‚ç‚¹æ—¶null ï¼Œåˆ™å°¾èŠ‚ç‚¹åº”æ˜¯b if (a == null) tail = b; else//å¦åˆ™æ›´æ–°åŽç½®èŠ‚ç‚¹açš„å‰ç½®èŠ‚ç‚¹ä¸ºb a.before = b;&#125; å…«ã€æŸ¥è¯¢å…ƒç´  LinkedHashMapé‡å†™äº†get()å’ŒgetOrDefault() æ–¹æ³•ï¼š 12345678910111213141516public V get(Object key) &#123; Node&lt;K,V&gt; e; if ((e = getNode(hash(key), key)) == null) return null; if (accessOrder) afterNodeAccess(e); return e.value;&#125;public V getOrDefault(Object key, V defaultValue) &#123; Node&lt;K,V&gt; e; if ((e = getNode(hash(key), key)) == null) return defaultValue; if (accessOrder) afterNodeAccess(e); return e.value;&#125; å¯¹æ¯”HashMapä¸­çš„å®žçŽ°,LinkedHashMapåªæ˜¯å¢žåŠ äº†åœ¨æˆå‘˜å˜é‡(æž„é€ å‡½æ•°æ—¶èµ‹å€¼)accessOrderä¸ºtrueçš„æƒ…å†µä¸‹ï¼Œè¦åŽ»å›žè°ƒvoid afterNodeAccess(Node&lt;K,V&gt; e) å‡½æ•°ã€‚ 1234public V get(Object key) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value;&#125; åœ¨afterNodeAccess() å‡½æ•°ä¸­ï¼Œä¼šå°†å½“å‰è¢«è®¿é—®åˆ°çš„èŠ‚ç‚¹eï¼Œç§»åŠ¨è‡³å†…éƒ¨çš„åŒå‘é“¾è¡¨çš„å°¾éƒ¨ã€‚ 12345678910111213141516171819202122232425262728293031void afterNodeAccess(Node&lt;K,V&gt; e) &#123; // move node to last LinkedHashMap.Entry&lt;K,V&gt; last;//åŽŸå°¾èŠ‚ç‚¹ //å¦‚æžœaccessOrder æ˜¯true ï¼Œä¸”åŽŸå°¾èŠ‚ç‚¹ä¸ç­‰äºŽe if (accessOrder &amp;&amp; (last = tail) != e) &#123; //èŠ‚ç‚¹eå¼ºè½¬æˆåŒå‘é“¾è¡¨èŠ‚ç‚¹p LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; //pçŽ°åœ¨æ˜¯å°¾èŠ‚ç‚¹ï¼Œ åŽç½®èŠ‚ç‚¹ä¸€å®šæ˜¯null p.after = null; //å¦‚æžœpçš„å‰ç½®èŠ‚ç‚¹æ˜¯nullï¼Œåˆ™pä»¥å‰æ˜¯å¤´ç»“ç‚¹ï¼Œæ‰€ä»¥æ›´æ–°çŽ°åœ¨çš„å¤´ç»“ç‚¹æ˜¯pçš„åŽç½®èŠ‚ç‚¹a if (b == null) head = a; else//å¦åˆ™æ›´æ–°pçš„å‰ç›´æŽ¥ç‚¹bçš„åŽç½®èŠ‚ç‚¹ä¸º a b.after = a; //å¦‚æžœpçš„åŽç½®èŠ‚ç‚¹ä¸æ˜¯nullï¼Œåˆ™æ›´æ–°åŽç½®èŠ‚ç‚¹açš„å‰ç½®èŠ‚ç‚¹ä¸ºb if (a != null) a.before = b; else//å¦‚æžœåŽŸæœ¬pçš„åŽç½®èŠ‚ç‚¹æ˜¯nullï¼Œåˆ™på°±æ˜¯å°¾èŠ‚ç‚¹ã€‚ æ­¤æ—¶ æ›´æ–°lastçš„å¼•ç”¨ä¸º pçš„å‰ç½®èŠ‚ç‚¹b last = b; if (last == null) //åŽŸæœ¬å°¾èŠ‚ç‚¹æ˜¯null åˆ™ï¼Œé“¾è¡¨ä¸­å°±ä¸€ä¸ªèŠ‚ç‚¹ head = p; else &#123;//å¦åˆ™ æ›´æ–° å½“å‰èŠ‚ç‚¹pçš„å‰ç½®èŠ‚ç‚¹ä¸º åŽŸå°¾èŠ‚ç‚¹lastï¼Œ lastçš„åŽç½®èŠ‚ç‚¹æ˜¯p p.before = last; last.after = p; &#125; //å°¾èŠ‚ç‚¹çš„å¼•ç”¨èµ‹å€¼æˆp tail = p; //ä¿®æ”¹modCountã€‚ ++modCount; &#125;&#125; å›¾ç¤º(æ³¨æ„è¿™ä¸ªå›¾ï¼Œ1å’Œ6ä¹Ÿåº”è¯¥æ˜¯è¿žåœ¨ä¸€èµ·çš„ï¼Œå› ä¸ºæ˜¯åŒå‘å¾ªçŽ¯é“¾è¡¨ï¼Œæ‰€ä»¥è§†ä¸ºä¸€ä¸ªå°é”™è¯¯)ï¼š è¯´æ˜Žï¼šä»Žå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç»“ç‚¹3é“¾æŽ¥åˆ°äº†å°¾ç»“ç‚¹åŽé¢ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒafterNodeAccess() å‡½æ•°ä¸­ï¼Œä¼šä¿®æ”¹modCount,å› æ­¤å½“ä½ æ­£åœ¨accessOrder=trueçš„æ¨¡å¼ä¸‹,è¿­ä»£LinkedHashMapæ—¶ï¼Œå¦‚æžœåŒæ—¶æŸ¥è¯¢è®¿é—®æ•°æ®ï¼Œä¹Ÿä¼šå¯¼è‡´fail-fastï¼Œå› ä¸ºè¿­ä»£çš„é¡ºåºå·²ç»æ”¹å˜ã€‚ ä¹ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ å®ƒé‡å†™äº†è¯¥æ–¹æ³•ï¼Œç›¸æ¯”HashMapçš„å®žçŽ°ï¼Œæ›´ä¸ºé«˜æ•ˆã€‚ 123456789public boolean containsValue(Object value) &#123; //éåŽ†ä¸€éé“¾è¡¨ï¼ŒåŽ»æ¯”è¾ƒæœ‰æ²¡æœ‰valueç›¸ç­‰çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›ž for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after) &#123; V v = e.value; if (v == value || (value != null &amp;&amp; value.equals(v))) return true; &#125; return false;&#125; å¯¹æ¯”HashMapï¼Œæ˜¯ç”¨ä¸¤ä¸ªforå¾ªçŽ¯éåŽ†ï¼Œç›¸å¯¹ä½Žæ•ˆã€‚ 12345678910111213public boolean containsValue(Object value) &#123; Node&lt;K,V&gt;[] tab; V v; if ((tab = table) != null &amp;&amp; size &gt; 0) &#123; for (int i = 0; i &lt; tab.length; ++i) &#123; for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) &#123; if ((v = e.value) == value || (value != null &amp;&amp; value.equals(v))) return true; &#125; &#125; &#125; return false;&#125; åã€æ›¿æ¢æŸä¸ªå…ƒç´  1234567891011121314// ç”¨dstæ›¿æ¢srcprivate void transferLinks(LinkedHashMap.Entry&lt;K,V&gt; src, LinkedHashMap.Entry&lt;K,V&gt; dst) &#123; LinkedHashMap.Entry&lt;K,V&gt; b = dst.before = src.before; LinkedHashMap.Entry&lt;K,V&gt; a = dst.after = src.after; if (b == null) head = dst; else b.after = dst; if (a == null) tail = dst; else a.before = dst;&#125; åäºŒã€æ€»ç»“ LinkedHashMapç›¸å¯¹äºŽHashMapçš„æºç æ¯”ï¼Œæ˜¯å¾ˆç®€å•çš„ã€‚å› ä¸ºå¤§æ ‘åº•ä¸‹å¥½ä¹˜å‡‰ã€‚å®ƒç»§æ‰¿äº†HashMapï¼Œä»…é‡å†™äº†å‡ ä¸ªæ–¹æ³•ï¼Œä»¥æ”¹å˜å®ƒè¿­ä»£éåŽ†æ—¶çš„é¡ºåºã€‚è¿™ä¹Ÿæ˜¯å…¶ä¸ŽHashMapç›¸æ¯”æœ€å¤§çš„ä¸åŒã€‚ åœ¨æ¯æ¬¡æ’å…¥æ•°æ®ï¼Œæˆ–è€…è®¿é—®ã€ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¼šå¢žåŠ èŠ‚ç‚¹ã€æˆ–è°ƒæ•´é“¾è¡¨çš„èŠ‚ç‚¹é¡ºåºã€‚ä»¥å†³å®šè¿­ä»£æ—¶è¾“å‡ºçš„é¡ºåºã€‚ accessOrderé»˜è®¤æ˜¯falseï¼Œåˆ™è¿­ä»£æ—¶è¾“å‡ºçš„é¡ºåºæ˜¯æ’å…¥èŠ‚ç‚¹çš„é¡ºåºã€‚è‹¥ä¸ºtrueï¼Œåˆ™è¾“å‡ºçš„é¡ºåºæ˜¯æŒ‰ç…§è®¿é—®èŠ‚ç‚¹çš„é¡ºåºã€‚ä¸ºtrueæ—¶ï¼Œå¯ä»¥åœ¨è¿™åŸºç¡€ä¹‹ä¸Šæž„å»ºä¸€ä¸ªLruCache. LinkedHashMapå¹¶æ²¡æœ‰é‡å†™ä»»ä½•putæ–¹æ³•ã€‚ä½†æ˜¯å…¶é‡å†™äº†æž„å»ºæ–°èŠ‚ç‚¹çš„newNode()æ–¹æ³•.åœ¨æ¯æ¬¡æž„å»ºæ–°èŠ‚ç‚¹æ—¶ï¼Œå°†æ–°èŠ‚ç‚¹é“¾æŽ¥åœ¨å†…éƒ¨åŒå‘é“¾è¡¨çš„å°¾éƒ¨ accessOrder=trueçš„æ¨¡å¼ä¸‹,åœ¨afterNodeAccess()å‡½æ•°ä¸­ï¼Œä¼šå°†å½“å‰è¢«è®¿é—®åˆ°çš„èŠ‚ç‚¹eï¼Œç§»åŠ¨è‡³å†…éƒ¨çš„åŒå‘é“¾è¡¨çš„å°¾éƒ¨ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒafterNodeAccess()å‡½æ•°ä¸­ï¼Œä¼šä¿®æ”¹modCount,å› æ­¤å½“ä½ æ­£åœ¨accessOrder=trueçš„æ¨¡å¼ä¸‹,è¿­ä»£LinkedHashMapæ—¶ï¼Œå¦‚æžœåŒæ—¶æŸ¥è¯¢è®¿é—®æ•°æ®ï¼Œä¹Ÿä¼šå¯¼è‡´fail-fastï¼Œå› ä¸ºè¿­ä»£çš„é¡ºåºå·²ç»æ”¹å˜ã€‚ nextNode() å°±æ˜¯è¿­ä»£å™¨é‡Œçš„next()æ–¹æ³• ã€‚è¯¥æ–¹æ³•çš„å®žçŽ°å¯ä»¥çœ‹å‡ºï¼Œè¿­ä»£LinkedHashMapï¼Œå°±æ˜¯ä»Žå†…éƒ¨ç»´æŠ¤çš„åŒé“¾è¡¨çš„è¡¨å¤´å¼€å§‹å¾ªçŽ¯è¾“å‡ºã€‚ è€ŒåŒé“¾è¡¨èŠ‚ç‚¹çš„é¡ºåºåœ¨LinkedHashMapçš„å¢žã€åˆ ã€æ”¹ã€æŸ¥æ—¶éƒ½ä¼šæ›´æ–°ã€‚ä»¥æ»¡è¶³æŒ‰ç…§æ’å…¥é¡ºåºè¾“å‡ºï¼Œè¿˜æ˜¯è®¿é—®é¡ºåºè¾“å‡ºã€‚ å®ƒä¸ŽHashMapæ¯”ï¼Œè¿˜æœ‰ä¸€ä¸ªå°å°çš„ä¼˜åŒ–ï¼Œé‡å†™äº†containsValue()æ–¹æ³•ï¼Œç›´æŽ¥éåŽ†å†…éƒ¨é“¾è¡¨åŽ»æ¯”å¯¹valueå€¼æ˜¯å¦ç›¸ç­‰ã€‚ æ•´ç†è‡ªï¼š http://blog.csdn.net/zxt0601/article/details/77429150 http://wiki.jikexueyuan.com/project/java-collection/linkedhashmap.html http://blog.csdn.net/u013124587/article/details/52659741 http://www.cnblogs.com/leesf456/p/5248868.html]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashSet]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F6.HashSet%2F</url>
    <content type="text"><![CDATA[HashSet æ˜¯ä¸€ä¸ªä¸å…è®¸å­˜å‚¨é‡å¤å…ƒç´ çš„é›†åˆï¼Œå®ƒæ˜¯åŸºäºŽ HashMap å®žçŽ°çš„ï¼Œ HashSet åº•å±‚ä½¿ç”¨ HashMap æ¥ä¿å­˜æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤ HashSet çš„å®žçŽ°æ¯”è¾ƒç®€å•ï¼Œç›¸å…³ HashSet çš„æ“ä½œï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æŽ¥è°ƒç”¨åº•å±‚ HashMap çš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆã€‚æ‰€ä»¥åªè¦ç†è§£äº† HashMapï¼ŒHashSet å°±æ°´åˆ°æ¸ æˆäº†ã€‚ æˆå‘˜å˜é‡ é¦–å…ˆäº†è§£ä¸‹HashSetçš„æˆå‘˜å˜é‡: 1234private transient HashMap&lt;E,Object&gt; map;// Dummy value to associate with an Object in the backing Mapprivate static final Object PRESENT = new Object(); å‘çŽ°ä¸»è¦å°±ä¸¤ä¸ªå˜é‡: map ï¼šç”¨äºŽå­˜æ”¾æœ€ç»ˆæ•°æ®çš„ã€‚ PRESENT ï¼šæ˜¯æ‰€æœ‰å†™å…¥mapçš„valueå€¼ã€‚ æž„é€ æ–¹æ³• 1234567public HashSet() &#123; map = new HashMap&lt;&gt;();&#125;public HashSet(int initialCapacity, float loadFactor) &#123; map = new HashMap&lt;&gt;(initialCapacity, loadFactor);&#125; æž„é€ å‡½æ•°å¾ˆç®€å•ï¼Œåˆ©ç”¨äº†HashMapåˆå§‹åŒ–äº†mapã€‚ add 123public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; æ¯”è¾ƒå…³é”®çš„å°±æ˜¯è¿™ä¸ª add() æ–¹æ³•ã€‚ å¯ä»¥çœ‹å‡ºå®ƒæ˜¯å°†å­˜æ”¾çš„å¯¹è±¡å½“åšäº† HashMap çš„å¥ï¼Œvalue éƒ½æ˜¯ç›¸åŒçš„ PRESENT ã€‚ç”±äºŽ HashMap çš„ key æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œæ‰€ä»¥æ¯å½“æœ‰é‡å¤çš„å€¼å†™å…¥åˆ° HashSet æ—¶ï¼Œvalue ä¼šè¢«è¦†ç›–ï¼Œä½† key ä¸ä¼šå—åˆ°å½±å“ï¼Œè¿™æ ·å°±ä¿è¯äº† HashSet ä¸­åªèƒ½å­˜æ”¾ä¸é‡å¤çš„å…ƒç´ ã€‚ è¯¥æ–¹æ³•å¦‚æžœæ·»åŠ çš„æ˜¯åœ¨ HashSet ä¸­ä¸å­˜åœ¨çš„ï¼Œåˆ™è¿”å›ž trueï¼›å¦‚æžœæ·»åŠ çš„å…ƒç´ å·²ç»å­˜åœ¨ï¼Œè¿”å›ž falseã€‚å…¶åŽŸå› åœ¨äºŽæˆ‘ä»¬ä¹‹å‰æåˆ°çš„å…³äºŽ HashMap çš„ put æ–¹æ³•ã€‚è¯¥æ–¹æ³•åœ¨æ·»åŠ  key ä¸é‡å¤çš„é”®å€¼å¯¹çš„æ—¶å€™ï¼Œä¼šè¿”å›ž nullã€‚ æ€»ç»“ HashSet çš„åŽŸç†æ¯”è¾ƒç®€å•ï¼Œå‡ ä¹Žå…¨éƒ¨å€ŸåŠ©äºŽ HashMap æ¥å®žçŽ°çš„ã€‚ æ‰€ä»¥ HashMap ä¼šå‡ºçŽ°çš„é—®é¢˜ HashSet ä¾ç„¶ä¸èƒ½é¿å…ã€‚ å¯¹äºŽ HashSet ä¸­ä¿å­˜çš„å¯¹è±¡ï¼Œè¯·æ³¨æ„æ­£ç¡®é‡å†™å…¶ equals å’Œ hashCode æ–¹æ³•ï¼Œä»¥ä¿è¯æ”¾å…¥çš„å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æ¯”è¾ƒé‡è¦çš„ã€‚]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMap]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F5.HashMap%2F</url>
    <content type="text"><![CDATA[HashMapåŸºæœ¬æ˜¯é¢è¯•å¿…é—®çš„ç‚¹ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®ç»“æž„ç”¨çš„å¤ªé¢‘ç¹äº†ï¼Œjdk1.8ä¸­çš„ä¼˜åŒ–ä¹Ÿæ˜¯æ¯”è¾ƒå·§å¦™ã€‚æœ‰å¿…è¦åŽ»æ·±å…¥æŽ¢è®¨ä¸€ä¸‹ã€‚ä½†æ˜¯æ¶‰åŠçš„å†…å®¹æ¯”è¾ƒå¤šï¼Œè¿™é‡Œåªå…ˆæŽ¢è®¨jdk8ä¸­HashMapçš„å®žçŽ°ï¼Œè‡³äºŽjdk7ä¸­HashMapçš„æ­»å¾ªçŽ¯é—®é¢˜ã€çº¢é»‘æ ‘çš„åŽŸç†ç­‰éƒ½ä¸ä¼šåœ¨æœ¬ç¯‡æ–‡ç« æ‰©å±•åˆ°ã€‚å…¶ä»–çš„æ–‡ç« å°†ä¼šå†åŽ»æŽ¢è®¨æ•´ç†ã€‚ æœ¬ç¯‡æ–‡ç« è¾ƒé•¿ï¼Œé«˜èƒ½é¢„è­¦ã€‚ ä¸€ã€å‰è¨€ ä¹‹å‰çš„Listï¼Œè®²äº†ArrayListã€LinkedListï¼Œæœ€åŽè®²åˆ°äº†CopyOnWriteArrayListï¼Œå°±å‰ä¸¤è€…è€Œè¨€ï¼Œåæ˜ çš„æ˜¯ä¸¤ç§æ€æƒ³ï¼š ï¼ˆ1ï¼‰ArrayListä»¥æ•°ç»„å½¢å¼å®žçŽ°ï¼Œé¡ºåºæ’å…¥ã€æŸ¥æ‰¾å¿«ï¼Œæ’å…¥ã€åˆ é™¤è¾ƒæ…¢ ï¼ˆ2ï¼‰LinkedListä»¥é“¾è¡¨å½¢å¼å®žçŽ°ï¼Œé¡ºåºæ’å…¥ã€æŸ¥æ‰¾è¾ƒæ…¢ï¼Œæ’å…¥ã€åˆ é™¤æ–¹ä¾¿ é‚£ä¹ˆæ˜¯å¦æœ‰ä¸€ç§æ•°æ®ç»“æž„èƒ½å¤Ÿç»“åˆä¸Šé¢ä¸¤ç§çš„ä¼˜ç‚¹å‘¢ï¼Ÿæœ‰ï¼Œç­”æ¡ˆå°±æ˜¯HashMapã€‚ HashMapæ˜¯ä¸€ç§éžå¸¸å¸¸è§ã€æ–¹ä¾¿å’Œæœ‰ç”¨çš„é›†åˆï¼Œæ˜¯ä¸€ç§é”®å€¼å¯¹ï¼ˆK-Vï¼‰å½¢å¼çš„å­˜å‚¨ç»“æž„ï¼Œåœ¨æœ‰äº†HashCodeçš„åŸºç¡€åŽï¼Œä¸‹é¢å°†è¿˜æ˜¯ç”¨å›¾ç¤ºçš„æ–¹å¼è§£è¯»HashMapçš„å®žçŽ°åŽŸç†ã€‚ Javaä¸ºæ•°æ®ç»“æž„ä¸­çš„æ˜ å°„å®šä¹‰äº†ä¸€ä¸ªæŽ¥å£java.util.Mapï¼Œæ­¤æŽ¥å£ä¸»è¦æœ‰å››ä¸ªå¸¸ç”¨çš„å®žçŽ°ç±»ï¼Œåˆ†åˆ«æ˜¯HashMapã€Hashtableã€LinkedHashMapå’ŒTreeMapï¼Œç±»ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š (1) HashMapï¼šå®ƒæ ¹æ®é”®çš„hashCodeå€¼å­˜å‚¨æ•°æ®ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥ç›´æŽ¥å®šä½åˆ°å®ƒçš„å€¼ï¼Œå› è€Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ï¼Œä½†éåŽ†é¡ºåºå´æ˜¯ä¸ç¡®å®šçš„ã€‚ HashMapæœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„é”®ä¸ºnullï¼Œå…è®¸å¤šæ¡è®°å½•çš„å€¼ä¸ºnullã€‚HashMapéžçº¿ç¨‹å®‰å…¨ï¼Œå³ä»»ä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™HashMapï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚å¦‚æžœéœ€è¦æ»¡è¶³çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥ç”¨ Collectionsçš„synchronizedMapæ–¹æ³•ä½¿HashMapå…·æœ‰çº¿ç¨‹å®‰å…¨çš„èƒ½åŠ›ï¼Œæˆ–è€…ä½¿ç”¨ConcurrentHashMapã€‚ (2) Hashtableï¼šHashtableæ˜¯é—ç•™ç±»ï¼Œå¾ˆå¤šæ˜ å°„çš„å¸¸ç”¨åŠŸèƒ½ä¸ŽHashMapç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å®ƒæ‰¿è‡ªDictionaryç±»ï¼Œå¹¶ä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä»»ä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å†™Hashtableï¼Œå¹¶å‘æ€§ä¸å¦‚ConcurrentHashMapï¼Œå› ä¸ºConcurrentHashMapå¼•å…¥äº†åˆ†æ®µé”ã€‚Hashtableä¸å»ºè®®åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨HashMapæ›¿æ¢ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨ConcurrentHashMapæ›¿æ¢ã€‚ (3) LinkedHashMapï¼šLinkedHashMapæ˜¯HashMapçš„ä¸€ä¸ªå­ç±»ï¼Œä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåºï¼Œåœ¨ç”¨IteratoréåŽ†LinkedHashMapæ—¶ï¼Œå…ˆå¾—åˆ°çš„è®°å½•è‚¯å®šæ˜¯å…ˆæ’å…¥çš„ï¼Œä¹Ÿå¯ä»¥åœ¨æž„é€ æ—¶å¸¦å‚æ•°ï¼ŒæŒ‰ç…§è®¿é—®æ¬¡åºæŽ’åºã€‚ (4) TreeMapï¼šTreeMapå®žçŽ°SortedMapæŽ¥å£ï¼Œèƒ½å¤ŸæŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®æŽ’åºï¼Œé»˜è®¤æ˜¯æŒ‰é”®å€¼çš„å‡åºæŽ’åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæŽ’åºçš„æ¯”è¾ƒå™¨ï¼Œå½“ç”¨IteratoréåŽ†TreeMapæ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æŽ’è¿‡åºçš„ã€‚å¦‚æžœä½¿ç”¨æŽ’åºçš„æ˜ å°„ï¼Œå»ºè®®ä½¿ç”¨TreeMapã€‚åœ¨ä½¿ç”¨TreeMapæ—¶ï¼Œkeyå¿…é¡»å®žçŽ°ComparableæŽ¥å£æˆ–è€…åœ¨æž„é€ TreeMapä¼ å…¥è‡ªå®šä¹‰çš„Comparatorï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºjava.lang.ClassCastExceptionç±»åž‹çš„å¼‚å¸¸ã€‚ å¯¹äºŽä¸Šè¿°å››ç§Mapç±»åž‹çš„ç±»ï¼Œè¦æ±‚æ˜ å°„ä¸­çš„keyæ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ä¸å¯å˜å¯¹è±¡æ˜¯è¯¥å¯¹è±¡åœ¨åˆ›å»ºåŽå®ƒçš„å“ˆå¸Œå€¼ä¸ä¼šè¢«æ”¹å˜ã€‚å¦‚æžœå¯¹è±¡çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–ï¼ŒMapå¯¹è±¡å¾ˆå¯èƒ½å°±å®šä½ä¸åˆ°æ˜ å°„çš„ä½ç½®äº†ã€‚ äºŒã€HashMapçš„ç»“æž„ å…¶ä¸­å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬ç»å¸¸æŠŠæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ç§°ä¸ºä¸€ä¸ªæ¡¶ï¼Œå“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç”¨æ¥å­˜å‚¨ä¸€ä¸ªé”®å€¼å¯¹ã€‚ åœ¨æ’å…¥å…ƒç´ æ—¶ï¼Œå¦‚æžœå‘ç”Ÿå†²çªï¼ˆå³å¤šä¸ªé”®å€¼å¯¹æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶ä¸Šï¼‰çš„è¯ï¼Œå°±ä¼šé€šè¿‡é“¾è¡¨çš„å½¢å¼æ¥è§£å†³å†²çªã€‚ å› ä¸ºä¸€ä¸ªæ¡¶ä¸Šå¯èƒ½å­˜åœ¨å¤šä¸ªé”®å€¼å¯¹ï¼Œæ‰€ä»¥åœ¨æŸ¥æ‰¾çš„æ—¶å€™ï¼Œä¼šå…ˆé€šè¿‡keyçš„å“ˆå¸Œå€¼å…ˆå®šä½åˆ°æ¡¶ï¼Œå†éåŽ†æ¡¶ä¸Šçš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œæ‰¾å‡ºkeyç›¸ç­‰çš„é”®å€¼å¯¹ï¼Œä»Žè€Œæ¥èŽ·å–valueã€‚ å¦‚å›¾æ‰€ç¤ºï¼ŒHashMap åº•å±‚æ˜¯åŸºäºŽæ•°ç»„å’Œé“¾è¡¨å®žçŽ°çš„ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„å‚æ•°ï¼š å®¹é‡ è´Ÿè½½å› å­ å®¹é‡çš„é»˜è®¤å¤§å°æ˜¯ 16ï¼Œè´Ÿè½½å› å­æ˜¯ 0.75ï¼Œå½“ HashMap çš„ size &gt; 16*0.75 æ—¶å°±ä¼šå‘ç”Ÿæ‰©å®¹(å®¹é‡å’Œè´Ÿè½½å› å­éƒ½å¯ä»¥è‡ªç”±è°ƒæ•´)ã€‚ ä¸‰ã€ç»§æ‰¿å…³ç³» 12public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable è¯´æ˜Žï¼š HashMapç»§æ‰¿è‡ªAbstractMapï¼ŒAbstractMapæ˜¯MapæŽ¥å£çš„éª¨å¹²å®žçŽ°ï¼ŒAbstractMapä¸­å®žçŽ°äº†Mapä¸­æœ€é‡è¦æœ€å¸¸ç”¨å’Œæ–¹æ³•ï¼Œè¿™æ ·HashMapç»§æ‰¿AbstractMapå°±ä¸éœ€è¦å®žçŽ°Mapçš„æ‰€æœ‰æ–¹æ³•ï¼Œè®©HashMapå‡å°‘äº†å¤§é‡çš„å·¥ä½œã€‚ å››ã€å±žæ€§ 123456789101112131415161718192021222324252627//é»˜è®¤çš„åˆå§‹å®¹é‡ä¸º16static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16//æœ€å¤§çš„å®¹é‡ä¸Šé™ä¸º2^30static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;//é»˜è®¤çš„è´Ÿè½½å› å­ä¸º0.75static final float DEFAULT_LOAD_FACTOR = 0.75f;//å˜æˆæ ‘åž‹ç»“æž„çš„ä¸´ç•Œå€¼ä¸º8static final int TREEIFY_THRESHOLD = 8;//æ¢å¤é“¾å¼ç»“æž„çš„ä¸´ç•Œå€¼ä¸º6static final int UNTREEIFY_THRESHOLD = 6;/** * å“ˆå¸Œè¡¨çš„æœ€å°æ ‘å½¢åŒ–å®¹é‡ * å½“å“ˆå¸Œè¡¨ä¸­çš„å®¹é‡å¤§äºŽè¿™ä¸ªå€¼æ—¶ï¼Œè¡¨ä¸­çš„æ¡¶æ‰èƒ½è¿›è¡Œæ ‘å½¢åŒ– * å¦åˆ™æ¡¶å†…å…ƒç´ å¤ªå¤šæ—¶ä¼šæ‰©å®¹ï¼Œè€Œä¸æ˜¯æ ‘å½¢åŒ– * ä¸ºäº†é¿å…è¿›è¡Œæ‰©å®¹ã€æ ‘å½¢åŒ–é€‰æ‹©çš„å†²çªï¼Œè¿™ä¸ªå€¼ä¸èƒ½å°äºŽ 4 * TREEIFY_THRESHOLD */static final int MIN_TREEIFY_CAPACITY = 64;//å“ˆå¸Œè¡¨transient Node&lt;K,V&gt;[] table;//å“ˆå¸Œè¡¨ä¸­é”®å€¼å¯¹çš„ä¸ªæ•°transient int size;//å“ˆå¸Œè¡¨è¢«ä¿®æ”¹çš„æ¬¡æ•°transient int modCount;//å®ƒæ˜¯é€šè¿‡capacity*load factorè®¡ç®—å‡ºæ¥çš„ï¼Œå½“sizeåˆ°è¾¾è¿™ä¸ªå€¼æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œint threshold;//è´Ÿè½½å› å­final float loadFactor; 4.1 å‡ ä¸ªå±žæ€§çš„è¯¦ç»†è¯´æ˜Ž 1234int threshold; // æ‰€èƒ½å®¹çº³çš„key-valueå¯¹æžé™ final float loadFactor; // è´Ÿè½½å› å­int modCount; int size; é¦–å…ˆï¼ŒNode[] tableçš„åˆå§‹åŒ–é•¿åº¦length(é»˜è®¤å€¼æ˜¯16)ï¼ŒLoad factorä¸ºè´Ÿè½½å› å­(é»˜è®¤å€¼æ˜¯0.75)ï¼Œthresholdæ˜¯HashMapæ‰€èƒ½å®¹çº³çš„æœ€å¤§æ•°æ®é‡çš„Node(é”®å€¼å¯¹)ä¸ªæ•°ã€‚threshold = length * Load factorã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•°ç»„å®šä¹‰å¥½é•¿åº¦ä¹‹åŽï¼Œè´Ÿè½½å› å­è¶Šå¤§ï¼Œæ‰€èƒ½å®¹çº³çš„é”®å€¼å¯¹ä¸ªæ•°è¶Šå¤šã€‚ ç»“åˆè´Ÿè½½å› å­çš„å®šä¹‰å…¬å¼å¯çŸ¥ï¼Œthresholdå°±æ˜¯åœ¨æ­¤Load factorå’Œlength(æ•°ç»„é•¿åº¦)å¯¹åº”ä¸‹å…è®¸çš„æœ€å¤§å…ƒç´ æ•°ç›®ï¼Œè¶…è¿‡è¿™ä¸ªæ•°ç›®å°±é‡æ–°resize(æ‰©å®¹)ï¼Œæ‰©å®¹åŽçš„HashMapå®¹é‡æ˜¯ä¹‹å‰å®¹é‡çš„ä¸¤å€ï¼ˆä¸ºä»€ä¹ˆæ˜¯ä¸¤å€ä¸‹æ–‡ä¼šè¯´æ˜Žï¼‰ã€‚ é»˜è®¤çš„è´Ÿè½½å› å­0.75æ˜¯å¯¹ç©ºé—´å’Œæ—¶é—´æ•ˆçŽ‡çš„ä¸€ä¸ªå¹³è¡¡é€‰æ‹©ï¼Œå»ºè®®å¤§å®¶ä¸è¦ä¿®æ”¹ï¼Œé™¤éžåœ¨æ—¶é—´å’Œç©ºé—´æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œå¦‚æžœå†…å­˜ç©ºé—´å¾ˆå¤šè€Œåˆå¯¹æ—¶é—´æ•ˆçŽ‡è¦æ±‚å¾ˆé«˜ï¼Œå¯ä»¥é™ä½Žè´Ÿè½½å› å­`Load factor`çš„å€¼ï¼›ç›¸åï¼Œå¦‚æžœå†…å­˜ç©ºé—´ç´§å¼ è€Œå¯¹æ—¶é—´æ•ˆçŽ‡è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥å¢žåŠ è´Ÿè½½å› å­`loadFactor`çš„å€¼ï¼Œè¿™ä¸ªå€¼å¯ä»¥å¤§äºŽ1ã€‚ sizeè¿™ä¸ªå­—æ®µå…¶å®žå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯HashMapä¸­å®žé™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡ã€‚æ³¨æ„sizeå’Œtableçš„é•¿åº¦lengthã€å®¹çº³æœ€å¤§é”®å€¼å¯¹æ•°é‡thresholdçš„åŒºåˆ«ã€‚ è€ŒmodCountå­—æ®µä¸»è¦ç”¨æ¥è®°å½•HashMapå†…éƒ¨ç»“æž„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ï¼Œä¸»è¦ç”¨äºŽè¿­ä»£çš„å¿«é€Ÿå¤±è´¥ã€‚å¼ºè°ƒä¸€ç‚¹ï¼Œå†…éƒ¨ç»“æž„å‘ç”Ÿå˜åŒ–æŒ‡çš„æ˜¯ç»“æž„å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚putæ–°é”®å€¼å¯¹ï¼Œä½†æ˜¯æŸä¸ªkeyå¯¹åº”çš„valueå€¼è¢«è¦†ç›–ä¸å±žäºŽç»“æž„å˜åŒ–ã€‚ åœ¨HashMapä¸­ï¼Œå“ˆå¸Œæ¡¶æ•°ç»„tableçš„é•¿åº¦lengthå¤§å°å¿…é¡»ä¸º2çš„næ¬¡æ–¹(ä¸€å®šæ˜¯åˆæ•°)ï¼Œè¿™æ˜¯ä¸€ç§éžå¸¸è§„çš„è®¾è®¡ï¼Œå› ä¸ºå¸¸è§„çš„è®¾è®¡æ˜¯æŠŠæ¡¶çš„å¤§å°è®¾è®¡ä¸ºç´ æ•°ã€‚ç›¸å¯¹æ¥è¯´ç´ æ•°å¯¼è‡´å†²çªçš„æ¦‚çŽ‡è¦å°äºŽåˆæ•°ï¼Œå…·ä½“è¯æ˜Žå¯ä»¥å‚è€ƒ http://blog.csdn.net/liuqiyao_01/article/details/14475159 ï¼ŒHashtableåˆå§‹åŒ–æ¡¶å¤§å°ä¸º11ï¼Œå°±æ˜¯æ¡¶å¤§å°è®¾è®¡ä¸ºç´ æ•°çš„åº”ç”¨ï¼ˆHashtableæ‰©å®¹åŽä¸èƒ½ä¿è¯è¿˜æ˜¯ç´ æ•°ï¼‰ã€‚HashMapé‡‡ç”¨è¿™ç§éžå¸¸è§„è®¾è®¡ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨å–æ¨¡å’Œæ‰©å®¹æ—¶åšä¼˜åŒ–ï¼ŒåŒæ—¶ä¸ºäº†å‡å°‘å†²çªï¼ŒHashMapå®šä½å“ˆå¸Œæ¡¶ç´¢å¼•ä½ç½®æ—¶ï¼Œä¹ŸåŠ å…¥äº†é«˜ä½å‚ä¸Žè¿ç®—çš„è¿‡ç¨‹ã€‚ä¸‹æ–‡ä¼šè¯´æ˜Žã€‚ è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³ä½¿è´Ÿè½½å› å­å’ŒHashç®—æ³•è®¾è®¡çš„å†åˆç†ï¼Œä¹Ÿå…ä¸äº†ä¼šå‡ºçŽ°æ‹‰é“¾è¿‡é•¿çš„æƒ…å†µï¼Œä¸€æ—¦å‡ºçŽ°æ‹‰é“¾è¿‡é•¿ï¼Œåˆ™ä¼šä¸¥é‡å½±å“HashMapçš„æ€§èƒ½ã€‚äºŽæ˜¯ï¼Œåœ¨JDK1.8ç‰ˆæœ¬ä¸­ï¼Œå¯¹æ•°æ®ç»“æž„åšäº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œå¼•å…¥äº†çº¢é»‘æ ‘ã€‚è€Œå½“é“¾è¡¨é•¿åº¦å¤ªé•¿ï¼ˆé»˜è®¤è¶…è¿‡8ï¼‰æ—¶ï¼Œå¹¶ä¸”é“¾è¡¨çš„é•¿åº¦è¶…è¿‡64æ—¶ï¼Œé“¾è¡¨å°±è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåˆ©ç”¨çº¢é»‘æ ‘å¿«é€Ÿå¢žåˆ æ”¹æŸ¥çš„ç‰¹ç‚¹æé«˜HashMapçš„æ€§èƒ½ï¼Œå…¶ä¸­ä¼šç”¨åˆ°çº¢é»‘æ ‘çš„æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰ç®—æ³•ã€‚ è¿™é‡Œç€é‡æä¸€ä¸‹MIN_TREEIFY_CAPACITYå­—æ®µï¼Œå®¹æ˜“ä¸ŽTREEIFY_THRESHOLDæ‰“æž¶ï¼ŒTREEIFY_THRESHOLDæ˜¯æŒ‡æ¡¶ä¸­å…ƒç´ è¾¾åˆ°8ä¸ªï¼Œå°±å°†å…¶æœ¬æ¥çš„é“¾è¡¨ç»“æž„æ”¹ä¸ºçº¢é»‘æ ‘ï¼Œæé«˜æŸ¥è¯¢çš„æ•ˆçŽ‡ã€‚MIN_TREEIFY_CAPACITYæ˜¯æŒ‡æœ€å°æ ‘åŒ–çš„å“ˆå¸Œè¡¨å…ƒç´ ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå°äºŽè¿™ä¸ªå€¼ï¼Œå°±ç®—ä½ (æ•°ç»„)æ¡¶é‡Œçš„å…ƒç´ æ•°é‡å¤§äºŽ8äº†ï¼Œè¿˜æ˜¯è¦ç”¨é“¾è¡¨å­˜å‚¨ï¼Œåªæœ‰åŒæ—¶æ»¡è¶³ï¼šè¡¨ä¸­æ•°æ®å®¹é‡å·²ç»æ‰©å®¹åˆ°MIN_TREEIFY_CAPACITYè¿™ä¸ªé•¿åº¦ï¼Œå¹¶ä¸”æ¡¶é‡Œçš„æ•°æ®ä¸ªæ•°è¾¾åˆ°8ä¸ªçš„æ—¶å€™ï¼Œæ‰ä¼šå°†è¯¥æ¡¶é‡Œçš„ç»“æž„è¿›è¡Œæ ‘åŒ–ã€‚æ³¨æ„æ‰©å®¹æ˜¯æ•°ç»„çš„å¤åˆ¶ã€‚ 4.2 Nodeç»“æž„ 1234567891011121314static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; //ç”¨æ¥å®šä½æ•°ç»„ç´¢å¼•ä½ç½® final K key; V value; Node&lt;K,V&gt; next; //é“¾è¡¨çš„ä¸‹ä¸€ä¸ªnode Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; ... &#125; public final K getKey()&#123; ... &#125; public final V getValue() &#123; ... &#125; public final String toString() &#123; ... &#125; public final int hashCode() &#123; ... &#125; public final V setValue(V newValue) &#123; ... &#125; public final boolean equals(Object o) &#123; ... &#125;&#125; Nodeæ˜¯HashMapçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå®žçŽ°äº†Map.EntryæŽ¥å£ï¼Œæœ¬è´¨æ˜¯å°±æ˜¯ä¸€ä¸ªæ˜ å°„(é”®å€¼å¯¹)ã€‚ä¸Šå›¾ä¸­çš„æ¯ä¸ªé»‘è‰²åœ†ç‚¹å°±æ˜¯ä¸€ä¸ªNodeå¯¹è±¡ã€‚ ä¾‹å¦‚ç¨‹åºæ‰§è¡Œä¸‹é¢ä»£ç ï¼š 1map.put("ç¾Žå›¢","å°ç¾Ž"); ç³»ç»Ÿå°†è°ƒç”¨&quot;ç¾Žå›¢&quot;è¿™ä¸ªkeyçš„hashCode()æ–¹æ³•å¾—åˆ°å…¶hashCodeå€¼ï¼ˆè¯¥æ–¹æ³•é€‚ç”¨äºŽæ¯ä¸ªJavaå¯¹è±¡ï¼‰ã€‚ ç„¶åŽå†é€šè¿‡Hashç®—æ³•æ¥å®šä½è¯¥é”®å€¼å¯¹çš„å­˜å‚¨ä½ç½®ï¼Œæœ‰æ—¶ä¸¤ä¸ªkeyä¼šå®šä½åˆ°ç›¸åŒçš„ä½ç½®ï¼Œè¡¨ç¤ºå‘ç”Ÿäº†Hashç¢°æ’žã€‚ å½“ç„¶Hashç®—æ³•è®¡ç®—ç»“æžœè¶Šåˆ†æ•£å‡åŒ€ï¼ŒHashç¢°æ’žçš„æ¦‚çŽ‡å°±è¶Šå°ï¼Œmapçš„å­˜å–æ•ˆçŽ‡å°±ä¼šè¶Šé«˜ã€‚ å¦‚æžœå“ˆå¸Œæ¡¶æ•°ç»„å¾ˆå¤§ï¼Œå³ä½¿è¾ƒå·®çš„Hashç®—æ³•ä¹Ÿä¼šæ¯”è¾ƒåˆ†æ•£ï¼Œå¦‚æžœå“ˆå¸Œæ¡¶æ•°ç»„æ•°ç»„å¾ˆå°ï¼Œå³ä½¿å¥½çš„Hashç®—æ³•ä¹Ÿä¼šå‡ºçŽ°è¾ƒå¤šç¢°æ’žï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨ç©ºé—´æˆæœ¬å’Œæ—¶é—´æˆæœ¬ä¹‹é—´æƒè¡¡ï¼Œå…¶å®žå°±æ˜¯åœ¨æ ¹æ®å®žé™…æƒ…å†µç¡®å®šå“ˆå¸Œæ¡¶æ•°ç»„çš„å¤§å°ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè®¾è®¡å¥½çš„hashç®—æ³•å‡å°‘Hashç¢°æ’žã€‚ é‚£ä¹ˆé€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥æŽ§åˆ¶mapä½¿å¾—Hashç¢°æ’žçš„æ¦‚çŽ‡åˆå°ï¼Œå“ˆå¸Œæ¡¶æ•°ç»„ï¼ˆNode[] tableï¼‰å ç”¨ç©ºé—´åˆå°‘å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯å¥½çš„Hashç®—æ³•(5.4èŠ‚)å’Œæ‰©å®¹æœºåˆ¶(5.5èŠ‚)ã€‚ä¸‹æ–‡ä¼šè®²åˆ°ã€‚ äº”ã€æ–¹æ³• 5.1 getæ–¹æ³• 123456789101112131415161718192021222324252627282930//getæ–¹æ³•ä¸»è¦è°ƒç”¨çš„æ˜¯getNodeæ–¹æ³•ï¼Œæ‰€ä»¥é‡ç‚¹è¦çœ‹getNodeæ–¹æ³•çš„å®žçŽ°public V get(Object key) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value;&#125;final Node&lt;K,V&gt; getNode(int hash, Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; //å¦‚æžœå“ˆå¸Œè¡¨ä¸ä¸ºç©º &amp;&amp; keyå¯¹åº”çš„æ¡¶ä¸Šä¸ä¸ºç©º if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) &#123; //æ˜¯å¦ç›´æŽ¥å‘½ä¸­ if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; //åˆ¤æ–­æ˜¯å¦æœ‰åŽç»­èŠ‚ç‚¹ if ((e = first.next) != null) &#123; //å¦‚æžœå½“å‰çš„æ¡¶æ˜¯é‡‡ç”¨çº¢é»‘æ ‘å¤„ç†å†²çªï¼Œåˆ™è°ƒç”¨çº¢é»‘æ ‘çš„getæ–¹æ³•åŽ»èŽ·å–èŠ‚ç‚¹ if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); //ä¸æ˜¯çº¢é»‘æ ‘çš„è¯ï¼Œé‚£å°±æ˜¯ä¼ ç»Ÿçš„é“¾å¼ç»“æž„äº†ï¼Œé€šè¿‡å¾ªçŽ¯çš„æ–¹æ³•åˆ¤æ–­é“¾ä¸­æ˜¯å¦å­˜åœ¨è¯¥key do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; while ((e = e.next) != null); &#125; &#125; return null;&#125; å®žçŽ°æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š é€šè¿‡hashå€¼èŽ·å–è¯¥keyæ˜ å°„åˆ°çš„æ¡¶ã€‚ æ¡¶ä¸Šçš„keyå°±æ˜¯è¦æŸ¥æ‰¾çš„keyï¼Œåˆ™ç›´æŽ¥å‘½ä¸­ã€‚ æ¡¶ä¸Šçš„keyä¸æ˜¯è¦æŸ¥æ‰¾çš„keyï¼Œåˆ™æŸ¥çœ‹åŽç»­èŠ‚ç‚¹ï¼š å¦‚æžœåŽç»­èŠ‚ç‚¹æ˜¯æ ‘èŠ‚ç‚¹ï¼Œé€šè¿‡è°ƒç”¨æ ‘çš„æ–¹æ³•æŸ¥æ‰¾è¯¥keyã€‚ å¦‚æžœåŽç»­èŠ‚ç‚¹æ˜¯é“¾å¼èŠ‚ç‚¹ï¼Œåˆ™é€šè¿‡å¾ªçŽ¯éåŽ†é“¾æŸ¥æ‰¾è¯¥keyã€‚ 5.2 putæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//putæ–¹æ³•çš„å…·ä½“å®žçŽ°ä¹Ÿæ˜¯åœ¨putValæ–¹æ³•ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹é¢çš„putValæ–¹æ³•public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125;final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //å¦‚æžœå“ˆå¸Œè¡¨ä¸ºç©ºï¼Œåˆ™å…ˆåˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; //å¦‚æžœå½“å‰æ¡¶æ²¡æœ‰ç¢°æ’žå†²çªï¼Œåˆ™ç›´æŽ¥æŠŠé”®å€¼å¯¹æ’å…¥ï¼Œå®Œäº‹ if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123; Node&lt;K,V&gt; e; K k; //å¦‚æžœæ¡¶ä¸ŠèŠ‚ç‚¹çš„keyä¸Žå½“å‰keyé‡å¤ï¼Œé‚£ä½ å°±æ˜¯æˆ‘è¦æ‰¾çš„èŠ‚ç‚¹äº† if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; //å¦‚æžœæ˜¯é‡‡ç”¨çº¢é»‘æ ‘çš„æ–¹å¼å¤„ç†å†²çªï¼Œåˆ™é€šè¿‡çº¢é»‘æ ‘çš„putTreeValæ–¹æ³•åŽ»æ’å…¥è¿™ä¸ªé”®å€¼å¯¹ else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); //å¦åˆ™å°±æ˜¯ä¼ ç»Ÿçš„é“¾å¼ç»“æž„ else &#123; //é‡‡ç”¨å¾ªçŽ¯éåŽ†çš„æ–¹å¼ï¼Œåˆ¤æ–­é“¾ä¸­æ˜¯å¦æœ‰é‡å¤çš„key for (int binCount = 0; ; ++binCount) &#123; //åˆ°äº†é“¾å°¾è¿˜æ²¡æ‰¾åˆ°é‡å¤çš„keyï¼Œåˆ™è¯´æ˜ŽHashMapæ²¡æœ‰åŒ…å«è¯¥é”® if ((e = p.next) == null) &#123; //åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹æ’å…¥åˆ°å°¾éƒ¨ p.next = newNode(hash, key, value, null); //å¦‚æžœé“¾çš„é•¿åº¦å¤§äºŽTREEIFY_THRESHOLDè¿™ä¸ªä¸´ç•Œå€¼ï¼Œåˆ™æŠŠé“¾å˜ä¸ºçº¢é»‘æ ‘ if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; &#125; //æ‰¾åˆ°äº†é‡å¤çš„key if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; //è¿™é‡Œè¡¨ç¤ºåœ¨ä¸Šé¢çš„æ“ä½œä¸­æ‰¾åˆ°äº†é‡å¤çš„é”®ï¼Œæ‰€ä»¥è¿™é‡ŒæŠŠè¯¥é”®çš„å€¼æ›¿æ¢ä¸ºæ–°å€¼ if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; ++modCount; //åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ‰©å®¹ if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null;&#125; 1234567891011121314151617181920final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123; int n, index; Node&lt;K,V&gt; e; if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) resize(); else if ((e = tab[index = (n - 1) &amp; hash]) != null) &#123; TreeNode&lt;K,V&gt; hd = null, tl = null; do &#123; TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null); if (tl == null) hd = p; else &#123; p.prev = tl; tl.next = p; &#125; tl = p; &#125; while ((e = e.next) != null); if ((tab[index] = hd) != null) hd.treeify(tab); &#125;&#125; putæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œå®žçŽ°æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š å…ˆé€šè¿‡hashå€¼è®¡ç®—å‡ºkeyæ˜ å°„åˆ°å“ªä¸ªæ¡¶ã€‚ å¦‚æžœæ¡¶ä¸Šæ²¡æœ‰ç¢°æ’žå†²çªï¼Œåˆ™ç›´æŽ¥æ’å…¥ã€‚ å¦‚æžœå‡ºçŽ°ç¢°æ’žå†²çªäº†ï¼Œåˆ™éœ€è¦å¤„ç†å†²çªï¼š å¦‚æžœè¯¥æ¡¶ä½¿ç”¨çº¢é»‘æ ‘å¤„ç†å†²çªï¼Œåˆ™è°ƒç”¨çº¢é»‘æ ‘çš„æ–¹æ³•æ’å…¥ã€‚ å¦åˆ™é‡‡ç”¨ä¼ ç»Ÿçš„é“¾å¼æ–¹æ³•æ’å…¥ã€‚å¦‚æžœé“¾çš„é•¿åº¦åˆ°è¾¾ä¸´ç•Œå€¼ï¼Œåˆ™æŠŠé“¾è½¬å˜ä¸ºçº¢é»‘æ ‘ã€‚ å¦‚æžœæ¡¶ä¸­å­˜åœ¨é‡å¤çš„é”®ï¼Œåˆ™ä¸ºè¯¥é”®æ›¿æ¢æ–°å€¼ã€‚ å¦‚æžœsizeå¤§äºŽé˜ˆå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ã€‚ 5.3 removeæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//removeæ–¹æ³•çš„å…·ä½“å®žçŽ°åœ¨removeNodeæ–¹æ³•ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹é¢çš„removeNodeæ–¹æ³•public V remove(Object key) &#123; Node&lt;K,V&gt; e; return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value;&#125;final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; //å¦‚æžœå½“å‰keyæ˜ å°„åˆ°çš„æ¡¶ä¸ä¸ºç©º if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) &#123; Node&lt;K,V&gt; node = null, e; K k; V v; //å¦‚æžœæ¡¶ä¸Šçš„èŠ‚ç‚¹å°±æ˜¯è¦æ‰¾çš„keyï¼Œåˆ™ç›´æŽ¥å‘½ä¸­ if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) &#123; //å¦‚æžœæ˜¯ä»¥çº¢é»‘æ ‘å¤„ç†å†²çªï¼Œåˆ™æž„å»ºä¸€ä¸ªæ ‘èŠ‚ç‚¹ if (p instanceof TreeNode) node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key); //å¦‚æžœæ˜¯ä»¥é“¾å¼çš„æ–¹å¼å¤„ç†å†²çªï¼Œåˆ™é€šè¿‡éåŽ†é“¾è¡¨æ¥å¯»æ‰¾èŠ‚ç‚¹ else &#123; do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; node = e; break; &#125; p = e; &#125; while ((e = e.next) != null); &#125; &#125; //æ¯”å¯¹æ‰¾åˆ°çš„keyçš„valueè·Ÿè¦åˆ é™¤çš„æ˜¯å¦åŒ¹é… if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) &#123; //é€šè¿‡è°ƒç”¨çº¢é»‘æ ‘çš„æ–¹æ³•æ¥åˆ é™¤èŠ‚ç‚¹ if (node instanceof TreeNode) ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable); //ä½¿ç”¨é“¾è¡¨çš„æ“ä½œæ¥åˆ é™¤èŠ‚ç‚¹ else if (node == p) tab[index] = node.next; else p.next = node.next; ++modCount; --size; afterNodeRemoval(node); return node; &#125; &#125; return null;&#125; 5.4 hashæ–¹æ³•(ç¡®å®šå“ˆå¸Œæ¡¶æ•°ç»„ç´¢å¼•ä½ç½®) ä¸ç®¡å¢žåŠ ã€åˆ é™¤ã€æŸ¥æ‰¾é”®å€¼å¯¹ï¼Œå®šä½åˆ°å“ˆå¸Œæ¡¶æ•°ç»„çš„ä½ç½®éƒ½æ˜¯å¾ˆå…³é”®çš„ç¬¬ä¸€æ­¥ã€‚å‰é¢è¯´è¿‡HashMapçš„æ•°æ®ç»“æž„æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶å¸Œæœ›è¿™ä¸ªHashMapé‡Œé¢çš„å…ƒç´ ä½ç½®å°½é‡åˆ†å¸ƒå‡åŒ€äº›ï¼Œå°½é‡ä½¿å¾—æ¯ä¸ªä½ç½®ä¸Šçš„å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ç”¨hashç®—æ³•æ±‚å¾—è¿™ä¸ªä½ç½®çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±å¯ä»¥çŸ¥é“å¯¹åº”ä½ç½®çš„å…ƒç´ å°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œä¸ç”¨éåŽ†é“¾è¡¨ï¼Œå¤§å¤§ä¼˜åŒ–äº†æŸ¥è¯¢çš„æ•ˆçŽ‡ã€‚HashMapå®šä½æ•°ç»„ç´¢å¼•ä½ç½®ï¼Œç›´æŽ¥å†³å®šäº†hashæ–¹æ³•çš„ç¦»æ•£æ€§èƒ½ã€‚ æ³¨æ„getæ–¹æ³•å’Œputæ–¹æ³•æºç ä¸­éƒ½éœ€è¦å…ˆè®¡ç®—keyæ˜ å°„åˆ°å“ªä¸ªæ¡¶ä¸Šï¼Œç„¶åŽæ‰è¿›è¡Œä¹‹åŽçš„æ“ä½œï¼Œè®¡ç®—çš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1(n - 1) &amp; hash ä¸Šé¢ä»£ç ä¸­çš„næŒ‡çš„æ˜¯å“ˆå¸Œè¡¨çš„å¤§å°ï¼ŒhashæŒ‡çš„æ˜¯keyçš„å“ˆå¸Œå€¼ï¼Œhashæ˜¯é€šè¿‡ä¸‹é¢è¿™ä¸ªæ–¹æ³•è®¡ç®—å‡ºæ¥çš„ï¼Œé‡‡ç”¨äº†äºŒæ¬¡å“ˆå¸Œçš„æ–¹å¼ï¼Œå…¶ä¸­keyçš„hashCodeæ–¹æ³•æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼š 123456static final int hash(Object key) &#123; //jdk1.8 &amp; jdk1.7 int h; // h = key.hashCode() ä¸ºç¬¬ä¸€æ­¥ å–hashCodeå€¼ // h ^ (h &gt;&gt;&gt; 16) ä¸ºç¬¬äºŒæ­¥ é«˜ä½å‚ä¸Žè¿ç®— return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125; å¯¹äºŽä»»æ„ç»™å®šçš„å¯¹è±¡ï¼Œåªè¦å®ƒçš„hashCode()è¿”å›žå€¼ç›¸åŒï¼Œé‚£ä¹ˆç¨‹åºè°ƒç”¨æ–¹æ³•ä¸€æ‰€è®¡ç®—å¾—åˆ°çš„Hashç å€¼æ€»æ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æŠŠhashå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå…ƒç´ çš„åˆ†å¸ƒç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒå‡åŒ€çš„ã€‚ä½†æ˜¯ï¼Œæ¨¡è¿ç®—çš„æ¶ˆè€—è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œåœ¨HashMapä¸­æ˜¯è¿™æ ·åšçš„ï¼šè°ƒç”¨æ–¹æ³•äºŒæ¥è®¡ç®—è¯¥å¯¹è±¡åº”è¯¥ä¿å­˜åœ¨tableæ•°ç»„çš„å“ªä¸ªç´¢å¼•å¤„ã€‚ è¿™ä¸ªæ–¹æ³•éžå¸¸å·§å¦™ï¼Œå®ƒé€šè¿‡h &amp; (table.length -1)æ¥å¾—åˆ°è¯¥å¯¹è±¡çš„ä¿å­˜ä½ï¼Œè€ŒHashMapåº•å±‚æ•°ç»„çš„é•¿åº¦æ€»æ˜¯2çš„næ¬¡æ–¹ï¼Œè¿™æ˜¯HashMapåœ¨é€Ÿåº¦ä¸Šçš„ä¼˜åŒ–ã€‚å½“lengthæ€»æ˜¯2çš„næ¬¡æ–¹æ—¶ï¼Œh&amp; (length-1)è¿ç®—ç­‰ä»·äºŽå¯¹lengthå–æ¨¡ï¼Œä¹Ÿå°±æ˜¯h%lengthï¼Œä½†æ˜¯&amp;æ¯”%å…·æœ‰æ›´é«˜çš„æ•ˆçŽ‡ã€‚ åœ¨JDK1.8çš„å®žçŽ°ä¸­ï¼Œä¼˜åŒ–äº†é«˜ä½è¿ç®—çš„ç®—æ³•ï¼Œé€šè¿‡hashCode()çš„é«˜16ä½å¼‚æˆ–ä½Ž16ä½å®žçŽ°çš„ï¼š(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)ï¼Œä¸»è¦æ˜¯ä»Žé€Ÿåº¦ã€åŠŸæ•ˆã€è´¨é‡æ¥è€ƒè™‘çš„ï¼Œè¿™ä¹ˆåšå¯ä»¥åœ¨æ•°ç»„tableçš„lengthæ¯”è¾ƒå°çš„æ—¶å€™ï¼Œä¹Ÿèƒ½ä¿è¯è€ƒè™‘åˆ°é«˜ä½ŽBitéƒ½å‚ä¸Žåˆ°Hashçš„è®¡ç®—ä¸­ï¼ŒåŒæ—¶ä¸ä¼šæœ‰å¤ªå¤§çš„å¼€é”€ã€‚ æ€»ç»“å°±æ˜¯ï¼šç”±äºŽåœ¨è®¡ç®—ä¸­ä½è¿ç®—æ¯”å–æ¨¡è¿ç®—æ•ˆçŽ‡é«˜çš„å¤šï¼Œæ‰€ä»¥ HashMap è§„å®šæ•°ç»„çš„é•¿åº¦ä¸º 2^n ã€‚è¿™æ ·ç”¨ 2^n - 1 åšä½è¿ç®—ä¸Žå–æ¨¡æ•ˆæžœä¸€è‡´ï¼Œå¹¶ä¸”æ•ˆçŽ‡è¿˜è¦é«˜å‡ºè®¸å¤šã€‚è¿™æ ·å›žç­”äº†ä¸Šæ–‡ä¸­ï¼šå¥½çš„Hashç®—æ³•åˆ°åº•æ˜¯ä»€ä¹ˆã€‚ 5.5 resizeæ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283final Node&lt;K,V&gt;[] resize() &#123; Node&lt;K,V&gt;[] oldTab = table; int oldCap = (oldTab == null) ? 0 : oldTab.length; int oldThr = threshold; int newCap, newThr = 0; //è®¡ç®—æ‰©å®¹åŽçš„å¤§å° if (oldCap &gt; 0) &#123; //å¦‚æžœå½“å‰å®¹é‡è¶…è¿‡æœ€å¤§å®¹é‡ï¼Œåˆ™æ— æ³•è¿›è¡Œæ‰©å®¹ if (oldCap &gt;= MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE; return oldTab; &#125; //æ²¡è¶…è¿‡æœ€å¤§å€¼åˆ™æ‰©ä¸ºåŽŸæ¥çš„ä¸¤å€ else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold &#125; else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; else &#123; // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); &#125; if (newThr == 0) &#123; float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; //æ–°çš„resizeé˜ˆå€¼ threshold = newThr; //åˆ›å»ºæ–°çš„å“ˆå¸Œè¡¨ @SuppressWarnings(&#123;"rawtypes","unchecked"&#125;) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; if (oldTab != null) &#123; //éåŽ†æ—§å“ˆå¸Œè¡¨çš„æ¯ä¸ªæ¡¶ï¼Œé‡æ–°è®¡ç®—æ¡¶é‡Œå…ƒç´ çš„æ–°ä½ç½® for (int j = 0; j &lt; oldCap; ++j) &#123; Node&lt;K,V&gt; e; if ((e = oldTab[j]) != null) &#123; oldTab[j] = null; //å¦‚æžœæ¡¶ä¸Šåªæœ‰ä¸€ä¸ªé”®å€¼å¯¹ï¼Œåˆ™ç›´æŽ¥æ’å…¥ if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; //å¦‚æžœæ˜¯é€šè¿‡çº¢é»‘æ ‘æ¥å¤„ç†å†²çªçš„ï¼Œåˆ™è°ƒç”¨ç›¸å…³æ–¹æ³•æŠŠæ ‘åˆ†ç¦»å¼€ else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); //å¦‚æžœé‡‡ç”¨é“¾å¼å¤„ç†å†²çª else &#123; // preserve order Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; //é€šè¿‡ä¸Šé¢è®²çš„æ–¹æ³•æ¥è®¡ç®—èŠ‚ç‚¹çš„æ–°ä½ç½® do &#123; next = e.next; if ((e.hash &amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125; &#125; while ((e = next) != null); if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead; &#125; if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead; &#125; &#125; &#125; &#125; &#125; return newTab;&#125; HashMapåœ¨è¿›è¡Œæ‰©å®¹æ—¶ï¼Œä½¿ç”¨çš„rehashæ–¹å¼éžå¸¸å·§å¦™ï¼Œå› ä¸ºæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯ç¿»å€ï¼Œä¸ŽåŽŸæ¥è®¡ç®—ï¼ˆn-1ï¼‰&amp;hashçš„ç»“æžœç›¸æ¯”ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªbitä½ï¼Œæ‰€ä»¥èŠ‚ç‚¹è¦ä¹ˆå°±åœ¨åŽŸæ¥çš„ä½ç½®ï¼Œè¦ä¹ˆå°±è¢«åˆ†é…åˆ°â€œåŽŸä½ç½®+æ—§å®¹é‡â€è¿™ä¸ªä½ç½®ã€‚ ä¾‹å¦‚ï¼ŒåŽŸæ¥çš„å®¹é‡ä¸º32ï¼Œé‚£ä¹ˆåº”è¯¥æ‹¿hashè·Ÿ31ï¼ˆ0x11111ï¼‰åšä¸Žæ“ä½œï¼›åœ¨æ‰©å®¹æ‰©åˆ°äº†64çš„å®¹é‡ä¹‹åŽï¼Œåº”è¯¥æ‹¿hashè·Ÿ63ï¼ˆ0x111111ï¼‰åšä¸Žæ“ä½œã€‚æ–°å®¹é‡è·ŸåŽŸæ¥ç›¸æ¯”åªæ˜¯å¤šäº†ä¸€ä¸ªbitä½ï¼Œå‡è®¾åŽŸæ¥çš„ä½ç½®åœ¨23ï¼Œé‚£ä¹ˆå½“æ–°å¢žçš„é‚£ä¸ªbitä½çš„è®¡ç®—ç»“æžœä¸º0æ—¶ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹è¿˜æ˜¯åœ¨23ï¼›ç›¸åï¼Œè®¡ç®—ç»“æžœä¸º1æ—¶ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¼šè¢«åˆ†é…åˆ°23+31çš„æ¡¶ä¸Šã€‚ è¿™æ ·åšçš„å¥½å¤„ï¼šæ­£æ˜¯å› ä¸ºè¿™æ ·å·§å¦™çš„rehashæ–¹å¼ï¼Œä¿è¯äº†rehashä¹‹åŽæ¯ä¸ªæ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°å¿…å®šå°äºŽç­‰äºŽåŽŸæ¥æ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°ï¼Œå³ä¿è¯äº†rehashä¹‹åŽä¸ä¼šå‡ºçŽ°æ›´ä¸¥é‡çš„å†²çªã€‚å›žç­”äº†ä¸Šæ–‡ä¸­å¥½çš„æ‰©å®¹æœºåˆ¶ã€‚ å…­ã€æ€»ç»“ HashMapçš„ç»“æž„åº•å±‚æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ æ˜¯ä¸€ä¸ªæ¡¶ï¼ŒåŽé¢å¯èƒ½ä¼šè¿žç€ä¸€ä¸²å› ä¸ºç¢°æ’žè€Œèšåœ¨ä¸€èµ·çš„(key,value)èŠ‚ç‚¹ï¼Œä»¥é“¾è¡¨çš„å½¢å¼æˆ–è€…æ ‘çš„å½¢å¼æŒ‚ç€ æŒ‰ç…§åŽŸæ¥çš„æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼Œå¦‚æžœä¸€ä¸ªæ¡¶ä¸Šçš„å†²çªå¾ˆä¸¥é‡çš„è¯ï¼Œæ˜¯ä¼šå¯¼è‡´å“ˆå¸Œè¡¨çš„æ•ˆçŽ‡é™ä½Žè‡³Oï¼ˆnï¼‰ï¼Œè€Œé€šè¿‡çº¢é»‘æ ‘çš„æ–¹å¼ï¼Œå¯ä»¥æŠŠæ•ˆçŽ‡æ”¹è¿›è‡³Oï¼ˆlognï¼‰ã€‚ç›¸æ¯”é“¾å¼ç»“æž„çš„èŠ‚ç‚¹ï¼Œæ ‘åž‹ç»“æž„çš„èŠ‚ç‚¹ä¼šå ç”¨æ¯”è¾ƒå¤šçš„ç©ºé—´ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ”¹è¿›æ–¹å¼ã€‚ thresholdæ˜¯æ•°ç»„é•¿åº¦æ‰©å®¹çš„ä¸´ç•Œå€¼ modCountå­—æ®µä¸»è¦ç”¨æ¥è®°å½•HashMapå†…éƒ¨ç»“æž„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ï¼Œè¿™é‡Œç»“æž„å˜åŒ–å¿…é¡»æ˜¯æ–°çš„å€¼å¡žè¿›æ¥æˆ–è€…æŸä¸ªå€¼åˆ é™¤è¿™ç§ç±»åž‹ï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯è¦†ç›– åªæœ‰åŒæ—¶æ»¡è¶³ï¼šè¡¨ä¸­æ•°æ®å®¹é‡å·²ç»æ‰©å®¹åˆ°MIN_TREEIFY_CAPACITYè¿™ä¸ªé•¿åº¦ï¼Œå¹¶ä¸”æ¡¶é‡Œçš„æ•°æ®ä¸ªæ•°è¾¾åˆ°8ä¸ªçš„æ—¶å€™ï¼Œæ‰ä¼šå°†è¯¥æ¡¶é‡Œçš„ç»“æž„è¿›è¡Œæ ‘åŒ–ã€‚ å¥½çš„hashç®—æ³•ï¼šç”±äºŽåœ¨è®¡ç®—ä¸­ä½è¿ç®—æ¯”å–æ¨¡è¿ç®—æ•ˆçŽ‡é«˜çš„å¤šï¼Œæ‰€ä»¥HashMapè§„å®šæ•°ç»„çš„é•¿åº¦ä¸º 2^n ã€‚è¿™æ ·ç”¨ 2^n - 1 ä¸Ž hash åšä½è¿ç®—ä¸Žå–æ¨¡æ•ˆæžœä¸€è‡´ï¼Œå¹¶ä¸”æ•ˆçŽ‡è¿˜è¦é«˜å‡ºè®¸å¤šã€‚ å¥½çš„æ‰©å®¹æœºåˆ¶ï¼šå› ä¸ºæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯ç¿»å€ï¼Œä¸ŽåŽŸæ¥è®¡ç®—ï¼ˆn-1ï¼‰&amp;hashçš„ç»“æžœç›¸æ¯”ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªbitä½ï¼Œæ‰€ä»¥èŠ‚ç‚¹è¦ä¹ˆå°±åœ¨åŽŸæ¥çš„ä½ç½®ï¼Œè¦ä¹ˆå°±è¢«åˆ†é…åˆ°â€œåŽŸä½ç½®+æ—§å®¹é‡â€è¿™ä¸ªä½ç½®ã€‚è¿™æ ·åšçš„å¥½å¤„ï¼šæ­£æ˜¯å› ä¸ºè¿™æ ·å·§å¦™çš„rehashæ–¹å¼ï¼Œä¿è¯äº†rehashä¹‹åŽæ¯ä¸ªæ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°å¿…å®šå°äºŽç­‰äºŽåŽŸæ¥æ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°ï¼Œå³ä¿è¯äº†rehashä¹‹åŽä¸ä¼šå‡ºçŽ°æ›´ä¸¥é‡çš„å†²çªã€‚ è¿˜æœ‰å°±æ˜¯è¦è®°ä½putçš„è¿‡ç¨‹ã€‚ æ•´ç†è‡ªï¼š https://zhuanlan.zhihu.com/p/21673805 http://blog.csdn.net/u013124587/article/details/52649867]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hashcode/Equals]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F4.hashcode%E5%92%8Cequals%2F</url>
    <content type="text"><![CDATA[hashcodeæ¶‰åŠåˆ°é›†åˆHashMapç­‰é›†åˆï¼Œæ­¤ç¯‡ä¾§é‡äºŽäº†è§£hashcodeå’Œequalsæ–¹æ³•çš„ä½œç”¨çš„åŽŸç†ã€‚æœ‰åŠ©äºŽä¸‹ä¸€ç¯‡HashMapçš„ç†è§£ã€‚ ä¸€ã€Hashæ˜¯ä»€ä¹ˆ Hashæ˜¯æ•£åˆ—çš„æ„æ€ï¼Œå°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥ï¼Œé€šè¿‡æ•£åˆ—ç®—æ³•å˜æ¢æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥è¾“å‡ºå°±æ˜¯æ•£åˆ—å€¼ã€‚è¿™ä¸ªçŽ©æ„è¿˜å¯ä»¥åšåŠ å¯†ã€‚ ä¸åŒå…³é”®å­—ç»è¿‡æ•£åˆ—ç®—æ³•å˜æ¢åŽå¯èƒ½å¾—åˆ°åŒä¸€ä¸ªæ•£åˆ—åœ°å€ï¼Œè¿™ç§çŽ°è±¡ç§°ä¸ºç¢°æ’žã€‚ å¦‚æžœä¸¤ä¸ªHashå€¼ä¸åŒï¼ˆå‰ææ˜¯åŒä¸€Hashç®—æ³•ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªHashå€¼å¯¹åº”çš„åŽŸå§‹è¾“å…¥å¿…å®šä¸åŒ äºŒã€ä»€ä¹ˆæ˜¯hashcode HashCodeçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†æŸ¥æ‰¾çš„å¿«æ·æ€§ï¼ŒHashCodeæ˜¯ç”¨æ¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æž„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€çš„ã€‚ å¦‚æžœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜Žè¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æž„ä¸­ï¼Œå­˜æ”¾äºŽåŒä¸€ä¸ªä½ç½®ã€‚ å¦‚æžœå¯¹è±¡çš„equalsæ–¹æ³•è¢«é‡å†™ï¼Œé‚£ä¹ˆå¯¹è±¡çš„HashCodeæ–¹æ³•ä¹Ÿå°½é‡é‡å†™ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸‹æ–‡ä¼šè¯´ã€‚ ä¸‰ã€HashCodeæœ‰ä»€ä¹ˆç”¨ æ¯”æ–¹è¯´Seté‡Œé¢å·²ç»æœ‰1000ä¸ªå…ƒç´ äº†ï¼Œé‚£ä¹ˆç¬¬1001ä¸ªå…ƒç´ è¿›æ¥çš„æ—¶å€™ï¼Œæœ€å¤šå¯èƒ½è°ƒç”¨1000æ¬¡equalsæ–¹æ³•ï¼Œå¦‚æžœequalsæ–¹æ³•å†™å¾—å¤æ‚ï¼Œå¯¹æ¯”çš„ä¸œè¥¿ç‰¹åˆ«å¤šï¼Œé‚£ä¹ˆæ•ˆçŽ‡ä¼šå¤§å¤§é™ä½Žã€‚ ä½¿ç”¨HashCodeå°±ä¸ä¸€æ ·äº†ï¼Œæ¯”æ–¹è¯´HashSetï¼Œåº•å±‚æ˜¯åŸºäºŽHashMapå®žçŽ°çš„ï¼Œå…ˆé€šè¿‡HashCodeå–ä¸€ä¸ªæ¨¡ï¼Œè¿™æ ·ä¸€ä¸‹å­å°±å›ºå®šåˆ°æŸä¸ªä½ç½®äº†ï¼Œå¦‚æžœè¿™ä¸ªä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆå°±å¯ä»¥è‚¯å®šHashSetä¸­å¿…å®šæ²¡æœ‰å’Œæ–°æ·»åŠ çš„å…ƒç´ equalsçš„å…ƒç´ ï¼Œå°±å¯ä»¥ç›´æŽ¥å­˜æ”¾äº†ï¼Œéƒ½ä¸éœ€è¦æ¯”è¾ƒï¼› å¦‚æžœè¿™ä¸ªä½ç½®ä¸Šæœ‰å…ƒç´ äº†ï¼Œé€ä¸€æ¯”è¾ƒï¼Œæ¯”è¾ƒçš„æ—¶å€™å…ˆæ¯”è¾ƒHashCodeï¼ŒHashCodeéƒ½ä¸åŒæŽ¥ä¸‹åŽ»éƒ½ä¸ç”¨æ¯”äº†ï¼Œè‚¯å®šä¸ä¸€æ ·ï¼ŒHashCodeç›¸ç­‰ï¼Œå†equalsæ¯”è¾ƒï¼Œæ²¡æœ‰ç›¸åŒçš„å…ƒç´ å°±å­˜ï¼Œæœ‰ç›¸åŒçš„å…ƒç´ å°±ä¸å­˜ã€‚ å¦‚æžœåŽŸæ¥çš„Seté‡Œé¢æœ‰ç›¸åŒçš„å…ƒç´ ï¼Œåªè¦HashCodeçš„ç”Ÿæˆæ–¹å¼å®šä¹‰å¾—å¥½ï¼ˆä¸é‡å¤ï¼‰ï¼Œä¸ç®¡Seté‡Œé¢åŽŸæ¥æœ‰å¤šå°‘å…ƒç´ ï¼Œåªéœ€è¦æ‰§è¡Œä¸€æ¬¡çš„equalså°±å¯ä»¥äº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®žé™…è°ƒç”¨equalsæ–¹æ³•çš„æ¬¡æ•°å¤§å¤§é™ä½Žï¼Œæé«˜äº†æ•ˆçŽ‡ã€‚ å½“ä¿©ä¸ªå¯¹è±¡çš„`hashCode`å€¼ç›¸åŒçš„æ—¶å€™ï¼Œ`Hashset`ä¼šå°†å¯¹è±¡ä¿å­˜åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œä½†æ˜¯ä»–ä»¬`equals`è¿”å›ž`false`ï¼Œæ‰€ä»¥å®žé™…ä¸Šè¿™ä¸ªä½ç½®é‡‡ç”¨é“¾å¼ç»“æž„æ¥ä¿å­˜å¤šä¸ªå¯¹è±¡ã€‚ å››ã€ä¸ºä»€ä¹ˆé‡å†™Objectçš„equals()æ–¹æ³•å°½é‡è¦é‡å†™Objectçš„hashCode()æ–¹æ³• é¢ä¸´é—®é¢˜ï¼šè‹¥ä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œä½†ç”±äºŽä¸åœ¨ä¸€ä¸ªåŒºé—´ï¼Œå› ä¸ºhashCodeçš„å€¼åœ¨é‡å†™ä¹‹å‰æ˜¯å¯¹å†…å­˜åœ°å€è®¡ç®—å¾—å‡ºï¼Œæ‰€ä»¥æ ¹æœ¬æ²¡æœ‰æœºä¼šè¿›è¡Œæ¯”è¾ƒï¼Œä¼šè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„å¯¹è±¡(è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿˜è¦é‡å†™hashcodeæ–¹æ³•äº†)ã€‚æ‰€ä»¥Javaå¯¹äºŽeqaulsæ–¹æ³•å’ŒhashCodeæ–¹æ³•æ˜¯è¿™æ ·è§„å®šçš„ï¼š 1 å¦‚æžœä¸¤ä¸ªå¯¹è±¡ç›¸åŒ(equalsä¸ºtrue)ï¼Œé‚£ä¹ˆå®ƒä»¬çš„hashCodeå€¼ä¸€å®šè¦ç›¸åŒã€‚ä¹Ÿå‘Šè¯‰æˆ‘ä»¬é‡å†™equalsæ–¹æ³•ï¼Œä¸€å®šè¦é‡å†™hashCodeæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´hashCodeå€¼è¦å’Œç±»ä¸­çš„æˆå‘˜å˜é‡æŒ‚ä¸Šé’©ï¼Œå¯¹è±¡ç›¸åŒâ€“&gt;æˆå‘˜å˜é‡ç›¸åŒâ€”-&gt;hashCodeå€¼ä¸€å®šç›¸åŒã€‚ 2 å¦‚æžœä¸¤ä¸ªå¯¹è±¡çš„hashCodeç›¸åŒ(åªæ˜¯æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®è€Œå·²)ï¼Œå®ƒä»¬å¹¶ä¸ä¸€å®šç›¸åŒï¼Œè¿™é‡Œçš„å¯¹è±¡ç›¸åŒæŒ‡çš„æ˜¯ç”¨eqaulsæ–¹æ³•æ¯”è¾ƒã€‚ ç®€å•æ¥è¯´ï¼Œå¦‚æžœåªé‡å†™equalsæ–¹æ³•è€Œä¸é‡å†™hashcodeæ–¹æ³•ï¼Œä¼šå¯¼è‡´é‡å¤å…ƒç´ çš„äº§ç”Ÿã€‚å…·ä½“é€šè¿‡ä¸‹é¢çš„ä¾‹å­è¿›è¡Œè¯´æ˜Žã€‚ äº”ã€ä¸¾ä¾‹ 6.1 Studentç±» å¾ˆç®€å•ï¼Œå®šä¹‰äº†idå’Œnameä¸¤ä¸ªå­—æ®µï¼Œæ— å‚å’Œæœ‰å‚æž„é€ å‡½æ•°ï¼ŒtoStringæ–¹æ³•ã€‚ 1234567891011121314151617181920public class Student &#123; private int id; private String name; get(),set()ç•¥... public Student()&#123;&#125; public Student(int id, String name) &#123; super(); this.id = id; this.name = name; &#125; @Override public String toString() &#123; return "Student [id=" + id + ", name=" + name + "]"; &#125;&#125; 6.2 mainæ–¹æ³• 1234567891011121314151617181920public static void main(String[] args) &#123; Student student1 = new Student(1,"hh"); Student student2 = new Student(1,"hh"); Student student3 = new Student(2,"gg"); HashSet&lt;Student&gt; set = new HashSet&lt;Student&gt;(); set.add(student1); set.add(student2); set.add(student3); set.add(student1);//é‡å¤æ·»åŠ äº†student1 System.out.println("seté›†åˆå®¹é‡ä¸º: "+set.size()); Iterator&lt;Student&gt; iterator = set.iterator(); while (iterator.hasNext()) &#123; Student student = iterator.next(); System.out.println(student+"---"+student.hashCode()); &#125; &#125; æ‰§è¡Œç»“æžœï¼š 1234seté›†åˆå®¹é‡ä¸º: 3Student [id=1, name=hh]---1735600054Student [id=1, name=hh]---356573597Student [id=2, name=gg]---21685669 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåªè¦æ˜¯newçš„å¯¹è±¡ï¼Œä»–ä»¬çš„hashcodeæ˜¯ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥ï¼Œå°±ä¼šè®¤ä¸ºä»–ä»¬æ˜¯ä¸ä¸€æ ·çš„å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œé›†åˆé‡Œé¢æ•°é‡ä¸º3. 6.3 åªé‡å†™equals()æ–¹æ³•ï¼Œè€Œä¸é‡å†™HashCode()æ–¹æ³• è¾“å‡ºï¼š 1234seté›†åˆå®¹é‡ä¸º: 3Student [id=2, name=gg]---2018699554Student [id=1, name=hh]---366712642Student [id=1, name=hh]---1829164700 ç»“è®ºï¼šè¦†ç›–equalsï¼ˆObject objï¼‰ä½†ä¸è¦†ç›–hashCode(),å¯¼è‡´æ•°æ®ä¸å”¯ä¸€æ€§ã€‚ åœ¨è¿™é‡Œï¼Œå…¶å®žæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œstudent1å’Œstudent2å…¶å®žæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ç”±äºŽéƒ½æ˜¯newå¹¶ä¸”æ²¡æœ‰é‡å†™hashcodeå¯¼è‡´ä»–ä»¬å˜æˆäº†ä¸¤ä¸ªä¸ä¸€æ ·çš„å¯¹è±¡ã€‚ åˆ†æžï¼š ï¼ˆ1ï¼‰å½“æ‰§è¡Œset.add(student1)æ—¶ï¼Œé›†åˆä¸ºç©ºï¼Œç›´æŽ¥å­˜å…¥é›†åˆï¼› ï¼ˆ2ï¼‰å½“æ‰§è¡Œset.add(student2)æ—¶ï¼Œé¦–å…ˆåˆ¤æ–­è¯¥å¯¹è±¡ï¼ˆstudent2ï¼‰çš„hashCodeå€¼æ‰€åœ¨çš„å­˜å‚¨åŒºåŸŸæ˜¯å¦æœ‰ç›¸åŒçš„hashCodeï¼Œå› ä¸ºæ²¡æœ‰è¦†ç›–hashCodeæ–¹æ³•ï¼Œæ‰€ä»¥jdkä½¿ç”¨é»˜è®¤Objectçš„hashCodeæ–¹æ³•ï¼Œè¿”å›žå†…å­˜åœ°å€è½¬æ¢åŽçš„æ•´æ•°ï¼Œå› ä¸ºä¸åŒå¯¹è±¡çš„åœ°å€å€¼ä¸åŒï¼Œæ‰€ä»¥è¿™é‡Œä¸å­˜åœ¨ä¸Žstudent2ç›¸åŒhashCodeå€¼çš„å¯¹è±¡ï¼Œå› æ­¤jdké»˜è®¤ä¸åŒhashCodeå€¼ï¼Œequalsä¸€å®šè¿”å›žfalseï¼Œæ‰€ä»¥ç›´æŽ¥å­˜å…¥é›†åˆã€‚ ï¼ˆ3ï¼‰å½“æ‰§è¡Œset.add(student3)æ—¶,ä¸Ž2åŒç†ã€‚ ï¼ˆ4ï¼‰å½“æœ€åŽæ‰§è¡Œset.add(student1)æ—¶ï¼Œå› ä¸ºstudent1å·²ç»å­˜å…¥é›†åˆï¼ŒåŒä¸€å¯¹è±¡è¿”å›žçš„hashCodeå€¼æ˜¯ä¸€æ ·çš„ï¼Œç»§ç»­åˆ¤æ–­equalsæ˜¯å¦è¿”å›žtrueï¼Œå› ä¸ºæ˜¯åŒä¸€å¯¹è±¡æ‰€ä»¥è¿”å›žtrueã€‚æ­¤æ—¶jdkè®¤ä¸ºè¯¥å¯¹è±¡å·²ç»å­˜åœ¨äºŽé›†åˆä¸­ï¼Œæ‰€ä»¥èˆå¼ƒã€‚ 6.4 åªé‡å†™HashCode()æ–¹æ³•ï¼Œequals()æ–¹æ³•ç›´æŽ¥è¿”å›žfalse 1234seté›†åˆå®¹é‡ä¸º: 3Student [id=1, name=hh]---4320Student [id=1, name=hh]---4320Student [id=2, name=gg]---4319 æŒ‰ç…§ä¸Šé¢çš„åˆ†æžï¼Œå¯èƒ½ä¼šè§‰å¾—é‡Œé¢åº”è¯¥è£…4ä¸ªï¼Œå› ä¸ºä¸¤æ¬¡addçš„student1ï¼Œè™½ç„¶ä»–ä»¬çš„hashcodeä¸€æ ·ï¼Œä½†æ˜¯equalsç›´æŽ¥è¿”å›žfalseï¼Œé‚£ä¹ˆåº”è¯¥åˆ¤å®šä¸ºä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚ä½†æ˜¯ç»“æžœç¡®è·Ÿæˆ‘ä»¬é¢„æƒ³çš„ä¸ä¸€æ ·ã€‚ åˆ†æžï¼š é¦–å…ˆstudent1å’Œstudent2çš„å¯¹è±¡æ¯”è¾ƒhashCodeï¼Œå› ä¸ºé‡å†™äº†HashCodeæ–¹æ³•ï¼Œæ‰€ä»¥hashcodeç›¸ç­‰,ç„¶åŽæ¯”è¾ƒä»–ä»¬ä¸¤çš„equalsæ–¹æ³•ï¼Œå› ä¸ºequalsæ–¹æ³•å§‹ç»ˆè¿”å›žfalse,æ‰€ä»¥student1å’Œstudent2ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ï¼Œæ‰€ä»¥student2ä¹Ÿè¢«æ”¾è¿›äº†set é¦–å…ˆstudent1(student2)å’Œstudent3çš„å¯¹è±¡æ¯”è¾ƒhashCodeï¼Œä¸ç›¸ç­‰ï¼Œæ‰€ä»¥student3æ”¾è¿›setä¸­ æœ€åŽå†çœ‹æœ€åŽé‡å¤æ·»åŠ çš„student1,ä¸Žç¬¬ä¸€ä¸ªstudent1çš„hashCodeæ˜¯ç›¸ç­‰çš„ï¼Œåœ¨æ¯”è¾ƒequalsæ–¹æ³•ï¼Œå› ä¸ºequalsè¿”å›žfalse,æ‰€ä»¥student1å’Œstudent4ä¸ç›¸ç­‰;åŒæ ·ï¼Œstudent2å’Œstudent4ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„;student3å’Œstudent4çš„hashcodeéƒ½ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥è‚¯å®šä¸ç›¸ç­‰çš„ï¼Œæ‰€ä»¥æœ€åŽä¸€ä¸ªé‡å¤çš„student1åº”è¯¥å¯ä»¥æ”¾åˆ°seté›†åˆä¸­ï¼Œé‚£ä¹ˆç»“æžœåº”è¯¥æ˜¯size:4,é‚£ä¸ºä»€ä¹ˆä¼šæ˜¯3å‘¢ï¼Ÿ è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æŸ¥çœ‹HashSetçš„æºç äº†ï¼Œä¸‹é¢æ˜¯HashSetä¸­çš„addæ–¹æ³•çš„æºç ï¼š 123public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®žHashSetæ˜¯åŸºäºŽHashMapå®žçŽ°çš„ï¼Œæˆ‘ä»¬åœ¨ç‚¹å‡»HashMapçš„putæ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š 123public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123; Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else &#123; for (int binCount = 0; ; ++binCount) &#123; if ((e = p.next) == null) &#123; p.next = newNode(hash, key, value, null); if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; &#125; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; ++modCount; if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null;&#125; é¦–å…ˆæ˜¯åˆ¤æ–­hashCodeæ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰çš„è¯ï¼Œç›´æŽ¥è·³è¿‡ï¼Œç›¸ç­‰çš„è¯ï¼Œç„¶åŽå†æ¥æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰æˆ–è€…è¿™ä¸¤ä¸ªå¯¹è±¡çš„equalsæ–¹æ³•ï¼Œå› ä¸ºæ˜¯è¿›è¡Œçš„æˆ–æ“ä½œï¼Œæ‰€ä»¥åªè¦æœ‰ä¸€ä¸ªæˆç«‹å³å¯ï¼Œé‚£è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥è§£é‡Šäº†ï¼Œå…¶å®žä¸Šé¢çš„é‚£ä¸ªé›†åˆçš„å¤§å°æ˜¯3,å› ä¸ºæœ€åŽçš„ä¸€ä¸ªr1æ²¡æœ‰æ”¾è¿›åŽ»ï¼Œä»¥ä¸ºr1==r1è¿”å›žtrueçš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ”¾è¿›åŽ»äº†ã€‚æ‰€ä»¥é›†åˆçš„å¤§å°æ˜¯3ï¼Œå¦‚æžœæˆ‘ä»¬å°†hashCodeæ–¹æ³•è®¾ç½®æˆå§‹ç»ˆè¿”å›žfalseçš„è¯ï¼Œè¿™ä¸ªé›†åˆå°±æ˜¯4äº†ã€‚ 6.5 åŒæ—¶é‡å†™ æˆ‘çš„å†™æ³•æ˜¯ï¼š 12345678910111213141516171819@Overridepublic int hashCode() &#123; int result = 17; result = result * 31 + name.hashCode(); result = result * 31 + id; return result;&#125;@Overridepublic boolean equals(Object obj) &#123; if(obj == this) return true; if(!(obj instanceof Student)) return false; Student o = (Student)obj; return o.name.equals(name) &amp;&amp; o.id == id;&#125; ç»“æžœï¼š 123seté›†åˆå®¹é‡ä¸º: 2Student [id=2, name=gg]---118515Student [id=1, name=hh]---119506 è¾¾åˆ°æˆ‘ä»¬é¢„æœŸçš„æ•ˆæžœã€‚ å…­ã€å†…å­˜æ³„éœ² æˆ‘ä»¬ä¸Šé¢å®žéªŒäº†é‡å†™equalså’Œhashcodeæ–¹æ³•ï¼Œæ‰§è¡Œmainï¼Œæ‰§è¡Œç»“æžœæ˜¯ï¼š 123seté›†åˆå®¹é‡ä¸º: 2Student [id=1, name=hh]---4320Student [id=2, name=gg]---4319 å°†mainæ–¹æ³•æ”¹ä¸ºï¼š 1234567891011121314151617181920212223242526272829public static void main(String[] args) &#123; Student student1 = new Student(1,"hh"); Student student2 = new Student(1,"hh"); Student student3 = new Student(2,"gg"); HashSet&lt;Student&gt; set = new HashSet&lt;Student&gt;(); set.add(student1); set.add(student2); set.add(student3); set.add(student1);//é‡å¤æ·»åŠ äº†student1 System.out.println("seté›†åˆå®¹é‡ä¸º: "+set.size()); //------æ–°å¢žçš„å¼€å§‹------- student3.setId(11); set.remove(student3); System.out.println("seté›†åˆå®¹é‡ä¸º: "+set.size()); //------æ–°å¢žçš„ç»“æŸ------- Iterator&lt;Student&gt; iterator = set.iterator(); while (iterator.hasNext()) &#123; Student student = iterator.next(); System.out.println(student+"---"+student.hashCode()); &#125; &#125; è¿è¡Œç»“æžœæ˜¯ï¼š 1234seté›†åˆå®¹é‡ä¸º: 2seté›†åˆå®¹é‡ä¸º: 2Student [id=1, name=hh]---4320Student [id=11, name=gg]---4598 æˆ‘ä»¬è°ƒç”¨äº†removeåˆ é™¤student3å¯¹è±¡ï¼Œä»¥ä¸ºåˆ é™¤äº†student3,ä½†äº‹å®žä¸Šå¹¶æ²¡æœ‰åˆ é™¤ï¼Œè¿™å°±å«åšå†…å­˜æ³„éœ²ï¼Œå°±æ˜¯ä¸ç”¨çš„å¯¹è±¡ä½†æ˜¯ä»–è¿˜åœ¨å†…å­˜ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬å¤šæ¬¡è¿™æ ·æ“ä½œä¹‹åŽï¼Œå†…å­˜å°±çˆ†äº†ã€‚ åŽŸå› ï¼š åœ¨è°ƒç”¨removeæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šå…ˆä½¿ç”¨å¯¹è±¡çš„hashCodeå€¼åŽ»æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œç„¶åŽè¿›è¡Œåˆ é™¤ï¼Œè¿™ç§é—®é¢˜å°±æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ä¿®æ”¹äº†å¯¹è±¡student3çš„idå±žæ€§çš„å€¼ï¼Œåˆå› ä¸ºRectObjectå¯¹è±¡çš„hashCodeæ–¹æ³•ä¸­æœ‰idå€¼å‚ä¸Žè¿ç®—,æ‰€ä»¥student3å¯¹è±¡çš„hashCodeå°±å‘ç”Ÿæ”¹å˜äº†ï¼Œæ‰€ä»¥removeæ–¹æ³•ä¸­å¹¶æ²¡æœ‰æ‰¾åˆ°student3äº†ï¼Œæ‰€ä»¥åˆ é™¤å¤±è´¥ã€‚å³student3çš„hashCodeå˜äº†ï¼Œä½†æ˜¯ä»–å­˜å‚¨çš„ä½ç½®æ²¡æœ‰æ›´æ–°ï¼Œä»ç„¶åœ¨åŽŸæ¥çš„ä½ç½®ä¸Šï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ç”¨ä»–çš„æ–°çš„hashCodeåŽ»æ‰¾è‚¯å®šæ˜¯æ‰¾ä¸åˆ°äº†ã€‚ æ€»ç»“ï¼š ä¸Šé¢çš„è¿™ä¸ªå†…å­˜æ³„éœ²å‘Šè¯‰æˆ‘ä¸€ä¸ªä¿¡æ¯ï¼šå¦‚æžœæˆ‘ä»¬å°†å¯¹è±¡çš„å±žæ€§å€¼å‚ä¸Žäº†hashCodeçš„è¿ç®—ä¸­ï¼Œåœ¨è¿›è¡Œåˆ é™¤çš„æ—¶å€™ï¼Œå°±ä¸èƒ½å¯¹å…¶å±žæ€§å€¼è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¼šå‡ºçŽ°ä¸¥é‡çš„é—®é¢˜ã€‚ ä¸ƒã€æ€»ç»“ hashCodeæ˜¯ä¸ºäº†æé«˜åœ¨æ•£åˆ—ç»“æž„å­˜å‚¨ä¸­æŸ¥æ‰¾çš„æ•ˆçŽ‡ï¼Œåœ¨çº¿æ€§è¡¨ä¸­æ²¡æœ‰ä½œç”¨ã€‚ equalså’ŒhashCodeéœ€è¦åŒæ—¶è¦†ç›–ã€‚ è‹¥ä¸¤ä¸ªå¯¹è±¡equalsè¿”å›žtrueï¼Œåˆ™hashCodeæœ‰å¿…è¦ä¹Ÿè¿”å›žç›¸åŒçš„intæ•°ã€‚ è‹¥ä¸¤ä¸ªå¯¹è±¡equalsè¿”å›žfalseï¼Œåˆ™hashCodeä¸ä¸€å®šè¿”å›žä¸åŒçš„intæ•°,ä½†ä¸ºä¸ç›¸ç­‰çš„å¯¹è±¡ç”Ÿæˆä¸åŒhashCodeå€¼å¯ä»¥æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚ è‹¥ä¸¤ä¸ªå¯¹è±¡hashCodeè¿”å›žç›¸åŒintæ•°ï¼Œåˆ™equalsä¸ä¸€å®šè¿”å›žtrueã€‚ åŒä¸€å¯¹è±¡åœ¨æ‰§è¡ŒæœŸé—´è‹¥å·²ç»å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œåˆ™ä¸èƒ½ä¿®æ”¹å½±å“hashCodeå€¼çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„éœ²é—®é¢˜ã€‚ æ•´ç†è‡ªï¼š http://blog.csdn.net/haobaworenle/article/details/53819838 http://www.cnblogs.com/xrq730/p/4842028.html http://blog.csdn.net/qq_21688757/article/details/53067814 http://blog.csdn.net/fyxxq/article/details/42066843]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CopyOnWriteArrayList]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F3.CopyOnWriteArrayList%2F</url>
    <content type="text"><![CDATA[CopyOnWriteArrayListæ˜¯ArrayListçš„ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å˜ä½“ï¼Œå…¶ä¸­æ‰€æœ‰å¯å˜æ“ä½œï¼ˆaddã€set ç­‰ç­‰ï¼‰éƒ½æ˜¯é€šè¿‡å¯¹åº•å±‚æ•°ç»„è¿›è¡Œä¸€æ¬¡æ–°çš„å¤åˆ¶æ¥å®žçŽ°çš„ã€‚ CopyOnWriteArrayListæ˜¯ä¸€ä¸ªå†™æ—¶å¤åˆ¶çš„å®¹å™¨ï¼Œé‡‡ç”¨äº†è¯»å†™åˆ†ç¦»çš„æ€æƒ³ã€‚é€šä¿—ç‚¹æ¥è®²ï¼Œåœ¨å¯¹å®¹å™¨è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œä¸ç›´æŽ¥ä¿®æ”¹å½“å‰å®¹å™¨ï¼Œè€Œæ˜¯å…ˆå¯¹å½“å‰å®¹å™¨è¿›è¡Œæ‹·è´å¾—åˆ°ä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åŽå¯¹å‰¯æœ¬è¿›è¡Œå†™æ“ä½œï¼Œæœ€åŽå†å°†åŽŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ‹·è´å‡ºæ¥çš„å‰¯æœ¬ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥å¯¹å®¹å™¨è¿›è¡Œå¹¶å‘è¯»è€Œä¸ç”¨è¿›è¡ŒåŠ é”ã€‚ ä¸€ã€ç±»çš„ç»§æ‰¿å…³ç³» 12public class CopyOnWriteArrayList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable å«ä¹‰ä¸éœ€è¦å†èµ˜è¿°äº†ã€‚ äºŒã€ç±»çš„å±žæ€§ 12345678910111213141516171819202122/** ç”¨äºŽåœ¨å¯¹æ•°ç»„äº§ç”Ÿå†™æ“ä½œçš„æ–¹æ³•åŠ é”. */final transient ReentrantLock lock = new ReentrantLock();/** åº•å±‚çš„å­˜å‚¨ç»“æž„. */private transient volatile Object[] array;/** åå°„æœºåˆ¶. */private static final sun.misc.Unsafe UNSAFE;/** lockåŸŸçš„å†…å­˜åç§»é‡.æ˜¯é€šè¿‡åå°„æ‹¿åˆ°çš„ */private static final long lockOffset;static &#123; try &#123; UNSAFE = sun.misc.Unsafe.getUnsafe(); Class&lt;?&gt; k = CopyOnWriteArrayList.class; lockOffset = UNSAFE.objectFieldOffset (k.getDeclaredField("lock")); &#125; catch (Exception e) &#123; throw new Error(e); &#125;&#125; ä¸‰ã€æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´  12345678910111213141516171819202122public boolean add(E e) &#123; // å¯é‡å…¥é” final ReentrantLock lock = this.lock; // èŽ·å–é” lock.lock(); try &#123; // å…ƒç´ æ•°ç»„ Object[] elements = getArray(); // æ•°ç»„é•¿åº¦ int len = elements.length; // å¤åˆ¶æ•°ç»„ Object[] newElements = Arrays.copyOf(elements, len + 1); // å°†è¦æ·»åŠ çš„å…ƒç´ æ”¾åˆ°å‰¯æœ¬æ•°ç»„çš„æœ«å°¾åŽ» newElements[len] = e; // è®¾ç½®æ•°ç»„ setArray(newElements); return true; &#125; finally &#123; // é‡Šæ”¾é” lock.unlock(); &#125;&#125; åŸºæœ¬åŽŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹å½“å‰æ•°ç»„åŠ é”ï¼Œå†…éƒ¨å¤åˆ¶ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¤„ç†å®Œæ¯•ï¼Œä¿®æ”¹å¼•ç”¨å³å¯ï¼Œè¾¾åˆ°æœ€ç»ˆä¸€è‡´çš„æ•ˆæžœã€‚ å››ã€å¦‚æžœæ²¡æœ‰è¿™ä¸ªå…ƒç´ åˆ™æ·»åŠ  12345public boolean addIfAbsent(E e) &#123; Object[] snapshot = getArray(); return indexOf(e, snapshot, 0, snapshot.length) &gt;= 0 ? false : addIfAbsent(e, snapshot);&#125; è¯¥å‡½æ•°ç”¨äºŽæ·»åŠ å…ƒç´ ï¼ˆå¦‚æžœæ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ï¼›å¦åˆ™ï¼Œä¸æ·»åŠ ï¼Œç›´æŽ¥è¿”å›žï¼‰ã€‚å¦‚ä½•å¯ä»¥ä¿è¯å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ä¸ä¼šé‡å¤æ·»åŠ å…ƒç´ ï¼Ÿ ç­”æ¡ˆï¼šé€šè¿‡å¿«ç…§æ•°ç»„å’Œå½“å‰æ•°ç»„è¿›è¡Œå¯¹æ¯”æ¥ç¡®å®šæ˜¯å¦ä¸€è‡´ï¼Œç¡®ä¿æ·»åŠ å…ƒç´ çš„çº¿ç¨‹å®‰å…¨ 12345678910111213141516171819202122232425262728293031323334private boolean addIfAbsent(E e, Object[] snapshot) &#123; // é‡å…¥é” final ReentrantLock lock = this.lock; // èŽ·å–é” lock.lock(); try &#123; // èŽ·å–æ•°ç»„ Object[] current = getArray(); // æ•°ç»„é•¿åº¦ int len = current.length; if (snapshot != current) &#123; // å¿«ç…§ä¸ç­‰äºŽå½“å‰æ•°ç»„ï¼Œå¯¹æ•°ç»„è¿›è¡Œäº†ä¿®æ”¹ // å–è¾ƒå°è€… int common = Math.min(snapshot.length, len); for (int i = 0; i &lt; common; i++) // éåŽ† if (current[i] != snapshot[i] &amp;&amp; eq(e, current[i])) // å½“å‰æ•°ç»„çš„å…ƒç´ ä¸Žå¿«ç…§çš„å…ƒç´ ä¸ç›¸ç­‰å¹¶ä¸”eä¸Žå½“å‰å…ƒç´ ç›¸ç­‰ // è¡¨ç¤ºåœ¨snapshotä¸Žcurrentä¹‹é—´ä¿®æ”¹äº†æ•°ç»„ï¼Œå¹¶ä¸”è®¾ç½®äº†æ•°ç»„æŸä¸€å…ƒç´ ä¸ºeï¼Œå·²ç»å­˜åœ¨ // è¿”å›žfalse return false; if (indexOf(e, current, common, len) &gt;= 0) // åœ¨å½“å‰æ•°ç»„ä¸­æ‰¾åˆ°eå…ƒç´  // è¿”å›žfalse return false; &#125; // å¤åˆ¶æ•°ç»„ Object[] newElements = Arrays.copyOf(current, len + 1); // å¯¹æ•°ç»„lenç´¢å¼•çš„å…ƒç´ èµ‹å€¼ä¸ºe newElements[len] = e; // è®¾ç½®æ•°ç»„ setArray(newElements); return true; &#125; finally &#123; // é‡Šæ”¾é” lock.unlock(); &#125;&#125; è¯¥å‡½æ•°çš„æµç¨‹å¦‚ä¸‹ï¼š èŽ·å–é”ï¼ŒèŽ·å–å½“å‰æ•°ç»„ä¸ºcurrentï¼Œcurrenté•¿åº¦ä¸ºlenï¼Œåˆ¤æ–­æ•°ç»„ä¹‹å‰çš„å¿«ç…§snapshotæ˜¯å¦ç­‰äºŽå½“å‰æ•°ç»„currentï¼Œè‹¥ä¸ç›¸ç­‰ï¼Œåˆ™è¿›å…¥æ­¥éª¤2ï¼›å¦åˆ™ï¼Œè¿›å…¥æ­¥éª¤3 ä¸ç›¸ç­‰ï¼Œè¡¨ç¤ºåœ¨snapshotä¸Žcurrentä¹‹é—´ï¼Œå¯¹æ•°ç»„è¿›è¡Œäº†ä¿®æ”¹ï¼Œç›´æŽ¥è¿”å›žfalseç»“æŸ; è¯´æ˜Žå½“å‰æ•°ç»„ç­‰äºŽå¿«ç…§æ•°ç»„ï¼Œè¯´æ˜Žæ•°ç»„æ²¡æœ‰è¢«æ”¹å˜ã€‚åœ¨å½“å‰æ•°ç»„ä¸­ç´¢å¼•æŒ‡å®šå…ƒç´ ï¼Œè‹¥èƒ½å¤Ÿæ‰¾åˆ°ï¼Œè¯´æ˜Žå·²ç»å­˜åœ¨æ­¤å…ƒç´ ï¼Œç›´æŽ¥è¿”å›žfalseç»“æŸï¼›å¦åˆ™è¿›å…¥4 è¯´æ˜Žæ²¡æœ‰å½“å‰è¦æ’å…¥çš„å…ƒç´ ï¼Œé€šè¿‡æ•°ç»„å¤åˆ¶çš„æ–¹å¼æ·»åŠ åˆ°æœ«å°¾ æ— è®ºå¦‚ä½•ï¼Œéƒ½è¦é‡Šæ”¾é” äº”ã€èŽ·å–æŒ‡å®šç´¢å¼•çš„å…ƒç´  1234567public E get(int index) &#123; return get(getArray(), index);&#125;private E get(Object[] a, int index) &#123; return (E) a[index];&#125; é€šè¿‡å†™æ—¶å¤åˆ¶çš„æ–¹å¼ï¼ŒCopyOnWriteArrayList çš„ get æ–¹æ³•ä¸ç”¨åŠ é”ä¹Ÿå¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥ CopyOnWriteArrayList å¹¶å‘è¯»çš„æ•ˆçŽ‡æ˜¯éžå¸¸é«˜çš„ï¼Œå®ƒæ˜¯ç›´æŽ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡èŽ·å–å…ƒç´ çš„ã€‚ å…­ã€æ€»ç»“ ç®€å•è€Œè¨€è¦è®°ä½å®ƒçš„ä¸‰ä¸ªç‰¹ç‚¹ï¼š CopyOnWriteArrayList æ˜¯ä¸€ä¸ªå¹¶å‘çš„æ•°ç»„å®¹å™¨ï¼Œå®ƒçš„åº•å±‚å®žçŽ°æ˜¯æ•°ç»„ã€‚ CopyOnWriteArrayList é‡‡ç”¨å†™æ—¶å¤åˆ¶çš„æ–¹å¼æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ é€šè¿‡å†™æ—¶å¤åˆ¶çš„æ–¹å¼ï¼Œå¯ä»¥é«˜æ•ˆçš„è¿›è¡Œå¹¶å‘è¯»ï¼Œä½†æ˜¯å¯¹äºŽå†™æ“ä½œï¼Œæ¯æ¬¡éƒ½è¦è¿›è¡ŒåŠ é”ä»¥åŠæ‹·è´å‰¯æœ¬ï¼Œæ•ˆçŽ‡éžå¸¸ä½Žï¼Œæ‰€ä»¥ CopyOnWriteArrayList ä»…é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚ Vectorè™½ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯åªæ˜¯ä¸€ç§ç›¸å¯¹çš„çº¿ç¨‹å®‰å…¨è€Œä¸æ˜¯ç»å¯¹çš„çº¿ç¨‹å®‰å…¨ï¼Œå®ƒåªèƒ½å¤Ÿä¿è¯å¢žã€åˆ ã€æ”¹ã€æŸ¥çš„å•ä¸ªæ“ä½œä¸€å®šæ˜¯åŽŸå­çš„ï¼Œä¸ä¼šè¢«æ‰“æ–­ï¼Œä½†æ˜¯å¦‚æžœç»„åˆèµ·æ¥ç”¨ï¼Œå¹¶ä¸èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ã€‚ CopyOnWriteArrayListåœ¨å¹¶å‘ä¸‹ä¸ä¼šäº§ç”Ÿä»»ä½•çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ç»å¯¹çš„çº¿ç¨‹å®‰å…¨ å¦å¤–ï¼Œæœ‰ä¸¤ç‚¹å¿…é¡»è®²ä¸€ä¸‹ã€‚ æˆ‘è®¤ä¸ºCopyOnWriteArrayListè¿™ä¸ªå¹¶å‘ç»„ä»¶ï¼Œå…¶å®žåæ˜ çš„æ˜¯ä¸¤ä¸ªååˆ†é‡è¦çš„åˆ†å¸ƒå¼ç†å¿µï¼š ï¼ˆ1ï¼‰è¯»å†™åˆ†ç¦» æˆ‘ä»¬è¯»å–CopyOnWriteArrayListçš„æ—¶å€™è¯»å–çš„æ˜¯CopyOnWriteArrayListä¸­çš„Object[] arrayï¼Œä½†æ˜¯ä¿®æ”¹çš„æ—¶å€™ï¼Œæ“ä½œçš„æ˜¯ä¸€ä¸ªæ–°çš„Object[] arrayï¼Œè¯»å’Œå†™æ“ä½œçš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å°±æ˜¯è¯»å†™åˆ†ç¦»ã€‚è¿™ç§æŠ€æœ¯æ•°æ®åº“ç”¨çš„éžå¸¸å¤šï¼Œåœ¨é«˜å¹¶å‘ä¸‹ä¸ºäº†ç¼“è§£æ•°æ®åº“çš„åŽ‹åŠ›ï¼Œå³ä½¿åšäº†ç¼“å­˜ä¹Ÿè¦å¯¹æ•°æ®åº“åšè¯»å†™åˆ†ç¦»ï¼Œè¯»çš„æ—¶å€™ä½¿ç”¨è¯»åº“ï¼Œå†™çš„æ—¶å€™ä½¿ç”¨å†™åº“ï¼Œç„¶åŽè¯»åº“ã€å†™åº“ä¹‹é—´è¿›è¡Œä¸€å®šçš„åŒæ­¥ï¼Œè¿™æ ·å°±é¿å…åŒä¸€ä¸ªåº“ä¸Šè¯»ã€å†™çš„IOæ“ä½œå¤ªå¤š ï¼ˆ2ï¼‰æœ€ç»ˆä¸€è‡´ å¯¹CopyOnWriteArrayListæ¥è¯´ï¼Œçº¿ç¨‹1è¯»å–é›†åˆé‡Œé¢çš„æ•°æ®ï¼Œæœªå¿…æ˜¯æœ€æ–°çš„æ•°æ®ã€‚å› ä¸ºçº¿ç¨‹2ã€çº¿ç¨‹3ã€çº¿ç¨‹4å››ä¸ªçº¿ç¨‹éƒ½ä¿®æ”¹äº†CopyOnWriteArrayListé‡Œé¢çš„æ•°æ®ï¼Œä½†æ˜¯çº¿ç¨‹1æ‹¿åˆ°çš„è¿˜æ˜¯æœ€è€çš„é‚£ä¸ªObject[] arrayï¼Œæ–°æ·»åŠ è¿›åŽ»çš„æ•°æ®å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥çº¿ç¨‹1è¯»å–çš„å†…å®¹æœªå¿…å‡†ç¡®ã€‚ä¸è¿‡è¿™äº›æ•°æ®è™½ç„¶å¯¹äºŽçº¿ç¨‹1æ˜¯ä¸ä¸€è‡´çš„ï¼Œä½†æ˜¯å¯¹äºŽä¹‹åŽçš„çº¿ç¨‹ä¸€å®šæ˜¯ä¸€è‡´çš„ï¼Œå®ƒä»¬æ‹¿åˆ°çš„Object[] arrayä¸€å®šæ˜¯ä¸‰ä¸ªçº¿ç¨‹éƒ½æ“ä½œå®Œæ¯•ä¹‹åŽçš„Object array[]ï¼Œè¿™å°±æ˜¯æœ€ç»ˆä¸€è‡´ã€‚æœ€ç»ˆä¸€è‡´å¯¹äºŽåˆ†å¸ƒå¼ç³»ç»Ÿä¹Ÿéžå¸¸é‡è¦ï¼Œå®ƒé€šè¿‡å®¹å¿ä¸€å®šæ—¶é—´çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæå‡æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¯ç”¨æ€§ä¸Žåˆ†åŒºå®¹é”™æ€§ã€‚å½“ç„¶ï¼Œæœ€ç»ˆä¸€è‡´å¹¶ä¸æ˜¯ä»»ä½•åœºæ™¯éƒ½é€‚ç”¨çš„ï¼Œåƒç«è½¦ç«™å”®ç¥¨è¿™ç§ç³»ç»Ÿç”¨æˆ·å¯¹äºŽæ•°æ®çš„å®žæ—¶æ€§è¦æ±‚éžå¸¸éžå¸¸é«˜ï¼Œå°±å¿…é¡»åšæˆå¼ºä¸€è‡´æ€§çš„ã€‚ æœ€åŽæ€»ç»“ä¸€ç‚¹ï¼Œéšç€CopyOnWriteArrayListä¸­å…ƒç´ çš„å¢žåŠ ï¼ŒCopyOnWriteArrayListçš„ä¿®æ”¹ä»£ä»·å°†è¶Šæ¥è¶Šæ˜‚è´µï¼Œå› æ­¤ï¼ŒCopyOnWriteArrayListé€‚ç”¨äºŽè¯»æ“ä½œè¿œå¤šäºŽä¿®æ”¹æ“ä½œçš„å¹¶å‘åœºæ™¯ä¸­ã€‚ æ„Ÿè°¢ http://www.cnblogs.com/xrq730/p/5020760.html http://blog.csdn.net/u013124587/article/details/52863533 https://www.cnblogs.com/leesf456/p/5547853.html]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedList]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F2.LinkedList%2F</url>
    <content type="text"><![CDATA[æåˆ°ArrayListï¼Œå°±ä¼šæ¯”è¾ƒä¸ŽLinkedListçš„åŒºåˆ«ã€‚æœ¬æ–‡æ¥çœ‹çœ‹LinkedListçš„æ ¸å¿ƒåŽŸç†ã€‚ å¦‚å›¾æ‰€ç¤º LinkedList åº•å±‚æ˜¯åŸºäºŽåŒå‘é“¾è¡¨å®žçŽ°çš„ï¼Œä¹Ÿæ˜¯å®žçŽ°äº† List æŽ¥å£ï¼Œæ‰€ä»¥ä¹Ÿæ‹¥æœ‰ List çš„ä¸€äº›ç‰¹ç‚¹(JDK1.7/8 ä¹‹åŽå–æ¶ˆäº†å¾ªçŽ¯ï¼Œä¿®æ”¹ä¸ºåŒå‘é“¾è¡¨)ã€‚ ä¸€ã€LinkedListå±žæ€§ 123456//é“¾è¡¨çš„èŠ‚ç‚¹ä¸ªæ•°.transient int size = 0;//Pointer to first node.transient Node&lt;E&gt; first;//Pointer to last node.transient Node&lt;E&gt; last; äºŒã€Nodeçš„ç»“æž„ 1234567891011private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next;//åŽç½®æŒ‡é’ˆ Node&lt;E&gt; prev;//å‰ç½®æŒ‡é’ˆ Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; this.item = element; this.next = next; this.prev = prev; &#125;&#125; ä¸‰ã€æ·»åŠ å…ƒç´  3.1 LinkedListè¡¨å¤´æ·»åŠ ä¸€ä¸ªå…ƒç´  å½“å‘è¡¨å¤´æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¾ˆæ˜¾ç„¶å½“å‰èŠ‚ç‚¹çš„å‰é©±ä¸€å®šä¸º nullï¼Œè€ŒåŽç»§ç»“ç‚¹æ˜¯ first æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ï¼Œå½“ç„¶è¿˜è¦ä¿®æ”¹ first æŒ‡é’ˆæŒ‡å‘æ–°çš„å¤´èŠ‚ç‚¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŽŸæ¥çš„å¤´èŠ‚ç‚¹å˜æˆäº†ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿˜è¦ä¿®æ”¹åŽŸæ¥å¤´èŠ‚ç‚¹çš„å‰é©±æŒ‡é’ˆï¼Œä½¿å®ƒæŒ‡å‘è¡¨å¤´èŠ‚ç‚¹ï¼Œæºç çš„å®žçŽ°å¦‚ä¸‹ï¼š 1234567891011121314151617public void addFirst(E e) &#123; linkFirst(e);&#125;private void linkFirst(E e) &#123; final Node&lt;E&gt; f = first; //æ–°èŠ‚ç‚¹å‰ç½®æŒ‡é’ˆæŒ‡å‘ç©ºï¼ŒåŽç½®æŒ‡é’ˆæŒ‡å‘firstèŠ‚ç‚¹ final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f); //æ–°èŠ‚ç‚¹ä½œä¸ºæ–°çš„firstèŠ‚ç‚¹ first = newNode; if (f == null) last = newNode;//åˆå§‹å°±æ˜¯ä¸ªç©ºLinkedListçš„è¯ï¼ŒlastæŒ‡å‘å½“å‰æ–°èŠ‚ç‚¹ else f.prev = newNode;//åˆå§‹å€¼ä¸ä¸ºç©ºï¼Œå°†å…¶å‰ç½®æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ size++; modCount++;&#125; 3.2 LinkedListè¡¨å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´  å½“å‘è¡¨å°¾æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¾ˆæ˜¾ç„¶å½“å‰èŠ‚ç‚¹çš„åŽç»§ä¸€å®šä¸º nullï¼Œè€Œå‰é©±ç»“ç‚¹æ˜¯ last æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ï¼Œç„¶åŽè¿˜è¦ä¿®æ”¹ last æŒ‡é’ˆæŒ‡å‘æ–°çš„å°¾èŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œè¿˜è¦ä¿®æ”¹åŽŸæ¥å°¾èŠ‚ç‚¹çš„åŽç»§æŒ‡é’ˆï¼Œä½¿å®ƒæŒ‡å‘æ–°çš„å°¾èŠ‚ç‚¹ï¼Œæºç çš„å®žçŽ°å¦‚ä¸‹ï¼š 123456789101112131415161718public void addLast(E e) &#123; linkLast(e);&#125;void linkLast(E e) &#123; final Node&lt;E&gt; l = last; //æ–°èŠ‚ç‚¹å‰ç½®æŒ‡é’ˆæŒ‡å‘ç©ºï¼ŒåŽç½®æŒ‡é’ˆæŒ‡å‘firstèŠ‚ç‚¹ final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); //æ–°èŠ‚ç‚¹ä½œä¸ºæ–°çš„lastèŠ‚ç‚¹ last = newNode; //å¦‚æžœåŽŸæ¥æœ‰å°¾èŠ‚ç‚¹ï¼Œåˆ™æ›´æ–°åŽŸæ¥èŠ‚ç‚¹çš„åŽç»§æŒ‡é’ˆï¼Œå¦åˆ™æ›´æ–°å¤´æŒ‡é’ˆ if (l == null) first = newNode; else l.next = newNode; size++; modCount++;&#125; 3.3 LinkedListåœ¨æŒ‡å®šèŠ‚ç‚¹å‰æ·»åŠ ä¸€ä¸ªå…ƒç´  12345678910111213141516171819202122232425262728293031323334public void add(int index, E element) &#123; //åˆ¤æ–­æ•°ç»„æ˜¯å¦è¶Šç•Œ checkPositionIndex(index); if (index == size) linkLast(element);//ç›´æŽ¥æ’åœ¨æœ€åŽä¸€ä¸ª else linkBefore(element, node(index));//åœ¨indexèŠ‚ç‚¹ä¹‹å‰æ’å…¥&#125;private void checkPositionIndex(int index) &#123; if (!isPositionIndex(index)) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;private boolean isPositionIndex(int index) &#123; return index &gt;= 0 &amp;&amp; index &lt;= size;&#125;void linkBefore(E e, Node&lt;E&gt; succ) &#123; // assert succ != null; //æ‰¾åˆ°ç´¢å¼•ä½ç½®çš„å‰é¢ä¸€ä¸ªå…ƒç´ pred final Node&lt;E&gt; pred = succ.prev; //æ–°èŠ‚ç‚¹ï¼Œå‰ç½®æŒ‡é’ˆæŒ‡å‘pred,åŽç½®æŒ‡é’ˆæŒ‡å‘ç´¢å¼•å¤„å…ƒç´  final Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, succ); //ä¿®æ”¹ç´¢å¼•å‡ºå…ƒç´ çš„å‰ç½®æŒ‡é’ˆä¸ºæ–°èŠ‚ç‚¹ succ.prev = newNode; if (pred == null) first = newNode;//è¯´æ˜Žæ˜¯æ’åœ¨è¡¨å¤´ else pred.next = newNode;//è¯´æ˜Žæ˜¯æ’åœ¨éžè¡¨å¤´ä½ç½®ï¼Œä¿®æ”¹predåŽç½®æŒ‡é’ˆä¸ºæ–°æŒ‡é’ˆ size++; modCount++;&#125; å¯è§æ¯æ¬¡æ’å…¥éƒ½æ˜¯ç§»åŠ¨æŒ‡é’ˆï¼Œå’Œ ArrayList çš„æ‹·è´æ•°ç»„æ¥è¯´æ•ˆçŽ‡è¦é«˜ä¸Šä¸å°‘ã€‚ å››ã€åˆ é™¤å…ƒç´  åˆ é™¤æ“ä½œä¸Žæ·»åŠ æ“ä½œå¤§åŒå°å¼‚ï¼Œä¾‹å¦‚åˆ é™¤æŒ‡å®šèŠ‚ç‚¹çš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéœ€è¦æŠŠå½“å‰èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹çš„åŽç»§ä¿®æ”¹ä¸ºå½“å‰èŠ‚ç‚¹çš„åŽç»§ï¼Œä»¥åŠå½“å‰èŠ‚ç‚¹çš„åŽç»§ç»“ç‚¹çš„å‰é©±ä¿®æ”¹ä¸ºå½“å‰èŠ‚ç‚¹çš„å‰é©±ã€‚ å°±ä¸èµ˜è¿°äº†ã€‚ äº”ã€èŽ·å–å…ƒç´  12345678910111213141516171819202122//èŽ·å–æŒ‡å®šç´¢å¼•å¯¹åº”çš„å…ƒç´ public E get(int index) &#123; checkElementIndex(index); return node(index).item;&#125;//å¯»æ‰¾å…ƒç´ çš„æ–¹å‘æ˜¯æ ¹æ®indexåœ¨è¡¨ä¸­çš„ä½ç½®å†³å®šçš„Node&lt;E&gt; node(int index) &#123; // assert isElementIndex(index); if (index &lt; (size &gt;&gt; 1)) &#123;//ç´¢å¼•å°äºŽè¡¨é•¿çš„ä¸€åŠï¼Œä»Žè¡¨å¤´å¼€å§‹å¾€åŽæ‰¾ Node&lt;E&gt; x = first; for (int i = 0; i &lt; index; i++) x = x.next; return x; &#125; else &#123;//ç´¢å¼•å¤§äºŽè¡¨é•¿çš„ä¸€åŠï¼Œä»Žè¡¨å°¾å¾€å‰å¼€å§‹æ‰¾ Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x; &#125;&#125; ä¸Šè¿°ä»£ç ï¼Œåˆ©ç”¨äº†åŒå‘é“¾è¡¨çš„ç‰¹æ€§ï¼Œå¦‚æžœindexç¦»é“¾è¡¨å¤´æ¯”è¾ƒè¿‘ï¼Œå°±ä»ŽèŠ‚ç‚¹å¤´éƒ¨éåŽ†ã€‚å¦åˆ™å°±ä»ŽèŠ‚ç‚¹å°¾éƒ¨å¼€å§‹éåŽ†ã€‚ä½¿ç”¨ç©ºé—´ï¼ˆåŒå‘é“¾è¡¨ï¼‰æ¥æ¢å–æ—¶é—´ã€‚ node()ä¼šä»¥O(n/2)çš„æ€§èƒ½åŽ»èŽ·å–ä¸€ä¸ªç»“ç‚¹ å¦‚æžœç´¢å¼•å€¼å¤§äºŽé“¾è¡¨å¤§å°çš„ä¸€åŠï¼Œé‚£ä¹ˆå°†ä»Žå°¾ç»“ç‚¹å¼€å§‹éåŽ† è¿™æ ·çš„æ•ˆçŽ‡æ˜¯éžå¸¸ä½Žçš„ï¼Œç‰¹åˆ«æ˜¯å½“ index è¶ŠæŽ¥è¿‘ size çš„ä¸­é—´å€¼æ—¶ã€‚ æ€»ç»“ 1ã€ç†è®ºä¸Šæ— å®¹é‡é™åˆ¶ï¼Œåªå—è™šæ‹Ÿæœºè‡ªèº«é™åˆ¶å½±å“ï¼Œæ‰€ä»¥æ²¡æœ‰æ‰©å®¹æ–¹æ³•ã€‚ 2ã€å’ŒArrayListä¸€æ ·ï¼ŒLinkedListä¹Ÿæ˜¯æ˜¯æœªåŒæ­¥çš„ï¼Œå¤šçº¿ç¨‹å¹¶å‘è¯»å†™æ—¶éœ€è¦å¤–éƒ¨åŒæ­¥ï¼Œå¦‚æžœä¸å¤–éƒ¨åŒæ­¥ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Collections.synchronizedListæ–¹æ³•å¯¹LinkedListçš„å®žä¾‹è¿›è¡Œä¸€æ¬¡å°è£…ã€‚ 3ã€å’ŒArrayListä¸€æ ·ï¼ŒLinkedListä¹Ÿå¯¹å­˜å‚¨çš„å…ƒç´ æ— é™åˆ¶ï¼Œå…è®¸nullå…ƒç´ ã€‚ 4ã€é¡ºåºæ’å…¥é€Ÿåº¦ArrayListä¼šæ¯”è¾ƒå¿«ï¼Œå› ä¸ºArrayListæ˜¯åŸºäºŽæ•°ç»„å®žçŽ°çš„ï¼Œæ•°ç»„æ˜¯äº‹å…ˆnewå¥½çš„ï¼Œåªè¦å¾€æŒ‡å®šä½ç½®å¡žä¸€ä¸ªæ•°æ®å°±å¥½äº†ï¼›LinkedListåˆ™ä¸åŒï¼Œæ¯æ¬¡é¡ºåºæ’å…¥çš„æ—¶å€™LinkedListå°†newä¸€ä¸ªå¯¹è±¡å‡ºæ¥ï¼Œå¦‚æžœå¯¹è±¡æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆnewçš„æ—¶é—´åŠ¿å¿…ä¼šé•¿ä¸€ç‚¹ï¼Œå†åŠ ä¸Šä¸€äº›å¼•ç”¨èµ‹å€¼çš„æ“ä½œï¼Œæ‰€ä»¥é¡ºåºæ’å…¥LinkedListå¿…ç„¶æ…¢äºŽArrayList 5ã€åŸºäºŽä¸Šä¸€ç‚¹ï¼Œå› ä¸ºLinkedListé‡Œé¢ä¸ä»…ç»´æŠ¤äº†å¾…æ’å…¥çš„å…ƒç´ ï¼Œè¿˜ç»´æŠ¤äº†Entryçš„å‰ç½®Entryå’ŒåŽç»§Entryï¼Œå¦‚æžœä¸€ä¸ªLinkedListä¸­çš„Entryéžå¸¸å¤šï¼Œé‚£ä¹ˆLinkedListå°†æ¯”ArrayListæ›´è€—è´¹ä¸€äº›å†…å­˜ 6ã€æ•°æ®éåŽ†çš„é€Ÿåº¦ï¼Œçœ‹æœ€åŽä¸€éƒ¨åˆ†ï¼Œè¿™é‡Œå°±ä¸ç»†è®²äº†ï¼Œç»“è®ºæ˜¯ï¼šä½¿ç”¨å„è‡ªéåŽ†æ•ˆçŽ‡æœ€é«˜çš„æ–¹å¼ï¼ŒArrayListçš„éåŽ†æ•ˆçŽ‡ä¼šæ¯”LinkedListçš„éåŽ†æ•ˆçŽ‡é«˜ä¸€äº› 7ã€æœ‰äº›è¯´æ³•è®¤ä¸ºLinkedListåšæ’å…¥å’Œåˆ é™¤æ›´å¿«ï¼Œè¿™ç§è¯´æ³•å…¶å®žæ˜¯ä¸å‡†ç¡®çš„ï¼š LinkedListåšæ’å…¥ã€åˆ é™¤çš„æ—¶å€™ï¼Œæ…¢åœ¨å¯»å€ï¼Œå¿«åœ¨åªéœ€è¦æ”¹å˜å‰åŽEntryçš„å¼•ç”¨åœ°å€ ArrayListåšæ’å…¥ã€åˆ é™¤çš„æ—¶å€™ï¼Œæ…¢åœ¨æ•°ç»„å…ƒç´ çš„æ‰¹é‡copyï¼Œå¿«åœ¨å¯»å€ æ‰€ä»¥ï¼Œå¦‚æžœå¾…æ’å…¥ã€åˆ é™¤çš„å…ƒç´ æ˜¯åœ¨æ•°æ®ç»“æž„çš„å‰åŠæ®µå°¤å…¶æ˜¯éžå¸¸é å‰çš„ä½ç½®çš„æ—¶å€™ï¼ŒLinkedListçš„æ•ˆçŽ‡å°†å¤§å¤§å¿«è¿‡ArrayListï¼Œå› ä¸ºArrayListå°†æ‰¹é‡copyå¤§é‡çš„å…ƒç´ ï¼›è¶Šå¾€åŽï¼Œå¯¹äºŽLinkedListæ¥è¯´ï¼Œå› ä¸ºå®ƒæ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥åœ¨ç¬¬2ä¸ªå…ƒç´ åŽé¢æ’å…¥ä¸€ä¸ªæ•°æ®å’Œåœ¨å€’æ•°ç¬¬2ä¸ªå…ƒç´ åŽé¢æ’å…¥ä¸€ä¸ªå…ƒç´ åœ¨æ•ˆçŽ‡ä¸ŠåŸºæœ¬æ²¡æœ‰å·®åˆ«ï¼Œä½†æ˜¯ArrayListç”±äºŽè¦æ‰¹é‡copyçš„å…ƒç´ è¶Šæ¥è¶Šå°‘ï¼Œæ“ä½œé€Ÿåº¦å¿…ç„¶è¿½ä¸Šä¹ƒè‡³è¶…è¿‡LinkedListã€‚ ä»Žè¿™ä¸ªåˆ†æžçœ‹å‡ºï¼Œå¦‚æžœä½ ååˆ†ç¡®å®šä½ æ’å…¥ã€åˆ é™¤çš„å…ƒç´ æ˜¯åœ¨å‰åŠæ®µï¼Œé‚£ä¹ˆå°±ä½¿ç”¨LinkedListï¼›å¦‚æžœä½ ååˆ†ç¡®å®šä½ åˆ é™¤ã€åˆ é™¤çš„å…ƒç´ åœ¨æ¯”è¾ƒé åŽçš„ä½ç½®ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ArrayListã€‚å¦‚æžœä½ ä¸èƒ½ç¡®å®šä½ è¦åšçš„æ’å…¥ã€åˆ é™¤æ˜¯åœ¨å“ªå„¿å‘¢ï¼Ÿé‚£è¿˜æ˜¯å»ºè®®ä½ ä½¿ç”¨LinkedListå§ï¼Œå› ä¸ºä¸€æ¥LinkedListæ•´ä½“æ’å…¥ã€åˆ é™¤çš„æ‰§è¡Œæ•ˆçŽ‡æ¯”è¾ƒç¨³å®šï¼Œæ²¡æœ‰ArrayListè¿™ç§è¶Šå¾€åŽè¶Šå¿«çš„æƒ…å†µï¼›äºŒæ¥æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œå¼„å¾—ä¸å¥½ArrayListå°±è¦è¿›è¡Œä¸€æ¬¡æ‰©å®¹ï¼Œè®°ä½ï¼ŒArrayListåº•å±‚æ•°ç»„æ‰©å®¹æ˜¯ä¸€ä¸ªæ—¢æ¶ˆè€—æ—¶é—´åˆæ¶ˆè€—ç©ºé—´çš„æ“ä½œ. 8ã€ArrayListä½¿ç”¨æœ€æ™®é€šçš„forå¾ªçŽ¯éåŽ†ï¼ŒLinkedListä½¿ç”¨foreachå¾ªçŽ¯æ¯”è¾ƒå¿«.æ³¨æ„åˆ°ArrayListæ˜¯å®žçŽ°äº†RandomAccessæŽ¥å£è€ŒLinkedListåˆ™æ²¡æœ‰å®žçŽ°è¿™ä¸ªæŽ¥å£.å…³äºŽRandomAccessè¿™ä¸ªæŽ¥å£çš„ä½œç”¨ï¼Œçœ‹ä¸€ä¸‹JDK APIä¸Šçš„è¯´æ³•ï¼š 9ã€å¦‚æžœä½¿ç”¨æ™®é€šforå¾ªçŽ¯éåŽ†LinkedListï¼Œåœ¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œå…¶éåŽ†é€Ÿåº¦å°†æ…¢å¾—ä»¤äººå‘æŒ‡ æ•´ç†è‡ªï¼š 1ã€http://www.cnblogs.com/xrq730/p/5005347.html 2ã€http://blog.csdn.net/u013124587/article/details/52837848 3ã€http://blog.csdn.net/u011392897/article/details/57115818 4ã€http://blog.csdn.net/fighterandknight/article/details/61476335]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ArrayList/Vector]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F1.ArrayList%E5%92%8CVector%2F</url>
    <content type="text"><![CDATA[é¢è¯•ä¸­ï¼Œå…³äºŽjavaçš„ä¸€äº›å®¹å™¨ï¼ŒArrayListæ˜¯æœ€ç®€å•ä¹Ÿæ˜¯æœ€å¸¸é—®çš„ï¼Œå°¤å…¶æ˜¯é‡Œé¢çš„æ‰©å®¹æœºåˆ¶ã€‚ ArrayList 12public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable ArrayList å®žçŽ°äºŽ Listã€RandomAccess æŽ¥å£ã€‚å¯ä»¥æ’å…¥ç©ºæ•°æ®ï¼Œä¹Ÿæ”¯æŒéšæœºè®¿é—®ã€‚ æž„é€ å‡½æ•°ä¸ºï¼š 123456789101112131415161718//ç”¨åˆå§‹å®¹é‡ä½œä¸ºå‚æ•°çš„æž„é€ æ–¹æ³•public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123; //åˆå§‹å®¹é‡å¤§äºŽ0ï¼Œå®žä¾‹åŒ–æ•°ç»„ this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; //åˆå§‹å®¹é‡ç­‰äºŽ0ï¼Œèµ‹äºˆç©ºæ•°ç»„ this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException("Illegal Capacity: "+ initialCapacity); &#125;&#125;//æ— å‚çš„æž„é€ æ–¹æ³•public ArrayList() &#123; this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;&#125; ä»Žæž„é€ æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒelementDataæ˜¯ä¸€ä¸ªå¤§å°ä¸º0çš„ç©ºæ•°ç»„ï¼Œå½“æˆ‘ä»¬æŒ‡å®šäº†åˆå§‹å¤§å°çš„æ—¶å€™ï¼ŒelementDataçš„åˆå§‹å¤§å°å°±å˜æˆäº†æˆ‘ä»¬æ‰€æŒ‡å®šçš„åˆå§‹å¤§å°äº†ã€‚ ArrayListç›¸å½“äºŽåŠ¨æ€æ•°æ®ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªå±žæ€§åˆ†åˆ«æ˜¯: elementData æ•°ç»„ï¼Œä»¥åŠ size å¤§å°ã€‚ åœ¨è°ƒç”¨ add() æ–¹æ³•çš„æ—¶å€™ï¼š 12345public boolean add(E e) &#123; ensureCapacityInternal(size + 1); // Increments modCount!! elementData[size++] = e; return true;&#125; é¦–å…ˆè¿›è¡Œæ‰©å®¹æ ¡éªŒã€‚ å°†æ’å…¥çš„å€¼æ”¾åˆ°å°¾éƒ¨ï¼Œå¹¶å°† size + 1 ã€‚ å¦‚æžœæ˜¯è°ƒç”¨ add(index,e) åœ¨æŒ‡å®šä½ç½®æ·»åŠ çš„è¯ï¼š 12345678910public void add(int index, E element) &#123; rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! //å¤åˆ¶ï¼Œå‘åŽç§»åŠ¨ System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++;&#125; ä¹Ÿæ˜¯é¦–å…ˆæ‰©å®¹æ ¡éªŒã€‚ æŽ¥ç€å¯¹æ•°æ®è¿›è¡Œå¤åˆ¶ï¼Œç›®çš„æ˜¯æŠŠ index ä½ç½®ç©ºå‡ºæ¥æ”¾æœ¬æ¬¡æ’å…¥çš„æ•°æ®ï¼Œå¹¶å°†åŽé¢çš„æ•°æ®å‘åŽç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚ å…¶å®žæ‰©å®¹æœ€ç»ˆè°ƒç”¨çš„ä»£ç : 1234567891011private void grow(int minCapacity) &#123; // overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity);&#125; ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„å¤åˆ¶çš„è¿‡ç¨‹ï¼ŒArrayListæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯æ‰©1.5å€ï¼Œç„¶åŽè°ƒç”¨Arraysç±»çš„copyOfæ–¹æ³•ï¼ŒæŠŠå…ƒç´ é‡æ–°æ‹·è´åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­åŽ»ã€‚ ç”±æ­¤å¯è§ ArrayList çš„ä¸»è¦æ¶ˆè€—æ˜¯æ•°ç»„æ‰©å®¹ä»¥åŠåœ¨æŒ‡å®šä½ç½®æ·»åŠ æ•°æ®ï¼Œåœ¨æ—¥å¸¸ä½¿ç”¨æ—¶æœ€å¥½æ˜¯æŒ‡å®šå¤§å°ï¼Œå°½é‡å‡å°‘æ‰©å®¹ã€‚æ›´è¦å‡å°‘åœ¨æŒ‡å®šä½ç½®æ’å…¥æ•°æ®çš„æ“ä½œã€‚ åºåˆ—åŒ– ç”±äºŽ ArrayList æ˜¯åŸºäºŽåŠ¨æ€æ•°ç»„å®žçŽ°çš„ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç©ºé—´éƒ½è¢«ä½¿ç”¨ã€‚å› æ­¤ä½¿ç”¨äº† transient ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢è¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚ 1transient Object[] elementData; å› æ­¤ ArrayList è‡ªå®šä¹‰äº†åºåˆ—åŒ–ä¸Žååºåˆ—åŒ–ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException&#123; // Write out element count, and any hidden stuff int expectedModCount = modCount; s.defaultWriteObject(); // Write out size as capacity for behavioural compatibility with clone() s.writeInt(size); // Write out all elements in the proper order. //åªåºåˆ—åŒ–äº†è¢«ä½¿ç”¨çš„æ•°æ® for (int i=0; i&lt;size; i++) &#123; s.writeObject(elementData[i]); &#125; if (modCount != expectedModCount) &#123; throw new ConcurrentModificationException(); &#125;&#125;private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException &#123; elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff s.defaultReadObject(); // Read in capacity s.readInt(); // ignored if (size &gt; 0) &#123; // be like clone(), allocate array based upon size not capacity ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. for (int i=0; i&lt;size; i++) &#123; a[i] = s.readObject(); &#125; &#125;&#125; å½“å¯¹è±¡ä¸­è‡ªå®šä¹‰äº† writeObject å’Œ readObject æ–¹æ³•æ—¶ï¼ŒJVM ä¼šè°ƒç”¨è¿™ä¸¤ä¸ªè‡ªå®šä¹‰æ–¹æ³•æ¥å®žçŽ°åºåˆ—åŒ–ä¸Žååºåˆ—åŒ–ã€‚ ä»Žå®žçŽ°ä¸­å¯ä»¥çœ‹å‡º ArrayList åªåºåˆ—åŒ–äº†è¢«ä½¿ç”¨çš„æ•°æ®ã€‚ Vector Vector ä¹Ÿæ˜¯å®žçŽ°äºŽ List æŽ¥å£ï¼Œåº•å±‚æ•°æ®ç»“æž„å’Œ ArrayList ç±»ä¼¼,ä¹Ÿæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„å­˜æ”¾æ•°æ®ã€‚ä¸è¿‡æ˜¯åœ¨ add() æ–¹æ³•çš„æ—¶å€™ä½¿ç”¨ synchronized è¿›è¡ŒåŒæ­¥å†™æ•°æ®ï¼Œä½†æ˜¯å¼€é”€è¾ƒå¤§ï¼Œæ‰€ä»¥ Vector æ˜¯ä¸€ä¸ªåŒæ­¥å®¹å™¨å¹¶ä¸æ˜¯ä¸€ä¸ªå¹¶å‘å®¹å™¨ã€‚ Vectoræ¯”ArrayListå¤šäº†ä¸€ä¸ªå±žæ€§ï¼š 1protected int capacityIncrement; è¿™ä¸ªå±žæ€§æ˜¯åœ¨æ‰©å®¹çš„æ—¶å€™ç”¨åˆ°çš„ï¼Œå®ƒè¡¨ç¤ºæ¯æ¬¡æ‰©å®¹åªæ‰©capacityIncrementä¸ªç©ºé—´å°±è¶³å¤Ÿäº†ã€‚è¯¥å±žæ€§å¯ä»¥é€šè¿‡æž„é€ æ–¹æ³•ç»™å®ƒèµ‹å€¼ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹æž„é€ æ–¹æ³•ï¼š 123456789101112131415public Vector(int initialCapacity, int capacityIncrement) &#123; super(); if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal Capacity: "+initialCapacity); this.elementData = new Object[initialCapacity]; this.capacityIncrement = capacityIncrement;&#125;public Vector(int initialCapacity) &#123; this(initialCapacity, 0);&#125;public Vector() &#123; this(10);&#125; ä»Žæž„é€ æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºVectorçš„é»˜è®¤å¤§å°ä¹Ÿæ˜¯10ï¼Œè€Œä¸”å®ƒåœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»åˆ›å»ºäº†æ•°ç»„äº†ï¼Œè¿™ç‚¹è·ŸArrayListä¸ä¸€æ ·ã€‚å†æ¥çœ‹ä¸€ä¸‹growæ–¹æ³•ï¼š 12345678910private void grow(int minCapacity) &#123; // overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); elementData = Arrays.copyOf(elementData, newCapacity);&#125; ä»Žgrowæ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼ŒnewCapacityé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸¤å€çš„oldCapacityï¼Œè€Œå½“æŒ‡å®šäº†capacityIncrementçš„å€¼ä¹‹åŽï¼ŒnewCapacityå˜æˆäº†oldCapacity+capacityIncrementã€‚ ä»¥ä¸‹æ˜¯ add() æ–¹æ³•ï¼š 123456public synchronized boolean add(E e) &#123; modCount++; ensureCapacityHelper(elementCount + 1); elementData[elementCount++] = e; return true;&#125; ä»¥åŠæŒ‡å®šä½ç½®æ’å…¥æ•°æ®: 12345678910111213public void add(int index, E element) &#123; insertElementAt(element, index);&#125;public synchronized void insertElementAt(E obj, int index) &#123; modCount++; if (index &gt; elementCount) &#123; throw new ArrayIndexOutOfBoundsException(index + " &gt; " + elementCount); &#125; ensureCapacityHelper(elementCount + 1); System.arraycopy(elementData, index, elementData, index + 1, elementCount - index); elementData[index] = obj; elementCount++;&#125;]]></content>
      <tags>
        <tag>javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018å¹´çš„æœ€åŽä¸€å¤©ï¼Œå¯¹å•†åŸŽé¡¹ç›®çš„æž¶æž„åšä¸ªæ”¹é€ ]]></title>
    <url>%2F2019%2F01%2F20%2F2018%E5%B9%B4%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9%EF%BC%8C%E5%AF%B9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%B6%E6%9E%84%E5%81%9A%E4%B8%AA%E6%94%B9%E9%80%A0%2F</url>
    <content type="text"><![CDATA[ä¸€ç›´ä»¥æ¥éƒ½æ˜¯å­¦ä¹ æ…•è¯¾çš„å®žæˆ˜è§†é¢‘ï¼Œè™½ç„¶ä¹Ÿè·Ÿç€åšå‡ºäº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯æ€è·¯éƒ½æ˜¯åˆ«äººæä¾›å¥½çš„ï¼Œè„±ç¦»äº†è€å¸ˆï¼Œæˆ‘ä¸€ç›´åœ¨é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šèƒ½ä¸èƒ½ç‹¬ç«‹åœ°æŒ‰ç…§è‡ªå·±çš„æ€è·¯åšå‡ºä¸€äº›ä¸œè¥¿æ¥ï¼Ÿ å‰æ–¹å›¾ç‰‡é«˜èƒ½â€¦æ›´æœ‰å‡ åå…†gifæ¼”ç¤ºåŠ¨ç”»ï¼Œå›¾ç‰‡å…¨éƒ¨å­˜æ”¾äºŽä¸ƒç‰›äº‘ä¸Šã€‚ åœ¨åŽ»å¹´ï¼Œå³2017å¹´å¹´åº•ï¼Œæˆ‘åœ¨æ…•è¯¾ä¸Šå­¦ä¹ äº†è¿™ä¸¤é—¨è¯¾ç¨‹ï¼š ç¬¬ä¸€æœŸé¡¹ç›®å®žçŽ°äº†æ¯”è¾ƒç®€å•çš„ç”µå•†ä¸šåŠ¡ï¼Œæ•´åˆSSMï¼Œå¹¶ä¸”éƒ¨ç½²åˆ°äº‘ç«¯ã€‚ ç¬¬äºŒæœŸå®žçŽ°äº†tomcaté›†ç¾¤ï¼Œé…åˆrediså®žçŽ°åˆ†å¸ƒå¼sessionï¼Œè¿˜æœ‰ä¸€äº›å®šæ—¶ä»»åŠ¡ã€redisåˆ†å¸ƒå¼é”ã€mavençŽ¯å¢ƒéš”ç¦»çš„ä¸€äº›ä¸œè¥¿ï¼Œè¿˜æ¶‰åŠå¾ˆå¤šspringå’Œspringmvcçš„æœ‰ç”¨çš„æœºå·§ã€‚ æ•´ä½“æ„Ÿè§‰æ˜¯ï¼šä¸€æœŸå®žçŽ°ä¸šåŠ¡ï¼ŒäºŒæœŸå¯¹äºŽä¸€æœŸçš„æé«˜ä¸æ˜¯å¤ªå¤§ï¼Œè·Ÿåˆ†å¸ƒå¼æ— å¤ªå¤§å…³ç³»ï¼Œä»…ä»…å®žçŽ°äº†å•ç‚¹ç™»é™†å’Œåˆ†å¸ƒå¼sessionå­˜å‚¨è€Œå·²ã€‚ ä¸ªäººæ„Ÿè§‰ä¸‹ä¸€æœŸçš„è¯¾ç¨‹åº”è¯¥æ˜¯springCloudçš„åˆ†å¸ƒå¼æ”¹é€ ï¼Œè¿›è¡ŒæœåŠ¡æ‹†åˆ†å’Œæ²»ç†ã€‚æ‰€ä»¥ï¼Œåœ¨æ•´åˆè¿™ä¸¤ä¸ªè¯¾ç¨‹çš„åŸºç¡€ä¸Šç”¨springCloudè¿›è¡Œå¾®æœåŠ¡æ²»ç†ã€‚ é¡¹ç›®è¯¦ç»†æè¿° é¡¹ç›®æºç åœ°å€ï¼šhttps://github.com/sunweiguo/MMall æ•´ä½“æ•ˆæžœæ¼”ç¤ºï¼š ä¸‹é¢è´´ä¸ªå°ä¸€ç‚¹çš„gif: éƒ¨åˆ†é¡µé¢æˆªå›¾ï¼š ç»è¿‡ä¸€ééæµ‹è¯•ï¼Œå•†åŸŽè¿˜æ˜¯å­˜åœ¨ä¸€äº›æ— ä¼¤å¤§é›…çš„bugï¼Œä½†æ˜¯ä¸»è¦è¿˜æ˜¯é”»ç‚¼è‡ªå·±çš„èƒ½åŠ›å˜›ï¼ ä¸‹è®¢å•çš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼šå•†å“ä¸å­˜åœ¨æˆ–åº“å­˜ä¸è¶³ï¼Œæ˜¯å› ä¸ºæˆ‘æ¨¡æ‹Ÿçš„ç§’æ€ï¼Œæ‰€ä»¥å•†å“çš„åº“å­˜è¦æå‰é¢„ç½®äºŽredisä¸­ï¼ŒåŽç«¯ç®¡ç†ç³»ç»Ÿçš„å•†å“ç®¡ç†é¡µé¢æœ‰é¢„ç½®åº“å­˜çš„æŒ‰é’®ã€‚ æ–°å¢žå•†å“çš„æ—¶å€™ï¼Œå¯¹äºŽä¸Šä¼ å›¾ç‰‡ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ä¸€ä¼šï¼Œéœ€è¦ç­‰å¾…FTPæœåŠ¡å™¨ä¸Šä¼ å®Œæ¯•ï¼Œç»™ä¸€ä¸ªè¿”å›žä¿¡æ¯(Mapï¼Œæ˜¯å›¾ç‰‡çš„æ–‡ä»¶å)æ‰èƒ½çœŸæ­£æ˜¾ç¤ºï¼ˆå¯¹äºŽå¯Œæ–‡æœ¬ä¸­çš„å›¾ç‰‡ä¸Šä¼ ï¼Œåœ¨ä¸Šä¼ ä¹‹åŽéœ€è¦ç­‰å¾…ä¸€ä¼šï¼Œæ—¶é—´ä¸Žå°å›¾ä¸Šä¼ å·®ä¸å¤šï¼Œå¦åˆ™ç›´æŽ¥ä¿å­˜ä¸æŠ¥é”™ï¼Œä½†æ˜¯å‰ç«¯çœ‹ä¸åˆ°å›¾ï¼Œå› ä¸ºè¿˜æ²¡ä¸Šä¼ å®Œæ¯•,urlè¿˜æ²¡å›žä¼ å›žæ¥ï¼‰ æ™®é€šæ³¨å†Œçš„è´¦å·ï¼Œæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥ä¸èƒ½ç™»é™†åŽå°ç®¡ç†ç³»ç»Ÿã€‚ åŽæ¥åšäº†eurekaé›†ç¾¤ï¼Œä½†æ˜¯é…ç½®æ–‡ä»¶è¿˜æ˜¯åªæŒ‡å‘å…¶ä¸­ä¸€ä¸ªeureka åœ¨å­¦ä¹ çš„è§†é¢‘ä¸­ï¼Œä¸€æœŸåªæ˜¯å®žçŽ°ä¸šåŠ¡åŠŸèƒ½ï¼Œå•ä½“æž¶æž„ï¼Œä¸€ä¸ªtomcatã€‚äºŒæœŸå¯¹å…¶åšäº†é›†ç¾¤ï¼Œå¹¶ä¸”è§£å†³äº†é›†ç¾¤æ¨¡å¼ä¸‹sessionå­˜å‚¨é—®é¢˜ï¼Œå®žçŽ°äº†æ¯”è¾ƒç®€å•çš„å•ç‚¹ç™»é™†åŠŸèƒ½ã€‚æž¶æž„å¦‚ä¸‹ï¼š å¯¹äºŽä¸Šé¢çš„æž¶æž„æ¥è¯´ï¼Œåªæ˜¯åšäº†ä¸€äº›é›†ç¾¤è¿›è¡Œä¼˜åŒ–ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œç”¨æˆ·æœåŠ¡ç­‰å…¶ä»–æœåŠ¡å¿…ç„¶è¦æ‹†åˆ†å‡ºæ¥ç‹¬ç«‹æˆä¸ºä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œä¸€æ–¹é¢ä¸€ä¸ªå›¢é˜Ÿè´Ÿè´£ä¸€ä¸ªæœåŠ¡å¯ä»¥æé«˜å¼€å‘æ•ˆçŽ‡ï¼Œå¦å¤–ï¼Œå¯¹äºŽæ‰©å±•æ€§ä¹Ÿæ˜¯éžå¸¸æœ‰åˆ©çš„ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œä¼šå¸¦æ¥å¾ˆå¤šçš„å¤æ‚æ€§ï¼Œå°¤å…¶æ˜¯å¼•å…¥äº†åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ‰€ä»¥ä¸èƒ½ä¸ºäº†åˆ†å¸ƒå¼è€Œåˆ†å¸ƒå¼ï¼Œè€Œæ˜¯é’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯è€Œé‡‡ç”¨åˆé€‚çš„æž¶æž„ã€‚ å¾®æœåŠ¡çš„å®žçŽ°ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼Œå›½å†…æ˜¯é˜¿é‡Œç³»çš„ä»¥dubbo+zookeeperä¸ºæ ¸å¿ƒçš„ä¸€å¥—æœåŠ¡æ²»ç†å’Œå‘çŽ°ç”Ÿæ€ã€‚å¦ä¸€ä¸ªåˆ™æ˜¯å¤§åé¼Žé¼Žçš„spring cloudæ ˆã€‚ spring cloudå¹¶ä¸æ˜¯åƒspringæ˜¯ä¸€ä¸ªæ¡†æž¶ï¼Œä»–æ˜¯è§£å†³å¾®æœåŠ¡çš„ä¸€ç§æ–¹æ¡ˆï¼Œæ˜¯ç”±å„ç§ä¼˜ç§€å¼€æºç»„ä»¶å…±åŒé…åˆè€Œå®žçŽ°çš„å¾®æœåŠ¡æ²»ç†æž¶æž„ã€‚ä¸‹é¢çš„å›¾æ˜¯æˆ‘æž„æ€çš„é¡¹ç›®ç»“æž„å›¾ï¼š æœ€å‰é¢æ˜¯Nginxï¼Œè¿™é‡Œå°±ä½œä¸ºä¸€ä¸ªé™æ€èµ„æºæ˜ å°„å’Œè´Ÿè½½å‡è¡¡ï¼Œnginxä¸­æœ‰å‡ ä¸ªé…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«ä¸ºwww.oursnail.cn.confï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¯¹zuulç½‘å…³åœ°å€åšä¸€ä¸ªè´Ÿè½½å‡è¡¡ï¼ŒæŒ‡å‘ç½‘å…³æ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”æ‰¾åˆ°å‰å°é¡µé¢æ‰€åœ¨ä½ç½®å¯¹é¡µé¢è¿›è¡Œæ¸²æŸ“ã€‚admin.oursnail.cn.confï¼Œè¿™ä¸ªä¸»è¦æ˜¯é…ç½®åŽç«¯ä»¥åŠåŽç«¯çš„é¡µé¢æ–‡ä»¶ï¼›img.oursnail.cn.confæ˜¯å¯¹å›¾ç‰‡æœåŠ¡å™¨åœ°å€è¿›è¡Œæ˜ å°„ã€‚ ç„¶åŽæ˜¯zuulç½‘å…³ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç”¨æ¥é™æµã€é‰´æƒä»¥åŠè·¯ç”±è½¬å‘ã€‚ å†åŽé¢å°±æ˜¯æˆ‘ä»¬çš„åº”ç”¨æœåŠ¡å™¨å•¦ã€‚å¯¹æœåŠ¡å™¨è¿›è¡Œäº†æœåŠ¡è¿½è¸ª(sleuth)ï¼Œå®žçŽ°äº†åŠ¨æ€åˆ·æ–°é…ç½®(spring cloud config+bus)ç­‰åŠŸèƒ½ã€‚ä»¥http restfulçš„æ–¹å¼è¿›è¡Œé€šä¿¡(openFeign),æž„å»ºèµ·ä»¥eurekaä¸ºæ³¨å†Œä¸­å¿ƒçš„åˆ†å¸ƒå¼æž¶æž„ã€‚ æ¯ä¸ªæœåŠ¡éƒ½æ˜¯åŸºäºŽspringbootæ‰“é€ ï¼Œç»“åˆmybatisæŒä¹…å±‚æ“ä½œçš„æ¡†æž¶ï¼Œå®ŒæˆåŸºæœ¬çš„ä¸šåŠ¡éœ€æ±‚ã€‚springbootåŸºäºŽspringï¼Œç‰¹ç‚¹æ˜¯å¿«é€Ÿå¯åŠ¨ã€å†…ç½®tomcatä»¥åŠæ— xmlé…ç½®ã€‚å°†å¾ˆå¤šä¸œè¥¿å°è£…èµ·æ¥ï¼Œå¼•å…¥pomå°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œæ¯”å¦‚springMVCå°±åŸºæœ¬ä¸Šå¼•å…¥starter-webå³å¯ã€‚ ç”±äºŽèµ„æºçš„åŽŸå› ï¼Œåªæœ‰ä¸‰å°æœ€ä½Žé…çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥æœ¬æ¥æƒ³åšçš„åŸºäºŽESçš„å…¨æ–‡æ£€ç´¢æœåŠ¡æ²¡æœ‰åšï¼Œä¹Ÿæ²¡æœ‰åˆ†åº“åˆ†è¡¨ã€‚ è‡³äºŽå®šæ—¶ä»»åŠ¡ä»¥åŠHystrixæœåŠ¡ç†”æ–­å’Œé™çº§ï¼Œæ¯”è¾ƒç®€å•ï¼Œå°±ä¸åšäº†ã€‚ é¡¹ç›®çš„æŽ¥å£æ–‡æ¡£è¯¦è§wikiï¼šhttps://github.com/sunweiguo/spring-cloud-for-snailmall/wiki é¡¹ç›®çš„æ•°æ®åº“è¡¨è®¾è®¡ï¼šsnailmall.sql ä¸‹é¢è¯¦ç»†ä»‹ç»æ¯ä¸ªæ¨¡å—å®žçŽ°çš„å¤§ä½“æ€è·¯ï¼ˆä»…ä¾›å‚è€ƒï¼Œæ¯•ç«Ÿåº”å±Šç”Ÿï¼ŒçœŸå®žé¡¹ç›®æ²¡åšè¿‡ï¼‰ï¼š ç”¨æˆ·æ¨¡å— å…³äºŽç”¨æˆ·æ¨¡å—ï¼Œæ ¸å¿ƒçš„åŠŸèƒ½æ˜¯ç™»é™†ã€‚å†æ ¸å¿ƒæ˜¯å¦‚ä½•éªŒè¯ä»¥åŠå¦‚ä½•å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚è¿™é‡Œé‡‡å–çš„æ–¹æ¡ˆä¸ºï¼š å¯¹äºŽç”¨æˆ·æ³¨å†Œï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ç”¨æˆ·åï¼ˆæ˜µç§°ï¼‰ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯ä¸é‡å¤å‘¢ï¼ˆé«˜å¹¶å‘ï¼‰ï¼Ÿè¿™é‡Œè¿˜æ˜¯ç”¨äº†åˆ†å¸ƒå¼é”æ¥ä¿è¯çš„ã€‚ å¯¹äºŽæœªç™»é™†ç« å°ä¸‹ç”¨æˆ·ä¿®æ”¹å¯†ç ï¼Œé€»è¾‘ä¸ºï¼š è´­ç‰©è½¦æ¨¡å— è®¢å•æ¨¡å— é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæˆ‘æƒ³è¯´ä¸€ä¸‹æˆ‘çš„æ€è·¯ã€‚ å¯¹äºŽå¹‚ç­‰æ€§ï¼Œè¿™é‡Œäº§ç”Ÿå¹‚ç­‰æ€§çš„ä¸»è¦åŽŸå› åœ¨äºŽMQçš„é‡ä¼ æœºåˆ¶ï¼Œå¯èƒ½ç¬¬ä¸€ä¸ªæ¶ˆæ¯ä¹…ä¹…æ²¡æœ‰å‘å‡ºåŽ»ï¼Œç„¶åŽé‡æ–°å‘é€ä¸€æ¡ï¼Œç»“æžœç¬¬ä¸€æ¡æ¶ˆæ¯çªç„¶åˆå¥½äº†ï¼Œé‚£ä¹ˆå°±ä¼šé‡å¤å‘ä¸¤è·³ï¼Œå¯¹äºŽç”¨æˆ·æ¥è¯´ï¼Œåªä¸‹ä¸€æ¬¡å•ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸‹äº†å¤šæ¬¡è®¢å•ã€‚ç½‘ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯æ˜¯åˆ›å»ºä¸€å¼ è¡¨ï¼Œå¦‚æžœæ˜¯é‡å¤çš„è®¢å•å·ï¼Œå°±ä¸å¯èƒ½åˆ›å»ºå¤šæ¬¡äº†ã€‚è¿˜æœ‰ä¸€ç§å¯èƒ½æ–¹æ¡ˆæ˜¯ç”¨åˆ†å¸ƒå¼é”å¯¹è¯¥è®¢å•å·é”ä½ä¸€æ®µæ—¶é—´ï¼Œç”±äºŽåªæ˜¯é”ä½è®¢å•å·ï¼Œæ‰€ä»¥ä¸å½±å“æ€§èƒ½ï¼Œåœ¨è¿™ä¸€æ®µæ—¶é—´å†…æ˜¯ä¸å¯ä»¥å†æ”¾åŒä¸€ä¸ªè®¢å•å·çš„è¯·æ±‚è¿›æ¥ã€‚ å¯¹äºŽMQæ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œåªèƒ½æ˜¯è®¢é˜…æ¨¡å¼äº†ã€‚æ¶ˆæ¯å‘å‡ºåŽ»ä¹‹åŽï¼Œæ¶ˆè´¹ç«¯ç»™MQå›žå¤ä¸€ä¸ªæŽ¥æ”¶åˆ°çš„ä¿¡æ¯ï¼ŒMQæœ¬æ¬¡æ¶ˆè´¹æˆåŠŸï¼Œç»™è®¢é˜…è€…ä¸€ä¸ªå›žå¤ã€‚ å¯¹äºŽå…¨å±€å”¯ä¸€IDç”Ÿæˆï¼Œè¿™é‡Œç”¨çš„æ˜¯é›ªèŠ±ç®—æ³•ï¼Œå…·ä½“ä»‹ç»å¯ä»¥çœ‹æˆ‘çš„ç¬”è®° å¯¹äºŽåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå…¶å®žå¹¶æ²¡æœ‰çœŸæ­£å¤„ç†ï¼Œå¯¹äºŽæ•°æ®åº“æ‰£å‡åº“å­˜å’Œæ•°æ®åº“æ’å…¥è®¢å•ï¼Œä»–ä»¬åœ¨ä¸åŒçš„æ•°æ®åº“ï¼Œå»–å¸ˆå…„æ¯”è¾ƒå€¾å‘çš„æ–¹å¼æ˜¯ï¼š è¿™ä¸€åˆ‡çš„åŸºç¡€è¿˜æ˜¯éœ€è¦æœ‰ä¸€ä¸ªå¯é çš„æ¶ˆæ¯æœåŠ¡ï¼Œç¡®ä¿æ¶ˆæ¯è¦èƒ½é€è¾¾ã€‚ é’ˆå¯¹redisé¢„å‡åº“å­˜å­˜åœ¨çš„å¹¶å‘é—®é¢˜ï¼Œè¿™é‡Œçš„æ€è·¯æ˜¯ç”¨lua+redisï¼Œåœ¨é¢„å‡ä¹‹å‰åˆ¤æ–­åº“å­˜æ˜¯å¦å¤Ÿï¼Œè¿™ä¸¤ä¸ªæ“ä½œè¦åœ¨ä¸€ä¸ªåŽŸå­æ“ä½œé‡Œé¢æ‰è¡Œï¼Œluaæ°å¥½å¯ä»¥å®žçŽ°åŽŸå­æ€§ã€é¡ºåºæ€§åœ°æ“ä½œã€‚ æ”¯ä»˜æ¨¡å— è¿™é‡Œå¯¹æŽ¥çš„æ˜¯æ”¯ä»˜å®-æ‰«ç æ”¯ä»˜ï¼Œç”¨åˆ°æ˜¯æ”¯ä»˜å®æ²™ç®±çŽ¯å¢ƒã€‚æ”¯ä»˜çš„æ‰«ç æ”¯ä»˜è¯¦ç»†æµç¨‹åœ¨è¿™é‡ŒèŠä¸€èŠå“ˆã€‚ å•†æˆ·å‰å°å°†å•†å“å‚æ•°å‘é€è‡³å•†æˆ·åŽå°ï¼Œå•†æˆ·åŽå°ç”Ÿæˆå†…éƒ¨è®¢å•å·å¹¶ç”¨äºŽè¯·æ±‚æ”¯ä»˜å¹³å°åˆ›å»ºé¢„ä¸‹å•ï¼Œæ”¯ä»˜å¹³å°åˆ›å»ºå®Œé¢„è®¢å•åŽå°†è®¢å•äºŒç»´ç ä¿¡æ¯è¿”è¿˜ç»™å•†æˆ·ï¼Œæ­¤æ—¶ç”¨æˆ·å³å¯æ‰«å–äºŒç»´ç è¿›è¡Œä»˜æ¬¾æ“ä½œã€‚ å†…éƒ¨è®¢å•å·ï¼šè¿™æ˜¯ç›¸å¯¹äºŽæ”¯ä»˜å®å¹³å°è€Œè¨€çš„ï¼Œè¿™ä¸ªè®¢å•å·æ˜¯æˆ‘ä»¬å•†åŸŽè‡ªå·±ç”Ÿæˆçš„ï¼Œå¯¹äºŽæˆ‘ä»¬å•†åŸŽæ¥è¯´æ˜¯å†…éƒ¨è®¢å•å·ï¼Œä½†æ˜¯å¯¹äºŽæ”¯ä»˜å®æ¥è¯´æ˜¯å¤–éƒ¨è®¢å•å·ã€‚ å°†ä¸€ç³»åˆ—çš„æ•°æ®æŒ‰ç…§æ”¯ä»˜å®çš„è¦æ±‚å‘é€ç»™æ”¯ä»˜å®å¹³å°ï¼ŒåŒ…æ‹¬å•†å“ä¿¡æ¯ï¼Œç”Ÿæˆçš„éªŒç­¾signï¼Œå…¬é’¥ï¼›æ”¯ä»˜å®åŽ»å°†signè§£å¯†ï¼Œè¿›è¡Œå•†å“çš„å„ç§ä¿¡æ¯æ ¡éªŒã€‚æ ¡éªŒé€šè¿‡ï¼ŒåŒæ­¥è¿”å›žäºŒç»´ç ä¸²ã€‚ æ”¯ä»˜ä¸šåŠ¡æµç¨‹å›¾ï¼š åœ¨èŽ·å–æ”¯ä»˜çš„äºŒç»´ç ä¸²ä¹‹åŽï¼Œç”¨å·¥å…·åŒ…å°†å…¶è½¬æ¢æœªäºŒç»´ç å±•ç¤ºç»™ç”¨æˆ·æ‰«ç ã€‚ ç”¨æˆ·æ‰«ç åŽï¼Œä¼šæ”¶åˆ°ç¬¬ä¸€æ¬¡æ”¯ä»˜å®çš„å›žè°ƒï¼Œå±•ç¤ºè¦æ”¯ä»˜çš„é‡‘é¢ï¼Œå•†å“ä¿¡æ¯ç­‰ã€‚ ç”¨æˆ·è¾“å…¥å¯†ç æˆåŠŸåŽï¼Œæ­£å¸¸æƒ…å†µä¼šæ”¶åˆ°æ”¯ä»˜å®çš„ç¬¬äºŒæ¬¡å›žè°ƒï¼Œå³æ”¯ä»˜æˆåŠŸä¿¡æ¯ã€‚ ä½†æ˜¯ä¹Ÿå¯èƒ½ä¼šç”±äºŽç½‘ç»œç­‰åŽŸå› ï¼Œè¿Ÿè¿Ÿæ”¶ä¸åˆ°æ”¯ä»˜å®çš„å›žè°ƒï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸»åŠ¨å‘èµ·è½®è¯¢åŽ»æŸ¥çœ‹æ”¯ä»˜çŠ¶æ€ã€‚ åœ¨æ”¯ä»˜æˆåŠŸä¹‹åŽï¼ŒæŽ¥æ”¶å›žè°ƒçš„æŽ¥å£è¦è®°å¾—è¿”å›žsuccesså‘Šè¯‰æ”¯ä»˜å®æˆ‘å·²ç»æ”¶åˆ°ä½ çš„å›žè°ƒäº†ï¼Œä¸è¦å†é‡å¤å‘ç»™æˆ‘äº†ã€‚æŽ¥æ”¶å›žè°ƒçš„æŽ¥å£ä¹Ÿè¦åšå¥½åŽ»é™¤é‡å¤æ¶ˆæ¯çš„é€»è¾‘ã€‚ è¿™ä¸ªæµç¨‹æ˜¯å¤šä¹ˆåœ°ç®€å•è€Œç†æ‰€å½“ç„¶ï¼ å¯¹åº”äºŽä»£ç å±‚é¢ï¼Œå…¶å®žå°±æ˜¯ä¸¤ä¸ªæŽ¥å£ï¼Œä¸€ä¸ªæ˜¯ç”¨æˆ·ç‚¹å‡»åŽ»æ”¯ä»˜æŒ‰é’®ï¼Œæ­¤æ—¶å‘èµ·é¢„ä¸‹å•ï¼Œå±•ç¤ºä»˜æ¬¾äºŒç»´ç ï¼Œå¦ä¸€ä¸ªæ˜¯æŽ¥æ”¶æ”¯ä»˜å®å›žè°ƒï¼š é¢„ä¸‹å•ï¼š æŽ¥æ”¶æ”¯ä»˜å®æ”¯ä»˜çŠ¶æ€å›žè°ƒï¼š é¡¹ç›®è¿›å±• [x] 2018/12/31 å®Œæˆäº†èšåˆå·¥ç¨‹çš„åˆ›å»ºã€EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒã€spring cloud config+gitHub+spring cloud busï¼ˆrabbitMQï¼‰å®žçŽ°é…ç½®è‡ªåŠ¨åˆ·æ–°â€“v1.0 [x] 2018/12/31 å°†Eurekaæ³¨å†Œä¸­å¿ƒ(å•æœº)å’Œé…ç½®ä¸­å¿ƒéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ¯”è¾ƒå›ºå®šï¼Œæ‰€ä»¥å…ˆéƒ¨ç½²ä¸ŠåŽ»ï¼Œä»¥åŽæœ¬åœ°å°±ç›´æŽ¥ç”¨è¿™ä¸¤ä¸ªå³å¯ï¼Œå¯¹é…ç½®è¿›è¡Œäº†ä¸€ç‚¹ç‚¹ä¿®æ”¹ [ ] 2018/12/31 å…³äºŽé…ç½®çš„è‡ªåŠ¨åˆ·æ–°ï¼Œç”¨postmanå‘é€postè¯·æ±‚æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ç”¨github webhookä¸è¡Œï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™ä¸ªç‰ˆæœ¬çš„é—®é¢˜ [x] 2018/12/31 ç”¨æˆ·æ¨¡å—çš„é€»è¾‘å®žçŽ°,é¦–å…ˆå¢žåŠ äº†ä¸€äº›pomæ–‡ä»¶çš„æ”¯æŒï¼Œæ•´åˆmybatisï¼Œæµ‹è¯•æ•°æ®åº“éƒ½é€šè¿‡ï¼Œä¸‹é¢å°±å¯ä»¥çœŸæ­£åŽ»å®žçŽ°ä¸šåŠ¡ä»£ç äº† [x] 2019/1/1 å®Œæˆç”¨æˆ·æ³¨å†Œã€ç™»é™†ã€æ ¡éªŒç”¨æˆ·åé‚®ç®±æœ‰æ•ˆæ€§ã€æŸ¥çœ‹ç™»é™†ç”¨æˆ·ä¿¡æ¯ã€æ ¹æ®ç”¨æˆ·ååŽ»æ‹¿åˆ°å¯¹åº”çš„é—®é¢˜ã€æ ¡éªŒç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€é‡ç½®å¯†ç è¿™ä¸ªå‡ ä¸ªæŽ¥å£ï¼Œåœ¨æ³¨å†Œè¿™ä¸ªæŽ¥å£ï¼Œå¢žåŠ ä¸€ä¸ªZKåˆ†å¸ƒå¼é”æ¥é˜²æ­¢åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å‡ºçŽ°ç”¨æˆ·åæˆ–é‚®ç®±é‡å¤é—®é¢˜ [x] 2019/1/2 ä¸Šåˆå®Œæˆé—¨æˆ·ç”¨æˆ·æ¨¡å—æ‰€æœ‰æŽ¥å£â€“v2.0 [x] 2019/1/2 ä¸‹åˆå®Œæˆå“ç±»ç®¡ç†æ¨¡å—ï¼Œå…³äºŽç¹ççš„èŽ·å–ç”¨æˆ·å¹¶ä¸”é‰´æƒå·¥ä½œï¼Œè¿™é‡Œå…ˆæ”¾æ¯ä¸ªæŽ¥å£é‡Œé¢å¤„ç†ï¼ŒåŽé¢æ”¾åˆ°ç½‘å…³ä¸­åŽ»å®žçŽ°â€“v3.0 [x] 2019/1/3 ä¸Šåˆå¼•å…¥ç½‘å…³æœåŠ¡ï¼Œå°†åŽå°é‡å¤çš„æƒé™æ ¡éªŒç»Ÿä¸€æ”¾åˆ°ç½‘å…³ä¸­åŽ»åšï¼Œå¹¶ä¸”åŠ äº†é™æµï¼Œè§£å†³äº†ä¸€ä¸‹è·¨åŸŸé—®é¢˜ã€‚â€“v4.0 [x] 2019/1/3 ä¸‹åˆå’Œæ™šä¸Šå®Œæˆé—¨æˆ·å’ŒåŽå°çš„å•†å“ç®¡ç†æ¨¡å—æ‰€æœ‰çš„æŽ¥å£åŠŸèƒ½ï¼Œé™¤äº†ä¸Šä¼ æ–‡ä»¶çš„ä¸¤ä¸ªæŽ¥å£æ²¡æœ‰æµ‹è¯•ä»¥å¤–ï¼Œå…¶ä»–æŽ¥å£éƒ½è¿›è¡Œäº†ç®€å•çš„æµ‹è¯•ï¼Œå…¶ä¸­è¿˜ç”¨FeignåŽ»è°ƒç”¨äº†å“ç±»æœåŠ¡æŽ¥å£â€“v5.0 [x] 2019/1/3 åˆæ­¥æŠŠè´­ç‰©è½¦æ¨¡å—å’Œæ¨¡å—å¼•å…¥ï¼Œé€šè¿‡åŸºç¡€æµ‹è¯•ï¼ŒåŽé¢åœ¨æ­¤åŸºç¡€ä¸Šç›´æŽ¥å¼€å‘ä»£ç å³å¯ï¼Œæ˜Žå¤©ä¸‹åˆçœ‹ã€Šå¤§é»„èœ‚ã€‹ï¼Œæ™šä¸Šå¸ˆé—¨èšé¤åƒç«é”…ï¼Œæ˜Žå¤©æ—©ä¸Šèµ¶ä¸€èµ¶å§ï¼Œä»Šå¤©ä»»åŠ¡ç»“æŸï¼ [x] 2019/1/4 æ•´ç†äº†æŽ¥å£æ–‡æ¡£ï¼Œå¹¶ä¸”ç”»äº†ä¸€ä¸‹è´­ç‰©è½¦æ¨¡å—çš„æµç¨‹å›¾ä»¥åŠè®¢å•æœåŠ¡çš„æµç¨‹å›¾ï¼Œé’ˆå¯¹è®¢å•æœåŠ¡ä¸­ï¼Œè®°å½•äº†éœ€è¦ä¸€äº›æ³¨æ„çš„é—®é¢˜ï¼Œå°½å¯èƒ½åœ°å®Œå–„ï¼Œæé«˜å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚å¹¶ä¸”å®Œæˆè´­ç‰©è½¦æ¨¡å—çš„controllerå±‚ã€‚ [x] 2019/1/5 å®Œæˆè´­ç‰©è½¦æ¨¡å—ï¼Œå¹¶ä¸”è¿›è¡Œäº†ç®€å•çš„æµ‹è¯•ï¼Œè¿™é‡Œè¿›è¡Œäº†ä¸¤å¤„æ”¹é€ ï¼Œä¸€ä¸ªæ˜¯åˆ¤æ–­äº†ä¸€ä¸‹æ˜¯å¦éœ€è¦åˆ¤æ–­åº“å­˜ï¼›å¦ä¸€ä¸ªæ˜¯å•†å“ä¿¡æ¯ä»Žredisä¸­å–ï¼Œå–ä¸å‡ºæ¥åˆ™è°ƒç”¨å•†å“æœåŠ¡åˆå§‹åŒ–å€¼ [x] 2019/1/5 æ”¶è´§åœ°å€ç®¡ç†æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—å°±æ˜¯ä¸ªå¢žåˆ æ”¹æŸ¥ï¼Œæ²¡å•¥ä¸œè¥¿å†™ï¼Œè¿™é‡Œå°±ä¸åŠ ç¼“å­˜äº†ã€‚ [x] 2019/1/6 å®Œæˆäº†åŽå°è®¢å•ç®¡ç†æ¨¡å—å¹¶ä¸”è¿›è¡Œäº†æµ‹è¯•ï¼Œè°ƒç”¨æ”¶è´§åœ°å€æœåŠ¡æ—¶ï¼Œå‘çŽ°æ”¶è´§åœ°å€æœåŠ¡æ— æ³•è¯»å–åˆ°cookieï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•(https://blog.csdn.net/WYA1993/article/details/84304243) æš‚æ—¶è§£å†³äº†é—®é¢˜ [x] 2019/1/6 é¢„ç½®æ‰€æœ‰å•†å“åº“å­˜åˆ°redisä¸­ï¼›é¢„ç½®æ‰€æœ‰å•†å“åˆ°redisä¸­ï¼›å¤§æ¦‚ç¡®å®šå¥½è®¢å•æœåŠ¡æ€è·¯ï¼šé¢„å‡åº“å­˜ï¼ˆredisåˆ¤æ–­åº“å­˜ï¼‰â€”å¯¹userIDå¢žåŠ åˆ†å¸ƒå¼é”é˜²æ­¢ç”¨æˆ·é‡å¤æäº¤è®¢å•â€“MQå¼‚æ­¥ä¸‹è®¢å• [x] 2019/1/6 æ–°å¢žå…¨å±€å”¯ä¸€IDç”ŸæˆæœåŠ¡ï¼Œé›ªèŠ±ç®—æ³•å®žçŽ° [x] 2019/1/7 å®Œå–„è®¢å•æœåŠ¡-è¿™ä¸€å—æ¶‰åŠè·¨åº“æ“ä½œï¼Œå¹¶ä¸”ä¸åœåœ°è°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œè„‘å­éƒ½å¿«æ™•äº†ï¼Œè¿™é‡Œé‡‡å–çš„ç­–ç•¥æ˜¯ï¼šç”¨åˆ°è´­ç‰©è½¦çš„æ—¶å€™ï¼ŒåŽ»è°ƒç”¨è´­ç‰©è½¦æœåŠ¡èŽ·å–ï¼›äº§å“è¯¦æƒ…ä»Žredisä¸­èŽ·å–ã€‚é¦–å…ˆå°†å•†å“ä»¥åŠå•†å“åº“å­˜å…¨éƒ¨ç¼“å­˜åˆ°redisä¸­ï¼Œç„¶åŽç”¨æˆ·ä¸‹å•ï¼Œå…ˆä»Žredisä¸­åˆ¤æ–­åº“å­˜ï¼Œå¤Ÿåˆ™å‡ï¼Œåˆ¤æ–­ å’Œæ‰£å‡æ”¾åœ¨luaè„šæœ¬ä¸­åŽŸå­æ‰§è¡Œï¼Œç„¶åŽMQå¼‚æ­¥å‡ºåŽ»ç”Ÿæˆè®¢å•ï¼ˆç”Ÿæˆè®¢å•ä¸»è¡¨å’Œè®¢å•è¯¦æƒ…è¡¨æ”¾åœ¨ä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼‰ï¼Œè¿™ä¸¤æ­¥æ“ä½œæˆåŠŸä¹‹åŽï¼Œå†ç”¨MQåŽ»å¼‚æ­¥åˆ é™¤è´­ç‰©è½¦ã€‚MQæ¶ˆè´¹ä¸æˆåŠŸåˆ™é‡è¯•ã€‚ å¯¹äºŽæ‰£å‡åº“å­˜è¿™ä¸€æ­¥ï¼Œæƒ³æ³•æ˜¯ç”¨å®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä¸Žredisä¸­è¿›è¡ŒåŒæ­¥ã€‚è¿™é‡Œæ˜¯æ¨¡æ‹Ÿäº†ç§’æ€åœºæ™¯ï¼Œé¢„å‡åº“å­˜+MQå¼‚æ­¥ï¼Œæäº¤è®¢å•â€“&gt;redisåˆ¤æ–­å¹¶ä¸”å‡åº“å­˜â€“&gt;è°ƒç”¨cart-serviceèŽ·å–è´­ç‰©è½¦â€“&gt;MQå¼‚æ­¥(userId,shippingId)ç”Ÿæˆè®¢å•ä¸»è¡¨å’Œè¯¦æƒ…è¡¨â€“&gt;ä¸Šé¢éƒ½æˆåŠŸï¼Œåˆ™MQå¼‚æ­¥(userId) åŽ»æ¸…é™¤è´­ç‰©è½¦ï¼Œåº“å­˜ç”¨å®šæ—¶ä»»åŠ¡åŽ»åŒæ­¥(æœªåš)ï¼Œç†æƒ³çš„åšæ³•æ˜¯ï¼šMQå¼‚æ­¥æ‰£å‡åº“å­˜ï¼Œè®¢å•æœåŠ¡è®¢é˜…æ‰£å‡åº“å­˜æ¶ˆæ¯ï¼Œä¸€æ—¦åº“å­˜æ‰£å‡æˆåŠŸï¼Œåˆ™è¿›è¡Œè®¢å•ç”Ÿæˆã€‚ [x] 2019/1/8 ç»§ç»­å®Œå–„è®¢å•æŽ¥å£ï¼Œå®Œæˆæ”¯ä»˜æœåŠ¡ï¼Œå°±ç›´æŽ¥æ”¾åœ¨è®¢å•æœåŠ¡é‡Œé¢äº†ï¼Œå› ä¸ºä¸Žè®¢å•é€»è¾‘ç´§å¯†ï¼Œå°±æ”¾åœ¨ä¸€èµ·äº†ã€‚ [x] 2019/1/8 ä½¿ç”¨äº†ä¸€ä¸‹swaggerï¼Œå‘çŽ°ä»£ç ä¾µå…¥æ¯”è¾ƒå¼ºï¼Œæ¯ä¸€ä¸ªæŽ¥å£ä¸Šé¢éƒ½è¦æ‰‹åŠ¨æ‰“ä¸Šå“åº”çš„æ³¨è§£ [x] 2019/1/8 å…³äºŽhystrixç†”æ–­ä¸Žé™çº§ï¼Œå¯ä»¥å¼•å…¥hystrixçš„ä¾èµ–ï¼Œç”¨@HystrixCommandæ³¨è§£æ¥æŽ§åˆ¶è¶…æ—¶æ—¶é—´ã€æœåŠ¡é™çº§ä»¥åŠæœåŠ¡ç†”æ–­ã€‚ä¹Ÿå¯ä»¥ç›´æŽ¥å†@FeignClientæŽ¥å£ä¸­æŒ‡å®šæœåŠ¡é™çº§çš„ç±»ï¼Œè¿™é‡Œä¸æ¼”ç¤ºäº†ï¼Œå› ä¸ºè®¾ç½®æ¯”å¦‚è¶…æ—¶æ—¶é—´ï¼Œæˆ‘è¿˜è¦é‡æ–°æµ‹è¯•ï¼Œå†™èµ·æ¥å¾ˆç®€å•ï¼Œæµ‹èµ·æ¥æœ‰ç‚¹å„¿éº»çƒ¦ [x] 2019/1/9 æœåŠ¡è·Ÿè¸ªï¼ŒæœåŠ¡ç«¯æ˜¯ç›´æŽ¥ç”¨çš„çº¿ç¨‹çš„ï¼Œåªéœ€è¦ä¸‹è½½ï¼šwget -O zipkin.jar â€˜https://search.maven.org/remote_content?g=io.zipkin.java&amp;a=zipkin-server&amp;v=LATEST&amp;c=execâ€™ï¼Œç„¶åŽnohup java -jar zipkin.jar &gt; zipkin.server.out &amp; ï¼Œå¼€æ”¾9411ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨http://ip:9411çœ‹åˆ°é¡µé¢å³å¯ã€‚ å®¢æˆ·ç«¯åªéœ€è¦æ·»åŠ ç›¸åº”ä¾èµ–å’Œé…ç½®æ–‡ä»¶å³å¯ã€‚ç”¨å®¢æˆ·ç«¯æµ‹è¯•ï¼Œå‘çŽ°æ­»æ´»ä¸å‡ºçŽ°æˆ‘çš„è¯·æ±‚ï¼Œç»è¿‡æœç´¢ï¼Œå‘çŽ°éœ€è¦å¢žåŠ spring.zipkin.sender.type= webè¿™ä¸ªé…ç½®é¡¹æ‰è¡Œ. [x] 2019/1/10 åˆæ­¥æŠŠé¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿›è¡Œæµ‹è¯•ï¼Œbugå¤šå¤šï¼Œä¿®æ”¹ä¸­â€¦ [x] 2019/1/10 æ”¹äº†ä¸€å¤©çš„bugï¼Œå…¶ä¸­ç½‘å…³çš„è¶…æ—¶æ—¶é—´ä»¥åŠfeignçš„è¶…æ—¶æ—¶é—´éƒ½è¦æ”¹å¤§ä¸€ç‚¹ï¼Œå¦åˆ™ä¼šè¶…æ—¶æŠ¥é”™ã€‚æœ€ç»ˆæˆåŠŸï¼ŒèŠ±äº†ä¸‰å°æœåŠ¡å™¨ï¼Œéƒ¨ç½²äº†11ä¸ªæœåŠ¡ã€‚åŽé¢æŠŠéƒ¨ç½²è¿‡ç¨‹å†™ä¸€ä¸‹ã€‚ [x] 2019/1/11 å°†æ³¨å†Œä¸­å¿ƒåšæˆé›†ç¾¤ï¼Œå› ä¸ºæ—©ä¸Šä¸€èµ·æ¥ï¼Œæ³¨å†Œä¸­å¿ƒæŒ‚äº†ï¼Ÿï¼Ÿï¼Ÿ [ ] 2019/1/11 dockeréƒ¨ç½²(å•†åŸŽç¬¬å››æœŸçš„æ”¹é€ ç›®æ ‡:å®¹å™¨åŒ–+å®¹å™¨ç¼–æŽ’)ï¼Œæœ¬æœŸæ”¹é€ ç»“æŸã€‚ [x] 2019/1/11 å®Œå–„readmeæ–‡æ¡£ [x] 2019/1/12 ä¸¤æ¬¡å‘çŽ°redisæ•°æ®è¢«èŽ«åå…¶å¦™æ¸…ç©ºï¼Œæˆ‘ç¡®å®šä¸æ˜¯ç¼“å­˜åˆ°æœŸï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œè®¾ç½®äº†redisçš„å¯†ç ï¼Œæ˜Žå¤©çœ‹ç¼“å­˜æ•°æ®è¿˜åœ¨ä¸åœ¨ã€‚ [x] 2019/1/14 redisæ•°æ®æ²¡æœ‰å†ä¸¢å¤±ï¼Œä¿®å¤ç”¨æˆ·æ›´æ–°ä¿¡æ¯çš„bug é¡¹ç›®å¯åŠ¨ å®‰è£…redisã€zookeeperã€mysqlã€jdkã€nginxä»¥åŠrabbitMQã€‚ å¯¹ä»£ç è¿›è¡Œmaven-packageæ“ä½œã€‚æ‰“åŒ…æˆjaråŒ…ã€‚å°†å…¶æ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼š æ‰§è¡Œnohup java -jar snailmall-user-service.8081 &gt; user-service.out &amp;åŽå°å¯åŠ¨å³å¯ã€‚ è¡¥å……ï¼šé’ˆå¯¹é…ç½®åˆ·æ–°ï¼Œä¿®æ”¹äº†githubä¿¡æ¯ï¼Œç”¨postmanè¯·æ±‚http://xxxxx:8079/actuator/bus-refresh è§¦å‘æ›´æ–°ã€‚ æœ¬æ”¹é€ æ˜¯åŸºäºŽå¿«ä¹æ…•å•†åŸŽä¸€æœŸå’Œå¿«ä¹æ…•å•†åŸŽäºŒæœŸçš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ ã€‚æ‰€ä»¥éœ€è¦åœ¨å…¶ä¸šåŠ¡åŸºç¡€ä¸Šæ”¹é€ ä¼šæ¯”è¾ƒé¡ºæ‰‹ã€‚å…³äºŽå¾®æœåŠ¡ï¼Œå°¤å…¶æ˜¯ç”µå•†ä¸­çš„ä¸€äº›å¤„ç†æ‰‹æ®µï¼Œå¾ˆå¤šæ€è·¯éƒ½æ˜¯å­¦ä¹ äºŽç å—åœ¨çº¿ä¸­åˆ†å¸ƒå¼ç”µå•†é¡¹ç›®ã€‚å†åŠ ä¸Šæ…•è¯¾ç½‘å»–å¸ˆå…„çš„spring cloudå¾®æœåŠ¡å®žè·µã€‚ å‰å°é¡¹ç›® åªè¦é˜…è¯»readmeæ–‡æ¡£å³å¯ã€‚ä»£ç ä»“åº“ä¸ºï¼šhttps://github.com/sunweiguo/snailmall-front å­¦ä¹ ä¸ä»…è¦æœ‰è¾“å…¥ï¼Œæ›´è¦æœ‰è‡ªå·±çš„è¾“å‡ºï¼Œå®žè·µæ˜¯æå‡çš„æ·å¾„ï¼]]></content>
      <tags>
        <tag>å®žæˆ˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢è¯•-è¿›ç¨‹ä¸Žçº¿ç¨‹]]></title>
    <url>%2F2019%2F01%2F19%2F%E9%9D%A2%E8%AF%95-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[éƒ½æ˜¯æ“ä½œç³»ç»Ÿç®¡ç†çš„å¯¹è±¡ï¼Œæ¯”è¾ƒå®¹æ˜“æ··æ·†ï¼Œä½†æ˜¯åˆæ˜¯ä¸¤æ ·å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œå› æ­¤åŒºåˆ«å¾ˆå¤šã€‚ä»Žä»–ä»¬åŒºåˆ«ä¹Ÿå¯ä»¥å‘æ•£å‡ºå¾ˆå¤šå…³äºŽæ“ä½œç³»ç»Ÿæ¯”è¾ƒé‡è¦çš„çŸ¥è¯†ã€‚æ‰€ä»¥é¢è¯•æ¯”è¾ƒå¸¸é—®ã€‚ 1. è¿›ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ ç¿»äº†ä¸€ä¸‹ä¹¦ï¼šã€Šæ“ä½œç³»ç»Ÿæ¦‚å¿µã€‹ç¬¬ä¸‰ç« ä¸­æåŠäº†è¿›ç¨‹çš„æ¦‚å¿µã€‚ä»–æ˜¯è¿™æ ·è¯´çš„ï¼š è¿›ç¨‹æ˜¯æ‰§è¡Œä¸­çš„ç¨‹åºï¼Œè¿™æ˜¯ä¸€ç§éžæ­£å¼è¯´æ³•ã€‚è¿›ç¨‹ä¸åªæ˜¯ç¨‹åºä»£ç ï¼ˆä»£ç å—ï¼‰ï¼Œè¿›ç¨‹è¿˜åŒ…å«äº†å½“å‰æ´»åŠ¨ï¼Œé€šè¿‡ç¨‹åºè®¡æ•°å™¨çš„å€¼å’Œå¤„ç†å™¨å¯„å­˜å™¨çš„å†…å®¹æ¥è¡¨ç¤ºã€‚æ­¤å¤–ï¼Œè¿›ç¨‹è¿˜åŒ…å«è¿›ç¨‹å †æ ˆæ®µï¼ˆåŒ…æ‹¬ä¸´æ—¶æ•°æ®ï¼Œå¦‚å‡½æ•°å‚æ•°ã€è¿”å›žåœ°å€å’Œå±€éƒ¨å˜é‡ï¼‰å’Œæ•°æ®æ®µï¼ˆåŒ…æ‹¬å…¨å±€å˜é‡ï¼‰ã€‚è¿›ç¨‹è¿˜å¯èƒ½åŒ…å«å †ï¼Œæ˜¯åœ¨è¿›ç¨‹è¿è¡ŒæœŸé—´åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚ ç¨‹åºæœ¬èº«ä¸æ˜¯è¿›ç¨‹ã€‚ç¨‹åºåªæ˜¯è¢«åŠ¨å®žä½“ï¼Œå¦‚å­˜å‚¨åœ¨ç£ç›˜ä¸ŠåŒ…å«ä¸€ç³»åˆ—æŒ‡ä»¤çš„æ–‡ä»¶å†…å®¹ã€‚è€Œè¿›ç¨‹æ˜¯æ´»åŠ¨å®žä½“ï¼Œå®ƒæœ‰ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨æ¥è¡¨ç¤ºä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„å‘½ä»¤å’Œç›¸å…³èµ„æºé›†åˆã€‚å½“ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶è¢«è£…å…¥å†…å­˜æ—¶ï¼Œä¸€ä¸ªç¨‹åºæ‰èƒ½æˆä¸ºè¿›ç¨‹ã€‚ æ€»ç»“ä¸€ä¸‹è¿›ç¨‹æ˜¯ä»€ä¹ˆï¼Œæ˜¯æˆ‘ä¸ªäººç†è§£ï¼šå®ƒæ˜¯ä¸€ä¸ªæ´»åŠ¨å®žä½“ï¼Œè¿è¡Œåœ¨å†…å­˜ä¸Šã€‚ç„¶åŽå®ƒå ç”¨å¾ˆå¤šç‹¬ç«‹çš„èµ„æºï¼Œæ¯”å¦‚ï¼šå†…å­˜èµ„æºã€ç¨‹åºè¿è¡Œè‚¯å®šæ¶‰åŠCPUè®¡ç®—ã€å ç”¨çš„ç«¯å£èµ„æºï¼ˆå…¬å…±çš„ï¼‰ã€æ–‡ä»¶èµ„æºï¼ˆå…¬å…±çš„ï¼‰ã€ç½‘ç»œèµ„æºï¼ˆå…¬å…±çš„ï¼‰ç­‰ç­‰ç­‰ã€‚è¦æƒ³æ‰§è¡Œè¿™ä¸ªè¿›ç¨‹ï¼Œé¦–å…ˆè¦æœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæœ‰äº†è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜è¦æœ‰ç›¸åº”çš„æ‰§è¡Œéœ€è¦çš„èµ„æºã€‚æ‰€ä»¥å°†å¯æ‰§è¡Œæ–‡ä»¶ã€å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ã€å†…å­˜ç­‰èµ„æºç»“åˆèµ·æ¥ï¼Œæ‰æ˜¯ä¸€ä¸ªçœŸæ­£çš„è¿›ç¨‹ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸€å¥è¯ï¼šè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚ è¿›ç¨‹ä¸­çš„å†…å­˜ç©ºé—´ï¼ˆè™½ç„¶ç©ºé—´å¤§å°éƒ½ä¸€æ ·ï¼Œä¸‹æ–‡ä¼šè¯´æ˜Žï¼‰æ˜¯ç‹¬ç«‹çš„ï¼Œå¦åˆ™å°±ä¼šå‡ºçŽ°ä¸€ç§æƒ…å†µï¼šä¿®æ”¹è‡ªå·±ç¨‹åºä¸­çš„æŸä¸ªæŒ‡é’ˆå°±å¯ä»¥æŒ‡å‘å…¶ä»–ç¨‹åºä¸­çš„åœ°å€ï¼Œç„¶åŽæ‹¿åˆ°é‡Œé¢çš„æ•°æ®ï¼Œå²‚ä¸æ˜¯å¾ˆææ€–çš„åœºæ™¯ï¼Ÿ å¦‚ä¸Šå›¾ï¼Œè¿›ç¨‹ä¸­åŒ…å«äº†çº¿ç¨‹ã€‚æ“ä½œç³»ç»Ÿå¯èƒ½ä¼šè¿è¡Œå‡ ç™¾ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹ä¸­ä¹Ÿå¯èƒ½æœ‰å‡ ä¸ªåˆ°å‡ ç™¾ä¸ªçº¿ç¨‹åœ¨è¿è¡Œã€‚ æ–‡ä»¶å’Œç½‘ç»œå¥æŸ„æ˜¯æ‰€æœ‰è¿›ç¨‹å…±äº«çš„ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥åŽ»æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶ï¼ŒåŽ»æŠ¢å åŒä¸€ä¸ªç½‘ç»œç«¯å£ã€‚ å›¾ä¸­è¿˜æœ‰ä¸ªå†…å­˜ã€‚è¿™ä¸ªå†…å­˜ä¸æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„å†…å­˜æ¡ï¼Œå³ç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯è™šæ‹Ÿå†…å­˜ï¼Œæ˜¯è¿›ç¨‹ç‹¬ç«‹çš„ï¼Œå¤§å°ä¸Žå®žé™…ç‰©ç†å†…å­˜æ— å…³ã€‚ 2. å¯»å€ç©ºé—´ æ¯”å¦‚8086åªæœ‰20æ ¹åœ°å€çº¿ï¼Œé‚£ä¹ˆå®ƒçš„å¯»å€ç©ºé—´å°±æ˜¯1MBï¼Œæˆ‘ä»¬å°±è¯´8086èƒ½æ”¯æŒ1MBçš„ç‰©ç†å†…å­˜ï¼ŒåŠæ—¶æˆ‘ä»¬å®‰è£…äº†128Mçš„å†…å­˜æ¡åœ¨æ¿å­ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿåªèƒ½è¯´8086æ‹¥æœ‰1MBçš„ç‰©ç†å†…å­˜ç©ºé—´ã€‚ ä»¥å‰å«å–çš„32ä½çš„æœºå­ï¼Œ32ä½æ˜¯æŒ‡å¯»å€ç©ºé—´ä¸º2çš„32æ¬¡æ–¹ã€‚32ä½çš„386ä»¥ä¸ŠCPUå°±å¯ä»¥æ”¯æŒæœ€å¤§4GBçš„ç‰©ç†å†…å­˜ç©ºé—´äº†ã€‚ 3. ä¸ºä»€ä¹ˆä¼šæœ‰è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„åŒºåˆ« æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œä»–æ‰€éœ€çš„å†…å­˜æ˜¯æœ‰å¯èƒ½å¤§äºŽå†…å­˜æ¡å®¹é‡ä¹‹å’Œçš„ï¼Œæ¯”å¦‚ä½ çš„å†…å­˜æ¡æ˜¯256Mï¼Œä½ çš„ç¨‹åºå´è¦åˆ›å»ºä¸€ä¸ª2Gçš„æ•°æ®åŒºï¼Œé‚£ä¹ˆä¸æ˜¯æ‰€æœ‰æ•°æ®éƒ½èƒ½ä¸€èµ·åŠ è½½åˆ°å†…å­˜ï¼ˆç‰©ç†å†…å­˜ï¼‰ä¸­ï¼ŒåŠ¿å¿…æœ‰ä¸€éƒ¨åˆ†æ•°æ®è¦æ”¾åˆ°å…¶ä»–ä»‹è´¨ä¸­ï¼ˆæ¯”å¦‚ç¡¬ç›˜ï¼‰ï¼Œå¾…è¿›ç¨‹éœ€è¦è®¿é—®é‚£éƒ¨åˆ†æ•°æ®æ—¶ï¼Œåœ¨é€šè¿‡è°ƒåº¦è¿›å…¥ç‰©ç†å†…å­˜ã€‚ æ‰€ä»¥ï¼Œè™šæ‹Ÿå†…å­˜æ˜¯è¿›ç¨‹è¿è¡Œæ—¶æ‰€æœ‰å†…å­˜ç©ºé—´çš„æ€»å’Œï¼Œå¹¶ä¸”å¯èƒ½æœ‰ä¸€éƒ¨åˆ†ä¸åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œè€Œç‰©ç†å†…å­˜å°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€äº†è§£çš„å†…å­˜æ¡ã€‚ å…³é”®çš„æ˜¯ä¸è¦æŠŠè™šæ‹Ÿå†…å­˜è·ŸçœŸå®žçš„æ’åœ¨ä¸»æ¿ä¸Šçš„å†…å­˜æ¡ç›¸æŒ‚é’©ï¼Œè™šæ‹Ÿå†…å­˜å®ƒæ˜¯â€œè™šæ‹Ÿçš„â€ä¸å­˜åœ¨ï¼Œå‡çš„å•¦ï¼Œå®ƒåªæ˜¯å†…å­˜ç®¡ç†çš„ä¸€ç§æŠ½è±¡ï¼ 4. è™šæ‹Ÿå†…å­˜åœ°å€å’Œç‰©ç†å†…å­˜åœ°å€æ˜¯å¦‚ä½•æ˜ å°„å‘¢ å‡è®¾ä½ çš„è®¡ç®—æœºæ˜¯32ä½ï¼Œé‚£ä¹ˆå®ƒçš„åœ°å€æ€»çº¿æ˜¯32ä½çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒå¯ä»¥å¯»å€0 ~ 0xFFFFFFFFï¼ˆ4Gï¼‰çš„åœ°å€ç©ºé—´ï¼Œä½†å¦‚æžœä½ çš„è®¡ç®—æœºåªæœ‰256Mçš„ç‰©ç†å†…å­˜0x~0x0FFFFFFFï¼ˆ256Mï¼‰ï¼ŒåŒæ—¶ä½ çš„è¿›ç¨‹äº§ç”Ÿäº†ä¸€ä¸ªä¸åœ¨è¿™256Måœ°å€ç©ºé—´ä¸­çš„åœ°å€ï¼Œé‚£ä¹ˆè®¡ç®—æœºè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿå›žç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œå…ˆè¯´æ˜Žè®¡ç®—æœºçš„å†…å­˜åˆ†é¡µæœºåˆ¶ã€‚ è®¡ç®—æœºä¼šå¯¹è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´ï¼ˆ32ä½ä¸º4Gï¼‰åˆ†é¡µäº§ç”Ÿé¡µï¼ˆpageï¼‰ï¼Œå¯¹ç‰©ç†å†…å­˜åœ°å€ç©ºé—´ï¼ˆå‡è®¾256Mï¼‰åˆ†é¡µäº§ç”Ÿé¡µå¸§ï¼ˆpage frameï¼‰ï¼Œè¿™ä¸ªé¡µå’Œé¡µå¸§çš„å¤§å°æ˜¯ä¸€æ ·å¤§çš„ï¼Œæ‰€ä»¥å‘¢ï¼Œåœ¨è¿™é‡Œï¼Œè™šæ‹Ÿå†…å­˜é¡µçš„ä¸ªæ•°åŠ¿å¿…è¦å¤§äºŽç‰©ç†å†…å­˜é¡µå¸§çš„ä¸ªæ•°ã€‚ åœ¨è®¡ç®—æœºä¸Šæœ‰ä¸€ä¸ªé¡µè¡¨ï¼ˆpage tableï¼‰ï¼Œå°±æ˜¯æ˜ å°„è™šæ‹Ÿå†…å­˜é¡µåˆ°ç‰©ç†å†…å­˜é¡µçš„ï¼Œæ›´ç¡®åˆ‡çš„è¯´æ˜¯é¡µå·åˆ°é¡µå¸§å·çš„æ˜ å°„ï¼Œè€Œä¸”æ˜¯ä¸€å¯¹ä¸€çš„æ˜ å°„ã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œè™šæ‹Ÿå†…å­˜é¡µçš„ä¸ªæ•° &gt; ç‰©ç†å†…å­˜é¡µå¸§çš„ä¸ªæ•°ï¼Œå²‚ä¸æ˜¯æœ‰äº›è™šæ‹Ÿå†…å­˜é¡µçš„åœ°å€æ°¸è¿œæ²¡æœ‰å¯¹åº”çš„ç‰©ç†å†…å­˜åœ°å€ç©ºé—´ï¼Ÿ ä¸æ˜¯çš„ï¼Œæ“ä½œç³»ç»Ÿæ˜¯è¿™æ ·å¤„ç†çš„ã€‚æ“ä½œç³»ç»Ÿæœ‰ä¸ªé¡µé¢å¤±æ•ˆï¼ˆpage faultï¼‰åŠŸèƒ½ã€‚æ“ä½œç³»ç»Ÿæ‰¾åˆ°ä¸€ä¸ªæœ€å°‘ä½¿ç”¨çš„é¡µå¸§ï¼Œè®©ä»–å¤±æ•ˆï¼Œå¹¶æŠŠå®ƒå†™å…¥ç£ç›˜ï¼ŒéšåŽä»Žç£ç›˜ä¸­æŠŠæŠŠéœ€è¦è®¿é—®çš„æ•°æ®æ‰€åœ¨çš„é¡µæ”¾åˆ°æœ€å°‘ä½¿ç”¨çš„é¡µå¸§ä¸­ï¼Œå¹¶ä¿®æ”¹é¡µè¡¨ä¸­çš„æ˜ å°„ï¼ˆå³ä¿®æ”¹é¡µå·æŒ‡å‘å½“å‰é¡µå¸§ï¼‰ï¼Œè¿™æ ·å°±ä¿è¯æ‰€æœ‰çš„é¡µéƒ½æœ‰è¢«è°ƒåº¦çš„å¯èƒ½äº†ã€‚è¿™å°±æ˜¯å¤„ç†è™šæ‹Ÿå†…å­˜åœ°å€åˆ°ç‰©ç†å†…å­˜çš„æ­¥éª¤ã€‚ è‡³äºŽé‡Œé¢å¦‚ä½•å®žçŽ°çš„ç»†èŠ‚ï¼Œæˆ‘æ²¡æœ‰è¿‡å¤šåŽ»æŽ¢ç©¶ã€‚ 5. ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜åœ°å€å’Œç‰©ç†å†…å­˜åœ°å€ è™šæ‹Ÿå†…å­˜åœ°å€ç”±é¡µå·å’Œåç§»é‡ç»„æˆã€‚é¡µå·å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„ã€‚åç§»é‡å°±æ˜¯æˆ‘ä¸Šé¢è¯´çš„é¡µï¼ˆæˆ–è€…é¡µå¸§ï¼‰çš„å¤§å°ï¼Œå³è¿™ä¸ªé¡µï¼ˆæˆ–è€…é¡µå¸§ï¼‰åˆ°åº•èƒ½å­˜å¤šå°‘æ•°æ®ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€ä¸ªè™šæ‹Ÿåœ°å€å®ƒçš„é¡µå·æ˜¯4ï¼Œåç§»é‡æ˜¯20ï¼Œé‚£ä¹ˆä»–çš„å¯»å€è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šé¦–å…ˆåˆ°é¡µè¡¨ä¸­æ‰¾åˆ°é¡µå·4å¯¹åº”çš„é¡µå¸§å·ï¼ˆæ¯”å¦‚ä¸º8ï¼‰ï¼Œå¦‚æžœæ‰¾ä¸åˆ°å¯¹åº”çš„é¡µæ¡¢ï¼Œåˆ™ç”¨å¤±æ•ˆæœºåˆ¶è°ƒå…¥é¡µã€‚å¦‚æžœå­˜åœ¨ï¼ŒæŠŠé¡µå¸§å·å’Œåç§»é‡ä¼ ç»™MMUï¼ˆCPUçš„å†…å­˜ç®¡ç†å•å…ƒï¼‰ç»„æˆä¸€ä¸ªç‰©ç†ä¸ŠçœŸæ­£å­˜åœ¨çš„åœ°å€ï¼ŒæŽ¥ç€å°±æ˜¯è®¿é—®ç‰©ç†å†…å­˜ä¸­çš„æ•°æ®äº†ã€‚ 6. çº¿ç¨‹é‡Œé¢æœ‰ä»€ä¹ˆ å†™åˆ°è¿™é‡Œï¼Œå¥½åƒè¿˜ä¸Žæœ¬æ ‡é¢˜æ— å…³ï¼Œå³è¿›ç¨‹å’Œçº¿ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»å’ŒåŒºåˆ«ç­‰ã€‚ä½†æ˜¯æˆ‘ä»¬è¦çŸ¥é“ï¼Œé¢è¯•æˆ–è€…å­¦ä¹ ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œä¸æ˜¯ä¸ºäº†å­¦ä¹ è¿™ä¸ªåŒºåˆ«è€Œå­¦ä¹ ï¼Œ æˆ‘ä»¬åº”è¯¥å­¦ä¹ ä¸ºä»€ä¹ˆæœ‰è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œæœ‰äº†è¿›ç¨‹è¿˜éœ€è¦çº¿ç¨‹å—ï¼Ÿæœ‰äº†çº¿ç¨‹è¿˜è¦è¿›ç¨‹å—ï¼Ÿä½ è¯´è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„å•ä½ï¼Œåˆ†é…çš„æ˜¯ä»€ä¹ˆèµ„æºå‘¢ï¼Ÿè¿›ç¨‹ä¸­çš„å†…å­˜æ˜¯å’‹ç®¡ç†çš„å‘¢ï¼Ÿè™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜åœ°å€å’Œç‰©ç†å†…å­˜åœ°å€ï¼Ÿç­‰ç­‰ç­‰ï¼Œæ‰€ä»¥é¢è¯•æ˜¯åƒå˜ä¸‡åŒ–çš„ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬å°½å¯èƒ½åœ°å¤šé—®è‡ªå·±å‡ ä¸ªä¸ºä»€ä¹ˆï¼Œç„¶åŽä»Žä¸ºä»€ä¹ˆå¼€å§‹åŽ»é€ä¸ªå‡»ç ´ï¼Œå½¢æˆä¸€ä¸ªä½“ç³»ã€‚ è¯´è¯´è¿™ä¸ªæ ˆï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ‰§è¡Œç¨‹åºä»Žä¸»ç¨‹åºå…¥å£è¿›å…¥å¼€å§‹ï¼Œå¯èƒ½ä¼šè°ƒç”¨å¾ˆå¤šçš„å‡½æ•°ï¼Œé‚£ä¹ˆè¿™äº›å‡½æ•°çš„å‚æ•°å’Œè¿”å›žåœ°å€éƒ½ä¼šè¢«åŽ‹å…¥æ ˆä¸­ï¼ŒåŒ…æ‹¬è¿™äº›å‡½æ•°ä¸­å®šä¹‰çš„ä¸´æ—¶å±€éƒ¨å˜é‡éƒ½ä¼šåŽ‹å…¥æ ˆä¸­ï¼Œéšç€å‡½æ•°çš„æ‰§è¡Œå®Œæ¯•ï¼Œå†é€å±‚åœ°å¼¹å‡ºæ ˆï¼Œå›žåˆ°ä¸»å‡½æ•°è¿è¡Œçš„åœ°æ–¹ï¼Œå†ç»§ç»­æ‰§è¡Œã€‚ PC(program counter)ï¼Œå°±æ˜¯ç¨‹åºè®¡æ•°å™¨ï¼ŒæŒ‡å‘çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œçš„åœ°å€ã€‚ ç”±æ­¤å¯è§ï¼Œæ“ä½œç³»ç»Ÿè¿è¡Œçš„å…¶å®žæ˜¯ä¸€ä¸ªä¸€ä¸ªçš„çº¿ç¨‹ï¼Œè€Œè¿›ç¨‹åªæ˜¯ä¸€ä¸ªéš”ç¦»èµ„æºçš„å®¹å™¨ã€‚ ä¸Šé¢è¯´åˆ°ï¼ŒPCæ˜¯æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œçš„åœ°å€ã€‚è€Œè¿™äº›æŒ‡ä»¤æ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„ã€‚ æˆ‘ä»¬çš„è®¡ç®—æœºå¤§å¤šæ•°æ˜¯å­˜å‚¨ç¨‹åºåž‹çš„ã€‚å°±æ˜¯è¯´æ•°æ®å’Œç¨‹åºæ˜¯åŒæ—¶å­˜å‚¨åœ¨åŒä¸€ç‰‡å†…å­˜é‡Œçš„ã€‚ æ‰€ä»¥æˆ‘ä»¬ç»å¸¸ä¼šå¬åˆ°ä¸€ä¸ªæ¼æ´žå«åšâ€œç¼“å†²åŒºæº¢å‡ºâ€ï¼šæ¯”å¦‚æœ‰ä¸€ä¸ªåœ°æ–¹è®©ç”¨æˆ·è¾“å…¥ç”¨æˆ·åï¼Œä½†æ˜¯é»‘å®¢è¾“å…¥å¾ˆé•¿å¾ˆé•¿çš„å­—ç¬¦ä¸²è¿›åŽ»ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å°±ä¼šè¶…å‡ºå­˜æ”¾è¿™ä¸ªç”¨æˆ·åçš„ä¸€ç‰‡ç¼“å†²åŒºï¼Œè€Œç›´æŽ¥ä¾µå…¥åˆ°å­˜æ”¾ç¨‹åºçš„åœ°æ–¹ï¼Œé‚£ä¹ˆé»‘å®¢å°±å¯ä»¥æ¤å…¥ç¨‹åºåŽ»æ‰§è¡Œã€‚è§£å†³æ–¹æ¡ˆå°±æ˜¯é™åˆ¶è¾“å…¥çš„ç”¨æˆ·åé•¿åº¦ï¼Œä¸è¦è¶…è¿‡ç¼“å†²åŒºå¤§å°ã€‚ è¿˜æœ‰ä¸€å—æ˜¯TLS(thread local storage)ï¼Œæˆ‘ä»¬çŸ¥é“è¿›ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„çº¿ç¨‹èƒ½ä¸èƒ½ä¹Ÿæœ‰ä¸€å°å—å±žäºŽè‡ªå·±çš„å†…å­˜åŒºåŸŸå‘¢ï¼Ÿ è¿™ä¸ªä¸œè¥¿ï¼Œå…¶å®žå¾ˆç®€å•ï¼Œå°±æ˜¯è¯´ï¼Œæ¯”å¦‚newä¸€ä¸ªå¯¹è±¡ï¼Œå¾€å¾€æ˜¯åœ¨å †ä¸­å¼€è¾Ÿç©ºé—´çš„ï¼Œä½†æ˜¯çŽ°åœ¨çš„æƒ…å†µæ˜¯ï¼šåœ¨ä¸€ä¸ªå‡½æ•°å†…ï¼Œnewå‡ºæ¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸å¼•ç”¨å¤–éƒ¨å¯¹è±¡ï¼Œä¹Ÿä¸ä¼šè¢«å¤–éƒ¨å¼•ç”¨ï¼Œæ˜¯çº¯ç²¹å±žäºŽè¿™ä¸ªå‡½æ•°æ®µï¼Œå¯ä»¥ç†è§£ä¸ºè¿™ä¸ªå¯¹è±¡æ˜¯å±žäºŽè¿™ä¸ªå‡½æ•°çš„å±€éƒ¨ä¸´æ—¶å˜é‡ã€‚ æ­¤æ—¶ï¼Œnewè¿™ä¸ªå¯¹è±¡å°±ä¸éœ€è¦å†åŽ»å †ä¸­å¼€è¾Ÿç©ºé—´äº†ï¼Œå› ä¸ºä¸€æ–¹é¢ä¸éœ€è¦å…±äº«ï¼Œå¦ä¸€æ–¹é¢æ˜¯åœ¨å †ä¸­å¼€è¾Ÿæ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œå¹¶ä¸”å¯èƒ½æœ‰å¾ˆå¤šå‡½æ•°ï¼Œè¿™ç§å±€éƒ¨å¯¹è±¡é›¶é›¶æ€»æ€»åŠ èµ·æ¥è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œåœ¨å †ä¸­å¼€è¾Ÿä¼šæµªè´¹ç©ºé—´ã€‚ æ‰€ä»¥ï¼Œèƒ½ä¸èƒ½åœ¨æ ˆä¸­å°±å¯ä»¥newå‡ºè¿™ä¸ªå¯¹è±¡ï¼Œåæ­£ç”¨å®Œå°±æ‰”ã€‚TLSå¯ä»¥æ˜¯çŽ°åœ¨è¿™ä¸ªã€‚æ ˆä¸­ç›´æŽ¥newå¤šæ–¹ä¾¿å¤šå¿«ï¼Œå› ä¸ºä¸éœ€è¦èµ°åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œè¿˜é¿å…äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¯ä»¥åŽ»æœç´¢ï¼šæ ˆä¸Šåˆ†é…å’Œé€ƒé€¸åˆ†æž 7. çº¿ç¨‹VSè¿›ç¨‹ åˆ°è¿™é‡Œï¼Œå°±æ¸…æ™°äº†å¾ˆå¤šã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å¤šå¤šå°‘å°‘ç†è§£ä»–ä»¬çš„åŒºåˆ«ã€‚ å¯ä»¥åšä¸ªç®€å•çš„æ¯”å–»ï¼Œä¾¿äºŽè®°å¿†ï¼šè¿›ç¨‹=ç«è½¦ï¼Œçº¿ç¨‹=è½¦åŽ¢ çº¿ç¨‹åœ¨è¿›ç¨‹ä¸‹è¡Œè¿›ï¼ˆå•çº¯çš„è½¦åŽ¢æ— æ³•è¿è¡Œï¼‰ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼ˆä¸€è¾†ç«è½¦å¯ä»¥æœ‰å¤šä¸ªè½¦åŽ¢ï¼‰ ä¸åŒè¿›ç¨‹é—´æ•°æ®å¾ˆéš¾å…±äº«ï¼ˆä¸€è¾†ç«è½¦ä¸Šçš„ä¹˜å®¢å¾ˆéš¾æ¢åˆ°å¦å¤–ä¸€è¾†ç«è½¦ï¼Œæ¯”å¦‚ç«™ç‚¹æ¢ä¹˜ï¼‰ åŒä¸€è¿›ç¨‹ä¸‹ä¸åŒçº¿ç¨‹é—´æ•°æ®å¾ˆæ˜“å…±äº«ï¼ˆAè½¦åŽ¢æ¢åˆ°Bè½¦åŽ¢å¾ˆå®¹æ˜“ï¼‰ è¿›ç¨‹è¦æ¯”çº¿ç¨‹æ¶ˆè€—æ›´å¤šçš„è®¡ç®—æœºèµ„æºï¼ˆé‡‡ç”¨å¤šåˆ—ç«è½¦ç›¸æ¯”å¤šä¸ªè½¦åŽ¢æ›´è€—èµ„æºï¼‰ è¿›ç¨‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼Œä¸€ä¸ªçº¿ç¨‹æŒ‚æŽ‰å°†å¯¼è‡´æ•´ä¸ªè¿›ç¨‹æŒ‚æŽ‰ï¼ˆä¸€åˆ—ç«è½¦ä¸ä¼šå½±å“åˆ°å¦å¤–ä¸€åˆ—ç«è½¦ï¼Œä½†æ˜¯å¦‚æžœä¸€åˆ—ç«è½¦ä¸Šä¸­é—´çš„ä¸€èŠ‚è½¦åŽ¢ç€ç«äº†ï¼Œå°†å½±å“åˆ°æ‰€æœ‰è½¦åŽ¢ï¼‰ è¿›ç¨‹å¯ä»¥æ‹“å±•åˆ°å¤šæœºï¼Œè¿›ç¨‹æœ€å¤šé€‚åˆå¤šæ ¸ï¼ˆä¸åŒç«è½¦å¯ä»¥å¼€åœ¨å¤šä¸ªè½¨é“ä¸Šï¼ŒåŒä¸€ç«è½¦çš„è½¦åŽ¢ä¸èƒ½åœ¨è¡Œè¿›çš„ä¸åŒçš„è½¨é“ä¸Šï¼‰ è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜åœ°å€å¯ä»¥ä¸Šé”ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨æŸäº›å…±äº«å†…å­˜æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å®ƒç»“æŸï¼Œæ‰èƒ½ä½¿ç”¨è¿™ä¸€å—å†…å­˜ã€‚ï¼ˆæ¯”å¦‚ç«è½¦ä¸Šçš„æ´—æ‰‹é—´ï¼‰ï¼â€œäº’æ–¥é”â€ è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜åœ°å€å¯ä»¥é™å®šä½¿ç”¨é‡ï¼ˆæ¯”å¦‚ç«è½¦ä¸Šçš„é¤åŽ…ï¼Œæœ€å¤šåªå…è®¸å¤šå°‘äººè¿›å…¥ï¼Œå¦‚æžœæ»¡äº†éœ€è¦åœ¨é—¨å£ç­‰ï¼Œç­‰æœ‰äººå‡ºæ¥äº†æ‰èƒ½è¿›åŽ»ï¼‰ï¼â€œä¿¡å·é‡â€ å†è¡¥å……å‡ å¥ã€‚ çº¿ç¨‹æ˜¯è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ è¿›ç¨‹é—´æ²¡æœ‰å…±äº«å†…å­˜ï¼Œæ‰€ä»¥äº¤äº’è¦é€šè¿‡TCP/IPç«¯å£çš„ç­‰æ–¹å¼æ¥å®žçŽ°ã€‚çº¿ç¨‹é—´ç”±äºŽæœ‰å…±äº«å†…å­˜ï¼Œæ‰€ä»¥äº¤äº’æ¯”è¾ƒæ–¹ä¾¿ã€‚ çº¿ç¨‹å ç”¨å¾ˆå¤šèµ„æºï¼Œè€Œçº¿ç¨‹åªéœ€è¦åˆ†é…æ ˆå’ŒPCå³å¯ã€‚ 8. é’ˆå¯¹è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„æ€»ç»“ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„4G(32ä½ç³»ç»Ÿä¸‹)å†…å­˜ç©ºé—´ï¼Œå„ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´å…·æœ‰ç±»ä¼¼çš„ç»“æž„ ä¸€ä¸ªæ–°è¿›ç¨‹å»ºç«‹çš„æ—¶å€™ï¼Œå°†ä¼šå»ºç«‹èµ·è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œæ­¤è¿›ç¨‹çš„æ•°æ®ï¼Œä»£ç ç­‰ä»Žç£ç›˜æ‹·è´åˆ°è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼ˆå»ºç«‹ä¸€ä¸ªè¿›ç¨‹ï¼Œå°±è¦æŠŠç£ç›˜ä¸Šçš„ç¨‹åºæ–‡ä»¶æ‹·è´åˆ°è¿›ç¨‹å¯¹åº”çš„å†…å­˜ä¸­åŽ»ï¼Œå¯¹äºŽä¸€ä¸ªç¨‹åºå¯¹åº”çš„å¤šä¸ªè¿›ç¨‹è¿™ç§æƒ…å†µï¼Œæµªè´¹å†…å­˜ï¼ï¼‰ï¼Œå“ªäº›æ•°æ®åœ¨å“ªé‡Œï¼Œéƒ½ç”±è¿›ç¨‹æŽ§åˆ¶è¡¨ä¸­çš„task_structè®°å½• æ¯ä¸ªè¿›ç¨‹çš„4Gå†…å­˜ç©ºé—´åªæ˜¯è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œæ¯æ¬¡è®¿é—®å†…å­˜ç©ºé—´çš„æŸä¸ªåœ°å€ï¼Œéƒ½éœ€è¦æŠŠåœ°å€ç¿»è¯‘ä¸ºå®žé™…ç‰©ç†å†…å­˜åœ°å€ æ‰€æœ‰è¿›ç¨‹å…±äº«åŒä¸€ç‰©ç†å†…å­˜ï¼Œæ¯ä¸ªè¿›ç¨‹åªæŠŠè‡ªå·±ç›®å‰éœ€è¦çš„è™šæ‹Ÿå†…å­˜ç©ºé—´æ˜ å°„å¹¶å­˜å‚¨åˆ°ç‰©ç†å†…å­˜ä¸Šã€‚ è¿›ç¨‹è¦çŸ¥é“å“ªäº›å†…å­˜åœ°å€ä¸Šçš„æ•°æ®åœ¨ç‰©ç†å†…å­˜ä¸Šï¼Œå“ªäº›ä¸åœ¨ï¼Œè¿˜æœ‰åœ¨ç‰©ç†å†…å­˜ä¸Šçš„å“ªé‡Œï¼Œéœ€è¦ç”¨é¡µè¡¨æ¥è®°å½• é¡µè¡¨çš„æ¯ä¸€ä¸ªè¡¨é¡¹åˆ†ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†è®°å½•æ­¤é¡µæ˜¯å¦åœ¨ç‰©ç†å†…å­˜ä¸Šï¼Œç¬¬äºŒéƒ¨åˆ†è®°å½•ç‰©ç†å†…å­˜é¡µçš„åœ°å€ï¼ˆå¦‚æžœåœ¨çš„è¯ï¼‰ å½“è¿›ç¨‹è®¿é—®æŸä¸ªè™šæ‹Ÿåœ°å€ï¼ŒåŽ»çœ‹é¡µè¡¨ï¼Œå¦‚æžœå‘çŽ°å¯¹åº”çš„æ•°æ®ä¸åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œåˆ™ç¼ºé¡µå¼‚å¸¸ ç¼ºé¡µå¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠè¿›ç¨‹éœ€è¦çš„æ•°æ®ä»Žç£ç›˜ä¸Šæ‹·è´åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œå¦‚æžœå†…å­˜å·²ç»æ»¡äº†ï¼Œæ²¡æœ‰ç©ºåœ°æ–¹äº†ï¼Œé‚£å°±æ‰¾ä¸€ä¸ªé¡µè¦†ç›–ï¼Œå½“ç„¶å¦‚æžœè¢«è¦†ç›–çš„é¡µæ›¾ç»è¢«ä¿®æ”¹è¿‡ï¼Œéœ€è¦å°†æ­¤é¡µå†™å›žç£ç›˜ 9. å…³äºŽè¿›ç¨‹å’Œçº¿ç¨‹æ›´æ·±çš„è®¤è¯† å…³äºŽä¸ºä»€ä¹ˆè¦åˆ†è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œå…ˆæŠ›å‡ºç»“è®ºï¼š è¿›ç¨‹processï¼šè¿›ç¨‹å°±æ˜¯æ—¶é—´æ€»å’Œ=æ‰§è¡ŒçŽ¯å¢ƒåˆ‡æ¢æ—¶é—´+ç¨‹åºæ‰§è¡Œæ—¶é—´------&gt;CPUåŠ è½½æ‰§è¡ŒçŽ¯å¢ƒ-&gt;CPUæ‰§è¡Œç¨‹åº-&gt;CPUä¿å­˜æ‰§è¡ŒçŽ¯å¢ƒ çº¿ç¨‹threadï¼šçº¿ç¨‹ä¹Ÿæ˜¯æ—¶é—´æ€»å’Œ=æ‰§è¡ŒçŽ¯å¢ƒåˆ‡æ¢æ—¶é—´ï¼ˆå…±äº«è¿›ç¨‹çš„ï¼‰+ç¨‹åºæ¨¡å—æ‰§è¡Œæ—¶é—´------&gt;CPUåŠ è½½æ‰§è¡ŒçŽ¯å¢ƒï¼ˆå…±äº«è¿›ç¨‹çš„ï¼‰-&gt;CPUæ‰§è¡Œç¨‹åºæ‘¸å—-&gt;CPUä¿å­˜æ‰§è¡ŒçŽ¯å¢ƒï¼ˆå…±äº«è¿›ç¨‹çš„ï¼‰ è¿›ç¨‹å’Œçº¿ç¨‹éƒ½æ˜¯æè¿°CPUå·¥ä½œçš„æ—¶é—´æ®µï¼Œçº¿ç¨‹æ˜¯æ›´ç»†å°çš„æ—¶é—´æ®µã€‚ é‚£ä¹ˆï¼Œå¦‚æžœCPUæ—¶é—´ç‰‡ä¸´å¹¸æœ¬è¿›ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹åœ¨æ¢å¤æ‰§è¡ŒçŽ¯å¢ƒä¹‹åŽï¼Œæ‰§è¡Œé‡Œé¢çš„è‹¥å¹²çº¿ç¨‹å°±ä¸éœ€è¦å†ä¸åœåœ°åˆ‡æ¢æ‰§è¡ŒçŽ¯å¢ƒäº†ï¼Œæ‰€ä»¥è¯´ï¼Œçº¿ç¨‹ç›¸æ¯”äºŽè¿›ç¨‹æ˜¯æ¯”è¾ƒè½»é‡çš„ã€‚ åœ¨CPUçœ‹æ¥æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„è½®æµæ‰§è¡Œçš„ï¼Œå…·ä½“çš„è½®æµæ–¹æ³•å°±æ˜¯ï¼šå…ˆåŠ è½½ç¨‹åºAçš„ä¸Šä¸‹æ–‡ï¼Œç„¶åŽå¼€å§‹æ‰§è¡ŒAï¼Œä¿å­˜ç¨‹åºAçš„ä¸Šä¸‹æ–‡ï¼Œè°ƒå…¥ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„ç¨‹åºBçš„ç¨‹åºä¸Šä¸‹æ–‡ï¼Œç„¶åŽå¼€å§‹æ‰§è¡ŒB,ä¿å­˜ç¨‹åºBçš„ä¸Šä¸‹æ–‡ã€‚ã€‚ã€‚ã€‚ è¿›ç¨‹å°±æ˜¯åŒ…æ¢ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ç¨‹åºæ‰§è¡Œæ—¶é—´æ€»å’Œ = CPUåŠ è½½ä¸Šä¸‹æ–‡+CPUæ‰§è¡Œ+CPUä¿å­˜ä¸Šä¸‹æ–‡ çº¿ç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿›ç¨‹çš„é¢—ç²’åº¦å¤ªå¤§ï¼Œæ¯æ¬¡éƒ½è¦æœ‰ä¸Šä¸‹çš„è°ƒå…¥ï¼Œä¿å­˜ï¼Œè°ƒå‡ºã€‚å¦‚æžœæˆ‘ä»¬æŠŠè¿›ç¨‹æ¯”å–»ä¸ºä¸€ä¸ªè¿è¡Œåœ¨ç”µè„‘ä¸Šçš„è½¯ä»¶ï¼Œé‚£ä¹ˆä¸€ä¸ªè½¯ä»¶çš„æ‰§è¡Œä¸å¯èƒ½æ˜¯ä¸€æ¡é€»è¾‘æ‰§è¡Œçš„ï¼Œå¿…å®šæœ‰å¤šä¸ªåˆ†æ”¯å’Œå¤šä¸ªç¨‹åºæ®µï¼Œå°±å¥½æ¯”è¦å®žçŽ°ç¨‹åºAï¼Œå®žé™…åˆ†æˆ aï¼Œbï¼Œcç­‰å¤šä¸ªå—ç»„åˆè€Œæˆã€‚é‚£ä¹ˆè¿™é‡Œå…·ä½“çš„æ‰§è¡Œå°±å¯èƒ½å˜æˆï¼šç¨‹åºAå¾—åˆ°CPU =ã€‹CPUåŠ è½½ä¸Šä¸‹æ–‡ï¼Œå¼€å§‹æ‰§è¡Œç¨‹åºAçš„aå°æ®µï¼Œç„¶åŽæ‰§è¡ŒAçš„bå°æ®µï¼Œç„¶åŽå†æ‰§è¡ŒAçš„cå°æ®µï¼Œæœ€åŽCPUä¿å­˜Açš„ä¸Šä¸‹æ–‡ã€‚ è¿™é‡Œaï¼Œbï¼Œcçš„æ‰§è¡Œæ˜¯å…±äº«äº†Açš„ä¸Šä¸‹æ–‡ï¼ŒCPUåœ¨æ‰§è¡Œçš„æ—¶å€™æ²¡æœ‰è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„ã€‚è¿™é‡Œçš„aï¼Œbï¼Œcå°±æ˜¯çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹æ˜¯å…±äº«äº†è¿›ç¨‹çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒã€æ›´ä¸ºç»†å°çš„CPUæ—¶é—´æ®µã€‚ è¿›ç¨‹å’Œçº¿ç¨‹éƒ½æ˜¯ä¸€ä¸ªæ—¶é—´æ®µçš„æè¿°ï¼Œæ˜¯CPUå·¥ä½œæ—¶é—´æ®µçš„æè¿°ï¼Œä¸è¿‡æ˜¯é¢—ç²’å¤§å°ä¸åŒã€‚ æ•´ç†è‡ªï¼š https://www.zhihu.com/question/25532384 https://blog.csdn.net/moshenglv/article/details/52242153 https://blog.csdn.net/u012861978/article/details/53048077]]></content>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€æ­¥ä¸€æ­¥ç†è§£HTTPS]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F7.%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3HTTPS%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬ä¸ƒç¯‡æ–‡ç« ã€‚HTTPSï¼ˆSSL/TLSï¼‰çš„åŠ å¯†æœºåˆ¶æ˜¯å‰ç«¯åŽç«¯ioså®‰å“ç­‰éƒ½åº”äº†è§£çš„åŸºæœ¬é—®é¢˜ã€‚ä¹Ÿæ˜¯é¢è¯•ç»å¸¸é—®çš„ç‚¹ã€‚ ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦åŠ å¯†ï¼Ÿ å°æ—¶å€™çœ‹è°æˆ˜ç‰‡ï¼Œæƒ…æŠ¥å‘è¿‡æ¥äº†ä¹‹åŽï¼Œç”¨ä¸€ä¸ªå°æœ¬æœ¬è¿›è¡Œç¿»è¯‘ï¼Œç„¶åŽè§£å¯†å‡ºæƒ…æŠ¥ã€‚åŠ å¯†å°±æ˜¯é˜²æ­¢æ˜Žæ–‡è¢«åˆ«äººçœ‹åˆ°ç”šè‡³ç¯¡æ”¹å˜›ï¼ å›žåˆ°äº’è”ç½‘ï¼Œå› ä¸ºhttpçš„å†…å®¹æ˜¯æ˜Žæ–‡ä¼ è¾“çš„ï¼Œæ˜Žæ–‡æ•°æ®ä¼šç»è¿‡ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€è·¯ç”±å™¨ã€wifiçƒ­ç‚¹ã€é€šä¿¡æœåŠ¡è¿è¥å•†ç­‰å¤šä¸ªç‰©ç†èŠ‚ç‚¹ï¼Œå¦‚æžœä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åŠ«æŒï¼Œä¼ è¾“çš„å†…å®¹å°±å®Œå…¨æš´éœ²äº†ï¼Œä»–è¿˜å¯ä»¥ç¯¡æ”¹ä¼ è¾“çš„ä¿¡æ¯ä¸”ä¸è¢«åŒæ–¹å¯Ÿè§‰ï¼Œè¿™å°±æ˜¯ä¸­é—´äººæ”»å‡»ã€‚æ‰€ä»¥æˆ‘ä»¬æ‰éœ€è¦å¯¹ä¿¡æ¯è¿›è¡ŒåŠ å¯†ã€‚æœ€ç®€å•å®¹æ˜“ç†è§£çš„å°±æ˜¯å¯¹ç§°åŠ å¯† ã€‚ äºŒã€ä»€ä¹ˆæ˜¯å¯¹ç§°åŠ å¯†ï¼Ÿ å°æ˜Žå†™ä¸ªæ±‚çˆ±ä¿¡ç»™å°çº¢ï¼Œå°æ˜Žæ‹…å¿ƒå°çº¢çš„å¦ˆå¦ˆçœ‹åˆ°è¿™å°ä¿¡çš„å†…å®¹ï¼Œä»–çµæœºä¸€åŠ¨ï¼Œå¯¹ä¿¡åŠ ä¸ªå¯†ï¼Œå¹¶ç¡®å®šå¥½æˆ‘ç”¨è¿™ä¸ªå¯†é’¥åŠ å¯†çš„ï¼Œå°çº¢æ”¶åˆ°ä¹‹åŽä¹Ÿç”¨è¿™ä¸ªå¯†é’¥è§£å¯†æ‰è¡Œã€‚ ä½†æ˜¯å‘¢ï¼Œè¿™é‡Œæœ‰ä¸ªéº»çƒ¦çš„åœ°æ–¹å°±æ˜¯ï¼Œå°æ˜Žå’Œå°çº¢ä¸åœ¨ä¸€ä¸ªå­¦æ ¡ï¼Œè¿™ä¸ªé’¥åŒ™å‘¢ï¼Œä¸æ–¹ä¾¿ç›´æŽ¥é€åˆ°æ‰‹é‡Œã€‚æ‰€ä»¥å‘¢ï¼Œå°æ˜Žå¾—æƒ³åŠžæ³•æŠŠè¿™ä¸ªé’¥åŒ™å¯„ä¸€ä¸ªé€ç»™å°çº¢ï¼Œå¥½å§ï¼Œå°±ç”¨æœ€è´µçš„é¡ºä¸°å§ï¼ å°±æ˜¯æœ‰ä¸€ä¸ªå¯†é’¥ï¼Œå®ƒå¯ä»¥å¯¹ä¸€æ®µå†…å®¹åŠ å¯†ï¼ŒåŠ å¯†åŽåªèƒ½ç”¨å®ƒæ‰èƒ½è§£å¯†çœ‹åˆ°åŽŸæœ¬çš„å†…å®¹ï¼Œå’Œæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ç”¨çš„é’¥åŒ™ä½œç”¨å·®ä¸å¤šã€‚ ä¸‰ã€ç”¨å¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ é¡ºä¸°å¿«é€’åˆ°äº†ï¼Œç»“æžœå°çº¢ä¸åœ¨å®¶ï¼Œå°çº¢çš„å¦ˆå¦ˆæ”¶åˆ°äº†ï¼Œä¸€çœ‹æ˜¯ä¸ªç”·åŒå­¦å¯„çš„ï¼Œæ€Žä¹ˆèƒ½å¿ä½ï¼Œèµ¶ç´§æ‰“å¼€ï¼Œä»¥çœ‹æ˜¯ä¸€æŠŠé’¥åŒ™ï¼Œä½œä¸ºç¨‹åºçŒ¿ï¼Œå¦ˆå¦ˆå¾—æ„ä¸€ç¬‘ï¼šå“¼å“¼ï¼Œè¿˜èƒ½é€ƒè¿‡æˆ‘çš„çœ¼ç›ï¼Ÿæˆ‘èµ¶ç´§å¤åˆ¶ä¸€æŠŠè—ç€ï¼Œæˆ‘å€’è¦çœ‹çœ‹ä»–åŽé¢è¦å¯„å•¥æ¥ï¼Œè¿˜è¦åŠ å¯†ï¼Ÿï¼ æžœç„¶å°çº¢çš„å¦ˆå¦ˆç­‰åˆ°äº†æ¥è‡ªå°æ˜Žå¯„è¿‡æ¥çš„æƒ…ä¹¦ï¼Œè§£å¯†ä¸€çœ‹ï¼Œå®žé”¤æ—©æ‹ã€‚ åŒæ ·åœ°ï¼Œå°æ˜Žè¿™è¾¹ä¹Ÿéžå¸¸å±é™©ï¼Œå¿«é€’å‘˜åˆšå‡ºå‘ï¼Œå°±è¢«å°æ˜Žçš„å¦ˆå¦ˆæ‹¦æˆªäº†ï¼Œæ‹¿åˆ°äº†è¿™ä¸ªé’¥åŒ™ï¼Œé‚£å°æ˜Žè¿˜æ²¡å¯„å‡ºçš„ä¿¡å·²ç»è¢«å¦ˆå¦ˆçœ‹å…‰äº†ã€‚ æ‰€ä»¥é—®é¢˜çš„æ ¹æœ¬å°±æ˜¯ï¼Œè¿™æŠŠé’¥åŒ™è¦ä¼ è¾“ï¼Œä¼ è¾“å°±å¯èƒ½è¢«æˆªå–ã€‚ å›žåˆ°äº’è”ç½‘ï¼Œå¦‚æžœé€šä¿¡åŒæ–¹éƒ½å„è‡ªæŒæœ‰åŒä¸€ä¸ªå¯†é’¥ï¼Œä¸”æ²¡æœ‰åˆ«äººçŸ¥é“ï¼Œè¿™ä¸¤æ–¹çš„é€šä¿¡å®‰å…¨å½“ç„¶æ˜¯å¯ä»¥è¢«ä¿è¯çš„ï¼ˆé™¤éžå¯†é’¥è¢«ç ´è§£ï¼‰ã€‚ ç„¶è€Œæœ€å¤§çš„é—®é¢˜å°±æ˜¯è¿™ä¸ªå¯†é’¥æ€Žä¹ˆè®©ä¼ è¾“çš„åŒæ–¹çŸ¥æ™“ï¼ŒåŒæ—¶ä¸è¢«åˆ«äººçŸ¥é“ã€‚ å¦‚æžœç”±æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå¯†é’¥å¹¶ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œé‚£è¿™ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­å¯†é’¥è¢«åˆ«äººåŠ«æŒå¼„åˆ°æ‰‹äº†æ€Žä¹ˆåŠžï¼Ÿ æ¢ç§æ€è·¯ï¼Ÿè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœæµè§ˆå™¨å†…éƒ¨å°±é¢„å­˜äº†ç½‘ç«™Açš„å¯†é’¥ï¼Œä¸”å¯ä»¥ç¡®ä¿é™¤äº†æµè§ˆå™¨å’Œç½‘ç«™Aï¼Œä¸ä¼šæœ‰ä»»ä½•å¤–äººçŸ¥é“è¯¥å¯†é’¥ï¼Œé‚£ç†è®ºä¸Šç”¨å¯¹ç§°åŠ å¯†æ˜¯å¯ä»¥çš„ï¼Œè¿™æ ·æµè§ˆå™¨åªè¦é¢„å­˜å¥½ä¸–ç•Œä¸Šæ‰€æœ‰HTTPSç½‘ç«™çš„å¯†é’¥å°±è¡Œå•¦ï¼è¿™ä¹ˆåšæ˜¾ç„¶ä¸çŽ°å®žã€‚ æ€Žä¹ˆåŠžï¼Ÿæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ç¥žå¥‡çš„éžå¯¹ç§°åŠ å¯†ã€‚ å››ã€ä»€ä¹ˆæ˜¯éžå¯¹ç§°åŠ å¯†ï¼Ÿ æœ‰ä¸¤æŠŠå¯†é’¥ï¼Œé€šå¸¸ä¸€æŠŠå«åšå…¬é’¥ã€ä¸€æŠŠå«åšç§é’¥ã€‚ ç”¨å…¬é’¥åŠ å¯†çš„å†…å®¹å¿…é¡»ç”¨ç§é’¥æ‰èƒ½è§£å¼€ï¼ŒåŒæ ·ï¼Œç§é’¥åŠ å¯†çš„å†…å®¹åªæœ‰å…¬é’¥èƒ½è§£å¼€ã€‚ äº”ã€ç”¨éžå¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ å…¬é’¥å‘¢ï¼Œè¿˜æ˜¯è¦é€šè¿‡å¿«é€’å‘˜é€ç»™å°çº¢çš„ã€‚OKï¼Œå‡è®¾å°çº¢è¦å›žä¿¡ï¼Œå†™å¥½äº†ç”¨å…¬é’¥åŠ å¯†ï¼Œå°çº¢çš„å¦ˆå¦ˆå› ä¸ºæ‹¿ä¸åˆ°ç§é’¥ï¼Œçœ‹ä¸åˆ°ä¿¡çš„å†…å®¹ã€‚ OKï¼Œä½†æ˜¯åè¿‡æ¥å‘¢ï¼Ÿå°æ˜Žç”¨ç§é’¥åŠ å¯†ä¼ ç»™å°çº¢ï¼Œé‚£ä¹ˆå°çº¢çš„å¦ˆå¦ˆå¯å°±èƒ½è§£å¯†äº†ï¼ˆå› ä¸ºå…¬é’¥å¯èƒ½ä¼šè¢«å°çº¢çš„å¦ˆå¦ˆæ‹¿åˆ°ï¼‰ã€‚ å›žåˆ°äº’è”ç½‘ï¼ŒæœåŠ¡å™¨å…ˆæŠŠå…¬é’¥ç›´æŽ¥æ˜Žæ–‡ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œä¹‹åŽæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ æ•°æ®å‰éƒ½å…ˆç”¨è¿™ä¸ªå…¬é’¥åŠ å¯†å¥½å†ä¼ ï¼Œè¿™æ¡æ•°æ®çš„å®‰å…¨ä¼¼ä¹Žå¯ä»¥ä¿éšœäº†ï¼å› ä¸ºåªæœ‰æœåŠ¡å™¨æœ‰ç›¸åº”çš„ç§é’¥èƒ½è§£å¼€è¿™æ¡æ•°æ®ã€‚ ç„¶è€Œç”±æœåŠ¡å™¨åˆ°æµè§ˆå™¨çš„è¿™æ¡è·¯æ€Žä¹ˆä¿éšœå®‰å…¨ï¼Ÿ å¦‚æžœæœåŠ¡å™¨ç”¨å®ƒçš„çš„ç§é’¥åŠ å¯†æ•°æ®ä¼ ç»™æµè§ˆå™¨ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç”¨å…¬é’¥å¯ä»¥è§£å¯†å®ƒï¼Œè€Œè¿™ä¸ªå…¬é’¥æ˜¯ä¸€å¼€å§‹é€šè¿‡æ˜Žæ–‡ä¼ è¾“ç»™æµè§ˆå™¨çš„ï¼Œè¿™ä¸ªå…¬é’¥è¢«è°åŠ«æŒåˆ°çš„è¯ï¼Œä»–ä¹Ÿèƒ½ç”¨è¯¥å…¬é’¥è§£å¯†æœåŠ¡å™¨ä¼ æ¥çš„ä¿¡æ¯äº†ã€‚ æ‰€ä»¥ç›®å‰ä¼¼ä¹Žåªèƒ½ä¿è¯ç”±æµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“æ•°æ®æ—¶çš„å®‰å…¨æ€§ï¼ˆå…¶å®žä»æœ‰æ¼æ´žï¼Œä¸‹æ–‡ä¼šè¯´ï¼‰ã€‚ å…­ã€æ”¹è‰¯çš„éžå¯¹ç§°åŠ å¯†æ–¹æ¡ˆï¼Œä¼¼ä¹Žå¯ä»¥ï¼Ÿ å°æ˜Žå’Œå°çº¢å¹´çºªä¸å¤§ï¼Œä½†æ˜¯å¾ˆèªæ˜Žï¼Œé’ˆå¯¹è¿™ä¸ªæƒ…å†µï¼Œè¿˜æ˜¯è¿…é€Ÿå‡çº§åŠ å¯†æ–¹æ³•ã€‚ä»–ä»¬æƒ³åˆ°æ—¢ç„¶ä¸€ç»„å…¬é’¥ç§é’¥ä¸å¤Ÿï¼Œé‚£ä¸¤ç»„å‘¢ï¼Ÿ OKï¼Œå°æ˜Žå’Œå°çº¢å„é€ äº†ä¸€å¯¹ã€‚ä¸‹é¢å°±æ˜¯äº’ç›¸äº¤æ¢å…¬é’¥ã€‚é‚£ä¹ˆå°±å˜æˆï¼š ä¸‹é¢å°±å¥½åŠžå•¦ï¼Œå°æ˜Žå†™ä¿¡ç”¨å…¬é’¥BåŠ å¯†ï¼Œé‚£ä¹ˆä¿¡çš„å†…å®¹åªæœ‰å°çº¢èƒ½ç ´è§£ï¼Œå› ä¸ºå°çº¢æ˜¯éšèº«æºå¸¦ç§é’¥Bã€‚ç›¸åï¼Œå°çº¢ç”¨å…¬é’¥Aå¯¹ä¿¡åŠ å¯†ï¼Œè¿™æ ·åªæœ‰å°æ˜Žèƒ½ç ´è§£ï¼Œå› ä¸ºå°æ˜Žä¹Ÿæ˜¯éšèº«æºå¸¦ç§é’¥Aã€‚å¥½åƒå¾ˆå®‰å…¨å•¦ï¼é™¤äº†ä¸‹é¢æåˆ°çš„æ¼æ´žï¼Œå”¯ä¸€çš„ç¼ºç‚¹å¯èƒ½æ˜¯ï¼šå°çº¢å¾—èŠ±åŠå¤©æ—¶é—´æ‰èƒ½è§£å¯†å®Œè¿™å°ä¿¡ï¼Œæœ‰ç‚¹å—ä¸äº†ã€‚ å›žåˆ°äº’è”ç½‘ã€‚è¯·çœ‹ä¸‹é¢çš„è¿‡ç¨‹ï¼š æŸç½‘ç«™æ‹¥æœ‰ç”¨äºŽéžå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aï¼›æµè§ˆå™¨æ‹¥æœ‰ç”¨äºŽéžå¯¹ç§°åŠ å¯†çš„å…¬é’¥Bã€ç§é’¥Bã€‚ æµè§ˆå™¨åƒç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜Žæ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚ æµè§ˆå™¨æŠŠå…¬é’¥Bæ˜Žæ–‡ä¼ è¾“ç»™æœåŠ¡å™¨ã€‚ ä¹‹åŽæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”¨å…¬é’¥AåŠ å¯†ï¼ŒæœåŠ¡å™¨æ”¶åˆ°åŽç”¨ç§é’¥Aè§£å¯†ã€‚ç”±äºŽåªæœ‰æœåŠ¡å™¨æ‹¥æœ‰è¿™ä¸ªç§é’¥Aå¯ä»¥è§£å¯†ï¼Œæ‰€ä»¥èƒ½ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚ æœåŠ¡å™¨å‘æµè§ˆå™¨ä¼ è¾“çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”¨å…¬é’¥BåŠ å¯†ï¼Œæµè§ˆå™¨æ”¶åˆ°åŽç”¨ç§é’¥Bè§£å¯†ã€‚åŒä¸Šä¹Ÿå¯ä»¥ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚ çš„ç¡®å¯ä»¥ï¼æŠ›å¼€è¿™é‡Œé¢ä»æœ‰çš„æ¼æ´žä¸è°ˆï¼ˆä¸‹æ–‡ä¼šè®²ï¼‰ï¼ŒHTTPSçš„åŠ å¯†å´æ²¡ä½¿ç”¨è¿™ç§æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿæœ€ä¸»è¦çš„åŽŸå› æ˜¯éžå¯¹ç§°åŠ å¯†ç®—æ³•éžå¸¸è€—æ—¶ï¼Œç‰¹åˆ«æ˜¯åŠ å¯†è§£å¯†ä¸€äº›è¾ƒå¤§æ•°æ®çš„æ—¶å€™æœ‰äº›åŠ›ä¸ä»Žå¿ƒã€‚ ä¸ƒã€éžå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†ï¼Ÿ å°æ˜Žä¹ŸçŸ¥é“ï¼Œè¿™ä¸ªä¿¡å¾ˆé•¿ï¼Œç”¨éžå¯¹ç§°åŠ å¯†ï¼Œå¤ªæ…¢ï¼åŠžæ³•ä¹Ÿæœ‰ï¼Œæ²¡æœ‰å¿…è¦å¯¹é‚£ä¹ˆé•¿çš„ä¿¡åŠ å¯†ï¼Œæˆ‘åªè¦ä¿è¯è¿™ä¸ªçœŸæ­£è§£å¯†çš„é’¥åŒ™ä¸è¢«åˆ«äººæ‹¿åˆ°å°±è¡Œï¼Œé‚£ä¹ˆä»–çµæœºä¸€åŠ¨æƒ³åˆ°è¿™ä¸ªæ–¹æ³•ï¼š å°æ˜Žå’Œå°çº¢åˆ©ç”¨éžå¯¹ç§°åŠ å¯†å¯¹é’¥åŒ™åŠ å¯†ï¼Œå§‘ä¸”è®¤ä¸ºæ˜¯è¿™ä¸ªé’¥åŒ™è¢«æ”¾åœ¨äº†ä¸€ä¸ªç›’å­é‡Œï¼Œè¿™ä¸ªç›’å­ä¹Ÿè¢«é”èµ·æ¥äº†ï¼Œåªæœ‰å°çº¢æˆ–è€…å°æ˜Žæ‰èƒ½æ‰“å¼€ç›’å­ï¼Œå†ç”¨é’¥åŒ™åŽ»è§£å¯†ã€‚ è¿™ä¸ªçœŸæ­£ç”¨äºŽå¯¹ç§°åŠ å¯†è§£å¯†çš„é’¥åŒ™åˆ«äººå°±æ‹¿ä¸åˆ°å•¦ï¼ è‡ªä»Žç”¨äº†è¿™ä¸ªæ–¹æ¡ˆï¼Œæ„Ÿè§‰åˆå®‰å…¨ï¼Œè§£å¯†åˆå¿«ï¼Œæ„Ÿæƒ…åˆæ·±æ¸©äº†å‘¢ï¼ å›žåˆ°äº’è”ç½‘ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š æŸç½‘ç«™æ‹¥æœ‰ç”¨äºŽéžå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aã€‚ æµè§ˆå™¨åƒç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜Žæ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚ æµè§ˆå™¨éšæœºç”Ÿæˆä¸€ä¸ªç”¨äºŽå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨å…¬é’¥AåŠ å¯†åŽä¼ ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨æ‹¿åˆ°åŽç”¨ç§é’¥Aè§£å¯†å¾—åˆ°å¯†é’¥Xã€‚ è¿™æ ·åŒæ–¹å°±éƒ½æ‹¥æœ‰å¯†é’¥Xäº†ï¼Œä¸”åˆ«äººæ— æ³•çŸ¥é“å®ƒã€‚ä¹‹åŽåŒæ–¹æ‰€æœ‰æ•°æ®éƒ½ç”¨å¯†é’¥XåŠ å¯†è§£å¯†ã€‚ HTTPSçš„åŸºæœ¬æ€æƒ³å°±æ˜¯åŸºäºŽè¿™ä¸ªã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆä¹Ÿå­˜åœ¨ä¸Šé¢ä¸€ç›´åœ¨è¯´çš„æ¼æ´žã€‚ å…«ã€ä¸­é—´äººæ”»å‡» åƒå¦ˆå¦ˆè¿™æ ·çº§åˆ«çš„ç¨‹åºçŒ¿å¯èƒ½æ˜¯é‚£ä»–ä»¬ä¸¤æ²¡åŠžæ³•å•¦ï¼Œä½†æ˜¯å‘¢ï¼Œæ ¡åŒºæœ‰ä¸ªçœ‹é—¨çš„å¤§çˆ·ï¼Œä»¥å‰æ˜¯ä¸ªé»‘å®¢ï¼Œä¹Ÿä¸çŸ¥é“å’‹å›žäº‹ï¼Œæ˜Žæ˜Žæ‰50å²ï¼Œä½†æ˜¯çœ‹èµ·æ¥åƒ80å²ï¼Œå¤´ä¸Šå…‰æºœæºœçš„ï¼Œå†¬å¤©å†·å‘¢ã€‚æ•´å¤©åœ¨é‚£èƒ¡è¨€ä¹±è¯­ï¼šdockerç‰›é€¼å•Šï¼Œspring cloudç‰›é€¼å•Šï¼Œè¿™ä¸ªå¼€æºè½¯ä»¶XXXå†™çš„çœŸå¥½ï¼Œè·Ÿå‘¨å›´çš„è€å¤§çˆ·è€å¤§å¦ˆæ ¹æœ¬è°ˆä¸åˆ°ä¸€èµ·åŽ»ã€‚ ä»–ä¹Ÿæ˜¯é—²çš„è›‹ç–¼ï¼Œéžè¦æŽºå’Œï¼Œå› ä¸ºæ®è¯´ä»–ä»¥å‰å•èº«30å¹´ï¼Œè‹¦é€¼æ•²ä»£ç ï¼Œä¸çŸ¥é“è°ˆæ‹çˆ±æ˜¯å•¥æ»‹å‘³ï¼Œå§‘ä¸”è®¤ä¸ºä»–å¥½å¥‡å¿ƒé‡å§ã€‚ åœ¨å°æ˜Žç¬¬ä¸€æ¬¡å¯„å…¬é’¥Açš„æ—¶å€™ï¼Œå¤§çˆ·å‡ºæ‰‹äº†ï¼Œæˆªå–ä¸‹æ¥ã€‚æ¢æˆè‡ªå·±åšçš„å…¬é’¥Bã€‚ç„¶åŽé€ç»™å°çº¢ã€‚ å°çº¢å“ªé‡Œä¼šçŸ¥é“è¿™å…¬é’¥è¢«æŽ‰åŒ…äº†å‘¢ï¼Œæ‰€ä»¥ç›´æŽ¥å°±ç”¨äº†ï¼ŒæŒ‰ç…§æ­£å¸¸æ­¥éª¤ï¼Œå°çº¢æƒ³äº†ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œè¿™æ¬¡å°±å«xiaomingwoxuanniå§ï¼ŒOKï¼Œç”¨è¿™ä¸ªå…¬é’¥Bå¯¹è¿™ä¸ªå­—ç¬¦ä¸²åŠ ä¸ªå¯†ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±è¢«é”è¿›äº†ç”¨å¤§çˆ·å…¬é’¥Bé”çš„ç›’å­é‡Œã€‚ è€å¤§çˆ·åœ¨é—¨å£å®ˆç€å‘¢ï¼Œä¸€çœ‹åˆ°å°çº¢å¯„ä¸œè¥¿äº†ï¼Œåˆå·å·åœ°æˆªå–ä¸‹æ¥ï¼Œç”¨è‡ªå·±çš„ç§é’¥Bæ¥è§£å¯†è¿™ä¸ªç›’å­ã€‚è½»æ˜“åœ°æ‹¿åˆ°äº†é‡Œé¢çš„å­—ç¬¦ä¸²ï¼ŒOKï¼Œæ€•å°æ˜Žå¯Ÿè§‰ï¼Œå†ç”¨å°æ˜Žå¯„æ¥çš„å…¬é’¥AåŠ å¯†ä¼ ç»™å°æ˜Žï¼Œè¿™æ ·åŒæ–¹éƒ½ä¸çŸ¥é“ä»–ä»¬çš„é’¥åŒ™å·²ç»è¢«å¤§çˆ·ç»™èŽ·å–äº†ã€‚ å°æ˜Žå’Œå°çº¢ä¹‹é—´çš„ä¿¡å°±ç”¨xiaomingwoxuanniè¿™ä¸ªé’¥åŒ™è¿›è¡Œå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°è§£å¯†ï¼Œå®Œå…¨ä¸çŸ¥é“æœ‰ä¸ªå¤§çˆ·å°±å¤©å¤©æ‹¿ç€è¿™ä¸ªå­—ç¬¦ä¸²åŽ»è§£å¯†ä¿¡ä»¶ï¼Œçœ‹çš„ä¸äº¦ä¹ä¹Žï¼Œç”šè‡³è¿˜å·å·æ”¹å‡ ä¸ªå­—å‘¢ã€‚ å›žåˆ°äº’è”ç½‘ã€‚ä¸­é—´äººçš„ç¡®æ— æ³•å¾—åˆ°æµè§ˆå™¨ç”Ÿæˆçš„å¯†é’¥Bï¼Œè¿™ä¸ªå¯†é’¥æœ¬èº«è¢«å…¬é’¥AåŠ å¯†äº†ï¼Œåªæœ‰æœåŠ¡å™¨æ‰æœ‰ç§é’¥Aè§£å¼€æ‹¿åˆ°å®ƒå‘€ï¼ç„¶è€Œä¸­é—´äººå´å®Œå…¨ä¸éœ€è¦æ‹¿åˆ°å¯†é’¥Aå°±èƒ½å¹²åäº‹äº†ã€‚è¯·çœ‹ï¼š æŸç½‘ç«™æ‹¥æœ‰ç”¨äºŽéžå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aã€‚ æµè§ˆå™¨å‘ç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜Žæ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚ ä¸­é—´äººåŠ«æŒåˆ°å…¬é’¥Aï¼Œä¿å­˜ä¸‹æ¥ï¼ŒæŠŠæ•°æ®åŒ…ä¸­çš„å…¬é’¥Aæ›¿æ¢æˆè‡ªå·±ä¼ªé€ çš„å…¬é’¥Bï¼ˆå®ƒå½“ç„¶ä¹Ÿæ‹¥æœ‰å…¬é’¥Bå¯¹åº”çš„ç§é’¥Bï¼‰ã€‚ æµè§ˆå™¨éšæœºç”Ÿæˆä¸€ä¸ªç”¨äºŽå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨å…¬é’¥Bï¼ˆæµè§ˆå™¨ä¸çŸ¥é“å…¬é’¥è¢«æ›¿æ¢äº†ï¼‰åŠ å¯†åŽä¼ ç»™æœåŠ¡å™¨ã€‚ ä¸­é—´äººåŠ«æŒåŽç”¨ç§é’¥Bè§£å¯†å¾—åˆ°å¯†é’¥Xï¼Œå†ç”¨å…¬é’¥AåŠ å¯†åŽä¼ ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨æ‹¿åˆ°åŽç”¨ç§é’¥Aè§£å¯†å¾—åˆ°å¯†é’¥Xã€‚ è¿™æ ·åœ¨åŒæ–¹éƒ½ä¸ä¼šå‘çŽ°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä¸­é—´äººå¾—åˆ°äº†å¯†é’¥Bã€‚æ ¹æœ¬åŽŸå› æ˜¯æµè§ˆå™¨æ— æ³•ç¡®è®¤è‡ªå·±æ”¶åˆ°çš„å…¬é’¥æ˜¯ä¸æ˜¯ç½‘ç«™è‡ªå·±çš„ã€‚åªè¦è§£å†³äº†è¿™ä¸ªå…¬é’¥ä¸€å®šæ˜¯è¿™ä¸ªç½‘ç«™å‘æ¥çš„ï¼Œé‚£ä¹ˆåŸºæœ¬å°±OKäº† ä¹ã€å¦‚ä½•è¯æ˜Žæµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ä¸€å®šæ˜¯è¯¥ç½‘ç«™çš„å…¬é’¥ï¼Ÿ çŽ°å®žç”Ÿæ´»ä¸­ï¼Œå¦‚æžœæƒ³è¯æ˜ŽæŸèº«ä»½è¯å·ä¸€å®šæ˜¯å°æ˜Žçš„ï¼Œæ€Žä¹ˆåŠžï¼Ÿçœ‹èº«ä»½è¯ã€‚è¿™é‡Œæ”¿åºœæœºæž„èµ·åˆ°äº†â€œå…¬ä¿¡â€çš„ä½œç”¨ï¼Œèº«ä»½è¯æ˜¯ç”±å®ƒé¢å‘çš„ï¼Œå®ƒæœ¬èº«çš„æƒå¨å¯ä»¥å¯¹ä¸€ä¸ªäººçš„èº«ä»½ä¿¡æ¯ä½œå‡ºè¯æ˜Žã€‚äº’è”ç½‘ä¸­èƒ½ä¸èƒ½æžè¿™ä¹ˆä¸ªå…¬ä¿¡æœºæž„å‘¢ï¼Ÿç»™ç½‘ç«™é¢å‘ä¸€ä¸ªâ€œèº«ä»½è¯â€ï¼Ÿ åã€æ•°å­—è¯ä¹¦ ç½‘ç«™åœ¨ä½¿ç”¨HTTPSå‰ï¼Œéœ€è¦å‘â€œCAæœºæž„â€ç”³è¯·é¢å‘ä¸€ä»½æ•°å­—è¯ä¹¦ï¼Œå³SSLè¯ä¹¦ï¼Œæ•°å­—è¯ä¹¦é‡Œæœ‰è¯ä¹¦æŒæœ‰è€…ã€è¯ä¹¦æŒæœ‰è€…çš„å…¬é’¥ç­‰ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æŠŠè¯ä¹¦ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä»Žè¯ä¹¦é‡Œå–å…¬é’¥å°±è¡Œäº†ï¼Œè¯ä¹¦å°±å¦‚èº«ä»½è¯ä¸€æ ·ï¼Œå¯ä»¥è¯æ˜Žâ€œè¯¥å…¬é’¥å¯¹åº”è¯¥ç½‘ç«™â€ã€‚ç„¶è€Œè¿™é‡Œåˆæœ‰ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é—®é¢˜äº†ï¼Œè¯ä¹¦æœ¬èº«çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•é˜²æ­¢è¢«ç¯¡æ”¹ï¼Ÿå³å¦‚ä½•è¯æ˜Žè¯ä¹¦æœ¬èº«çš„çœŸå®žæ€§ï¼Ÿèº«ä»½è¯æœ‰ä¸€äº›é˜²ä¼ªæŠ€æœ¯ï¼Œæ•°å­—è¯ä¹¦æ€Žä¹ˆé˜²ä¼ªå‘¢ï¼Ÿè§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å°±åŸºæœ¬æŽ¥è¿‘èƒœåˆ©äº†ï¼ SSLè¯ä¹¦å†…å®¹ï¼š è¯ä¹¦çš„å‘å¸ƒæœºæž„CA è¯ä¹¦çš„æœ‰æ•ˆæœŸ å…¬é’¥ è¯ä¹¦æ‰€æœ‰è€… ç­¾å åä¸€ã€å¦‚ä½•æ”¾é˜²æ­¢æ•°å­—è¯ä¹¦è¢«ç¯¡æ”¹ï¼Ÿ æˆ‘ä»¬æŠŠè¯ä¹¦å†…å®¹ç”Ÿæˆä¸€ä»½â€œç­¾åâ€ï¼Œæ¯”å¯¹è¯ä¹¦å†…å®¹å’Œç­¾åæ˜¯å¦ä¸€è‡´å°±èƒ½å¯Ÿè§‰æ˜¯å¦è¢«ç¯¡æ”¹ã€‚è¿™ç§æŠ€æœ¯å°±å«æ•°å­—ç­¾åã€‚ æåˆ°æ•°å­—ç­¾åï¼Œå…¶å®žåŽŸç†å¾ˆç®€å•å•¦ï¼Œå°±æ˜¯æ¯”å¦‚æˆ‘è¦ä¼ è¾“ä¸€å¥è¯å«ï¼šâ€œä½ ç»™æˆ‘è½¬100å—é’±ï¼Œæˆ‘çš„è´¦å·æ˜¯123456ï¼Œè½¬å®Œäº†å‘Šè¯‰æˆ‘ä¸€å£°ã€‚â€ï¼Œå¦‚æžœä¸åšä»»ä½•å¤„ç†ï¼Œè¢«åˆšæ‰çš„è€å¤§çˆ·æˆªå–äº†ï¼Œä»–å·å·åœ°æ”¹ä¸€ä¸‹å†…å®¹â€œä½ ç»™æˆ‘è½¬200å—é’±ï¼Œæˆ‘çš„è´¦å·æ˜¯654321ï¼Œä¸è¦å‘Šè¯‰ä»»ä½•äººï¼Œå°¤å…¶æ˜¯ä½ å«‚å­ã€‚â€ æ˜¯ä¸æ˜¯å¤ªåäº†ï¼Œå¼„ä¸å¥½è¢«æŠ“ï¼Œå¤§çˆ·å¯ä¸æ•¢åšå¤§çš„ï¼Œåªæ•¢éª—ä¸ªå–é…’é’±ã€‚ é‚£ä¹ˆæ€Žä¹ˆé˜²æ­¢å¤§çˆ·è¿™ç§çŒ¥çæŠ€æœ¯åˆé«˜çš„äººç¯¡æ”¹å‘¢ï¼Ÿæ•°å­—ç­¾åæŽ’ä¸Šç”¨åœºå•¦ï¼ ä»¥åŽå†ä¼ æ¶ˆæ¯å°±æ˜¯â€œä½ ç»™æˆ‘è½¬100å—é’±ï¼Œæˆ‘çš„è´¦å·æ˜¯123456ï¼Œè½¬å®Œäº†å‘Šè¯‰æˆ‘ä¸€å£°ã€‚â€+â€œï¼â€¦â€¦@&amp;@%#â€¦â€¦ï¼ï¿¥@ï¿¥ï¼@%â€¦â€¦#ï¿¥ï¼%â€¦â€¦â€,åŽé¢é‚£ä¸€ä¸²ä¸œè¥¿å°±æ˜¯æ•°å­—ç­¾åï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯æƒ³åŠžæ³•å¯¹å‰é¢çš„å†…å®¹è¿›è¡Œéžå¯¹ç§°åŠ å¯†ï¼ˆè¿™æ ·åˆ«äººæ ¹æœ¬ä¸çŸ¥é“ä½ åŠ å¯†çš„ç§é’¥æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå°±ä¼ªè£…ä¸äº†ç­¾åäº†ï¼‰ã€‚ä¼ è¿‡åŽ»ä¹‹åŽï¼Œæˆ‘è¦å¯¹å…¶è¿›è¡Œè§£å¯†ï¼Œä¸Žä¼ è¿‡æ¥çš„æ˜Žæ–‡ä¸€ä¸€å¯¹æ¯”å‚æ•°ï¼Œçœ‹æœ‰æ²¡æœ‰è¢«æ”¹åŠ¨è¿‡ã€‚ä¸€æ—¦å‘çŽ°å“ªé‡Œä¸å¯¹åº”ï¼Œè¯´æ˜Žå·²ç»è¢«ç¯¡æ”¹äº†ã€‚ â€œCAæœºæž„â€åˆ¶ä½œç­¾åçš„è¿‡ç¨‹ï¼š CAæ‹¥æœ‰éžå¯¹ç§°åŠ å¯†çš„ç§é’¥å’Œå…¬é’¥ã€‚ CAå¯¹è¯ä¹¦æ˜Žæ–‡ä¿¡æ¯è¿›è¡Œhashã€‚ å¯¹hashåŽçš„å€¼ç”¨ç§é’¥åŠ å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾åã€‚ æ˜Žæ–‡å’Œæ•°å­—ç­¾åå…±åŒç»„æˆäº†æ•°å­—è¯ä¹¦ï¼Œè¿™æ ·ä¸€ä»½æ•°å­—è¯ä¹¦å°±å¯ä»¥é¢å‘ç»™ç½‘ç«™äº†ã€‚ç½‘ç«™æŠŠè¿™ä¸ªæ•°å­—è¯ä¹¦ä¼ ç»™æµè§ˆå™¨ã€‚ é‚£æµè§ˆå™¨æ‹¿åˆ°æœåŠ¡å™¨ä¼ æ¥çš„æ•°å­—è¯ä¹¦åŽï¼Œå¦‚ä½•éªŒè¯å®ƒæ˜¯ä¸æ˜¯çœŸçš„ï¼Ÿï¼ˆæœ‰æ²¡æœ‰è¢«ç¯¡æ”¹ã€æŽ‰åŒ…ï¼‰ æµè§ˆå™¨éªŒè¯è¿‡ç¨‹ï¼š æ‹¿åˆ°è¯ä¹¦ï¼Œå¾—åˆ°æ˜Žæ–‡Tï¼Œæ•°å­—ç­¾åSã€‚ ç”¨CAæœºæž„çš„å…¬é’¥å¯¹Sè§£å¯†ï¼ˆç”±äºŽæ˜¯æµè§ˆå™¨ä¿¡ä»»çš„æœºæž„ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¿æœ‰å®ƒçš„å…¬é’¥ã€‚è¯¦æƒ…è§ä¸‹æ–‡ï¼‰ï¼Œå¾—åˆ°Sâ€™ã€‚ ç”¨è¯ä¹¦é‡Œè¯´æ˜Žçš„hashç®—æ³•å¯¹æ˜Žæ–‡Tè¿›è¡Œhashå¾—åˆ°Tâ€™ã€‚ æ¯”è¾ƒSâ€™æ˜¯å¦ç­‰äºŽTâ€™ï¼Œç­‰äºŽåˆ™è¡¨æ˜Žè¯ä¹¦å¯ä¿¡ã€‚ ä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥è¯æ˜Žè¯ä¹¦å¯ä¿¡å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä»”ç»†æƒ³ä¸€ä¸‹ã€‚ åäºŒã€ä¸­é—´äººæœ‰å¯èƒ½ç¯¡æ”¹è¯¥è¯ä¹¦å—ï¼Ÿ è€å¤§çˆ·å°±ç®—æœ‰å¤©å¤§çš„èƒ½è€ï¼Œä¹Ÿæ‹¿ä¸åˆ°åŠ å¯†çš„ç§é’¥ï¼Œé‚£ä¹ˆåªæ˜¯å•çº¯åœ°ç¯¡æ”¹æ˜Žæ–‡ï¼Œåªä¼šé€ æˆæ ¡éªŒä¸é€šè¿‡ã€‚ å›žåˆ°äº’è”ç½‘ï¼Œå‡è®¾ä¸­é—´äººç¯¡æ”¹äº†è¯ä¹¦çš„åŽŸæ–‡ï¼Œç”±äºŽä»–æ²¡æœ‰CAæœºæž„çš„ç§é’¥ï¼Œæ‰€ä»¥æ— æ³•å¾—åˆ°æ­¤æ—¶åŠ å¯†åŽç­¾åï¼Œæ— æ³•ç›¸åº”åœ°ç¯¡æ”¹ç­¾åã€‚ æµè§ˆå™¨æ”¶åˆ°è¯¥è¯ä¹¦åŽä¼šå‘çŽ°åŽŸæ–‡å’Œç­¾åè§£å¯†åŽçš„å€¼ä¸ä¸€è‡´ï¼Œåˆ™è¯´æ˜Žè¯ä¹¦å·²è¢«ç¯¡æ”¹ï¼Œè¯ä¹¦ä¸å¯ä¿¡ï¼Œä»Žè€Œç»ˆæ­¢å‘æœåŠ¡å™¨ä¼ è¾“ä¿¡æ¯ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²ç»™ä¸­é—´äººã€‚ åä¸‰ã€ä¸­é—´äººæœ‰å¯èƒ½æŠŠè¯ä¹¦æŽ‰åŒ…å—ï¼Ÿ å‡è®¾æœ‰å¦ä¸€ä¸ªç½‘ç«™Bä¹Ÿæ‹¿åˆ°äº†CAæœºæž„è®¤è¯çš„è¯ä¹¦ï¼Œå®ƒæƒ³æžåž®ç½‘ç«™Aï¼Œæƒ³åŠ«æŒç½‘ç«™Açš„ä¿¡æ¯ã€‚äºŽæ˜¯å®ƒæˆä¸ºä¸­é—´äººæ‹¦æˆªåˆ°äº†Aä¼ ç»™æµè§ˆå™¨çš„è¯ä¹¦ï¼Œç„¶åŽæ›¿æ¢æˆè‡ªå·±çš„è¯ä¹¦ï¼Œä¼ ç»™æµè§ˆå™¨ï¼Œä¹‹åŽæµè§ˆå™¨å°±ä¼šé”™è¯¯åœ°æ‹¿åˆ°Bçš„è¯ä¹¦é‡Œçš„å…¬é’¥äº†ï¼Œä¼šå¯¼è‡´ä¸Šæ–‡æåˆ°çš„æ¼æ´žã€‚ å…¶å®žè¿™å¹¶ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºè¯ä¹¦é‡ŒåŒ…å«äº†ç½‘ç«™Açš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸŸåï¼Œæµè§ˆå™¨æŠŠè¯ä¹¦é‡Œçš„åŸŸåä¸Žè‡ªå·±è¯·æ±‚çš„åŸŸåæ¯”å¯¹ä¸€ä¸‹å°±çŸ¥é“æœ‰æ²¡æœ‰è¢«æŽ‰åŒ…äº†ã€‚ æ€»ç»“ï¼šå› ä¸ºä¸€ä¸ªç½‘ç«™åŸŸåå¯¹åº”ä¸€ä¸ªè¯ä¹¦ï¼Œä½ çš„è¯ä¹¦æ ¹å…¶ä»–äººçš„è¯ä¹¦è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆä½ å°±ç®—æ‹¿åˆ°äº†å…¶ä»–äººçš„è¯ä¹¦å†æŽ‰åŒ…æˆè‡ªå·±çš„ï¼Œä¹Ÿæ²¡ç”¨ï¼Œæ¯•ç«Ÿæµè§ˆå™¨é‚£è¾¹åªè¦çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯æˆ‘è¦æŸ¥çœ‹çš„åŸŸåã€‚ åå››ã€ä¸ºä»€ä¹ˆåˆ¶ä½œæ•°å­—ç­¾åæ—¶éœ€è¦hashä¸€æ¬¡ï¼Ÿ æœ€æ˜¾ç„¶çš„æ˜¯æ€§èƒ½é—®é¢˜ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è¯´äº†éžå¯¹ç§°åŠ å¯†æ•ˆçŽ‡è¾ƒå·®ï¼Œè¯ä¹¦ä¿¡æ¯ä¸€èˆ¬è¾ƒé•¿ï¼Œæ¯”è¾ƒè€—æ—¶ã€‚è€ŒhashåŽå¾—åˆ°çš„æ˜¯å›ºå®šé•¿åº¦çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨md5ç®—æ³•hashåŽå¯ä»¥å¾—åˆ°å›ºå®šçš„128ä½çš„å€¼ï¼‰ï¼Œè¿™æ ·åŠ å¯†è§£å¯†å°±ä¼šå¿«å¾ˆå¤šã€‚ åäº”ã€æ€Žä¹ˆè¯æ˜ŽCAæœºæž„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Ÿ è®©æˆ‘ä»¬å›žæƒ³ä¸€ä¸‹æ•°å­—è¯ä¹¦åˆ°åº•æ˜¯å¹²å•¥çš„ï¼Ÿæ²¡é”™ï¼Œä¸ºäº†è¯æ˜ŽæŸå…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Œå³â€œè¯¥å…¬é’¥æ˜¯å¦å¯¹åº”è¯¥ç½‘ç«™/æœºæž„ç­‰â€ï¼Œé‚£è¿™ä¸ªCAæœºæž„çš„å…¬é’¥æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç”¨æ•°å­—è¯ä¹¦æ¥è¯æ˜Žï¼Ÿæ²¡é”™ï¼Œæ“ä½œç³»ç»Ÿã€æµè§ˆå™¨æœ¬èº«ä¼šé¢„è£…ä¸€äº›å®ƒä»¬ä¿¡ä»»çš„æ ¹è¯ä¹¦ï¼Œå¦‚æžœå…¶ä¸­æœ‰è¯¥CAæœºæž„çš„æ ¹è¯ä¹¦ï¼Œé‚£å°±å¯ä»¥æ‹¿åˆ°å®ƒå¯¹åº”çš„å¯ä¿¡å…¬é’¥äº†ã€‚ å®žé™…ä¸Šè¯ä¹¦ä¹‹é—´çš„è®¤è¯ä¹Ÿå¯ä»¥ä¸æ­¢ä¸€å±‚ï¼Œå¯ä»¥Aä¿¡ä»»Bï¼ŒBä¿¡ä»»Cï¼Œä»¥æ­¤ç±»æŽ¨ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åšä¿¡ä»»é“¾æˆ–æ•°å­—è¯ä¹¦é“¾ï¼Œä¹Ÿå°±æ˜¯ä¸€è¿žä¸²çš„æ•°å­—è¯ä¹¦ï¼Œç”±æ ¹è¯ä¹¦ä¸ºèµ·ç‚¹ï¼Œé€è¿‡å±‚å±‚ä¿¡ä»»ï¼Œä½¿ç»ˆç«¯å®žä½“è¯ä¹¦çš„æŒæœ‰è€…å¯ä»¥èŽ·å¾—è½¬æŽˆçš„ä¿¡ä»»ï¼Œä»¥è¯æ˜Žèº«ä»½ã€‚ å¦å¤–ï¼Œä¸çŸ¥ä½ ä»¬æ˜¯å¦é‡åˆ°è¿‡ç½‘ç«™è®¿é—®ä¸äº†ã€æç¤ºè¦å®‰è£…è¯ä¹¦çš„æƒ…å†µï¼Ÿè¿™é‡Œå®‰è£…çš„å°±æ˜¯æ ¹è¯ä¹¦ã€‚è¯´æ˜Žæµè§ˆå™¨ä¸è®¤ç»™è¿™ä¸ªç½‘ç«™é¢å‘è¯ä¹¦çš„æœºæž„ï¼Œé‚£ä¹ˆæ²¡æœ‰è¯¥æœºæž„çš„æ ¹è¯ä¹¦ï¼Œä½ å°±å¾—æ‰‹åŠ¨ä¸‹è½½å®‰è£…ï¼ˆé£Žé™©è‡ªå·±æ‰¿æ‹…XDï¼‰ã€‚å®‰è£…è¯¥æœºæž„çš„æ ¹è¯ä¹¦åŽï¼Œä½ å°±æœ‰äº†å®ƒçš„å…¬é’¥ï¼Œå°±å¯ä»¥ç”¨å®ƒéªŒè¯æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦æ˜¯å¦å¯ä¿¡äº†ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¬é’¥æ˜¯ä»Žè¯ä¹¦ä¸­èŽ·å–çš„ã€‚è¯ä¹¦æ˜¯ç½‘ç«™ä»Žæœºæž„é‚£è¾¹ç”³è¯·æ¥çš„ï¼Œè¯ä¹¦+ç­¾åä¼ ç»™æµè§ˆå™¨ã€‚åªè¦æ ¡éªŒé€šè¿‡ï¼Œé‚£ä¹ˆå…¬é’¥å¿…ç„¶æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ï¼Œå¹¶ä¸”ä¸€å®šæ˜¯è¿™ä¸ªç½‘ç«™ä¼ æ¥çš„ï¼Œé‚£ä¹ˆè§£å†³äº†æˆ‘ä»¬æœ€æ ¸å¿ƒçš„é—®é¢˜ï¼šç¡®å®šå…¬é’¥æ˜¯æˆ‘ä»¬æŒ‡å®šçš„ç½‘ç«™ä¼ æ¥çš„ã€‚ æ—¢ç„¶å…¬é’¥æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆå°çº¢å°±ä¼šç”¨æ­£ç¡®çš„å…¬é’¥å¯¹éšæœºå­—ç¬¦ä¸²åŠ å¯†ï¼Œä¸­é—´ä¸ä¼šå‡ºçŽ°ç¯¡æ”¹ã€‚ åå…­ã€HTTPSå¿…é¡»åœ¨æ¯æ¬¡è¯·æ±‚ä¸­éƒ½è¦å…ˆåœ¨SSL/TLSå±‚è¿›è¡Œæ¡æ‰‹ä¼ è¾“å¯†é’¥å—ï¼Ÿ è¿™ä¹Ÿæ˜¯æˆ‘å½“æ—¶çš„å›°æƒ‘ä¹‹ä¸€ï¼Œæ˜¾ç„¶æ¯æ¬¡è¯·æ±‚éƒ½ç»åŽ†ä¸€æ¬¡å¯†é’¥ä¼ è¾“è¿‡ç¨‹éžå¸¸è€—æ—¶ï¼Œé‚£æ€Žä¹ˆè¾¾åˆ°åªä¼ è¾“ä¸€æ¬¡å‘¢ï¼Ÿç”¨sessionå°±è¡Œã€‚ æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªæµè§ˆå™¨ï¼ˆæˆ–å®¢æˆ·ç«¯è½¯ä»¶ï¼‰ç»´æŠ¤ä¸€ä¸ªsession IDï¼Œåœ¨TSLæ¡æ‰‹é˜¶æ®µä¼ ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ç”Ÿæˆå¥½å¯†é’¥ä¼ ç»™æœåŠ¡å™¨åŽï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯¥å¯†é’¥å­˜åˆ°ç›¸åº”çš„session IDä¸‹ï¼Œä¹‹åŽæµè§ˆå™¨æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦session IDï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®session IDæ‰¾åˆ°ç›¸åº”çš„å¯†é’¥å¹¶è¿›è¡Œè§£å¯†åŠ å¯†æ“ä½œï¼Œè¿™æ ·å°±ä¸å¿…è¦æ¯æ¬¡é‡æ–°åˆ¶ä½œã€ä¼ è¾“å¯†é’¥äº†ï¼ åä¸ƒã€HTTPSåŽŸç† ä¸‹é¢å†æ¥çœ‹çœ‹HTTPSåŽŸç†å°±ç‰¹åˆ«ç®€å•å•¦ï¼ HTTPS åè®®ï¼ˆHyperText Transfer Protocol over Secure Socket Layerï¼‰ï¼šå¯ä»¥ç†è§£ä¸ºHTTP+SSL/TLSï¼Œ å³ HTTP ä¸‹åŠ å…¥ SSL å±‚ï¼ŒHTTPS çš„å®‰å…¨åŸºç¡€æ˜¯ SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦ SSLï¼Œç”¨äºŽå®‰å…¨çš„ HTTP æ•°æ®ä¼ è¾“ã€‚ 1234HTTPSSL/TLSTCPIP æˆ‘ä»¬åªè¦çŸ¥é“ï¼Œåœ¨SSLå±‚é‡Œé¢å¯ä»¥å®Œæˆæ ¡éªŒå’Œå¯†é’¥çš„ä¼ è¾“ã€‚ ç†è§£äº†ä¸Šé¢ï¼Œè¿™ä¸ªå›¾ä¹Ÿå°±æ²¡å•¥å¥½è§£é‡Šçš„äº†ã€‚ æ•´ç†è‡ªï¼šhttps://zhuanlan.zhihu.com/p/43789231]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPåŸºç¡€çŸ¥è¯†æç‚¼]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F6.HTTP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%8F%90%E7%82%BC%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬å…­ç¯‡æ–‡ç« ã€‚è¿™é‡Œç®€å•è®°å½•ä¸€äº›å…³äºŽHTTPçš„åŸºæœ¬æ¦‚å¿µï¼Œæ¯”è¾ƒåŸºç¡€ã€‚ä¸‹é¢çš„å†…å®¹æ˜¯å¯¹ã€Šå›¾è§£HTTPã€‹æç‚¼çš„å†æç‚¼ï¼Œä¸»è¦åŽŸå› æ˜¯å¾ˆå¤šé‡è¦çš„ä¸œè¥¿å‰é¢å·²ç»è¯¦ç»†è¯´è¿‡äº†ï¼Œè¿˜æœ‰ä¸€äº›ä¸œè¥¿çŸ¥é“å³å¯ï¼Œç”¨åˆ°å†åŽ»æŸ¥ï¼Œä½œä¸ºä¸€ä¸ªåŽç«¯æ”»åŸŽç‹®ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦äº†è§£é‚£ä¹ˆçç¢Žã€‚ HTTPæ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®® HTTPæ˜¯æ— çŠ¶æ€åè®®ã€‚è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ï¼ˆå³ä¸åšæŒä¹…åŒ–å¤„ç†ï¼‰ã€‚ HTTPä¹‹æ‰€ä»¥è®¾è®¡å¾—å¦‚æ­¤ç®€å•ï¼Œæ˜¯ä¸ºäº†æ›´å¿«åœ°å¤„ç†å¤§é‡äº‹ç‰©ï¼Œç¡®ä¿åè®®çš„å¯ä¼¸ç¼©æ€§ã€‚ HTTP/1.1 éšæ—¶æ— çŠ¶æ€åè®®ï¼Œä½†å¯é€šè¿‡ Cookie æŠ€æœ¯ä¿å­˜çŠ¶æ€ã€‚ å‘ŠçŸ¥æœåŠ¡å™¨æ„å›¾çš„HTTPæ–¹æ³• GETï¼šèŽ·å–èµ„æº POSTï¼šä¼ è¾“å®žä½“ä¸»ä½“ PUTï¼šä¼ è¾“æ–‡ä»¶ HEADï¼šèŽ·å¾—æŠ¥æ–‡é¦–éƒ¨ï¼Œä¸ŽGETæ–¹æ³•ä¸€æ ·ï¼Œåªæ˜¯ä¸è¿”å›žæŠ¥æ–‡ä¸»ä½“å†…å®¹ã€‚ç”¨äºŽç¡®è®¤URIçš„æœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚ DELETEï¼šåˆ é™¤æ–‡ä»¶ï¼Œä¸ŽPUTç›¸åï¼ˆå“åº”è¿”å›ž204 No Contentï¼‰ã€‚ OPTIONSï¼šè¯¢é—®æ”¯æŒçš„æ–¹æ³•ï¼ŒæŸ¥è¯¢é’ˆå¯¹è¯·æ±‚URIæŒ‡å®šçš„èµ„æºæ”¯æŒçš„æ–¹æ³•ï¼ˆAllow:GETã€POSTã€HEADã€OPTIONSï¼‰ã€‚ TRACEï¼šè¿½è¸ªè·¯å¾„ CONNECTï¼šè¦æ±‚ç”¨éš§é“åè®®è¿žæŽ¥ä»£ç†ï¼ˆä¸»è¦ä½¿ç”¨SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æŽ¥å±‚ï¼‰å’ŒTLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åŽç»ç½‘ç»œéš§é“ä¼ è¾“ï¼‰ã€‚ URIã€URL å®˜æ–¹è§£é‡Šéƒ½æ˜¯ä»€ä¹ˆä¹±èµ·å…«ç³Ÿçš„ä¸œè¥¿ã€‚å„ç§åšå®¢ä¹Ÿæ˜¯è·Ÿç€æŠ„ï¼Œè¿™ä¸¤è€…åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»å’Œæ„ä¹‰ï¼Ÿ ç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦URIå°±æ˜¯åœ¨æŸä¸€è§„åˆ™ä¸‹èƒ½æŠŠä¸€ä¸ªèµ„æºç‹¬ä¸€æ— äºŒåœ°æ ‡è¯†å‡ºæ¥ã€‚ å¯¹åº”äºŽå®žé™…ä¾‹å­å°±æ˜¯ï¼šæ¯ä¸ªäººéƒ½æœ‰èº«ä»½è¯ï¼Œè¿™ä¸ªèº«ä»½è¯å·ç å°±å¯¹åº”è¿™ä¸ªäººã€‚æ¯”å¦‚å¼ ä¸‰çš„èº«ä»½è¯å·ç ä¸º123456ï¼Œé‚£ä¹ˆæˆ‘åªè¦çŸ¥é“123456å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªäººã€‚ é‚£ä»€ä¹ˆæ˜¯URLå‘¢ï¼Ÿä»Žåå­—çœ‹æ˜¯ï¼šç»Ÿä¸€èµ„æºå®šä½å™¨ã€‚ å¦‚æžœåšç±»æ¯”ï¼ŒURLå°±æ˜¯ï¼šåŠ¨ç‰©ä½å€åè®®://åœ°çƒ/ä¸­å›½/æµ™æ±Ÿçœ/æ­å·žå¸‚/è¥¿æ¹–åŒº/æŸå¤§å­¦/14å·å®¿èˆæ¥¼/525å·å¯/å¼ ä¸‰.äºº æˆ‘ä»¬é€šè¿‡è¿™ä¸ªè¯¦ç»†çš„åœ°å€ä¹Ÿå¯ä»¥æ‰¾åˆ°å¼ ä¸‰è¿™ä¸ªäººã€‚ é‚£ä¹ˆä»–ä»¬ä¿©åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ URIæ˜¯ä»¥æŸç§è§„åˆ™å”¯ä¸€åœ°æ ‡è¯†èµ„æºï¼Œæ‰‹æ®µä¸é™ï¼Œæ¯”å¦‚èº«ä»½è¯å·ã€‚å½“ç„¶äº†ï¼Œåœ°å€å¯ä»¥å”¯ä¸€æ ‡è¯†ï¼Œé‚£ä¹ˆä¹Ÿå±žäºŽURIçš„ä¸€ç§æ‰‹æ®µã€‚æ‰€ä»¥è¯´URLæ˜¯URIçš„å­é›†ã€‚ å›žåˆ°Webä¸Šï¼Œå‡è®¾æ‰€æœ‰çš„Htmlæ–‡æ¡£éƒ½æœ‰å”¯ä¸€çš„ç¼–å·ï¼Œè®°ä½œhtml:xxxxxï¼Œxxxxxæ˜¯ä¸€ä¸²æ•°å­—ï¼Œå³Htmlæ–‡æ¡£çš„èº«ä»½è¯å·ç ï¼Œè¿™ä¸ªèƒ½å”¯ä¸€æ ‡è¯†ä¸€ä¸ªHtmlæ–‡æ¡£ï¼Œé‚£ä¹ˆè¿™ä¸ªå·ç å°±æ˜¯ä¸€ä¸ªURIã€‚ è€ŒURLåˆ™é€šè¿‡æè¿°æ˜¯å“ªä¸ªä¸»æœºä¸Šå“ªä¸ªè·¯å¾„ä¸Šçš„æ–‡ä»¶æ¥å”¯ä¸€ç¡®å®šä¸€ä¸ªèµ„æºï¼Œä¹Ÿå°±æ˜¯å®šä½çš„æ–¹å¼æ¥å®žçŽ°çš„URIã€‚ å¯¹äºŽçŽ°åœ¨ç½‘å€æˆ‘æ›´å€¾å‘äºŽå«å®ƒURLï¼Œæ¯•ç«Ÿå®ƒæä¾›äº†èµ„æºçš„ä½ç½®ä¿¡æ¯ï¼Œå¦‚æžœæœ‰ä¸€å¤©ç½‘å€é€šè¿‡å·ç æ¥æ ‡è¯†å˜æˆäº†http://741236985.htmlï¼Œé‚£æ„Ÿè§‰å«æˆURIæ›´ä¸ºåˆé€‚ã€‚ HTTPè¯·æ±‚æŠ¥æ–‡ è¿”å›žç»“æžœçš„HTTPçŠ¶æ€ç  çŠ¶æ€ç çš„èŒè´£æ˜¯å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œæè¿°è¿”å›žçš„è¯·æ±‚ç»“æžœã€‚ çŠ¶æ€ç å¦‚200 OKï¼Œä»¥3ä¸ºæ•°å­—å’ŒåŽŸå› çŸ­è¯­ç»„æˆã€‚ æ•°å­—ä¸­çš„ç¬¬ä¸€ä½å®šä¹‰äº†å“åº”ç±»åˆ«ï¼ŒåŽä¸¤ä½æ— åˆ†ç±»ã€‚å“åº”ç±»åˆ«æœ‰ä»¥ä¸‹äº”ç§ï¼š ç±»åˆ« åŽŸå› çŸ­è¯­ 1XX Informational(ä¿¡æ¯æ€§çŠ¶æ€ç ) 2XX Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ 3XX Redirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ 4XX Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ 5XX Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ â­2XX æˆåŠŸ 200 OKï¼šè¯·æ±‚è¢«æ­£å¸¸å¤„ç† 204 No Contentï¼šä¸€èˆ¬åœ¨åªéœ€ä»Žå®¢æˆ·ç«¯å¾€æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œè€Œå¯¹å®¢æˆ·ç«¯ä¸éœ€è¦å‘é€æ–°ä¿¡æ¯å†…å®¹çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ 206 Partial Contentï¼šå®¢æˆ·ç«¯è¿›è¡ŒèŒƒå›´è¯·æ±‚ â­3XX é‡å®šå‘ 301 Moved Permanentlyï¼šæ°¸ä¹…é‡å®šå‘ã€‚è¡¨ç¤ºè¯·æ±‚çš„èµ„æºå·²è¢«åˆ†é…äº†æ–°çš„URIï¼Œä»¥åŽåº”ä½¿ç”¨èµ„æºçŽ°åœ¨æ‰€æŒ‡çš„URIã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœå·²ç»æŠŠèµ„æºå¯¹åº”çš„URIä¿å­˜ä¸ºä¹¦ç­¾äº†ï¼Œè¿™æ—¶åº”è¯¥æŒ‰Locationé¦–éƒ¨å­—æ®µæç¤ºçš„URIé‡æ–°ä¿å­˜ã€‚ 302 Foundï¼šä¸´æ—¶æ€§é‡å®šå‘ã€‚è¡¨ç¤ºè¯·æ±‚çš„èµ„æºå·²è¢«åˆ†é…äº†æ–°çš„URIï¼Œå¸Œæœ›ç”¨æˆ·ï¼ˆæœ¬æ¬¡ï¼‰èƒ½ä½¿ç”¨æ–°çš„URIè®¿é—®ã€‚ å’Œ301 Moved PermanentlyçŠ¶æ€ç ç›¸ä¼¼ï¼Œä½†302çŠ¶æ€ç ä»£è¡¨çš„èµ„æºä¸æ˜¯è¢«æ°¸ä¹…ç§»åŠ¨ï¼Œåªæ˜¯ä¸´æ—¶æ€§è´¨çš„ã€‚æ¢å¥è¯è¯´ï¼Œå·²ç§»åŠ¨çš„èµ„æºå¯¹åº”çš„URIå°†æ¥è¿˜æœ‰å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·æŠŠURIä¿å­˜æˆä¹¦ç­¾ï¼Œä½†ä¸ä¼šåƒ301çŠ¶æ€ç å‡ºçŽ°æ—¶é‚£æ ·åŽ»æ›´æ–°ä¹¦ç­¾ï¼Œè€Œæ˜¯ä»æ—§ä¿ç•™è¿”å›ž302çŠ¶æ€ç çš„é¡µé¢å¯¹åº”çš„URIï¼ˆåœ¨Chromeä¸­ï¼Œè¿˜æ˜¯ä¼šä¿å­˜ä¸ºé‡å®šå‘åŽçš„URIï¼Œä¸è§£ï¼‰ã€‚ 303 See Otherï¼šè¡¨ç¤ºç”±äºŽè¯·æ±‚å¯¹åº”çš„èµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ªURIï¼Œåº”ä½¿ç”¨GETæ–¹æ³•å®šå‘èŽ·å–è¯·æ±‚çš„èµ„æºã€‚è¿™ä¸Ž302ç±»ä¼¼ï¼Œä½†303æ˜Žç¡®è¡¨ç¤ºå®¢æˆ·ç«¯åº”å½“é‡‡ç”¨GETæ–¹æ³•èŽ·å–èµ„æºã€‚ 304 Not Modifiedï¼šè¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶çš„è¯·æ±‚ï¼ˆæŒ‡é‡‡ç”¨GETæ–¹æ³•çš„è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å«If-Match,If-Modified-Sinceï¼ŒIf-None-Marchï¼ŒIf-Rangeï¼ŒIf-Unmodified-Sinceä¸­ä»»ä¸€é¦–éƒ¨ã€‚ï¼‰æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å…è®¸è¯·æ±‚è®¿é—®èµ„æºï¼Œä½†å› å‘ç”Ÿè¯·æ±‚ä¸ºæ»¡è¶³æ¡ä»¶çš„æƒ…å†µåŽï¼Œç›´æŽ¥è¿”å›ž304ï¼ˆæœåŠ¡å™¨ç«¯èµ„æºæœªæ”¹å˜ï¼Œå¯ç›´æŽ¥ä½¿ç”¨å®¢æˆ·ç«¯æœªè¿‡æœŸçš„ç¼“å­˜ï¼‰ã€‚304çŠ¶æ€ç è¿”å›žæ—¶ï¼Œä¸åŒ…å«ä»»ä½•å“åº”çš„ä¸»ä½“éƒ¨åˆ†ã€‚ 304è™½è¢«åˆ’åˆ†åœ¨3XXç±»åˆ«ï¼Œä½†æ˜¯å’Œé‡å®šå‘æ²¡æœ‰å…³ç³»ã€‚ 307 Temporary Redirectï¼šä¸´æ—¶é‡å®šå‘ã€‚ä¸Ž302æœ‰ç›¸åŒå«ä¹‰ã€‚307éµå®ˆæµè§ˆå™¨æ ‡å‡†ï¼Œä¸ä¼šä»ŽPOSTå˜æˆGETã€‚ â­4XX å®¢æˆ·ç«¯é”™è¯¯ 4XXçš„å“åº”ç»“æžœè¡¨æ˜Žå®¢æˆ·ç«¯æ˜¯å‘ç”Ÿé”™è¯¯çš„åŽŸå› æ‰€åœ¨ã€‚ 400 Bad Requestï¼šè¡¨ç¤ºè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚ 401 Unauthorizedï¼šè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡HTTPè®¤è¯ï¼ˆBASICè®¤è¯ã€DIGESTè®¤è¯ï¼‰çš„è®¤è¯ä¿¡æ¯ã€‚ 403 Forbiddenï¼šè¡¨æ˜Žå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»äº†ã€‚æœåŠ¡å™¨ç«¯å¯åœ¨å®žä½“çš„ä¸»ä½“éƒ¨åˆ†å¯¹åŽŸå› è¿›è¡Œæè¿°ï¼ˆå¯é€‰ï¼‰ 404 Not Foundï¼šè¡¨æ˜ŽæœåŠ¡å™¨ä¸Šæ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æºã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æ‹’ç»è¯·æ±‚ä¸”ä¸æƒ³è¯´æ˜Žç†ç”±æ—¶æ—¶ç”¨ã€‚ â­5XX æœåŠ¡å™¨é”™è¯¯ 5XXçš„å“åº”ç»“æžœè¡¨æ˜ŽæœåŠ¡å™¨æœ¬èº«å‘ç”Ÿé”™è¯¯ã€‚ 500 Interval Server Errorï¼šè¡¨æ˜ŽæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯Webåº”ç”¨å­˜åœ¨çš„bugæˆ–æŸäº›ä¸´æ—¶çš„æ•…éšœã€‚ 503 Service Unavailableï¼šè¡¨æ˜ŽæœåŠ¡å™¨æš‚æ—¶å¤„äºŽè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼ŒçŽ°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚å¦‚æžœäº‹å…ˆå¾—çŸ¥è§£é™¤ä»¥ä¸ŠçŠ¶å†µéœ€è¦çš„æ—¶é—´ï¼Œæœ€å¥½å†™å…¥Retry-Afteré¦–éƒ¨å­—æ®µå†è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ HTTPçš„ç“¶é¢ˆ ä¸€æ¡è¿žæŽ¥ä¸Šåªå¯å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ˆå‰é¢è®²åˆ°ï¼ŒæŒä¹…åŒ–å¯ä¿æŒTCPè¿žæŽ¥çŠ¶æ€ï¼Œä½†ä»å®Œæˆä¸€æ¬¡è¯·æ±‚/å“åº”åŽæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡è¯·æ±‚/å“åº”ï¼Œè€Œç®¡çº¿åŒ–æ–¹å¼å¯è®©ä¸€ä¸ªTCPè¿žæŽ¥å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ã€‚ï¼‰ è¯·æ±‚åªèƒ½ä»Žå®¢æˆ·ç«¯å¼€å§‹ã€‚å®¢æˆ·ç«¯ä¸å¯ä»¥æŽ¥æ”¶é™¤å“åº”ä»¥å¤–çš„æŒ‡ä»¤ è¯·æ±‚/å“åº”é¦–éƒ¨æœªç»åŽ‹ç¼©å°±å‘é€ã€‚é¦–éƒ¨ä¿¡æ¯è¶Šå¤šå»¶è¿Ÿè¶Šå¤§ å‘é€å†—é•¿(é‡å¤)çš„é¦–éƒ¨ã€‚æ¯æ¬¡äº’ç›¸å‘é€ç›¸åŒçš„é¦–éƒ¨é€ æˆçš„æµªè´¹è¾ƒå¤š SPDYä»¥ä¼šè¯å±‚çš„å½¢å¼åŠ å…¥ï¼ŒæŽ§åˆ¶å¯¹æ•°æ®çš„æµåŠ¨ï¼Œä½†è¿˜æ˜¯é‡‡ç”¨HTTPå»ºç«‹é€šä¿¡è¿žæŽ¥ã€‚å› æ­¤ï¼Œå¯ç…§å¸¸ä½¿ç”¨HTTPçš„GETå’ŒPOSTç­‰æ–¹æ³•ã€Cookieä»¥åŠHTTPæŠ¥æ–‡ç­‰ã€‚ ä½¿ç”¨ SPDYåŽï¼ŒHTTPåè®®é¢å¤–èŽ·å¾—ä»¥ä¸‹åŠŸèƒ½ã€‚ å¤šè·¯å¤ç”¨æµï¼šé€šè¿‡å•ä¸€çš„TCPè¿žæŽ¥ï¼Œå¯ä»¥æ— é™åˆ¶å¤„ç†å¤šä¸ªHTTPè¯·æ±‚ã€‚æ‰€æœ‰è¯·æ±‚çš„å¤„ç†éƒ½åœ¨ä¸€æ¡TCPè¿žæŽ¥ä¸Šå®Œæˆï¼Œå› æ­¤TCPçš„å¤„ç†æ•ˆçŽ‡å¾—åˆ°æé«˜ã€‚ èµ‹äºˆè¯·æ±‚ä¼˜å…ˆçº§ï¼šSPDYä¸ä»…å¯ä»¥æ— é™åˆ¶åœ°å¹¶å‘å¤„ç†è¯·æ±‚ï¼Œè¿˜å¯ä»¥ç»™è¯·æ±‚é€ä¸ªåˆ†é…ä¼˜å…ˆçº§é¡ºåºã€‚è¿™æ ·ä¸»è¦æ˜¯ä¸ºäº†åœ¨å‘é€å¤šä¸ªè¯·æ±‚æ—¶ï¼Œè§£å†³å› å¸¦å®½ä½Žè€Œå¯¼è‡´å“åº”å˜æ…¢çš„é—®é¢˜ã€‚ åŽ‹ç¼©HTTPé¦–éƒ¨ï¼šåŽ‹ç¼©HTTPè¯·æ±‚å’Œå“åº”çš„é¦–éƒ¨ã€‚ æŽ¨é€åŠŸèƒ½ï¼šæ”¯æŒæœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æŽ¨é€æ•°æ®çš„åŠŸèƒ½ã€‚ æœåŠ¡å™¨æç¤ºåŠŸèƒ½ï¼šæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨æç¤ºå®¢æˆ·ç«¯è¯·æ±‚æ‰€éœ€çš„èµ„æºã€‚ç”±äºŽåœ¨å®¢æˆ·ç«¯å‘çŽ°èµ„æºä¹‹å‰å°±å¯ä»¥èŽ·çŸ¥èµ„æºçš„å­˜åœ¨ï¼Œå› æ­¤åœ¨èµ„æºå·²ç¼“å­˜ç­‰æƒ…å†µä¸‹ï¼Œå¯ä»¥é¿å…å‘é€ä¸å¿…è¦çš„è¯·æ±‚ã€‚ WebSocket åˆ©ç”¨Ajaxå’ŒCometæŠ€æœ¯è¿›è¡Œé€šä¿¡å¯ä»¥æå‡Webçš„æµè§ˆé€Ÿåº¦ã€‚ä½†é—®é¢˜åœ¨äºŽé€šä¿¡è‹¥ä½¿ç”¨HTTPåè®®ï¼Œå°±æ— æ³•å½»åº•è§£å†³ç“¶é¢ˆé—®é¢˜ã€‚ WebSocketæŠ€æœ¯ä¸»è¦æ˜¯ä¸ºäº†è§£å†³Ajaxå’ŒCometé‡ŒXMLHttpRequsté™„å¸¦çš„ç¼ºé™·æ‰€å¼•èµ·çš„é—®é¢˜ã€‚ ä¸€æ—¦WebæœåŠ¡å™¨ä¸Žå®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹èµ·WebSocketåè®®çš„é€šä¿¡è¿žæŽ¥ï¼Œä¹‹åŽæ‰€æœ‰çš„é€šä¿¡éƒ½ä¾é è¿™ä¸ªä¸“ç”¨åè®®è¿›è¡Œã€‚é€šä¿¡è¿‡ç¨‹ä¸­å¯äº’ç›¸å‘é€JSONã€XMLã€HTMLæˆ–å›¾ç‰‡ç­‰ä»»æ„æ ¼å¼çš„æ•°æ®ã€‚ WebSocketçš„ä¸»è¦ç‰¹ç‚¹ï¼š æŽ¨é€åŠŸèƒ½ï¼šæ”¯æŒç”±æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æŽ¨é€æ•°æ®ã€‚ å‡å°‘é€šä¿¡é‡ï¼šå’ŒHTTPç›¸æ¯”ï¼Œä¸ä½†æ¯æ¬¡è¿žæŽ¥æ—¶çš„æ€»å¼€é”€å‡å°‘ï¼Œè€Œä¸”ç”±äºŽWebSocketçš„é¦–éƒ¨ä¿¡æ¯å¾ˆå°ï¼Œé€šä¿¡é‡ä¹Ÿç›¸åº”è¾ƒå°‘ã€‚ ä¸ºäº†å®žçŽ°WebSocketé€šä¿¡ï¼Œåœ¨HTTPè¿žæŽ¥å»ºç«‹ä¹‹åŽï¼Œéœ€è¦å®Œæˆä¸€æ¬¡â€œæ¡æ‰‹â€çš„æ­¥éª¤ã€‚ æ¡æ‰‹Â·è¯·æ±‚ï¼šä¸ºäº†å®žçŽ°WebSocketé€šä¿¡ï¼Œéœ€è¦ç”¨åˆ°HTTPçš„Upgradeé¦–éƒ¨å­—æ®µï¼Œå‘ŠçŸ¥æœåŠ¡å™¨é€šä¿¡åè®®å‘ç”Ÿæ”¹å˜ï¼Œä»¥è¾¾åˆ°æ¡æ‰‹çš„ç›®çš„ã€‚ æ¡æ‰‹Â·å“åº”ï¼šå¯¹äºŽä¹‹å‰çš„è¯·æ±‚ï¼Œè¿”å›žçŠ¶æ€ç 101 Switching Protocols çš„å“åº”ã€‚ æˆåŠŸæ¡æ‰‹ç¡®ç«‹WebSocketè¿žæŽ¥åŽï¼Œé€šä¿¡æ—¶ä¸å†ä½¿ç”¨HTTPçš„æ•°æ®å¸§ï¼Œè€Œé‡‡ç”¨WebSocketç‹¬ç«‹çš„æ•°æ®å¸§ã€‚ ç”±äºŽæ˜¯å»ºç«‹åœ¨HTTPåŸºç¡€ä¸Šçš„åè®®ï¼Œå› æ­¤è¿žæŽ¥çš„å‘èµ·æ–¹ä»æ˜¯å®¢æˆ·ç«¯ï¼Œè€Œä¸€æ—¦ç¡®ç«‹WebSocketé€šä¿¡è¿žæŽ¥ï¼Œä¸è®ºæœåŠ¡å™¨ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œä»»æ„ä¸€æ–¹éƒ½å¯ç›´æŽ¥å‘å¯¹æ–¹å‘é€æŠ¥æ–‡ã€‚ æ•´ç†è‡ªï¼šhttps://github.com/JChehe/blog/blob/master/posts/ã€Šå›¾è§£HTTPã€‹è¯»ä¹¦ç¬”è®°.md]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F5.TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬äº”ç¯‡æ–‡ç« ã€‚é¢è¯•è®²åˆ°TCPï¼Œé‚£ä¹ˆåŸºæœ¬éƒ½ä¼šé—®ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ï¼Œä»¥åŠæ¯”å¦‚å¯¹äºŽæ¡æ‰‹ï¼Œä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–è€…å››æ¬¡ï¼Œæœ¬ç« è¯¦ç»†æŽ¢è®¨å…¶ä¸­çš„é—¨é“ã€‚ 1.å¤ä¹  é¦–å…ˆé’ˆå¯¹httpåè®®ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å¤ä¹ ä¸€ä¸‹æœ€é‡è¦çš„ä¸œè¥¿ã€‚ HTTPåè®®å³è¶…æ–‡æœ¬ä¼ é€åè®®(Hypertext Transfer Protocol )ï¼Œæ˜¯Webè”ç½‘çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯æ‰‹æœºè”ç½‘å¸¸ç”¨çš„åè®®ä¹‹ä¸€ï¼ŒHTTPåè®®æ˜¯å»ºç«‹åœ¨TCPåè®®ä¹‹ä¸Šçš„ä¸€ç§åº”ç”¨ã€‚ åœ¨HTTP 1.0ä»¥0.9ç‰ˆæœ¬ä¸­ï¼Œå®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚éƒ½è¦æ±‚å»ºç«‹ä¸€æ¬¡å•ç‹¬çš„è¿žæŽ¥ï¼Œåœ¨å¤„ç†å®Œæœ¬æ¬¡è¯·æ±‚åŽï¼Œå°±è‡ªåŠ¨é‡Šæ”¾è¿žæŽ¥ã€‚ åœ¨HTTP 1.1ä¸­åˆ™å¯ä»¥åœ¨ä¸€æ¬¡è¿žæŽ¥ä¸­å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å¤šä¸ªè¯·æ±‚å¯ä»¥é‡å è¿›è¡Œï¼Œä¸éœ€è¦ç­‰å¾…ä¸€ä¸ªè¯·æ±‚ç»“æŸåŽå†å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ ç”±äºŽHTTPåœ¨æ¯æ¬¡è¯·æ±‚ç»“æŸåŽéƒ½ä¼šä¸»åŠ¨é‡Šæ”¾è¿žæŽ¥ï¼Œå› æ­¤HTTPè¿žæŽ¥æ˜¯ä¸€ç§â€œçŸ­è¿žæŽ¥â€ï¼Œè¦ä¿æŒå®¢æˆ·ç«¯ç¨‹åºçš„åœ¨çº¿çŠ¶æ€ï¼Œéœ€è¦ä¸æ–­åœ°å‘æœåŠ¡å™¨å‘èµ·è¿žæŽ¥è¯·æ±‚ã€‚ é€šå¸¸çš„åšæ³•æ˜¯å³ä½¿ä¸éœ€è¦èŽ·å¾—ä»»ä½•æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¿æŒæ¯éš”ä¸€æ®µå›ºå®šçš„æ—¶é—´å‘æœåŠ¡å™¨å‘é€ä¸€æ¬¡â€œä¿æŒè¿žæŽ¥â€çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯¥è¯·æ±‚åŽå¯¹å®¢æˆ·ç«¯è¿›è¡Œå›žå¤ï¼Œè¡¨æ˜ŽçŸ¥é“ å®¢æˆ·ç«¯â€œåœ¨çº¿â€ã€‚ è‹¥æœåŠ¡å™¨é•¿æ—¶é—´æ— æ³•æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œåˆ™è®¤ä¸ºå®¢æˆ·ç«¯â€œä¸‹çº¿â€ï¼Œè‹¥å®¢æˆ·ç«¯é•¿æ—¶é—´æ— æ³•æ”¶åˆ°æœåŠ¡å™¨çš„å›žå¤ï¼Œåˆ™è®¤ä¸ºç½‘ç»œå·²ç»æ–­å¼€ã€‚ 2.SOCKETåŽŸç† 2.1 å¥—æŽ¥å­—ï¼ˆsocketï¼‰æ¦‚å¿µ åˆæ¬¡æŽ¥è§¦è¿™ä¸ªåè¯ï¼šâ€œå¥—æŽ¥å­—â€ï¼Œè¯´å®žè¯ï¼Œå¿ƒé‡Œæ˜¯è’™è”½çš„ï¼Œè¿™æ˜¯å•¥çŽ©æ„ï¼Œä½†æ˜¯å¯ä»¥åŽ»æœç´¢ä¸€ä¸‹ä»€ä¹ˆæ˜¯å¥—æŽ¥ç®¡ï¼š æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸¤ä¸ªç®¡å­å¯èƒ½ç›´æŽ¥è¿žçš„è¯è¿žä¸èµ·æ¥ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä¸­é—´ä¸€ä¸ªä¸œè¥¿è¿žæŽ¥èµ·æ¥ã€‚ é‚£ä¹ˆï¼ŒçŽ°åœ¨å°±å¥½ç†è§£äº†ï¼Œä¸¤ä¸ªç¨‹åºè¦é€šä¿¡ï¼Œéœ€è¦çŸ¥é“å¯¹æ–¹çš„ä¸€äº›ä¿¡æ¯ï¼šè¿žæŽ¥ä½¿ç”¨çš„åè®®ï¼Œæœ¬åœ°ä¸»æœºçš„IPåœ°å€ï¼Œæœ¬åœ°è¿›ç¨‹çš„åè®®ç«¯å£ï¼Œè¿œåœ°ä¸»æœºçš„IPåœ°å€ï¼Œè¿œåœ°è¿›ç¨‹çš„åè®®ç«¯å£ã€‚ å®ƒæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒæ˜¯ç½‘ç»œé€šä¿¡è¿‡ç¨‹ä¸­ç«¯ç‚¹çš„æŠ½è±¡è¡¨ç¤ºï¼Œè¿™ä¸ªæŠ½è±¡é‡Œé¢å°±åŒ…å«äº†ç½‘ç»œé€šä¿¡å¿…é¡»çš„äº”ç§ä¿¡æ¯ï¼šè¿žæŽ¥ä½¿ç”¨çš„åè®®ï¼Œæœ¬åœ°ä¸»æœºçš„IPåœ°å€ï¼Œæœ¬åœ°è¿›ç¨‹çš„åè®®ç«¯å£ï¼Œè¿œåœ°ä¸»æœºçš„IPåœ°å€ï¼Œè¿œåœ°è¿›ç¨‹çš„åè®®ç«¯å£ã€‚ é‚£ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨å®ƒå‘¢ï¼Ÿ åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šï¼ŒTCPåè®®ä¸ŽUDPåè®®å¯ä»¥åŒæ—¶ä½¿ç”¨ç›¸åŒçš„portè€Œäº’ä¸å¹²æ‰°ã€‚ æ“ä½œç³»ç»Ÿæ ¹æ®å¥—æŽ¥å­—åœ°å€ï¼Œå¯ä»¥å†³å®šåº”è¯¥å°†æ•°æ®é€è¾¾ç‰¹å®šçš„è¿›ç¨‹æˆ–çº¿ç¨‹ã€‚è¿™å°±åƒæ˜¯ç”µè¯ç³»ç»Ÿä¸­ï¼Œä»¥ç”µè¯å·ç åŠ ä¸Šåˆ†æœºå·ç ï¼Œæ¥å†³å®šé€šè¯å¯¹è±¡ä¸€èˆ¬ã€‚ å› ä¸ºæˆ‘ä»¬ç”µè„‘ä¸Šå¯èƒ½ä¼šè·‘å¾ˆå¤šçš„åº”ç”¨ç¨‹åºï¼ŒTCPåè®®ç«¯å£éœ€è¦ä¸ºè¿™äº›åŒæ—¶è¿è¡Œçš„ç¨‹åºæä¾›å¹¶å‘æœåŠ¡ï¼Œæˆ–è€…è¯´ï¼Œä¼ è¾“å±‚éœ€è¦ä¸ºåº”ç”¨å±‚çš„å¤šä¸ªè¿›ç¨‹æä¾›é€šä¿¡æœåŠ¡ï¼Œæ¯ä¸ªè¿›ç¨‹èµ·ä¸€ä¸ªTCPè¿žæŽ¥ï¼Œé‚£ä¹ˆè¿™å¤šä¸ªTCPè¿žæŽ¥å¯èƒ½æ˜¯é€šè¿‡åŒä¸€ä¸ª TCPåè®®ç«¯å£ä¼ è¾“æ•°æ®ã€‚ å¦‚ä½•åŒºåˆ«å“ªä¸ªè¿›ç¨‹å¯¹åº”å“ªä¸ªTCPè¿žæŽ¥å‘¢ï¼Ÿ è®¸å¤šè®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸ºåº”ç”¨ç¨‹åºä¸ŽTCPï¼IPåè®®äº¤äº’æä¾›äº†å¥—æŽ¥å­—(Socket)æŽ¥å£ã€‚åº” ç”¨å±‚å¯ä»¥å’Œä¼ è¾“å±‚é€šè¿‡SocketæŽ¥å£ï¼ŒåŒºåˆ†æ¥è‡ªä¸åŒåº”ç”¨ç¨‹åºè¿›ç¨‹æˆ–ç½‘ç»œè¿žæŽ¥çš„é€šä¿¡ï¼Œå®žçŽ°æ•°æ®ä¼ è¾“çš„å¹¶å‘æœåŠ¡ã€‚ 2.2 å»ºç«‹socketè¿žæŽ¥ å»ºç«‹Socketè¿žæŽ¥è‡³å°‘éœ€è¦ä¸€å¯¹å¥—æŽ¥å­—ï¼Œå…¶ä¸­ä¸€ä¸ªè¿è¡ŒäºŽå®¢æˆ·ç«¯ï¼Œç§°ä¸ºClientSocket ï¼Œå¦ä¸€ä¸ªè¿è¡ŒäºŽæœåŠ¡å™¨ç«¯ï¼Œç§°ä¸ºServerSocket ã€‚ å¥—æŽ¥å­—ä¹‹é—´çš„è¿žæŽ¥è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šæœåŠ¡å™¨ç›‘å¬ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œè¿žæŽ¥ç¡®è®¤ã€‚ æœåŠ¡å™¨ç›‘å¬ï¼šæœåŠ¡å™¨ç«¯å¥—æŽ¥å­—å¹¶ä¸å®šä½å…·ä½“çš„å®¢æˆ·ç«¯å¥—æŽ¥å­—ï¼Œè€Œæ˜¯å¤„äºŽç­‰å¾…è¿žæŽ¥çš„çŠ¶æ€ï¼Œå®žæ—¶ç›‘æŽ§ç½‘ç»œçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿žæŽ¥è¯·æ±‚ã€‚ å®¢æˆ·ç«¯è¯·æ±‚ï¼šæŒ‡å®¢æˆ·ç«¯çš„å¥—æŽ¥å­—æå‡ºè¿žæŽ¥è¯·æ±‚ï¼Œè¦è¿žæŽ¥çš„ç›®æ ‡æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æŽ¥å­—ã€‚ä¸ºæ­¤ï¼Œå®¢æˆ·ç«¯çš„å¥—æŽ¥å­—å¿…é¡»é¦–å…ˆæè¿°å®ƒè¦è¿žæŽ¥çš„æœåŠ¡å™¨çš„å¥—æŽ¥å­—ï¼ŒæŒ‡å‡ºæœåŠ¡å™¨ç«¯å¥—æŽ¥å­—çš„åœ°å€å’Œç«¯å£å·ï¼Œç„¶åŽå°±å‘æœåŠ¡å™¨ç«¯å¥—æŽ¥å­—æå‡ºè¿žæŽ¥è¯·æ±‚ã€‚ è¿žæŽ¥ç¡®è®¤ï¼šå½“æœåŠ¡å™¨ç«¯å¥—æŽ¥å­—ç›‘å¬åˆ°æˆ–è€…è¯´æŽ¥æ”¶åˆ°å®¢æˆ·ç«¯å¥—æŽ¥å­—çš„è¿žæŽ¥è¯·æ±‚æ—¶ï¼Œå°±å“åº”å®¢æˆ·ç«¯å¥—æŽ¥å­—çš„è¯·æ±‚ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒæŠŠæœåŠ¡å™¨ç«¯å¥—æŽ¥å­—çš„æè¿°å‘ ç»™å®¢æˆ·ç«¯ï¼Œä¸€æ—¦å®¢æˆ·ç«¯ç¡®è®¤äº†æ­¤æè¿°ï¼ŒåŒæ–¹å°±æ­£å¼å»ºç«‹è¿žæŽ¥ã€‚è€ŒæœåŠ¡å™¨ç«¯å¥—æŽ¥å­—ç»§ç»­å¤„äºŽç›‘å¬çŠ¶æ€ï¼Œç»§ç»­æŽ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯å¥—æŽ¥å­—çš„è¿žæŽ¥è¯·æ±‚ã€‚ 2.3 SOCKETè¿žæŽ¥ä¸ŽTCPè¿žæŽ¥ åˆ›å»ºSocketè¿žæŽ¥æ—¶ï¼Œå¯ä»¥æŒ‡å®šä½¿ç”¨çš„ä¼ è¾“å±‚åè®®ï¼ŒSocketå¯ä»¥æ”¯æŒä¸åŒçš„ä¼ è¾“å±‚åè®®ï¼ˆTCPæˆ–UDPï¼‰ï¼Œå½“ä½¿ç”¨TCPåè®®è¿›è¡Œè¿žæŽ¥æ—¶ï¼Œè¯¥Socketè¿žæŽ¥å°±æ˜¯ä¸€ä¸ªTCPè¿žæŽ¥ã€‚ 3.TCPåŸºæœ¬å­—æ®µ TCPï¼ˆTransmission Control Protocol ä¼ è¾“æŽ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿žæŽ¥çš„ã€å¯é çš„ã€åŸºäºŽå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚ é’ˆå¯¹åè®®ä¸­çš„å­—æ®µï¼Œæˆ‘ä»¬åªéœ€è¦äº†è§£ä¸€ä¸‹ï¼šACKã€SYNã€åºå·è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚ ACK : ç¡®è®¤ TCPåè®®è§„å®šï¼Œåªæœ‰ACK=1æ—¶æœ‰æ•ˆï¼Œä¹Ÿè§„å®šè¿žæŽ¥å»ºç«‹åŽæ‰€æœ‰å‘é€çš„æŠ¥æ–‡çš„ACKå¿…é¡»ä¸º1 SYN ï¼š åœ¨è¿žæŽ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚ å½“SYN=1è€ŒACK=0æ—¶ï¼Œè¡¨æ˜Žè¿™æ˜¯ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚æŠ¥æ–‡ã€‚ å¯¹æ–¹è‹¥åŒæ„å»ºç«‹è¿žæŽ¥ï¼Œåˆ™åº”åœ¨å“åº”æŠ¥æ–‡ä¸­ä½¿SYN=1å’ŒACK=1. å› æ­¤, SYNç½®1å°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚æˆ–è¿žæŽ¥æŽ¥å—æŠ¥æ–‡ã€‚ FIN å³ç»ˆç»“çš„æ„æ€ï¼Œ ç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿žæŽ¥ã€‚ å½“ FIN = 1 æ—¶ï¼Œè¡¨æ˜Žæ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²ç»å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿žæŽ¥ã€‚ 4.ä¸‰æ¬¡æ¡æ‰‹(é‡è¦ï¼Œç»†è¯») é¦–å…ˆï¼ŒTCPä½œä¸ºä¸€ç§å¯é ä¼ è¾“æŽ§åˆ¶åè®®ï¼Œå…¶æ ¸å¿ƒæ€æƒ³ï¼šæ—¢è¦ä¿è¯æ•°æ®å¯é ä¼ è¾“ï¼Œåˆè¦æé«˜ä¼ è¾“çš„æ•ˆçŽ‡ï¼Œè€Œç”¨ä¸‰æ¬¡æ°æ°å¯ä»¥æ»¡è¶³ä»¥ä¸Šä¸¤æ–¹é¢çš„éœ€æ±‚ï¼ ç„¶åŽï¼Œè¦æ˜Žç¡®TCPè¿žæŽ¥æ¡æ‰‹ï¼Œæ¡çš„æ˜¯å•¥ï¼Ÿ ç­”æ¡ˆï¼šé€šä¿¡åŒæ–¹æ•°æ®åŽŸç‚¹çš„åºåˆ—å·ï¼ æˆ‘ä»¬åœ¨ä¸Šé¢ä¸€ç¯‡æ–‡ç« çŸ¥é“ï¼Œæ¶ˆæ¯çš„å®Œæ•´æ˜¯é ç»™æ¯ä¸ªæ¶ˆæ¯åŒ…æžä¸€ä¸ªç¼–å·ï¼Œä¾æ¬¡åœ°ACKç¡®è®¤ã€‚ç¡®è®¤æœºåˆ¶æ˜¯ç´¯è®¡çš„ï¼Œæ„å‘³ç€ X åºåˆ—å·ä¹‹å‰(ä¸åŒ…æ‹¬ X) åŒ…éƒ½æ˜¯è¢«ç¡®è®¤æŽ¥æ”¶åˆ°çš„ã€‚ TCPå¯é ä¼ è¾“çš„ç²¾é«“ï¼šTCPè¿žæŽ¥çš„ä¸€æ–¹Aï¼Œç”±æ“ä½œç³»ç»ŸåŠ¨æ€éšæœºé€‰å–ä¸€ä¸ª32ä½é•¿çš„åºåˆ—å·ï¼ˆInitial Sequence Numberï¼‰ã€‚ å‡è®¾Açš„åˆå§‹åºåˆ—å·ä¸º1000ï¼Œä»¥è¯¥åºåˆ—å·ä¸ºåŽŸç‚¹ï¼Œå¯¹è‡ªå·±å°†è¦å‘é€çš„æ¯ä¸ªå­—èŠ‚çš„æ•°æ®è¿›è¡Œç¼–å·ï¼Œ1001ï¼Œ1002ï¼Œ1003â€¦ï¼Œå¹¶æŠŠè‡ªå·±çš„åˆå§‹åºåˆ—å·ISNå‘Šè¯‰Bã€‚ è®©Bæœ‰ä¸€ä¸ªæ€æƒ³å‡†å¤‡ï¼Œä»€ä¹ˆæ ·ç¼–å·çš„æ•°æ®æ˜¯åˆæ³•çš„ï¼Œä»€ä¹ˆç¼–å·æ˜¯éžæ³•çš„ï¼Œæ¯”å¦‚ç¼–å·900å°±æ˜¯éžæ³•çš„ï¼ŒåŒæ—¶Bè¿˜å¯ä»¥å¯¹Aæ¯ä¸€ä¸ªç¼–å·çš„å­—èŠ‚æ•°æ®è¿›è¡Œç¡®è®¤ã€‚ å¦‚æžœAæ”¶åˆ°Bç¡®è®¤ç¼–å·ä¸º2001ï¼Œåˆ™æ„å‘³ç€å­—èŠ‚ç¼–å·ä¸º1001-2000ï¼Œå…±1000ä¸ªå­—èŠ‚å·²ç»å®‰å…¨åˆ°è¾¾ã€‚ åŒç†Bä¹Ÿæ˜¯ç±»ä¼¼çš„æ“ä½œï¼Œå‡è®¾Bçš„åˆå§‹åºåˆ—å·ISNä¸º2000ï¼Œä»¥è¯¥åºåˆ—å·ä¸ºåŽŸç‚¹ï¼Œå¯¹è‡ªå·±å°†è¦å‘é€çš„æ¯ä¸ªå­—èŠ‚çš„æ•°æ®è¿›è¡Œç¼–å·ï¼Œ2001ï¼Œ2002ï¼Œ2003â€¦ï¼Œå¹¶æŠŠè‡ªå·±çš„åˆå§‹åºåˆ—å·ISNå‘Šè¯‰Aï¼Œä»¥ä¾¿Aå¯ä»¥ç¡®è®¤Bå‘é€çš„æ¯ä¸€ä¸ªå­—èŠ‚ã€‚å¦‚æžœBæ”¶åˆ°Aç¡®è®¤ç¼–å·ä¸º4001ï¼Œåˆ™æ„å‘³ç€å­—èŠ‚ç¼–å·ä¸º2001-4000ï¼Œå…±2000ä¸ªå­—èŠ‚å·²ç»å®‰å…¨åˆ°è¾¾ã€‚ å¥½äº†ï¼Œåœ¨ç†è§£äº†æ¡æ‰‹çš„æœ¬è´¨ä¹‹åŽï¼Œä¸‹é¢å°±å¯ä»¥æ€»ç»“ä¸Šé¢å›¾çš„æ¡æ‰‹è¿‡ç¨‹äº†ã€‚ å¯¹äºŽAä¸ŽBçš„æ¡æ‰‹è¿‡ç¨‹ï¼Œå¯ä»¥æ€»ç»“ä¸ºï¼š A å‘é€åŒæ­¥ä¿¡å·SYN + A's Initial sequence numberï¼ˆä¸¢å¤±ä¼šAä¼šé‡ä¼ ï¼‰ B ç¡®è®¤æ”¶åˆ°Açš„åŒæ­¥ä¿¡å·ï¼Œå¹¶è®°å½• A's ISN åˆ°æœ¬åœ°ï¼Œå‘½å B's ACK sequence number Bå‘é€åŒæ­¥ä¿¡å·SYN + B's Initial sequence number ï¼ˆä¸¢å¤±Bä¼šå‘¨æœŸæ€§è¶…æ—¶é‡ä¼ ï¼Œç›´åˆ°æ”¶åˆ°Açš„ç¡®è®¤ï¼‰ Aç¡®è®¤æ”¶åˆ°Bçš„åŒæ­¥ä¿¡å·ï¼Œå¹¶è®°å½• B's ISN åˆ°æœ¬åœ°ï¼Œå‘½å A's ACK sequence number å¾ˆæ˜¾ç„¶2å’Œ3 è¿™ä¸¤ä¸ªæ­¥éª¤å¯ä»¥åˆå¹¶ï¼Œåªéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¯ä»¥æé«˜è¿žæŽ¥çš„é€Ÿåº¦ä¸Žæ•ˆçŽ‡ã€‚ è¿™é‡Œå°±ä¼šå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿ A å‘é€åŒæ­¥ä¿¡å·SYN + Aâ€™s Initial sequence number Bå‘é€åŒæ­¥ä¿¡å·SYN + Bâ€™s Initial sequence number + Bâ€™s ACK sequence number è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒAä¸ŽBå°±Açš„åˆå§‹åºåˆ—å·è¾¾æˆäº†ä¸€è‡´ï¼Œä½†æ˜¯Bæ— æ³•çŸ¥é“Aæ˜¯å¦å·²ç»æŽ¥æ”¶åˆ°è‡ªå·±çš„åŒæ­¥ä¿¡å·ï¼Œå¦‚æžœè¿™ä¸ªåŒæ­¥ä¿¡å·ä¸¢å¤±äº†ï¼ŒAå’ŒBå°±Bçš„åˆå§‹åºåˆ—å·å°†æ— æ³•è¾¾æˆä¸€è‡´ã€‚ æ‰€ä»¥Aå¿…é¡»å†ç»™Bä¸€ä¸ªç¡®è®¤ï¼Œä»¥ç¡®è®¤Aå·²ç»æŽ¥æ”¶åˆ°Bçš„åŒæ­¥ä¿¡å·ã€‚ å¦‚æžœAå‘ç»™Bçš„ç¡®è®¤ä¸¢äº†ï¼Œè¯¥å¦‚ä½•ï¼Ÿ Aä¼šè¶…æ—¶é‡ä¼ è¿™ä¸ªACKå—ï¼Ÿä¸ä¼šï¼TCPä¸ä¼šä¸ºæ²¡æœ‰æ•°æ®çš„ACKè¶…æ—¶é‡ä¼ ã€‚ é‚£è¯¥å¦‚ä½•æ˜¯å¥½ï¼ŸBå¦‚æžœæ²¡æœ‰æ”¶åˆ°Açš„ACKï¼Œä¼šè¶…æ—¶é‡ä¼ è‡ªå·±çš„SYNåŒæ­¥ä¿¡å·ï¼Œä¸€ç›´åˆ°æ”¶åˆ°Açš„ACKä¸ºæ­¢ã€‚ å†™åˆ°è¿™é‡Œï¼Œå…¶å®žæˆ‘ä»¬å·²ç»æ˜Žç™½äº†ï¼Œæ¡æ‰‹å…¶å®žå°±æ˜¯å„è‡ªç¡®è®¤å¯¹æ–¹çš„åºåˆ—å·ã€‚å› ä¸ºåŽé¢çš„æ•°æ®ç¼–å·å°±ä¼šä»¥æ­¤ä¸ºåŸºç¡€ï¼Œä»Žè€Œä¿è¯åŽç»­æ•°æ®çš„å¯é æ€§ã€‚ è°¢å¸Œä»ç‰ˆã€Šè®¡ç®—æœºç½‘ç»œã€‹ä¸­çš„ä¾‹å­æ˜¯è¿™æ ·çš„ï¼Œâ€œå·²å¤±æ•ˆçš„è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€çš„äº§ç”Ÿåœ¨è¿™æ ·ä¸€ç§æƒ…å†µä¸‹ï¼šclientå‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œç»“ç‚¹é•¿æ—¶é—´çš„æ»žç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿žæŽ¥é‡Šæ”¾ä»¥åŽçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾serverã€‚æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µã€‚ä½†serveræ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µåŽï¼Œå°±è¯¯è®¤ä¸ºæ˜¯clientå†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿žæŽ¥è¯·æ±‚ã€‚äºŽæ˜¯å°±å‘clientå‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿žæŽ¥ã€‚å‡è®¾ä¸é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œé‚£ä¹ˆåªè¦serverå‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿žæŽ¥å°±å»ºç«‹äº†ã€‚ç”±äºŽçŽ°åœ¨clientå¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¿žæŽ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬serverçš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘serverå‘é€æ•°æ®ã€‚ä½†serverå´ä»¥ä¸ºæ–°çš„è¿è¾“è¿žæŽ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾…clientå‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼Œserverçš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æŽ‰äº†ã€‚é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€çš„åŠžæ³•å¯ä»¥é˜²æ­¢ä¸Šè¿°çŽ°è±¡å‘ç”Ÿã€‚ä¾‹å¦‚åˆšæ‰é‚£ç§æƒ…å†µï¼Œclientä¸ä¼šå‘serverçš„ç¡®è®¤å‘å‡ºç¡®è®¤ã€‚serverç”±äºŽæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“clientå¹¶æ²¡æœ‰è¦æ±‚å»ºç«‹è¿žæŽ¥ã€‚â€ ä½†æ˜¯æœ‰çš„äººæŒ‡å‡ºï¼Œå…¶å®žè¿™åªæ˜¯è¡¨è±¡ï¼Œæˆ–è€…è¯´å¹¶ä¸æ˜¯ä¸‰æ¬¡æ¡æ‰‹çš„è®¾è®¡åˆè¡·ï¼Œæˆ‘è¡¨ç¤ºè®¤åŒï¼Œè¿™ä¸ªé˜²æ­¢å·²å¤±æ•ˆçš„è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µåº”è¯¥åªæ˜¯é™„åŠ çš„ä¸€äº›å¥½å¤„ï¼Œè€Œä¸åº”è¯¥æ˜¯è§£é‡Šä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹çš„åŽŸå› ã€‚ TCPåˆå§‹é˜¶æ®µä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼ŒåŽŸå› æ€»ç»“å¦‚ä¸‹ï¼š ä¸ºäº†å®žçŽ°å¯é æ•°æ®ä¼ è¾“ï¼Œ TCP åè®®çš„é€šä¿¡åŒæ–¹ï¼Œ éƒ½å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåºåˆ—å·ï¼Œ ä»¥æ ‡è¯†å‘é€å‡ºåŽ»çš„æ•°æ®åŒ…ä¸­ï¼Œ å“ªäº›æ˜¯å·²ç»è¢«å¯¹æ–¹æ”¶åˆ°çš„ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å³æ˜¯é€šä¿¡åŒæ–¹ç›¸äº’å‘ŠçŸ¥åºåˆ—å·èµ·å§‹å€¼ï¼Œ å¹¶ç¡®è®¤å¯¹æ–¹å·²ç»æ”¶åˆ°äº†åºåˆ—å·èµ·å§‹å€¼çš„å¿…ç»æ­¥éª¤ï¼Œå¦‚æžœåªæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œ è‡³å¤šåªæœ‰è¿žæŽ¥å‘èµ·æ–¹çš„èµ·å§‹åºåˆ—å·èƒ½è¢«ç¡®è®¤ï¼Œ å¦ä¸€æ–¹é€‰æ‹©çš„åºåˆ—å·åˆ™å¾—ä¸åˆ°ç¡®è®¤ã€‚ 5.å››æ¬¡æŒ¥æ‰‹ å½“ä¸»æœº1å‘å‡ºFINæŠ¥æ–‡æ®µæ—¶ï¼Œåªæ˜¯è¡¨ç¤ºä¸»æœº1å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä¸»æœº1å‘Šè¯‰ä¸»æœº2ï¼Œå®ƒçš„æ•°æ®å·²ç»å…¨éƒ¨å‘é€å®Œæ¯•äº†ï¼› ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™ä¸»æœº1è¿˜æ˜¯å¯ä»¥æŽ¥å—æ¥è‡ªä¸»æœº2çš„æ•°æ®ï¼› å½“ä¸»æœº2è¿”å›žACKæŠ¥æ–‡æ®µæ—¶ï¼Œè¡¨ç¤ºå®ƒå·²ç»çŸ¥é“ä¸»æœº1æ²¡æœ‰æ•°æ®å‘é€äº†ï¼Œä½†æ˜¯ä¸»æœº2è¿˜æ˜¯å¯ä»¥å‘é€æ•°æ®åˆ°ä¸»æœº1çš„ï¼› å½“ä¸»æœº2ä¹Ÿå‘é€äº†FINæŠ¥æ–‡æ®µæ—¶ï¼Œè¿™ä¸ªæ—¶å€™å°±è¡¨ç¤ºä¸»æœº2ä¹Ÿæ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œå°±ä¼šå‘Šè¯‰ä¸»æœº1ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼› ä¸»æœº1å‘Šè¯‰ä¸»æœº2çŸ¥é“äº†ï¼Œä¸»æœº2æ”¶åˆ°è¿™ä¸ªç¡®è®¤ä¹‹åŽå°±ç«‹é©¬å…³é—­è‡ªå·±ã€‚ ä¸»æœº1ç­‰å¾…2MSLä¹‹åŽä¹Ÿå…³é—­äº†è‡ªå·±ã€‚ é’ˆå¯¹æœ€åŽä¸€æ¡æ¶ˆæ¯ï¼Œå³ä¸»æœº1å‘é€ackåŽï¼Œä¸»æœº2æŽ¥æ”¶åˆ°æ­¤æ¶ˆæ¯ï¼Œå³è®¤ä¸ºåŒæ–¹è¾¾æˆäº†åŒæ­¥ï¼šåŒæ–¹éƒ½çŸ¥é“è¿žæŽ¥å¯ä»¥é‡Šæ”¾äº†ï¼Œæ­¤æ—¶Bå¯ä»¥å®‰å…¨åœ°é‡Šæ”¾æ­¤TCPè¿žæŽ¥æ‰€å ç”¨çš„å†…å­˜èµ„æºã€ç«¯å£å·ã€‚ æ‰€ä»¥è¢«åŠ¨å…³é—­çš„Bæ— éœ€ä»»ä½•wait timeï¼Œç›´æŽ¥é‡Šæ”¾èµ„æºã€‚ ä½†æ˜¯ä¸»æœº1å¹¶ä¸çŸ¥é“ä¸»æœº2æ˜¯å¦æŽ¥åˆ°è‡ªå·±çš„ACKï¼Œä¸»æœº1æ˜¯è¿™ä¹ˆæƒ³çš„ï¼š å¦‚æžœä¸»æœº2æ²¡æœ‰æ”¶åˆ°è‡ªå·±çš„ACKï¼Œä¸»æœº2ä¼šè¶…æ—¶é‡ä¼ FiNï¼Œé‚£ä¹ˆä¸»æœº1å†æ¬¡æŽ¥åˆ°é‡ä¼ çš„FINï¼Œä¼šå†æ¬¡å‘é€ACK å¦‚æžœä¸»æœº2æ”¶åˆ°è‡ªå·±çš„ACKï¼Œä¹Ÿä¸ä¼šå†å‘ä»»ä½•æ¶ˆæ¯ï¼ŒåŒ…æ‹¬ACK æ— è®ºæ˜¯æƒ…å†µ1è¿˜æ˜¯2ï¼ŒAéƒ½éœ€è¦ç­‰å¾…ï¼Œè¦å–è¿™ä¸¤ç§æƒ…å†µç­‰å¾…æ—¶é—´çš„æœ€å¤§å€¼ï¼Œä»¥åº”å¯¹æœ€åçš„æƒ…å†µå‘ç”Ÿï¼Œè¿™ä¸ªæœ€åæƒ…å†µæ˜¯ï¼š ä¸»æœº2æ²¡æœ‰æ”¶åˆ°ä¸»æœº1çš„ACKï¼Œé‚£ä¹ˆè¶…æ—¶ä¹‹åŽä¸»æœº2ä¼šé‡ä¼ FINï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æµªè´¹ä¸€ä¸ªä¸»æœº1å‘å‡ºACKçš„æœ€å¤§å­˜æ´»æ—¶é—´(MSL)+FINæ¶ˆæ¯çš„æœ€å¤§å­˜æ´»æ—¶é—´(MSL) ä¸å¯èƒ½æ—¶é—´å†å¤šäº†ï¼Œè¿™ä¸ªå·²ç»é’ˆå¯¹æœ€ç³Ÿç³•çš„çŠ¶å†µã€‚ ç­‰å¾…2MSLæ—¶é—´ï¼ŒAå°±å¯ä»¥æ”¾å¿ƒåœ°é‡Šæ”¾TCPå ç”¨çš„èµ„æºã€ç«¯å£å·ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨è¯¥ç«¯å£å·è¿žæŽ¥ä»»ä½•æœåŠ¡å™¨ã€‚ åœ¨ç­‰å¾…çš„æ—¶é—´å†…ï¼Œä¸»æœº2å¯ä»¥é‡è¯•å¤šæ¬¡ï¼Œå› ä¸º2MSLæ—¶é—´ä¸º240ç§’ï¼Œè¶…æ—¶é‡ä¼ åªæœ‰0.5ç§’ï¼Œ1ç§’ï¼Œ2ç§’ï¼Œï¼Œ16ç§’ã€‚ å½“ä¸»æœº2é‡è¯•æ¬¡æ•°è¾¾åˆ°ä¸Šé™ï¼Œä¸»æœº2ä¼šresetè¿žæŽ¥ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯2MSLæˆ‘ä»¬å·²ç»äº†è§£äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¦ç­‰è¿™ä¸ªæ—¶é—´å‘¢ï¼Ÿ å¦‚æžœä¸ç­‰ï¼Œé‡Šæ”¾çš„ç«¯å£å¯èƒ½ä¼šé‡è¿žåˆšæ–­å¼€çš„æœåŠ¡å™¨ç«¯å£ï¼Œè¿™æ ·ä¾ç„¶å­˜æ´»åœ¨ç½‘ç»œé‡Œçš„è€çš„TCPæŠ¥æ–‡å¯èƒ½ä¸Žæ–°TCPè¿žæŽ¥æŠ¥æ–‡å†²çªï¼Œé€ æˆæ•°æ®å†²çªï¼Œä¸ºé¿å…æ­¤ç§æƒ…å†µï¼Œéœ€è¦è€å¿ƒç­‰å¾…ç½‘ç»œè€çš„TCPè¿žæŽ¥çš„æ´»è·ƒæŠ¥æ–‡å…¨éƒ¨æ­»ç¿˜ç¿˜ï¼Œ2MSLæ—¶é—´å¯ä»¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚ æ•´ç†è‡ªï¼š https://www.zhihu.com/question/24853633 https://www.zhihu.com/question/67013338 https://github.com/jawil/blog/issues/14 https://www.jianshu.com/p/9968b16b607e]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCPåè®®å…¥é—¨]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F4.TCP%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬å››ç¯‡æ–‡ç« ã€‚é¦–å…ˆè¦æ˜Žç¡®ï¼šä¿¡é“æœ¬èº«ä¸å¯é ï¼ˆä¸¢åŒ…ã€é‡å¤åŒ…ã€å‡ºé”™ã€ä¹±åºï¼‰ï¼Œä¸å®‰å…¨ã€‚æ‰€ä»¥å¼•å‡ºäº†ä¸ƒå±‚æˆ–äº”å±‚æ¨¡åž‹æ¥ä¿è¯ã€‚å› æ­¤ï¼Œä»»ä½•ä¸€ä¸ªä¸œè¥¿çš„æå‡ºéƒ½æ˜¯ä¸ºäº†è§£å†³æŸä¸ªé—®é¢˜çš„ã€‚å­¦ä¹ è®¡ç®—æœºï¼Œä»Žä»–çš„åŽ†å²å‡ºå‘ï¼Œç†è§£ä¸ºä»€ä¹ˆä¼šæœ‰ä¸æ–­ä½Žè¿­ä»£ï¼Œå› ä¸ºæ˜¯ä¸ºäº†è§£å†³æŸä¸ªç—›ç‚¹é—®é¢˜ã€‚æ¯”å¦‚HTTPçš„å‘å±•ï¼Œä¸ºä»€ä¹ˆåœ¨HTTP1.0åŸºç¡€ä¸Šè¿˜è¦æå‡ºHTTP1.1ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æå‡ºHTTP2.0ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä»–çš„å‘å±•åŽ†å²ä¹‹åŽå°±ä¼šæ˜Žç™½äº†ã€‚åŒæ ·ï¼Œä¸‹é¢å†è¯´ä¸€è¯´ä¸ºä»€ä¹ˆè¦æœ‰TCPåè®®ï¼ŒTCPåˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚ ä¸€ã€å›žé¡¾ é¦–å…ˆç®€å•å›žé¡¾ä¸€ä¸‹ã€‚ 1.1 ç‰©ç†å±‚ ç‰©ç†å±‚æ˜¯ç›¸å½“äºŽç‰©ç†è¿žæŽ¥ï¼Œå°†0101ä»¥ç”µä¿¡å·çš„å½¢å¼ä¼ è¾“å‡ºåŽ»ã€‚ 1.2 æ•°æ®é“¾è·¯å±‚ æ•°æ®é“¾è·¯å±‚ï¼Œæœ‰ä¸€ä¸ªå«åšä»¥å¤ªç½‘åè®®ï¼Œè§„å®šäº†ç”µå­ä¿¡å·æ˜¯å¦‚ä½•ç»„æˆæ•°æ®åŒ…çš„ï¼Œè¿™ä¸ªåè®®çš„å¤´é‡Œé¢ï¼ŒåŒ…å«äº†è‡ªèº«çš„ç½‘å¡ä¿¡æ¯ï¼Œè¿˜æœ‰ç›®çš„åœ°çš„ç½‘å¡ä¿¡æ¯ï¼ˆä¸€èˆ¬æˆ‘ä»¬å¯ä»¥çŸ¥é“å¯¹æ–¹çš„IPï¼ŒIPå¯ä»¥é€šè¿‡DNSè§£æžåˆ°ï¼Œç„¶åŽæ ¹æ®ARPåè®®å°†IPè½¬æ¢ä¸ºMACåœ°å€ï¼‰ã€‚é‚£ä¹ˆï¼Œå¦‚æžœåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¹¿æ’­çš„æ–¹å¼æ‰¾åˆ°å¯¹åº”MACåœ°å€çš„ä¸»æœºã€‚â€”å³ä»¥å¤ªç½‘åè®®è§£å†³äº†å­ç½‘å†…éƒ¨çš„ç‚¹å¯¹ç‚¹é€šä¿¡ã€‚ 1.3 ç½‘ç»œå±‚ ä½†æ˜¯å‘¢ï¼Œä»¥å¤ªç½‘åè®®ä¸èƒ½è§£å†³å¤šä¸ªå±€åŸŸç½‘é€šä¿¡ï¼Œæ¯ä¸ªå±€åŸŸç½‘ä¹‹é—´ä¸æ˜¯äº’é€šçš„ï¼Œé‚£ä¹ˆä»¥å¤ªç½‘è¿™ç§å¹¿æ’­çš„æ–¹å¼ä¸å¯ç”¨ï¼Œå°±ç®—å¯ç”¨ï¼Œç½‘ç»œé‚£ä¹ˆå¤§ï¼Œé€šè¿‡å¹¿æ’­è¿›è¡Œæ‰¾ï¼Œæ˜¯ä¸€ä¸ªå¯æ€•çš„åœºæ™¯ã€‚é‚£ä¹ˆï¼ŒIPåè®®å¯ä»¥è¿žæŽ¥å¤šä¸ªå±€åŸŸç½‘ï¼Œç®€å•æ¥è¯´ï¼ŒIP åè®®å®šä¹‰äº†ä¸€å¥—è‡ªå·±çš„åœ°å€è§„åˆ™ï¼Œç§°ä¸º IP åœ°å€ã€‚ç‰©ç†å™¨ä»¶ï¼Œæ¯”å¦‚è¯´è·¯ç”±å™¨ï¼Œå°±æ˜¯åŸºäºŽIPåè®®ï¼Œé‡Œé¢ä¿å­˜ä¸€å¥—åœ°å€æŒ‡è·¯ç‰Œï¼Œæƒ³åŽ»å“ªä¸ªå±€åŸŸç½‘ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªç‰Œå­æ¥æ‰¾ï¼Œç„¶åŽé€æ­¥è·¯ç”±åˆ°ç›®æ ‡å±€åŸŸç½‘ï¼Œæœ€åŽå°±å¯ä»¥æ‰¾åˆ°é‚£å°ä¸»æœºäº†ã€‚IPå±‚å°±æ˜¯å¯¹åº”äº†ç½‘ç»œå±‚ã€‚ 1.4 ä¼ è¾“å±‚ é‚£ä¹ˆï¼Œæ­¤æ—¶è§£å†³äº†å¤šä¸ªå±€åŸŸç½‘è·¯ç”±é—®é¢˜ï¼Œä¹Ÿè§£å†³äº†å±€åŸŸç½‘å†…å¯»å€é—®é¢˜ï¼Œå³æˆ‘è¿™å°ä¸»æœºå·²ç»å¯ä»¥æ‰¾åˆ°é‚£å°ä¸»æœºäº†ï¼Œä¸‹é¢è¿˜æœ‰ä»€ä¹ˆäº‹æƒ…éœ€è¦åšå‘¢ï¼Ÿæ˜¾ç„¶ï¼Œæ‰¾åˆ°ä¸»æœºè¿˜ä¸è¡Œå•Šï¼Œæ¯”å¦‚æˆ‘ç”¨å¾®ä¿¡å‘ä¸€æ¡æ¶ˆæ¯ï¼Œæˆ‘å‘åˆ°ä½ ä¸»æœºäº†ï¼Œä½†æ˜¯ä½ ä¸»æœºä¸Šçš„å¾®ä¿¡ä¸çŸ¥é“è¿™æ¡æ¶ˆæ¯å‘ç»™ä»–äº†ï¼Œè¿™é‡Œè¯´çš„å°±æ˜¯ç«¯å£ï¼Œä¿¡æ¯è¦å‘åˆ°è¿™ä¸ªç«¯å£ä¸Šï¼Œç›‘å¬è¿™ä¸ªç«¯å£çš„ç¨‹åºæ‰ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚ 1.5 åº”ç”¨å±‚ OKï¼Œæœ€ä¸Šå±‚çš„åº”ç”¨å±‚ï¼Œå°±æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ï¼Œä»–çš„ä¸€ç³»åˆ—åè®®åªæ˜¯ä¸ºäº†è®©ä¸¤å°ä¸»æœºä¼šäº’ç›¸éƒ½ç†è§£è€Œå·²ã€‚ äºŒã€é—®é¢˜å’Œè§£å†³ 2.1 å­˜åœ¨çš„é—®é¢˜ åœ¨æ˜Žç™½äº†è®¡ç®—æœºç½‘ç»œä¸ºä»€ä¹ˆè¦è¿™å‡ å±‚æ¨¡åž‹ä¹‹åŽï¼Œæˆ‘ä»¬å†å›žåˆ°ä¸€å¼€å§‹ï¼Œå¦‚ä½•ä¿è¯å®‰å…¨ã€å¯é ã€å®Œæ•´åœ°ä¼ è¾“ä¿¡æ¯å‘¢ï¼Ÿ å¾ˆæ˜¾ç„¶ï¼Œä¸Šé¢æåˆ°çš„ï¼Œåªæ˜¯ä¿è¯ä¿¡æ¯èƒ½æ‰¾åˆ°å¯¹æ–¹ä¸»æœºå’Œç«¯å£ï¼Œä½†æ˜¯è¿™ä¸ªä¿¡æ¯ä¸­é€”è¢«æ‹¦æˆªäº†ã€ç”šè‡³è¢«ç¯¡æ”¹äº†ã€ä¿¡æ¯å»¶è¿Ÿäº†ï¼ˆå‡ åˆ†é’Ÿæˆ–è€…å‡ ä¸ªå°æ—¶ï¼Œæˆ–è€…å‡ ä¸ªä¸–çºªï¼‰ã€ç½‘ç»œä¸é€šæˆ–è€…æŒ‚äº†ï¼Œä¿¡æ¯è‡ªå·±å¯ä¸ä¼šå‘Šè¯‰ä½ ä»–æŒ‚äº†æˆ–è€…è¦è¿Ÿåˆ°ä¸€ä¼šï¼Œå¦‚æžœæ²¡æœ‰ä¸€ä¸ªåè®®æ¥ä¿éšœå¯é æ€§ï¼Œé‚£ä¹ˆæˆ‘è¿™æ¡æ¶ˆæ¯å‘å‡ºåŽ»ï¼Œèƒ½ä¸èƒ½åˆ°ã€èƒ½ä¸èƒ½åŠæ—¶åˆ°ã€èƒ½ä¸èƒ½å®Œæ•´åˆ°ã€èƒ½ä¸èƒ½ä¸è¢«ç¯¡æ”¹åˆ°ç­‰è¿™äº›é—®é¢˜å°†ä¼šé€ æˆç¾éš¾ï¼Œç½‘ç»œä¼ è¾“ä¹Ÿå°±æ²¡æœ‰äº†æ„ä¹‰ã€‚ è®¡ç®—æœºçš„å‰è¾ˆä»¬ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç³»åˆ—çš„æŽªæ–½æ¥å°½å¯èƒ½ä¿è¯ä¿¡æ¯èƒ½æ­£ç¡®é€è¾¾ã€‚ 2.2 æ•°æ®æ ¡éªŒ é¦–å…ˆåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥é€šè¿‡å„ç§æ ¡éªŒï¼Œæ¯”å¦‚å¥‡å¶æ ¡éªŒç­‰æ‰‹æ®µæ¥åˆ¤æ–­æ•°æ®åŒ…ä¼ çš„æ˜¯å¦æ­£ç¡®ã€‚ 2.3 æ•°æ®å¯é æ€§ å¥½äº†ï¼Œè§£å†³äº†æ•°æ®æ˜¯å¦æ­£ç¡®ä¹‹åŽï¼Œä½†æ˜¯è¿˜ä¸èƒ½ä¿è¯çº¿è·¯æ˜¯å¯é çš„ï¼ŒåŠ å…¥æŸä¸ªåŒ…æ²¡å‘å‡ºåŽ»æˆ–è€…å‘é”™äº†ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªå‡ºé”™é‡ä¼ æœºåˆ¶ï¼Œä¿è¯ä¿¡æ¯ä¼ è¾“çš„å¯é æ€§ã€‚è¿™å°±å¼•å‡ºäº†TCPåè®®ã€‚ TCPï¼ˆTransmission Control Protocol ä¼ è¾“æŽ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿žæŽ¥çš„ã€å¯é çš„ã€åŸºäºŽå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚ ä¸‹é¢æ¥çœ‹çœ‹TCPæ˜¯å¦‚ä½•è§£å†³ä¸¢åŒ…ã€é‡å¤åŒ…ã€å‡ºé”™ã€ä¹±åºç­‰ä¸å¯é çš„ä¸€äº›é—®é¢˜çš„ã€‚ ä¸‰ã€æ»‘åŠ¨çª—å£åè®®çš„æå‡º è¿™å°±å¼•å‡ºäº†TCPä¸­æœ€ç»ˆçš„ä¸€ä¸ªä¸œè¥¿ï¼šæ»‘åŠ¨çª—å£åè®®ã€‚ 3.1 æœ´ç´ çš„æ–¹æ³•æ¥ç¡®ä¿å¯é æ€§ å…ˆä»Žç®€å•çš„è§’åº¦å‡ºå‘ï¼Œè‡ªå·±æƒ³ä¸€ä¸‹ï¼Œå¦‚ä½•ä¿è¯ä¸ä¸¢åŒ…ã€ä¸ä¹±åºã€‚ æŒ‰ç…§é¡ºåºï¼Œå‘é€ä¸€ä¸ªç¡®è®¤ä¸€ä¸ªï¼Œæ˜¾ç„¶ï¼Œåžåé‡éžå¸¸ä½Žã€‚é‚£ä¹ˆï¼Œä¸€æ¬¡æ€§å‘å‡ ä¸ªåŒ…ï¼Œç„¶åŽä¸€èµ·ç¡®è®¤å‘¢ï¼Ÿ 3.2 æ”¹è¿›æ–¹æ¡ˆ é‚£ä¹ˆå°±å¼•å‡ºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ä¸€æ¬¡æ€§å‘å‡ ä¸ªåŒ…åˆé€‚å‘¢ï¼Ÿå°±è¿™å¼•å‡ºäº†æ»‘åŠ¨çª—å£ã€‚ å››ã€æ•°æ®åŒ…ç¼–å·å’Œé‡ä¼ æœºåˆ¶ 4.1 æ•°æ®åŒ…ç¼–å· åœ¨è¯´æ˜Žæ»‘åŠ¨çª—å£åŽŸç†ä¹‹å‰ï¼Œå¿…é¡»è¦è¯´ä¸€ä¸‹TCPæ•°æ®åŒ…çš„ç¼–å·SEQã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œç”±äºŽä»¥å¤ªç½‘æ•°æ®åŒ…å¤§å°é™åˆ¶ï¼Œæ‰€ä»¥æ¯ä¸ªåŒ…æ‰¿è½½çš„æ•°æ®æ˜¯æœ‰é™çš„ï¼Œå¦‚æžœå‘ä¸€ä¸ªå¾ˆå¤§çš„åŒ…ï¼Œå¿…ç„¶æ˜¯è¦æ‹†åˆ†çš„ã€‚ å‘é€çš„æ—¶å€™ï¼ŒTCP åè®®ä¸ºæ¯ä¸ªåŒ…ç¼–å·ï¼ˆsequence numberï¼Œç®€ç§° SEQï¼‰ï¼Œä»¥ä¾¿æŽ¥æ”¶çš„ä¸€æ–¹æŒ‰ç…§é¡ºåºè¿˜åŽŸã€‚ä¸‡ä¸€å‘ç”Ÿä¸¢åŒ…ï¼Œä¹Ÿå¯ä»¥çŸ¥é“ä¸¢å¤±çš„æ˜¯å“ªä¸€ä¸ªåŒ…ã€‚ ç¬¬ä¸€ä¸ªåŒ…çš„ç¼–å·æ˜¯ä¸€ä¸ªéšæœºæ•°ã€‚ä¸ºäº†ä¾¿äºŽç†è§£ï¼Œè¿™é‡Œå°±æŠŠå®ƒç§°ä¸º1å·åŒ…ã€‚å‡å®šè¿™ä¸ªåŒ…çš„è´Ÿè½½é•¿åº¦æ˜¯100å­—èŠ‚ï¼Œé‚£ä¹ˆå¯ä»¥æŽ¨ç®—å‡ºä¸‹ä¸€ä¸ªåŒ…çš„ç¼–å·åº”è¯¥æ˜¯101ã€‚è¿™å°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ•°æ®åŒ…éƒ½å¯ä»¥å¾—åˆ°ä¸¤ä¸ªç¼–å·ï¼šè‡ªèº«çš„ç¼–å·ï¼Œä»¥åŠä¸‹ä¸€ä¸ªåŒ…çš„ç¼–å·ã€‚æŽ¥æ”¶æ–¹ç”±æ­¤çŸ¥é“ï¼Œåº”è¯¥æŒ‰ç…§ä»€ä¹ˆé¡ºåºå°†å®ƒä»¬è¿˜åŽŸæˆåŽŸå§‹æ–‡ä»¶ã€‚ 4.2 æ•°æ®é‡ä¼ æœºåˆ¶ TCPåè®®å°±æ˜¯æ ¹æ®è¿™äº›ç¼–å·æ¥é‡æ–°è¿˜åŽŸæ–‡ä»¶çš„ã€‚å¹¶ä¸”æŽ¥æ”¶ç«¯ä¿è¯é¡ºåºæ€§è¿”å›žACKç¡®è®¤ï¼Œæ¯”å¦‚æœ‰ä¸¤ä¸ªåŒ…å‘è¿‡åŽ»ï¼Œä¸º1å·å’Œ2å·ï¼Œ2å·æŽ¥æ”¶æˆåŠŸï¼Œä½†æ˜¯å‘çŽ°1å·åŒ…è¿˜æ²¡æŽ¥æ”¶åˆ°ï¼Œæ‰€ä»¥2å·çš„ACKæ˜¯ä¸ä¼šå‘å›žåŽ»çš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æžœåœ¨é‡ä¼ æ—¶é—´å†…æ”¶åˆ°1å·äº†ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸¤ä¸ªåŒ…çš„ACKéƒ½è¿”å›žå›žåŽ»ï¼Œå¦‚æžœè¶…æ—¶äº†ï¼Œå°±é‡ä¼ 1å·åŒ…ã€‚çŸ¥é“1å·åŒ…æŽ¥æ”¶æˆåŠŸï¼ŒåŽç»­çš„æ‰ä¼šè¿”å›žACKã€‚ å…·ä½“æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿ å‰é¢è¯´è¿‡ï¼Œæ¯ä¸€ä¸ªæ•°æ®åŒ…éƒ½å¸¦æœ‰ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„ç¼–å·ã€‚å¦‚æžœä¸‹ä¸€ä¸ªæ•°æ®åŒ…æ²¡æœ‰æ”¶åˆ°ï¼Œé‚£ä¹ˆ ACK çš„ç¼–å·å°±ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒçŽ°åœ¨æ”¶åˆ°äº†4å·åŒ…ï¼Œä½†æ˜¯æ²¡æœ‰æ”¶åˆ°5å·åŒ…ã€‚ACK å°±ä¼šè®°å½•ï¼ŒæœŸå¾…æ”¶åˆ°5å·åŒ…ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œ5å·åŒ…æ”¶åˆ°äº†ï¼Œé‚£ä¹ˆä¸‹ä¸€è½® ACK ä¼šæ›´æ–°ç¼–å·ã€‚å¦‚æžœ5å·åŒ…è¿˜æ˜¯æ²¡æ”¶åˆ°ï¼Œä½†æ˜¯æ”¶åˆ°äº†6å·åŒ…æˆ–7å·åŒ…ï¼Œé‚£ä¹ˆ ACK é‡Œé¢çš„ç¼–å·ä¸ä¼šå˜åŒ–ï¼Œæ€»æ˜¯æ˜¾ç¤º5å·åŒ…ã€‚è¿™ä¼šå¯¼è‡´å¤§é‡é‡å¤å†…å®¹çš„ ACKã€‚ å¦‚æžœå‘é€æ–¹å‘çŽ°æ”¶åˆ°ä¸‰ä¸ªè¿žç»­çš„é‡å¤ ACKï¼Œæˆ–è€…è¶…æ—¶äº†è¿˜æ²¡æœ‰æ”¶åˆ°ä»»ä½• ACKï¼Œå°±ä¼šç¡®è®¤ä¸¢åŒ…ï¼Œå³5å·åŒ…é—å¤±äº†ï¼Œä»Žè€Œå†æ¬¡å‘é€è¿™ä¸ªåŒ…ã€‚é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒTCP ä¿è¯äº†ä¸ä¼šæœ‰æ•°æ®åŒ…ä¸¢å¤±ã€‚ ï¼ˆå›¾ç‰‡è¯´æ˜Žï¼šHost B æ²¡æœ‰æ”¶åˆ°100å·æ•°æ®åŒ…ï¼Œä¼šè¿žç»­å‘å‡ºç›¸åŒçš„ ACKï¼Œè§¦å‘ Host A é‡å‘100å·æ•°æ®åŒ…ã€‚ï¼‰ äº”ã€æ…¢å¯åŠ¨ ä¸‹é¢å†æ¥è¯´è¯´æ…¢å¯åŠ¨ã€‚ æœåŠ¡å™¨å‘é€æ•°æ®åŒ…ï¼Œå½“ç„¶è¶Šå¿«è¶Šå¥½ï¼Œæœ€å¥½ä¸€æ¬¡æ€§å…¨å‘å‡ºåŽ»ã€‚ä½†æ˜¯ï¼Œå‘å¾—å¤ªå¿«ï¼Œå°±æœ‰å¯èƒ½ä¸¢åŒ…ã€‚å¸¦å®½å°ã€è·¯ç”±å™¨è¿‡çƒ­ã€ç¼“å­˜æº¢å‡ºç­‰è®¸å¤šå› ç´ éƒ½ä¼šå¯¼è‡´ä¸¢åŒ…ã€‚çº¿è·¯ä¸å¥½çš„è¯ï¼Œå‘å¾—è¶Šå¿«ï¼Œä¸¢å¾—è¶Šå¤šã€‚ æœ€ç†æƒ³çš„çŠ¶æ€æ˜¯ï¼Œåœ¨çº¿è·¯å…è®¸çš„æƒ…å†µä¸‹ï¼Œè¾¾åˆ°æœ€é«˜é€ŸçŽ‡ã€‚ä½†æ˜¯æˆ‘ä»¬æ€Žä¹ˆçŸ¥é“ï¼Œå¯¹æ–¹çº¿è·¯çš„ç†æƒ³é€ŸçŽ‡æ˜¯å¤šå°‘å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯æ…¢æ…¢è¯•ã€‚ TCP åè®®ä¸ºäº†åšåˆ°æ•ˆçŽ‡ä¸Žå¯é æ€§çš„ç»Ÿä¸€ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ…¢å¯åŠ¨ï¼ˆslow startï¼‰æœºåˆ¶ã€‚å¼€å§‹çš„æ—¶å€™ï¼Œå‘é€å¾—è¾ƒæ…¢ï¼Œç„¶åŽæ ¹æ®ä¸¢åŒ…çš„æƒ…å†µï¼Œè°ƒæ•´é€ŸçŽ‡ï¼šå¦‚æžœä¸ä¸¢åŒ…ï¼Œå°±åŠ å¿«å‘é€é€Ÿåº¦ï¼›å¦‚æžœä¸¢åŒ…ï¼Œå°±é™ä½Žå‘é€é€Ÿåº¦ã€‚ Linux å†…æ ¸é‡Œé¢è®¾å®šäº†ï¼ˆå¸¸é‡TCP_INIT_CWNDï¼‰ï¼Œåˆšå¼€å§‹é€šä¿¡çš„æ—¶å€™ï¼Œå‘é€æ–¹ä¸€æ¬¡æ€§å‘é€10ä¸ªæ•°æ®åŒ…ï¼Œå³&quot;å‘é€çª—å£&quot;çš„å¤§å°ä¸º10ã€‚ç„¶åŽåœä¸‹æ¥ï¼Œç­‰å¾…æŽ¥æ”¶æ–¹çš„ç¡®è®¤ï¼Œå†ç»§ç»­å‘é€ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŽ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸¤ä¸ª TCP æ•°æ®åŒ…ï¼Œå°±è¦å‘é€ä¸€ä¸ªç¡®è®¤æ¶ˆæ¯ã€‚&quot;ç¡®è®¤&quot;çš„è‹±è¯­æ˜¯ acknowledgementï¼Œæ‰€ä»¥è¿™ä¸ªç¡®è®¤æ¶ˆæ¯å°±ç®€ç§° ACKã€‚ ACK æºå¸¦ä¸¤ä¸ªä¿¡æ¯ï¼š æœŸå¾…è¦æ”¶åˆ°ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„ç¼–å· æŽ¥æ”¶æ–¹çš„æŽ¥æ”¶çª—å£çš„å‰©ä½™å®¹é‡ å‘é€æ–¹æœ‰äº†è¿™ä¸¤ä¸ªä¿¡æ¯ï¼Œå†åŠ ä¸Šè‡ªå·±å·²ç»å‘å‡ºçš„æ•°æ®åŒ…çš„æœ€æ–°ç¼–å·ï¼Œå°±ä¼šæŽ¨æµ‹å‡ºæŽ¥æ”¶æ–¹å¤§æ¦‚çš„æŽ¥æ”¶é€Ÿåº¦ï¼Œä»Žè€Œé™ä½Žæˆ–å¢žåŠ å‘é€é€ŸçŽ‡ã€‚è¿™è¢«ç§°ä¸º&quot;å‘é€çª—å£&quot;ï¼Œè¿™ä¸ªçª—å£çš„å¤§å°æ˜¯å¯å˜çš„ã€‚ æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå‘é€å‘å’ŒæŽ¥æ”¶æ–¹éƒ½ç»´æŠ¤äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œå¯ä»¥ç†è§£ä¸ºçª—å£ã€‚æ ¹æ®æŽ¥æ”¶é€Ÿåº¦å¯ä»¥è°ƒæ•´å‘é€é€Ÿåº¦ï¼Œé€æ¸è¾¾åˆ°è¿™æ¡çº¿è·¯æœ€é«˜çš„ä¼ è¾“é€ŸçŽ‡ã€‚ okï¼Œä¸‹é¢å°±å¯ä»¥ç ”ç©¶ä¸€ä¸‹æ»‘åŠ¨çª—å£äº†ã€‚ å…­ã€æ»‘åŠ¨çª—å£åŽŸç† æ­£å¸¸æƒ…å†µä¸‹ï¼š ï¼ˆå¦‚å›¾ï¼Œ123è¡¨ç¤ºå·²ç»æ­£å¸¸å‘é€å¹¶ä¸”æ”¶åˆ°äº†ACKç¡®è®¤ã€‚4567å±žäºŽå·²å‘é€ä½†æ˜¯è¿˜æ²¡æœ‰æ”¶åˆ°ACKã€‚8910è¡¨ç¤ºå¾…å‘é€ã€‚è¿™ä¸ªçª—å£å½“å‰é•¿åº¦ä¸º7.æ­£å¸¸æƒ…å†µä¸‹ï¼Œ4å·åŒ…æ”¶åˆ°ACKï¼Œé‚£ä¹ˆçª—å£å°±ä¼šå³ç§»ä¸€æ ¼ã€‚ï¼‰ ä½†æ˜¯å¾€å¾€ä¼šå‡ºçŽ°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚5å·åŒ…è¿Ÿè¿Ÿæ”¶ä¸åˆ°ACKï¼Œåœ¨æŽ¥æ”¶ç«¯å¯èƒ½æ˜¯æ²¡æœ‰æ”¶åˆ°5å·åŒ…ï¼Œä½†æ˜¯å¯èƒ½ä¼šæ”¶åˆ°6å·åŒ…ç”šè‡³æ˜¯7ã€8å·åŒ…ï¼Œé‚£ä¹ˆæ­¤æ—¶åªèƒ½ç­‰å¾…5å·åŒ…ï¼Œå¦‚æžœ5å·åŒ…é¡ºåˆ©åˆ°è¾¾äº†ï¼Œé‚£ä¹ˆå°±æŠŠ5678å·åŒ…çš„ACKéƒ½å‘ç»™å‘é€ç«¯ï¼Œé‚£ä¹ˆå‘é€ç«¯æ»‘åŠ¨çª—å£å‘å³å³ç§»å››æ ¼ã€‚å¦‚æžœè¿Ÿè¿Ÿæ”¶ä¸åˆ°5å·åŒ…ï¼Œåªèƒ½é‡ä¼ ã€‚ ä»¥ä¸Šå°±æ˜¯å…³äºŽTCPä¸­æ¯”è¾ƒé‡è¦çš„å‡ºé”™é‡ä¼ ã€ç¼–å·ã€æ…¢å¯åŠ¨ä»¥åŠæ»‘åŠ¨çª—å£ã€‚è¿™äº›ä¿è¯äº†æ•°æ®ä¼ è¾“çš„å¯é æ€§ã€‚ æ•´ç†è‡ªï¼šhttp://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[httpçš„å‰ä¸–ä»Šç”Ÿ]]></title>
    <url>%2F2019%2F01%2F17%2Fnetwork%2F3.http%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬ä¸‰ç¯‡æ–‡ç« ã€‚ä½œä¸ºä¸€ä¸ªåŽç«¯æ”»åŸŽç‹®ï¼Œæ¯å¤©æ‰“äº¤é“æœ€å¤šçš„å°±æ˜¯HTTPåè®®ï¼Œåœ¨å¦‚ä»Šç«çƒ­çš„å¾®æœåŠ¡å®žçŽ°æ–¹æ¡ˆä¸­ï¼Œé™¤äº†é˜¿é‡Œçš„dubboï¼Œå°±æ˜¯spring cloudï¼Œè€Œspring cloudç›®å‰é€‚ç”¨çš„æœåŠ¡é—´é€šä¿¡æ–¹å¼ä¹Ÿå°±æ˜¯åŸºäºŽHTTP çš„ restfulæŽ¥å£æ¥å®žçŽ°ã€‚å¹¶ä¸”ä½œä¸ºæµè§ˆå™¨ä¸Šç”¨çš„æœ€å¤šçš„åè®®ï¼Œæ— è®ºæ˜¯å‰ç«¯ã€åŽç«¯è¿˜æ˜¯æµ‹è¯•éƒ½åº”è¯¥åŽ»ç†Ÿæ‚‰å®ƒï¼Œè½¯ä»¶çš„å‘å±•æ˜¯å¾ªåºæ¸è¿›çš„ï¼Œæ¯æ¬¡çš„è¿­ä»£å‡çº§éƒ½æ˜¯ä¸ºäº†è§£å†³ä¸Šä¸€ç‰ˆæœ¬çš„ç—›ç‚¹ï¼ŒHTTPåè®®çš„å‘å±•ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ¬ç« ç€é‡è®²è§£HTTPçš„å‰ä¸–ä»Šç”Ÿï¼Œè®©æˆ‘ä»¬æ›´åŠ äº†è§£HTTPã€‚ HTTP æ˜¯åŸºäºŽ TCP/IP åè®®çš„åº”ç”¨å±‚åè®®ã€‚å®ƒä¸æ¶‰åŠæ•°æ®åŒ…ï¼ˆpacketï¼‰ä¼ è¾“ï¼Œä¸»è¦è§„å®šäº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ ¼å¼ï¼Œé»˜è®¤ä½¿ç”¨80ç«¯å£ã€‚ ä¸€ã€HTTP/0.9 1.1 ç®€ä»‹ è¿™æ˜¯ç¬¬ä¸€ä¸ªå®šç¨¿çš„HTTPåè®®ã€‚ å†…å®¹éžå¸¸ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªå‘½ä»¤GET æ²¡æœ‰HEADERç­‰æè¿°æ•°æ®çš„ä¿¡æ¯ æœåŠ¡å™¨å‘é€å®Œæ¯•ï¼Œå°±å…³é—­TCPè¿žæŽ¥ï¼ˆä¸€ä¸ªHTTPè¯·æ±‚åœ¨ä¸€ä¸ªTCPè¿žæŽ¥ä¸­å®Œæˆï¼‰ 1.2 è¯·æ±‚æ ¼å¼ æ¯”å¦‚å‘èµ·ä¸€ä¸ªGETè¯·æ±‚ï¼š GET /index.html ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼ŒTCP è¿žæŽ¥ï¼ˆconnectionï¼‰å»ºç«‹åŽï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚ï¼ˆrequestï¼‰ç½‘é¡µindex.htmlã€‚ 1.3 å“åº”æ ¼å¼ åè®®è§„å®šï¼ŒæœåŠ¡å™¨åªèƒ½å›žåº”HTMLæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½å›žåº”åˆ«çš„æ ¼å¼ã€‚ 123&lt;html&gt; &lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt; æœåŠ¡å™¨å‘é€å®Œæ¯•ï¼Œå°±å…³é—­TCPè¿žæŽ¥ã€‚ äºŒã€HTTP/1.0 2.1 ç®€ä»‹ è·ŸçŽ°åœ¨æ¯”è¾ƒæ™®éé€‚ç”¨çš„1.1ç‰ˆæœ¬å·²ç»ç›¸å·®ä¸å¤šã€‚ å¢žåŠ å¾ˆå¤šå‘½ä»¤ï¼Œæ¯”å¦‚POSTã€HEADç­‰å‘½ä»¤ å¢žåŠ status code å’Œ header å¤šå­—ç¬¦é›†æ”¯æŒã€å¤šéƒ¨åˆ†å‘é€ã€æƒé™ã€ç¼“å­˜ç­‰ é¦–å…ˆï¼Œä»»ä½•æ ¼å¼çš„å†…å®¹éƒ½å¯ä»¥å‘é€ã€‚è¿™ä½¿å¾—äº’è”ç½‘ä¸ä»…å¯ä»¥ä¼ è¾“æ–‡å­—ï¼Œè¿˜èƒ½ä¼ è¾“å›¾åƒã€è§†é¢‘ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™ä¸ºäº’è”ç½‘çš„å¤§å‘å±•å¥ å®šäº†åŸºç¡€ã€‚ å…¶æ¬¡ï¼Œé™¤äº†GETå‘½ä»¤ï¼Œè¿˜å¼•å…¥äº†POSTå‘½ä»¤å’ŒHEADå‘½ä»¤ï¼Œä¸°å¯Œäº†æµè§ˆå™¨ä¸ŽæœåŠ¡å™¨çš„äº’åŠ¨æ‰‹æ®µã€‚ å†æ¬¡ï¼ŒHTTPè¯·æ±‚å’Œå›žåº”çš„æ ¼å¼ä¹Ÿå˜äº†ã€‚é™¤äº†æ•°æ®éƒ¨åˆ†ï¼Œæ¯æ¬¡é€šä¿¡éƒ½å¿…é¡»åŒ…æ‹¬å¤´ä¿¡æ¯ï¼ˆHTTP headerï¼‰ï¼Œç”¨æ¥æè¿°ä¸€äº›å…ƒæ•°æ®ã€‚ å…¶ä»–çš„æ–°å¢žåŠŸèƒ½è¿˜åŒ…æ‹¬çŠ¶æ€ç ï¼ˆstatus codeï¼‰ã€å¤šå­—ç¬¦é›†æ”¯æŒã€å¤šéƒ¨åˆ†å‘é€ï¼ˆmulti-part typeï¼‰ã€æƒé™ï¼ˆauthorizationï¼‰ã€ç¼“å­˜ï¼ˆcacheï¼‰ã€å†…å®¹ç¼–ç ï¼ˆcontent encodingï¼‰ç­‰ã€‚ 2.2 è¯·æ±‚æ ¼å¼ ä¸‹é¢æ˜¯ä¸€ä¸ª1.0ç‰ˆçš„HTTPè¯·æ±‚çš„ä¾‹å­ã€‚ 123GET / HTTP/1.0User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)Accept: */* å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ ¼å¼ä¸Ž0.9ç‰ˆæœ‰å¾ˆå¤§å˜åŒ–ã€‚ ç¬¬ä¸€è¡Œæ˜¯è¯·æ±‚å‘½ä»¤ï¼Œå¿…é¡»åœ¨å°¾éƒ¨æ·»åŠ åè®®ç‰ˆæœ¬ï¼ˆHTTP/1.0ï¼‰ã€‚åŽé¢å°±æ˜¯å¤šè¡Œå¤´ä¿¡æ¯ï¼Œæè¿°å®¢æˆ·ç«¯çš„æƒ…å†µã€‚ å®¢æˆ·ç«¯è¯·æ±‚çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨Acceptå­—æ®µå£°æ˜Žè‡ªå·±å¯ä»¥æŽ¥å—å“ªäº›æ•°æ®æ ¼å¼ã€‚ä¸Šé¢ä»£ç ä¸­ï¼Œå®¢æˆ·ç«¯å£°æ˜Žè‡ªå·±å¯ä»¥æŽ¥å—ä»»ä½•æ ¼å¼çš„æ•°æ®ã€‚ 2.3 å“åº”æ ¼å¼ æœåŠ¡å™¨çš„å›žåº”å¦‚ä¸‹ï¼š 12345678910HTTP/1.0 200 OK Content-Type: text/plainContent-Length: 137582Expires: Thu, 05 Dec 1997 16:00:00 GMTLast-Modified: Wed, 5 August 1996 15:55:28 GMTServer: Apache 0.84&lt;html&gt; &lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt; å›žåº”çš„æ ¼å¼æ˜¯&quot;å¤´ä¿¡æ¯ + ä¸€ä¸ªç©ºè¡Œï¼ˆ\r\nï¼‰ + æ•°æ®&quot;ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œæ˜¯&quot;åè®®ç‰ˆæœ¬ + çŠ¶æ€ç ï¼ˆstatus codeï¼‰ + çŠ¶æ€æè¿°&quot;ã€‚ 2.4 Content-Type å­—æ®µ å…³äºŽå­—ç¬¦çš„ç¼–ç ï¼Œ1.0ç‰ˆè§„å®šï¼Œå¤´ä¿¡æ¯å¿…é¡»æ˜¯ ASCII ç ï¼ŒåŽé¢çš„æ•°æ®å¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ã€‚å› æ­¤ï¼ŒæœåŠ¡å™¨å›žåº”çš„æ—¶å€™ï¼Œå¿…é¡»å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œæ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼ï¼Œè¿™å°±æ˜¯Content-Typeå­—æ®µçš„ä½œç”¨ã€‚ 2.5 ç¼ºç‚¹ æ¯ä¸ªTCPè¿žæŽ¥åªèƒ½å‘é€ä¸€ä¸ªè¯·æ±‚ã€‚å‘é€æ•°æ®å®Œæ¯•ï¼Œè¿žæŽ¥å°±å…³é—­ï¼Œå¦‚æžœè¿˜è¦è¯·æ±‚å…¶ä»–èµ„æºï¼Œå°±å¿…é¡»å†æ–°å»ºä¸€ä¸ªè¿žæŽ¥ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰äº›æµè§ˆå™¨åœ¨è¯·æ±‚æ—¶ï¼Œç”¨äº†ä¸€ä¸ªéžæ ‡å‡†çš„Connectionå­—æ®µã€‚ Connection: keep-alive è¿™ä¸ªå­—æ®µè¦æ±‚æœåŠ¡å™¨ä¸è¦å…³é—­TCPè¿žæŽ¥ï¼Œä»¥ä¾¿å…¶ä»–è¯·æ±‚å¤ç”¨ã€‚æœåŠ¡å™¨åŒæ ·å›žåº”è¿™ä¸ªå­—æ®µã€‚ Connection: keep-alive ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„TCPè¿žæŽ¥å°±å»ºç«‹äº†ï¼Œç›´åˆ°å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ä¸»åŠ¨å…³é—­è¿žæŽ¥ã€‚ä½†æ˜¯ï¼Œè¿™ä¸æ˜¯æ ‡å‡†å­—æ®µï¼Œä¸åŒå®žçŽ°çš„è¡Œä¸ºå¯èƒ½ä¸ä¸€è‡´ï¼Œå› æ­¤ä¸æ˜¯æ ¹æœ¬çš„è§£å†³åŠžæ³•ã€‚ ä¸‰ã€HTTP/1.1 3.1 æŒä¹…è¿žæŽ¥å’Œç®¡é“æœºåˆ¶ æŒä¹…è¿žæŽ¥ï¼ˆä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œä¸€ä¸ªHTTPè¯·æ±‚å°±åˆ›å»ºä¸€ä¸ªTCPè¿žæŽ¥ï¼Œè¯·æ±‚è¿”å›žä¹‹åŽå°±å…³é—­TCPè¿žæŽ¥ï¼Œç„¶è€Œå»ºç«‹ä¸€æ¬¡TCPè¿žæŽ¥çš„è¿‡ç¨‹æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œæ•ˆçŽ‡ä¼šæ¯”è¾ƒä½Žï¼ŒçŽ°åœ¨å»ºç«‹ä¸€ä¸ªTCPè¿žæŽ¥åŽï¼ŒåŽé¢çš„HTTPè¯·æ±‚éƒ½å¯ä»¥å¤ç”¨è¿™ä¸ªTCPè¿žæŽ¥ï¼Œå³å…è®¸äº†åœ¨åŒä¸€ä¸ªè¿žæŽ¥é‡Œé¢å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä¼šæé«˜æ•ˆçŽ‡ï¼‰ pipelineï¼ˆè§£å†³äº†åŒä¸€ä¸ªTCPè¿žæŽ¥ä¸­å®¢æˆ·ç«¯å¯ä»¥å‘é€å¤šä¸ªHTTPè¯·æ±‚ï¼Œä½†æ˜¯å¯¹äºŽæœåŠ¡ç«¯æ¥è¯´ï¼Œå¯¹äºŽè¿›æ¥çš„è¯·æ±‚è¦æŒ‰ç…§é¡ºåºè¿›è¡Œå†…å®¹çš„è¿”å›žï¼Œå¦‚æžœå‰ä¸€ä¸ªè¯·æ±‚å¤„ç†æ—¶é—´é•¿ï¼Œè€ŒåŽä¸€ä¸ªè¯·æ±‚å¤„ç†æ—¶é—´ç«¯ï¼Œå³ä¾¿åŽé¢ä¸€ä¸ªè¯·æ±‚å·²ç»å¤„ç†å®Œæ¯•äº†ï¼Œä¹Ÿè¦ç­‰å¾…å‰ä¸€ä¸ªè¯·æ±‚å¤„ç†å®Œæ¯•è¿”å›žä»–æ‰å¯ä»¥è¿”å›žç»“æžœï¼Œè¿™ç§ä¸²è¡Œçš„æ–¹å¼æ¯”è¾ƒæ…¢ï¼‰ åœ¨1.1ç‰ˆæœ¬ä»¥å‰ï¼Œæ¯æ¬¡HTTPè¯·æ±‚ï¼Œéƒ½ä¼šé‡æ–°å»ºç«‹ä¸€æ¬¡TCPè¿žæŽ¥ï¼ŒæœåŠ¡å™¨å“åº”åŽï¼Œå°±ç«‹åˆ»å…³é—­ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œå»ºç«‹TCPè¿žæŽ¥çš„æ–°å»ºæˆæœ¬å¾ˆé«˜ï¼Œå› ä¸ºéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶ä¸”æœ‰ç€æ…¢å¯åŠ¨çš„ç‰¹æ€§å¯¼è‡´å‘é€é€Ÿåº¦è¾ƒæ…¢ã€‚è€Œ1.1ç‰ˆæœ¬æ·»åŠ çš„æŒä¹…è¿žæŽ¥åŠŸèƒ½å¯ä»¥è®©ä¸€æ¬¡TCPè¿žæŽ¥ä¸­å‘é€å¤šæ¡HTTPè¯·æ±‚ï¼Œå€¼å¾—ä¸€æçš„æ˜¯é»˜è®¤æ˜¯ï¼ŒæŽ§åˆ¶æŒä¹…è¿žæŽ¥çš„Connectionå­—æ®µé»˜è®¤å€¼æ˜¯keep-aliveï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯é»˜è®¤æ‰“å¼€æŒä¹…è¿žæŽ¥ï¼Œå¦‚æžœæƒ³è¦å…³é—­ï¼Œåªéœ€å°†è¯¥å­—æ®µçš„å€¼æ”¹ä¸ºcloseã€‚ Connection: close è€Œç®¡é“åŒ–åˆ™èµ‹äºˆäº†å®¢æˆ·ç«¯åœ¨ä¸€ä¸ªTCPè¿žæŽ¥ä¸­è¿žç»­å‘é€å¤šä¸ªè¯·æ±‚çš„èƒ½åŠ›ï¼Œè€Œä¸éœ€è¦ç­‰åˆ°å‰ä¸€ä¸ªè¯·æ±‚å“åº”ï¼Œè¿™å¤§å¤§æé«˜äº†æ•ˆçŽ‡ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè™½ç„¶å®¢æˆ·ç«¯å¯ä»¥è¿žç»­å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›žä¾ç„¶æ˜¯æŒ‰ç…§å‘é€çš„é¡ºåºè¿”å›žã€‚ï¼ˆå¼ºè°ƒçš„æ˜¯requestä¸éœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªrequestçš„responseï¼Œå…¶å®žå‘é€çš„requestè¿˜æ˜¯æœ‰é¡ºåºçš„ï¼ŒæœåŠ¡ç«¯æŒ‰ç…§è¿™ä¸ªé¡ºåºæŽ¥æ”¶ï¼Œä¾æ¬¡è¿”å›žå“åº”ï¼‰ HTTP/1.1å…è®¸å¤šä¸ªhttpè¯·æ±‚é€šè¿‡ä¸€ä¸ªå¥—æŽ¥å­—åŒæ—¶è¢«è¾“å‡º ï¼Œè€Œä¸ç”¨ç­‰å¾…ç›¸åº”çš„å“åº”ã€‚ç„¶åŽè¯·æ±‚è€…å°±ä¼šç­‰å¾…å„è‡ªçš„å“åº”ï¼Œè¿™äº›å“åº”æ˜¯æŒ‰ç…§ä¹‹å‰è¯·æ±‚çš„é¡ºåºä¾æ¬¡åˆ°è¾¾ã€‚ï¼ˆmeï¼šæ‰€æœ‰è¯·æ±‚ä¿æŒä¸€ä¸ªFIFOçš„é˜Ÿåˆ—ï¼Œä¸€ä¸ªè¯·æ±‚å‘é€å®Œä¹‹åŽï¼Œä¸å¿…ç­‰å¾…è¿™ä¸ªè¯·æ±‚çš„å“åº”è¢«æŽ¥å—åˆ°ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚å°±å¯ä»¥è¢«å†æ¬¡å‘å‡ºï¼›åŒæ—¶ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›žè¿™äº›è¯·æ±‚çš„å“åº”æ—¶ä¹Ÿæ˜¯æŒ‰ç…§FIFOçš„é¡ºåºï¼‰ã€‚ç®¡é“åŒ–çš„è¡¨çŽ°å¯ä»¥å¤§å¤§æé«˜é¡µé¢åŠ è½½çš„é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å»¶è¿Ÿè¿žæŽ¥ä¸­ã€‚ 3.2 Content-Length å­—æ®µ ä¸€ä¸ªTCPè¿žæŽ¥çŽ°åœ¨å¯ä»¥ä¼ é€å¤šä¸ªå›žåº”ï¼ŒåŠ¿å¿…å°±è¦æœ‰ä¸€ç§æœºåˆ¶ï¼ŒåŒºåˆ†æ•°æ®åŒ…æ˜¯å±žäºŽå“ªä¸€ä¸ªå›žåº”çš„ã€‚è¿™å°±æ˜¯Content-lengthå­—æ®µçš„ä½œç”¨ï¼Œå£°æ˜Žæœ¬æ¬¡å›žåº”çš„æ•°æ®é•¿åº¦ã€‚ Content-Length: 3495 ä¸Šé¢ä»£ç å‘Šè¯‰æµè§ˆå™¨ï¼Œæœ¬æ¬¡å›žåº”çš„é•¿åº¦æ˜¯3495ä¸ªå­—èŠ‚ï¼ŒåŽé¢çš„å­—èŠ‚å°±å±žäºŽä¸‹ä¸€ä¸ªå›žåº”äº†ã€‚ åœ¨1.0ç‰ˆä¸­ï¼ŒContent-Lengthå­—æ®µä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæµè§ˆå™¨å‘çŽ°æœåŠ¡å™¨å…³é—­äº†TCPè¿žæŽ¥ï¼Œå°±è¡¨æ˜Žæ”¶åˆ°çš„æ•°æ®åŒ…å·²ç»å…¨äº†ã€‚ 3.3 åˆ†å—ä¼ è¾“ç¼–ç  å¯¹äºŽä¸€äº›å¾ˆè€—æ—¶çš„åŠ¨æ€æ“ä½œæ¥è¯´ï¼Œè¿™æ„å‘³ç€ï¼ŒæœåŠ¡å™¨è¦ç­‰åˆ°æ‰€æœ‰æ“ä½œå®Œæˆï¼Œæ‰èƒ½å‘é€æ•°æ®ï¼Œæ˜¾ç„¶è¿™æ ·çš„æ•ˆçŽ‡ä¸é«˜ã€‚æ›´å¥½çš„å¤„ç†æ–¹æ³•æ˜¯ï¼Œäº§ç”Ÿä¸€å—æ•°æ®ï¼Œå°±å‘é€ä¸€å—ï¼Œé‡‡ç”¨&quot;æµæ¨¡å¼&quot;ï¼ˆstreamï¼‰å–ä»£&quot;ç¼“å­˜æ¨¡å¼&quot;ï¼ˆbufferï¼‰ã€‚ å› æ­¤ï¼Œ1.1ç‰ˆè§„å®šå¯ä»¥ä¸ä½¿ç”¨Content-Lengthå­—æ®µï¼Œè€Œä½¿ç”¨&quot;åˆ†å—ä¼ è¾“ç¼–ç &quot;ï¼ˆchunked transfer encodingï¼‰ã€‚åªè¦è¯·æ±‚æˆ–å›žåº”çš„å¤´ä¿¡æ¯æœ‰Transfer-Encodingå­—æ®µï¼Œå°±è¡¨æ˜Žå›žåº”å°†ç”±æ•°é‡æœªå®šçš„æ•°æ®å—ç»„æˆã€‚ Transfer-Encoding: chunked æ¯ä¸ªéžç©ºçš„æ•°æ®å—ä¹‹å‰ï¼Œä¼šæœ‰ä¸€ä¸ª16è¿›åˆ¶çš„æ•°å€¼ï¼Œè¡¨ç¤ºè¿™ä¸ªå—çš„é•¿åº¦ã€‚æœ€åŽæ˜¯ä¸€ä¸ªå¤§å°ä¸º0çš„å—ï¼Œå°±è¡¨ç¤ºæœ¬æ¬¡å›žåº”çš„æ•°æ®å‘é€å®Œäº†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ 1234567891011121314151617HTTP/1.1 200 OKContent-Type: text/plainTransfer-Encoding: chunked25This is the data in the first chunk1Cand this is the second one3con8sequence0 3.3 å…¶ä»–åŠŸèƒ½ 1.1ç‰ˆè¿˜æ–°å¢žäº†è®¸å¤šåŠ¨è¯æ–¹æ³•ï¼šPUTã€PATCHã€HEADã€ OPTIONSã€DELETEã€‚ å¦å¤–ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„å¤´ä¿¡æ¯æ–°å¢žäº†Hostå­—æ®µï¼Œç”¨æ¥æŒ‡å®šæœåŠ¡å™¨çš„åŸŸåã€‚ Host: www.example.com æœ‰äº†Hostå­—æ®µï¼Œå°±å¯ä»¥å°†è¯·æ±‚å‘å¾€åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„ä¸åŒç½‘ç«™ï¼Œä¸ºè™šæ‹Ÿä¸»æœºçš„å…´èµ·æ‰“ä¸‹äº†åŸºç¡€ã€‚ 3.4 ç¼ºç‚¹ è™½ç„¶1.1ç‰ˆå…è®¸å¤ç”¨TCPè¿žæŽ¥ï¼Œä½†æ˜¯åŒä¸€ä¸ªTCPè¿žæŽ¥é‡Œé¢ï¼Œæ‰€æœ‰çš„æ•°æ®é€šä¿¡æ˜¯æŒ‰æ¬¡åºè¿›è¡Œçš„ã€‚æœåŠ¡å™¨åªæœ‰å¤„ç†å®Œä¸€ä¸ªå›žåº”ï¼Œæ‰ä¼šè¿›è¡Œä¸‹ä¸€ä¸ªå›žåº”ã€‚è¦æ˜¯å‰é¢çš„å›žåº”ç‰¹åˆ«æ…¢ï¼ŒåŽé¢å°±ä¼šæœ‰è®¸å¤šè¯·æ±‚æŽ’é˜Ÿç­‰ç€ã€‚è¿™ç§°ä¸º&quot;é˜Ÿå¤´å µå¡ž&quot;ï¼ˆHead-of-line blockingï¼‰ã€‚ å››ã€SPDY åè®® 2009å¹´ï¼Œè°·æ­Œå…¬å¼€äº†è‡ªè¡Œç ”å‘çš„ SPDY åè®®ï¼Œä¸»è¦è§£å†³ HTTP/1.1 æ•ˆçŽ‡ä¸é«˜çš„é—®é¢˜ã€‚ è¿™ä¸ªåè®®åœ¨Chromeæµè§ˆå™¨ä¸Šè¯æ˜Žå¯è¡Œä»¥åŽï¼Œå°±è¢«å½“ä½œ HTTP/2 çš„åŸºç¡€ï¼Œä¸»è¦ç‰¹æ€§éƒ½åœ¨ HTTP/2 ä¹‹ä¸­å¾—åˆ°ç»§æ‰¿ã€‚ äº”ã€HTTP/2 5.1 äºŒè¿›åˆ¶åè®® HTTP/1.1 ç‰ˆçš„å¤´ä¿¡æ¯è‚¯å®šæ˜¯æ–‡æœ¬ï¼ˆASCIIç¼–ç ï¼‰ï¼Œæ•°æ®ä½“å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒè¿›åˆ¶ã€‚ HTTP/2 åˆ™æ˜¯ä¸€ä¸ªå½»åº•çš„äºŒè¿›åˆ¶åè®®ï¼Œå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¹¶ä¸”ç»Ÿç§°ä¸º&quot;å¸§&quot;ï¼ˆframeï¼‰ï¼šå¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ã€‚ äºŒè¿›åˆ¶åè®®çš„ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯ä»¥å®šä¹‰é¢å¤–çš„å¸§ã€‚HTTP/2 å®šä¹‰äº†è¿‘åç§å¸§ï¼Œä¸ºå°†æ¥çš„é«˜çº§åº”ç”¨æ‰“å¥½äº†åŸºç¡€ã€‚å¦‚æžœä½¿ç”¨æ–‡æœ¬å®žçŽ°è¿™ç§åŠŸèƒ½ï¼Œè§£æžæ•°æ®å°†ä¼šå˜å¾—éžå¸¸éº»çƒ¦ï¼ŒäºŒè¿›åˆ¶è§£æžåˆ™æ–¹ä¾¿å¾—å¤šã€‚ 5.2 å¤šå·¥ HTTP/2 å¤ç”¨TCPè¿žæŽ¥ï¼Œåœ¨ä¸€ä¸ªè¿žæŽ¥é‡Œï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨éƒ½å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚æˆ–å›žåº”ï¼Œè€Œä¸”ä¸ç”¨æŒ‰ç…§é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œè¿™æ ·å°±é¿å…äº†&quot;é˜Ÿå¤´å µå¡ž&quot;ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªTCPè¿žæŽ¥é‡Œé¢ï¼ŒæœåŠ¡å™¨åŒæ—¶æ”¶åˆ°äº†Aè¯·æ±‚å’ŒBè¯·æ±‚ï¼ŒäºŽæ˜¯å…ˆå›žåº”Aè¯·æ±‚ï¼Œç»“æžœå‘çŽ°å¤„ç†è¿‡ç¨‹éžå¸¸è€—æ—¶ï¼ŒäºŽæ˜¯å°±å‘é€Aè¯·æ±‚å·²ç»å¤„ç†å¥½çš„éƒ¨åˆ†ï¼Œ æŽ¥ç€å›žåº”Bè¯·æ±‚ï¼Œå®ŒæˆåŽï¼Œå†å‘é€Aè¯·æ±‚å‰©ä¸‹çš„éƒ¨åˆ†ã€‚ è¿™æ ·åŒå‘çš„ã€å®žæ—¶çš„é€šä¿¡ï¼Œå°±å«åšå¤šå·¥ï¼ˆMultiplexingï¼‰ã€‚ 5.3 æ•°æ®æµ å› ä¸º HTTP/2 çš„æ•°æ®åŒ…æ˜¯ä¸æŒ‰é¡ºåºå‘é€çš„ï¼ŒåŒä¸€ä¸ªè¿žæŽ¥é‡Œé¢è¿žç»­çš„æ•°æ®åŒ…ï¼Œå¯èƒ½å±žäºŽä¸åŒçš„å›žåº”ã€‚å› æ­¤ï¼Œå¿…é¡»è¦å¯¹æ•°æ®åŒ…åšæ ‡è®°ï¼ŒæŒ‡å‡ºå®ƒå±žäºŽå“ªä¸ªå›žåº”ã€‚ HTTP/2 å°†æ¯ä¸ªè¯·æ±‚æˆ–å›žåº”çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œç§°ä¸ºä¸€ä¸ªæ•°æ®æµï¼ˆstreamï¼‰ã€‚æ¯ä¸ªæ•°æ®æµéƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–å·ã€‚æ•°æ®åŒ…å‘é€çš„æ—¶å€™ï¼Œéƒ½å¿…é¡»æ ‡è®°æ•°æ®æµIDï¼Œç”¨æ¥åŒºåˆ†å®ƒå±žäºŽå“ªä¸ªæ•°æ®æµã€‚å¦å¤–è¿˜è§„å®šï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®æµï¼ŒIDä¸€å¾‹ä¸ºå¥‡æ•°ï¼ŒæœåŠ¡å™¨å‘å‡ºçš„ï¼ŒIDä¸ºå¶æ•°ã€‚ æ•°æ®æµå‘é€åˆ°ä¸€åŠçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥å‘é€ä¿¡å·ï¼ˆRST_STREAMå¸§ï¼‰ï¼Œå–æ¶ˆè¿™ä¸ªæ•°æ®æµã€‚1.1ç‰ˆå–æ¶ˆæ•°æ®æµçš„å”¯ä¸€æ–¹æ³•ï¼Œå°±æ˜¯å…³é—­TCPè¿žæŽ¥ã€‚è¿™å°±æ˜¯è¯´ï¼ŒHTTP/2 å¯ä»¥å–æ¶ˆæŸä¸€æ¬¡è¯·æ±‚ï¼ŒåŒæ—¶ä¿è¯TCPè¿žæŽ¥è¿˜æ‰“å¼€ç€ï¼Œå¯ä»¥è¢«å…¶ä»–è¯·æ±‚ä½¿ç”¨ã€‚ å®¢æˆ·ç«¯è¿˜å¯ä»¥æŒ‡å®šæ•°æ®æµçš„ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒæœåŠ¡å™¨å°±ä¼šè¶Šæ—©å›žåº”ã€‚ 5.4 å¤´ä¿¡æ¯åŽ‹ç¼© HTTP åè®®ä¸å¸¦æœ‰çŠ¶æ€ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»é™„ä¸Šæ‰€æœ‰ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œè¯·æ±‚çš„å¾ˆå¤šå­—æ®µéƒ½æ˜¯é‡å¤çš„ï¼Œæ¯”å¦‚Cookieå’ŒUser Agentï¼Œä¸€æ¨¡ä¸€æ ·çš„å†…å®¹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»é™„å¸¦ï¼Œè¿™ä¼šæµªè´¹å¾ˆå¤šå¸¦å®½ï¼Œä¹Ÿå½±å“é€Ÿåº¦ã€‚ HTTP/2 å¯¹è¿™ä¸€ç‚¹åšäº†ä¼˜åŒ–ï¼Œå¼•å…¥äº†å¤´ä¿¡æ¯åŽ‹ç¼©æœºåˆ¶ï¼ˆheader compressionï¼‰ã€‚ä¸€æ–¹é¢ï¼Œå¤´ä¿¡æ¯ä½¿ç”¨gzipæˆ–compressåŽ‹ç¼©åŽå†å‘é€ï¼›å¦ä¸€æ–¹é¢ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤ä¸€å¼ å¤´ä¿¡æ¯è¡¨ï¼Œæ‰€æœ‰å­—æ®µéƒ½ä¼šå­˜å…¥è¿™ä¸ªè¡¨ï¼Œç”Ÿæˆä¸€ä¸ªç´¢å¼•å·ï¼Œä»¥åŽå°±ä¸å‘é€åŒæ ·å­—æ®µäº†ï¼Œåªå‘é€ç´¢å¼•å·ï¼Œè¿™æ ·å°±æé«˜é€Ÿåº¦äº†ã€‚ 5.5 æœåŠ¡å™¨æŽ¨é€ HTTP/2 å…è®¸æœåŠ¡å™¨æœªç»è¯·æ±‚ï¼Œä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€èµ„æºï¼Œè¿™å«åšæœåŠ¡å™¨æŽ¨é€ï¼ˆserver pushï¼‰ã€‚ å¸¸è§åœºæ™¯æ˜¯å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªç½‘é¡µï¼Œè¿™ä¸ªç½‘é¡µé‡Œé¢åŒ…å«å¾ˆå¤šé™æ€èµ„æºã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¿…é¡»æ”¶åˆ°ç½‘é¡µåŽï¼Œè§£æžHTMLæºç ï¼Œå‘çŽ°æœ‰é™æ€èµ„æºï¼Œå†å‘å‡ºé™æ€èµ„æºè¯·æ±‚ã€‚å…¶å®žï¼ŒæœåŠ¡å™¨å¯ä»¥é¢„æœŸåˆ°å®¢æˆ·ç«¯è¯·æ±‚ç½‘é¡µåŽï¼Œå¾ˆå¯èƒ½ä¼šå†è¯·æ±‚é™æ€èµ„æºï¼Œæ‰€ä»¥å°±ä¸»åŠ¨æŠŠè¿™äº›é™æ€èµ„æºéšç€ç½‘é¡µä¸€èµ·å‘ç»™å®¢æˆ·ç«¯äº†ã€‚ æ•´ç†è‡ªï¼šhttp://www.ruanyifeng.com/blog/2016/08/http.html]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»Žä¸Šåˆ°ä¸‹çœ‹äº”å±‚æ¨¡åž‹]]></title>
    <url>%2F2019%2F01%2F17%2Fnetwork%2F2.%E4%BB%8E%E4%B8%8A%E5%88%B0%E4%B8%8B%E7%9C%8B%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬äºŒç¯‡æ–‡ç« ã€‚ç»è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„è¯¦ç»†ä»‹ç»ï¼Œæˆ‘ä»¬äº†è§£äº†ä¸€ä¸ªæ•°æ®æ˜¯å¦‚ä½•ä»Žç‰©ç†å±‚ä¸€æ­¥ä¸€æ­¥åˆ°è¾¾åº”ç”¨å±‚çš„ï¼Œé‚£ä¹ˆæœ¬ç« ä»Žä¸Šè€Œä¸‹çš„è§’åº¦æ¥çœ‹çœ‹ä¸€æ¡è¯·æ±‚æ—¶å¦‚ä½•ä»Žæµè§ˆå™¨ä¼ é€’åˆ°æœåŠ¡å™¨å¹¶ä¸”è¿”å›žçš„ã€‚ è¿™ä¸ªè¿‡ç¨‹çœ‹çš„å°±æ˜¯ç”¨æˆ·ä»Žæµè§ˆå™¨è¾“å…¥ä¸€æ¡urlä¹‹åŽï¼Œæ˜¯å¦‚ä½•å‘é€è¿‡åŽ»çš„ã€‚ 1.ä¸Šä¸€ç¯‡æ–‡ç« çš„å°ç»“ æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œç½‘ç»œé€šä¿¡å°±æ˜¯äº¤æ¢æ•°æ®åŒ…ã€‚ç”µè„‘Aå‘ç”µè„‘Bå‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒåŽè€…æ”¶åˆ°äº†ï¼Œå›žå¤ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»Žè€Œå®žçŽ°ä¸¤å°ç”µè„‘ä¹‹é—´çš„é€šä¿¡ã€‚æ•°æ®åŒ…çš„ç»“æž„ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸‹é¢è¿™æ ·ï¼š å‘é€è¿™ä¸ªåŒ…ï¼Œéœ€è¦çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼š å¯¹æ–¹çš„MACåœ°å€ å¯¹æ–¹çš„IPåœ°å€ æœ‰äº†è¿™ä¸¤ä¸ªåœ°å€ï¼Œæ•°æ®åŒ…æ‰èƒ½å‡†ç¡®é€åˆ°æŽ¥æ”¶è€…æ‰‹ä¸­ã€‚ä½†æ˜¯ï¼Œå‰é¢è¯´è¿‡ï¼ŒMACåœ°å€æœ‰å±€é™æ€§ï¼Œå¦‚æžœä¸¤å°ç”µè„‘ä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±æ— æ³•çŸ¥é“å¯¹æ–¹çš„MACåœ°å€ï¼Œå¿…é¡»é€šè¿‡ç½‘å…³ï¼ˆgatewayï¼‰è½¬å‘ã€‚ ä¸Šå›¾ä¸­ï¼Œ1å·ç”µè„‘è¦å‘4å·ç”µè„‘å‘é€ä¸€ä¸ªæ•°æ®åŒ…ã€‚å®ƒå…ˆåˆ¤æ–­4å·ç”µè„‘æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œç»“æžœå‘çŽ°ä¸æ˜¯ï¼ˆåŽæ–‡ä»‹ç»åˆ¤æ–­æ–¹æ³•ï¼‰ï¼ŒäºŽæ˜¯å°±æŠŠè¿™ä¸ªæ•°æ®åŒ…å‘åˆ°ç½‘å…³Aã€‚ç½‘å…³Aé€šè¿‡è·¯ç”±åè®®ï¼Œå‘çŽ°4å·ç”µè„‘ä½äºŽå­ç½‘ç»œBï¼ŒåˆæŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³Bï¼Œç½‘å…³Bå†è½¬å‘åˆ°4å·ç”µè„‘ã€‚ 1å·ç”µè„‘æŠŠæ•°æ®åŒ…å‘åˆ°ç½‘å…³Aï¼Œå¿…é¡»çŸ¥é“ç½‘å…³Açš„MACåœ°å€ã€‚ å‘é€æ•°æ®åŒ…ä¹‹å‰ï¼Œç”µè„‘å¿…é¡»åˆ¤æ–­å¯¹æ–¹æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œç„¶åŽé€‰æ‹©ç›¸åº”çš„MACåœ°å€ã€‚ æœ‰äº†ä¸€å°æ–°ç”µè„‘ä¹‹åŽï¼Œè¦æƒ³ä¸Šç½‘ï¼Œä¸€ç§æ–¹å¼æ˜¯è‡ªå·±é…ç½®é™æ€IPï¼š å¾ˆå¤šäººéƒ½æ²¡æœ‰è¿›è¡Œè¿‡è¿™ä¸ªé…ç½®ï¼Œå› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ ¹æœ¬ä¸éœ€è¦è¿™æ ·ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™ä¹Ÿä¼šç”¨åˆ°ï¼Œæ¯”å¦‚æˆ‘åœ¨ç”µä¿¡å®žä¹ çš„æ—¶å€™ï¼Œä»–ä»¬æ¯ä¸€ä¸ªç½‘å£æ—è¾¹éƒ½è´´ç€è¿™å››ä¸ªå‚æ•°ï¼Œä½ è”ç½‘å¿…é¡»è¦é€‚ç”¨ä»–æä¾›çš„ä¸€ç³»åˆ—åœ°å€æ‰è¡Œã€‚å…¶å®žç»è¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œé€šä¿¡çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“å¯¹æ–¹çš„IPï¼ˆARPçŸ¥é“å¯¹æ–¹çš„MACåœ°å€ï¼‰ã€å­ç½‘æŽ©ç ï¼ˆç¡®å®šæ‰€åœ¨çš„å­ç½‘ï¼‰ã€é»˜è®¤ç½‘å…³ï¼ˆä¸åœ¨ä¸€ä¸ªå­ç½‘ï¼Œè¦é€šè¿‡ç½‘å…³å–è½¬å‘ã€è·¯ç”±ï¼‰ã€DNSæœåŠ¡å™¨ï¼ˆè§£æžåŸŸåä¸ºIPåœ°å€ï¼‰ã€‚ ä½†æ˜¯ï¼Œè¿™æ ·çš„è®¾ç½®å¾ˆä¸“ä¸šï¼Œæ™®é€šç”¨æˆ·æœ›è€Œç”Ÿç•ï¼Œè€Œä¸”å¦‚æžœä¸€å°ç”µè„‘çš„IPåœ°å€ä¿æŒä¸å˜ï¼Œå…¶ä»–ç”µè„‘å°±ä¸èƒ½ä½¿ç”¨è¿™ä¸ªåœ°å€ï¼Œä¸å¤Ÿçµæ´»ã€‚å‡ºäºŽè¿™ä¸¤ä¸ªåŽŸå› ï¼Œå¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨&quot;åŠ¨æ€IPåœ°å€ä¸Šç½‘&quot;ã€‚ 2.DHCPåè®® æ‰€è°“&quot;åŠ¨æ€IPåœ°å€&quot;ï¼ŒæŒ‡è®¡ç®—æœºå¼€æœºåŽï¼Œä¼šè‡ªåŠ¨åˆ†é…åˆ°ä¸€ä¸ªIPåœ°å€ï¼Œä¸ç”¨äººä¸ºè®¾å®šã€‚å®ƒä½¿ç”¨çš„åè®®å«åšDHCPåè®®ã€‚ è¿™ä¸ªåè®®è§„å®šï¼Œæ¯ä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œæœ‰ä¸€å°è®¡ç®—æœºè´Ÿè´£ç®¡ç†æœ¬ç½‘ç»œçš„æ‰€æœ‰IPåœ°å€ï¼Œå®ƒå«åš&quot;DHCPæœåŠ¡å™¨&quot;ã€‚æ–°çš„è®¡ç®—æœºåŠ å…¥ç½‘ç»œï¼Œå¿…é¡»å‘&quot;DHCPæœåŠ¡å™¨&quot;å‘é€ä¸€ä¸ª&quot;DHCPè¯·æ±‚&quot;æ•°æ®åŒ…ï¼Œç”³è¯·IPåœ°å€å’Œç›¸å…³çš„ç½‘ç»œå‚æ•°ã€‚ å‰é¢è¯´è¿‡ï¼Œå¦‚æžœä¸¤å°è®¡ç®—æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¿…é¡»çŸ¥é“å¯¹æ–¹çš„MACåœ°å€å’ŒIPåœ°å€ï¼Œæ‰èƒ½å‘é€æ•°æ®åŒ…ã€‚ä½†æ˜¯ï¼Œæ–°åŠ å…¥çš„è®¡ç®—æœºä¸çŸ¥é“DHCPæœåŠ¡å™¨çš„ä¸¤ä¸ªåœ°å€ï¼Œæ€Žä¹ˆå‘é€æ•°æ®åŒ…å‘¢ï¼Ÿ DHCPåè®®åšäº†ä¸€äº›å·§å¦™çš„è§„å®šã€‚ é¦–å…ˆï¼Œå®ƒæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå»ºç«‹åœ¨UDPåè®®ä¹‹ä¸Šï¼Œæ‰€ä»¥æ•´ä¸ªæ•°æ®åŒ…æ˜¯è¿™æ ·çš„ï¼š ï¼ˆ1ï¼‰æœ€å‰é¢çš„&quot;ä»¥å¤ªç½‘æ ‡å¤´&quot;ï¼Œè®¾ç½®å‘å‡ºæ–¹ï¼ˆæœ¬æœºï¼‰çš„MACåœ°å€å’ŒæŽ¥æ”¶æ–¹ï¼ˆDHCPæœåŠ¡å™¨ï¼‰çš„MACåœ°å€ã€‚å‰è€…å°±æ˜¯æœ¬æœºç½‘å¡çš„MACåœ°å€ï¼ŒåŽè€…è¿™æ—¶ä¸çŸ¥é“ï¼Œå°±å¡«å…¥ä¸€ä¸ªå¹¿æ’­åœ°å€ï¼šFF-FF-FF-FF-FF-FFã€‚ ï¼ˆ2ï¼‰åŽé¢çš„&quot;IPæ ‡å¤´&quot;ï¼Œè®¾ç½®å‘å‡ºæ–¹çš„IPåœ°å€å’ŒæŽ¥æ”¶æ–¹çš„IPåœ°å€ã€‚è¿™æ—¶ï¼Œå¯¹äºŽè¿™ä¸¤è€…ï¼Œæœ¬æœºéƒ½ä¸çŸ¥é“ã€‚äºŽæ˜¯ï¼Œå‘å‡ºæ–¹çš„IPåœ°å€å°±è®¾ä¸º0.0.0.0ï¼ŒæŽ¥æ”¶æ–¹çš„IPåœ°å€è®¾ä¸º255.255.255.255ã€‚ ï¼ˆ3ï¼‰æœ€åŽçš„&quot;UDPæ ‡å¤´&quot;ï¼Œè®¾ç½®å‘å‡ºæ–¹çš„ç«¯å£å’ŒæŽ¥æ”¶æ–¹çš„ç«¯å£ã€‚è¿™ä¸€éƒ¨åˆ†æ˜¯DHCPåè®®è§„å®šå¥½çš„ï¼Œå‘å‡ºæ–¹æ˜¯68ç«¯å£ï¼ŒæŽ¥æ”¶æ–¹æ˜¯67ç«¯å£ã€‚ è¿™ä¸ªæ•°æ®åŒ…æž„é€ å®ŒæˆåŽï¼Œå°±å¯ä»¥å‘å‡ºäº†ã€‚ä»¥å¤ªç½‘æ˜¯å¹¿æ’­å‘é€ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„æ¯å°è®¡ç®—æœºéƒ½æ”¶åˆ°äº†è¿™ä¸ªåŒ…ã€‚ å› ä¸ºæŽ¥æ”¶æ–¹çš„MACåœ°å€æ˜¯FF-FF-FF-FF-FF-FFï¼Œçœ‹ä¸å‡ºæ˜¯å‘ç»™è°çš„ï¼Œæ‰€ä»¥æ¯å°æ”¶åˆ°è¿™ä¸ªåŒ…çš„è®¡ç®—æœºï¼Œè¿˜å¿…é¡»åˆ†æžè¿™ä¸ªåŒ…çš„IPåœ°å€ï¼Œæ‰èƒ½ç¡®å®šæ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„ã€‚ å½“çœ‹åˆ°å‘å‡ºæ–¹IPåœ°å€æ˜¯0.0.0.0ï¼ŒæŽ¥æ”¶æ–¹æ˜¯255.255.255.255ï¼ŒäºŽæ˜¯DHCPæœåŠ¡å™¨çŸ¥é“&quot;è¿™ä¸ªåŒ…æ˜¯å‘ç»™æˆ‘çš„&quot;ï¼Œè€Œå…¶ä»–è®¡ç®—æœºå°±å¯ä»¥ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æŽ¥ä¸‹æ¥ï¼ŒDHCPæœåŠ¡å™¨è¯»å‡ºè¿™ä¸ªåŒ…çš„æ•°æ®å†…å®¹ï¼Œåˆ†é…å¥½IPåœ°å€ï¼Œå‘é€å›žåŽ»ä¸€ä¸ª&quot;DHCPå“åº”&quot;æ•°æ®åŒ…ã€‚ è¿™ä¸ªå“åº”åŒ…çš„ç»“æž„ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä»¥å¤ªç½‘æ ‡å¤´çš„MACåœ°å€æ˜¯åŒæ–¹çš„ç½‘å¡åœ°å€ï¼ŒIPæ ‡å¤´çš„IPåœ°å€æ˜¯DHCPæœåŠ¡å™¨çš„IPåœ°å€ï¼ˆå‘å‡ºæ–¹ï¼‰å’Œ255.255.255.255ï¼ˆæŽ¥æ”¶æ–¹ï¼‰ï¼ŒUDPæ ‡å¤´çš„ç«¯å£æ˜¯67ï¼ˆå‘å‡ºæ–¹ï¼‰å’Œ68ï¼ˆæŽ¥æ”¶æ–¹ï¼‰ï¼Œåˆ†é…ç»™è¯·æ±‚ç«¯çš„IPåœ°å€å’Œæœ¬ç½‘ç»œçš„å…·ä½“å‚æ•°åˆ™åŒ…å«åœ¨Dataéƒ¨åˆ†ã€‚ æ–°åŠ å…¥çš„è®¡ç®—æœºæ”¶åˆ°è¿™ä¸ªå“åº”åŒ…ï¼ŒäºŽæ˜¯å°±çŸ¥é“äº†è‡ªå·±çš„IPåœ°å€ã€å­ç½‘æŽ©ç ã€ç½‘å…³åœ°å€ã€DNSæœåŠ¡å™¨ç­‰ç­‰å‚æ•°ã€‚ åŠ¨æ€æ‹¿åˆ°æœ€æ ¸å¿ƒçš„å››ä¸ªå‚æ•°ï¼šè‡ªå·±çš„IPåœ°å€ã€å­ç½‘æŽ©ç ã€ç½‘å…³åœ°å€ã€DNSæœåŠ¡å™¨ï¼Œå°±å¯ä»¥è”ç½‘äº†ã€‚ 3.è®¿é—®googleçš„è¿‡ç¨‹ æˆ‘ä»¬å‡å®šï¼Œç»è¿‡ä¸Šä¸€èŠ‚çš„æ­¥éª¤ï¼Œç”¨æˆ·è®¾ç½®å¥½äº†è‡ªå·±çš„ç½‘ç»œå‚æ•°ï¼š æœ¬æœºçš„IPåœ°å€ï¼š192.168.1.100 å­ç½‘æŽ©ç ï¼š255.255.255.0 ç½‘å…³çš„IPåœ°å€ï¼š192.168.1.1 DNSçš„IPåœ°å€ï¼š8.8.8.8 ç„¶åŽä»–æ‰“å¼€æµè§ˆå™¨ï¼Œæƒ³è¦è®¿é—®Googleï¼Œåœ¨åœ°å€æ è¾“å…¥äº†ç½‘å€ï¼šwww.google.comã€‚ è¿™æ„å‘³ç€ï¼Œæµè§ˆå™¨è¦å‘Googleå‘é€ä¸€ä¸ªç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…ã€‚ 3.1 DNSåè®® æˆ‘ä»¬çŸ¥é“ï¼Œå‘é€æ•°æ®åŒ…ï¼Œå¿…é¡»è¦çŸ¥é“å¯¹æ–¹çš„IPåœ°å€ã€‚ä½†æ˜¯ï¼ŒçŽ°åœ¨ï¼Œæˆ‘ä»¬åªçŸ¥é“ç½‘å€www.google.comï¼Œä¸çŸ¥é“å®ƒçš„IPåœ°å€ã€‚ DNSåè®®å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œå°†è¿™ä¸ªç½‘å€è½¬æ¢æˆIPåœ°å€ã€‚å·²çŸ¥DNSæœåŠ¡å™¨ä¸º8.8.8.8ï¼ŒäºŽæ˜¯æˆ‘ä»¬å‘è¿™ä¸ªåœ°å€å‘é€ä¸€ä¸ªDNSæ•°æ®åŒ…ï¼ˆ53ç«¯å£ï¼‰ã€‚ ç„¶åŽï¼ŒDNSæœåŠ¡å™¨åšå‡ºå“åº”ï¼Œå‘Šè¯‰æˆ‘ä»¬Googleçš„IPåœ°å€æ˜¯172.194.72.105ã€‚äºŽæ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¯¹æ–¹çš„IPåœ°å€ã€‚ 3.2 å­ç½‘æŽ©ç  æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ï¼Œè¿™ä¸ªIPåœ°å€æ˜¯ä¸æ˜¯åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œè¿™å°±è¦ç”¨åˆ°å­ç½‘æŽ©ç ã€‚ å·²çŸ¥å­ç½‘æŽ©ç æ˜¯255.255.255.0ï¼Œæœ¬æœºç”¨å®ƒå¯¹è‡ªå·±çš„IPåœ°å€192.168.1.100ï¼Œåšä¸€ä¸ªäºŒè¿›åˆ¶çš„ANDè¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º1ï¼Œç»“æžœä¸º1ï¼Œå¦åˆ™ä¸º0ï¼‰ï¼Œè®¡ç®—ç»“æžœä¸º192.168.1.0ï¼›ç„¶åŽå¯¹Googleçš„IPåœ°å€172.194.72.105ä¹Ÿåšä¸€ä¸ªANDè¿ç®—ï¼Œè®¡ç®—ç»“æžœä¸º172.194.72.0ã€‚è¿™ä¸¤ä¸ªç»“æžœä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ç»“è®ºæ˜¯ï¼ŒGoogleä¸Žæœ¬æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è¦å‘Googleå‘é€æ•°æ®åŒ…ï¼Œå¿…é¡»é€šè¿‡ç½‘å…³192.168.1.1è½¬å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŽ¥æ”¶æ–¹çš„MACåœ°å€å°†æ˜¯ç½‘å…³çš„MACåœ°å€ã€‚ 3.3 åº”ç”¨å±‚åè®® æµè§ˆç½‘é¡µç”¨çš„æ˜¯HTTPåè®®ï¼Œå®ƒçš„æ•´ä¸ªæ•°æ®åŒ…æž„é€ æ˜¯è¿™æ ·çš„ï¼š HTTPéƒ¨åˆ†çš„å†…å®¹ï¼Œç±»ä¼¼äºŽä¸‹é¢è¿™æ ·ï¼š 123456789 GET / HTTP/1.1 Host: www.google.com Connection: keep-alive User-Agent: Mozilla/5.0 (Windows NT 6.1) ...... Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Encoding: gzip,deflate,sdch Accept-Language: zh-CN,zh;q=0.8 Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3 Cookie: ... ... æˆ‘ä»¬å‡å®šè¿™ä¸ªéƒ¨åˆ†çš„é•¿åº¦ä¸º4960å­—èŠ‚ï¼Œå®ƒä¼šè¢«åµŒåœ¨TCPæ•°æ®åŒ…ä¹‹ä¸­ã€‚ 3.4 TCPåè®® TCPæ•°æ®åŒ…éœ€è¦è®¾ç½®ç«¯å£ï¼ŒæŽ¥æ”¶æ–¹ï¼ˆGoogleï¼‰çš„HTTPç«¯å£é»˜è®¤æ˜¯80ï¼Œå‘é€æ–¹ï¼ˆæœ¬æœºï¼‰çš„ç«¯å£æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„1024-65535ä¹‹é—´çš„æ•´æ•°ï¼Œå‡å®šä¸º51775ã€‚ TCPæ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º20å­—èŠ‚ï¼ŒåŠ ä¸ŠåµŒå…¥HTTPçš„æ•°æ®åŒ…ï¼Œæ€»é•¿åº¦å˜ä¸º4980å­—èŠ‚ã€‚ 3.5 IPåè®® ç„¶åŽï¼ŒTCPæ•°æ®åŒ…å†åµŒå…¥IPæ•°æ®åŒ…ã€‚IPæ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„IPåœ°å€ï¼Œè¿™æ˜¯å·²çŸ¥çš„ï¼Œå‘é€æ–¹æ˜¯192.168.1.100ï¼ˆæœ¬æœºï¼‰ï¼ŒæŽ¥æ”¶æ–¹æ˜¯172.194.72.105ï¼ˆGoogleï¼‰ã€‚ IPæ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º20å­—èŠ‚ï¼ŒåŠ ä¸ŠåµŒå…¥çš„TCPæ•°æ®åŒ…ï¼Œæ€»é•¿åº¦å˜ä¸º5000å­—èŠ‚ã€‚ 3.6 ä»¥å¤ªç½‘åè®® æœ€åŽï¼ŒIPæ•°æ®åŒ…åµŒå…¥ä»¥å¤ªç½‘æ•°æ®åŒ…ã€‚ä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„MACåœ°å€ï¼Œå‘é€æ–¹ä¸ºæœ¬æœºçš„ç½‘å¡MACåœ°å€ï¼ŒæŽ¥æ”¶æ–¹ä¸ºç½‘å…³192.168.1.1çš„MACåœ°å€ï¼ˆé€šè¿‡ARPåè®®å¾—åˆ°ï¼‰ã€‚ ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†ï¼Œæœ€å¤§é•¿åº¦ä¸º1500å­—èŠ‚ï¼Œè€ŒçŽ°åœ¨çš„IPæ•°æ®åŒ…é•¿åº¦ä¸º5000å­—èŠ‚ã€‚å› æ­¤ï¼ŒIPæ•°æ®åŒ…å¿…é¡»åˆ†å‰²æˆå››ä¸ªåŒ…ã€‚å› ä¸ºæ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„IPæ ‡å¤´ï¼ˆ20å­—èŠ‚ï¼‰ï¼Œæ‰€ä»¥å››ä¸ªåŒ…çš„IPæ•°æ®åŒ…çš„é•¿åº¦åˆ†åˆ«ä¸º1500ã€1500ã€1500ã€560ã€‚ 3.7 æœåŠ¡å™¨å“åº” ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘ï¼ŒGoogleçš„æœåŠ¡å™¨172.194.72.105ï¼Œæ”¶åˆ°äº†è¿™å››ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ã€‚ æ ¹æ®IPæ ‡å¤´çš„åºå·ï¼ŒGoogleå°†å››ä¸ªåŒ…æ‹¼èµ·æ¥ï¼Œå–å‡ºå®Œæ•´çš„TCPæ•°æ®åŒ…ï¼Œç„¶åŽè¯»å‡ºé‡Œé¢çš„&quot;HTTPè¯·æ±‚&quot;ï¼ŒæŽ¥ç€åšå‡º&quot;HTTPå“åº”&quot;ï¼Œå†ç”¨TCPåè®®å‘å›žæ¥ã€‚ æœ¬æœºæ”¶åˆ°HTTPå“åº”ä»¥åŽï¼Œå°±å¯ä»¥å°†ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥ï¼Œå®Œæˆä¸€æ¬¡ç½‘ç»œé€šä¿¡ã€‚ æ•´ç†è‡ªï¼šhttp://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»Žä¸‹åˆ°ä¸Šçœ‹äº”å±‚æ¨¡åž‹]]></title>
    <url>%2F2019%2F01%2F17%2Fnetwork%2F1.%E4%BB%8E%E4%B8%8B%E5%88%B0%E4%B8%8A%E7%9C%8B%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚è¦æƒ³äº†è§£HTTPåè®®ï¼Œå¿…ç„¶è¦ä»Žæœ€åŸºæœ¬çš„è®¡ç®—æœºç½‘ç»œçŸ¥è¯†å¼€å§‹å…¥æ‰‹ã€‚æœ¬ç¯‡æ–‡ç« ä»Žä¸‹åˆ°ä¸Šå…·ä½“ä»‹ç»äº”å±‚ç»å…¸æ¨¡åž‹ï¼Œæžé€Ÿå…¥é—¨è®¡ç®—æœºç½‘ç»œã€‚ ç»å…¸äº”å±‚æ¨¡åž‹ ä¸‹é¢æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å„å±‚åšçš„äº‹æƒ…ï¼ 1.ç‰©ç†å±‚ ç”µè„‘è¦ç»„ç½‘ï¼Œç¬¬ä¸€ä»¶äº‹è¦å¹²ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯å…ˆæŠŠç”µè„‘è¿žèµ·æ¥ï¼Œå¯ä»¥ç”¨å…‰ç¼†ã€ç”µç¼†ã€åŒç»žçº¿ã€æ— çº¿ç”µæ³¢ç­‰æ–¹å¼ã€‚ è¿™å°±å«åš&quot;ç‰©ç†å±‚&quot;ï¼Œå®ƒå°±æ˜¯æŠŠç”µè„‘è¿žæŽ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µã€‚å®ƒä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§ï¼Œä½œç”¨æ˜¯è´Ÿè´£ä¼ é€0å’Œ1çš„ç”µä¿¡å·ã€‚ 2.æ•°æ®é“¾è·¯å±‚ å•çº¯çš„0å’Œ1æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå¿…é¡»è§„å®šè§£è¯»æ–¹å¼ï¼šå¤šå°‘ä¸ªç”µä¿¡å·ç®—ä¸€ç»„ï¼Ÿæ¯ä¸ªä¿¡å·ä½æœ‰ä½•æ„ä¹‰ï¼Ÿ è¿™å°±æ˜¯&quot;é“¾æŽ¥å±‚&quot;çš„åŠŸèƒ½ï¼Œå®ƒåœ¨&quot;å®žä½“å±‚&quot;çš„ä¸Šæ–¹ï¼Œç¡®å®šäº†0å’Œ1çš„åˆ†ç»„æ–¹å¼ã€‚ 2.1 ä»¥å¤ªç½‘åè®® æ—©æœŸçš„æ—¶å€™ï¼Œæ¯å®¶å…¬å¸éƒ½æœ‰è‡ªå·±çš„ç”µä¿¡å·åˆ†ç»„æ–¹å¼ã€‚é€æ¸åœ°ï¼Œä¸€ç§å«åš&quot;ä»¥å¤ªç½‘&quot;ï¼ˆEthernetï¼‰çš„åè®®ï¼Œå æ®äº†ä¸»å¯¼åœ°ä½ã€‚ ä»¥å¤ªç½‘è§„å®šï¼Œä¸€ç»„ç”µä¿¡å·æž„æˆä¸€ä¸ªæ•°æ®åŒ…ï¼Œå«åš&quot;å¸§&quot;ï¼ˆFrameï¼‰ã€‚æ¯ä¸€å¸§åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ‡å¤´ï¼ˆHeadï¼‰å’Œæ•°æ®ï¼ˆDataï¼‰ã€‚ &quot;æ ‡å¤´&quot;åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜Žé¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æŽ¥å—è€…ã€æ•°æ®ç±»åž‹ç­‰ç­‰ï¼›&quot;æ•°æ®&quot;åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚ &quot;æ ‡å¤´&quot;çš„é•¿åº¦ï¼Œå›ºå®šä¸º18å­—èŠ‚ã€‚&quot;æ•°æ®&quot;çš„é•¿åº¦ï¼Œæœ€çŸ­ä¸º46å­—èŠ‚ï¼Œæœ€é•¿ä¸º1500å­—èŠ‚ã€‚å› æ­¤ï¼Œæ•´ä¸ª&quot;å¸§&quot;æœ€çŸ­ä¸º64å­—èŠ‚ï¼Œæœ€é•¿ä¸º1518å­—èŠ‚ã€‚å¦‚æžœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚ 2.2 MACåœ°å€ ä¸Šé¢æåˆ°ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…çš„&quot;æ ‡å¤´&quot;ï¼ŒåŒ…å«äº†å‘é€è€…å’ŒæŽ¥å—è€…çš„ä¿¡æ¯ã€‚é‚£ä¹ˆï¼Œå‘é€è€…å’ŒæŽ¥å—è€…æ˜¯å¦‚ä½•æ ‡è¯†å‘¢ï¼Ÿ ä»¥å¤ªç½‘è§„å®šï¼Œè¿žå…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡ï¼Œéƒ½å¿…é¡»å…·æœ‰&quot;ç½‘å¡&quot;æŽ¥å£ã€‚æ•°æ®åŒ…å¿…é¡»æ˜¯ä»Žä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡ã€‚ç½‘å¡çš„åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’ŒæŽ¥æ”¶åœ°å€ï¼Œè¿™å«åšMACåœ°å€ã€‚ æ¯å—ç½‘å¡å‡ºåŽ‚çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå…¨ä¸–ç•Œç‹¬ä¸€æ— äºŒçš„MACåœ°å€ï¼Œé•¿åº¦æ˜¯48ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨12ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤ºã€‚ å‰6ä¸ªåå…­è¿›åˆ¶æ•°æ˜¯åŽ‚å•†ç¼–å·ï¼ŒåŽ6ä¸ªæ˜¯è¯¥åŽ‚å•†çš„ç½‘å¡æµæ°´å·ã€‚æœ‰äº†MACåœ°å€ï¼Œå°±å¯ä»¥å®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„äº†ã€‚ 2.3 å¹¿æ’­ å®šä¹‰åœ°å€åªæ˜¯ç¬¬ä¸€æ­¥ï¼ŒåŽé¢è¿˜æœ‰æ›´å¤šçš„æ­¥éª¤ã€‚ é¦–å…ˆï¼Œä¸€å—ç½‘å¡æ€Žä¹ˆä¼šçŸ¥é“å¦ä¸€å—ç½‘å¡çš„MACåœ°å€ï¼Ÿ å›žç­”æ˜¯æœ‰ä¸€ç§ARPåè®®ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸‹é¢ä»‹ç»ARPã€‚ å…¶æ¬¡ï¼Œå°±ç®—æœ‰äº†MACåœ°å€ï¼Œç³»ç»Ÿæ€Žæ ·æ‰èƒ½æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æŽ¥æ”¶æ–¹ï¼Ÿ å›žç­”æ˜¯ä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆ&quot;åŽŸå§‹&quot;çš„æ–¹å¼ï¼Œå®ƒä¸æ˜¯æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æŽ¥æ”¶æ–¹ï¼Œè€Œæ˜¯å‘æœ¬ç½‘ç»œå†…æ‰€æœ‰è®¡ç®—æœºå‘é€ï¼Œè®©æ¯å°è®¡ç®—æœºè‡ªå·±åˆ¤æ–­ï¼Œæ˜¯å¦ä¸ºæŽ¥æ”¶æ–¹ã€‚ ä¸Šå›¾ä¸­ï¼Œ1å·è®¡ç®—æœºå‘2å·è®¡ç®—æœºå‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„3å·ã€4å·ã€5å·è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªåŒ…ã€‚å®ƒä»¬è¯»å–è¿™ä¸ªåŒ…çš„&quot;æ ‡å¤´&quot;ï¼Œæ‰¾åˆ°æŽ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œç„¶åŽä¸Žè‡ªèº«çš„MACåœ°å€ç›¸æ¯”è¾ƒï¼Œå¦‚æžœä¸¤è€…ç›¸åŒï¼Œå°±æŽ¥å—è¿™ä¸ªåŒ…ï¼Œåšè¿›ä¸€æ­¥å¤„ç†ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚è¿™ç§å‘é€æ–¹å¼å°±å«åš&quot;å¹¿æ’­&quot;ï¼ˆbroadcastingï¼‰ã€‚ æœ‰äº†æ•°æ®åŒ…çš„å®šä¹‰ã€ç½‘å¡çš„MACåœ°å€ã€å¹¿æ’­çš„å‘é€æ–¹å¼ï¼Œ&quot;é“¾æŽ¥å±‚&quot;å°±å¯ä»¥åœ¨å¤šå°è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®äº†ã€‚ 3.ç½‘ç»œå±‚ ä»¥å¤ªç½‘åè®®ï¼Œä¾é MACåœ°å€å‘é€æ•°æ®ã€‚ç†è®ºä¸Šï¼Œå•å•ä¾é MACåœ°å€ï¼Œä¸Šæµ·çš„ç½‘å¡å°±å¯ä»¥æ‰¾åˆ°æ´›æ‰çŸ¶çš„ç½‘å¡äº†ï¼ŒæŠ€æœ¯ä¸Šæ˜¯å¯ä»¥å®žçŽ°çš„ã€‚ ä½†æ˜¯ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªé‡å¤§çš„ç¼ºç‚¹ã€‚ä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…ï¼Œæ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€&quot;åŒ…&quot;ï¼Œä¸ä»…æ•ˆçŽ‡ä½Žï¼Œè€Œä¸”å±€é™åœ¨å‘é€è€…æ‰€åœ¨çš„å­ç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¹¿æ’­æ˜¯ä¼ ä¸è¿‡åŽ»çš„ã€‚è¿™ç§è®¾è®¡æ˜¯åˆç†çš„ï¼Œå¦åˆ™äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…ï¼Œé‚£ä¼šå¼•èµ·ç¾éš¾ã€‚ äº’è”ç½‘æ˜¯æ— æ•°å­ç½‘ç»œå…±åŒç»„æˆçš„ä¸€ä¸ªå·¨åž‹ç½‘ç»œï¼Œå¾ˆåƒæƒ³è±¡ä¸Šæµ·å’Œæ´›æ‰çŸ¶çš„ç”µè„‘ä¼šåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œè¿™å‡ ä¹Žæ˜¯ä¸å¯èƒ½çš„ã€‚ å› æ­¤ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤ŸåŒºåˆ†å“ªäº›MACåœ°å€å±žäºŽåŒä¸€ä¸ªå­ç½‘ç»œï¼Œå“ªäº›ä¸æ˜¯ã€‚å¦‚æžœæ˜¯åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€ï¼Œå¦åˆ™å°±é‡‡ç”¨&quot;è·¯ç”±&quot;æ–¹å¼å‘é€ã€‚ï¼ˆ&quot;è·¯ç”±&quot;çš„æ„æ€ï¼Œå°±æ˜¯æŒ‡å¦‚ä½•å‘ä¸åŒçš„å­ç½‘ç»œåˆ†å‘æ•°æ®åŒ…ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œæœ¬æ–‡ä¸æ¶‰åŠã€‚ï¼‰é—æ†¾çš„æ˜¯ï¼ŒMACåœ°å€æœ¬èº«æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒåªä¸ŽåŽ‚å•†æœ‰å…³ï¼Œä¸Žæ‰€å¤„ç½‘ç»œæ— å…³ã€‚ è¿™å°±å¯¼è‡´äº†&quot;ç½‘ç»œå±‚&quot;çš„è¯žç”Ÿã€‚å®ƒçš„ä½œç”¨æ˜¯å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±žäºŽåŒä¸€ä¸ªå­ç½‘ç»œã€‚è¿™å¥—åœ°å€å°±å«åš&quot;ç½‘ç»œåœ°å€&quot;ï¼Œç®€ç§°&quot;ç½‘å€&quot;ã€‚ äºŽæ˜¯ï¼Œ&quot;ç½‘ç»œå±‚&quot;å‡ºçŽ°ä»¥åŽï¼Œæ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€ï¼Œä¸€ç§æ˜¯MACåœ°å€ï¼Œå¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€ã€‚ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ï¼ŒMACåœ°å€æ˜¯ç»‘å®šåœ¨ç½‘å¡ä¸Šçš„ï¼Œç½‘ç»œåœ°å€åˆ™æ˜¯ç®¡ç†å‘˜åˆ†é…çš„ï¼Œå®ƒä»¬åªæ˜¯éšæœºç»„åˆåœ¨ä¸€èµ·ã€‚ ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œï¼ŒMACåœ°å€åˆ™å°†æ•°æ®åŒ…é€åˆ°è¯¥å­ç½‘ç»œä¸­çš„ç›®æ ‡ç½‘å¡ã€‚å› æ­¤ï¼Œä»Žé€»è¾‘ä¸Šå¯ä»¥æŽ¨æ–­ï¼Œå¿…å®šæ˜¯å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œç„¶åŽå†å¤„ç†MACåœ°å€ã€‚ 3.1 IPåè®® è§„å®šç½‘ç»œåœ°å€çš„åè®®ï¼Œå«åšIPåè®®ã€‚å®ƒæ‰€å®šä¹‰çš„åœ°å€ï¼Œå°±è¢«ç§°ä¸ºIPåœ°å€ã€‚ ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨çš„æ˜¯IPåè®®ç¬¬å››ç‰ˆï¼Œç®€ç§°IPv4ã€‚è¿™ä¸ªç‰ˆæœ¬è§„å®šï¼Œç½‘ç»œåœ°å€ç”±32ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆã€‚ ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬ç”¨åˆ†æˆå››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤ºIPåœ°å€ï¼Œä»Ž0.0.0.0ä¸€ç›´åˆ°255.255.255.255ã€‚ äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºï¼Œéƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ªIPåœ°å€ã€‚è¿™ä¸ªåœ°å€åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œï¼ŒåŽä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœºã€‚æ¯”å¦‚ï¼ŒIPåœ°å€172.16.254.1ï¼Œè¿™æ˜¯ä¸€ä¸ª32ä½çš„åœ°å€ï¼Œå‡å®šå®ƒçš„ç½‘ç»œéƒ¨åˆ†æ˜¯å‰24ä½ï¼ˆ172.16.254ï¼‰ï¼Œé‚£ä¹ˆä¸»æœºéƒ¨åˆ†å°±æ˜¯åŽ8ä½ï¼ˆæœ€åŽçš„é‚£ä¸ª1ï¼‰ã€‚å¤„äºŽåŒä¸€ä¸ªå­ç½‘ç»œçš„ç”µè„‘ï¼Œå®ƒä»¬IPåœ°å€çš„ç½‘ç»œéƒ¨åˆ†å¿…å®šæ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´172.16.254.2åº”è¯¥ä¸Ž172.16.254.1å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ ä½†æ˜¯ï¼Œé—®é¢˜åœ¨äºŽå•å•ä»ŽIPåœ°å€ï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­ç½‘ç»œéƒ¨åˆ†ã€‚è¿˜æ˜¯ä»¥172.16.254.1ä¸ºä¾‹ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†ï¼Œåˆ°åº•æ˜¯å‰24ä½ï¼Œè¿˜æ˜¯å‰16ä½ï¼Œç”šè‡³å‰28ä½ï¼Œä»ŽIPåœ°å€ä¸Šæ˜¯çœ‹ä¸å‡ºæ¥çš„ã€‚ é‚£ä¹ˆï¼Œæ€Žæ ·æ‰èƒ½ä»ŽIPåœ°å€ï¼Œåˆ¤æ–­ä¸¤å°è®¡ç®—æœºæ˜¯å¦å±žäºŽåŒä¸€ä¸ªå­ç½‘ç»œå‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°å¦ä¸€ä¸ªå‚æ•°&quot;å­ç½‘æŽ©ç &quot;ï¼ˆsubnet maskï¼‰ã€‚ æ‰€è°“&quot;å­ç½‘æŽ©ç &quot;ï¼Œå°±æ˜¯è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°ã€‚å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäºŽIPåœ°å€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª32ä½äºŒè¿›åˆ¶æ•°å­—ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†å…¨éƒ¨ä¸º1ï¼Œä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º0ã€‚æ¯”å¦‚ï¼ŒIPåœ°å€172.16.254.1ï¼Œå¦‚æžœå·²çŸ¥ç½‘ç»œéƒ¨åˆ†æ˜¯å‰24ä½ï¼Œä¸»æœºéƒ¨åˆ†æ˜¯åŽ8ä½ï¼Œé‚£ä¹ˆå­ç½‘ç»œæŽ©ç å°±æ˜¯11111111.11111111.11111111.00000000ï¼Œå†™æˆåè¿›åˆ¶å°±æ˜¯255.255.255.0ã€‚ çŸ¥é“&quot;å­ç½‘æŽ©ç &quot;ï¼Œæˆ‘ä»¬å°±èƒ½åˆ¤æ–­ï¼Œä»»æ„ä¸¤ä¸ªIPåœ°å€æ˜¯å¦å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚æ–¹æ³•æ˜¯å°†ä¸¤ä¸ªIPåœ°å€ä¸Žå­ç½‘æŽ©ç åˆ†åˆ«è¿›è¡ŒANDè¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º1ï¼Œè¿ç®—ç»“æžœä¸º1ï¼Œå¦åˆ™ä¸º0ï¼‰ï¼Œç„¶åŽæ¯”è¾ƒç»“æžœæ˜¯å¦ç›¸åŒï¼Œå¦‚æžœæ˜¯çš„è¯ï¼Œå°±è¡¨æ˜Žå®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œå¦åˆ™å°±ä¸æ˜¯ã€‚ æ¯”å¦‚ï¼Œå·²çŸ¥IPåœ°å€172.16.254.1å’Œ172.16.254.233çš„å­ç½‘æŽ©ç éƒ½æ˜¯255.255.255.0ï¼Œè¯·é—®å®ƒä»¬æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Ÿä¸¤è€…ä¸Žå­ç½‘æŽ©ç åˆ†åˆ«è¿›è¡ŒANDè¿ç®—ï¼Œç»“æžœéƒ½æ˜¯172.16.254.0ï¼Œå› æ­¤å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ æ€»ç»“ä¸€ä¸‹ï¼ŒIPåè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é…IPåœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯ç¡®å®šå“ªäº›åœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ 3.2 IPæ•°æ®åŒ… æ ¹æ®IPåè®®å‘é€çš„æ•°æ®ï¼Œå°±å«åšIPæ•°æ®åŒ…ã€‚ä¸éš¾æƒ³è±¡ï¼Œå…¶ä¸­å¿…å®šåŒ…æ‹¬IPåœ°å€ä¿¡æ¯ã€‚ ä½†æ˜¯å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…åªåŒ…å«MACåœ°å€ï¼Œå¹¶æ²¡æœ‰IPåœ°å€çš„æ ä½ã€‚é‚£ä¹ˆæ˜¯å¦éœ€è¦ä¿®æ”¹æ•°æ®å®šä¹‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ ä½å‘¢ï¼Ÿ å›žç­”æ˜¯ä¸éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠIPæ•°æ®åŒ…ç›´æŽ¥æ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…çš„&quot;æ•°æ®&quot;éƒ¨åˆ†ï¼Œå› æ­¤å®Œå…¨ä¸ç”¨ä¿®æ”¹ä»¥å¤ªç½‘çš„è§„æ ¼ã€‚è¿™å°±æ˜¯äº’è”ç½‘åˆ†å±‚ç»“æž„çš„å¥½å¤„ï¼šä¸Šå±‚çš„å˜åŠ¨å®Œå…¨ä¸æ¶‰åŠä¸‹å±‚çš„ç»“æž„ã€‚ å…·ä½“æ¥è¯´ï¼ŒIPæ•°æ®åŒ…ä¹Ÿåˆ†ä¸º&quot;æ ‡å¤´&quot;å’Œ&quot;æ•°æ®&quot;ä¸¤ä¸ªéƒ¨åˆ†ã€‚&quot;æ ‡å¤´&quot;éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬ã€é•¿åº¦ã€IPåœ°å€ç­‰ä¿¡æ¯ï¼Œ&quot;æ•°æ®&quot;éƒ¨åˆ†åˆ™æ˜¯IPæ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚å®ƒæ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…åŽï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ã€‚ IPæ•°æ®åŒ…çš„&quot;æ ‡å¤´&quot;éƒ¨åˆ†çš„é•¿åº¦ä¸º20ä¸ªå­—èŠ‚ï¼Œæ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º65,535å­—èŠ‚ã€‚å› æ­¤ï¼Œç†è®ºä¸Šï¼Œä¸€ä¸ªIPæ•°æ®åŒ…çš„&quot;æ•°æ®&quot;éƒ¨åˆ†ï¼Œæœ€é•¿ä¸º65,515å­—èŠ‚ã€‚å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…çš„&quot;æ•°æ®&quot;éƒ¨åˆ†ï¼Œæœ€é•¿åªæœ‰1500å­—èŠ‚ã€‚å› æ­¤ï¼Œå¦‚æžœIPæ•°æ®åŒ…è¶…è¿‡äº†1500å­—èŠ‚ï¼Œå®ƒå°±éœ€è¦åˆ†å‰²æˆå‡ ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ï¼Œåˆ†å¼€å‘é€äº†ã€‚ 3.3 ARPåè®® å…³äºŽ&quot;ç½‘ç»œå±‚&quot;ï¼Œè¿˜æœ‰æœ€åŽä¸€ç‚¹éœ€è¦è¯´æ˜Žã€‚ å› ä¸ºIPæ•°æ®åŒ…æ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…é‡Œå‘é€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åŒæ—¶çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼Œä¸€ä¸ªæ˜¯å¯¹æ–¹çš„MACåœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„IPåœ°å€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹æ–¹çš„IPåœ°å€æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„MACåœ°å€ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä»ŽIPåœ°å€å¾—åˆ°MACåœ°å€ã€‚ è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æžœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆäº‹å®žä¸Šæ²¡æœ‰åŠžæ³•å¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿žæŽ¥å¤„çš„&quot;ç½‘å…³&quot;ï¼ˆgatewayï¼‰ï¼Œè®©ç½‘å…³åŽ»å¤„ç†ã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æžœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ARPåè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ã€‚ARPåè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„IPåœ°å€ï¼Œåœ¨å¯¹æ–¹çš„MACåœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯FF:FF:FF:FF:FF:FFï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª&quot;å¹¿æ’­&quot;åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»Žä¸­å–å‡ºIPåœ°å€ï¼Œä¸Žè‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æžœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›žå¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æ€»ä¹‹ï¼Œæœ‰äº†ARPåè®®ä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœºMACåœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šäº†ã€‚ 4. ä¼ è¾“å±‚ æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚ æŽ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œæ¯”å¦‚ï¼Œä½ ä¸€è¾¹æµè§ˆç½‘é¡µï¼Œä¸€è¾¹ä¸Žæœ‹å‹åœ¨çº¿èŠå¤©ã€‚å½“ä¸€ä¸ªæ•°æ®åŒ…ä»Žäº’è”ç½‘ä¸Šå‘æ¥çš„æ—¶å€™ï¼Œä½ æ€Žä¹ˆçŸ¥é“ï¼Œå®ƒæ˜¯è¡¨ç¤ºç½‘é¡µçš„å†…å®¹ï¼Œè¿˜æ˜¯è¡¨ç¤ºåœ¨çº¿èŠå¤©çš„å†…å®¹ï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åš&quot;ç«¯å£&quot;ï¼ˆportï¼‰ï¼Œå®ƒå…¶å®žæ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚ &quot;ç«¯å£&quot;æ˜¯0åˆ°65535ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œæ­£å¥½16ä¸ªäºŒè¿›åˆ¶ä½ã€‚0åˆ°1023çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äºŽ1023çš„ç«¯å£ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åŽä¸ŽæœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚ &quot;ä¼ è¾“å±‚&quot;çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹&quot;ç«¯å£åˆ°ç«¯å£&quot;çš„é€šä¿¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€œç½‘ç»œå±‚&quot;çš„åŠŸèƒ½æ˜¯å»ºç«‹&quot;ä¸»æœºåˆ°ä¸»æœº&quot;çš„é€šä¿¡ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œæˆ‘ä»¬å°±èƒ½å®žçŽ°ç¨‹åºä¹‹é—´çš„äº¤æµã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠä¸»æœº+ç«¯å£ï¼Œå«åš&quot;å¥—æŽ¥å­—â€ï¼ˆsocketï¼‰ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚ 4.1 UDPåè®® çŽ°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®žçŽ°å«åšUDPåè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹Žå°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚ UDPæ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±&quot;æ ‡å¤´&quot;å’Œ&quot;æ•°æ®&quot;ä¸¤éƒ¨åˆ†ç»„æˆã€‚ &quot;æ ‡å¤´&quot;éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’ŒæŽ¥æ”¶ç«¯å£ï¼Œ&quot;æ•°æ®&quot;éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åŽï¼ŒæŠŠæ•´ä¸ªUDPæ•°æ®åŒ…æ”¾å…¥IPæ•°æ®åŒ…çš„&quot;æ•°æ®&quot;éƒ¨åˆ†ï¼Œè€Œå‰é¢è¯´è¿‡ï¼ŒIPæ•°æ®åŒ…åˆæ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¹‹ä¸­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…çŽ°åœ¨å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š UDPæ•°æ®åŒ…éžå¸¸ç®€å•ï¼Œ&quot;æ ‡å¤´&quot;éƒ¨åˆ†ä¸€å…±åªæœ‰8ä¸ªå­—èŠ‚ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡65,535å­—èŠ‚ï¼Œæ­£å¥½æ”¾è¿›ä¸€ä¸ªIPæ•°æ®åŒ…ã€‚ 4.2 TCPåè®® UDPåè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®žçŽ°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCPåè®®å°±è¯žç”Ÿäº†ã€‚è¿™ä¸ªåè®®éžå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„UDPåè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æžœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚ å› æ­¤ï¼ŒTCPåè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®žçŽ°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚ TCPæ•°æ®åŒ…å’ŒUDPæ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨IPæ•°æ®åŒ…çš„&quot;æ•°æ®&quot;éƒ¨åˆ†ã€‚TCPæ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆçŽ‡ï¼Œé€šå¸¸TCPæ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡IPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ªTCPæ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚ å…³äºŽTCPç»†èŠ‚ä»¥åŽå†æŽ¢è®¨ã€‚ 5. åº”ç”¨å±‚ åº”ç”¨ç¨‹åºæ”¶åˆ°&quot;ä¼ è¾“å±‚&quot;çš„æ•°æ®ï¼ŒæŽ¥ä¸‹æ¥å°±è¦è¿›è¡Œè§£è¯»ã€‚ç”±äºŽäº’è”ç½‘æ˜¯å¼€æ”¾æž¶æž„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½æ ¼å¼ï¼Œå¦åˆ™æ ¹æœ¬æ— æ³•è§£è¯»ã€‚ &quot;åº”ç”¨å±‚&quot;çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒTCPåè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚Emailã€WWWã€FTPç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTPæ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æž„æˆäº†&quot;åº”ç”¨å±‚&quot;ã€‚ è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æŽ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨TCPæ•°æ®åŒ…çš„&quot;æ•°æ®&quot;éƒ¨åˆ†ã€‚å› æ­¤ï¼ŒçŽ°åœ¨çš„ä»¥å¤ªç½‘çš„æ•°æ®åŒ…å°±å˜æˆä¸‹é¢è¿™æ ·ã€‚ *æ³¨ï¼šUDPå¤´ä¸º8ä¸ªå­—èŠ‚ï¼ŒTCPå¤´ä¸º20ä¸ªå­—èŠ‚ æ•´ç†äºŽï¼šhttp://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html]]></content>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œç›¸å…³</tag>
      </tags>
  </entry>
</search>
