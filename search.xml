<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ÁªÜË∞àloadClass]]></title>
    <url>%2F2019%2F02%2F05%2FJVM%2F%E7%BB%86%E8%B0%88loadClass%2F</url>
    <content type="text"><![CDATA[ÂØπ‰∫éËé∑ÂèñClassÂØπË±°ÔºåÂÖ∂ÂÆûÊàë‰ª¨‰∏çÁü•‰∏çËßâ‰∏≠Â∑≤ÁªèÊé•Ëß¶Ëøá‰∏§Áßç‰∫ÜÔºå‰∏ÄÁßçÂ∞±ÊòØloadClassÔºå‰∏ÄÁßçÂ∞±ÊòØÂèçÂ∞Ñ‰∏≠ÁöÑforNameÔºåÂÆÉ‰ª¨Âà∞Â∫ïÊúâ‰ªÄ‰πàÂå∫Âà´Âë¢ÔºüÂÖ∂ÂÆûÊ∂âÂèä‰∫ÜÁ±ªÂä†ËΩΩËøáÁ®ãÁöÑÂå∫Âà´„ÄÇ‰∏ãÈù¢Â•ΩÂ•ΩÊù•Êé¢ËÆ®‰∏Ä‰∏ã„ÄÇ ‰∏Ä„ÄÅÈóÆÈ¢òÁöÑÊèêÂá∫ ÂØπ‰∫é‰πãÂâçÁöÑ ÊµãËØï‰ª£Á†ÅÔºö 12345678public class Test &#123; public static void main(String[] args) throws ClassNotFoundException, IllegalAccessException, InstantiationException &#123; MyClassLoader myClassLoader = new MyClassLoader("C:\\Users\\swg\\Desktop\\","myClassLoader"); Class c = myClassLoader.loadClass("Robot"); System.out.println(c.getClassLoader()); c.newInstance(); &#125;&#125; ‰∏çÁü•ÈÅìÂ§ßÂÆ∂ÊúâÊ≤°ÊúâÁñëÊÉëÔºåÊàë‰ª¨ËøôÈáåÊòØÁî®‰∫ÜloadClass(name)Êù•Âä†ËΩΩÂØπÂ∫îÁöÑClassÂØπË±°ÁöÑÔºåÊúÄÂêéËøòÈúÄË¶ÅËøõË°ånewInstance()„ÄÇÈÇ£‰πà‰∏∫‰ªÄ‰πàË¶ÅË∞ÉÁî®newInstance()ÊâçË°åÂë¢Ôºü 1.1 newÁöÑÊñπÂºèÊûÑÂª∫ÂØπË±°ÂÆû‰æã ‰∏ãÈù¢Ë¶ÅËøõË°åÁõ∏Â∫îÁöÑÊµãËØï„ÄÇÂØπ‰∫éRobot.java: È¶ñÂÖàÁî®newÁöÑÊñπÂºèÔºö ÊòæÁ§∫ÁªìÊûú‰∏∫Ôºö 1hello , i am a robot! 1.2 loadClassÊù•Ëé∑ÂèñClassÂØπË±° Â¶ÇÊûú‰ªÖ‰ªÖËøôÊ†∑ÂÜôÔºåÊòæÁ§∫ÁªìÊûú‰ªÖ‰ªÖ‰∏∫Ôºö 1sun.misc.Launcher$AppClassLoader@18b4aac2 ‰πüÂ∞±ÊòØËØ¥ÔºåÂπ∂‰∏ç‰ºöËß¶ÂèëstaticÈùôÊÄÅÂùóÁöÑÊâßË°åÔºå‰πüÂ∞±ÊòØËØ¥Ëøô‰∏™Á±ªÊ†πÊú¨Â∞±Ê≤°ÊúâÂàùÂßãÂåñ„ÄÇ 1.3 forNameÊù•Ëé∑ÂèñClassÂØπË±° ÊòæÁ§∫ÁªìÊûú‰∏∫Ôºö 1hello , i am a robot! Ëß¶Âèë‰∫ÜÈùôÊÄÅÂùóÁöÑÊâßË°å„ÄÇ ‰∫å„ÄÅÁ±ªÂä†ËΩΩËøáÁ®ã Ë¶ÅÊÉ≥ËØ¥Êòé‰∏äÈù¢Âå∫Âà´‰∫ßÁîüÁöÑÂéüÂõ†ÔºåËøôÈáåÂøÖÈ°ªË¶Å‰ªãÁªç‰∏Ä‰∏™‰ªéÊú™‰ΩøÁî®ËøáÁöÑÁ±ªÂä†ËΩΩÁöÑËøáÁ®ã„ÄÇ Á±ª‰ªéË¢´Âä†ËΩΩÂà∞ËôöÊãüÊú∫ÂÜÖÂ≠ò‰∏≠ÂºÄÂßãÔºåÂà∞Âç∏ËΩΩÂá∫ÂÜÖÂ≠ò‰∏∫Ê≠¢ÔºåÂÆÉÁöÑÊï¥‰∏™ÁîüÂëΩÂë®ÊúüÂåÖÊã¨ÔºöÂä†ËΩΩÔºàLoadingÔºâ„ÄÅÈ™åËØÅÔºàVerificationÔºâ„ÄÅÂáÜÂ§á(Preparation)„ÄÅËß£Êûê(Resolution)„ÄÅÂàùÂßãÂåñ(Initialization)„ÄÅ‰ΩøÁî®(Using)ÂíåÂç∏ËΩΩ(Unloading)7‰∏™Èò∂ÊÆµ„ÄÇÂÖ∂‰∏≠ÂáÜÂ§á„ÄÅÈ™åËØÅ„ÄÅËß£Êûê3‰∏™ÈÉ®ÂàÜÁªüÁß∞‰∏∫ËøûÊé•ÔºàLinkingÔºâ„ÄÇÂ¶ÇÂõæÊâÄÁ§∫Ôºö Âä†ËΩΩ„ÄÅÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅÂàùÂßãÂåñÂíåÂç∏ËΩΩËøô5‰∏™Èò∂ÊÆµÁöÑÈ°∫Â∫èÊòØÁ°ÆÂÆöÁöÑÔºåÁ±ªÁöÑÂä†ËΩΩËøáÁ®ãÂøÖÈ°ªÊåâÁÖßËøôÁßçÈ°∫Â∫èÊåâÈÉ®Â∞±Áè≠Âú∞ÂºÄÂßãÔºåËÄåËß£ÊûêÈò∂ÊÆµÂàô‰∏ç‰∏ÄÂÆöÔºöÂÆÉÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÂèØ‰ª•Âú®ÂàùÂßãÂåñÈò∂ÊÆµ‰πãÂêéÂÜçÂºÄÂßãÔºåËøôÊòØ‰∏∫‰∫ÜÊîØÊåÅJavaËØ≠Ë®ÄÁöÑËøêË°åÊó∂ÁªëÂÆöÔºà‰πüÁß∞‰∏∫Âä®ÊÄÅÁªëÂÆöÊàñÊôöÊúüÁªëÂÆöÔºâ„ÄÇ 2.1 Âä†ËΩΩ Âú®Âä†ËΩΩÈò∂ÊÆµÔºàÂèØ‰ª•ÂèÇËÄÉjava.lang.ClassLoaderÁöÑloadClass()ÊñπÊ≥ïÔºâÔºåËôöÊãüÊú∫ÈúÄË¶ÅÂÆåÊàê‰ª•‰∏ã3‰ª∂‰∫ãÊÉÖÔºö ÈÄöËøá‰∏Ä‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÊù•Ëé∑ÂèñÂÆö‰πâÊ≠§Á±ªÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅÔºàÂπ∂Ê≤°ÊúâÊåáÊòéË¶Å‰ªé‰∏Ä‰∏™ClassÊñá‰ª∂‰∏≠Ëé∑ÂèñÔºåÂèØ‰ª•‰ªéÂÖ∂‰ªñÊ∏†ÈÅìÔºåË≠¨Â¶ÇÔºöÁΩëÁªú„ÄÅÂä®ÊÄÅÁîüÊàê„ÄÅÊï∞ÊçÆÂ∫ìÁ≠âÔºâÔºõ Â∞ÜËøô‰∏™Â≠óËäÇÊµÅÊâÄ‰ª£Ë°®ÁöÑÈùôÊÄÅÂ≠òÂÇ®ÁªìÊûÑËΩ¨Âåñ‰∏∫ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑÔºõ Âú®ÂÜÖÂ≠ò‰∏≠ÁîüÊàê‰∏Ä‰∏™‰ª£Ë°®Ëøô‰∏™Á±ªÁöÑjava.lang.ClassÂØπË±°Ôºå‰Ωú‰∏∫ÊñπÊ≥ïÂå∫Ëøô‰∏™Á±ªÁöÑÂêÑÁßçÊï∞ÊçÆÁöÑËÆøÈóÆÂÖ•Âè£Ôºõ Âä†ËΩΩÈò∂ÊÆµÂíåËøûÊé•Èò∂ÊÆµÔºàLinkingÔºâÁöÑÈÉ®ÂàÜÂÜÖÂÆπÔºàÂ¶Ç‰∏ÄÈÉ®ÂàÜÂ≠óËäÇÁ†ÅÊñá‰ª∂Ê†ºÂºèÈ™åËØÅÂä®‰ΩúÔºâÊòØ‰∫§ÂèâËøõË°åÁöÑÔºåÂä†ËΩΩÈò∂ÊÆµÂ∞öÊú™ÂÆåÊàêÔºåËøûÊé•Èò∂ÊÆµÂèØËÉΩÂ∑≤ÁªèÂºÄÂßãÔºå‰ΩÜËøô‰∫õÂ§πÂú®Âä†ËΩΩÈò∂ÊÆµ‰πã‰∏≠ËøõË°åÁöÑÂä®‰ΩúÔºå‰ªçÁÑ∂Â±û‰∫éËøûÊé•Èò∂ÊÆµÁöÑÂÜÖÂÆπÔºåËøô‰∏§‰∏™Èò∂ÊÆµÁöÑÂºÄÂßãÊó∂Èó¥‰ªçÁÑ∂‰øùÊåÅÁùÄÂõ∫ÂÆöÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇ 2.2 È™åËØÅ È™åËØÅÊòØËøûÊé•Èò∂ÊÆµÁöÑÁ¨¨‰∏ÄÊ≠•ÔºåËøô‰∏ÄÈò∂ÊÆµÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁ°Æ‰øùClassÊñá‰ª∂ÁöÑÂ≠óËäÇÊµÅ‰∏≠ÂåÖÂê´ÁöÑ‰ø°ÊÅØÁ¨¶ÂêàÂΩìÂâçËôöÊãüÊú∫ÁöÑË¶ÅÊ±ÇÔºåÂπ∂‰∏î‰∏ç‰ºöÂç±ÂÆ≥ËôöÊãüÊú∫Ëá™Ë∫´ÁöÑÂÆâÂÖ®„ÄÇ È™åËØÅÈò∂ÊÆµÂ§ßËá¥‰ºöÂÆåÊàê4‰∏™Èò∂ÊÆµÁöÑÊ£ÄÈ™åÂä®‰ΩúÔºö Êñá‰ª∂Ê†ºÂºèÈ™åËØÅÔºöÈ™åËØÅÂ≠óËäÇÊµÅÊòØÂê¶Á¨¶ÂêàClassÊñá‰ª∂Ê†ºÂºèÁöÑËßÑËåÉÔºõ‰æãÂ¶ÇÔºöÊòØÂê¶‰ª•È≠îÊúØ0xCAFEBABEÂºÄÂ§¥„ÄÅ‰∏ªÊ¨°ÁâàÊú¨Âè∑ÊòØÂê¶Âú®ÂΩìÂâçËôöÊãüÊú∫ÁöÑÂ§ÑÁêÜËåÉÂõ¥‰πãÂÜÖ„ÄÅÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÂ∏∏ÈáèÊòØÂê¶Êúâ‰∏çË¢´ÊîØÊåÅÁöÑÁ±ªÂûã„ÄÇ ÂÖÉÊï∞ÊçÆÈ™åËØÅÔºöÂØπÂ≠óËäÇÁ†ÅÊèèËø∞ÁöÑ‰ø°ÊÅØËøõË°åËØ≠‰πâÂàÜÊûêÔºàÊ≥®ÊÑèÔºöÂØπÊØîjavacÁºñËØëÈò∂ÊÆµÁöÑËØ≠‰πâÂàÜÊûêÔºâÔºå‰ª•‰øùËØÅÂÖ∂ÊèèËø∞ÁöÑ‰ø°ÊÅØÁ¨¶ÂêàJavaËØ≠Ë®ÄËßÑËåÉÁöÑË¶ÅÊ±ÇÔºõ‰æãÂ¶ÇÔºöËøô‰∏™Á±ªÊòØÂê¶ÊúâÁà∂Á±ªÔºåÈô§‰∫Üjava.lang.Object‰πãÂ§ñ„ÄÇ Â≠óËäÇÁ†ÅÈ™åËØÅÔºöÈÄöËøáÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÂàÜÊûêÔºåÁ°ÆÂÆöÁ®ãÂ∫èËØ≠‰πâÊòØÂêàÊ≥ïÁöÑ„ÄÅÁ¨¶ÂêàÈÄªËæëÁöÑ„ÄÇ Á¨¶Âè∑ÂºïÁî®È™åËØÅÔºöÁ°Æ‰øùËß£ÊûêÂä®‰ΩúËÉΩÊ≠£Á°ÆÊâßË°å„ÄÇ È™åËØÅÈò∂ÊÆµÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºå‰ΩÜ‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂÆÉÂØπÁ®ãÂ∫èËøêË°åÊúüÊ≤°ÊúâÂΩ±ÂìçÔºåÂ¶ÇÊûúÊâÄÂºïÁî®ÁöÑÁ±ªÁªèËøáÂèçÂ§çÈ™åËØÅÔºåÈÇ£‰πàÂèØ‰ª•ËÄÉËôëÈááÁî®-XverifynoneÂèÇÊï∞Êù•ÂÖ≥Èó≠Â§ßÈÉ®ÂàÜÁöÑÁ±ªÈ™åËØÅÊé™ÊñΩÔºå‰ª•Áº©Áü≠ËôöÊãüÊú∫Á±ªÂä†ËΩΩÁöÑÊó∂Èó¥„ÄÇ 2.3 ÂáÜÂ§á ÂáÜÂ§áÈò∂ÊÆµÊòØÊ≠£Âºè‰∏∫Á±ªÂèòÈáèÂàÜÈÖçÂÜÖÂ≠òÂπ∂ËÆæÁΩÆÁ±ªÂèòÈáèÂàùÂßãÂÄºÁöÑÈò∂ÊÆµÔºåËøô‰∫õÂèòÈáèÊâÄ‰ΩøÁî®ÁöÑÂÜÖÂ≠òÈÉΩÂ∞ÜÂú®ÊñπÊ≥ïÂå∫‰∏≠ËøõË°åÂàÜÈÖç„ÄÇËøôÊó∂ÂÄôËøõË°åÂÜÖÂ≠òÂàÜÈÖçÁöÑ‰ªÖÂåÖÊã¨Á±ªÂèòÈáèÔºàË¢´static‰øÆÈ•∞ÁöÑÂèòÈáèÔºâÔºåËÄå‰∏çÂåÖÊã¨ÂÆû‰æãÂèòÈáèÔºåÂÆû‰æãÂèòÈáèÂ∞Ü‰ºöÂú®ÂØπË±°ÂÆû‰æãÂåñÊó∂ÈöèÁùÄÂØπË±°‰∏ÄËµ∑ÂàÜÈÖçÂú®Â†Ü‰∏≠„ÄÇÂÖ∂Ê¨°ÔºåËøôÈáåÊâÄËØ¥ÁöÑÂàùÂßãÂÄº‚ÄúÈÄöÂ∏∏ÊÉÖÂÜµ‚Äù‰∏ãÊòØÊï∞ÊçÆÁ±ªÂûãÁöÑÈõ∂ÂÄºÔºåÂÅáËÆæ‰∏Ä‰∏™Á±ªÂèòÈáèÁöÑÂÆö‰πâ‰∏∫Ôºö 1public static int value=123; ÈÇ£ÂèòÈáèvalueÂú®ÂáÜÂ§áÈò∂ÊÆµËøáÂêéÁöÑÂàùÂßãÂÄº‰∏∫0ËÄå‰∏çÊòØ123.Âõ†‰∏∫ËøôÊó∂ÂÄôÂ∞öÊú™ÂºÄÂßãÊâßË°å‰ªª‰ΩïjavaÊñπÊ≥ïÔºåËÄåÊäävalueËµãÂÄº‰∏∫123ÁöÑputstaticÊåá‰ª§ÊòØÁ®ãÂ∫èË¢´ÁºñËØëÂêéÔºåÂ≠òÊîæ‰∫éÁ±ªÊûÑÈÄ†Âô®()ÊñπÊ≥ï‰πã‰∏≠ÔºåÊâÄ‰ª•ÊäävalueËµãÂÄº‰∏∫123ÁöÑÂä®‰ΩúÂ∞ÜÂú®ÂàùÂßãÂåñÈò∂ÊÆµÊâç‰ºöÊâßË°å„ÄÇ Ëá≥‰∫é‚ÄúÁâπÊÆäÊÉÖÂÜµ‚ÄùÊòØÊåáÔºöpublic static final int value=123ÔºåÂç≥ÂΩìÁ±ªÂ≠óÊÆµÁöÑÂ≠óÊÆµÂ±ûÊÄßÊòØConstantValueÊó∂Ôºå‰ºöÂú®ÂáÜÂ§áÈò∂ÊÆµÂàùÂßãÂåñ‰∏∫ÊåáÂÆöÁöÑÂÄºÔºåÊâÄ‰ª•Ê†áÊ≥®‰∏∫final‰πãÂêéÔºåvalueÁöÑÂÄºÂú®ÂáÜÂ§áÈò∂ÊÆµÂàùÂßãÂåñ‰∏∫123ËÄåÈùû0. 2.4 Ëß£Êûê Ëß£ÊûêÈò∂ÊÆµÊòØËôöÊãüÊú∫Â∞ÜÂ∏∏ÈáèÊ±†ÂÜÖÁöÑÁ¨¶Âè∑ÂºïÁî®ÊõøÊç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ã„ÄÇËß£ÊûêÂä®‰Ωú‰∏ªË¶ÅÈíàÂØπÁ±ªÊàñÊé•Âè£„ÄÅÂ≠óÊÆµ„ÄÅÁ±ªÊñπÊ≥ï„ÄÅÊé•Âè£ÊñπÊ≥ï„ÄÅÊñπÊ≥ïÁ±ªÂûã„ÄÅÊñπÊ≥ïÂè•ÊüÑÂíåË∞ÉÁî®ÁÇπÈôêÂÆöÁ¨¶7Á±ªÁ¨¶Âè∑ÂºïÁî®ËøõË°å„ÄÇ ÂØπ‰∫éËøôÈáåËØ¥ÁöÑÔºöÂ∞ÜÁ¨¶Âè∑ÂºïÁî®ÊõøÊç¢‰∏∫Áõ¥Êé•ÂºïÁî®„ÄÇÂæàÂ§ö‰∫∫ÂåÖÊã¨ÊàëÁ¨¨‰∏ÄÊ¨°ÁúãÂà∞ÁöÑÊó∂ÂÄôÊÑüËßâËé´ÂêçÂÖ∂Â¶ôÔºåÊïôÊùê‰∏ä‰πüÊòØÁõ¥Êé•Áî®Ëøô‰∫õ‰∏ìÁî®ÂêçËØçÔºåÁªôÊàë‰ª¨ÁöÑÂ≠¶‰π†Â∏¶Êù•‰∫ÜÊûÅÂ§ßÁöÑÂõ∞Êâ∞„ÄÇËøôÈáåËøòÊòØË¶ÅËß£Èáä‰∏Ä‰∏ã„ÄÇ Áî±‰∏ä‰∏ÄÁØáÊñáÁ´†Áü•ÈÅìÔºåÂä†ËΩΩÂÆåclassÊñá‰ª∂‰πãÂêéÂæàÂ§öÁ±ªÁöÑ‰ø°ÊÅØ‰ª•ÂèäClassÂØπË±°ÈÉΩÊòØÂ≠òÊîæÂÜçÊñπÊ≥ïÂå∫‰∏≠ÁöÑ„ÄÇÂú®JVMËøêË°åÊó∂Âå∫ÂüüÁöÑÊñπÊ≥ïÂå∫‰∏≠ÔºåÊúâ‰∏ÄÂùóÂå∫ÂüüÊòØËøêË°åÊó∂Â∏∏ÈáèÊ±†Ôºå‰∏ªË¶ÅÁî®Êù•Â≠òÂÇ®ÁºñËØëÊúüÁîüÊàêÁöÑÂêÑÁßçÂ≠óÈù¢ÈáèÂíåÁ¨¶Âè∑ÂºïÁî®„ÄÇ ‰∫ÜËß£ËøáJVMÂ∞±‰ºöÁü•ÈÅìÔºåÂú®java‰ª£Á†ÅË¢´javacÁºñËØë‰πãÂêéÔºåÊñá‰ª∂ÁªìÊûÑ‰∏≠ÊòØÂåÖÂê´‰∏ÄÈÉ®ÂàÜConstant poolÁöÑ„ÄÇÊØîÂ¶Ç‰ª•‰∏ã‰ª£Á†ÅÔºö 123public static void main(String[] args) &#123; String s = &quot;abc&quot;;&#125; sÂ∞±ÊòØÂâçÈù¢ÊèêÂà∞ÁöÑÁ¨¶Âè∑ÂºïÁî®ÔºåËÄåabcÂ∞±ÊòØÂâçÈù¢ÊèêÂà∞ÁöÑÂ≠óÈù¢Èáè„ÄÇËÄåClassÊñá‰ª∂‰∏≠ÁöÑÂ∏∏ÈáèÊ±†ÈÉ®ÂàÜÁöÑÂÜÖÂÆπÔºå‰ºöÂú®ËøêË°åÊúüË¢´ËøêË°åÊó∂Â∏∏ÈáèÊ±†Âä†ËΩΩËøõÂéª„ÄÇ Ê≠§Êó∂ÔºåÁü•ÈÅì‰∫Ü‰ªÄ‰πàÊòØÁ¨¶Âè∑ÂºïÁî®Â∞±Â•ΩÂäû‰∫ÜÔºåÂõ†‰∏∫Á¨¶Âè∑ÂºïÁî®‰∏ÄËà¨ÈÉΩÊòØÊîæÂú®Ê†à‰∏≠ÁöÑÔºåËøô‰∏™Áé©ÊÑèËÇØÂÆöÊòØ‰æùËµñ‰∫éÂÆûÈôÖÁöÑ‰∏úË•øÔºåÁõ∏ÂΩì‰∫é‰∏Ä‰∏™ÊåáÈíàÔºåÂ§ö‰ª•Êàë‰ª¨Á®ãÂ∫èÈúÄË¶ÅÂ∞ÜÂÖ∂Ëß£ÊûêÊàêËøô‰∏™ÂÆûÈôÖ‰∏úË•øÊâÄÂú®ÁöÑÁúüÊ≠£ÁöÑÂú∞ÂùÄ„ÄÇËÄå‰∏äÈù¢ÊèêÂà∞ÁöÑËøêË°åÊó∂Â∏∏ÈáèÊ±†ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÊüê‰∏ÄÈÉ®ÂàÜÔºåÊØîÂ¶ÇÂ≠óÁ¨¶‰∏≤ÔºåÂ∞±‰ºöÊääÂ≠óÈù¢ÈáèÊîæÂú®ËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠ÔºåÂè™Ë¶Å‰∏çÊòØnewÁöÑÔºåÈÉΩÂèØ‰ª•‰ªéËøô‰∏™Ê±†Â≠êÈáåÊãøÂá∫Êù•Âç≥ÂèØÔºåÊ≠§Êó∂Â∞±ÊòØÂ∞ÜËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠Ëøô‰∏™Â≠óÈù¢ÈáèÁöÑÂú∞ÂùÄ‰Ωú‰∏∫Áõ¥Êé•ÂºïÁî®Âç≥ÂèØÔºåÊèêÈ´òÊïàÁéá‰πüÈôç‰ΩéÂÜÖÂ≠òÁöÑ‰ΩøÁî®„ÄÇ ÁÆÄÂçïËÄåË®ÄÔºåÂØπ‰∫éËøô‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºåsÊòØÁ¨¶Âè∑ÂºïÁî®ÔºåËß£ÊûêÈò∂ÊÆµ‰ºöÂ∞ÜÂÖ∂Ëß£Êûê‰∏∫ËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠&quot;abc&quot;ÁöÑÂú∞ÂùÄÔºåËøô‰∏™Âú∞ÂùÄÂ∞±ÊòØÁõ¥Êé•ÂºïÁî®„ÄÇ 2.5 ÂàùÂßãÂåñ Á±ªÂàùÂßãÂåñÈò∂ÊÆµÊòØÁ±ªÂä†ËΩΩËøáÁ®ãÁöÑÊúÄÂêé‰∏ÄÊ≠•ÔºåÂà∞‰∫ÜÂàùÂßãÂåñÈò∂ÊÆµÔºåÊâçÁúüÊ≠£ÂºÄÂßãÊâßË°åÁ±ª‰∏≠ÂÆö‰πâÁöÑjavaÁ®ãÂ∫è‰ª£Á†Å„ÄÇÂú®ÂáÜÂ§áÈò∂ÊÆµÔºåÂèòÈáèÂ∑≤ÁªèËµãËøá‰∏ÄÊ¨°Á≥ªÁªüË¶ÅÊ±ÇÁöÑÂàùÂßãÂÄºÔºåËÄåÂú®ÂàùÂßãÂåñÈò∂ÊÆµÔºåÂàôÊ†πÊçÆÁ®ãÂ∫èÁåøÈÄöËøáÁ®ãÂ∫èÂà∂ÂÆöÁöÑ‰∏ªËßÇËÆ°ÂàíÂéªÂàùÂßãÂåñÁ±ªÂèòÈáèÂíåÂÖ∂‰ªñËµÑÊ∫êÔºåÊàñËÄÖËØ¥ÔºöÂàùÂßãÂåñÈò∂ÊÆµÊòØÊâßË°åÁ±ªÊûÑÈÄ†Âô®&lt;clinit&gt;()ÊñπÊ≥ïÁöÑËøáÁ®ã. ‰∏â„ÄÅnew„ÄÅloadClass„ÄÅforName Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰∏ÄËà¨ÊûÑÂª∫ÂØπË±°ÂÆû‰æãÊòØÈÄöËøánewÁöÑÊñπÂºèÔºånewÊòØÈöêÂºèÊûÑÂª∫ÂØπË±°ÂÆû‰æãÔºå‰∏çÈúÄË¶ÅnewInstance()ÔºåÂπ∂‰∏îÂèØ‰ª•Áî®Â∏¶ÂèÇÊï∞ÁöÑÊûÑÈÄ†Âô®Êù•ÁîüÊàêÂØπË±°ÂÆû‰æãÔºõ ÂØπ‰∫énewÔºåÊàë‰ª¨ÊúâÁÇπÂü∫Á°ÄÁöÑÔºåÊòØÁü•ÈÅìÔºåÂ∑≤Áªè‰∏ÄÁõ¥Êù•Âà∞‰∫ÜÊúÄÂêéÂàùÂßãÂåñÂÆåÊàêÁöÑËøô‰∏ÄÊ≠•ÔºåÁîüÊàê‰∫ÜÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÁöÑÂØπË±°ÂÆû‰æã„ÄÇÁî±‰∫éÁØáÂπÖ‰∏çÂÆúÂ§™ÈïøÔºå‰∏çÊÉ≥Â±ïÂºÄËÆ≤newÁöÑËøáÁ®ãÂèëÁîü‰∫Ü‰ªÄ‰πàÔºåËøôÈáåÂÖàË¥¥‰∏™ÊàëËßâÂæóËÆ≤ÁöÑ‰∏çÈîôÁöÑÈìæÊé•Ôºöhttps://www.jianshu.com/p/ebaa1a03c594 ÁÑ∂ËÄåloadClass(name)ËøôÁßçÊòæÁ§∫Ë∞ÉÁî®ÁöÑÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂè™ÊúâÂä†ËΩΩÁöÑÂäüËÉΩÔºåËÄåÊ≤°ÊúâÂêéÁª≠ËøûÊé•‰ª•ÂèäÂàùÂßãÂåñÁöÑËøáÁ®ã„ÄÇ ÊâÄ‰ª•loadClass(name)ÈúÄË¶ÅËøõË°ånewInstance()ÊâçËÉΩÁîüÊàêÂØπÂ∫îÁöÑÂØπË±°ÂÆû‰æãÔºåÂπ∂‰∏îËøô‰∏™newInstance()ÊñπÊ≥ï‰∏çÊîØÊåÅÂèÇÊï∞Ë∞ÉÁî®ÔºåË¶ÅÊÉ≥ÂÆûÁé∞ËæìÂÖ•ÂèÇÊï∞ÁîüÊàêÂÆû‰æãÂØπË±°ÔºåÈúÄË¶ÅÈÄöËøáÂèçÂ∞ÑËé∑ÂèñÊûÑÈÄ†Âô®ÂØπË±°‰º†ÂÖ•ÂèÇÊï∞ÂÜçÁîüÊàêÂØπË±°ÂÆû‰æã„ÄÇ ËøôÈáå‰πüÂ∞±Ëß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàË¶ÅnewInstance()ÔºåÂõ†‰∏∫‰∏çËøôÊ†∑ÔºåloadClass(name)Âè™ÊòØÂä†ËΩΩÔºåÂπ∂Ê≤°ÊúâÂêéÁª≠ËøáÁ®ãÔºå‰πüÂ∞±ÊòØËØ¥Ëøô‰∏™Á±ªÊ†πÊú¨Â∞±Ê≤°ÊúâÂä®ÂÆÉÔºå‰ªÖ‰ªÖÊòØÂä†ËΩΩËøõÊù•ËÄåÂ∑≤„ÄÇ‰ªé‰ª£Á†ÅÂ±ÇÈù¢Ë∞ÉÁî®loadClass()ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™‰πãÂâçÊïÖÊÑèÂøΩËßÜÁöÑ‰∏úË•øÔºö Ëøô‰∏™resolveÈªòËÆ§ÊòØ‰º†ÂÖ•falseÁöÑÔºåÈÇ£‰πàËøõÊù•ÁúãÁúãËøô‰∏™resolveClass()ÊñπÊ≥ïÔºö ÂÜç‰∏ãÂéªÊòØnativeÊñπÊ≥ïÔºå‰∏çÂøÖÂÖ≥ÂøÉÔºåÊàë‰ª¨Âè™ÁúãÊñπÊ≥ïÁöÑÊ≥®ÈáäÂç≥ÂèØÔºåÂÜôÁöÑÊòØÈìæÊé•ÊåáÂÆöÁöÑÁ±ªÔºåÂ∞±ÊòØ‰∏äÈù¢ÁöÑËøûÊé•ËøáÁ®ã„ÄÇÊàë‰ª¨Áî±‰∏äÈù¢Áü•ÈÅìÔºåÂ¶ÇÊûúËøô‰∏™ÊñπÊ≥ïËÉΩÊâßË°åÔºåÈÇ£‰πàÂ∞±‰ºöËß¶ÂèëÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅËß£ÊûêËøô‰∏â‰∏™ËøáÁ®ãÔºåËÄåÂáÜÂ§áÈò∂ÊÆµÊòØ‰ºöÂéªÊâßË°åÈùôÊÄÅÊñπÊ≥ïÊàñÈùôÊÄÅÂùóÔºåÁ±ªÂèòÈáè‰ºöË¢´ËøõË°åÂàùÂßãÂåñÔºåÂç≥ÂàÜÈÖçÂÜÖÂ≠òÔºå‰ΩÜÊòØ‰ªÖ‰ªÖËµãÂàùÂÄºÂç≥ÂèØ„ÄÇ ÊâÄ‰ª•ÔºåloadClass(name)Êúâ‰∏ÄÁßçÊáíÂä†ËΩΩÁöÑÊÄùÊÉ≥Âú®ÈáåÈù¢ÔºåË¶ÅÁî®‰∫ÜÂÜçÂéªËøõË°åÂàùÂßãÂåñÔºåËÄå‰∏çÊòØ‰∏ÄÂºÄÂßãÂ∞±ÂàùÂßãÂåñÂ•Ω„ÄÇ Êó¢ÁÑ∂Â∑≤ÁªèÁü•ÈÅì‰∫ÜnewÂíåloadClassÁöÑÂå∫Âà´‰∫ÜÔºå‰∏ãÈù¢ÂÜçÊù•ÁúãÁúãClass.forName(),ËÅ™ÊòéÁöÑËØªËÄÖ‰º∞ËÆ°Â∑≤ÁªèÂèØ‰ª•ÁåúÂà∞‰∫ÜÔºåÊ≤°ÈîôÔºåÊ†πÊçÆÂÆûÈ™åÁöÑÁªìÊûúÊù•ÁúãÔºåÂÆÉËá≥Â∞ëË¶ÅËøõË°åÂà∞ËøûÊé•ÂÆåÔºåÂÆûË¥®ÂÆÉ‰πüÂÆåÊàê‰∫ÜÂàùÂßãÂåñÔºåÂç≥Â∑≤ÁªèÂà∞ËææÁ¨¨‰∏âÊ≠•Ôºö ÊÄªÁªì‰∏Ä‰∏ãÔºöloadClass‰ªÖ‰ªÖÊòØÁ¨¨‰∏ÄÊ≠•ÁöÑÂä†ËΩΩÔºåËÄåforNameÂíånewÈÉΩÊòØÂ∑≤ÁªèÂàùÂßãÂåñÂ•Ω‰∫Ü„ÄÇ Â≠òÂú®ÁöÑÂéüÂõ† ÊâÄË∞ìÂ≠òÂú®Âç≥ÂêàÁêÜÔºåforNameÁöÑÁî®Ê≥ïÔºåÊúÄÂ∏∏ËßÅÁöÑËé´Ëøá‰∫éÁî®‰∫éÂä†ËΩΩÊï∞ÊçÆÂ∫ìÈ©±Âä®ËøôÔºåÊàë‰ª¨ËøôÈáåÂÆûÈ™å‰∏Ä‰∏ãÔºåÈ¶ñÂÖàÂºïÂÖ•Áõ∏ÂÖ≥ÁöÑ‰æùËµñÔºö ÁªèÂÖ∏ÂÜôÊ≥ïÊù•Âï¶Ôºö ÁÇπËøõÂéªÁúãÁúãÔºö Êàë‰ª¨Ëøô‰∏™Êó∂ÂÄôÂèëÁé∞ÔºåÈáåÈù¢ÊòØ‰∏Ä‰∏™staticÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊàë‰ª¨Ë¶ÅÁ´ãÂç≥ÂàõÂª∫È©±Âä®„ÄÇÊâÄ‰ª•Ëøô‰∏™Êó∂ÂÄôÂøÖÈ°ªÁî®fornameÊñπÊ≥ïÂï¶ÔºÅ ÈÇ£‰πàÂØπ‰∫éloadClassÔºåÂÖ∂ÂÆû‰∏äÈù¢Â∑≤ÁªèÊèêÂèä‰∫ÜÔºåÂ∞±ÊòØÊáíÂä†ËΩΩÔºåËøô‰∏™ÊÄùÊÉ≥ÂÜçspring‰∏≠ÊòØÂà∞Â§ÑÂèØËßÅÁöÑÔºåbeanÂè™ÊòØÂä†ËΩΩÔºå‰ΩÜÊòØÊ≠•ËøõË°åÂàùÂßãÂåñÔºåÁ≠âÁî®ÁöÑÊó∂ÂÄôÂÜçÂéªÂàùÂßãÂåñÔºåÊèêÈ´òÊÄßËÉΩ„ÄÇ]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âèå‰∫≤ÂßîÊ¥æÊ®°Âûã]]></title>
    <url>%2F2019%2F02%2F05%2FJVM%2F%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[Êú¨ÁØá‰∏∫Â≠¶‰π†JAVAËôöÊãüÊú∫ÁöÑÁ¨¨‰∏âÁØáÊñáÁ´†ÔºåË∞àÂà∞JVMÁ±ªÂä†ËΩΩÊú∫Âà∂ÔºåÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÊòØÁªï‰∏çÂºÄÁöÑËØùÈ¢òÔºåÂêçÂ≠óÁúãÂ•ΩÂÉèÊòØ‰∏™È´òÂ§ß‰∏ä„ÄÅÊ∑±‰∏çÂèØÊµãÁöÑÁé©ÊÑèÔºåÂÖ∂ÂÆûÈÄêÊ≠•Êè≠ÂºÄÈù¢Á∫±‰πãÂêéÂæàÁÆÄÂçï„ÄÇ‰∏ãÈù¢Êàë‰ª¨Â∞±Êù•Êè≠Êè≠Áúã„ÄÇ ÂõûÈ°æÁ±ªÂä†ËΩΩÂô® ‰∏ä‰∏ÄËäÇÁÆÄÂçïËØ¥Êòé‰∫ÜÁ±ªÂä†ËΩΩÂô®ÁöÑ‰ΩúÁî®ÔºåÂè™ËØ¥Âà∞‰∏Ä‰∏™Ê†∏ÂøÉÂäüËÉΩÊòØÂä†ËΩΩclassÊñá‰ª∂„ÄÇ‰ΩÜÊòØÔºåÁªùÂØπÊ≤°ÊúâËøô‰πàÁÆÄÂçïÔºåÁ•û‰π¶„ÄäÊ∑±ÂÖ•ÁêÜËß£JavaËôöÊãüÊú∫„ÄãÁ¨¨‰∫åÁâàÂØπÁ±ªÂä†ËΩΩÂô®ÁöÑËØ¥ÊòéÔºö ‰ª£Á†ÅÁºñËØëÁöÑÁªìÊûú‰ªéÊú¨Âú∞Êú∫Âô®Á†ÅËΩ¨ÂèòÊàêÂ≠óËäÇÁ†ÅÔºåÊòØÂ≠òÂÇ®Ê†ºÂºèÁöÑ‰∏ÄÂ∞èÊ≠•ÔºåÂç¥ÊòØÁºñÁ®ãËØ≠Ë®ÄÂèëÂ±ïÁöÑ‰∏ÄÂ§ßÊ≠•„ÄÇ JavaËôöÊãüÊú∫ÊääÊèèËø∞Á±ªÁöÑÊï∞ÊçÆ‰ªéClassÊñá‰ª∂Âä†ËΩΩËøõÂÜÖÂ≠òÔºåÂπ∂ÂØπÊï∞ÊçÆËøõË°åÊ†°È™åÔºåËΩ¨Êç¢Ëß£ÊûêÂíåÂàùÂßãÂåñÔºåÊúÄÁªàÂΩ¢ÊàêÂèØ‰ª•Ë¢´ËôöÊãüÊú∫Áõ¥Êé•‰ΩøÁî®ÁöÑJavaÁ±ªÂûãÔºåËøôÂ∞±ÊòØËôöÊãüÊú∫ÁöÑÁ±ªÂä†ËΩΩÊú∫Âà∂„ÄÇ ËôöÊãüÊú∫ËÆæËÆ°Âõ¢ÈòüÊääÁ±ªÂä†ËΩΩÈò∂ÊÆµ‰∏≠ÁöÑ‚ÄúÈÄöËøá‰∏Ä‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÊù•Ëé∑ÂèñÊèèËø∞Ê≠§Á±ªÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅ‚ÄùËøô‰∏™Âä®‰ΩúÊîæÂà∞JavaËôöÊãüÊú∫Â§ñÈÉ®ÂéªÂÆûÁé∞Ôºå‰ª•‰æøËÆ©Â∫îÁî®Á®ãÂ∫èËá™Â∑±ÂÜ≥ÂÆöÂ¶Ç‰ΩïÂéªËé∑ÂèñÊâÄÈúÄË¶ÅÁöÑÁ±ª„ÄÇÂÆûÁé∞ËøôÂä®‰ΩúÁöÑ‰ª£Á†ÅÊ®°ÂùóÊàê‰∏∫‚ÄúÁ±ªÂä†ËΩΩÂô®‚Äù„ÄÇ Á±ªÂä†ËΩΩÂô®ËôΩÁÑ∂Âè™Áî®‰∫éÂÆûÁé∞Á±ªÁöÑÂä†ËΩΩÂä®‰ΩúÔºå‰ΩÜÂÆÉÂú®JavaÁ®ãÂ∫è‰∏≠Ëµ∑Âà∞ÁöÑ‰ΩúÁî®Âç¥ËøúËøú‰∏çÈôê‰∫éÁ±ªÂä†ËΩΩÈò∂ÊÆµ„ÄÇÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™Á±ªÔºåÈÉΩÈúÄË¶ÅÁî±Âä†ËΩΩ‰ªñÁöÑÁ±ªÂä†ËΩΩÂô®ÂíåËøô‰∏™Á±ªÊú¨Ë∫´‰∏ÄÂêåÁ°ÆÁ´ãÂÖ∂Âú®JavaËôöÊãüÊú∫‰∏≠ÁöÑÂîØ‰∏ÄÊÄßÔºåÊØè‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®ÔºåÈÉΩÊã•Êúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ±ªÂëΩÂêçÁ©∫Èó¥„ÄÇËøôÂè•ËØùÂèØ‰ª•Ë°®ËææÁöÑÊõ¥ÈÄö‰øó‰∏Ä‰∫õÔºöÊØîËæÉ‰∏§‰∏™Á±ªÊòØÂê¶‚ÄúÁõ∏Á≠â‚ÄùÔºåÂè™ÊúâÂú®Ëøô‰∏§‰∏™Á±ªÊòØÁî±Âêå‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÁöÑÂâçÊèê‰∏ãÊâçÊúâÊÑè‰πâÔºåÂê¶ÂàôÔºåÂç≥‰ΩøËøô‰∏§‰∏™Á±ªÊù•Ëá™Âêå‰∏Ä‰∏™ClassÊñá‰ª∂ÔºåË¢´Âêå‰∏Ä‰∏™ËôöÊãüÊú∫Âä†ËΩΩÔºåÂè™Ë¶ÅÂä†ËΩΩ‰ªñ‰ª¨ÁöÑÁ±ªÂä†ËΩΩÂô®‰∏çÂêåÔºåÈÇ£Ëøô‰∏™‰∏§‰∏™Á±ªÂ∞±ÂøÖÂÆö‰∏çÁõ∏Á≠â„ÄÇ ÂØπ‰∫é‰∏äÈù¢ËøõË°å‰∏Ä‰∫õËØ¥ÊòéÔºö Ê≥®ÊÑèÔºåÂä†ËΩΩ‰πãÂêéË¶ÅÂ∞ÜËøô‰∏™Â≠óËäÇÊµÅÊâÄ‰ª£Ë°®ÁöÑÈùôÊÄÅÂ≠òÂÇ®ÁªìÊûÑËΩ¨Âåñ‰∏∫ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑÔºàÊñπÊ≥ïÂå∫Â∞±ÊòØÁî®Êù•Â≠òÊîæÂ∑≤Ë¢´Âä†ËΩΩÁöÑÁ±ª‰ø°ÊÅØÔºåÂ∏∏ÈáèÔºåÈùôÊÄÅÂèòÈáèÔºåÁºñËØëÂêéÁöÑ‰ª£Á†ÅÁöÑËøêË°åÊó∂ÂÜÖÂ≠òÂå∫ÂüüÔºâ Âú®ÂÜÖÂ≠ò‰∏≠ÁîüÊàê‰∏Ä‰∏™‰ª£Ë°®Ëøô‰∏™Á±ªÁöÑjava.lang.ClassÂØπË±°Ôºå‰Ωú‰∏∫ÊñπÊ≥ïÂå∫Ëøô‰∏™Á±ªÁöÑÂêÑÁßçÊï∞ÊçÆÁöÑËÆøÈóÆÂÖ•Âè£„ÄÇËøô‰∏™ClassÂØπË±°Âπ∂Ê≤°ÊúâËßÑÂÆöÊòØÂú®JavaÂ†ÜÂÜÖÂ≠ò‰∏≠ÔºåÂÆÉÊØîËæÉÁâπÊÆäÔºåËôΩ‰∏∫ÂØπË±°Ôºå‰ΩÜÂ≠òÊîæÂú®ÊñπÊ≥ïÂå∫‰∏≠„ÄÇ ËøôÊ†∑ÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™Á±ª‰∫Ü„ÄÇ ËøòÊúâÔºåÂÖ≥‰∫éÁõ∏Á≠âÔºåÂè™ÊúâÂú®Êª°Ë∂≥Â¶Ç‰∏ã‰∏â‰∏™Á±ª‚ÄúÁõ∏Á≠â‚ÄùÂà§ÂÆöÊù°‰ª∂ÔºåÊâçËÉΩÂà§ÂÆö‰∏§‰∏™Á±ªÁõ∏Á≠â„ÄÇ ‰∏§‰∏™Á±ªÊù•Ëá™Âêå‰∏Ä‰∏™ClassÊñá‰ª∂ ‰∏§‰∏™Á±ªÊòØÁî±Âêå‰∏Ä‰∏™ËôöÊãüÊú∫Âä†ËΩΩ ‰∏§‰∏™Á±ªÊòØÁî±Âêå‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Âä†ËΩΩ ‰ªÄ‰πàÊòØÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã Êàë‰ª¨‰∏ä‰∏ÄËäÇÂ∑≤ÁªèÁü•ÈÅì‰∫ÜÊúâÂõõÁßçÁ±ªÂä†ËΩΩÂô®ÔºåÂÆÉ‰ª¨ÁöÑÂÆûÈôÖÂÖ≥Á≥ª‰∏∫Ôºö ‰ªéËøô‰∏™ÂõæÊù•ÁúãÔºåÊòØ‰∏Ä‰∏™ÁªßÊâøÁöÑÂÖ≥Á≥ªÔºåÊòØËøôÊ†∑ÂêóÔºüÊàë‰ª¨Áî®‰ª£Á†ÅÊù•ÁúãÁúãÊòØ‰∏çÊòØÁúüÁöÑÊòØËøôÊ†∑„ÄÇ ‰ª£Á†ÅËøòÊòØÁî®‰∏ä‰∏ÄÁØáÊñáÁ´†Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®Êù•ÊµãËØïÔºö ÁªìÊûúÊòØÔºö ‰ªéËøô‰∏™ÁªìÊûúÂ∞±ÂæàÂÆπÊòìÁúãÂá∫ÔºåÂ±ÇÁ∫ßÂÖ≥Á≥ªÊòØ‰∏é‰∏äÂõæÊâÄËø∞ÁöÑ‰∏ÄÊ†∑„ÄÇÈÇ£‰πàÔºåËøô‰∏™Â±ÇÁ∫ßÂÖ≥Á≥ªÂÖ∂ÂÆûÂ∞±ÊòØÊàë‰ª¨‰∏ãÈù¢Ë¶ÅËØ¥ÁöÑÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑÁªìÊûÑ„ÄÇ ËøôÈáåËøòÊÉ≥Ë°•ÂÖÖ‰∏ÄÁÇπÔºöÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÊúÄÂêé‰∏Ä‰∏™ÊòØnullÔºåÂç≥bootstrap‰∏∫‰ªÄ‰πàÊòæÁ§∫nullÔºåÂÖ∂ÂÆûÊòØÂõ†‰∏∫ÂÆÉÊòØÁî®C++ÂÆûÁé∞ÁöÑÔºå‰∏çÊòØjavaËØ≠Ë®ÄÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•‰∏éÂÖ∂‰ªñÂá†‰∏™ÈÉΩÊúâÂå∫Âà´ÔºåËøôÈáåÊ†πÊçÆÂ∞±Ë∞ÉÁî®‰∏çÂà∞ÔºåÊâÄ‰ª•ÊòæÁ§∫null„ÄÇÂ¶ÇÊûúÈùûË¶ÅÁúãbootstrapÈáåÈù¢Â§ßÊ¶ÇÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºåÈúÄË¶ÅÂéªÁúãÁúãopjdkÁöÑ‰ª£Á†Å„ÄÇ ÁªìÂêà‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException&#123; //1.Âä†ÈîÅ synchronized (getClassLoadingLock(name)) &#123; //2.È¶ñÂÖàÁúãÁúãÂΩìÂâçÁ±ªÂä†ËΩΩÂô®ÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩËøáÔºåÊ≤°ÊúâÂàôÂßîÊ¥æÁªôÁà∂‰∫≤Êü•ËØ¢ Class&lt;?&gt; c = findLoadedClass(name); //3.Â¶ÇÊûúÂΩìÂâçÁ±ªÂä†ËΩΩÂô®Ê≤°ÊúâÂä†ËΩΩËøáÔºåËøõÊù• if (c == null) &#123; long t0 = System.nanoTime(); try &#123; //4.ÁúãÊòØÂê¶ÊúâÁà∂Á±ªÂä†ËΩΩÂô®ÔºåÊúâÂàôËøõÊù• if (parent != null) &#123; //5.Áà∂Á±ªÂä†ËΩΩÂô®ÁúãÁúãÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩËøá //Ê≥®ÊÑèÔºåËøôÈáåÊòØÂêÑÈÄíÂΩíÂáΩÊï∞ÔºåÂ¶ÇÊûúÁî±‰∏ãËá≥‰∏äÊü•ËØ¢ÈÉΩÊ≤°ÊúâÂä†ËΩΩËøáÔºåÂàô‰ªé‰∏äËá≥‰∏ãÂ∞ùËØïÂéªÂä†ËΩΩ c = parent.loadClass(name, false); &#125; else &#123; //ËøõÂà∞Ëøô‰∏™ÔºåÊòØÊù•ÁúãÁúãbootstrapÁ±ªÂä†ËΩΩÂô®ÊòØÂê¶Âä†ËΩΩËøáÔºåÊ≤°ÊúâÂä†ËΩΩËøáÂàôÂä†ËΩΩ c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; //6.Â¶ÇÊûúÊâÄÊúâÁ±ªÂä†ËΩΩÂô®ÈÉΩÊ≤°ÊúâÂä†ËΩΩËøáÔºåÂàôÂºÄÂßãÂ∞ùËØï‰ªé‰∏äËÄå‰∏ãÈÄêÁ∫ßÂéªÂä†ËΩΩ if (c == null) &#123; // If still not found, then invoke findClass in order // to find the class. long t1 = System.nanoTime(); //ÂéªÂä†ËΩΩ c = findClass(name); // this is the defining class loader; record the stats sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0); sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1); sun.misc.PerfCounter.getFindClasses().increment(); &#125; &#125; //‰∏ÄÂºÄÂßãÊòØfalse if (resolve) &#123; resolveClass(c); &#125; return c; &#125;&#125; ÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂÖà‰∏ÄÁ∫ß‰∏ÄÁ∫ßÂæÄ‰∏äÊü•ËØ¢ÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩËøáÔºåÂä†ËΩΩËøáÁõ¥Êé•ËøîÂõûÂç≥ÂèØÔºõ‰∏ÄÁõ¥Êü•ËØ¢Âà∞bootstrapÁ±ªÂä†ËΩΩÂô®ÔºåÈÉΩÊ≤°ÊúâÂä†ËΩΩËøáÔºåÈÇ£‰πàÂ∞±‰ªébootstrapÁ±ªÂä†ËΩΩÂô®ÂºÄÂßã‰∏ÄÁ∫ß‰∏ÄÁ∫ßÂêë‰∏ãÂà∞‰ªñ‰ª¨ÁöÑÊâ´ÊèèËåÉÂõ¥ÂÜÖÂ∞ùËØïÂä†ËΩΩËøô‰∏™classÊñá‰ª∂ÔºåÁü•ÈÅìËá™ÂÆö‰πâÁ±ªÂä†ËΩΩ(Â¶ÇÊûúÊúâÁöÑËØù)ÔºåÊ≤°ÊúâÂàôËøîÂõûÊâæ‰∏çÂà∞„ÄÇ ËØ¥‰∏Ä‰∏ã‰ª£Á†ÅÁöÑÂÆûÁé∞ÊÄùË∑Ø„ÄÇ‰ª£Á†Å‰ΩøÁî®ÈÄíÂΩíÂÆûÁé∞ÁöÑÔºåÂÖà‰∏ÄÁ∫ß‰∏ÄÁ∫ßÊâæÁà∂‰∫≤ÔºåÂç≥‰∏ÄÁ∫ß‰∏ÄÁ∫ßÂêë‰∏äÂÖ•Ê†àÔºåÊüê‰∏Ä‰∏™Êü•Âà∞‰∫ÜÂ∞±ËøîÂõûÔºåÊØè‰∏ÄÂ±ÇÈÄíÂΩíÂÅúÁïôÂú®c = parent.loadClass(name, false);ÔºõÈÉΩÊü•‰∏çÂà∞ÔºåÂÜç‰∏ÄÁ∫ß‰∏ÄÁ∫ßÂá∫Ê†àÂéªÊâßË°åÔºåÈÇ£‰πàÂ∞±‰ªéc = findBootstrapClassOrNull(name);ÂêéÈù¢ÁöÑ‰ª£Á†ÅÁªßÁª≠ÊâßË°åÔºåÈÇ£‰πàÊòæÁÑ∂Â∞±ÊòØÊâßË°åif (c == null) {...}Â∞ùËØïÂéªÂä†ËΩΩ„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÁî®Âèå‰∫≤ÂßîÊ¥æÊ®°Âûã ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÂë¢ÔºüÂÅáËÆæÊ≤°ÊúâÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåËØïÊÉ≥‰∏Ä‰∏™Âú∫ÊôØÔºö ÈªëÂÆ¢Ëá™ÂÆö‰πâ‰∏Ä‰∏™java.lang.StringÁ±ªÔºåËØ•StringÁ±ªÂÖ∑ÊúâÁ≥ªÁªüÁöÑStringÁ±ª‰∏ÄÊ†∑ÁöÑÂäüËÉΩÔºåÂè™ ÊòØÂú®Êüê‰∏™ÂáΩÊï∞Á®ç‰Ωú‰øÆÊîπ„ÄÇÊØîÂ¶ÇequalsÂáΩÊï∞ÔºåËøô‰∏™ÂáΩÊï∞ÁªèÂ∏∏‰ΩøÁî®ÔºåÂ¶ÇÊûúÂú®ËøôËøô‰∏™ÂáΩÊï∞‰∏≠Ôºå ÈªëÂÆ¢Âä†ÂÖ•‰∏Ä‰∫õ‚ÄúÁóÖÊØí‰ª£Á†Å‚Äù„ÄÇÂπ∂‰∏îÈÄöËøáËá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®Âä†ÂÖ•Âà∞JVM‰∏≠„ÄÇÊ≠§Êó∂ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂèå‰∫≤ ÂßîÊ¥æÊ®°ÂûãÔºåÈÇ£‰πàJVMÂ∞±ÂèØËÉΩËØØ‰ª•‰∏∫ÈªëÂÆ¢Ëá™ÂÆö‰πâÁöÑjava.lang.StringÁ±ªÊòØÁ≥ªÁªüÁöÑStringÁ±ªÔºå ÂØºËá¥‚ÄúÁóÖÊØí‰ª£Á†Å‚ÄùË¢´ÊâßË°å„ÄÇ ËÄåÊúâ‰∫ÜÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÈªëÂÆ¢Ëá™ÂÆö‰πâÁöÑjava.lang.StringÁ±ªÊ∞∏ËøúÈÉΩ‰∏ç‰ºöË¢´Âä†ËΩΩËøõÂÜÖÂ≠ò„ÄÇÂõ†‰∏∫È¶ñÂÖàÊòØÊúÄÈ°∂Á´ØÁöÑÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩÁ≥ªÁªüÁöÑjava.lang.StringÁ±ªÔºåÊúÄÁªàËá™ÂÆö‰πâÁöÑÁ±ªÂä†ËΩΩÂô®Êó†Ê≥ïÂä†ËΩΩjava.lang.StringÁ±ª„ÄÇ ÊàñËÆ∏‰Ω†‰ºöÊÉ≥ÔºåÊàëÂú®Ëá™ÂÆö‰πâÁöÑÁ±ªÂä†ËΩΩÂô®ÈáåÈù¢Âº∫Âà∂Âä†ËΩΩËá™ÂÆö‰πâÁöÑjava.lang.StringÁ±ªÔºå‰∏çÂéªÈÄöËøáË∞ÉÁî®Áà∂Âä†ËΩΩÂô®‰∏çÂ∞±Â•Ω‰∫ÜÂêó?Á°ÆÂÆûÔºåËøôÊ†∑ÊòØÂèØË°å„ÄÇ‰ΩÜÊòØÔºåÂú®JVM‰∏≠ÔºåÂà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØÂê¶ÊòØÊüê‰∏™Á±ªÂûãÊó∂ÔºåÂ¶ÇÊûúËØ•ÂØπË±°ÁöÑÂÆûÈôÖÁ±ªÂûã‰∏éÂæÖÊØîËæÉÁöÑÁ±ªÂûãÁöÑÁ±ªÂä†ËΩΩÂô®‰∏çÂêåÔºåÈÇ£‰πà‰ºöËøîÂõûfalse„ÄÇ ‰∏æ‰∏™ÁÆÄÂçï‰æãÂ≠êÔºö ClassLoader1„ÄÅClassLoader2ÈÉΩÂä†ËΩΩjava.lang.StringÁ±ªÔºåÂØπÂ∫îClass1„ÄÅClass2ÂØπË±°„ÄÇ ÈÇ£‰πàClass1ÂØπË±°‰∏çÂ±û‰∫éClassLoad2ÂØπË±°Âä†ËΩΩÁöÑjava.lang.StringÁ±ªÂûã„ÄÇ ÂßîÊâòÊú∫Âà∂ÁöÑÊÑè‰πâÔºöÈò≤Ê≠¢ÂÜÖÂ≠ò‰∏≠Âá∫Áé∞Â§ö‰ªΩÂêåÊ†∑ÁöÑÂ≠óËäÇÁ†Å ÊØîÂ¶Ç‰∏§‰∏™Á±ªAÂíåÁ±ªBÈÉΩË¶ÅÂä†ËΩΩSystemÁ±ªÔºö Â¶ÇÊûú‰∏çÁî®ÂßîÊâòËÄåÊòØËá™Â∑±Âä†ËΩΩËá™Â∑±ÁöÑÔºåÈÇ£‰πàÁ±ªAÂ∞±‰ºöÂä†ËΩΩ‰∏Ä‰ªΩSystemÂ≠óËäÇÁ†ÅÔºåÁÑ∂ÂêéÁ±ªBÂèà‰ºöÂä†ËΩΩ‰∏Ä‰ªΩSystemÂ≠óËäÇÁ†ÅÔºåËøôÊ†∑ÂÜÖÂ≠ò‰∏≠Â∞±Âá∫Áé∞‰∫Ü‰∏§‰ªΩSystemÂ≠óËäÇÁ†Å„ÄÇ Â¶ÇÊûú‰ΩøÁî®ÂßîÊâòÊú∫Âà∂Ôºå‰ºöÈÄíÂΩíÁöÑÂêëÁà∂Á±ªÊü•ÊâæÔºå‰πüÂ∞±ÊòØÈ¶ñÈÄâÁî®BootstrapÂ∞ùËØïÂä†ËΩΩÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞ÂÜçÂêë‰∏ã„ÄÇËøôÈáåÁöÑSystemÂ∞±ËÉΩÂú®Bootstrap‰∏≠ÊâæÂà∞ÁÑ∂ÂêéÂä†ËΩΩÔºåÂ¶ÇÊûúÊ≠§Êó∂Á±ªB‰πüË¶ÅÂä†ËΩΩSystemÔºå‰πü‰ªéBootstrapÂºÄÂßãÔºåÊ≠§Êó∂BootstrapÂèëÁé∞Â∑≤ÁªèÂä†ËΩΩËøá‰∫ÜSystemÈÇ£‰πàÁõ¥Êé•ËøîÂõûÂÜÖÂ≠ò‰∏≠ÁöÑSystemÂç≥ÂèØËÄå‰∏çÈúÄË¶ÅÈáçÊñ∞Âä†ËΩΩÔºåËøôÊ†∑ÂÜÖÂ≠ò‰∏≠Â∞±Âè™Êúâ‰∏Ä‰ªΩSystemÁöÑÂ≠óËäÇÁ†Å‰∫Ü„ÄÇ ‰∏Ä‰∏™Èù¢ËØïÈ¢ò ËÉΩ‰∏çËÉΩËá™Â∑±ÂÜô‰∏™Á±ªÂè´java.lang.SystemÔºü ÊòæÁÑ∂ÊòØ‰∏çÂèØ‰ª•ÁöÑÔºåÂèØËÉΩÊñπÊ°àÊòØËá™Â∑±Êêû‰∏Ä‰∏™Ëøô‰∏™Á±ªÊîæÂú®ÁâπÊÆäÁõÆÂΩïÔºåÁî®Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÂéªÂä†ËΩΩÔºåÁÑ∂ËÄåÁ≥ªÁªüËá™Ë∫´ÁöÑÁ±ªÂä†ËΩΩÂô®‰ºöÂÖàÂéªÂä†ËΩΩ‰ΩøÁî®Ôºå‰∏ãÊ¨°ÂÜçÁî®ÁöÑÊó∂ÂÄôÔºåÊòØÂÖàÈÄêÁ∫ßÂêë‰∏äÊü•ËØ¢ÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩËøáÔºåÊ†πÊú¨Ê≤°ÊúâÊú∫‰ºöËÆ©Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÂéªÂä†ËΩΩ„ÄÇ ÊâÄ‰ª•ÔºåÂ¶ÇÊûúÈùûË¶ÅÁî®ÔºåÈÇ£‰πàÂøÖÂÆöÊòØË¶ÅÁ†¥ÂùèÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã‰∫ÜÔºåÈÇ£‰πàÂèàÂõûÂà∞‰∏∫‰ªÄ‰πàË¶ÅÁî®Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑÈóÆÈ¢ò‰∏ä‰∫ÜÔºåÊâÄ‰ª•Ôºå‰∏∫‰∫ÜËá™Â∑±ÂÜô‰∏Ä‰∏™java.lang.SystemËÄåÁ†¥ÂùèÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÔºåÊàëÂè™ËÉΩËØ¥ÔºåËÑëÂ≠êÁßÄÈÄó‰∫Ü„ÄÇÊâÄ‰ª•‰∏çË¶ÅÊêûËøô‰∫õ‰∏úË•øÔºåÂåÖÂêçÊàñÁ±ªÂêçÂÜôÁöÑ‰∏ç‰∏ÄÊ†∑Âç≥ÂèØ„ÄÇ ‰∏Ä‰∏™ÈóÆÈ¢ò ÈÇ£‰πà‰∏∫‰ªÄ‰πà‰∏çËÉΩÁî®‰∏Ä‰∏™Âä†ËΩΩÂô®Âéª‰∏Ä‰∏™ÁõÆÂΩïÂä†ËΩΩÊâÄÊúâÂë¢ÔºüËøòË¶ÅÂàÜËøô‰πàÂ§öÁöÑÁ±ªÂä†ËΩΩÂô®Ôºå‰∏çÊòØÈ∫ªÁÉ¶‰πàÔºü ÂÖ∂ÂÆûÔºåËøô‰∏™ÈóÆÈ¢ò‰πüÊòØÊØîËæÉÂèØÁ¨ëÁöÑÔºåÊØïÁ´üÊØè‰∏™Â±ÇÁ∫ßÁöÑÂäüËÉΩÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÊØîÂ¶ÇbootstrapÊòØÂä†ËΩΩÊúÄÊ†∏ÂøÉÁöÑÊñá‰ª∂ÔºåÊ≤°ÊúâÂÆÉÔºåÈÉΩÁé©‰∏çËµ∑Êù•„ÄÇËÄåËá™ÂÆö‰πâÁöÑÂë¢ÔºüÊòØÊØîËæÉÁâπÊÆäÁöÑÈúÄÊ±ÇÔºåÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÁî®Âà∞„ÄÇÂØπ‰∫éËøôÁßçÊúâ‰∏™ÊÄßÂåñÁöÑË¶ÅÊ±ÇÔºå‰∏ÄÂ•ó‰ª£Á†ÅÊù•ÂÆûÁé∞ÔºåÊòæÁÑ∂ÊòØ‰∏çÂêàÁêÜÁöÑ„ÄÇ ÊØîÂ¶ÇËøô‰∏™ÂõûÁ≠îÊòØÊ†πÊçÆÂä†ËΩΩÁöÑÊñπÂºèÊù•ÊÄùËÄÉÁöÑÔºö ÊØè‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®ÈÉΩÊòØ‰∏∫‰∫ÜÂéªÂú®‰∏çÂêåÁöÑÊÉÖÊôØ‰∏ãÂéªÂä†ËΩΩÁ±ª„ÄÇÊØîÂ¶ÇÔºå‰Ω†ÂèØ‰ª•‰ªéËÅîÁΩëÊúçÂä°Âô®‰∏äÂä†ËΩΩ‰∏Ä‰∏™classÊñá‰ª∂Ôºå‰πüÂèØ‰ª•‰ªéËøúÁ®ãwebÊúçÂä°Âô®‰∏ãËΩΩ‰∫åËøõÂà∂Á±ª„ÄÇËøô‰πàËÆæËÆ°ÊòØÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶ÅÁ±ªÂä†ËΩΩÂô®Êèê‰æõ‰∏ÄËá¥ÁöÑÊé•Âè£ÔºåËøôÊ†∑ÂÆ¢Êà∑Á´ØÂ∞±ÂèØ‰ª•Âä†ËΩΩÁ±ª‰ΩÜÊòØÂç¥‰∏çÁî®ÁÆ°Á±ªÂä†ËΩΩÂô®Âà∞Â∫ïÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ„ÄÇÂêØÂä®Á±ªÂä†ËΩΩÂô®ËÉΩÂ§üÂä†ËΩΩJVM_HOME/lib ‰∏ãÁöÑÁ±ªÔºå‰ΩÜÂ¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÂú®ÂÖ∂‰ªñÁöÑÊÉÖÂÜµ‰∏ãÂä†ËΩΩÁ±ªÂë¢ÔºüÁÆÄÂçïÊù•ËØ¥ÔºåÂä†ËΩΩÁ±ªÁöÑÊñπÊ≥ïÊúâÊó†Êï∞ÁßçÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÁÅµÊ¥ªÁöÑÂä†ËΩΩÂô®Á≥ªÁªüÂéªÂú®ÁâπÂÆöÁöÑÊÉÖÂÜµ‰∏ãÊåâÁÖßÊàë‰ª¨ÁöÑÊÉ≥Ê≥ïÊù•Âä†ËΩΩÁ±ª„ÄÇ ËøòÊúâ‰∏Ä‰∏™ÂõûÁ≠îÊòØËØ¥Êõ¥Êñπ‰æøÂú∞ÂØπÁâπÂÆöÁ±ªËøõË°å‰ºòÂåñÔºö ËôΩÁÑ∂ ÂØπjava ËôöÊãüÊú∫Ê≤°ÊúâÁ†îÁ©∂ËøáÔºåjava ‰∏∫‰ªÄ‰πà‰∏çËÉΩ ‰∏Ä‰∏™Âä†ËΩΩÂô® Âä†ËΩΩÂÖ®ÈÉ®ÁöÑÁ±ª ÂæàÊòéÊòæÔºå ÂÆûÁé∞Ëµ∑Êù•‰πüÂèØ‰ª• ‰ΩÜÊòØÈúÄË¶Å ÁöÑ ‰ª£Á†Å Êõ¥Â§öÔºå‰πüÊõ¥Èöæ ‰∏∫ÂêÑÁßçÁ±ªËøõË°å ‰ºòÂåñÔºå‰∏∫‰∫ÜÊõ¥ÁÆÄÂçïÁöÑÊäΩË±° ÊàëÂú®ÊòéÁ°ÆÁü•ÈÅì ËØ•Á±ªÊòØÂêØÂä®Á±ªÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàëÂ∞±‰ºö ‰∏∫ËØ•Á±ª ËøõË°å‰ºòÂåñ„ÄÇ Â¶ÇÊûúÊòØËá™ÂÆö‰πâÁ±ªÔºåÂèØËÉΩÂ∞± ‰∏ç‰ºöËøõË°å Ê≠§Á±ª‰ºòÂåñ„ÄÇ Âú®ÊòéÁ°Æ ÁõÆÁöÑÁöÑÊÉÖÂÜµ‰∏ãÔºå ‰∏ìÁî®‰ª£Á†Å ÊØî ÈÄöÁî®‰ª£Á†Å Êõ¥ÁÆÄÂçïÔºå‰πüÊõ¥ÊúâÊïà„ÄÇ ÊÄª‰πãÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÊ∏ÖÊô∞ÂíåÊñπ‰æøÔºåËøô‰πüÊòØÊàë‰ª¨Âú®ËøõË°åËΩØ‰ª∂ËÆæËÆ°ÁöÑÊó∂ÂÄôÊúÄÂü∫Êú¨ÁöÑË¶ÅÊ±ÇÔºåÂç≥‰∏çËÉΩÂÜôÊ≠ª‰ª£Á†ÅÔºåÂΩ±ÂìçÊâ©Â±ïÊÄßÔºõÂ±ÇÊ¨°ÁªìÊûÑ‰πü‰∏çËÉΩÂÜôÁöÑÂ§™‰π±ÔºåÂΩ±ÂìçÂêéÁª≠ÁöÑ‰ºòÂåñ„ÄÇ Ëá≥Ê≠§ÔºåÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÂ∞±ËÆ≤ÂÆå‰∫Ü„ÄÇÊàë‰ª¨‰πüÊ∏ÖÊô∞Âú∞Áü•ÈÅì‰∫ÜÂÖ∂ËÆæËÆ°ÊÄùÊÉ≥ÂíåÂ•ΩÂ§Ñ„ÄÇ]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊµÖË∞àClassLoader]]></title>
    <url>%2F2019%2F02%2F05%2FJVM%2F%E6%B5%85%E8%B0%88ClassLoader%2F</url>
    <content type="text"><![CDATA[Êú¨ÁØá‰∏∫Â≠¶‰π†JAVAËôöÊãüÊú∫ÁöÑÁ¨¨‰∫åÁØáÊñáÁ´†Ôºå‰∏ä‰∏ÄÁØáÊñáÁ´†ÂàùÊ≠•ÊèêÂà∞‰∫ÜclassÊñá‰ª∂Ôºå‰ª•Âèä‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁ®ãÂ∫èÊâßË°åÁöÑÊåá‰ª§Âê´‰πâÔºåÊàë‰ª¨ÊèêÂà∞ÔºåÊòØÁî±JAVAËôöÊãüÊú∫ÂÖàÂä†ËΩΩËøô‰∫õÁºñËØëÂ•ΩÁöÑclassÊñá‰ª∂ÔºåÁÑ∂ÂêéÂÜçÂéªÊ†πÊçÆËß£ÊûêÂá∫Êù•ÁöÑÊåá‰ª§ÂéªËΩ¨Êç¢‰∏∫ÂÖ∑‰ΩìÂπ≥Âè∞‰∏äÁöÑÊú∫Âô®Êåá‰ª§ÊâßË°åÔºå‰ΩÜÊòØÂä†ËΩΩËøô‰∏™classÊñá‰ª∂Êó∂Â¶Ç‰ΩïÂä†ËΩΩÁöÑÂë¢ÔºüÂÖ∂ÂÆûÂ∞±Ê∂âÂèäÊØîËæÉÈáçË¶ÅÁöÑ‰∏úË•øÔºöClassLoader Êúâ‰∏Ä‰∏™Âü∫Êú¨ËÆ§ËØÜÔºå‰ªéÁºñËØëÂà∞ÂÆû‰æãÂåñÂØπË±°ÁöÑËøáÁ®ãÂèØ‰ª•Ê¶ÇÊã¨‰∏∫‰ª•‰∏ã‰∏â‰∏™Èò∂ÊÆµÔºö ÁºñËØëÂô®Â∞Üxxx.javaÊ∫êÊñá‰ª∂ÁºñËØë‰∏∫xxx.classÂ≠óËäÇÁ†ÅÊñá‰ª∂ ClassLoaderÂ∞ÜÂ≠óËäÇÁ†ÅËΩ¨Êç¢‰∏∫JVMÁßçÁöÑClass&lt;xxx&gt;ÂØπË±° JVMÂà©Áî®Class&lt;xxx&gt;ÂØπË±°ÂÆû‰æãÂåñ‰∏∫xxxÂØπË±° ‰∏Ä„ÄÅJVMÁ≥ªÁªüÁªìÊûÑ ClassLoaderÔºö‰æùÊçÆÁâπÂÆöÊ†ºÂºèÔºåÂä†ËΩΩclassÊñá‰ª∂Âà∞ÂÜÖÂ≠ò Execution EngineÔºöÂØπÂëΩ‰ª§ËøõË°åËß£Êûê Native InterfaceÔºöËûçÂêà‰∏çÂêåÂºÄÂèëËØ≠Ë®ÄÁöÑÂéüÁîüÂ∫ì‰∏∫JavaÊâÄÁî® Runtime Data AreaÔºöJVMÂÜÖÂ≠òÁ©∫Èó¥ÁªìÊûÑÊ®°Âûã È¶ñÂÖàÈÄöËøáClassLoaderÂä†ËΩΩÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂ≠óËäÇÁ†ÅÊñá‰ª∂Âà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÈÄöËøáExecution EngineËß£ÊûêÂ≠óËäÇÁ†ÅÊåá‰ª§Ôºå‰∫§Áî±Êìç‰ΩúÁ≥ªÁªüÂéªÊâßË°å„ÄÇ ‰∫å„ÄÅ‰ªÄ‰πàÊòØClassLoader ClassLoaderÂú®java‰∏≠ÊúâÁùÄÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰ΩúÁî®ÔºåÂÆÉ‰∏ªË¶ÅÂ∑•‰ΩúÂú®ClassË£ÖËΩΩÁöÑÂä†ËΩΩÈò∂ÊÆµÔºåÂÖ∂‰∏ªË¶Å‰ΩúÁî®ÊòØ‰ªéÁ≥ªÁªüÂ§ñÈÉ®Ëé∑ÂæóClass‰∫åËøõÂà∂Êï∞ÊçÆÊµÅ„ÄÇ‰ªñÊòØJAVAÁöÑÊ†∏ÂøÉÁªÑ‰ª∂ÔºåÊâÄÊúâÁöÑClassÈÉΩÊòØÁî±ClassLoaderËøõË°åÂä†ËΩΩÁöÑÔºåClassLoaderË¥üË¥£ÈÄöËøáÂ∞ÜClassÊñá‰ª∂ÈáåÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÊµÅË£ÖËΩΩËøõÁ≥ªÁªüÔºåÁÑ∂Âêé‰∫§ÁªôJAVAËôöÊãüÊú∫ËøõË°åËøûÊé•„ÄÅÂàùÂßãÂåñÁ≠âÊìç‰Ωú„ÄÇ ÁÆÄËÄåË®Ä‰πãÔºåÂ∞±ÊòØÂä†ËΩΩÂ≠óËäÇÁ†ÅÊñá‰ª∂„ÄÇ Êàë‰ª¨ÁøªÂºÄClassLoaderÊ∫êÁ†ÅÁúãÁúãÔºö 1public abstract class ClassLoader &#123;...&#125; ÂÆÉÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºå‰∏ãÈù¢Êàë‰ª¨ÂÜçÊù•ËØ¥ÂÖ∑‰ΩìÁöÑÂÆûÁé∞Á±ª„ÄÇ ÈáåÈù¢ÊØîËæÉÈáçË¶ÅÁöÑÊòØloadClass()ÊñπÊ≥ïÔºö 123public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123; return loadClass(name, false);&#125; Â∞±ÊòØÊ†πÊçÆnameÊù•Âä†ËΩΩÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºåËøîÂõûClassÂÆû‰æãÔºåÂä†ËΩΩ‰∏çÂà∞ÂàôÊäõÂá∫ClassNotFoundExceptionÂºÇÂ∏∏„ÄÇ ‰∏â„ÄÅClassLoaderÁöÑÁßçÁ±ª ÂêØÂä®Á±ªÂä†ËΩΩÂô®ÔºàBootstrap ClassLoaderÔºâÔºöÁî±C++ËØ≠Ë®ÄÂÆûÁé∞ÔºàÈíàÂØπHotSpotÔºâ,Âä†ËΩΩÊ†∏ÂøÉÂ∫ìjava.*„ÄÇ Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®ÔºàExtension ClassLoaderÔºâÔºöJavaÁºñÂÜôÔºåÂä†ËΩΩÊâ©Â±ïÂ∫ìjavax.* ÂÆÉÊâ´ÊèèÁöÑÊòØÂì™‰∏™Ë∑ØÂæÑÂë¢Ôºü Êàë‰ª¨ÁúãÂà∞ÔºåÂÆÉË¥üË¥£Â∞Ü &lt;JAVA_HOME &gt;/lib/extÊàñËÄÖÁî±Á≥ªÁªüÂèòÈáè-Djava.ext.dirÊåáÂÆö‰ΩçÁΩÆ‰∏≠ÁöÑÁ±ªÂ∫ì Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇ Â∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô®ÔºàApplication ClassLoaderÔºâÔºöJavaÁºñÂÜôÔºåÂä†ËΩΩÁ®ãÂ∫èÊâÄÂú®ÁõÆÂΩï ÂÆÉË¥üË¥£Â∞Ü Áî®Êà∑Á±ªË∑ØÂæÑ(java -classpathÊàñ-Djava.class.pathÂèòÈáèÊâÄÊåáÁöÑÁõÆÂΩïÔºåÂç≥ÂΩìÂâçÁ±ªÊâÄÂú®Ë∑ØÂæÑÂèäÂÖ∂ÂºïÁî®ÁöÑÁ¨¨‰∏âÊñπÁ±ªÂ∫ìÁöÑË∑ØÂæÑÔºåÁúãÊà™ÂõæÁöÑÊúÄÂêé‰∏ÄË°åÔºåÊòæÁ§∫ÁöÑÊòØÂΩìÂâçÈ°πÁõÆË∑ØÂæÑ„ÄÇ Ëá™ÂÆö‰πâClassLoaderÔºöËá™ÂÆö‰πâ Âõõ„ÄÅÂ¶Ç‰ΩïËá™ÂÆö‰πâClassLoader Ë¶ÅËá™Â∑±ÂÆûÁé∞‰∏Ä‰∏™ClassLoaderÔºåÂÖ∂Ê†∏ÂøÉÊ∂âÂèä‰∏§‰∏™ÊñπÊ≥ïÔºö 123456789protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123; throw new ClassNotFoundException(name);&#125;protected final Class&lt;?&gt; defineClass(byte[] b, int off, int len) throws ClassFormatError&#123; return defineClass(null, b, off, len, null);&#125; È¶ñÂÖàÊÉ≥‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàÊòØËøô‰∏§‰∏™Á±ªÔºü ÂÖ∂ÂÆûÁ≠îÊ°àÂú®loadClass()Ëøô‰∏™ÊñπÊ≥ïÈáåÈù¢„ÄÇÂ¶ÇÊûúÂ∑≤ÁªèÁÜüÊÇâÂèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑÂêåÂ≠¶ÔºåÈÉΩ‰ºöÁü•ÈÅìÂä†ËΩΩClassÂØπË±°ÊòØÂÖàÂßîÊ¥æÁªôÁà∂‰∫≤ÔºåÁúãÁà∂‰∫≤ÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩÔºåÂ¶ÇÊûúÊ≤°ÊúâÂä†ËΩΩËøáÔºåÂàô‰ªéÊúÄÈ°∂Â±ÇÁà∂‰∫≤ÂºÄÂßãÈÄêÂ±ÇÂæÄ‰∏ãËøõË°åÂä†ËΩΩÔºåËøô‰∏ÄÂùóËØ¶ÁªÜÂú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠Ëß£ÈáäÔºåÊàë‰ª¨ÂÖàËµ∞È©¨ËßÇËä±ÁúãÁúãËøô‰∏™ÁöÑÊ†∏ÂøÉÊñπÊ≥ïÈïøÂï•Ê†∑Ôºö 123456789101112131415161718192021222324252627282930313233343536373839protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException&#123; synchronized (getClassLoadingLock(name)) &#123; //È¶ñÂÖàÁúãÁúãÂΩìÂâçÁ±ªÂä†ËΩΩÂô®ÊòØÂê¶Â∑≤ÁªèÂä†ËΩΩËøáÔºåÊ≤°ÊúâÂàôÂßîÊ¥æÁªôÁà∂‰∫≤Êü•ËØ¢ Class&lt;?&gt; c = findLoadedClass(name); if (c == null) &#123; long t0 = System.nanoTime(); try &#123; if (parent != null) &#123; //Ê≥®ÊÑèÔºåËøôÈáåÊòØÂêÑÈÄíÂΩíÂáΩÊï∞ÔºåÂ¶ÇÊûúÁî±‰∏ãËá≥‰∏äÊü•ËØ¢ÈÉΩÊ≤°ÊúâÂä†ËΩΩËøáÔºåÂàô‰ªé‰∏äËá≥‰∏ãÂ∞ùËØïÂéªÂä†ËΩΩ c = parent.loadClass(name, false); &#125; else &#123; c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; //Â¶ÇÊûúÊâÄÊúâÁ±ªÂä†ËΩΩÂô®ÈÉΩÊ≤°ÊúâÂä†ËΩΩËøáÔºåÂàôÂºÄÂßãÂ∞ùËØï‰ªé‰∏äËÄå‰∏ãÈÄêÁ∫ßÂéªÂä†ËΩΩ if (c == null) &#123; // If still not found, then invoke findClass in order // to find the class. long t1 = System.nanoTime(); //ÂéªÂä†ËΩΩ c = findClass(name); // this is the defining class loader; record the stats sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0); sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1); sun.misc.PerfCounter.getFindClasses().increment(); &#125; &#125; if (resolve) &#123; resolveClass(c); &#125; return c; &#125;&#125; Â¶ÇÊûúÊàë‰ª¨‰∏çÂéªÈáçÂÜôfindClass(name)ÊñπÊ≥ïÔºåÈªòËÆ§ÊòØÁõ¥Êé•ÊäõÂá∫Êâæ‰∏çÂà∞ÁöÑÂºÇÂ∏∏ÔºåÊâÄ‰ª•Êàë‰ª¨Ë¶ÅÂØπËøô‰∏™ÊñπÊ≥ïËøõË°åÈáçÂÜô„ÄÇ Áî±‰∫éÂ≠óËäÇÁ†ÅÊñá‰ª∂ÊòØ‰∏ÄÂ†Ü‰∫åËøõÂà∂ÊµÅÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏Ä‰∏™ÊñπÊ≥ïÊù•Ê†πÊçÆËøô‰∏™‰∫åËøõÂà∂ÊµÅÊù•ÂÆö‰πâÊàê‰∏Ä‰∏™Á±ªÔºåÂç≥defineClass()Ëøô‰∏™ÊñπÊ≥ïÊù•ÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩ„ÄÇ ËØ¥ÁöÑÊØîËæÉÊäΩË±°Ôºå‰∏ãÈù¢Êù•ÁúüÊ≠£ÂÆûË∑µ‰∏ÄÊääÔºÅ ‰∫î„ÄÅÂÆûË∑µËá™ÂÆö‰πâClassLoader È¶ñÂÖàÂÜô‰∏Ä‰∏™Á±ªÔºöRobot.java 12345public class Robot &#123; static &#123; System.out.println("hello , i am a robot!"); &#125;&#125; Âú®ÂØπRobot.javaÁî®javacÁºñËØë‰πãÂêéÂΩ¢ÊàêRobot.classÊñá‰ª∂ÔºåÂ∞±Ë¶ÅÂà†Èô§Êú¨È°πÁõÆ‰∏ãÁöÑËøô‰∏™Robot.javaÊñá‰ª∂ÔºåË¶Å‰∏çÁÑ∂Â∞±‰ºöË¢´AppClassLoaderÁ±ªÂä†ËΩΩÂÖàÂä†ËΩΩ‰∫ÜÔºåËÄåÊó†Ê≥ïÂÜçË¢´Êàë‰ª¨ÁöÑËá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÂÜçÂéªÂä†ËΩΩ„ÄÇËøô‰∏™Robot.classÊñá‰ª∂ÊàëÂ∞±Áõ¥Êé•ÊîæÂà∞Ê°åÈù¢Âéª‰∫Ü„ÄÇË∑ØÂæÑ‰∏∫C:/Users/swg/Desktop/. ÁÑ∂ÂêéÂÆö‰πâ‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑClassLoaderÔºåÊåâÁÖß‰∏äÈù¢ÁöÑÁêÜËÆ∫ÔºåÂè™Ë¶ÅÈáçÂÜôfindClassÂ∞±ÂèØ‰ª•ÊåáÂÆöÂà∞Êüê‰∏™Âú∞ÊñπËé∑ÂèñclassÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºåÊ≠§Êó∂Ëé∑ÂèñÁöÑÊòØ‰∫åËøõÂà∂ÊµÅÊñá‰ª∂ÔºåËΩ¨Êç¢‰∏∫Â≠óËäÇÊï∞ÁªÑÔºåÊúÄÂêéÂÄüÁî®defineClassËé∑ÂèñÁúüÊ≠£ÁöÑClassÂØπË±°„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class MyClassLoader extends ClassLoader&#123; //ÊâßË°åÂä†ËΩΩÁöÑclassÊñá‰ª∂ÁöÑË∑ØÂæÑ private String path; //Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÁöÑÂêçÂ≠ó private String classLoaderName; MyClassLoader(String path,String classLoaderName)&#123; this.path = path; this.classLoaderName = classLoaderName; &#125; //Áî®‰∫éÂØªÊâæÁ±ªÊñá‰ª∂ @Override protected Class findClass(String name)&#123; byte[] b = loadClassData(name); return defineClass(name,b,0,b.length); &#125; //Áî®‰∫éÂä†ËΩΩÁ±ªÊñá‰ª∂ private byte[] loadClassData(String name) &#123; name = path + name + ".class"; InputStream in = null; ByteArrayOutputStream out = null; try&#123; in = new FileInputStream(new File(name)); out = new ByteArrayOutputStream(); int i=0; while ((i = in.read()) != -1)&#123; out.write(i); &#125; &#125;catch (Exception e)&#123; e.printStackTrace(); &#125;finally &#123; try &#123; in.close(); out.close(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; return out.toByteArray(); &#125;&#125; ÊúÄÂêéÊµãËØï‰∏Ä‰∏ãËÉΩ‰∏çËÉΩÁî®Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÂéªÂä†ËΩΩÂà∞RobotÂØπÂ∫îÁöÑClassÂØπË±°Ôºö 12345678public class Test &#123; public static void main(String[] args) throws ClassNotFoundException, IllegalAccessException, InstantiationException &#123; MyClassLoader myClassLoader = new MyClassLoader("C:\\Users\\swg\\Desktop\\","myClassLoader"); Class c = myClassLoader.loadClass("Robot"); System.out.println(c.getClassLoader()); c.newInstance(); &#125;&#125; ÊâìÂç∞ÁªìÊûúÔºö 12MyClassLoader@677327b6hello , i am a robot! Â•Ω‰∫ÜÔºåÂ≠¶‰π†‰∫ÜÂÖ≥‰∫éClassLoaderÁöÑÂàÜÁ±ª‰ª•ÂèäÂ¶Ç‰ΩïËá™ÂÆö‰πâClassLoaderÔºåÊàë‰ª¨Áü•ÈÅì‰∫ÜÁ±ªÂä†ËΩΩÂô®ÁöÑÂü∫Êú¨ÂÆûÁé∞Ôºå‰∏äÈù¢Ë∞àÂà∞‰∫Ü‰∏Ä‰∏™ÈáçË¶ÅÊñπÊ≥ïÊòØloadClassÔºåËøôÂ∞±Ê∂âÂèä‰∫ÜÁ±ªÂä†ËΩΩÂô®ÁöÑÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã„ÄÇ‰∏ã‰∏ÄËäÇ‰ªé‰ª£Á†ÅÂ±ÇÈù¢Â•ΩÂ•ΩÊù•ËØ¥ËØ¥Ëøô‰∏™ÔºåÂÖ∂ÂÆûÂæàÁÆÄÂçï„ÄÇ]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019Âπ¥Â±ïÊúõ]]></title>
    <url>%2F2019%2F02%2F05%2Fsuibi%2F2019%E5%B9%B4%E5%B1%95%E6%9C%9B%2F</url>
    <content type="text"><![CDATA[‰ªäÂ§©ÊòØÂ§ßÂπ¥Âàù‰∏ÄÔºåÁÆóÊòØÁúüÊ≠£Ê≠•ÂÖ•2019Âπ¥‰∫Ü„ÄÇ‰øùÂ≠òÂá†Âº†ËÄÅÂÆ∂Èó®Âè£ÊãçÁöÑÁÖßÁâáÔºå‰ª•‰ΩúÁ∫™Âøµ„ÄÇ ËÄÅÂÆ∂Ë∂äÊù•Ë∂äÂÜ∑Ê∏ÖÔºåË∂äÊù•Ë∂äËêßÊù°„ÄÇ ‰ªäÂπ¥ÂõõÊúàÂ∫ïÈ°∫Âà©ÊØï‰∏öÁöÑËØùÔºåÂ∞±ÁúüÁöÑÂ∑•‰Ωú‰∫ÜÔºåÂú®Âçó‰∫¨ÔºåÊú¨Áßë+Á†îÁ©∂ÁîüËØª‰∫Ü‰∏ÉÂπ¥‰π¶ÔºåÂä†‰∏äÂ∞èÊó∂ÂÄôÊØèÂπ¥ÊöëÂÅáÈÉΩÊù•Âçó‰∫¨Áé©ÔºåÂØπÂçó‰∫¨ÁöÑÁÜüÊÇâÁöÑÁ®ãÂ∫¶ËøúËøúÂ§ß‰∫éÂÆ∂‰π°ÁõêÂüé„ÄÇ ÊâÄ‰ª•Â∏åÊúõÂèØ‰ª•Âä™ÂäõÔºåÂú®Âçó‰∫¨ËÉΩÊâé‰∏ãÊ†πÔºåÁÑ∂Âêé‰∏ÄÂÆ∂‰∫∫ÂÖ®Êê¨ËøáÂéª„ÄÇ Âú®ÊâæÂ∑•‰ΩúÊñπÈù¢ÔºåÊâæÁöÑÂπ∂‰∏çÁêÜÊÉ≥ÔºåÂèØËÉΩËøòÂú®‰∏çÂ•ΩÁöÑÂá†‰∏™offer‰πã‰∏≠ÈÄâÊã©‰∫ÜÊõ¥‰∏çÂ•ΩÁöÑ‰∏Ä‰∏™ÔºåÂøÉÈáåÁîöÊòØÈöæÂèó„ÄÇ‰∏çËøáÔºåÂá°‰∫ãÈÉΩÊ≤°ÊúâÁªùÂØπÔºåÂæÄÂ•ΩÂ§ÑÂ§öÊÉ≥ÊÉ≥Â∞±Â•Ω‰∫ÜÔºåÂÖ≥ÈîÆËøòÊòØÈù†Ëá™Â∑±Âä™Âäõ„ÄÇ Âú®2018Âπ¥ÔºåÁÆóÊòØÂ≠¶‰π†javaÁöÑËøõÈò∂‰πãÂπ¥ÔºåËá™Â∑±Â≠¶‰π†‰∫ÜÂæàÂ§öÊñ∞ÁöÑÊäÄÊúØÔºå‰πüÂ•ΩÂ•ΩÂú∞Â§ØÂÆû‰∫ÜÂü∫Á°ÄÔºåÊää‰ª•ÂâçÂæàÂ§öÊ®°Á≥äÁöÑÈóÆÈ¢òÊêûÊ∏ÖÊ•ö‰∫ÜÔºåÁ°ÆÂÆûÔºåÂü∫Á°ÄÁúüÁöÑÂ§™ÈáçË¶ÅÁöÑÔºåÂÖâÂ≠¶Êó∂È´¶ÁöÑÊ°ÜÊû∂ÔºåÂèØ‰ª•ÂÜôÂÜôÁÆÄÂçïÁöÑCRUDÂ∫îÁî®ÔºåÊòØËøúËøú‰∏çÂ§üÁöÑÔºåÊàëËßâÂæóÁ®ãÂ∫èÂëòÁöÑÁõÆÊ†áÊòØÂèØ‰ª•ÈÄ†Âá∫Â§ßÂÆ∂ÈÉΩËÆ§ÂèØÂπ∂‰∏î‰πê‰∫é‰ΩøÁî®ÁöÑÂºÄÊ∫ê‰ΩúÂìÅÔºåÊ≤°ÊúâÂ•ΩÁöÑÂü∫Á°ÄÔºå‰æøÊòØÂ§©ÊñπÂ§úË∞≠Ôºå‰πüÂè™ËÉΩÊ∞∏ËøúÂÅö‰∏Ä‰∏™ÊôÆÈÄöÁöÑÁ†ÅÂÜú„ÄÇ ÊâÄ‰ª•ÔºåÊàëÁªôËá™Â∑±ÂÆö‰∏Ä‰∏™‰∏âÂπ¥ÁöÑÁõÆÊ†áÔºå‰∏âÂπ¥‰ª•ÂêéÔºåÊó†ËÆ∫ÊòØÊêûjavaËøòÊòØÊêûÂ§ßÊï∞ÊçÆËøòÊòØÂÖ∂‰ªñÔºåÊàëÂ∏åÊúõËÉΩËææÂà∞‰∏≠È´òÁ∫ßÊ∞¥Âπ≥ÔºåÂú®Ëøô‰∏™Ë°å‰∏öÊñπÂêë‰∏äÊúâËæÉÂ•ΩÁöÑÂü∫Á°ÄÂíåËæÉÊ∑±ÁöÑËÆ§ËØÜ„ÄÇ‰∏∫ÂêéÁª≠Êõ¥È´òÁöÑÂèëÂ±ïÊâì‰∏ãÂùöÂÆûÁöÑÂü∫Á°Ä„ÄÇ ÊàëÂ∏åÊúõÔºågithubÁúüÊ≠£ËÉΩÊàê‰∏∫ÊàëÂá∫ÂèëÁöÑÂú∞ÊñπÔºåÂπ∂‰∏îËÉΩÂ§üËµ∞ÂæàËøú„ÄÇÁäπËÆ∞ÂæóÔºå14Âπ¥Âú®Â§ßÁ•ûÂÆ§ÂèãÁöÑÊé®Ëçê‰∏ãÔºåÊ≥®ÂÜå‰∫ÜgithubÔºå‰ΩÜÊòØÁúüÊ≠£‰ΩøÁî®ËøòÊòØ‰ªéÂéªÂπ¥ÂºÄÂßãÂêß„ÄÇÊâÄ‰ª•ÁîöÊòØÊÉ≠ÊÑßÔºåÂ¶ÇÊûúÊó©‰∏ÄÁÇπ‰∏äË∑ØÔºåËôΩÁÑ∂ËøΩËµ∂‰∏ç‰∏äÂ§ßÁ•ûÁöÑËÑöÊ≠•ÔºàÂ∑≤ÁªèËøõ‰∫ÜgoogleÔºâÔºå‰ΩÜÊòØËøõ‰∏™‰∫åÁ∫øÊØîÂ¶Ç‰∫¨‰∏ú„ÄÅÁæéÂõ¢Á≠âÈÉΩÊòØËΩªËÄåÊòì‰∏æÂêßÔºå‰ΩÜÊòØË∞àËøô‰∫õÁ°ÆÂÆûÊòØÂ∫üËØùÔºåÊ≤°Êúâ‰∫∫ÊúâÂÅáÂ¶Ç„ÄÇ Èô§‰∫ÜÂØπÊú™Êù•‰∏âÂπ¥ÁöÑ‰∏Ä‰∫õÂàùÊ≠•ÊÉ≥Ê≥ï‰πãÂ§ñÔºåÊàëËøòÊòØÂ∏åÊúõÊàë‰∏éÂÆ∂‰∫∫ÈÉΩÊúâ‰∏Ä‰∏™ÂÅ•ÂÅ•Â∫∑Â∫∑ÁöÑË∫´‰ΩìÔºåÊâÄ‰ª•Â∑•‰Ωú‰ª•ÂêéË∫´‰ΩìÁöÑÈîªÁÇºÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑÔºåÂÖ´ÂùóËÖπËÇåÊòØ‰∏çÊåáÊúõ‰∫ÜÔºåËá≥Â∞ëÁà¨Âá†Â±ÇÊ•º‰∏çÁî®ÂñòÂêß„ÄÇ ‰∏ÄÂàáËøòÊòØËßÜÂÆûÈôÖÊÉÖÂÜµËÄåÂÆöÔºå‰ΩÜÊòØÁªàË∫´Â≠¶‰π†ÁöÑ‰ø°ÂøµË¶ÅÂüãËóèÂú®ÂøÉÈáåÔºåËøô‰∏™Êó∂‰ª£‰ª•ÂèäÊú™Êù•ÁöÑÊó∂‰ª£ÔºåÈÄâÊã©‰∫ÜËøô‰∏ÄË°åÔºåÊéâÂ§¥ÂèëÊòØÊ≥®ÂÆöÁöÑ‰∫ÜÔºå‰ΩÜÊòØÂ¶ÇÊûú‰ªÖ‰ªÖ‰ª•ÊéâÂ§¥ÂèëÁöÑ‰ª£‰ª∑ÔºåÂèØ‰ª•ËÆ©ÂÆ∂‰∫∫ËàíËàíÊúçÊúçÔºåÂÅ•ÂÅ•Â∫∑Â∫∑ÔºåÂºÄÂºÄÂøÉÂøÉÁöÑËØùÔºåÈÇ£ÁªôÊàëÂâÉ‰∏™ÂÖâÂ§¥‰πüÊó†Â¶®‰∫Ü„ÄÇ Â∫üËØù‰∏çÂ§öËØ¥‰∫ÜÔºåÊàëË¶ÅÁªßÁª≠ÂÆåÊàêÊú¨Á¨îËÆ∞ÁöÑJVMÈÉ®ÂàÜ‰∫ÜÔºå‰∏çÂøòÂàùÂøÉÔºåÂ•óÁî®ÂñúÂâß‰πãÁéãÁöÑÂè∞ËØçÔºöÂä™ÂäõÔºåÂ•ãÊñóÔºÅ]]></content>
      <tags>
        <tag>ÈöèÁ¨î</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂΩªÂ∫ïÁêÜËß£javaÂèçÂ∞ÑÊú∫Âà∂]]></title>
    <url>%2F2019%2F02%2F04%2Fjava-basic%2F%E5%BD%BB%E5%BA%95%E7%90%86%E8%A7%A3java%E5%8F%8D%E5%B0%84%2F</url>
    <content type="text"><![CDATA[ÂèçÂ∞ÑÊú∫Âà∂Ëøô‰∏ÄÂùó‰πüÊòØÈù¢ËØïÁªèÂ∏∏‰ºöË¢´ÈóÆÂà∞ÁöÑÔºåÊàë‰ªéÂèçÂ∞ÑÁöÑÂü∫Êú¨Ê¶ÇÂøµÂà∞ÂèçÂ∞ÑÁöÑ‰∏Ä‰∫õÈù¢ËØïÈ¢òÂá∫ÂèëÔºåÂ•ΩÂ•ΩÁêÜ‰∏ÄÁêÜÂèçÂ∞ÑÁöÑÁü•ËØÜ„ÄÇ 1. ‰ªÄ‰πàÊòØÂèçÂ∞Ñ Ê†áÂáÜÂÆö‰πâÔºöJAVAÂèçÂ∞ÑÊú∫Âà∂ÊòØÂú®ËøêË°åÁä∂ÊÄÅ‰∏≠ÔºåÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™Á±ªÔºåÈÉΩËÉΩÂ§üÁü•ÈÅìËøô‰∏™Á±ªÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÔºõÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™ÂØπË±°ÔºåÈÉΩËÉΩÂ§üË∞ÉÁî®ÂÆÉÁöÑ‰ªªÊÑèÊñπÊ≥ïÂíåÂ±ûÊÄßÔºõËøôÁßçÂä®ÊÄÅËé∑Âèñ‰ø°ÊÅØ‰ª•ÂèäÂä®ÊÄÅË∞ÉÁî®ÊñπÊ≥ïÁöÑÂäüËÉΩÊàê‰∏∫ÂèçÂ∞ÑÊú∫Âà∂„ÄÇ Ê≥®ÊÑèÂá†‰∏™ÂÖ≥ÈîÆÂ≠óÔºöËøêË°åÁä∂ÊÄÅ‰∏≠ÔºåÂä®ÊÄÅËé∑Âèñ„ÄÇ 2. ClassÂØπË±°ÂíåÂÆû‰æãÂØπË±° ÊÉ≥Ë¶ÅÁêÜËß£ÂèçÂ∞ÑÈ¶ñÂÖàÈúÄË¶ÅÁü•ÈÅìClassËøô‰∏™Á±ªÔºåÂÆÉÁöÑÂÖ®Áß∞ÊòØjava.lang.ClassÁ±ª„ÄÇjavaÊòØÈù¢ÂêëÂØπË±°ÁöÑËØ≠Ë®ÄÔºåËÆ≤Á©∂‰∏áÁâ©ÁöÜÂØπË±°ÔºåÂç≥‰ΩøÂº∫Â§ßÂà∞‰∏Ä‰∏™Á±ªÔºåÂÆÉ‰æùÁÑ∂ÊòØÂè¶‰∏Ä‰∏™Á±ªÔºàClassÁ±ªÔºâÁöÑÂØπË±°ÔºåÊç¢Âè•ËØùËØ¥ÔºåÊôÆÈÄöÁ±ªÊòØClassÁ±ªÁöÑÂØπË±°ÔºåÂç≥ClassÊòØÊâÄÊúâÁ±ªÁöÑÁ±ªÔºàThere is a class named ClassÔºâ„ÄÇ Êàë‰ª¨Áü•ÈÅìjava‰∏ñÁïåÊòØËøêË°åÂú®JVM‰πã‰∏äÁöÑÔºåÊàë‰ª¨ÁºñÂÜôÁöÑÁ±ª‰ª£Á†ÅÔºåÂú®ÁªèËøáÁºñËØëÂô®ÁºñËØë‰πãÂêéÔºå‰ºö‰∏∫ÊØè‰∏™Á±ªÁîüÊàêÂØπÂ∫îÁöÑ.classÊñá‰ª∂ÔºåËøô‰∏™Â∞±ÊòØJVMÂèØ‰ª•Âä†ËΩΩÊâßË°åÁöÑÂ≠óËäÇÁ†Å„ÄÇ ËøêË°åÊó∂ÊúüÈó¥ÔºåÂΩìÊàë‰ª¨ÈúÄË¶ÅÂÆû‰æãÂåñ‰ªª‰Ωï‰∏Ä‰∏™Á±ªÊó∂ÔºåJVM‰ºöÈ¶ñÂÖàÂ∞ùËØïÁúãÁúãÂú®ÂÜÖÂ≠ò‰∏≠ÊòØÂê¶ÊúâËøô‰∏™Á±ªÔºåÂ¶ÇÊûúÊúâÔºåÈÇ£‰πà‰ºöÁõ¥Êé•ÂàõÂª∫Á±ªÂÆû‰æãÔºõÂ¶ÇÊûúÊ≤°ÊúâÔºåÈÇ£‰πàÂ∞±‰ºöÊ†πÊçÆÁ±ªÂêçÂéªÂä†ËΩΩËøô‰∏™Á±ªÔºåÂΩìÂä†ËΩΩ‰∏Ä‰∏™Á±ªÔºåÊàñËÄÖÂΩìÂä†ËΩΩÂô®(class loader)ÁöÑdefineClass()Ë¢´JVMË∞ÉÁî®Ôºå‰æø‰ºö‰∏∫Ëøô‰∏™Á±ª‰∫ßÁîü‰∏Ä‰∏™ClassÂØπË±°Ôºà‰∏Ä‰∏™ClassÁ±ªÁöÑÂÆû‰æãÔºâÔºåÁî®Êù•Ë°®ËææËøô‰∏™Á±ªÔºåËØ•Á±ªÁöÑÊâÄÊúâÂÆû‰æãÈÉΩÂÖ±ÂêåÊã•ÊúâÁùÄËøô‰∏™ClassÂØπË±°ÔºåËÄå‰∏îÊòØÂîØ‰∏ÄÁöÑ„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÂä†ËΩΩ.classÊñá‰ª∂‰πãÂêé‰ºöÁîüÊàê‰∏Ä‰∏™ÂØπÂ∫îÁöÑClassÂØπË±°„ÄÇ‰∏ãÈù¢ËØ¥ËØ¥Â¶Ç‰ΩïËé∑ÂèñËøô‰∏™ClassÂØπË±°„ÄÇ 3. ÂèñÂæóClassÂØπË±°ÁöÑ‰∏âÁßçÊñπÂºè Êàë‰ª¨ÂÅáËÆæÊúâËøô‰πà‰∏Ä‰∏™Á±ªÂè´MyClassÔºö 1public class MyClass &#123; &#125; Á¨¨‰∏ÄÁßçÊñπÂºèÔºöÈÄöËøá‚ÄúÁ±ªÂêç.class‚ÄùÁöÑÊñπÂºèÂèñÂæó 1Class classInstance= MyClass.class; ‰æãÂ¶ÇÔºö 123Class clazz = Car.class;Class cls1 = int.class;Class cls2 = String.class; Á¨¨‰∫åÁßçÊñπÂºèÔºöÈÄöËøáÁ±ªÂàõÂª∫ÁöÑÂÆû‰æãÂØπË±°ÁöÑgetClassÊñπÊ≥ïÂèñÂæó 12MyClass myClass = new MyClass();Class classInstance = myClass.getClass(); Á¨¨‰∏âÁßçÊñπÂºèÔºöÈÄöËøáClassÁ±ªÁöÑÈùôÊÄÅÊñπÊ≥ïforNameÊñπÊ≥ïÂèñÂæóÔºàÂèÇÊï∞ÊòØÂ∏¶ÂåÖÂêçÁöÑÂÆåÊï¥ÁöÑÁ±ªÂêçÔºâ 12345try &#123; Class classInstance = Class.forName("mypackage.MyClass");&#125; catch (ClassNotFoundException e) &#123; e.printStackTrace();&#125; ‰∏äÈù¢‰∏âÁßçÊñπÊ≥ïÂèñÂæóÁöÑÂØπË±°ÈÉΩÊòØÁõ∏ÂêåÁöÑÔºåÊâÄ‰ª•ÊïàÊûú‰∏äÁ≠â‰ª∑„ÄÇ classInstanceÊòØÁ±ªÁ±ªÂûãÔºåÈÄöËøáÁ±ªÁ±ªÂûãÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™Á±ªÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÁ≠âÂèÇÊï∞ÔºåËøôÊòØÂèçÂ∞ÑÁöÑÂü∫Á°Ä„ÄÇ 4. Âà©Áî®ÂèçÂ∞ÑAPIÂÖ®Èù¢ÂàÜÊûêÁ±ªÁöÑ‰ø°ÊÅØ‚Äî‚ÄîÊñπÊ≥ïÔºåÊàêÂëòÂèòÈáèÔºåÊûÑÈÄ†Âô® ÂèçÂ∞ÑÁöÑ‰∏ÄÂ§ß‰ΩúÁî®ÊòØÁî®‰∫éÂàÜÊûêÁ±ªÁöÑÁªìÊûÑÔºåÊàñËÄÖËØ¥Áî®‰∫éÂàÜÊûêÂíåËøô‰∏™Á±ªÊúâÂÖ≥ÁöÑÊâÄÊúâ‰ø°ÊÅØ„ÄÇËÄåËøô‰∫õ‰ø°ÊÅØÂ∞±ÊòØÁ±ªÁöÑÂü∫Êú¨ÁöÑÁªÑÊàêÔºö ÊñπÊ≥ïÔºåÊàêÂëòÂèòÈáèÂíåÊûÑÈÄ†Âô®„ÄÇ Âú®javaÁßç‰∏áÁâ©ÁöÜÂØπË±°Ôºå‰∏Ä‰∏™Á±ª‰∏≠ÁöÑÊñπÊ≥ïÔºåÊàêÂëòÂèòÈáèÂíåÊûÑÈÄ†Âô®‰πüÂàÜÂà´ÂØπÂ∫îÁùÄ‰∏Ä‰∏™ÂØπË±° ÊØè‰∏™ÊñπÊ≥ïÈÉΩÂØπÂ∫îÊúâ‰∏Ä‰∏™‰øùÂ≠òÂíåËØ•ÊñπÊ≥ïÊúâÂÖ≥‰ø°ÊÅØÁöÑMethodÂØπË±°Ôºå Ëøô‰∏™ÂØπË±°ÊâÄÂ±ûÁöÑÁ±ªÊòØjava.lang.reflect.Method; ÊØè‰∏™ÊàêÂëòÂèòÈáèÈÉΩÂØπÂ∫îÊúâ‰∏Ä‰∏™‰øùÂ≠òÂíåËØ•ÂèòÈáèÊúâÂÖ≥‰ø°ÊÅØÁöÑFieldÂØπË±°ÔºåËøô‰∏™ÂØπË±°ÊâÄÂ±ûÁöÑÁ±ªÊòØ java.lang.reflect.Field ÊØè‰∏™ÊûÑÈÄ†Âô®ÈÉΩÂØπÂ∫îÊúâ‰∏Ä‰∏™‰øùÂ≠òÂíåËØ•ÊûÑÈÄ†Âô®ÊúâÂÖ≥‰ø°ÊÅØÁöÑConstructorÂØπË±°ÔºåËøô‰∏™ÂØπË±°ÊâÄÂ±ûÁöÑÁ±ªÊòØjava.lang.reflect.Constructor ÂÅáËÆæcÊòØ‰∏Ä‰∏™Á±ªÁöÑClassÂØπË±°Ôºö ÈÄöËøá c.getDeclaredMethods()ÂèØÂèñÂæóËøô‰∏™Á±ª‰∏≠ÊâÄÊúâÂ£∞ÊòéÊñπÊ≥ïÂØπÂ∫îÁöÑMethodÂØπË±°ÁªÑÊàêÁöÑÊï∞ÁªÑ ÈÄöËøá c.getDeclaredFields()ÂèØÂèñÂæóËøô‰∏™Á±ª‰∏≠ÊâÄÊúâÂ£∞ÊòéÁöÑÊàêÂëòÂèòÈáèÂØπÂ∫îÁöÑFieldÂØπË±°ÁªÑÊàêÁöÑÊï∞ÁªÑ ÈÄöËøá c.getConstructors(); ÂèØÂèñÂæóËøô‰∏™Á±ª‰∏≠ÊâÄÊúâÊûÑÈÄ†ÂáΩÊï∞ÊâÄÂØπÂ∫îÁöÑConstructorÂØπË±°ÊâÄÁªÑÊàêÁöÑÊï∞ÁªÑ 1234567Method [] methods = c.getDeclaredMethods(); // Ëé∑ÂèñÊñπÊ≥ïÂØπË±°ÂàóË°® Field [] fields = c.getDeclaredFields(); // Ëé∑ÂèñÊàêÂëòÂèòÈáèÂØπË±°ÂàóË°®Constructor [] constructors = c.getConstructors(); // Ëé∑ÂèñÊûÑÈÄ†ÂáΩÊï∞ÂØπË±°ÂàóË°®xxx.getName()Â∞±ÂèØ‰ª•ÊâìÂç∞Âá∫ÂØπÂ∫îÁöÑÂêçÂ≠ó‰∫Ü„ÄÇ 5. Êõ¥Â§öÁöÑÂèçÂ∞Ñapi getMethodsÂíågetDeclaredMethodsÊñπÊ≥ï getMethodsÂèñÂæóÁöÑmethodÂØπÂ∫îÁöÑÊñπÊ≥ïÂåÖÊã¨‰ªéÁà∂Á±ª‰∏≠ÁªßÊâøÁöÑÈÇ£‰∏ÄÈÉ®ÂàÜÔºåËÄå getDeclaredMethodsÂèñÂæóÁöÑmethodÂØπÂ∫îÁöÑÊñπÊ≥ï‰∏çÂåÖÊã¨‰ªéÁà∂Á±ª‰∏≠ÁªßÊâøÁöÑÈÇ£‰∏ÄÈÉ®ÂàÜ ‰∏Ä‰∏™ÊôÆÈÄöÁöÑÁ±ªÔºå‰ªñ‰ª¨ÁöÑÂü∫Á±ªÈÉΩÊòØObjectÔºåÈÇ£‰πàÂ¶ÇÊûúÁî®getMethodsÔºåÈÅçÂéÜÂæóÂà∞ÁöÑÁªìÊûúÔºå‰ºöÂèëÁé∞Object‰∏≠ÁöÑÂü∫Á°ÄÊñπÊ≥ïÂêçÈÉΩ‰ºöË¢´ÊâìÂç∞Âá∫Êù•„ÄÇ ËØ∏Â¶Çwait(),equals(),toString(),getClass(), notify(),notifyAll(),hashCode()Á≠âÁ≠â„ÄÇ ÈÄöËøámethod.getReturnType()Ëé∑ÂèñÊñπÊ≥ïËøîÂõûÂÄºÂØπÂ∫îÁöÑClassÂØπË±° 12Class returnClass = method.getReturnType(); // Ëé∑ÂèñÊñπÊ≥ïËøîÂõûÂÄºÂØπÂ∫îÁöÑClassÂØπË±°String returnName = returnClass.getName(); //Ëé∑ÂèñËøîÂõûÂÄºÊâÄÂ±ûÁ±ªÁöÑÁ±ªÂêç‚Äî‚Äî‰πüÂç≥ËøîÂõûÂÄºÁ±ªÂûã ÈÄöËøámethod.getParameterTypes()Ëé∑ÂèñÊñπÊ≥ïÂêÑÂèÇÊï∞ÁöÑClassÂØπË±°ÁªÑÊàêÁöÑÊï∞ÁªÑ 12345Class [] paramsClasses = method.getParameterTypes();for (Class pc: paramsClasses) &#123; String paramStr = pc.getName(); // Ëé∑ÂèñÂΩìÂâçÂèÇÊï∞Á±ªÂûã paramsStr+=paramStr + " ";&#125; Ëé∑ÂèñÊàêÂëòÂèòÈáèÁ±ªÂûãÂØπÂ∫îÁöÑÁöÑClassÂØπË±° 123Field field = c.getDeclaredField("name"); // ÂèñÂæóÂêçÁß∞‰∏∫nameÁöÑfieldÂØπË±°field.setAccessible(true); // Ëøô‰∏ÄÊ≠•ÂæàÈáçË¶ÅÔºÅÔºÅÔºÅËÆæÁΩÆ‰∏∫trueÊâçËÉΩËÆøÈóÆÁßÅÊúâÊàêÂëòÂèòÈáènameÁöÑÂÄºÔºÅString nameValue = (String) field.get(obj); // Ëé∑Âèñobj‰∏≠nameÊàêÂëòÂèòÈáèÁöÑÂÄº ÈÄöËøágetTypeÊñπÊ≥ïËØªÂèñÊàêÂëòÂèòÈáèÁ±ªÂûãÁöÑClassÂØπË±° 12Field field = class1.getDeclaredField(number");System.out.print(field.getType().getName()); Âõ†‰∏∫javaÊùÉÈôêÁöÑÂéüÂõ†ÔºåÁõ¥Êé•ËØªÂèñÁßÅÊúâÊàêÂëòÂèòÈáèÁöÑÂÄºÊòØÈùûÊ≥ïÁöÑÔºàÂä†‰∫Üfield.setAccessible(true)ÂêéÂ∞±ÂèØ‰ª•‰∫ÜÔºâÔºå‰ΩÜ‰ªçÂèØ‰ª•Áõ¥Êé•ËØªÂèñÁßÅÊúâÊàêÂëòÂèòÈáèÁöÑÁ±ªÂûã Âà©Áî®ÂèçÂ∞ÑAPIÂàÜÊûêÁ±ª‰∏≠ÊûÑÈÄ†Âô®‰ø°ÊÅØ 123public class MyClass &#123; public MyClass(int a, String str)&#123;&#125;&#125; 12345678910111213public static void printContructorsMessage (Object obj) &#123;Class c = obj.getClass(); // ÂèñÂæóobjÊâÄÂ±ûÁ±ªÂØπÂ∫îÁöÑClassÂØπË±°Constructor [] constructors = c.getDeclaredConstructors();for (Constructor constructor : constructors) &#123; Class [] paramsClasses = constructor.getParameterTypes(); String paramsStr = ""; for (Class pc : paramsClasses) &#123; String paramStr = pc.getName(); paramsStr+=paramStr + " "; &#125; System.out.println("ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊâÄÊúâÂèÇÊï∞ÁöÑÁ±ªÂûãÂàóË°®Ôºö" + paramsStr);&#125;&#125; ËøêË°åÁªìÊûúÔºö 1ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊâÄÊúâÂèÇÊï∞ÁöÑÁ±ªÂûãÂàóË°®Ôºöint java.lang.String 6. Âà©Áî®ÂèçÂ∞ÑÂä®ÊÄÅÂä†ËΩΩÁ±ªÔºåÂπ∂Áî®ËØ•Á±ªÂàõÂª∫ÂÆû‰æãÂØπË±° Êàë‰ª¨Áî®ÊôÆÈÄöÁöÑÊñπÂºè‰ΩøÁî®‰∏Ä‰∏™Á±ªÁöÑÊó∂ÂÄôÔºåÁ±ªÊòØÈùôÊÄÅÂä†ËΩΩÁöÑ ÔºåËÄå‰ΩøÁî®Class.forName(‚ÄúXXX‚Äù)ËøôÁßçÊñπÂºèÔºåÂàôÂ±û‰∫éÂä®ÊÄÅÂä†ËΩΩ‰∏Ä‰∏™Á±ª ÈùôÊÄÅÂä†ËΩΩÁöÑÁ±ªÂú®ÁºñËØëÁöÑÊó∂ÂÄôÂ∞±ËÉΩÁ°ÆÂÆöËØ•Á±ªÊòØÂê¶Â≠òÂú®Ôºå‰ΩÜÂä®ÊÄÅÂä†ËΩΩ‰∏Ä‰∏™Á±ªÁöÑÊó∂ÂÄôÂç¥Êó†Ê≥ïÂú®ÁºñËØëÈò∂ÊÆµÁ°ÆÂÆöÊòØÂê¶Â≠òÂú®ËØ•Á±ªÔºåËÄåÊòØÂú®ËøêË°åÊó∂ÂÄôÊâçËÉΩÂ§üÁ°ÆÂÆöÊòØÂê¶ÊúâËøô‰∏™Á±ªÔºåÊâÄ‰ª•Ë¶ÅÊçïÊçâÂèØËÉΩÂèëÁîüÁöÑÂºÇÂ∏∏. ClassÂØπË±°Êúâ‰∏Ä‰∏™newInstanceÊñπÊ≥ïÔºåÊàë‰ª¨ÂèØ‰ª•Áî®ÂÆÉÊù•ÂàõÂª∫ÂÆû‰æãÂØπË±° 12Class classInstance = Class.forName("mypackage.MyClass");MyClass myClass = (MyClass) classInstance.newInstance(); 7. ÊÄªÁªì ÂèçÂ∞Ñ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂÖ®Èù¢ÁöÑÂàÜÊûêÁ±ª‰ø°ÊÅØÁöÑËÉΩÂäõÔºå‰æãÂ¶ÇÁ±ªÁöÑÊñπÊ≥ïÔºåÊàêÂëòÂèòÈáèÂíåÊûÑÈÄ†Âô®Á≠âÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÂèçÂ∞ÑËÉΩÂ§üËÆ©Êàë‰ª¨ÂæàÊñπ‰æøÁöÑËé∑ÂèñËøô‰∫õ‰ø°ÊÅØÔºå ËÄåÂÆûÁé∞Ëøô‰∏™Ëé∑ÂèñËøáÁ®ãÁöÑÂÖ≥ÈîÆÊòØÂèñÂæóÁ±ªÁöÑClassÂØπË±°ÔºåÁÑ∂ÂêéÊ†πÊçÆClassÂØπË±°ÂèñÂæóÁõ∏Â∫îÁöÑMethodÂØπË±°ÔºåFieldÂØπË±°ÂíåConstructorÂØπË±°ÔºåÂÜçÂàÜÂà´Ê†πÊçÆÂêÑËá™ÁöÑAPIÂèñÂæó‰ø°ÊÅØ„ÄÇ ÂèçÂ∞ÑËøò‰∏∫Êàë‰ª¨Êèê‰æõÂä®ÊÄÅÂä†ËΩΩÁ±ªÁöÑËÉΩÂäõ API‰∏≠getDeclaredXXXÂíågetXXXÁöÑÂå∫Âà´Âú®‰∫éÂâçËÄÖÂè™Ëé∑ÂèñÊú¨Á±ªÂ£∞ÊòéÁöÑXXXÔºàÂ¶ÇÊàêÂëòÂèòÈáèÊàñÊñπÊ≥ïÔºâÔºåËÄå‰∏çËé∑ÂèñË∂ÖÁ±ª‰∏≠ÁªßÊâøÁöÑXXXÔºå ÂêéËÄÖÈÉΩÂèØ‰ª•Ëé∑Âèñ API‰∏≠Ôºå getXXXsÔºàÊ≥®ÊÑèÂêéÈù¢ÁöÑsÔºâËøîÂõûÁöÑÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºå ËÄåÂØπÂ∫îÁöÑ getXXXÔºà‚ÄúÈîÆ‚ÄùÔºâÊåâÈîÆËé∑Âèñ‰∏Ä‰∏™ÂÄºÔºàËøô‰∏™Êó∂ÂÄôÂõ†‰∏∫ÂèØËÉΩÊä•Â∑≤Ê£ÄÊü•ÂºÇÂ∏∏ÊâÄ‰ª•Ë¶ÅÁî®try*catchËØ≠Âè•ÂåÖË£πÔºâ ÁßÅÊúâÊàêÂëòÂèòÈáèÊòØ‰∏çËÉΩÁõ¥Êé•Ëé∑ÂèñÂà∞ÂÄºÁöÑÔºÅÂõ†‰∏∫javaÊú¨Ë∫´ÁöÑ‰øùÊä§Êú∫Âà∂ÔºåÂÖÅËÆ∏‰Ω†ÂèñÂæóÁßÅÊúâÊàêÂëòÂèòÈáèÁöÑÁ±ªÂûãÔºå‰ΩÜÊòØ‰∏çÂÖÅËÆ∏Áõ¥Êé•Ëé∑ÂèñÂÄºÔºåÊâÄ‰ª•Ë¶ÅÂØπÂØπÂ∫îÁöÑfieldÂØπË±°Ë∞ÉÁî®field.setAccessible(true) ÊîæÂºÄÊùÉÈôê 8. Èù¢ËØï ‰ªÄ‰πàÊòØÂèçÂ∞Ñ ÂèçÂ∞ÑÊòØ‰∏ÄÁßçËÉΩÂ§üÂú®Á®ãÂ∫èËøêË°åÊó∂Âä®ÊÄÅËÆøÈóÆ„ÄÅ‰øÆÊîπÊüê‰∏™Á±ª‰∏≠‰ªªÊÑèÂ±ûÊÄßÔºàÁä∂ÊÄÅÔºâÂíåÊñπÊ≥ïÔºàË°å‰∏∫ÔºâÁöÑÊú∫Âà∂ ÂèçÂ∞ÑÂà∞Â∫ïÊúâ‰ªÄ‰πàÂÖ∑‰ΩìÁöÑÁî®Â§Ñ Êìç‰ΩúÂõ†ËÆøÈóÆÊùÉÈôêÈôêÂà∂ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºõ ÂÆûÁé∞Ëá™ÂÆö‰πâÊ≥®Ëß£Ôºõ Âä®ÊÄÅÂä†ËΩΩÁ¨¨‰∏âÊñπjarÂåÖÔºåËß£ÂÜ≥androidÂºÄÂèë‰∏≠ÊñπÊ≥ïÊï∞‰∏çËÉΩË∂ÖËøá65536‰∏™ÁöÑÈóÆÈ¢òÔºõ ÊåâÈúÄÂä†ËΩΩÁ±ªÔºåËäÇÁúÅÁºñËØëÂíåÂàùÂßãÂåñAPKÁöÑÊó∂Èó¥Ôºõ ÂèçÂ∞ÑÁöÑÂéüÁêÜÊòØ‰ªÄ‰πà ÂΩìÊàë‰ª¨ÁºñÂÜôÂÆå‰∏Ä‰∏™JavaÈ°πÁõÆ‰πãÂêéÔºåÊØè‰∏™javaÊñá‰ª∂ÈÉΩ‰ºöË¢´ÁºñËØëÊàê‰∏Ä‰∏™.classÊñá‰ª∂ÔºåËøô‰∫õClassÂØπË±°ÊâøËΩΩ‰∫ÜËøô‰∏™Á±ªÁöÑÊâÄÊúâ‰ø°ÊÅØÔºåÂåÖÊã¨Áà∂Á±ª„ÄÅÊé•Âè£„ÄÅÊûÑÈÄ†ÂáΩÊï∞„ÄÅÊñπÊ≥ï„ÄÅÂ±ûÊÄßÁ≠âÔºåËøô‰∫õclassÊñá‰ª∂Âú®Á®ãÂ∫èËøêË°åÊó∂‰ºöË¢´ClassLoaderÂä†ËΩΩÂà∞ËôöÊãüÊú∫‰∏≠„ÄÇÂΩì‰∏Ä‰∏™Á±ªË¢´Âä†ËΩΩ‰ª•ÂêéÔºåJavaËôöÊãüÊú∫Â∞±‰ºöÂú®ÂÜÖÂ≠ò‰∏≠Ëá™Âä®‰∫ßÁîü‰∏Ä‰∏™ClassÂØπË±°„ÄÇÊàë‰ª¨ÈÄöËøánewÁöÑÂΩ¢ÂºèÂàõÂª∫ÂØπË±°ÂÆûÈôÖ‰∏äÂ∞±ÊòØÈÄöËøáËøô‰∫õClassÊù•ÂàõÂª∫ÔºåÂè™ÊòØËøô‰∏™ËøáÁ®ãÂØπ‰∫éÊàë‰ª¨ÊòØÈÄèÊòéÁöÑËÄåÂ∑≤„ÄÇ ÂèçÂ∞ÑÁöÑÂ∑•‰ΩúÂéüÁêÜÂ∞±ÊòØÂÄüÂä©Class.java„ÄÅConstructor.java„ÄÅ Method.java„ÄÅField.javaËøôÂõõ‰∏™Á±ªÂú®Á®ãÂ∫èËøêË°åÊó∂Âä®ÊÄÅËÆøÈóÆÂíå‰øÆÊîπ‰ªª‰ΩïÁ±ªÁöÑË°å‰∏∫ÂíåÁä∂ÊÄÅ„ÄÇ Â¶Ç‰ΩïËé∑ÂèñClassÂØπË±° ClassÁöÑforName()ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÂ∞±ÊòØClassÁ±ªÂûãÔºå‰πüÂ∞±ÊòØÂä®ÊÄÅÂØºÂÖ•Á±ªÁöÑClassÂØπË±°ÁöÑÂºïÁî® 1public static Class&lt;?&gt; forName(String className) throws ClassNotFoundException ÊØè‰∏™Á±ªÈÉΩ‰ºöÊúâ‰∏Ä‰∏™ÂêçÁß∞‰∏∫ClassÁöÑÈùôÊÄÅÂ±ûÊÄßÔºåÈÄöËøáÂÆÉ‰πüÊòØÂèØ‰ª•Ëé∑ÂèñÂà∞ClassÂØπË±° 1Class&lt;Student&gt; clazz = Student.class; ObjectÁ±ª‰∏≠Êúâ‰∏Ä‰∏™Âêç‰∏∫getClassÁöÑÊàêÂëòÊñπÊ≥ïÔºåÂÆÉËøîÂõûÁöÑÊòØÂØπË±°ÁöÑËøêË°åÊó∂Á±ªÁöÑClassÂØπË±°„ÄÇÂõ†‰∏∫ObjectÁ±ªÊòØÊâÄÊúâÁ±ªÁöÑÁà∂Á±ªÔºåÊâÄ‰ª•ÔºåÊâÄÊúâÁöÑÂØπË±°ÈÉΩÂèØ‰ª•‰ΩøÁî®ËØ•ÊñπÊ≥ïÂæóÂà∞ÂÆÉËøêË°åÊó∂Á±ªÁöÑClassÂØπË±° 12Student stu = new Student();Class&lt;Student&gt; clazz = stu.getClass(); ÂèçÂ∞ÑÁöÑÁâπÁÇπ ‰ºòÁÇπ ÁÅµÊ¥ª„ÄÅËá™Áî±Â∫¶È´òÔºö‰∏çÂèóÁ±ªÁöÑËÆøÈóÆÊùÉÈôêÈôêÂà∂ÔºåÊÉ≥ÂØπÁ±ªÂÅöÂï•Â∞±ÂÅöÂï• Áº∫ÁÇπ ÊÄßËÉΩÈóÆÈ¢ò ÈÄöËøáÂèçÂ∞ÑËÆøÈóÆ„ÄÅ‰øÆÊîπÁ±ªÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÊó∂‰ºöËøúÊÖ¢‰∫éÁõ¥Êé•Êìç‰ΩúÔºå‰ΩÜÊÄßËÉΩÈóÆÈ¢òÁöÑ‰∏•ÈáçÁ®ãÂ∫¶ÂèñÂÜ≥‰∫éÂú®Á®ãÂ∫è‰∏≠ÊòØÂ¶Ç‰Ωï‰ΩøÁî®ÂèçÂ∞ÑÁöÑ„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÂæóÂæàÂ∞ëÔºå‰∏çÊòØÂæàÈ¢ëÁπÅÔºåÊÄßËÉΩÂ∞Ü‰∏ç‰ºöÊòØ‰ªÄ‰πàÈóÆÈ¢òÔºõ ÂÆâÂÖ®ÊÄßÈóÆÈ¢ò ÂèçÂ∞ÑÂèØ‰ª•ÈöèÊÑèËÆøÈóÆÂíå‰øÆÊîπÁ±ªÁöÑÊâÄÊúâÁä∂ÊÄÅÂíåË°å‰∏∫ÔºåÁ†¥Âùè‰∫ÜÁ±ªÁöÑÂ∞ÅË£ÖÊÄßÔºåÂ¶ÇÊûú‰∏çÁÜüÊÇâË¢´ÂèçÂ∞ÑÁ±ªÁöÑÂÆûÁé∞ÂéüÁêÜÔºåÈöèÊÑè‰øÆÊîπÂèØËÉΩÂØºËá¥ÊΩúÂú®ÁöÑÈÄªËæëÈóÆÈ¢òÔºõ Â¶Ç‰ΩïÊèêÈ´òÂèçÂ∞ÑÊÄßËÉΩ javaÂ∫îÁî®ÂèçÂ∞ÑÁöÑÊó∂ÂÄôÔºåÊÄßËÉΩÂæÄÂæÄÊòØjavaÁ®ãÂ∫èÂëòÊãÖÂøÉÁöÑÂú∞ÊñπÔºåÈÇ£‰πàÂú®Â§ßÈáèËøêÁî®ÂèçÂ∞ÑÁöÑÊó∂ÂÄôÔºåÊÄßËÉΩÁöÑÂæÆÂº±ÊèêÂçáÔºåÂØπËøô‰∏™Á≥ªÁªüËÄåË®ÄÈÉΩÊòØÂ¶ÇÊó±Âú∞ÈÄ¢ÁîòÈúñ„ÄÇ setAccessible(true),ÂèØ‰ª•Èò≤Ê≠¢ÂÆâÂÖ®ÊÄßÊ£ÄÊü•ÔºàÂÅöËøô‰∏™ÂæàË¥πÊó∂Ôºâ ÂÅöÁºìÂ≠òÔºåÊääË¶ÅÁªèÂ∏∏ËÆøÈóÆÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÊîæÂÖ•ÂÜÖÂ≠ò‰∏≠Ôºåclass.forName Â§™ËÄóÊó∂ getMethods() Á≠âÊñπÊ≥ïÂ∞ΩÈáèÂ∞ëÁî®ÔºåÂ∞ΩÈáèË∞ÉÁî®getMethod(name)ÊåáÂÆöÊñπÊ≥ïÁöÑÂêçÁß∞ÔºåÂáèÂ∞ëÈÅçÂéÜÊ¨°Êï∞ javaÈù¢ËØï‰∏≠Èù¢ËØïÂÆòËÆ©‰Ω†ËÆ≤ËÆ≤ÂèçÂ∞ÑÔºåÂ∫îËØ•‰ªé‰ΩïËÆ≤Ëµ∑Ôºü ÂÖàËÆ≤ÂèçÂ∞ÑÊú∫Âà∂ÔºåÂèçÂ∞ÑÂ∞±ÊòØÁ®ãÂ∫èËøêË°åÊúüÈó¥JVM‰ºöÂØπ‰ªªÊÑè‰∏Ä‰∏™Á±ªÊ¥ûÊÇâÂÆÉÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåÂØπ‰ªªÊÑè‰∏Ä‰∏™ÂØπË±°ÈÉΩËÉΩÂ§üËÆøÈóÆÂÆÉÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ï„ÄÇ‰æùÈù†Ê≠§Êú∫Âà∂ÔºåÂèØ‰ª•Âä®ÊÄÅÁöÑÂàõÂª∫‰∏Ä‰∏™Á±ªÁöÑÂØπË±°ÂíåË∞ÉÁî®ÂØπË±°ÁöÑÊñπÊ≥ï„ÄÇ ÂÖ∂Ê¨°Â∞±ÊòØÂèçÂ∞ÑÁõ∏ÂÖ≥ÁöÑAPIÔºåÂè™ËÆ≤‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÔºåÊØîÂ¶ÇËé∑Âèñ‰∏Ä‰∏™ClassÂØπË±°„ÄÇClass.forName(ÂÆåÊï¥Á±ªÂêç)„ÄÇÈÄöËøáClassÂØπË±°Ëé∑ÂèñÁ±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºåclass.getConstructor„ÄÇÊ†πÊçÆClassÂØπË±°Ëé∑ÂèñÁ±ªÁöÑÊñπÊ≥ïÔºågetMethodÂíågetMethods„ÄÇ‰ΩøÁî®ClassÂØπË±°ÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Ôºåclass.newInstanceÁ≠â„ÄÇ ÊúÄÂêéÂèØ‰ª•ËØ¥‰∏Ä‰∏ãÂèçÂ∞ÑÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπÔºå‰ºòÁÇπÂ∞±ÊòØÂ¢ûÂä†ÁÅµÊ¥ªÊÄßÔºåÂèØ‰ª•Âú®ËøêË°åÊó∂Âä®ÊÄÅËé∑ÂèñÂØπË±°ÂÆû‰æã„ÄÇÁº∫ÁÇπÊòØÂèçÂ∞ÑÁöÑÊïàÁéáÂæà‰ΩéÔºåËÄå‰∏î‰ºöÁ†¥ÂùèÂ∞ÅË£ÖÔºåÈÄöËøáÂèçÂ∞ÑÂèØ‰ª•ËÆøÈóÆÁ±ªÁöÑÁßÅÊúâÊñπÊ≥ïÔºå‰∏çÂÆâÂÖ®„ÄÇ]]></content>
      <tags>
        <tag>javaÂü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ¶Ç‰ΩïÊâßË°å‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁ®ãÂ∫è]]></title>
    <url>%2F2019%2F02%2F03%2FJVM%2FJava%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E7%A8%8B%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[Êú¨ÁØá‰∏∫Â≠¶‰π†JAVAËôöÊãüÊú∫ÁöÑÁ¨¨‰∏ÄÁØáÊñáÁ´†ÔºåÈúÄË¶Å‰πãÂâçÂØπJVMÊúâ‰∏ÄÂÆö‰∫ÜËß£ÁöÑÂü∫Á°Ä„ÄÇÊàë‰ª¨ÈÉΩÁü•ÈÅìÔºåJAVAÂè∑Áß∞Ôºö‰∏ÄÊ¨°ÁºñËØëÂ§öÂ§ÑËøêË°å„ÄÇËøôÂ∞±Á¶ª‰∏çÂºÄÂ≠óËäÇÁ†ÅÊñá‰ª∂ÂíåËôöÊãüÊú∫Âï¶ÔºÅÈÇ£‰πàÔºåËôöÊãüÊú∫Âà∞Â∫ïÊòØÂ¶Ç‰ΩïÂéªÊâßË°å‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫èÁöÑÂë¢ÔºüÁêÜËß£‰∫ÜËøô‰∏™ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÁêÜËß£javaÊó∂Â¶Ç‰ΩïÂÅöÂà∞Âπ≥Âè∞Êó†ÂÖ≥ÁöÑ‰∫Ü„ÄÇ‰∏ãÈù¢Êàë‰ª¨Êù•ÂàÜÊûêÂàÜÊûê„ÄÇ È¶ñÂÖàÔºåÂÜô‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁ®ãÂ∫èÔºö 123456789public class Main &#123; public static void main(String[] args) &#123; int i=1,j=5; i++; ++j; System.out.println(i); System.out.println(j); &#125;&#125; ËøêË°å‰πãÂêéÁöÑÁªìÊûúÊÉ≥ÂøÖÂ∞±‰∏ÄÁõÆ‰∫ÜÁÑ∂ÔºåÊàë‰ª¨Â∞±ÈÄöËøáËøô‰∏™Á®ãÂ∫èÊù•ÂàÜÊûêÂàÜÊûêÂà∞Â∫ïÊòØÊÄé‰πàÊâßË°åËøô‰∏™Á®ãÂ∫èÈ¢ùÁöÑ„ÄÇ È¶ñÂÖàÂë¢ÔºåjavaÁ®ãÂ∫èÁöÑÊâßË°åÁªèÂéÜÁºñËØëÔºåÁºñËØëÊàêÁ≥ªÁªüËÉΩËØÜÂà´ÁöÑÊñá‰ª∂ÔºåËøôÈáåÁöÑÁ≥ªÁªüÂØπÂ∫îjavaËØ≠Ë®ÄÂ∞±ÊòØJVMÔºåÂç≥JAVAËôöÊãüÊú∫„ÄÇJVMÂú®ËØÜÂà´‰πãÂêéÔºåÂÜçÂéª‰∏éÊàë‰ª¨ÁúüÊ≠£ÁöÑÊìç‰ΩúÁ≥ªÁªüËøõË°å‰∫§‰∫íÂíåÂ§ÑÁêÜ„ÄÇ ÊâÄ‰ª•ÔºåÊàë‰ª¨Ë¶ÅÊâßË°å‰∏Ä‰∏™.javaÁ®ãÂ∫èÔºåÂøÖÈ°ªË¶ÅÂÖàËøõË°åÁºñËØë„ÄÇÂàùÂ≠¶ËÄÖÈÉΩ‰ºöÂ≠¶‰π†‰∏Ä‰∏™Êåá‰ª§Âè´ÂÅöjavacÔºö Êàë‰ª¨‰ºöÂèëÁé∞Ë∑ØÂæÑ‰∏ãÈù¢Â∞±‰ºöÂ§ö‰∏Ä‰∏™.classÊñá‰ª∂ÔºåËøôÂ∞±ÊòØÁºñËØë‰πãÂêéÁöÑÊñá‰ª∂„ÄÇÁõ¥Êé•ÁÇπÂºÄÔºö 123456789101112131415161718//// Source code recreated from a .class file by IntelliJ IDEA// (powered by Fernflower decompiler)//public class Main &#123; public Main() &#123; &#125; public static void main(String[] var0) &#123; byte var1 = 1; byte var2 = 5; int var3 = var1 + 1; int var4 = var2 + 1; System.out.println(var3); System.out.println(var4); &#125;&#125; Êàë‰ª¨ÁúãÁ¨¨‰∏ÄË°åÊ≥®ÈáäÔºåËØ¥ÁöÑÊòØÁºñËØëÂêéÁöÑÊñá‰ª∂Â∑≤ÁªèËá™Âä®Ë¢´IDEAÂèçÁºñËØë‰∫ÜÔºåÊâÄ‰ª•Êàë‰ª¨ËøòËÉΩÁúãÂæóÊáÇ„ÄÇÁúüÊ≠£ÁöÑÊñá‰ª∂ÊòØÔºö 12345Êº±Â£ï 4          &lt;init&gt; ()V Code LineNumberTable main ([Ljava/lang/String;)V SourceFile Main.java         Main java/lang/Object java/lang/System out Ljava/io/PrintStream; java/io/PrintStream println (I)V !            *? ?       E   &lt;=??? ? ? ? ? Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂÖ∂ÂÆûÊòØ‰∏ÄÂ†Ü‰π±Á†ÅÔºåÊ†πÊú¨Áúã‰∏çÊáÇ„ÄÇËÄåÂú®ÊâßË°åÁöÑÊó∂ÂÄôÔºåclassÊñá‰ª∂ÊòØ‰∏ÄÁßç8‰ΩçÂ≠óËäÇÁöÑ‰∫åËøõÂà∂ÊµÅÊñá‰ª∂„ÄÇÊîæÂú®sublime‰∏≠ÂèØ‰ª•ÁúãÂà∞‰∫åËøõÂà∂Êñá‰ª∂Ôºà‰ª•16ËøõÂà∂ÊòæÁ§∫ÔºåÂú®JAVAËôöÊãüÊú∫‰∏≠Â∞ÜÊù•‰∫ÜËß£ËøôÂêÑÊñá‰ª∂ÁöÑÂê´‰πâÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Á¨¨‰∏Ä‰∏™ÂçïËØçÊòØcafe babeÔºåË°®ÊòéËøôÊòØ‰∏Ä‰∏™classÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºâÔºö ÈÇ£‰πàÊàë‰ª¨ÊÉ≥ÁúãÁúã.class‰∏≠ÁöÑ‰ø°ÊÅØÔºåËøòÊòØÈúÄË¶ÅÂèçÁºñËØëÔºåËøô‰∏™Êó∂ÂÄôÂèØ‰ª•Áî®javapÊåá‰ª§Êù•ÂÅö„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÂØπÂÖ∂‰∏çÁÜüÊÇâÔºåÂèØ‰ª•ÂÖàÊâßË°åjavap -helpÊù•‰∫ÜËß£‰∫ÜËß£„ÄÇ 12345678910111213141516171819Áî®Ê≥ï: javap &lt;options&gt; &lt;classes&gt;ÂÖ∂‰∏≠, ÂèØËÉΩÁöÑÈÄâÈ°πÂåÖÊã¨: -help --help -? ËæìÂá∫Ê≠§Áî®Ê≥ïÊ∂àÊÅØ -version ÁâàÊú¨‰ø°ÊÅØ -v -verbose ËæìÂá∫ÈôÑÂä†‰ø°ÊÅØ -l ËæìÂá∫Ë°åÂè∑ÂíåÊú¨Âú∞ÂèòÈáèË°® -public ‰ªÖÊòæÁ§∫ÂÖ¨ÂÖ±Á±ªÂíåÊàêÂëò -protected ÊòæÁ§∫Âèó‰øùÊä§ÁöÑ/ÂÖ¨ÂÖ±Á±ªÂíåÊàêÂëò -package ÊòæÁ§∫Á®ãÂ∫èÂåÖ/Âèó‰øùÊä§ÁöÑ/ÂÖ¨ÂÖ±Á±ª ÂíåÊàêÂëò (ÈªòËÆ§) -p -private ÊòæÁ§∫ÊâÄÊúâÁ±ªÂíåÊàêÂëò -c ÂØπ‰ª£Á†ÅËøõË°åÂèçÊ±áÁºñ -s ËæìÂá∫ÂÜÖÈÉ®Á±ªÂûãÁ≠æÂêç -sysinfo ÊòæÁ§∫Ê≠£Âú®Â§ÑÁêÜÁöÑÁ±ªÁöÑ Á≥ªÁªü‰ø°ÊÅØ (Ë∑ØÂæÑ, Â§ßÂ∞è, Êó•Êúü, MD5 Êï£Âàó) -constants ÊòæÁ§∫ÊúÄÁªàÂ∏∏Èáè -classpath &lt;path&gt; ÊåáÂÆöÊü•ÊâæÁî®Êà∑Á±ªÊñá‰ª∂ÁöÑ‰ΩçÁΩÆ -cp &lt;path&gt; ÊåáÂÆöÊü•ÊâæÁî®Êà∑Á±ªÊñá‰ª∂ÁöÑ‰ΩçÁΩÆ -bootclasspath &lt;path&gt; Ë¶ÜÁõñÂºïÂØºÁ±ªÊñá‰ª∂ÁöÑ‰ΩçÁΩÆ Êàë‰ª¨Ê≥®ÊÑèÂà∞ÔºåÊúâ‰∏Ä‰∏™-cÊòØËøõË°åÂèçÊ±áÁºñÔºåÈÇ£‰πàÂ∞±Áî®ÂÆÉËØïËØï: 123456789101112131415161718192021222324252627E:\JavaBasic\src&gt;javap -c Main.classCompiled from &quot;Main.java&quot;public class Main &#123; public Main(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public static void main(java.lang.String[]); Code: 0: iconst_1 1: istore_1 2: iconst_5 3: istore_2 4: iinc 1, 1 7: iinc 2, 1 10: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 13: iload_1 14: invokevirtual #3 // Method java/io/PrintStream.println:(I)V 17: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 20: iload_2 21: invokevirtual #3 // Method java/io/PrintStream.println:(I)V 24: return&#125; ÈÇ£‰πàËøôÂèçÊ±áÁºñÂá∫Êù•ÁöÑ‰∏úË•øÊòØ‰ªÄ‰πàÂë¢ÔºüËøôÊòØ‰∏ÄËøû‰∏≤ÁöÑÊåá‰ª§ÔºåÂÖ∂ÂÆûËøô‰∫õÊòØÂä†ËΩΩclassÊñá‰ª∂Êó∂ÁúüÊ≠£ÊâßË°åÁöÑjavaËôöÊãüÊú∫Êåá‰ª§„ÄÇ Êàë‰ª¨Êù•ÁúãÁúãÂÆÉÁöÑÂê´‰πâÂêßÔºÅ ‰ªîÁªÜÁúãÁúãÔºåÂÖ∂ÂÆûÂèëÁé∞Âπ∂‰∏çÁ•ûÁßòÔºå‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÊâßË°åÊòØ‰∏Ä‰∏™ÂÖ•Ê†àÂá∫Ê†àÁöÑËøáÁ®ã„ÄÇokÔºåÂ§ß‰Ωì‰∫ÜËß£‰∫ÜÂ≠óËäÇÁ†ÅÊñá‰ª∂ÊòØ‰ªÄ‰πà‰ª•ÂèäÈáåÈù¢ÁöÑÊåá‰ª§Âê´‰πâ‰πãÂêéÔºåÊàë‰ª¨ÂØπjavaÂ¶Ç‰ΩïÊâßË°åÂÆÉÂ∑≤ÁªèÂ§ß‰ΩìÊ∏ÖÊ•ö‰∫Ü„ÄÇ‰∏ãÈù¢ÊâßË°å‰∏Ä‰∏ãÔºö ÈÇ£‰πàÂ¶Ç‰ΩïËøêË°åÂë¢Ôºü ÂÖ∂ÂÆûËøôÊòØÂ∫üËØùÔºåÂàùÂ≠¶javaÂÖ∂ÂÆûÊòØjava MainËøêË°åÁöÑÔºö 1234E:\JavaBasic\src&gt;java Main26 Ëøô‰∏™Êó∂ÂÄôÔºåclassÊñá‰ª∂ÂèØ‰ª•ÁßªÊ§çÂà∞‰ªª‰ΩïÂπ≥Âè∞‰∏äÂéªÔºåÊØîÂ¶ÇÁõ¥Êé•‰∏ä‰º†Âà∞linux‰∏äÔºåÂè™Ë¶ÅJDKÊàñËÄÖJREÁéØÂ¢ÉÁ±ª‰ººÂç≥ÂèØÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•ËøêË°å‰∫ÜÔºå‰∏çÈúÄË¶ÅÁºñËØëÔºå‰πü‰∏çÈúÄË¶ÅÂÖ≥ÂøÉÊòØ‰ªÄ‰πàÁ≥ªÁªü„ÄÇËøôÂ∞±ÂÅöÂà∞‰∫Ü‰∏ÄÊ¨°ÁºñËØëÂà∞Â§ÑËøêË°å„ÄÇ ‰∏ãÈù¢ÊÄªÁªì‰∏Ä‰∏ãÔºö JavaÊ∫êÁ†ÅÈ¶ñÂÖàË¢´ÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºåÂÜçÁî±‰∏çÂêåÂπ≥Âè∞ÁöÑJVMËøõË°åËß£ÊûêÔºåJAVAËØ≠Ë®ÄÂú®‰∏çÂêåÂπ≥Âè∞‰∏äËøêË°åÊó∂‰∏çÈúÄË¶ÅËøõË°åÈáçÊñ∞ÁºñËØëÔºåJAVAËôöÊãüÊú∫Âú®ÊâßË°åÂ≠óËäÇÁ†ÅÁöÑÊó∂ÂÄôÔºåÊääÂ≠óËäÇÁ†ÅËΩ¨Êç¢‰∏∫ÂÖ∑‰ΩìÂπ≥Âè∞‰∏äÁöÑÊú∫Âô®Êåá‰ª§ÔºåÁÑ∂ÂêéÂêÑÁßçÊìç‰ΩúÁ≥ªÁªüÂ∞±ÂèØ‰ª•Ê≠£Á°ÆËØÜÂà´‰∫Ü„ÄÇËøôÂ∞±ÊòØJAVAÂ¶Ç‰ΩïÊâßË°å‰ª£Á†ÅÂíåÂπ≥Âè∞Êó†ÂÖ≥ÊÄßÁöÑÂéüÂõ†„ÄÇ]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÖ≥‰∫éRedis‰∏Ä‰∫õÈáçË¶ÅÁöÑÈù¢ËØïÁÇπ]]></title>
    <url>%2F2019%2F02%2F02%2Fredis%2F%E5%85%B3%E4%BA%8ERedis%E4%B8%80%E4%BA%9B%E9%87%8D%E8%A6%81%E7%9A%84%E9%9D%A2%E8%AF%95%E7%82%B9%2F</url>
    <content type="text"><![CDATA[ËøôÈáåÊï¥ÁêÜ‰∏Ä‰∫õÈù¢ËØïÈ¢òÁõÆÔºåÂæàÂ§öÂ∑≤ÁªèÂú®ÂâçÈù¢ÁöÑÊñáÁ´†‰∏≠ËØ¶ÁªÜËØ¥Êòé‰∫ÜÔºåËøôÈáåÁÆóÊòØÊÄªÁªì‰∏Ä‰∏ã„ÄÇ‰πüË°•ÂÖÖ‰∫Ü‰∏ÄÁÇπÊñ∞ÁöÑÁü•ËØÜ„ÄÇ RedisÊúâÂì™‰∫õÊï∞ÊçÆÁªìÊûÑÔºü Â≠óÁ¨¶‰∏≤ String„ÄÅÂ≠óÂÖ∏ Hash „ÄÅÂàóË°® List „ÄÅÈõÜÂêà Set „ÄÅÊúâÂ∫èÈõÜÂêà SortedSet„ÄÇ Â¶ÇÊûú‰Ω†ÊòØRedis‰∏≠È´òÁ∫ßÁî®Êà∑ÔºåËøòÈúÄË¶ÅÂä†‰∏ä‰∏ãÈù¢Âá†ÁßçÊï∞ÊçÆÁªìÊûÑHyperLogLog„ÄÅGeo„ÄÅPub/Sub„ÄÇ StringÁ±ªÂûãÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ Redis ÊòØ‰∏Ä‰∏™ÈîÆÂÄºÂØπÊï∞ÊçÆÂ∫ì, Êï∞ÊçÆÂ∫ìÁöÑÂÄºÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤„ÄÅÈõÜÂêà„ÄÅÂàóË°®Á≠âÂ§öÁßçÁ±ªÂûãÁöÑÂØπË±°Ôºå ËÄåÊï∞ÊçÆÂ∫ìÁöÑÈîÆÂàôÊÄªÊòØÂ≠óÁ¨¶‰∏≤ÂØπË±°„ÄÇ ÂØπ‰∫éÈÇ£‰∫õÂåÖÂê´Â≠óÁ¨¶‰∏≤ÂÄºÁöÑÂ≠óÁ¨¶‰∏≤ÂØπË±°Êù•ËØ¥Ôºå ÊØè‰∏™Â≠óÁ¨¶‰∏≤ÂØπË±°ÈÉΩÂåÖÂê´‰∏Ä‰∏™ sds ÂÄº„ÄÇ ‚ÄúÂåÖÂê´Â≠óÁ¨¶‰∏≤ÂÄºÁöÑÂ≠óÁ¨¶‰∏≤ÂØπË±°‚ÄùÔºåËøôÁßçËØ¥Ê≥ïÂàùÂê¨‰∏äÂéªÂèØËÉΩ‰ºöÊúâÁÇπÂ•áÊÄ™Ôºå ‰ΩÜÊòØÂú® Redis ‰∏≠Ôºå ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂØπË±°Èô§‰∫ÜÂèØ‰ª•‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ÂÄº‰πãÂ§ñÔºå ËøòÂèØ‰ª•‰øùÂ≠ò long Á±ªÂûãÁöÑÂÄºÔºå ÊâÄ‰ª•‰∏∫‰∫Ü‰∏•Ë∞®Ëµ∑ËßÅÔºå ËøôÈáåÈúÄË¶ÅÂº∫Ë∞É‰∏Ä‰∏ãÔºö ÂΩìÂ≠óÁ¨¶‰∏≤ÂØπË±°‰øùÂ≠òÁöÑÊòØÂ≠óÁ¨¶‰∏≤Êó∂Ôºå ÂÆÉÂåÖÂê´ÁöÑÊâçÊòØ sds ÂÄºÔºå Âê¶ÂàôÁöÑËØùÔºå ÂÆÉÂ∞±ÊòØ‰∏Ä‰∏™ long Á±ªÂûãÁöÑÂÄº„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºå ‰ª•‰∏ãÂëΩ‰ª§ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÂ∫ìÈîÆÂÄºÂØπÔºå Ëøô‰∏™ÈîÆÂÄºÂØπÁöÑÈîÆÂíåÂÄºÈÉΩÊòØÂ≠óÁ¨¶‰∏≤ÂØπË±°Ôºå ÂÆÉ‰ª¨ÈÉΩÂåÖÂê´‰∏Ä‰∏™ sds ÂÄºÔºö 12345redis&gt; SET book &quot;Mastering C++ in 21 days&quot;OKredis&gt; GET book&quot;Mastering C++ in 21 days&quot; ÁõÆÂâçÊù•ËØ¥Ôºå Âè™Ë¶ÅËÆ∞‰ΩèËøô‰∏™‰∫ãÂÆûÂç≥ÂèØÔºö Âú® Redis ‰∏≠Ôºå ÂÆ¢Êà∑Á´Ø‰º†ÂÖ•ÊúçÂä°Âô®ÁöÑÂçèËÆÆÂÜÖÂÆπ„ÄÅ aof ÁºìÂ≠ò„ÄÅ ËøîÂõûÁªôÂÆ¢Êà∑Á´ØÁöÑÂõûÂ§çÔºå Á≠âÁ≠âÔºå Ëøô‰∫õÈáçË¶ÅÁöÑÂÜÖÂÆπÈÉΩÊòØÁî± sds Á±ªÂûãÊù•‰øùÂ≠òÁöÑ„ÄÇ Âú® C ËØ≠Ë®Ä‰∏≠ÔºåÂ≠óÁ¨¶‰∏≤ÂèØ‰ª•Áî®‰∏Ä‰∏™ \0 ÁªìÂ∞æÁöÑ char Êï∞ÁªÑÊù•Ë°®Á§∫„ÄÇ ÊØîÂ¶ÇËØ¥Ôºå hello world Âú® C ËØ≠Ë®Ä‰∏≠Â∞±ÂèØ‰ª•Ë°®Á§∫‰∏∫ &quot;hello world\0&quot; „ÄÇ ËøôÁßçÁÆÄÂçïÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÔºåÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÈÉΩËÉΩÊª°Ë∂≥Ë¶ÅÊ±ÇÔºå‰ΩÜÊòØÔºåÂÆÉÂπ∂‰∏çËÉΩÈ´òÊïàÂú∞ÊîØÊåÅÈïøÂ∫¶ËÆ°ÁÆóÂíåËøΩÂä†ÔºàappendÔºâËøô‰∏§ÁßçÊìç‰ΩúÔºö ÊØèÊ¨°ËÆ°ÁÆóÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶Ôºàstrlen(s)ÔºâÁöÑÂ§çÊùÇÂ∫¶‰∏∫ Œ∏(N) „ÄÇ ÂØπÂ≠óÁ¨¶‰∏≤ËøõË°å N Ê¨°ËøΩÂä†ÔºåÂøÖÂÆöÈúÄË¶ÅÂØπÂ≠óÁ¨¶‰∏≤ËøõË°å N Ê¨°ÂÜÖÂ≠òÈáçÂàÜÈÖçÔºàreallocÔºâ„ÄÇ Âú® Redis ÂÜÖÈÉ®Ôºå Â≠óÁ¨¶‰∏≤ÁöÑËøΩÂä†ÂíåÈïøÂ∫¶ËÆ°ÁÆóÂæàÂ∏∏ËßÅÔºå ËÄå APPEND Âíå STRLEN Êõ¥ÊòØËøô‰∏§ÁßçÊìç‰ΩúÔºåÂú® Redis ÂëΩ‰ª§‰∏≠ÁöÑÁõ¥Êé•Êò†Â∞ÑÔºå Ëøô‰∏§‰∏™ÁÆÄÂçïÁöÑÊìç‰Ωú‰∏çÂ∫îËØ•Êàê‰∏∫ÊÄßËÉΩÁöÑÁì∂È¢à„ÄÇ Âè¶Â§ñÔºå Redis Èô§‰∫ÜÂ§ÑÁêÜÂ≠óÁ¨¶‰∏≤‰πãÂ§ñÔºå ËøòÈúÄË¶ÅÂ§ÑÁêÜÂçïÁ∫ØÁöÑÂ≠óËäÇÊï∞ÁªÑÔºå ‰ª•ÂèäÊúçÂä°Âô®ÂçèËÆÆÁ≠âÂÜÖÂÆπÔºå ÊâÄ‰ª•‰∏∫‰∫ÜÊñπ‰æøËµ∑ËßÅÔºå Redis ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ËøòÂ∫îËØ•ÊòØ‰∫åËøõÂà∂ÂÆâÂÖ®ÁöÑÔºö Á®ãÂ∫è‰∏çÂ∫îÂØπÂ≠óÁ¨¶‰∏≤ÈáåÈù¢‰øùÂ≠òÁöÑÊï∞ÊçÆÂÅö‰ªª‰ΩïÂÅáËÆæÔºå Êï∞ÊçÆÂèØ‰ª•ÊòØ‰ª• \0 ÁªìÂ∞æÁöÑ C Â≠óÁ¨¶‰∏≤Ôºå ‰πüÂèØ‰ª•ÊòØÂçïÁ∫ØÁöÑÂ≠óËäÇÊï∞ÁªÑÔºå ÊàñËÄÖÂÖ∂‰ªñÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇ ËÄÉËôëÂà∞Ëøô‰∏§‰∏™ÂéüÂõ†Ôºå Redis ‰ΩøÁî® sds Á±ªÂûãÊõøÊç¢‰∫Ü C ËØ≠Ë®ÄÁöÑÈªòËÆ§Â≠óÁ¨¶‰∏≤Ë°®Á§∫Ôºö sds Êó¢ÂèØÈ´òÊïàÂú∞ÂÆûÁé∞ËøΩÂä†ÂíåÈïøÂ∫¶ËÆ°ÁÆóÔºå ÂêåÊó∂ÊòØ‰∫åËøõÂà∂ÂÆâÂÖ®ÁöÑ„ÄÇ Âú®ÂâçÈù¢ÁöÑÂÜÖÂÆπ‰∏≠Ôºå Êàë‰ª¨‰∏ÄÁõ¥Â∞Ü sds ‰Ωú‰∏∫‰∏ÄÁßçÊäΩË±°Êï∞ÊçÆÁªìÊûÑÊù•ËØ¥ÊòéÔºå ÂÆûÈôÖ‰∏äÔºå ÂÆÉÁöÑÂÆûÁé∞Áî±‰ª•‰∏ã‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºö 1234567891011121314typedef char *sds;struct sdshdr &#123; // buf Â∑≤Âç†Áî®ÈïøÂ∫¶ int len; // buf Ââ©‰ΩôÂèØÁî®ÈïøÂ∫¶ int free; // ÂÆûÈôÖ‰øùÂ≠òÂ≠óÁ¨¶‰∏≤Êï∞ÊçÆÁöÑÂú∞Êñπ char buf[];&#125;; ÂÖ∂‰∏≠ÔºåÁ±ªÂûã sds ÊòØ char * ÁöÑÂà´ÂêçÔºàaliasÔºâÔºåËÄåÁªìÊûÑ sdshdr Âàô‰øùÂ≠ò‰∫Ü len „ÄÅ free Âíå buf ‰∏â‰∏™Â±ûÊÄß„ÄÇ ‰Ωú‰∏∫‰æãÂ≠êÔºå‰ª•‰∏ãÊòØÊñ∞ÂàõÂª∫ÁöÑÔºåÂêåÊ†∑‰øùÂ≠ò hello world Â≠óÁ¨¶‰∏≤ÁöÑ sdshdr ÁªìÊûÑÔºö 12345struct sdshdr &#123; len = 11; free = 0; buf = &quot;hello world\0&quot;; // buf ÁöÑÂÆûÈôÖÈïøÂ∫¶‰∏∫ len + 1&#125;; ÈÄöËøá len Â±ûÊÄßÔºå sdshdr ÂèØ‰ª•ÂÆûÁé∞Â§çÊùÇÂ∫¶‰∏∫ Œ∏(1) ÁöÑÈïøÂ∫¶ËÆ°ÁÆóÊìç‰Ωú„ÄÇ Âè¶‰∏ÄÊñπÈù¢Ôºå ÈÄöËøáÂØπ buf ÂàÜÈÖç‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÁ©∫Èó¥Ôºå Âπ∂‰ΩøÁî® free ËÆ∞ÂΩïÊú™‰ΩøÁî®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÔºå sdshdr ÂèØ‰ª•ËÆ©ÊâßË°åËøΩÂä†Êìç‰ΩúÊâÄÈúÄÁöÑÂÜÖÂ≠òÈáçÂàÜÈÖçÊ¨°Êï∞Â§ßÂ§ßÂáèÂ∞ë„ÄÇ ‰∏∫‰∫ÜÊòì‰∫éÁêÜËß£ÔºåÊàë‰ª¨Áî®‰∏Ä‰∏™ Redis ÊâßË°åÂÆû‰æã‰Ωú‰∏∫‰æãÂ≠êÔºåËß£Èáä‰∏Ä‰∏ãÔºåÂΩìÊâßË°å‰ª•‰∏ã‰ª£Á†ÅÊó∂Ôºå Redis ÂÜÖÈÉ®ÂèëÁîü‰∫Ü‰ªÄ‰πàÔºö 12345678redis&gt; SET msg "hello world"OKredis&gt; APPEND msg " again!"(integer) 18redis&gt; GET msg"hello world again!" È¶ñÂÖàÔºå SET ÂëΩ‰ª§ÂàõÂª∫Âπ∂‰øùÂ≠ò hello world Âà∞‰∏Ä‰∏™ sdshdr ‰∏≠ÔºåËøô‰∏™ sdshdr ÁöÑÂÄºÂ¶Ç‰∏ãÔºö 12345struct sdshdr &#123; len = 11; free = 0; buf = "hello world\0";&#125; ÂΩìÊâßË°å APPEND ÂëΩ‰ª§Êó∂ÔºåÁõ∏Â∫îÁöÑ sdshdr Ë¢´Êõ¥Êñ∞ÔºåÂ≠óÁ¨¶‰∏≤ &quot; again!&quot; ‰ºöË¢´ËøΩÂä†Âà∞ÂéüÊù•ÁöÑ ‚Äúhello world‚Äù ‰πãÂêéÔºö 12345struct sdshdr &#123; len = 18; free = 18; buf = "hello world again!\0 "; // Á©∫ÁôΩÁöÑÂú∞Êñπ‰∏∫È¢ÑÂàÜÈÖçÁ©∫Èó¥ÔºåÂÖ± 18 + 18 + 1 ‰∏™Â≠óËäÇ&#125; Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå ‰øùÂ≠ò ‚Äúhello world again!‚Äù ÂÖ±ÈúÄË¶Å 18 + 1 ‰∏™Â≠óËäÇÔºå ‰ΩÜÁ®ãÂ∫èÂç¥‰∏∫Êàë‰ª¨ÂàÜÈÖç‰∫Ü 18 + 18 + 1 = 37 ‰∏™Â≠óËäÇ ‚Äî‚Äî ËøôÊ†∑‰∏ÄÊù•Ôºå Â¶ÇÊûúÂ∞ÜÊù•ÂÜçÊ¨°ÂØπÂêå‰∏Ä‰∏™ sdshdr ËøõË°åËøΩÂä†Êìç‰ΩúÔºå Âè™Ë¶ÅËøΩÂä†ÂÜÖÂÆπÁöÑÈïøÂ∫¶‰∏çË∂ÖËøá free Â±ûÊÄßÁöÑÂÄºÔºå ÈÇ£‰πàÂ∞±‰∏çÈúÄË¶ÅÂØπ buf ËøõË°åÂÜÖÂ≠òÈáçÂàÜÈÖç„ÄÇ ËøôÁßçÂàÜÈÖçÁ≠ñÁï•‰ºöÊµ™Ë¥πÂÜÖÂ≠òÂêóÔºü ÊâßË°åËøá APPEND ÂëΩ‰ª§ÁöÑÂ≠óÁ¨¶‰∏≤‰ºöÂ∏¶ÊúâÈ¢ùÂ§ñÁöÑÈ¢ÑÂàÜÈÖçÁ©∫Èó¥Ôºå Ëøô‰∫õÈ¢ÑÂàÜÈÖçÁ©∫Èó¥‰∏ç‰ºöË¢´ÈáäÊîæÔºå Èô§ÈùûËØ•Â≠óÁ¨¶‰∏≤ÊâÄÂØπÂ∫îÁöÑÈîÆË¢´Âà†Èô§Ôºå ÊàñËÄÖÁ≠âÂà∞ÂÖ≥Èó≠ Redis ‰πãÂêéÔºå ÂÜçÊ¨°ÂêØÂä®Êó∂ÈáçÊñ∞ËΩΩÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤ÂØπË±°Â∞Ü‰∏ç‰ºöÊúâÈ¢ÑÂàÜÈÖçÁ©∫Èó¥„ÄÇ Âõ†‰∏∫ÊâßË°å APPEND ÂëΩ‰ª§ÁöÑÂ≠óÁ¨¶‰∏≤ÈîÆÊï∞ÈáèÈÄöÂ∏∏Âπ∂‰∏çÂ§öÔºå Âç†Áî®ÂÜÖÂ≠òÁöÑ‰ΩìÁßØÈÄöÂ∏∏‰πü‰∏çÂ§ßÔºå ÊâÄ‰ª•Ëøô‰∏ÄËà¨Âπ∂‰∏çÁÆó‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ Âè¶‰∏ÄÊñπÈù¢Ôºå Â¶ÇÊûúÊâßË°å APPEND Êìç‰ΩúÁöÑÈîÆÂæàÂ§öÔºå ËÄåÂ≠óÁ¨¶‰∏≤ÁöÑ‰ΩìÁßØÂèàÂæàÂ§ßÁöÑËØùÔºå ÈÇ£ÂèØËÉΩÂ∞±ÈúÄË¶Å‰øÆÊîπ Redis ÊúçÂä°Âô®Ôºå ËÆ©ÂÆÉÂÆöÊó∂ÈáäÊîæ‰∏Ä‰∫õÂ≠óÁ¨¶‰∏≤ÈîÆÁöÑÈ¢ÑÂàÜÈÖçÁ©∫Èó¥Ôºå ‰ªéËÄåÊõ¥ÊúâÊïàÂú∞‰ΩøÁî®ÂÜÖÂ≠ò„ÄÇ ÂΩìÁÑ∂Ôºå sds ‰πüÂØπÊìç‰ΩúÁöÑÊ≠£Á°ÆÂÆûÁé∞ÊèêÂá∫‰∫ÜË¶ÅÊ±Ç ‚Äî‚Äî ÊâÄÊúâÂ§ÑÁêÜ sdshdr ÁöÑÂáΩÊï∞ÔºåÈÉΩÂøÖÈ°ªÊ≠£Á°ÆÂú∞Êõ¥Êñ∞ len Âíå free Â±ûÊÄßÔºåÂê¶ÂàôÂ∞±‰ºöÈÄ†Êàê bug „ÄÇ Êõ¥Â§öÂèÇËßÅÔºöÁÆÄÂçïÂä®ÊÄÅÂ≠óÁ¨¶‰∏≤ ‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠Êü•ËØ¢Êüê‰∏ÄÂõ∫ÂÆöÂâçÁºÄÁöÑkey ‰ΩøÁî®keysÊåá‰ª§ÂèØ‰ª•Êâ´Âá∫ÊåáÂÆöÊ®°ÂºèÁöÑkeyÂàóË°®„ÄÇ ÂØπÊñπÊé•ÁùÄËøΩÈóÆÔºöÂ¶ÇÊûúËøô‰∏™redisÊ≠£Âú®ÁªôÁ∫ø‰∏äÁöÑ‰∏öÂä°Êèê‰æõÊúçÂä°ÔºåÈÇ£‰ΩøÁî®keysÊåá‰ª§‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºü Ëøô‰∏™Êó∂ÂÄô‰Ω†Ë¶ÅÂõûÁ≠îredisÂÖ≥ÈîÆÁöÑ‰∏Ä‰∏™ÁâπÊÄßÔºöredisÁöÑÂçïÁ∫øÁ®ãÁöÑ„ÄÇkeysÊåá‰ª§‰ºöÂØºËá¥Á∫øÁ®ãÈòªÂ°û‰∏ÄÊÆµÊó∂Èó¥ÔºåÁ∫ø‰∏äÊúçÂä°‰ºöÂÅúÈ°øÔºåÁõ¥Âà∞Êåá‰ª§ÊâßË°åÂÆåÊØïÔºåÊúçÂä°ÊâçËÉΩÊÅ¢Â§ç„ÄÇËøô‰∏™Êó∂ÂÄôÂèØ‰ª•‰ΩøÁî®scanÊåá‰ª§ÔºåscanÊåá‰ª§ÂèØ‰ª•Êó†ÈòªÂ°ûÁöÑÊèêÂèñÂá∫ÊåáÂÆöÊ®°ÂºèÁöÑkeyÂàóË°®Ôºå‰ΩÜÊòØ‰ºöÊúâ‰∏ÄÂÆöÁöÑÈáçÂ§çÊ¶ÇÁéáÔºåÂú®ÂÆ¢Êà∑Á´ØÂÅö‰∏ÄÊ¨°ÂéªÈáçÂ∞±ÂèØ‰ª•‰∫ÜÔºå‰ΩÜÊòØÊï¥‰ΩìÊâÄËä±Ë¥πÁöÑÊó∂Èó¥‰ºöÊØîÁõ¥Êé•Áî®keysÊåá‰ª§Èïø„ÄÇ Âü∫‰∫éÊ∏∏Ê†áÁöÑËø≠‰ª£Âô®ÔºåÈúÄË¶Å‰ΩøÁî®‰∏ä‰∏ÄÊ¨°Ê∏∏Ê†áÂª∂Áª≠‰πãÂâçÁöÑËø≠‰ª£ËøáÁ®ã„ÄÇÊ∏∏Ê†á‰∏∫0ÁöÑÊó∂ÂÄô‰ª£Ë°®ÂºÄÂßãÊàñÁªìÊùü„ÄÇ 1234#Ê®°Âºèscan cursor match pattern count#Á§∫‰æãscan 0 match k* count 10 RedisÂÅöÂºÇÊ≠•ÈòüÂàó ‰∏ÄËà¨‰ΩøÁî®listÁªìÊûÑ‰Ωú‰∏∫ÈòüÂàóÔºårpushÁîü‰∫ßÊ∂àÊÅØÔºålpopÊ∂àË¥πÊ∂àÊÅØ„ÄÇÂΩìlpopÊ≤°ÊúâÊ∂àÊÅØÁöÑÊó∂ÂÄôÔºåË¶ÅÈÄÇÂΩìsleep‰∏Ä‰ºöÂÜçÈáçËØï„ÄÇ Â¶ÇÊûúÂØπÊñπËøΩÈóÆÂèØ‰∏çÂèØ‰ª•‰∏çÁî®sleepÂë¢ÔºülistËøòÊúâ‰∏™Êåá‰ª§Âè´blpopÔºåÂú®Ê≤°ÊúâÊ∂àÊÅØÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÈòªÂ°û‰ΩèÁõ¥Âà∞Ê∂àÊÅØÂà∞Êù•„ÄÇ Â¶ÇÊûúÂØπÊñπËøΩÈóÆËÉΩ‰∏çËÉΩÁîü‰∫ß‰∏ÄÊ¨°Ê∂àË¥πÂ§öÊ¨°Âë¢Ôºü‰ΩøÁî®pub/sub‰∏ªÈ¢òËÆ¢ÈòÖËÄÖÊ®°ÂºèÔºåÂèØ‰ª•ÂÆûÁé∞1:NÁöÑÊ∂àÊÅØÈòüÂàó„ÄÇ Â¶ÇÊûúÂØπÊñπËøΩÈóÆpub/subÊúâ‰ªÄ‰πàÁº∫ÁÇπÔºüÂú®Ê∂àË¥πËÄÖ‰∏ãÁ∫øÁöÑÊÉÖÂÜµ‰∏ãÔºåÁîü‰∫ßÁöÑÊ∂àÊÅØ‰ºö‰∏¢Â§±ÔºåÂæó‰ΩøÁî®‰∏ì‰∏öÁöÑÊ∂àÊÅØÈòüÂàóÂ¶ÇrabbitmqÁ≠â„ÄÇ Â¶ÇÊûúÂØπÊñπËøΩÈóÆredisÂ¶Ç‰ΩïÂÆûÁé∞Âª∂Êó∂ÈòüÂàóÔºüÊàë‰º∞ËÆ°Áé∞Âú®‰Ω†ÂæàÊÉ≥ÊääÈù¢ËØïÂÆò‰∏ÄÊ£íÊâìÊ≠ªÂ¶ÇÊûú‰Ω†Êâã‰∏äÊúâ‰∏ÄÊ†πÊ£íÁêÉÊ£çÁöÑËØùÔºåÊÄé‰πàÈóÆÁöÑËøô‰πàËØ¶ÁªÜ„ÄÇ‰ΩÜÊòØ‰Ω†ÂæàÂÖãÂà∂ÔºåÁÑ∂ÂêéÁ•ûÊÄÅËá™Ëã•ÁöÑÂõûÁ≠îÈÅìÔºö‰ΩøÁî®sortedsetÔºåÊãøÊó∂Èó¥Êà≥‰Ωú‰∏∫scoreÔºåÊ∂àÊÅØÂÜÖÂÆπ‰Ωú‰∏∫keyË∞ÉÁî®zaddÊù•Áîü‰∫ßÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖÁî®zrangebyscoreÊåá‰ª§Ëé∑ÂèñNÁßí‰πãÂâçÁöÑÊï∞ÊçÆËΩÆËØ¢ËøõË°åÂ§ÑÁêÜ„ÄÇ Â¶ÇÊûúÊúâÂ§ßÈáèÁöÑkeyÈúÄË¶ÅËÆæÁΩÆÂêå‰∏ÄÊó∂Èó¥ËøáÊúüÔºå‰∏ÄËà¨ÈúÄË¶ÅÊ≥®ÊÑè‰ªÄ‰πàÔºü Â¶ÇÊûúÂ§ßÈáèÁöÑkeyËøáÊúüÊó∂Èó¥ËÆæÁΩÆÁöÑËøá‰∫éÈõÜ‰∏≠ÔºåÂà∞ËøáÊúüÁöÑÈÇ£‰∏™Êó∂Èó¥ÁÇπÔºåredisÂèØËÉΩ‰ºöÂá∫Áé∞Áü≠ÊöÇÁöÑÂç°È°øÁé∞Ë±°„ÄÇ‰∏ÄËà¨ÈúÄË¶ÅÂú®Êó∂Èó¥‰∏äÂä†‰∏Ä‰∏™ÈöèÊú∫ÂÄºÔºå‰ΩøÂæóËøáÊúüÊó∂Èó¥ÂàÜÊï£‰∏Ä‰∫õ„ÄÇ RedisÂ¶Ç‰ΩïÂÅöÊåÅ‰πÖÂåñÁöÑÔºü bgsaveÂÅöÈïúÂÉèÂÖ®ÈáèÊåÅ‰πÖÂåñÔºåaofÂÅöÂ¢ûÈáèÊåÅ‰πÖÂåñ„ÄÇÂõ†‰∏∫bgsave‰ºöËÄóË¥πËæÉÈïøÊó∂Èó¥Ôºå‰∏çÂ§üÂÆûÊó∂ÔºåÂú®ÂÅúÊú∫ÁöÑÊó∂ÂÄô‰ºöÂØºËá¥Â§ßÈáè‰∏¢Â§±Êï∞ÊçÆÔºåÊâÄ‰ª•ÈúÄË¶ÅaofÊù•ÈÖçÂêà‰ΩøÁî®„ÄÇÂú®redisÂÆû‰æãÈáçÂêØÊó∂Ôºå‰ºö‰ΩøÁî®bgsaveÊåÅ‰πÖÂåñÊñá‰ª∂ÈáçÊñ∞ÊûÑÂª∫ÂÜÖÂ≠òÔºåÂÜç‰ΩøÁî®aofÈáçÊîæËøëÊúüÁöÑÊìç‰ΩúÊåá‰ª§Êù•ÂÆûÁé∞ÂÆåÊï¥ÊÅ¢Â§çÈáçÂêØ‰πãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ ÂØπÊñπËøΩÈóÆÈÇ£Â¶ÇÊûúÁ™ÅÁÑ∂Êú∫Âô®ÊéâÁîµ‰ºöÊÄéÊ†∑ÔºüÂèñÂÜ≥‰∫éaofÊó•ÂøósyncÂ±ûÊÄßÁöÑÈÖçÁΩÆÔºåÂ¶ÇÊûú‰∏çË¶ÅÊ±ÇÊÄßËÉΩÔºåÂú®ÊØèÊù°ÂÜôÊåá‰ª§Êó∂ÈÉΩsync‰∏Ä‰∏ãÁ£ÅÁõòÔºåÂ∞±‰∏ç‰ºö‰∏¢Â§±Êï∞ÊçÆ„ÄÇ‰ΩÜÊòØÂú®È´òÊÄßËÉΩÁöÑË¶ÅÊ±Ç‰∏ãÊØèÊ¨°ÈÉΩsyncÊòØ‰∏çÁé∞ÂÆûÁöÑÔºå‰∏ÄËà¨ÈÉΩ‰ΩøÁî®ÂÆöÊó∂syncÔºåÊØîÂ¶Ç1s1Ê¨°ÔºåËøô‰∏™Êó∂ÂÄôÊúÄÂ§öÂ∞±‰ºö‰∏¢Â§±1sÁöÑÊï∞ÊçÆ„ÄÇ ÂØπÊñπËøΩÈóÆbgsaveÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü‰Ω†ÁªôÂá∫‰∏§‰∏™ËØçÊ±áÂ∞±ÂèØ‰ª•‰∫ÜÔºåforkÂíåcow„ÄÇforkÊòØÊåáredisÈÄöËøáÂàõÂª∫Â≠êËøõÁ®ãÊù•ËøõË°åbgsaveÊìç‰ΩúÔºåcowÊåáÁöÑÊòØcopy on writeÔºåÂ≠êËøõÁ®ãÂàõÂª∫ÂêéÔºåÁà∂Â≠êËøõÁ®ãÂÖ±‰∫´Êï∞ÊçÆÊÆµÔºåÁà∂ËøõÁ®ãÁªßÁª≠Êèê‰æõËØªÂÜôÊúçÂä°ÔºåÂÜôËÑèÁöÑÈ°µÈù¢Êï∞ÊçÆ‰ºöÈÄêÊ∏êÂíåÂ≠êËøõÁ®ãÂàÜÁ¶ªÂºÄÊù•„ÄÇ PipelineÊúâ‰ªÄ‰πàÂ•ΩÂ§ÑÔºå‰∏∫‰ªÄ‰πàË¶ÅÁî®pipelineÔºü ÂèØ‰ª•Â∞ÜÂ§öÊ¨°IOÂæÄËøîÁöÑÊó∂Èó¥Áº©Âáè‰∏∫‰∏ÄÊ¨°ÔºåÂâçÊèêÊòØpipelineÊâßË°åÁöÑÊåá‰ª§‰πãÈó¥Ê≤°ÊúâÂõ†ÊûúÁõ∏ÂÖ≥ÊÄß„ÄÇ‰ΩøÁî®redis-benchmarkËøõË°åÂéãÊµãÁöÑÊó∂ÂÄôÂèØ‰ª•ÂèëÁé∞ÂΩ±ÂìçredisÁöÑQPSÂ≥∞ÂÄºÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂõ†Á¥†ÊòØpipelineÊâπÊ¨°Êåá‰ª§ÁöÑÊï∞ÁõÆ„ÄÇ RedisÁöÑÂêåÊ≠•Êú∫Âà∂‰∫ÜËß£‰πàÔºü RedisÂèØ‰ª•‰ΩøÁî®‰∏ª‰ªéÂêåÊ≠•Ôºå‰ªé‰ªéÂêåÊ≠•„ÄÇÁ¨¨‰∏ÄÊ¨°ÂêåÊ≠•Êó∂Ôºå‰∏ªËäÇÁÇπÂÅö‰∏ÄÊ¨°bgsaveÔºåÂπ∂ÂêåÊó∂Â∞ÜÂêéÁª≠‰øÆÊîπÊìç‰ΩúËÆ∞ÂΩïÂà∞ÂÜÖÂ≠òbufferÔºåÂæÖÂÆåÊàêÂêéÂ∞ÜrdbÊñá‰ª∂ÂÖ®ÈáèÂêåÊ≠•Âà∞Â§çÂà∂ËäÇÁÇπÔºåÂ§çÂà∂ËäÇÁÇπÊé•ÂèóÂÆåÊàêÂêéÂ∞ÜrdbÈïúÂÉèÂä†ËΩΩÂà∞ÂÜÖÂ≠ò„ÄÇÂä†ËΩΩÂÆåÊàêÂêéÔºåÂÜçÈÄöÁü•‰∏ªËäÇÁÇπÂ∞ÜÊúüÈó¥‰øÆÊîπÁöÑÊìç‰ΩúËÆ∞ÂΩïÂêåÊ≠•Âà∞Â§çÂà∂ËäÇÁÇπËøõË°åÈáçÊîæÂ∞±ÂÆåÊàê‰∫ÜÂêåÊ≠•ËøáÁ®ã„ÄÇ ÊòØÂê¶‰ΩøÁî®ËøáRedisÈõÜÁæ§ÔºåÈõÜÁæ§ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü Redis SentinalÁùÄÁúº‰∫éÈ´òÂèØÁî®ÔºåÂú®masterÂÆïÊú∫Êó∂‰ºöËá™Âä®Â∞ÜslaveÊèêÂçá‰∏∫masterÔºåÁªßÁª≠Êèê‰æõÊúçÂä°„ÄÇ Redis ClusterÁùÄÁúº‰∫éÊâ©Â±ïÊÄßÔºåÂú®Âçï‰∏™redisÂÜÖÂ≠ò‰∏çË∂≥Êó∂Ôºå‰ΩøÁî®ClusterËøõË°åÂàÜÁâáÂ≠òÂÇ®„ÄÇ Êï¥ÁêÜËá™Ôºö Â§©‰∏ãÊó†ÈöæËØï‰πãRedisÈù¢ËØïÈ¢òÂàÅÈöæÂ§ßÂÖ®]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âá†Áßç‰∏ªÊµÅÁºìÂ≠òÊ°ÜÊû∂‰ªãÁªç]]></title>
    <url>%2F2019%2F02%2F02%2Fredis%2F%E5%87%A0%E7%A7%8D%E4%B8%BB%E6%B5%81%E7%BC%93%E5%AD%98%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨ÂçÅ‰∫åÁØáÊñáÁ´†„ÄÇÊú¨ÊñáÂØπGuava Cache,Memcache‰ª•ÂèäredisËøõË°åÁÆÄÂçï‰ªãÁªçÂíåÂØπÊØî„ÄÇ ÁºìÂ≠òÁâπÂæÅ ÁºìÂ≠òÈÉΩ‰ºöÊ∂âÂèäÔºöÂëΩ‰∏≠Áéá„ÄÅÊúÄÂ§ßÂÖÉÁ¥†„ÄÅÊ∏ÖÁ©∫Á≠ñÁï•(FIFO,LFU,LRU,ËøáÊúüÊó∂Èó¥ÔºåÈöèÊú∫) ÂΩ±ÂìçÁºìÂ≠òÂëΩ‰∏≠ÁéáÂõ†Á¥† ‰∏öÂä°Âú∫ÊôØÂíå‰∏öÂä°ÈúÄÊ±ÇÔºöÈÄÇÂêàËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÊôØ ÁºìÂ≠òÁöÑËÆæËÆ°(Á≤íÂ∫¶ÂíåÁ≠ñÁï•)ÔºöÁºìÂ≠òÁ≤íÂ∫¶Ë∂äÂ∞èÔºåÂëΩ‰∏≠ÁéáË∂äÈ´ò ÁºìÂ≠òÂÆπÈáè(ÁªèÂ∏∏Áî®LRU)ÂíåÂü∫Á°ÄËÆæÊñΩ(ÊòØÂê¶ÂèØÊâ©Â±ïÔºåÈÅøÂÖçÁºìÂ≠òÂ§±Êïà-‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ïÂíåÂá†ÁÇπÂÜó‰Ωô) ÁºìÂ≠òÂàÜÁ±ª Êú¨Âú∞ÁºìÂ≠òÔºöÁºñÁ®ãÂÆûÁé∞ÔºàÊàêÂëòÂèòÈáè„ÄÅÂ±ÄÈÉ®ÂèòÈáè„ÄÅÈùôÊÄÅÂèòÈáèÔºâ„ÄÅGuava Cache ÂàÜÂ∏ÉÂºèÁºìÂ≠òÔºöMemcacheÔºåRedis Êú¨Âú∞ÁºìÂ≠òÔºöÂêÑÂ∫îÁî®‰πãÈó¥Êó†Ê≥ïÂæàÂ•ΩÂú∞ÂÖ±‰∫´Ôºå‰∏éÂ∫îÁî®Êú¨Ë∫´ËÄ¶ÂêàËøáÁ¥ßÔºõËÄåÂàÜÂ∏ÉÂºèÁºìÂ≠òÔºåÊú¨Ë∫´Â∞±ÊòØÁã¨Á´ãÁöÑÂ∫îÁî®ÔºåÂêÑÁã¨Á´ãÂ∫îÁî®‰πãÈó¥ÂÖ±‰∫´ÁºìÂ≠ò„ÄÇ Guava Cache ËÆæËÆ°ÊÄùÊÉ≥Á±ª‰ºº‰∫éjdk1.7‰∏≠ÁöÑConcurrentHashMapÔºå‰πüÊòØÁî®Â§ö‰∏™segmentsÁöÑÁªÜÁ≤íÂ∫¶ÈîÅÔºåÂú®‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂêåÊó∂ÔºåÊîØÊåÅÈ´òÂπ∂ÂèëÂú∫ÊôØÁöÑÈúÄÊ±Ç„ÄÇ ‰∏ãÈù¢Êï∞ÊçÆÂ≠òÂÇ®Â∞±ÊòØ‰ª•ÈîÆÂÄºÂØπÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÔºåÂè¶Â§ñÔºåÈúÄË¶ÅÂ§ÑÁêÜÁºìÂ≠òËøáÊúü„ÄÅÂä®ÊÄÅÂä†ËΩΩÁ≠âÁÆóÊ≥ïÈÄªËæëÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÊù•ÂÆûÁé∞Ëøô‰∫õÊìç‰Ωú„ÄÇ ‰∏ªË¶ÅÂÆûÁé∞ÁöÑÂäüËÉΩÊúâÔºöËá™Âä®Â∞ÜËäÇÁÇπÂä†ÂÖ•Âà∞ÁºìÂ≠òÁªìÊûÑ‰∏≠ÔºåÂΩìÁºìÂ≠òÁöÑÊï∞ÊçÆË∂ÖËøáËÆæÁΩÆÁöÑÊúÄÂ§ßÂÄºÊó∂ÔºåÁî®LRUÁÆóÊ≥ïÊù•ÁßªÈô§„ÄÇ‰ªñÂÖ∑Â§áÊ†πÊçÆËäÇÁÇπ‰∏äÊ¨°Ë¢´ËÆøÈóÆÊàñËÄÖÂÜôÂÖ•ÁöÑÊó∂Èó¥Êù•ËÆ°ÁÆó‰ªñÁöÑËøáÊúüÊú∫Âà∂„ÄÇ memcache memcacheÁÆÄÂçïËÆ§ËØÜ memcacheÊòØ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑÂàÜÂ∏ÉÂºèÁöÑÂÜÖÂ≠òÂØπË±°ÁºìÂ≠òÁ≥ªÁªüÔºåÂÆÉÂú®ÂÜÖÂ≠òÈáåÁª¥Êä§‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂ∑®Â§ßÁöÑhashË°®„ÄÇËÉΩÁî®Êù•ÁºìÂ≠òÂêÑÁßçÊ†ºÂºèÁöÑÊï∞ÊçÆÔºåÂåÖÊã¨ÂõæÂÉè„ÄÅËßÜÈ¢ë„ÄÅÊñá‰ª∂‰ª•ÂèäÊï∞ÊçÆÂ∫ìÊ£ÄÁ¥¢Á≠âÁªìÊûú. memcacheÊòØ‰ª•ÂÆàÊä§Á®ãÂ∫èÊñπÂºèËøêË°å‰∫é‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊúçÂä°Âô®‰∏≠ÔºåÈöèÊó∂‰ºöÊé•Êî∂ÂÆ¢Êà∑ÁöÑËøûÊé•ÂíåÊìç‰Ωú„ÄÇ Â≠òÂú®memcache‰∏≠ÁöÑÂØπË±°ÂÆûÈôÖÊîæÁΩÆÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËøô‰πüÊòØmemcacheÂ¶ÇÊ≠§È´òÊïàÁöÑÂéüÂõ†„ÄÇ Êú¨Ë∫´ÊòØ‰∏çÊèê‰æõÂàÜÂ∏ÉÂºèÁöÑËß£ÂÜ≥ÊñπÊ°àÁöÑ„ÄÇÂàÜÂ∏ÉÂºèÊòØÂú®ÂÆ¢Êà∑Á´ØÂÆûÁé∞ÁöÑÔºåÈÄöËøáÂÆ¢Êà∑Á´ØÁöÑË∑ØÁî±Êù•Â§ÑÁêÜËææÂà∞ÂàÜÂ∏ÉÂºèÁöÑÁõÆÁöÑ„ÄÇ Â∫îÁî®ÊúçÂä°Âô®ÊØèÊ¨°Âú®Â≠òÂÇ®Êüê‰∏™keyÂíåvalueÁöÑÊó∂ÂÄôÔºåÈÄöËøáÊüêÁßçÁÆóÊ≥ïÊääkeyÊò†Â∞ÑÂà∞ÊüêÂè∞ÊúçÂä°Âô®‰∏ä„ÄÇ ‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ï ÂÆ¢Êà∑Á´ØÂÆûÁé∞ÂàÜÂ∏ÉÂºèÔºö‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ïÔºåËøô‰∏™ÁÆóÊ≥ïÂ∑≤ÁªèËØ¶ÁªÜ‰ªãÁªçËøá‰∫Ü„ÄÇ memcache‰∏Ä‰∫õÁâπÊÄß MemcachedÂçïËøõÁ®ãÂú®32‰ΩçÁ≥ªÁªü‰∏≠ÊúÄÂ§ß‰ΩøÁî®ÂÜÖÂ≠ò‰∏∫2GÔºåËã•Âú®64‰ΩçÁ≥ªÁªüÂàôÊ≤°ÊúâÈôêÂà∂,ËøôÊòØÁî±‰∫é32‰ΩçÁ≥ªÁªüÈôêÂà∂ÂçïËøõÁ®ãÊúÄÂ§öÂèØ‰ΩøÁî®2GÂÜÖÂ≠ò,Ë¶Å‰ΩøÁî®Êõ¥Â§öÂÜÖÂ≠òÔºåÂèØ‰ª•ÂàÜÂ§ö‰∏™Á´ØÂè£ÂºÄÂêØÂ§ö‰∏™MemcachedËøõÁ®ã„ÄÇ 32 ‰ΩçÂØªÂùÄÁ©∫Èó¥Âè™Êúâ 4GB Â§ßÂ∞èÔºå‰∫éÊòØ 32 ‰ΩçÂ∫îÁî®Á®ãÂ∫èËøõÁ®ãÊúÄÂ§ßÂè™ËÉΩÁî®Âà∞ 4GB ÁöÑÂÜÖÂ≠ò„ÄÇÁÑ∂ËÄåÔºåÈô§‰∫ÜÂ∫îÁî®Á®ãÂ∫èÊú¨Ë∫´Ë¶ÅÁî®ÂÜÖÂ≠òÔºåÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏‰πüÈúÄË¶Å‰ΩøÁî®„ÄÇÂ∫îÁî®Á®ãÂ∫è‰ΩøÁî®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÂàÜ‰∏∫Áî®Êà∑Á©∫Èó¥ÂíåÂÜÖÊ†∏Á©∫Èó¥ÔºåÊØè‰∏™ 32 ‰ΩçÁ®ãÂ∫èÁöÑÁî®Êà∑Á©∫Èó¥ÂèØÁã¨‰∫´Ââç 2GB Á©∫Èó¥ÔºàÊåáÈíàÂÄº‰∏∫Ê≠£Êï∞ÔºâÔºåËÄåÂÜÖÊ†∏Á©∫Èó¥‰∏∫ÊâÄÊúâËøõÁ®ãÂÖ±‰∫´ 2GB Á©∫Èó¥ÔºàÊåáÈíàÂÄº‰∏∫Ë¥üÊï∞Ôºâ„ÄÇÊâÄ‰ª•Ôºå32 ‰ΩçÂ∫îÁî®Á®ãÂ∫èÂÆûÈôÖËÉΩÂ§üËÆøÈóÆÁöÑÂÜÖÂ≠òÂú∞ÂùÄÁ©∫Èó¥ÊúÄÂ§öÂè™Êúâ 2GB„ÄÇ ÊúÄÂ§ß30Â§©ÁöÑÊï∞ÊçÆËøáÊúüÊó∂Èó¥ÔºåËÆæÁΩÆ‰∏∫Ê∞∏‰πÖ‰πü‰ºöÂú®Ëøô‰∏™Êó∂Èó¥ËøáÊúü„ÄÇÊúÄÈïøÈîÆÈïø‰∏∫250Â≠óËäÇÔºåÂ§ß‰∫éËØ•ÈïøÂ∫¶Êó†Ê≥ïÂ≠òÂÇ®„ÄÇÊúÄÂ§ßÂêåÊó∂ËøûÊé•Êï∞ÊòØ200; memcacheÊòØ‰∏ÄÁßçÊó†ÈòªÂ°ûÁöÑsocketÈÄö‰ø°ÊñπÂºèÊúçÂä°ÔºåÂü∫‰∫élibeventÂ∫ìÔºåÁäπË±´Êó†ÈòªÂ°ûÈÄö‰ø°ÔºåÂØπÂÜÖÂ≠òËØªÂÜôÈÄüÂ∫¶ÈùûÂ∏∏Âø´„ÄÇ ‰∏çÈÄÇÁî®memcachedÁöÑ‰∏öÂä°Âú∫ÊôØÔºü ÁºìÂ≠òÂØπË±°ÁöÑÂ§ßÂ∞èÂ§ß‰∫é1MB ËôöÊãü‰∏ªÊú∫‰∏çËÆ©ËøêË°åmemcachedÊúçÂä° keyÁöÑÈïøÂ∫¶Â§ß‰∫é250Â≠óÁ¨¶ ÈúÄË¶ÅÊåÅ‰πÖÂåñ ‰∏çËÉΩÂ§üÈÅçÂéÜmemcached‰∏≠ÊâÄÊúâÁöÑitemÔºü Ëøô‰∏™Êìç‰ΩúÁöÑÈÄüÂ∫¶Áõ∏ÂØπÁºìÊÖ¢‰∏îÈòªÂ°ûÂÖ∂‰ªñÁöÑÊìç‰Ωú memcacheÂ¶Ç‰ΩïÂàÜÈÖçÂÜÖÂ≠òÔºü ËøôÂº†ÂõæÁâáÈáåÈù¢Ê∂âÂèä‰∫Üslab_class„ÄÅslab„ÄÅpage„ÄÅchunkÂõõ‰∏™Ê¶ÇÂøµÔºåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÊòØÔºö MemCacheÂ∞ÜÂÜÖÂ≠òÁ©∫Èó¥ÂàÜ‰∏∫‰∏ÄÁªÑslab ÊØè‰∏™slab‰∏ãÂèàÊúâËã•Âπ≤‰∏™pageÔºåÊØè‰∏™pageÈªòËÆ§ÊòØ1MÔºåÂ¶ÇÊûú‰∏Ä‰∏™slabÂç†Áî®100MÂÜÖÂ≠òÁöÑËØùÔºåÈÇ£‰πàËøô‰∏™slab‰∏ãÂ∫îËØ•Êúâ100‰∏™page ÊØè‰∏™pageÈáåÈù¢ÂåÖÂê´‰∏ÄÁªÑchunkÔºåchunkÊòØÁúüÊ≠£Â≠òÊîæÊï∞ÊçÆÁöÑÂú∞ÊñπÔºåÂêå‰∏Ä‰∏™slabÈáåÈù¢ÁöÑchunkÁöÑÂ§ßÂ∞èÊòØÂõ∫ÂÆöÁöÑ ÊúâÁõ∏ÂêåÂ§ßÂ∞èchunkÁöÑslabË¢´ÁªÑÁªáÂú®‰∏ÄËµ∑ÔºåÁß∞‰∏∫slab_class ÈÇ£‰πàÊòØÂÖ∑‰ΩìÂ¶Ç‰ΩïÂàÜÈÖçÁöÑÂë¢Ôºü MemCache‰∏≠ÁöÑvalueËøáÊù•Â≠òÊîæÁöÑÂú∞ÊñπÊòØÁî±valueÁöÑÂ§ßÂ∞èÂÜ≥ÂÆöÁöÑÔºåvalueÊÄªÊòØ‰ºöË¢´Â≠òÊîæÂà∞‰∏échunkÂ§ßÂ∞èÊúÄÊé•ËøëÁöÑ‰∏Ä‰∏™slab‰∏≠ÔºåÊØîÂ¶Çslab[1]ÁöÑchunkÂ§ßÂ∞è‰∏∫80Â≠óËäÇ„ÄÅslab[2]ÁöÑchunkÂ§ßÂ∞è‰∏∫100Â≠óËäÇ„ÄÅslab[3]ÁöÑchunkÂ§ßÂ∞è‰∏∫128Â≠óËäÇÔºàÁõ∏ÈÇªslabÂÜÖÁöÑchunkÂü∫Êú¨‰ª•1.25‰∏∫ÊØî‰æãËøõË°åÂ¢ûÈïøÔºåMemCacheÂêØÂä®Êó∂ÂèØ‰ª•Áî®-fÊåáÂÆöËøô‰∏™ÊØî‰æãÔºâÔºåÈÇ£‰πàËøáÊù•‰∏Ä‰∏™88Â≠óËäÇÁöÑvalueÔºåËøô‰∏™valueÂ∞ÜË¢´ÊîæÂà∞2Âè∑slab‰∏≠„ÄÇ ÊîæslabÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖàslabË¶ÅÁî≥ËØ∑ÂÜÖÂ≠òÔºåÁî≥ËØ∑ÂÜÖÂ≠òÊòØ‰ª•page‰∏∫Âçï‰ΩçÁöÑÔºåÊâÄ‰ª•Âú®ÊîæÂÖ•Á¨¨‰∏Ä‰∏™Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊó†ËÆ∫Â§ßÂ∞è‰∏∫Â§öÂ∞ëÔºåÈÉΩ‰ºöÊúâ1MÂ§ßÂ∞èÁöÑpageË¢´ÂàÜÈÖçÁªôËØ•slab„ÄÇÁî≥ËØ∑Âà∞pageÂêéÔºåslab‰ºöÂ∞ÜËøô‰∏™pageÁöÑÂÜÖÂ≠òÊåâchunkÁöÑÂ§ßÂ∞èËøõË°åÂàáÂàÜÔºåËøôÊ†∑Â∞±ÂèòÊàê‰∫Ü‰∏Ä‰∏™chunkÊï∞ÁªÑÔºåÊúÄÂêé‰ªéËøô‰∏™chunkÊï∞ÁªÑ‰∏≠ÈÄâÊã©‰∏Ä‰∏™Áî®‰∫éÂ≠òÂÇ®Êï∞ÊçÆ„ÄÇ Â¶ÇÊûúËøô‰∏™slab‰∏≠Ê≤°ÊúâchunkÂèØ‰ª•ÂàÜÈÖç‰∫ÜÊÄé‰πàÂäûÔºåÂ¶ÇÊûúMemCacheÂêØÂä®Ê≤°ÊúâËøΩÂä†-MÔºàÁ¶ÅÊ≠¢LRUÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÂÜÖÂ≠ò‰∏çÂ§ü‰ºöÊä•Out Of MemoryÈîôËØØÔºâÔºåÈÇ£‰πàMemCache‰ºöÊääËøô‰∏™slab‰∏≠ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑchunk‰∏≠ÁöÑÊï∞ÊçÆÊ∏ÖÁêÜÊéâÔºåÁÑ∂ÂêéÊîæ‰∏äÊúÄÊñ∞ÁöÑÊï∞ÊçÆ„ÄÇ MemCacheÁöÑÂÜÖÂ≠òÂàÜÈÖçchunkÈáåÈù¢‰ºöÊúâÂÜÖÂ≠òÊµ™Ë¥πÔºå88Â≠óËäÇÁöÑvalueÂàÜÈÖçÂú®128Â≠óËäÇÔºàÁ¥ßÊé•ÁùÄÂ§ßÁöÑÁî®ÔºâÁöÑchunk‰∏≠ÔºåÂ∞±ÊçüÂ§±‰∫Ü30Â≠óËäÇÔºå‰ΩÜÊòØËøô‰πüÈÅøÂÖç‰∫ÜÁÆ°ÁêÜÂÜÖÂ≠òÁ¢éÁâáÁöÑÈóÆÈ¢ò MemCacheÁöÑLRUÁÆóÊ≥ï‰∏çÊòØÈíàÂØπÂÖ®Â±ÄÁöÑÔºåÊòØÈíàÂØπslabÁöÑ ËØ•ÂèØ‰ª•ÁêÜËß£‰∏∫‰ªÄ‰πàMemCacheÂ≠òÊîæÁöÑvalueÂ§ßÂ∞èÊòØÈôêÂà∂ÁöÑÔºåÂõ†‰∏∫‰∏Ä‰∏™Êñ∞Êï∞ÊçÆËøáÊù•Ôºåslab‰ºöÂÖà‰ª•page‰∏∫Âçï‰ΩçÁî≥ËØ∑‰∏ÄÂùóÂÜÖÂ≠òÔºåÁî≥ËØ∑ÁöÑÂÜÖÂ≠òÊúÄÂ§öÂ∞±Âè™Êúâ1MÔºåÊâÄ‰ª•valueÂ§ßÂ∞èËá™ÁÑ∂‰∏çËÉΩÂ§ß‰∫é1M‰∫Ü ÊúÄÂêéÂÜçÊÄªÁªì‰∏Ä‰∏ãmemcache MemCache‰∏≠ÂèØ‰ª•‰øùÂ≠òÁöÑitemÊï∞ÊçÆÈáèÊòØÊ≤°ÊúâÈôêÂà∂ÁöÑÔºåÂè™Ë¶ÅÂÜÖÂ≠òË∂≥Â§ü MemCacheÂçïËøõÁ®ãÂú®32‰ΩçÊú∫‰∏≠ÊúÄÂ§ß‰ΩøÁî®ÂÜÖÂ≠ò‰∏∫2GÔºå64‰ΩçÊú∫ÂàôÊ≤°ÊúâÈôêÂà∂ KeyÊúÄÂ§ß‰∏∫250‰∏™Â≠óËäÇÔºåË∂ÖËøáËØ•ÈïøÂ∫¶Êó†Ê≥ïÂ≠òÂÇ® Âçï‰∏™itemÊúÄÂ§ßÊï∞ÊçÆÊòØ1MBÔºåË∂ÖËøá1MBÁöÑÊï∞ÊçÆ‰∏ç‰∫àÂ≠òÂÇ® MemCacheÊúçÂä°Á´ØÊòØ‰∏çÂÆâÂÖ®ÁöÑÔºåÊØîÂ¶ÇÂ∑≤Áü•Êüê‰∏™MemCacheËäÇÁÇπÔºåÂèØ‰ª•Áõ¥Êé•telnetËøáÂéªÔºåÂπ∂ÈÄöËøáflush_allËÆ©Â∑≤ÁªèÂ≠òÂú®ÁöÑÈîÆÂÄºÂØπÁ´ãÂç≥Â§±Êïà ‰∏çËÉΩÂ§üÈÅçÂéÜMemCache‰∏≠ÊâÄÊúâÁöÑitemÔºåÂõ†‰∏∫Ëøô‰∏™Êìç‰ΩúÁöÑÈÄüÂ∫¶Áõ∏ÂØπÁºìÊÖ¢‰∏î‰ºöÈòªÂ°ûÂÖ∂‰ªñÁöÑÊìç‰Ωú MemCacheÁöÑÈ´òÊÄßËÉΩÊ∫êËá™‰∫é‰∏§Èò∂ÊÆµÂìàÂ∏åÁªìÊûÑÔºöÁ¨¨‰∏ÄÈò∂ÊÆµÂú®ÂÆ¢Êà∑Á´ØÔºåÈÄöËøáHashÁÆóÊ≥ïÊ†πÊçÆKeyÂÄºÁÆóÂá∫‰∏Ä‰∏™ËäÇÁÇπÔºõÁ¨¨‰∫åÈò∂ÊÆµÂú®ÊúçÂä°Á´ØÔºåÈÄöËøá‰∏Ä‰∏™ÂÜÖÈÉ®ÁöÑHashÁÆóÊ≥ïÔºåÊü•ÊâæÁúüÊ≠£ÁöÑitemÂπ∂ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ‰ªéÂÆûÁé∞ÁöÑËßíÂ∫¶ÁúãÔºåMemCacheÊòØ‰∏Ä‰∏™ÈùûÈòªÂ°ûÁöÑ„ÄÅÂü∫‰∫é‰∫ã‰ª∂ÁöÑÊúçÂä°Âô®Á®ãÂ∫è MemCacheËÆæÁΩÆÊ∑ªÂä†Êüê‰∏Ä‰∏™KeyÂÄºÁöÑÊó∂ÂÄôÔºå‰º†ÂÖ•expire‰∏∫0Ë°®Á§∫Ëøô‰∏™KeyÂÄºÊ∞∏‰πÖÊúâÊïàÔºåËøô‰∏™KeyÂÄº‰πü‰ºöÂú®30Â§©‰πãÂêéÂ§±Êïà redis redisÁâπÁÇπ ÊîØÊåÅÊï∞ÊçÆÊåÅ‰πÖÂåñÔºåÂèØ‰ª•Â∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰øùÂ≠òÂà∞Á£ÅÁõò„ÄÇ ÊîØÊåÅÊõ¥Â§öÁöÑÊï∞ÊçÆÁªìÊûÑ ÊîØÊåÅÊï∞ÊçÆÂ§á‰ªΩ ÊÄßËÉΩÊûÅÈ´òÔºåËØªÂèØ‰ª•ËææÂà∞11‰∏áÊ¨°ÊØèÁßíÔºõÂÜôËææÂà∞8‰∏á1ÂçÉÊ¨°ÊØèÁßí redisÊâÄÊúâÊìç‰ΩúÈÉΩÊòØÂéüÂ≠êÊÄßÔºåÂπ∂‰∏îÊîØÊåÅÂá†‰∏™Êìç‰Ωú‰∏ÄËµ∑ÁöÑÂéüÂ≠êÊÄß ÊîØÊåÅÂèëÂ∏É-ËÆ¢ÈòÖÂäüËÉΩ redisÈÄÇÁî®Âú∫ÊôØ ÂèñÊúÄÊñ∞n‰∏™Êï∞ÊçÆ„ÄÅÊéíË°åÊ¶ú Á≤æÂáÜËøáÊúüÊó∂Èó¥ ËÆ°Êï∞Âô® ÂîØ‰∏ÄÊÄßÊ£ÄÊü• ÂÆûÊó∂Á≥ªÁªü„ÄÅÂûÉÂúæÁ≥ªÁªü„ÄÅÁºìÂ≠òÁ≠â redis VS memcache ÂΩìÊèêÂà∞redisÂ∞±ÈóÆmemcacheÔºåÂΩìÊèêÂà∞memcacheÂ∞±ÊèêÂà∞redisÔºåËØ¥ÊòéËøô‰∏§ËÄÖÁî®ÁöÑÈÉΩÂçÅÂàÜÂπøÊ≥õÔºåredisÂè∑Áß∞‚ÄúÂº∫ÂåñÁâàmemcached‚ÄùÔºå‰ªñ‰ª¨‰πãÈó¥ÁöÑÂå∫Âà´Âà∞Â∫ïÊòØÂï•Âë¢Ôºü Âü∫Êú¨ÂëΩ‰ª§ memcacheÊîØÊåÅÁöÑÂëΩ‰ª§ÂæàÂ∞ëÔºåÂõ†‰∏∫‰ªñÂè™ÊîØÊåÅStringÁöÑÊìç‰ΩúÔºåÈÄöËÆØÂçèËÆÆÂåÖÊã¨ÊñáÊú¨Ê†ºÂºèÂíå‰∫åËøõÂà∂Ê†ºÂºèÔºåÁî®‰∫éÊª°Ë∂≥ÁÆÄÂçïÁΩëÁªúÂÆ¢Êà∑Á´ØÂ∑•ÂÖ∑ÔºàÂ¶ÇtelnetÔºâÂíåÂØπÊÄßËÉΩË¶ÅÊ±ÇÊõ¥È´òÁöÑÂÆ¢Êà∑Á´ØÁöÑ‰∏çÂêåÈúÄÊ±ÇÔºõredisÊìç‰ΩúÁ±ª‰ººÔºåÂè™ÊòØÊï∞ÊçÆÁªìÊûÑÊõ¥Â§çÊùÇ‰ª•ÊîØÊåÅÊõ¥Â§öÁöÑÁâπÊÄßÔºåÂ¶ÇÂèëÂ∏ÉËÆ¢ÈòÖ„ÄÅÊ∂àÊÅØÈòüÂàóÁ≠â„ÄÇredisÁöÑÂÆ¢Êà∑Á´Ø-ÊúçÂä°Âô®ÈÄöËÆØÂçèËÆÆÂÆåÂÖ®ÈááÁî®ÊñáÊú¨Ê†ºÂºè(Redis ClusterÊúçÂä°Á´ØËäÇÁÇπ‰πãÈó¥ÈÄöËÆØÈááÁî®‰∫åËøõÂà∂Ê†ºÂºè)„ÄÇ ‰∫ãÂä° redisÈÄöËøámulti / watch / execÁ≠âÂëΩ‰ª§ÂèØ‰ª•ÊîØÊåÅ‰∫ãÂä°ÁöÑÊ¶ÇÂøµÔºåÂéüÂ≠êÊÄßÁöÑÊâßË°å‰∏ÄÊâπÂëΩ‰ª§; memcache:Âç≥‰ΩøÂú®Â§öÁ∫øÁ®ãÊ®°ÂºèÔºåÊâÄÊúâÁöÑÂëΩ‰ª§ÈÉΩÊòØÂéüÂ≠êÁöÑÔºõÂëΩ‰ª§Â∫èÂàó‰∏çÊòØÂéüÂ≠êÁöÑ„ÄÇÂú®Âπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÊÇ®‰πüÂèØËÉΩË¶ÜÂÜô‰∫Ü‰∏Ä‰∏™Ë¢´ÂÖ∂‰ªñËøõÁ®ãsetÁöÑitem„ÄÇmemcached 1.2.5‰ª•ÂèäÊõ¥È´òÁâàÊú¨ÔºåÊèê‰æõ‰∫ÜgetsÂíåcasÂëΩ‰ª§ÔºåÂÆÉ‰ª¨ÂèØ‰ª•Ëß£ÂÜ≥‰∏äÈù¢ÁöÑÈóÆÈ¢ò„ÄÇÂ¶ÇÊûúÊÇ®‰ΩøÁî®getsÂëΩ‰ª§Êü•ËØ¢Êüê‰∏™keyÁöÑitemÔºåmemcached‰ºöÁªôÊÇ®ËøîÂõûËØ•itemÂΩìÂâçÂÄºÁöÑÂîØ‰∏ÄÊ†áËØÜ„ÄÇÂ¶ÇÊûúÊÇ®Ë¶ÜÂÜô‰∫ÜËøô‰∏™itemÂπ∂ÊÉ≥ÊääÂÆÉÂÜôÂõûÂà∞memcached‰∏≠ÔºåÊÇ®ÂèØ‰ª•ÈÄöËøácasÂëΩ‰ª§ÊääÈÇ£‰∏™ÂîØ‰∏ÄÊ†áËØÜ‰∏ÄËµ∑ÂèëÈÄÅÁªô memcached„ÄÇÂ¶ÇÊûúËØ•itemÂ≠òÊîæÂú®memcached‰∏≠ÁöÑÂîØ‰∏ÄÊ†áËØÜ‰∏éÊÇ®Êèê‰æõÁöÑ‰∏ÄËá¥ÔºåÊÇ®ÁöÑÂÜôÊìç‰ΩúÂ∞Ü‰ºöÊàêÂäü„ÄÇÂ¶ÇÊûúÂè¶‰∏Ä‰∏™ËøõÁ®ãÂú®ËøôÊúüÈó¥‰πü‰øÆÊîπ‰∫ÜËøô‰∏™ itemÔºåÈÇ£‰πàËØ•itemÂ≠òÊîæÂú®memcached‰∏≠ÁöÑÂîØ‰∏ÄÊ†áËØÜÂ∞Ü‰ºöÊîπÂèòÔºåÊÇ®ÁöÑÂÜôÊìç‰ΩúÂ∞±‰ºöÂ§±Ë¥•„ÄÇ Êï∞ÊçÆÂ§á‰ªΩÔºåÊúâÊïàÊÄßÔºåÊåÅ‰πÖÂåñÁ≠â memcached‰∏ç‰øùËØÅÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁöÑÊúâÊïàÊÄßÔºåslabÂÜÖÈÉ®Âü∫‰∫éLRU‰πü‰ºöËá™Âä®Ê∑òÊ±∞ÊóßÊï∞ÊçÆ;memcached‰πü‰∏çÂÅöÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÂ∑•‰Ωú; redisÂèØ‰ª•‰ª•master-slaveÁöÑÊñπÂºèÈÖçÁΩÆÊúçÂä°Âô®ÔºåslaveËäÇÁÇπÂØπÊï∞ÊçÆËøõË°åreplicaÂ§á‰ªΩÔºåslaveËäÇÁÇπ‰πüÂèØ‰ª•ÂÖÖÂΩìread onlyÁöÑËäÇÁÇπÂàÜÊãÖÊï∞ÊçÆËØªÂèñÁöÑÂ∑•‰Ωú;redisÂÜÖÂª∫ÊîØÊåÅ‰∏§ÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºåsnapshotÂø´ÁÖßÂíåAOFÂ¢ûÈáèLogÊñπÂºè„ÄÇ ÊÄßËÉΩ memcachedËá™Ë∫´Âπ∂‰∏ç‰∏ªÂä®ÂÆöÊúüÊ£ÄÊü•ÂíåÊ†áËÆ∞Âì™‰∫õÊï∞ÊçÆÈúÄË¶ÅË¢´Ê∑òÊ±∞ÔºåÂè™ÊúâÂΩìÂÜçÊ¨°ËØªÂèñÁõ∏ÂÖ≥Êï∞ÊçÆÊó∂ÊâçÊ£ÄÊü•Êó∂Èó¥Êà≥ÔºåÊàñËÄÖÂΩìÂÜÖÂ≠ò‰∏çÂ§ü‰ΩøÁî®ÈúÄË¶Å‰∏ªÂä®Ê∑òÊ±∞Êï∞ÊçÆÊó∂Ëøõ‰∏ÄÊ≠•Ê£ÄÊü•LRUÊï∞ÊçÆ„ÄÇ redis‰∏∫‰∫ÜÂáèÂ∞ëÂ§ßÈáèÂ∞èÊï∞ÊçÆCMDÊìç‰ΩúÁöÑÁΩëÁªúÈÄöËÆØÊó∂Èó¥ÂºÄÈîÄ RTT (Round Trip Time)ÔºåÊîØÊåÅpipelineÂíåscriptÊäÄÊúØ„ÄÇ ÈõÜÁæ§ memcachedÁöÑÊúçÂä°Âô®Á´Ø‰∫íÁõ∏ÂÆåÂÖ®Áã¨Á´ãÔºåÂÆ¢Êà∑Á´ØÈÄöÂ∏∏ÈÄöËøáÂØπÈîÆÂÄºÂ∫îÁî®hashÁÆóÊ≥ïÂÜ≥ÂÆöÊï∞ÊçÆÁöÑÂàÜÂå∫Ôºå‰∏∫‰∫ÜÂáèÂ∞ëÊúçÂä°Âô®ÁöÑÂ¢ûÂáèÂØπhashÁªìÊûúÁöÑÂΩ±ÂìçÔºåÂØºËá¥Â§ßÈù¢ÁßØÁöÑÁºìÂ≠òÂ§±ÊïàÔºåÂ§öÊï∞ÂÆ¢Êà∑Á´ØÂÆûÁé∞‰∫Ü‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ï„ÄÇ redis3.0Â∑≤ÁªèÊîØÊåÅÊúçÂä°Á´ØÈõÜÁæ§‰∫Ü„ÄÇ ÊÄßËÉΩÂØπÊØî Áî±‰∫éredisÂè™‰ΩøÁî®ÂçïÊ†∏ÔºåËÄåmemcachedÂèØ‰ª•‰ΩøÁî®Â§öÊ†∏ÔºåÊâÄ‰ª•Âπ≥ÂùáÊØè‰∏Ä‰∏™Ê†∏‰∏äredisÂú®Â≠òÂÇ®Â∞èÊï∞ÊçÆÊó∂ÊØîmemcachedÊÄßËÉΩÊõ¥È´ò„ÄÇËÄåÂú®100k‰ª•‰∏äÁöÑÊï∞ÊçÆ‰∏≠ÔºåmemcachedÊÄßËÉΩË¶ÅÈ´ò‰∫éredisÔºåËôΩÁÑ∂redisÊúÄËøë‰πüÂú®Â≠òÂÇ®Â§ßÊï∞ÊçÆÁöÑÊÄßËÉΩ‰∏äËøõË°å‰ºòÂåñÔºå‰ΩÜÊòØÊØîËµ∑memcachedÔºåËøòÊòØÁ®çÊúâÈÄäËâ≤ ÂÜÖÂ≠ò‰ΩøÁî®ÊïàÁéá ‰ΩøÁî®ÁÆÄÂçïÁöÑkey-valueÂ≠òÂÇ®ÁöÑËØùÔºåmemcachedÁöÑÂÜÖÂ≠òÂà©Áî®ÁéáÊõ¥È´òÔºåËÄåÂ¶ÇÊûúredisÈááÁî®hashÁªìÊûÑÊù•ÂÅökey-valueÂ≠òÂÇ®ÔºåÁî±‰∫éÂÖ∂ÁªÑÂêàÂºèÁöÑÂéãÁº©ÔºåÂÖ∂ÂÜÖÂ≠òÂà©Áî®Áéá‰ºöÈ´ò‰∫émemcached„ÄÇÂè¶Â§ñÔºåmemcached‰ΩøÁî®È¢ÑÂàÜÈÖçÁöÑÂÜÖÂ≠òÊ±†ÁöÑÊñπÂºèÔºåÂ∏¶Êù•‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÁ©∫Èó¥Êµ™Ë¥π Âπ∂‰∏îÂú®ÂÜÖÂ≠ò‰ªçÁÑ∂ÊúâÂæàÂ§ßÁ©∫Èó¥Êó∂ÔºåÊñ∞ÁöÑÊï∞ÊçÆ‰πüÂèØËÉΩ‰ºöË¢´ÂâîÈô§ÔºåËÄåredis‰ΩøÁî®Áé∞Âú∫Áî≥ËØ∑ÂÜÖÂ≠òÁöÑÊñπÂºèÊù•Â≠òÂÇ®Êï∞ÊçÆÔºå‰∏ç‰ºöÂâîÈô§‰ªª‰ΩïÈùû‰∏¥Êó∂Êï∞ÊçÆ redisÊõ¥ÈÄÇÂêà‰Ωú‰∏∫Â≠òÂÇ®ËÄå‰∏çÊòØcache„ÄÇ redisÊîØÊåÅÊúçÂä°Âô®Á´ØÁöÑÊï∞ÊçÆÊìç‰Ωú redisÁõ∏ÊØîmemcachedÊù•ËØ¥ÔºåÊã•ÊúâÊõ¥Â§öÁöÑÊï∞ÊçÆÁªìÊûÑÂíåÂπ∂ÊîØÊåÅÊõ¥‰∏∞ÂØåÁöÑÊï∞ÊçÆÊìç‰ΩúÔºåÈÄöÂ∏∏Âú®memcachedÈáåÔºå‰Ω†ÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊãøÂà∞ÂÆ¢Êà∑Á´ØÊù•ËøõË°åÁ±ª‰ººÁöÑ‰øÆÊîπÂÜçsetÂõûÂéª„ÄÇËøôÂ§ßÂ§ßÂ¢ûÂä†‰∫ÜÁΩëÁªúIOÁöÑÊ¨°Êï∞ÂíåÊï∞ÊçÆ‰ΩìÁßØ„ÄÇÂú®redis‰∏≠ÔºåËøô‰∫õÂ§çÊùÇÁöÑÊìç‰ΩúÈÄöÂ∏∏Âíå‰∏ÄËà¨ÁöÑGET/SET‰∏ÄÊ†∑È´òÊïà„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûúÈúÄË¶ÅÁºìÂ≠òËÉΩÂ§üÊîØÊåÅÊõ¥Â§çÊùÇÁöÑÁªìÊûÑÂíåÊìç‰ΩúÔºåÈÇ£‰πàredis‰ºöÊòØ‰∏çÈîôÁöÑÈÄâÊã© ‰ΩïÊó∂Â∫îËØ•‰ΩøÁî®memcache: È¶ñÂÖàÂ∞±ÊòØÂØπÂ∞èÂûãÈùôÊÄÅÊï∞ÊçÆËøõË°åÁºìÂ≠òÂ§ÑÁêÜÔºåÊúÄÂÖ∑‰ª£Ë°®ÊÄßÁöÑ‰æãÂ≠êÂ∞±ÊòØHTML‰ª£Á†ÅÁâáÊÆµ„ÄÇËøôÊòØÂõ†‰∏∫memcachedÂú®Â§ÑÁêÜÂÖÉÊï∞ÊçÆÊó∂ÊâÄÊ∂àËÄóÁöÑÂÜÖÂ≠òËµÑÊ∫êÁõ∏ÂØπÊõ¥Â∞ë. Âú®‰ª•ÂâçÔºåredis3.0ÁâàÊú¨‰πãÂâçÔºåmemcachedÂú®Ê®™ÂêëÊâ©Â±ïÊñπÈù¢‰πüÊØîredisÊõ¥ÂÖ∑‰ºòÂäø„ÄÇÁî±‰∫éÂÖ∂Âú®ËÆæËÆ°‰∏äÁöÑÊÄùË∑ØÂÄæÂêë‰ª•ÂèäÁõ∏ÂØπÊõ¥‰∏∫ÁÆÄÂçïÁöÑÂäüËÉΩËÆæÁΩÆÔºåmemcachedÂú®ÂÆûÁé∞Êâ©Â±ïÊó∂ÁöÑÈöæÂ∫¶ÊØîredis‰ΩéÂæóÂ§ö„ÄÇ ‰ΩïÊó∂Â∫îËØ•‰ΩøÁî®redisÔºö ÂÖ∂‰ªñÂú∫ÊôØÈÉΩÂèØ‰ª•Áî®redisÊù•ÊõøÊç¢„ÄÇ Áõ∏ÊØî‰∫éÊ≠¶Êñ≠ÁöÑLRU(Âç≥ÊúÄ‰ΩéËøëÊúü‰ΩøÁî®Èáè)ÁÆóÊ≥ïÔºåredisÂÖÅËÆ∏Áî®Êà∑Êõ¥‰∏∫Á≤æÂáÜÂú∞ËøõË°åÁªÜÂåñÊéßÂà∂ÔºåÂà©Áî®ÂÖ≠Áßç‰∏çÂêåÂõûÊî∂Á≠ñÁï•Á°ÆÂàáÊèêÈ´òÁºìÂ≠òËµÑÊ∫êÁöÑÂÆûÈôÖÂà©Áî®Áéá„ÄÇredisËøòÈááÁî®Êõ¥‰∏∫Â§çÊùÇÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ‰∏éÂõûÊî∂ÂØπË±°Â§áÈÄâÊñπÊ°à„ÄÇ memcachedÂ∞ÜÈîÆÂêçÈôêÂà∂Âú®250Â≠óËäÇÔºåÂÄº‰πüË¢´ÈôêÂà∂Âú®‰∏çË∂ÖËøá1MBÔºå‰∏îÂè™ÈÄÇÁî®‰∫éÊôÆÈÄöÂ≠óÁ¨¶‰∏≤„ÄÇredisÂàôÂ∞ÜÈîÆÂêç‰∏éÂÄºÁöÑÊúÄÂ§ß‰∏äÈôêÂêÑËá™ËÆæÂÆö‰∏∫512MBÔºå‰∏îÊîØÊåÅ‰∫åËøõÂà∂Ê†ºÂºè„ÄÇ ÂÆÉÊâÄ‰øùÂ≠òÁöÑÊï∞ÊçÆÂÖ∑Â§áÈÄèÊòéÂåñÁâπÊÄßÔºå‰πüÂ∞±ÊòØËØ¥ÊúçÂä°Âô®ËÉΩÂ§üÁõ¥Êé•ÂØπËøô‰∫õÊï∞ÊçÆËøõË°åÊìç‰Ωú. redisËøòÊèê‰æõÂèØÈÄâËÄå‰∏îËÉΩÂ§üÂÖ∑‰ΩìË∞ÉÊï¥ÁöÑÊï∞ÊçÆÊåÅ‰πÖÊÄßÊñπÊ°à redisËÉΩÂ§üÊèê‰æõÂ§çÂà∂ÂäüËÉΩ„ÄÇÂ§çÂà∂ÂäüËÉΩÊó®Âú®Â∏ÆÂä©ÁºìÂ≠ò‰ΩìÁ≥ªÂÆûÁé∞È´òÂèØÁî®ÊÄßÈÖçÁΩÆÊñπÊ°àÔºå‰ªéËÄåÂú®ÈÅ≠ÈÅáÊïÖÈöúÁöÑÊÉÖÂÜµ‰∏ãÁªßÁª≠‰∏∫Â∫îÁî®Á®ãÂ∫èÊèê‰æõ‰∏çÈó¥Êñ≠ÁöÑÁºìÂ≠òÊúçÂä°„ÄÇ ‰ΩøÁî®redisÁöÑÊ≠£Á°ÆÂßøÂäøÔºö Ë¶ÅËøõË°åmaster-slaveÈÖçÁΩÆÔºåÂá∫Áé∞ÊúçÂä°ÊïÖÈöúÊó∂ÂèØ‰ª•ÊîØÊåÅÂàáÊç¢„ÄÇ Âú®master‰æßÁ¶ÅÁî®Êï∞ÊçÆÊåÅ‰πÖÂåñÔºåÂè™ÈúÄÂú®slave‰∏äÈÖçÁΩÆÊï∞ÊçÆÊåÅ‰πÖÂåñ„ÄÇ Áâ©ÁêÜÂÜÖÂ≠ò+ËôöÊãüÂÜÖÂ≠ò‰∏çË∂≥ÔºåËøô‰∏™Êó∂ÂÄôdump‰∏ÄÁõ¥Ê≠ªÁùÄÔºåÊó∂Èó¥‰πÖ‰∫ÜÊú∫Âô®ÊåÇÊéâ„ÄÇËøô‰∏™ÊÉÖÂÜµÂ∞±ÊòØÁÅæÈöæ„ÄÇ ÂΩìredisÁâ©ÁêÜÂÜÖÂ≠ò‰ΩøÁî®Ë∂ÖËøáÂÜÖÂ≠òÊÄªÂÆπÈáèÁöÑ3/5Êó∂Â∞±‰ºöÂºÄÂßãÊØîËæÉÂç±Èô©‰∫ÜÔºåÂ∞±ÂºÄÂßãÂÅöswap,ÂÜÖÂ≠òÁ¢éÁâáÂ§ß„ÄÇ ÂΩìËææÂà∞ÊúÄÂ§ßÂÜÖÂ≠òÊó∂Ôºå‰ºöÊ∏ÖÁ©∫Â∏¶ÊúâËøáÊúüÊó∂Èó¥ÁöÑkeyÔºåÂç≥‰ΩøkeyÊú™Âà∞ËøáÊúüÊó∂Èó¥„ÄÇ redis‰∏éDBÂêåÊ≠•ÂÜôÁöÑÈóÆÈ¢òÔºåÂÖàÂÜôDBÔºåÂêéÂÜôredisÔºåÂõ†‰∏∫ÂÜôÂÜÖÂ≠òÂü∫Êú¨‰∏äÊ≤°ÊúâÈóÆÈ¢ò„ÄÇ]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis‰∫ãÂä°]]></title>
    <url>%2F2019%2F02%2F02%2Fredis%2FRedis%E4%BA%8B%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨ÂçÅ‰∏ÄÁØáÊñáÁ´†„ÄÇËØ¶ÁªÜÊé¢ËÆ®redis‰∫ãÂä°ÁöÑÁî®Ê≥ïÂíåÂéüÁêÜ„ÄÇ redis ‰∫ãÂä°ÊòØ‰∏ÄÁªÑÂëΩ‰ª§ÁöÑÈõÜÂêàÔºåËá≥Â∞ëÊòØ‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑÂëΩ‰ª§Ôºåredis ‰∫ãÂä°‰øùËØÅËøô‰∫õÂëΩ‰ª§Ë¢´ÊâßË°åÊó∂‰∏≠Èó¥‰∏ç‰ºöË¢´‰ªª‰ΩïÂÖ∂‰ªñÊìç‰ΩúÊâìÊñ≠„ÄÇ ‰∫ãÂä°Âü∫Êú¨ËÆ§ËØÜ ÂΩìÂÆ¢Êà∑Á´ØÂ§Ñ‰∫éÈùû‰∫ãÂä°Áä∂ÊÄÅ‰∏ãÊó∂Ôºå ÊâÄÊúâÂèëÈÄÅÁªôÊúçÂä°Âô®Á´ØÁöÑÂëΩ‰ª§ÈÉΩ‰ºöÁ´ãÂç≥Ë¢´ÊúçÂä°Âô®ÊâßË°å„ÄÇ ‰ΩÜÊòØÔºå ÂΩìÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂêéÔºå ÊúçÂä°Âô®Âú®Êî∂Âà∞Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑÂëΩ‰ª§Êó∂Ôºå ‰∏ç‰ºöÁ´ãÂç≥ÊâßË°åÂëΩ‰ª§Ôºå ËÄåÊòØÂ∞ÜËøô‰∫õÂëΩ‰ª§ÂÖ®ÈÉ®ÊîæËøõ‰∏Ä‰∏™‰∫ãÂä°ÈòüÂàóÈáåÔºå ÁÑ∂ÂêéËøîÂõû QUEUED Ôºå Ë°®Á§∫ÂëΩ‰ª§Â∑≤ÂÖ•Èòü„ÄÇ ‰∫ãÂä°ÊâßË°å ÂâçÈù¢ËØ¥Âà∞Ôºå ÂΩìÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂêéÔºå ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÂëΩ‰ª§Â∞±‰ºöË¢´ÊîæËøõ‰∫ãÂä°ÈòüÂàóÈáå„ÄÇ ‰ΩÜÂÖ∂ÂÆûÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂëΩ‰ª§ÈÉΩ‰ºöË¢´ÊîæËøõ‰∫ãÂä°ÈòüÂàóÔºå ÂÖ∂‰∏≠ÁöÑ‰æãÂ§ñÂ∞±ÊòØ EXEC „ÄÅ DISCARD „ÄÅ MULTI Âíå WATCH ËøôÂõõ‰∏™ÂëΩ‰ª§ ‚Äî‚Äî ÂΩìËøôÂõõ‰∏™ÂëΩ‰ª§‰ªéÂÆ¢Êà∑Á´ØÂèëÈÄÅÂà∞ÊúçÂä°Âô®Êó∂Ôºå ÂÆÉ‰ª¨‰ºöÂÉèÂÆ¢Êà∑Á´ØÂ§Ñ‰∫éÈùû‰∫ãÂä°Áä∂ÊÄÅ‰∏ÄÊ†∑Ôºå Áõ¥Êé•Ë¢´ÊúçÂä°Âô®ÊâßË°åÔºö Â¶ÇÊûúÂÆ¢Êà∑Á´ØÊ≠£Â§Ñ‰∫é‰∫ãÂä°Áä∂ÊÄÅÔºå ÈÇ£‰πàÂΩì EXEC ÂëΩ‰ª§ÊâßË°åÊó∂Ôºå ÊúçÂä°Âô®Ê†πÊçÆÂÆ¢Êà∑Á´ØÊâÄ‰øùÂ≠òÁöÑ‰∫ãÂä°ÈòüÂàóÔºå ‰ª•ÂÖàËøõÂÖàÂá∫ÔºàFIFOÔºâÁöÑÊñπÂºèÊâßË°å‰∫ãÂä°ÈòüÂàó‰∏≠ÁöÑÂëΩ‰ª§Ôºö ÊúÄÂÖàÂÖ•ÈòüÁöÑÂëΩ‰ª§ÊúÄÂÖàÊâßË°åÔºå ËÄåÊúÄÂêéÂÖ•ÈòüÁöÑÂëΩ‰ª§ÊúÄÂêéÊâßË°å„ÄÇ ‰∫ãÂä°Âü∫Êú¨ÂëΩ‰ª§‰ªãÁªç Èô§‰∫Ü EXEC ‰πãÂ§ñÔºå ÊúçÂä°Âô®Âú®ÂÆ¢Êà∑Á´ØÂ§Ñ‰∫é‰∫ãÂä°Áä∂ÊÄÅÊó∂Ôºå ‰∏çÂä†ÂÖ•Âà∞‰∫ãÂä°ÈòüÂàóËÄåÁõ¥Êé•ÊâßË°åÁöÑÂè¶Â§ñ‰∏â‰∏™ÂëΩ‰ª§ÊòØ DISCARD „ÄÅ MULTI Âíå WATCH „ÄÇ DISCARD ÂëΩ‰ª§Áî®‰∫éÂèñÊ∂à‰∏Ä‰∏™‰∫ãÂä°Ôºå ÂÆÉÊ∏ÖÁ©∫ÂÆ¢Êà∑Á´ØÁöÑÊï¥‰∏™‰∫ãÂä°ÈòüÂàóÔºå ÁÑ∂ÂêéÂ∞ÜÂÆ¢Êà∑Á´Ø‰ªé‰∫ãÂä°Áä∂ÊÄÅË∞ÉÊï¥ÂõûÈùû‰∫ãÂä°Áä∂ÊÄÅÔºå ÊúÄÂêéËøîÂõûÂ≠óÁ¨¶‰∏≤ OK ÁªôÂÆ¢Êà∑Á´ØÔºå ËØ¥Êòé‰∫ãÂä°Â∑≤Ë¢´ÂèñÊ∂à„ÄÇ Redis ÁöÑ‰∫ãÂä°ÊòØ‰∏çÂèØÂµåÂ•óÁöÑÔºå ÂΩìÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÂ§Ñ‰∫é‰∫ãÂä°Áä∂ÊÄÅÔºå ËÄåÂÆ¢Êà∑Á´ØÂèàÂÜçÂêëÊúçÂä°Âô®ÂèëÈÄÅ MULTI Êó∂Ôºå ÊúçÂä°Âô®Âè™ÊòØÁÆÄÂçïÂú∞ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏Ä‰∏™ÈîôËØØÔºå ÁÑ∂ÂêéÁªßÁª≠Á≠âÂæÖÂÖ∂‰ªñÂëΩ‰ª§ÁöÑÂÖ•Èòü„ÄÇ MULTI ÂëΩ‰ª§ÁöÑÂèëÈÄÅ‰∏ç‰ºöÈÄ†ÊàêÊï¥‰∏™‰∫ãÂä°Â§±Ë¥•Ôºå ‰πü‰∏ç‰ºö‰øÆÊîπ‰∫ãÂä°ÈòüÂàó‰∏≠Â∑≤ÊúâÁöÑÊï∞ÊçÆ„ÄÇ WATCH Âè™ËÉΩÂú®ÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂâçÊâßË°åÔºå Âú®‰∫ãÂä°Áä∂ÊÄÅ‰∏ãÂèëÈÄÅ WATCH ÂëΩ‰ª§‰ºöÂºïÂèë‰∏Ä‰∏™ÈîôËØØÔºå ‰ΩÜÂÆÉ‰∏ç‰ºöÈÄ†ÊàêÊï¥‰∏™‰∫ãÂä°Â§±Ë¥•Ôºå ‰πü‰∏ç‰ºö‰øÆÊîπ‰∫ãÂä°ÈòüÂàó‰∏≠Â∑≤ÊúâÁöÑÊï∞ÊçÆÔºàÂíåÂâçÈù¢Â§ÑÁêÜ MULTI ÁöÑÊÉÖÂÜµ‰∏ÄÊ†∑Ôºâ„ÄÇ Ê≠£Â∏∏ÊÉÖÂÜµ 123multi//ÂºÄÂêØ‰∫ãÂä°Ôºå‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂÖà‰∏çÊâßË°åÔºåÂÖàÊöÇÊó∂‰øùÂ≠òËµ∑Êù•set key val//ÂëΩ‰ª§ÂÖ•Èòüexec//Êèê‰∫§‰∫ãÂä°ÔºàÊâßË°åÂëΩ‰ª§Ôºâ ÂºÇÂ∏∏ÊÉÖÂÜµ 1234multi//ÂºÄÂêØ‰∫ãÂä°Ôºå‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂÖà‰∏çÊâßË°åÔºåÂÖàÊöÇÊó∂‰øùÂ≠òËµ∑Êù•set key val//Ê≠£Â∏∏ÂëΩ‰ª§ÂÖ•Èòüset key//ÈîôËØØÂëΩ‰ª§ÔºåÁõ¥Êé•Êä•Èîôexec//‰∫ãÂä°Ë¢´‰∏¢ÂºÉÔºåÊèê‰∫§Â§±Ë¥• ‰æãÂ§ñÊÉÖÂÜµ 1234multi//ÂºÄÂêØ‰∫ãÂä°Ôºå‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂÖà‰∏çÊâßË°åÔºåÂÖàÊöÇÊó∂‰øùÂ≠òËµ∑Êù•set key val//Ê≠£Â∏∏ÂëΩ‰ª§ÂÖ•Èòüincr key//ËôΩÁÑ∂Â≠óÁ¨¶‰∏≤‰∏çËÉΩÂ¢û‰∏ÄÔºå‰ΩÜÊòØ‰∏çÊä•ÈîôÔºåÂÖ•Èòüexec//Ëá™Â¢û‰ºöÂ§±Ë¥•Ôºå‰ΩÜÊòØkeyË¢´ËÆæÁΩÆÊàêÂäü‰∫ÜÔºåÊï¥‰∏™‰∫ãÂä°Ê≤°ÊúâÂõûÊªö ÊîæÂºÉ‰∫ãÂä° 123multi//ÂºÄÂêØ‰∫ãÂä°Ôºå‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂÖà‰∏çÊâßË°åÔºåÂÖàÊöÇÊó∂‰øùÂ≠òËµ∑Êù•set key val//Ê≠£Â∏∏ÂëΩ‰ª§ÂÖ•Èòüdiscard ‰πêËßÇÈîÅ ‰πêËßÇÈîÅÔºöÊØèÊ¨°ÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰∏ç‰ºö‰øÆÊîπËØ•Êï∞ÊçÆÔºåÊâÄ‰ª•‰∏ç‰ºö‰∏äÈîÅÔºå‰ΩÜÊòØÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄô‰ºöÂà§Êñ≠‰∏Ä‰∏ãÂú®Ê≠§ÊúüÈó¥Âà´‰∫∫ÊúâÊ≤°ÊúâÂéªÊõ¥Êñ∞ËøôÊù°Êï∞ÊçÆÔºå‰∏ÄËà¨‰ΩøÁî®ÁâàÊú¨Âè∑ËøõË°åÂà§Êñ≠Ôºå‰πêËßÇÈîÅ‰ΩøÁî®‰∫éËØªÂ§öÂÜôÂ∞ëÁöÑÂ∫îÁî®Á±ªÂûãÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÂêûÂêêÈáè„ÄÇ ‰πêËßÇÈîÅÂ§ßÂ§öÊÉÖÂÜµÊòØÊ†πÊçÆÊï∞ÊçÆÁâàÊú¨Âè∑(version)ÁöÑÊú∫Âà∂ÂÆûÁé∞ÁöÑÔºå‰Ωï‰∏∫Êï∞ÊçÆÁâàÊú¨ÔºüÂç≥‰∏∫Êï∞ÊçÆÂ¢ûÂä†‰∏Ä‰∏™ÁâàÊú¨Ê†áËØÜÔºåÂú®Âü∫‰∫éÊï∞ÊçÆÂ∫ìË°®ÁöÑÁâàÊú¨Ëß£ÂÜ≥ÊñπÊ°à‰∏≠Ôºå‰∏ÄËà¨ÊòØÈÄöËøá‰∏∫Êï∞ÊçÆÂ∫ìÊ∑ªÂä†‰∏Ä‰∏™versionÂ≠óÊÆµÊù•ÂÆûÁé∞ËØªÂèñÂá∫Êï∞ÊçÆÊó∂ÔºåÂ∞ÜÊ≠§ÁâàÊú¨Âè∑‰∏ÄËµ∑ËØªÂá∫Ôºå‰πãÂêéÊõ¥Êñ∞Êó∂ÔºåÂØπÊ≠§ÁâàÊú¨Âè∑Âä†1ÔºåÊ≠§Êó∂Â∞ÜÊèê‰∫§Êï∞ÊçÆÁöÑÁâàÊú¨Âè∑‰∏éÊï∞ÊçÆÂ∫ìË°®ÂØπÂ∫îËÆ∞ÂΩïÁöÑÂΩìÂâçÁâàÊú¨Âè∑ËøõË°åÊØîÂØπÔºåÂ¶ÇÊûúÊèê‰∫§ÁöÑÊï∞ÊçÆÁâàÊú¨Âè∑Â§ß‰∫éÊï∞ÊçÆÂ∫ìË°®ÁöÑÂΩìÂâçÁâàÊú¨ÔºåÂàô‰∫à‰ª•Êõ¥Êñ∞ÔºåÂê¶ÂàôËÆ§‰∏∫ÊòØËøáÊúüÊï∞ÊçÆÔºå‰∏ç‰∫àÊõ¥Êñ∞„ÄÇ A B ËØªÂá∫ÁâàÊú¨Âè∑‰∏∫1ÔºåÊìç‰Ωú AÊìç‰ΩúÊó∂ÔºåËØªÂá∫ÁâàÊú¨Âè∑‰πü‰∏∫1ÔºåËøõË°åÊüê‰∏™Êìç‰Ωú(‰øÆÊîπ) ÊâßË°å‰øÆÊîπÔºåversion+1=2ÔºåÂõ†‰∏∫2&gt;1ÔºåÊâÄ‰ª•Êõ¥Êñ∞ ‚Ä¶ ‚Ä¶ ÊâßË°å‰øÆÊîπÔºåversion+1=2ÔºåÂèëÁé∞Êï∞ÊçÆÂ∫ìËÆ∞ÂΩïÁöÑÁâàÊú¨‰πü‰∏∫2Ôºå2=2,Êõ¥Êñ∞Â§±Ë¥• watchÊú∫Âà∂ WATCH ÂëΩ‰ª§Áî®‰∫éÂú®‰∫ãÂä°ÂºÄÂßã‰πãÂâçÁõëËßÜ‰ªªÊÑèÊï∞ÈáèÁöÑÈîÆÔºö ÂΩìË∞ÉÁî® EXEC ÂëΩ‰ª§ÊâßË°å‰∫ãÂä°Êó∂Ôºå Â¶ÇÊûú‰ªªÊÑè‰∏Ä‰∏™Ë¢´ÁõëËßÜÁöÑÈîÆÂ∑≤ÁªèË¢´ÂÖ∂‰ªñÂÆ¢Êà∑Á´Ø‰øÆÊîπ‰∫ÜÔºå ÈÇ£‰πàÊï¥‰∏™‰∫ãÂä°‰∏çÂÜçÊâßË°åÔºå Áõ¥Êé•ËøîÂõûÂ§±Ë¥•„ÄÇ 123456set k1 1 //ËÆæÁΩÆk1ÂÄº‰∏∫1watch k1 //ÁõëËßÜk1(ÂÖ∂‰ªñÂÆ¢Êà∑Á´Ø‰∏çËÉΩ‰øÆÊîπk1ÂÄº)set k1 2 //ËÆæÁΩÆk1ÂÄº‰∏∫2multi //ÂºÄÂßã‰∫ãÂä°set k1 3 //‰øÆÊîπk1ÂÄº‰∏∫3exex //Êèê‰∫§‰∫ãÂä°Ôºåk1ÂÄº‰ªç‰∏∫2ÔºåÂõ†‰∏∫‰∫ãÂä°ÂºÄÂßã‰πãÂâçk1ÂÄºË¢´‰øÆÊîπ‰∫Ü watchÊú∫Âà∂‰∏æ‰æã Â§ßÂÆ∂ÂèØËÉΩÁü•ÈÅìredisÊèê‰æõ‰∫ÜÂü∫‰∫éincrÂëΩ‰ª§Êù•Êìç‰Ωú‰∏Ä‰∏™Êï¥Êï∞ÂûãÊï∞ÂÄºÁöÑÂéüÂ≠êÈÄíÂ¢ûÔºåÈÇ£‰πàÊàë‰ª¨ÂÅáËÆæÂ¶ÇÊûúredisÊ≤°ÊúâËøô‰∏™incrÂëΩ‰ª§ÔºåÊàë‰ª¨ËØ•ÊÄé‰πàÂÆûÁé∞Ëøô‰∏™incrÁöÑÊìç‰ΩúÂë¢Ôºü Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊàë‰ª¨ÊÉ≥Ë¶ÅÂØπ‰∏Ä‰∏™Êï¥ÂΩ¢Êï∞ÂÄºÂÅö‰øÆÊîπÊòØËøô‰πàÂÅöÁöÑ(‰º™‰ª£Á†ÅÂÆûÁé∞)Ôºö 123val = GET mykeyval = val + 1SET mykey $val ‰ΩÜÊòØ‰∏äËø∞ÁöÑ‰ª£Á†Å‰ºöÂá∫Áé∞‰∏Ä‰∏™ÈóÆÈ¢ò,Âõ†‰∏∫‰∏äÈù¢ÂêßÊ≠£Â∏∏ÁöÑ‰∏Ä‰∏™incr(ÂéüÂ≠êÈÄíÂ¢ûÊìç‰Ωú)ÂàÜ‰∏∫‰∫Ü‰∏§ÈÉ®ÂàÜ,ÈÇ£‰πàÂú®Â§öÁ∫øÁ®ã(ÂàÜÂ∏ÉÂºè)ÁéØÂ¢É‰∏≠ÔºåËøô‰∏™Êìç‰ΩúÂ∞±ÊúâÂèØËÉΩ‰∏çÂÜçÂÖ∑ÊúâÂéüÂ≠êÊÄß‰∫Ü„ÄÇ Á†îÁ©∂ËøájavaÁöÑjucÂåÖÁöÑ‰∫∫Â∫îËØ•ÈÉΩÁü•ÈÅìcasÔºåÈÇ£‰πàredis‰πüÊèê‰æõ‰∫ÜËøôÊ†∑ÁöÑ‰∏Ä‰∏™Êú∫Âà∂ÔºåÂ∞±ÊòØÂà©Áî®watchÂëΩ‰ª§Êù•ÂÆûÁé∞ÁöÑ„ÄÇ ÂÖ∑‰ΩìÂÅöÊ≥ïÂ¶Ç‰∏ã: 123456WATCH mykeyval = GET mykeyval = val + 1MULTISET mykey $valEXEC ÂíåÊ≠§Ââç‰ª£Á†Å‰∏çÂêåÁöÑÊòØÔºåÊñ∞‰ª£Á†ÅÂú®Ëé∑ÂèñmykeyÁöÑÂÄº‰πãÂâçÂÖàÈÄöËøáWATCHÂëΩ‰ª§ÁõëÊéß‰∫ÜËØ•ÈîÆÔºåÊ≠§ÂêéÂèàÂ∞ÜsetÂëΩ‰ª§ÂåÖÂõ¥Âú®‰∫ãÂä°‰∏≠ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊúâÊïàÁöÑ‰øùËØÅÊØè‰∏™ËøûÊé•Âú®ÊâßË°åEXEC‰πãÂâçÔºåÂ¶ÇÊûúÂΩìÂâçËøûÊé•Ëé∑ÂèñÁöÑmykeyÁöÑÂÄºË¢´ÂÖ∂ÂÆÉËøûÊé•ÁöÑÂÆ¢Êà∑Á´Ø‰øÆÊîπÔºåÈÇ£‰πàÂΩìÂâçËøûÊé•ÁöÑEXECÂëΩ‰ª§Â∞ÜÊâßË°åÂ§±Ë¥•„ÄÇËøôÊ†∑Ë∞ÉÁî®ËÄÖÂú®Âà§Êñ≠ËøîÂõûÂÄºÂêéÂ∞±ÂèØ‰ª•Ëé∑ÊÇâvalÊòØÂê¶Ë¢´ÈáçÊñ∞ËÆæÁΩÆÊàêÂäü„ÄÇ Áî±‰∫éWATCHÂëΩ‰ª§ÁöÑ‰ΩúÁî®Âè™ÊòØÂΩìË¢´ÁõëÊéßÁöÑÈîÆÂÄºË¢´‰øÆÊîπÂêéÈòªÊ≠¢‰πãÂêé‰∏Ä‰∏™‰∫ãÂä°ÁöÑÊâßË°åÔºåËÄå‰∏çËÉΩ‰øùËØÅÂÖ∂‰ªñÂÆ¢Êà∑Á´Ø‰∏ç‰øÆÊîπËøô‰∏ÄÈîÆÂÄºÔºåÊâÄ‰ª•Âú®‰∏ÄËà¨ÁöÑÊÉÖÂÜµ‰∏ãÊàë‰ª¨ÈúÄË¶ÅÂú®EXECÊâßË°åÂ§±Ë¥•ÂêéÈáçÊñ∞ÊâßË°åÊï¥‰∏™ÂáΩÊï∞„ÄÇ ÊâßË°åEXECÂëΩ‰ª§Âêé‰ºöÂèñÊ∂àÂØπÊâÄÊúâÈîÆÁöÑÁõëÊéßÔºåÂ¶ÇÊûú‰∏çÊÉ≥ÊâßË°å‰∫ãÂä°‰∏≠ÁöÑÂëΩ‰ª§‰πüÂèØ‰ª•‰ΩøÁî®UNWATCHÂëΩ‰ª§Êù•ÂèñÊ∂àÁõëÊéß„ÄÇ watchÊú∫Âà∂ÂéüÁêÜ WATCH ÂëΩ‰ª§ÁöÑÂÆûÁé∞ Âú®ÊØè‰∏™‰ª£Ë°®Êï∞ÊçÆÂ∫ìÁöÑ redis.h/redisDb ÁªìÊûÑÁ±ªÂûã‰∏≠Ôºå ÈÉΩ‰øùÂ≠ò‰∫Ü‰∏Ä‰∏™ watched_keys Â≠óÂÖ∏Ôºå Â≠óÂÖ∏ÁöÑÈîÆÊòØËøô‰∏™Êï∞ÊçÆÂ∫ìË¢´ÁõëËßÜÁöÑÈîÆÔºå ËÄåÂ≠óÂÖ∏ÁöÑÂÄºÂàôÊòØ‰∏Ä‰∏™ÈìæË°®Ôºå ÈìæË°®‰∏≠‰øùÂ≠ò‰∫ÜÊâÄÊúâÁõëËßÜËøô‰∏™ÈîÆÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ ÊØîÂ¶ÇËØ¥Ôºå‰ª•‰∏ãÂ≠óÂÖ∏Â∞±Â±ïÁ§∫‰∫Ü‰∏Ä‰∏™ watched_keys Â≠óÂÖ∏ÁöÑ‰æãÂ≠êÔºö ÂÖ∂‰∏≠Ôºå ÈîÆ key1 Ê≠£Âú®Ë¢´ client2 „ÄÅ client5 Âíå client1 ‰∏â‰∏™ÂÆ¢Êà∑Á´ØÁõëËßÜÔºå ÂÖ∂‰ªñ‰∏Ä‰∫õÈîÆ‰πüÂàÜÂà´Ë¢´ÂÖ∂‰ªñÂà´ÁöÑÂÆ¢Êà∑Á´ØÁõëËßÜÁùÄ„ÄÇ WATCH ÂëΩ‰ª§ÁöÑ‰ΩúÁî®Ôºå Â∞±ÊòØÂ∞ÜÂΩìÂâçÂÆ¢Êà∑Á´ØÂíåË¶ÅÁõëËßÜÁöÑÈîÆÂú® watched_keys ‰∏≠ËøõË°åÂÖ≥ËÅî„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºå Â¶ÇÊûúÂΩìÂâçÂÆ¢Êà∑Á´Ø‰∏∫ client10086 Ôºå ÈÇ£‰πàÂΩìÂÆ¢Êà∑Á´ØÊâßË°å WATCH key1 key2 Êó∂Ôºå ÂâçÈù¢Â±ïÁ§∫ÁöÑ watched_keys Â∞ÜË¢´‰øÆÊîπÊàêËøô‰∏™Ê†∑Â≠êÔºö ÈÄöËøá watched_keys Â≠óÂÖ∏Ôºå Â¶ÇÊûúÁ®ãÂ∫èÊÉ≥Ê£ÄÊü•Êüê‰∏™ÈîÆÊòØÂê¶Ë¢´ÁõëËßÜÔºå ÈÇ£‰πàÂÆÉÂè™Ë¶ÅÊ£ÄÊü•Â≠óÂÖ∏‰∏≠ÊòØÂê¶Â≠òÂú®Ëøô‰∏™ÈîÆÂç≥ÂèØÔºõ Â¶ÇÊûúÁ®ãÂ∫èË¶ÅËé∑ÂèñÁõëËßÜÊüê‰∏™ÈîÆÁöÑÊâÄÊúâÂÆ¢Êà∑Á´ØÔºå ÈÇ£‰πàÂè™Ë¶ÅÂèñÂá∫ÈîÆÁöÑÂÄºÔºà‰∏Ä‰∏™ÈìæË°®ÔºâÔºå ÁÑ∂ÂêéÂØπÈìæË°®ËøõË°åÈÅçÂéÜÂç≥ÂèØ„ÄÇ WATCH ÁöÑËß¶Âèë Âú®‰ªª‰ΩïÂØπÊï∞ÊçÆÂ∫ìÈîÆÁ©∫Èó¥Ôºàkey spaceÔºâËøõË°å‰øÆÊîπÁöÑÂëΩ‰ª§ÊàêÂäüÊâßË°å‰πãÂêé ÔºàÊØîÂ¶Ç FLUSHDB „ÄÅ SET „ÄÅ DEL „ÄÅ LPUSH „ÄÅ SADD „ÄÅ ZREM ÔºåËØ∏Â¶ÇÊ≠§Á±ªÔºâÔºå multi.c/touchWatchedKey ÂáΩÊï∞ÈÉΩ‰ºöË¢´Ë∞ÉÁî® ‚Äî‚Äî ÂÆÉÊ£ÄÊü•Êï∞ÊçÆÂ∫ìÁöÑ watched_keys Â≠óÂÖ∏Ôºå ÁúãÊòØÂê¶ÊúâÂÆ¢Êà∑Á´ØÂú®ÁõëËßÜÂ∑≤ÁªèË¢´ÂëΩ‰ª§‰øÆÊîπÁöÑÈîÆÔºå Â¶ÇÊûúÊúâÁöÑËØùÔºå Á®ãÂ∫èÂ∞ÜÊâÄÊúâÁõëËßÜËøô‰∏™/Ëøô‰∫õË¢´‰øÆÊîπÈîÆÁöÑÂÆ¢Êà∑Á´ØÁöÑ REDIS_DIRTY_CAS ÈÄâÈ°πÊâìÂºÄÔºö ÂΩìÂÆ¢Êà∑Á´ØÂèëÈÄÅ EXEC ÂëΩ‰ª§„ÄÅËß¶Âèë‰∫ãÂä°ÊâßË°åÊó∂Ôºå ÊúçÂä°Âô®‰ºöÂØπÂÆ¢Êà∑Á´ØÁöÑÁä∂ÊÄÅËøõË°åÊ£ÄÊü•Ôºö Â¶ÇÊûúÂÆ¢Êà∑Á´ØÁöÑ REDIS_DIRTY_CAS ÈÄâÈ°πÂ∑≤ÁªèË¢´ÊâìÂºÄÔºåÈÇ£‰πàËØ¥ÊòéË¢´ÂÆ¢Êà∑Á´ØÁõëËßÜÁöÑÈîÆËá≥Â∞ëÊúâ‰∏Ä‰∏™Â∑≤ÁªèË¢´‰øÆÊîπ‰∫ÜÔºå‰∫ãÂä°ÁöÑÂÆâÂÖ®ÊÄßÂ∑≤ÁªèË¢´Á†¥Âùè„ÄÇÊúçÂä°Âô®‰ºöÊîæÂºÉÊâßË°åËøô‰∏™‰∫ãÂä°ÔºåÁõ¥Êé•ÂêëÂÆ¢Êà∑Á´ØËøîÂõûÁ©∫ÂõûÂ§çÔºåË°®Á§∫‰∫ãÂä°ÊâßË°åÂ§±Ë¥•„ÄÇ Â¶ÇÊûú REDIS_DIRTY_CAS ÈÄâÈ°πÊ≤°ÊúâË¢´ÊâìÂºÄÔºåÈÇ£‰πàËØ¥ÊòéÊâÄÊúâÁõëËßÜÈîÆÈÉΩÂÆâÂÖ®ÔºåÊúçÂä°Âô®Ê≠£ÂºèÊâßË°å‰∫ãÂä°„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºåÂÅáËÆæÊï∞ÊçÆÂ∫ìÁöÑ watched_keys Â≠óÂÖ∏Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Â¶ÇÊûúÊüê‰∏™ÂÆ¢Êà∑Á´ØÂØπ key1 ËøõË°å‰∫Ü‰øÆÊîπÔºàÊØîÂ¶ÇÊâßË°å DEL key1 ÔºâÔºå ÈÇ£‰πàÊâÄÊúâÁõëËßÜ key1 ÁöÑÂÆ¢Êà∑Á´ØÔºå ÂåÖÊã¨ client2 „ÄÅ client5 Âíå client1 ÁöÑ REDIS_DIRTY_CAS ÈÄâÈ°πÈÉΩ‰ºöË¢´ÊâìÂºÄÔºå ÂΩìÂÆ¢Êà∑Á´Ø client2 „ÄÅ client5 Âíå client1 ÊâßË°å EXEC ÁöÑÊó∂ÂÄôÔºå ÂÆÉ‰ª¨ÁöÑ‰∫ãÂä°ÈÉΩ‰ºö‰ª•Â§±Ë¥•ÂëäÁªà„ÄÇ ÊúÄÂêéÔºåÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÁªìÊùüÂÆÉÁöÑ‰∫ãÂä°Êó∂ÔºåÊó†ËÆ∫‰∫ãÂä°ÊòØÊàêÂäüÊâßË°åÔºåËøòÊòØÂ§±Ë¥•Ôºå watched_keys Â≠óÂÖ∏‰∏≠ÂíåËøô‰∏™ÂÆ¢Êà∑Á´ØÁõ∏ÂÖ≥ÁöÑËµÑÊñôÈÉΩ‰ºöË¢´Ê∏ÖÈô§„ÄÇ ‰∫ãÂä°ÁöÑ ACID ÊÄßË¥® Redis ‰∫ãÂä°‰øùËØÅ‰∫ÜÂÖ∂‰∏≠ÁöÑ‰∏ÄËá¥ÊÄßÔºàÂÅ∂Â∞î‰πüÊúâÂèØËÉΩ‰∏ç‰∏ÄËá¥ÔºâÂíåÈöîÁ¶ªÊÄßÔºå‰ΩÜÂπ∂‰∏ç‰øùËØÅÂéüÂ≠êÊÄßÂíåÊåÅ‰πÖÊÄß„ÄÇ ÂéüÂ≠êÊÄßÔºàAtomicityÔºâ Âçï‰∏™ Redis ÂëΩ‰ª§ÁöÑÊâßË°åÊòØÂéüÂ≠êÊÄßÁöÑÔºå‰ΩÜ Redis Ê≤°ÊúâÂú®‰∫ãÂä°‰∏äÂ¢ûÂä†‰ªª‰ΩïÁª¥ÊåÅÂéüÂ≠êÊÄßÁöÑÊú∫Âà∂ÔºåÊâÄ‰ª• Redis ‰∫ãÂä°ÁöÑÊâßË°åÂπ∂‰∏çÊòØÂéüÂ≠êÊÄßÁöÑ„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™‰∫ãÂä°ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâÂëΩ‰ª§ÈÉΩË¢´ÊàêÂäüÂú∞ÊâßË°åÔºåÈÇ£‰πàÁß∞Ëøô‰∏™‰∫ãÂä°ÊâßË°åÊàêÂäü„ÄÇ Âè¶‰∏ÄÊñπÈù¢ÔºåÂ¶ÇÊûú Redis ÊúçÂä°Âô®ËøõÁ®ãÂú®ÊâßË°å‰∫ãÂä°ÁöÑËøáÁ®ã‰∏≠Ë¢´ÂÅúÊ≠¢ ‚Äî‚Äî ÊØîÂ¶ÇÊé•Âà∞ KILL ‰ø°Âè∑„ÄÅÂÆø‰∏ªÊú∫Âô®ÂÅúÊú∫ÔºåÁ≠âÁ≠âÔºåÈÇ£‰πà‰∫ãÂä°ÊâßË°åÂ§±Ë¥•„ÄÇ ÂΩì‰∫ãÂä°Â§±Ë¥•Êó∂ÔºåRedis ‰πü‰∏ç‰ºöËøõË°å‰ªª‰ΩïÁöÑÈáçËØïÊàñËÄÖÂõûÊªöÂä®‰Ωú„ÄÇ ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ Redis ÁöÑ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÂèØ‰ª•ÂàÜ‰∏∫‰∏âÈÉ®ÂàÜÊù•ËÆ®ËÆ∫ÔºöÂÖ•ÈòüÈîôËØØ„ÄÅÊâßË°åÈîôËØØ„ÄÅRedis ËøõÁ®ãË¢´ÁªàÁªì„ÄÇ ÂâçÈù¢‰∏§ËÄÖ‰∏äÈù¢Â∑≤ÁªèËÆ®ËÆ∫Ëøá‰∫ÜÔºåËøôÈáåÂÜçÈáçÂ§ç‰∏Ä‰∏ã. ÂÖ•ÈòüÈîôËØØ ÂÖ•ÈòüÈîôËØØ‰∏ÄËà¨ÊòØÈîôËØØÁöÑÂëΩ‰ª§(‰∏çËÄÉËôëËÉΩ‰∏çËÉΩÊâßË°åÔºåÂëΩ‰ª§Êú¨Ë∫´Â∞±ÊòØÈîôËØØÁöÑ)ÔºåÂ∏¶Êúâ‰∏çÊ≠£Á°ÆÂÖ•ÈòüÂëΩ‰ª§ÁöÑ‰∫ãÂä°‰∏ç‰ºöË¢´ÊâßË°åÔºå‰πü‰∏ç‰ºöÂΩ±ÂìçÊï∞ÊçÆÂ∫ìÁöÑ‰∏ÄËá¥ÊÄßÔºõ ÊâßË°åÈîôËØØ Â¶ÇÊûúÂëΩ‰ª§Âú®‰∫ãÂä°ÊâßË°åÁöÑËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØÔºåÊØîÂ¶ÇËØ¥ÔºåÂØπ‰∏Ä‰∏™‰∏çÂêåÁ±ªÂûãÁöÑ key ÊâßË°å‰∫ÜÈîôËØØÁöÑÊìç‰ΩúÔºå ÈÇ£‰πà Redis Âè™‰ºöÂ∞ÜÈîôËØØÂåÖÂê´Âú®‰∫ãÂä°ÁöÑÁªìÊûú‰∏≠Ôºå Ëøô‰∏ç‰ºöÂºïËµ∑‰∫ãÂä°‰∏≠Êñ≠ÊàñÊï¥‰∏™Â§±Ë¥•Ôºå‰∏ç‰ºöÂΩ±ÂìçÂ∑≤ÊâßË°å‰∫ãÂä°ÂëΩ‰ª§ÁöÑÁªìÊûúÔºå‰πü‰∏ç‰ºöÂΩ±ÂìçÂêéÈù¢Ë¶ÅÊâßË°åÁöÑ‰∫ãÂä°ÂëΩ‰ª§Ôºå ÊâÄ‰ª•ÂÆÉÂØπ‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄß‰πüÊ≤°ÊúâÂΩ±Âìç„ÄÇ Redis ËøõÁ®ãË¢´ÁªàÁªì Â¶ÇÊûú Redis ÊúçÂä°Âô®ËøõÁ®ãÂú®ÊâßË°å‰∫ãÂä°ÁöÑËøáÁ®ã‰∏≠Ë¢´ÂÖ∂‰ªñËøõÁ®ãÁªàÁªìÔºåÊàñËÄÖË¢´ÁÆ°ÁêÜÂëòÂº∫Âà∂ÊùÄÊ≠ªÔºåÈÇ£‰πàÊ†πÊçÆ Redis ÊâÄ‰ΩøÁî®ÁöÑÊåÅ‰πÖÂåñÊ®°ÂºèÔºåÂèØËÉΩÊúâ‰ª•‰∏ãÊÉÖÂÜµÂá∫Áé∞Ôºö ÂÜÖÂ≠òÊ®°ÂºèÔºöÂ¶ÇÊûú Redis Ê≤°ÊúâÈááÂèñ‰ªª‰ΩïÊåÅ‰πÖÂåñÊú∫Âà∂ÔºåÈÇ£‰πàÈáçÂêØ‰πãÂêéÁöÑÊï∞ÊçÆÂ∫ìÊÄªÊòØÁ©∫ÁôΩÁöÑÔºåÊâÄ‰ª•Êï∞ÊçÆÊÄªÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ RDB Ê®°ÂºèÔºöÂú®ÊâßË°å‰∫ãÂä°Êó∂ÔºåRedis ‰∏ç‰ºö‰∏≠Êñ≠‰∫ãÂä°ÂéªÊâßË°å‰øùÂ≠ò RDB ÁöÑÂ∑•‰ΩúÔºåÂè™ÊúâÂú®‰∫ãÂä°ÊâßË°å‰πãÂêéÔºå‰øùÂ≠ò RDB ÁöÑÂ∑•‰ΩúÊâçÊúâÂèØËÉΩÂºÄÂßã„ÄÇÊâÄ‰ª•ÂΩì RDB Ê®°Âºè‰∏ãÁöÑ Redis ÊúçÂä°Âô®ËøõÁ®ãÂú®‰∫ãÂä°‰∏≠ÈÄîË¢´ÊùÄÊ≠ªÊó∂Ôºå‰∫ãÂä°ÂÜÖÊâßË°åÁöÑÂëΩ‰ª§Ôºå‰∏çÁÆ°ÊàêÂäü‰∫ÜÂ§öÂ∞ëÔºåÈÉΩ‰∏ç‰ºöË¢´‰øùÂ≠òÂà∞ RDB Êñá‰ª∂Èáå„ÄÇÊâÄ‰ª•ÊòæÁÑ∂‰ºöÈÄ†Êàê‰∏ç‰∏ÄËá¥ AOF Ê®°ÂºèÔºöÂõ†‰∏∫‰øùÂ≠ò AOF Êñá‰ª∂ÁöÑÂ∑•‰ΩúÂú®ÂêéÂè∞Á∫øÁ®ãËøõË°åÔºåÊâÄ‰ª•Âç≥‰ΩøÊòØÂú®‰∫ãÂä°ÊâßË°åÁöÑ‰∏≠ÈÄîÔºå‰øùÂ≠ò AOF Êñá‰ª∂ÁöÑÂ∑•‰Ωú‰πüÂèØ‰ª•ÁªßÁª≠ËøõË°å,Â¶ÇÊûú‰∫ãÂä°ËØ≠Âè•Êú™ÂÜôÂÖ•Âà∞ AOF Êñá‰ª∂ÔºåÈÇ£‰πàÊòæÁÑ∂ÊòØ‰∏ÄËá¥ÁöÑÔºåÂõ†‰∏∫‰∫ãÂä°ÈáåÁöÑÊìç‰ΩúÂÖ®ÈÉ®Â§±Ë¥•ÔºõÂ¶ÇÊûú‰∫ãÂä°ÁöÑÈÉ®ÂàÜËØ≠Âè•Ë¢´ÂÜôÂÖ•Âà∞ AOF Êñá‰ª∂ÔºåÂπ∂‰∏î AOF Êñá‰ª∂Ë¢´ÊàêÂäü‰øùÂ≠òÔºåÈÇ£‰πà‰∏çÂÆåÊï¥ÁöÑ‰∫ãÂä°ÊâßË°å‰ø°ÊÅØÂ∞±‰ºöÈÅóÁïôÂú® AOF Êñá‰ª∂ÈáåÔºåÂΩìÈáçÂêØ Redis Êó∂ÔºåÁ®ãÂ∫è‰ºöÊ£ÄÊµãÂà∞ AOF Êñá‰ª∂Âπ∂‰∏çÂÆåÊï¥ÔºåRedis ‰ºöÈÄÄÂá∫ÔºåÂπ∂Êä•ÂëäÈîôËØØ„ÄÇÈúÄË¶Å‰ΩøÁî® redis-check-aof Â∑•ÂÖ∑Â∞ÜÈÉ®ÂàÜÊàêÂäüÁöÑ‰∫ãÂä°ÂëΩ‰ª§ÁßªÈô§‰πãÂêéÔºåÊâçËÉΩÂÜçÊ¨°ÂêØÂä®ÊúçÂä°Âô®„ÄÇËøòÂéü‰πãÂêéÁöÑÊï∞ÊçÆÊÄªÊòØ‰∏ÄËá¥ÁöÑÔºåËÄå‰∏îÊï∞ÊçÆ‰πüÊòØÊúÄÊñ∞ÁöÑÔºàÁõ¥Âà∞‰∫ãÂä°ÊâßË°å‰πãÂâç‰∏∫Ê≠¢Ôºâ„ÄÇ ÈöîÁ¶ªÊÄßÔºàIsolationÔºâ Redis ÊòØÂçïËøõÁ®ãÁ®ãÂ∫èÔºåÂπ∂‰∏îÂÆÉ‰øùËØÅÂú®ÊâßË°å‰∫ãÂä°Êó∂Ôºå‰∏ç‰ºöÂØπ‰∫ãÂä°ËøõË°å‰∏≠Êñ≠Ôºå‰∫ãÂä°ÂèØ‰ª•ËøêË°åÁõ¥Âà∞ÊâßË°åÂÆåÊâÄÊúâ‰∫ãÂä°ÈòüÂàó‰∏≠ÁöÑÂëΩ‰ª§‰∏∫Ê≠¢„ÄÇÂõ†Ê≠§ÔºåRedis ÁöÑ‰∫ãÂä°ÊòØÊÄªÊòØÂ∏¶ÊúâÈöîÁ¶ªÊÄßÁöÑ„ÄÇ ÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ Âú®ÂçïÁ∫ØÁöÑÂÜÖÂ≠òÊ®°Âºè‰∏ãÔºå‰∫ãÂä°ËÇØÂÆöÊòØ‰∏çÊåÅ‰πÖÁöÑ„ÄÇ Âú® RDB Ê®°Âºè‰∏ãÔºåÊúçÂä°Âô®ÂèØËÉΩÂú®‰∫ãÂä°ÊâßË°å‰πãÂêé„ÄÅRDB Êñá‰ª∂Êõ¥Êñ∞‰πãÂâçÁöÑËøôÊÆµÊó∂Èó¥ÂÆïÊú∫ÔºåÊâÄ‰ª• RDB Ê®°Âºè‰∏ãÁöÑ Redis ‰∫ãÂä°‰πüÊòØ‰∏çÊåÅ‰πÖÁöÑ„ÄÇ Âú® AOF ÁöÑ‚ÄúÊÄªÊòØ SYNC ‚ÄùÊ®°Âºè‰∏ãÔºå‰∫ãÂä°ÁöÑÊØèÊù°ÂëΩ‰ª§Âú®ÊâßË°åÊàêÂäü‰πãÂêéÔºåÈÉΩ‰ºöÁ´ãÂç≥Ë∞ÉÁî® fsync Êàñ fdatasync Â∞Ü‰∫ãÂä°Êï∞ÊçÆÂÜôÂÖ•Âà∞ AOF Êñá‰ª∂„ÄÇ‰ΩÜÊòØÔºåËøôÁßç‰øùÂ≠òÊòØÁî±ÂêéÂè∞Á∫øÁ®ãËøõË°åÁöÑÔºå‰∏ªÁ∫øÁ®ã‰∏ç‰ºöÈòªÂ°ûÁõ¥Âà∞‰øùÂ≠òÊàêÂäüÔºåÊâÄ‰ª•‰ªéÂëΩ‰ª§ÊâßË°åÊàêÂäüÂà∞Êï∞ÊçÆ‰øùÂ≠òÂà∞Á°¨Áõò‰πãÈó¥ÔºåËøòÊòØÊúâ‰∏ÄÊÆµÈùûÂ∏∏Â∞èÁöÑÈó¥ÈöîÔºåÊúçÂä°Âô®‰πüÊúâÂèØËÉΩÂá∫Áé∞ÈóÆÈ¢òÔºåÊâÄ‰ª•ËøôÁßçÊ®°Âºè‰∏ãÁöÑ‰∫ãÂä°‰πüÊòØ‰∏çÊåÅ‰πÖÁöÑ„ÄÇ ÈÉΩÊòØ‰∏çÊåÅ‰πÖÁöÑ„ÄÇ ÊÄªÁªì MULTI ÂëΩ‰ª§ÁöÑÊâßË°åÊ†áËÆ∞ÁùÄ‰∫ãÂä°ÁöÑÂºÄÂßã ÂΩìÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂêéÔºå ÊúçÂä°Âô®Âú®Êî∂Âà∞Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑÂëΩ‰ª§Êó∂Ôºå ‰∏ç‰ºöÁ´ãÂç≥ÊâßË°åÂëΩ‰ª§Ôºå ËÄåÊòØÂ∞ÜËøô‰∫õÂëΩ‰ª§ÂÖ®ÈÉ®ÊîæËøõ‰∏Ä‰∏™‰∫ãÂä°ÈòüÂàóÈáåÔºå ÁÑ∂ÂêéËøîÂõû QUEUED Ôºå Ë°®Á§∫ÂëΩ‰ª§Â∑≤ÂÖ•Èòü Redis ÁöÑ‰∫ãÂä°‰øùËØÅ‰∫Ü ACID ‰∏≠ÁöÑ‰∏ÄËá¥ÊÄßÔºàCÔºâÔºàÂÅ∂Â∞î‰πüÊúâÂèØËÉΩ‰∏ç‰∏ÄËá¥ÔºâÂíåÈöîÁ¶ªÊÄßÔºàIÔºâÔºå‰ΩÜÂπ∂‰∏ç‰øùËØÅÂéüÂ≠êÊÄßÔºàAÔºâÂíåÊåÅ‰πÖÊÄßÔºàDÔºâ„ÄÇ ‰∏çÂä†ÂÖ•Âà∞‰∫ãÂä°ÈòüÂàóËÄåÁõ¥Êé•ÊâßË°åÁöÑÂõõ‰∏™ÂëΩ‰ª§‰∏∫ÔºöEXEC „ÄÅ DISCARD „ÄÅ MULTI Âíå WATCH DISCARD ÂëΩ‰ª§Áî®‰∫éÂèñÊ∂à‰∏Ä‰∏™‰∫ãÂä° Redis ÁöÑ‰∫ãÂä°ÊòØ‰∏çÂèØÂµåÂ•óÁöÑ WATCH Âè™ËÉΩÂú®ÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂâçÊâßË°å WATCHÊú∫Âà∂ÁöÑÂéüÁêÜ ÂèÇËÄÉÔºö ‰∫ãÂä° redisÁöÑ‰∫ãÂä°Âíåwatch]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÁºìÂ≠òÊõ¥Êñ∞]]></title>
    <url>%2F2019%2F02%2F02%2Fredis%2FRedis%E7%BC%93%E5%AD%98%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨ÂçÅÁØáÊñáÁ´†„ÄÇredisÁºìÂ≠òÊõ¥Êñ∞Á≠ñÁï•Â≠¶‰π†„ÄÇ Êõ¥Êñ∞ÁºìÂ≠òÁöÑÁöÑDesign PatternÊúâÂõõÁßçÔºöCache aside, Read through, Write through, Write behind cachingÔºåÊàë‰ª¨‰∏ãÈù¢‰∏Ä‰∏ÄÊù•Áúã‰∏Ä‰∏ãËøôÂõõÁßçPattern„ÄÇËøôÈáåÔºåÊàë‰ª¨ÂÖà‰∏çËÆ®ËÆ∫Êõ¥Êñ∞ÁºìÂ≠òÂíåÊõ¥Êñ∞Êï∞ÊçÆËøô‰∏§‰∏™‰∫ãÊòØ‰∏Ä‰∏™‰∫ãÂä°ÁöÑ‰∫ãÔºåÊàñÊòØ‰ºöÊúâÂ§±Ë¥•ÁöÑÂèØËÉΩÔºåÊàë‰ª¨ÂÖàÂÅáËÆæÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÂíåÊõ¥Êñ∞ÁºìÂ≠òÈÉΩÂèØ‰ª•ÊàêÂäüÁöÑÊÉÖÂÜµÔºàÊàë‰ª¨ÂÖàÊääÊàêÂäüÁöÑ‰ª£Á†ÅÈÄªËæëÂÖàÂÜôÂØπÔºâ„ÄÇ ÂÖàÊù•ÁúãÁúãÁºìÂ≠òÂèØËÉΩÂ≠òÂú®ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºåÁõÆÁöÑÊòØÁ™ÅÂá∫ÁºìÂ≠ò‰ΩøÁî®Á≠ñÁï•ÈÄâÊã©ÁöÑÈáçË¶ÅÊÄß„ÄÇ 1.ÁºìÂ≠òÁ©øÈÄè ÁºìÂ≠òÁ©øÈÄèÊòØËØ¥ËÆøÈóÆ‰∏Ä‰∏™ÁºìÂ≠ò‰∏≠Ê≤°ÊúâÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØËøô‰∏™Êï∞ÊçÆÊï∞ÊçÆÂ∫ì‰∏≠‰πü‰∏çÂ≠òÂú®„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÊòØÔºö ÁºìÂ≠òÁ©∫ÂØπË±°„ÄÇÂ¶ÇÊûúÁºìÂ≠òÊú™ÂëΩ‰∏≠ÔºåËÄåÊï∞ÊçÆÂ∫ì‰∏≠‰πüÊ≤°ÊúâËøô‰∏™ÂØπË±°ÔºåÂàôÂèØ‰ª•ÁºìÂ≠ò‰∏Ä‰∏™Á©∫ÂØπË±°Âà∞ÁºìÂ≠ò„ÄÇÂ¶ÇÊûú‰ΩøÁî®RedisÔºåËøôÁßçkeyÈúÄËÆæÁΩÆ‰∏Ä‰∏™ËæÉÁü≠ÁöÑÊó∂Èó¥Ôºå‰ª•Èò≤ÂÜÖÂ≠òÊµ™Ë¥π„ÄÇ ÁºìÂ≠òÈ¢ÑÊµã„ÄÇÈ¢ÑÊµãkeyÊòØÂê¶Â≠òÂú®„ÄÇÂ¶ÇÊûúÁºìÂ≠òÁöÑÈáè‰∏çÂ§ßÂèØ‰ª•‰ΩøÁî®hashÊù•Âà§Êñ≠ÔºåÂ¶ÇÊûúÈáèÂ§ßÂèØ‰ª•‰ΩøÁî®Â∏ÉÈöÜËøáÊª§Âô®Êù•ÂÅöÂà§Êñ≠„ÄÇÈááÁî®Â∏ÉÈöÜÔºåÂ∞ÜÊâÄÊúâÂèØËÉΩÂ≠òÂú®ÁöÑÊï∞ÊçÆÂìàÂ∏åÂà∞‰∏Ä‰∏™Ë∂≥Â§üÂ§ßÁöÑBitSet‰∏≠Ôºå‰∏çÂ≠òÂú®ÁöÑÊï∞ÊçÆÂ∞Ü‰ºöË¢´Êã¶Êà™ÊéâÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÂØπÂ≠òÂÇ®Á≥ªÁªüÁöÑÊü•ËØ¢ÂéãÂäõ„ÄÇ 2.ÁºìÂ≠òÂπ∂Âèë Â§ö‰∏™ÂÆ¢Êà∑Á´ØÂêåÊó∂ËÆøÈóÆ‰∏Ä‰∏™Ê≤°ÊúâÂú®cache‰∏≠ÁöÑÊï∞ÊçÆÔºåËøôÊó∂ÊØè‰∏™ÂÆ¢Êà∑Á´ØÈÉΩ‰ºöÊâßË°å‰ªéDBÂä†ËΩΩÊï∞ÊçÆsetÂà∞ÁºìÂ≠òÔºåÂ∞±‰ºöÈÄ†ÊàêÁºìÂ≠òÂπ∂Âèë„ÄÇ ÁºìÂ≠òÈ¢ÑÁÉ≠„ÄÇÊèêÂâçÊääÊâÄÊúâÈ¢ÑÊúüÁöÑÁÉ≠Êï∞ÊçÆÂä†Âà∞ÁºìÂ≠ò„ÄÇÂÆö‰ΩçÁÉ≠Êï∞ÊçÆËøòÊòØÊØîËæÉÂ§çÊùÇÁöÑ‰∫ãÊÉÖÔºåÈúÄË¶ÅÊ†πÊçÆËá™Â∑±ÁöÑÊúçÂä°ËÆøÈóÆÊÉÖÂÜµÂéªËØÑ‰º∞„ÄÇËøô‰∏™ÊñπÊ°àÂè™ËÉΩÂáèËΩªÁºìÂ≠òÂπ∂ÂèëÁöÑÂèëÁîüÊ¨°Êï∞‰∏çËÉΩÂÖ®ÈÉ®ÊäµÂà∂„ÄÇ ÁºìÂ≠òÂä†ÈîÅ„ÄÇ Â¶ÇÊûúÂ§ö‰∏™ÂÆ¢Êà∑Á´ØËÆøÈóÆ‰∏çÂ≠òÂú®ÁöÑÁºìÂ≠òÊó∂ÔºåÂú®ÊâßË°åÂä†ËΩΩÊï∞ÊçÆÂπ∂setÁºìÂ≠òËøô‰∏™ÈÄªËæë‰πãÂâçÂÖàÂä†ÈîÅÔºåÂè™ËÉΩËÆ©‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÊâßË°åËøôÊÆµÈÄªËæë„ÄÇ 3.ÁºìÂ≠òÈõ™Â¥© ÁºìÂ≠òÈõ™Â¥©ÊòØÁºìÂ≠òÊúçÂä°ÊöÇÊó∂‰∏çËÉΩÊèê‰æõÊúçÂä°ÔºåÂØºËá¥ÊâÄÊúâÁöÑËØ∑Ê±ÇÈÉΩÁõ¥Êé•ËÆøÈóÆDB„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÔºö ÊûÑÂª∫È´òÂèØÁî®ÁöÑÁºìÂ≠òÁ≥ªÁªü„ÄÇÁõÆÂâçÂ∏∏Áî®ÁöÑÁºìÂ≠òÁ≥ªÁªüRedisÂíåMemcacheÈÉΩÊîØÊåÅÈ´òÂèØÁî®ÁöÑÈÉ®ÁΩ≤ÊñπÂºèÔºåÊâÄ‰ª•ÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄô‰∏çÈò≤ÂÖàËÄÉËôëÊòØÂê¶Ë¶Å‰ª•È´òÂèØÁî®ÁöÑÈõÜÁæ§ÊñπÂºèÈÉ®ÁΩ≤„ÄÇ ÈôêÊµÅ„ÄÇNetflixÁöÑHystrixÊòØÈùûÂ∏∏‰∏çÈîôÁöÑÂ∑•ÂÖ∑ÔºåÂú®Áî®ÁºìÂ≠òÊó∂‰∏çÂ¶®Êê≠ÈÖçÂÆÉÊù•‰ΩøÁî®„ÄÇ 4.Cache Aside Pattern ‰∏ÄÁßçÈîôËØØÁöÑÂÅöÊ≥ïÊòØÔºöÂÖàÂà†Èô§ÁºìÂ≠òÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÔºåËÄåÂêéÁª≠ÁöÑÊìç‰Ωú‰ºöÊääÊï∞ÊçÆÂÜçË£ÖËΩΩÁöÑÁºìÂ≠ò‰∏≠„ÄÇËØïÊÉ≥Ôºå‰∏§‰∏™Âπ∂ÂèëÊìç‰ΩúÔºå‰∏Ä‰∏™ÊòØÊõ¥Êñ∞Êìç‰ΩúÔºåÂè¶‰∏Ä‰∏™ÊòØÊü•ËØ¢Êìç‰ΩúÔºåÊõ¥Êñ∞Êìç‰ΩúÂà†Èô§ÁºìÂ≠òÂêéÔºåÊü•ËØ¢Êìç‰ΩúÊ≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠òÔºåÂÖàÊääËÄÅÊï∞ÊçÆËØªÂá∫Êù•ÂêéÊîæÂà∞ÁºìÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÊõ¥Êñ∞Êìç‰ΩúÊõ¥Êñ∞‰∫ÜÊï∞ÊçÆÂ∫ì„ÄÇ‰∫éÊòØÔºåÂú®ÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆËøòÊòØËÄÅÁöÑÊï∞ÊçÆÔºåÂØºËá¥ÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÊòØËÑèÁöÑÔºåÁõ¥Âà∞Ëøô‰∏™ÁºìÂ≠òÂ§±Êïà‰∏∫Ê≠¢„ÄÇ Cache Aside PatternÊòØÊúÄÂ∏∏Áî®ÊúÄÂ∏∏Áî®ÁöÑpattern‰∫Ü„ÄÇÂÖ∂ÂÖ∑‰ΩìÈÄªËæëÂ¶Ç‰∏ãÔºö Â§±ÊïàÔºöÂ∫îÁî®Á®ãÂ∫èÂÖà‰ªécacheÂèñÊï∞ÊçÆÔºåÊ≤°ÊúâÂæóÂà∞ÔºåÂàô‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ÂèñÊï∞ÊçÆÔºåÊàêÂäüÂêéÔºåÊîæÂà∞ÁºìÂ≠ò‰∏≠„ÄÇ ÂëΩ‰∏≠ÔºöÂ∫îÁî®Á®ãÂ∫è‰ªécache‰∏≠ÂèñÊï∞ÊçÆÔºåÂèñÂà∞ÂêéËøîÂõû„ÄÇ Êõ¥Êñ∞ÔºöÂÖàÊääÊï∞ÊçÆÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊàêÂäüÂêéÔºåÂÜçËÆ©ÁºìÂ≠òÂ§±Êïà„ÄÇ Ê≥®ÊÑèÔºåÊàë‰ª¨ÁöÑÊõ¥Êñ∞ÊòØÂÖàÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÔºåÊàêÂäüÂêéÔºåËÆ©ÁºìÂ≠òÂ§±Êïà„ÄÇÈÇ£‰πàÔºåËøôÁßçÊñπÂºèÊòØÂê¶ÂèØ‰ª•Ê≤°ÊúâÊñáÁ´†ÂâçÈù¢ÊèêÂà∞ËøáÁöÑÈÇ£‰∏™ÈóÆÈ¢òÂë¢Ôºü ‰∏Ä‰∏™ÊòØÊü•ËØ¢Êìç‰ΩúÔºå‰∏Ä‰∏™ÊòØÊõ¥Êñ∞Êìç‰ΩúÁöÑÂπ∂ÂèëÔºåÈ¶ñÂÖàÔºåÊ≤°Êúâ‰∫ÜÂà†Èô§cacheÊï∞ÊçÆÁöÑÊìç‰Ωú‰∫ÜÔºåËÄåÊòØÂÖàÊõ¥Êñ∞‰∫ÜÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÔºåÊ≠§Êó∂ÔºåÁºìÂ≠ò‰æùÁÑ∂ÊúâÊïàÔºåÊâÄ‰ª•ÔºåÂπ∂ÂèëÁöÑÊü•ËØ¢Êìç‰ΩúÊãøÁöÑÊòØÊ≤°ÊúâÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÔºåÊõ¥Êñ∞Êìç‰ΩúÈ©¨‰∏äËÆ©ÁºìÂ≠òÁöÑÂ§±Êïà‰∫ÜÔºåÂêéÁª≠ÁöÑÊü•ËØ¢Êìç‰ΩúÂÜçÊääÊï∞ÊçÆ‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ÊãâÂá∫Êù•„ÄÇËÄå‰∏ç‰ºöÂÉèÊñáÁ´†ÂºÄÂ§¥ÁöÑÈÇ£‰∏™ÈÄªËæë‰∫ßÁîüÁöÑÈóÆÈ¢òÔºåÂêéÁª≠ÁöÑÊü•ËØ¢Êìç‰Ωú‰∏ÄÁõ¥ÈÉΩÂú®ÂèñËÄÅÁöÑÊï∞ÊçÆ„ÄÇ ‰ΩÜËøòÊòØÂ≠òÂú®ÈóÆÈ¢òÁöÑ„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™ÊòØËØªÊìç‰ΩúÔºå‰ΩÜÊòØÊ≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠òÔºåÁÑ∂ÂêéÂ∞±Âà∞Êï∞ÊçÆÂ∫ì‰∏≠ÂèñÊï∞ÊçÆÔºåÊ≠§Êó∂Êù•‰∫Ü‰∏Ä‰∏™ÂÜôÊìç‰ΩúÔºåÂÜôÂÆåÊï∞ÊçÆÂ∫ìÂêéÔºåËÆ©ÁºìÂ≠òÂ§±ÊïàÔºåÁÑ∂ÂêéÔºå‰πãÂâçÁöÑÈÇ£‰∏™ËØªÊìç‰ΩúÂÜçÊääËÄÅÁöÑÊï∞ÊçÆÊîæËøõÂéªÔºåÊâÄ‰ª•Ôºå‰ºöÈÄ†ÊàêËÑèÊï∞ÊçÆ„ÄÇ‰∏çËøáÔºåÂÆûÈôÖ‰∏äÂá∫Áé∞ÁöÑÊ¶ÇÁéáÂèØËÉΩÈùûÂ∏∏‰Ωé. ÊâÄ‰ª•ÔºåËøô‰πüÂ∞±ÊòØQuora‰∏äÁöÑÈÇ£‰∏™Á≠îÊ°àÈáåËØ¥ÁöÑÔºåË¶Å‰πàÈÄöËøá2PCÊàñÊòØPaxosÂçèËÆÆ‰øùËØÅ‰∏ÄËá¥ÊÄßÔºåË¶Å‰πàÂ∞±ÊòØÊãºÂëΩÁöÑÈôç‰ΩéÂπ∂ÂèëÊó∂ËÑèÊï∞ÊçÆÁöÑÊ¶ÇÁéáÔºåËÄåFacebook‰ΩøÁî®‰∫ÜËøô‰∏™Èôç‰ΩéÊ¶ÇÁéáÁöÑÁé©Ê≥ïÔºåÂõ†‰∏∫2PCÂ§™ÊÖ¢ÔºåËÄåPaxosÂ§™Â§çÊùÇ„ÄÇÂΩìÁÑ∂ÔºåÊúÄÂ•ΩËøòÊòØ‰∏∫ÁºìÂ≠òËÆæÁΩÆ‰∏äËøáÊúüÊó∂Èó¥„ÄÇ 5.Read/Write Through Pattern Read ThroughÔºöËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ¶ÇÊûúÂΩìÂâçÁºìÂ≠ò‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÊÉØÂ∏∏ÁöÑÊìç‰ΩúÈÉΩÊòØÂ∫îÁî®Á®ãÂ∫èÂéªDBÂä†ËΩΩÊï∞ÊçÆÔºåÁÑ∂ÂêéÂä†ÂÖ•Âà∞ÁºìÂ≠ò‰∏≠„ÄÇRead Through‰∏é‰πã‰∏çÂêåÁöÑÊòØÊàë‰ª¨‰∏çÈúÄË¶ÅÂú®Â∫îÁî®Á®ãÂ∫èËá™Â∑±Âä†ËΩΩÊï∞ÊçÆ‰∫ÜÔºåÁºìÂ≠òÂ±Ç‰ºöÂ∏ÆÂøôÂÅö‰ª∂‰∫ã„ÄÇ Write ThroughÔºöÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂëΩ‰∏≠ÁºìÂ≠òÔºåÂàôÂÖàÊõ¥Êñ∞ÁºìÂ≠òÁÑ∂ÂêéÁºìÂ≠òÂú®Ë¥üË¥£ÊääÊï∞ÊçÆÊõ¥Êñ∞Âà∞Êï∞ÊçÆÂ∫ìÔºõÂ¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠òÂàôÁõ¥Êé•Êõ¥Êñ∞Êï∞ÊçÆÂ∫ì„ÄÇ ËøôÁßçÊñπÂºèÁºìÂ≠òÂ±ÇÁõ¥Êé•Â±èËîΩ‰∫ÜDBÔºåÂ∫îÁî®Á®ãÂ∫èÂè™ÈúÄË¶ÅÊõ¥ÁºìÂ≠òÊâì‰∫§ÈÅì„ÄÇ‰ºòÁÇπÊòØÂ∫îÁî®ÈÄªËæëÁÆÄÂçï‰∫ÜÔºåËÄå‰∏îÊõ¥È´òÊïà‰∫ÜÔºõÁº∫ÁÇπÊòØÁºìÂ≠òÂ±ÇÁöÑÂÆûÁé∞Áõ∏ÂØπÂ§çÊùÇ‰∏Ä‰∫õ„ÄÇ 6.Write Back Pattern Write BackÂ•óË∑ØÔºå‰∏ÄÂè•ËØ¥Â∞±ÊòØÔºåÂú®Êõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂè™Êõ¥Êñ∞ÁºìÂ≠òÔºå‰∏çÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÔºåËÄåÊàë‰ª¨ÁöÑÁºìÂ≠ò‰ºöÂºÇÊ≠•Âú∞ÊâπÈáèÊõ¥Êñ∞Êï∞ÊçÆÂ∫ì„ÄÇËøô‰∏™ËÆæËÆ°ÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØËÆ©Êï∞ÊçÆÁöÑI/OÊìç‰ΩúÈ£ûÂø´Êó†ÊØîÔºàÂõ†‰∏∫Áõ¥Êé•Êìç‰ΩúÂÜÖÂ≠òÂòõ ÔºâÔºåÂõ†‰∏∫ÂºÇÊ≠•Ôºåwrite backgËøòÂèØ‰ª•ÂêàÂπ∂ÂØπÂêå‰∏Ä‰∏™Êï∞ÊçÆÁöÑÂ§öÊ¨°Êìç‰ΩúÔºåÊâÄ‰ª•ÊÄßËÉΩÁöÑÊèêÈ´òÊòØÁõ∏ÂΩìÂèØËßÇÁöÑ„ÄÇ ‰ΩÜÊòØÔºåÂÖ∂Â∏¶Êù•ÁöÑÈóÆÈ¢òÊòØÔºåÊï∞ÊçÆ‰∏çÊòØÂº∫‰∏ÄËá¥ÊÄßÁöÑÔºåËÄå‰∏îÂèØËÉΩ‰ºö‰∏¢Â§±ÔºàÊàë‰ª¨Áü•ÈÅìUnix/LinuxÈùûÊ≠£Â∏∏ÂÖ≥Êú∫‰ºöÂØºËá¥Êï∞ÊçÆ‰∏¢Â§±ÔºåÂ∞±ÊòØÂõ†‰∏∫Ëøô‰∏™‰∫ãÔºâ„ÄÇÂú®ËΩØ‰ª∂ËÆæËÆ°‰∏äÔºåÊàë‰ª¨Âü∫Êú¨‰∏ä‰∏çÂèØËÉΩÂÅöÂá∫‰∏Ä‰∏™Ê≤°ÊúâÁº∫Èô∑ÁöÑËÆæËÆ°ÔºåÂ∞±ÂÉèÁÆóÊ≥ïËÆæËÆ°‰∏≠ÁöÑÊó∂Èó¥Êç¢Á©∫Èó¥ÔºåÁ©∫Èó¥Êç¢Êó∂Èó¥‰∏Ä‰∏™ÈÅìÁêÜÔºåÊúâÊó∂ÂÄôÔºåÂº∫‰∏ÄËá¥ÊÄßÂíåÈ´òÊÄßËÉΩÔºåÈ´òÂèØÁî®ÂíåÈ´òÊÄßÊÄßÊòØÊúâÂÜ≤Á™ÅÁöÑ„ÄÇ Âè¶Â§ñÔºåWrite BackÂÆûÁé∞ÈÄªËæëÊØîËæÉÂ§çÊùÇÔºåÂõ†‰∏∫‰ªñÈúÄË¶ÅtrackÊúâÂì™Êï∞ÊçÆÊòØË¢´Êõ¥Êñ∞‰∫ÜÁöÑÔºåÈúÄË¶ÅÂà∑Âà∞ÊåÅ‰πÖÂ±Ç‰∏ä„ÄÇÊìç‰ΩúÁ≥ªÁªüÁöÑwrite back‰ºöÂú®‰ªÖÂΩìËøô‰∏™cacheÈúÄË¶ÅÂ§±ÊïàÁöÑÊó∂ÂÄôÔºåÊâç‰ºöË¢´ÁúüÊ≠£ÊåÅ‰πÖËµ∑Êù•ÔºåÊØîÂ¶ÇÔºåÂÜÖÂ≠ò‰∏çÂ§ü‰∫ÜÔºåÊàñÊòØËøõÁ®ãÈÄÄÂá∫‰∫ÜÁ≠âÊÉÖÂÜµÔºåËøôÂèàÂè´lazy write„ÄÇ 7.ÂÆûÈôÖ‰ΩøÁî®ÁöÑ‰∏Ä‰∫õÁ≠ñÁï• ‰∏öÂä°ÊñπÔºàË∞ÉÁî®ËÄÖÔºâÊõ¥Êñ∞ ‰º†Áªü‰∏äÔºåÊõ¥Êñ∞ÁºìÂ≠òÈÉΩÊòØÁî±‰∏öÂä°ÊñπÊù•ÂÅöÔºå‰πüÂ∞±ÊòØÁî±Ë∞ÉÁî®ËÄÖË¥üË¥£Êõ¥Êñ∞DBÂíåÁºìÂ≠ò„ÄÇ DB‰∏≠Èó¥‰ª∂ÁõëÂê¨DBÂèòÂåñÔºåÊõ¥Êñ∞ÁºìÂ≠ò Áé∞Âú®ÊúâÁßçÊñ∞ÁöÑÂäûÊ≥ïÂ∞±ÊòØÂà©Áî®DB‰∏≠Èó¥‰ª∂ÁõëÂê¨DBÂèòÂåñÔºàÊØîÂ¶ÇÈòøÈáåÁöÑCanal‰∏≠Èó¥‰ª∂ÔºåÁÇπËØÑÁöÑPumaÔºâÔºå‰ªéËÄåÂØπÁºìÂ≠òËøõË°åÊõ¥Êñ∞„ÄÇ ËøôÁßçÂäûÊ≥ïÁöÑ‰∏Ä‰∏™Â•ΩÂ§ÑÂ∞±ÊòØÔºöÊääÁºìÂ≠òÁöÑÊõ¥Êñ∞ÈÄªËæëÔºåÂíå‰∏öÂä°ÈÄªËæëËß£Ëóï„ÄÇ‰∏öÂä°Âè™Êõ¥Êñ∞DBÔºåÁºìÂ≠òÁöÑÊõ¥Êñ∞Ë¢´ÊîæÂú®Âè¶Â§ñ‰∏Ä‰∏™‰∏ìÈó®ÁöÑÁ≥ªÁªüÈáåÈù¢„ÄÇ 8.ÊÄªÁªì ‰∏ÄÂè•ËØùÔºåÊó†ËÆ∫Ë∞ÅÂÖàË∞ÅÂêéÔºåÂè™Ë¶ÅÊõ¥Êñ∞ÁºìÂ≠òÂíåÊõ¥Êñ∞DB‰∏çÊòØÂéüÂ≠êÁöÑÔºåÂ∞±ÂèØËÉΩÂØºËá¥‰∏ç‰∏ÄËá¥„ÄÇ ÊÄª‰πãÔºåÂè™ÊòØ‰ªéÂÆûÈôÖ‰∏öÂä°Êù•ËÆ≤Ôºå‰∏ÄËà¨ÁºìÂ≠ò‰πüÈÉΩÊòØ‰øùÊåÅ‚ÄúÊúÄÁªà‰∏ÄËá¥ÊÄß‚ÄúÔºåËÄå‰∏çÊòØÂíåDBÁöÑÂº∫‰∏ÄËá¥ÊÄß„ÄÇ Âπ∂‰∏î‰∏ÄËà¨Âª∫ËÆÆÂÖàÊõ¥Êñ∞DBÔºåÂÜçÊõ¥Êñ∞ÁºìÂ≠òÔºå‰ºòÂÖà‰øùËØÅDBÊï∞ÊçÆÊ≠£Á°Æ„ÄÇ 9.‰∏ÄËá¥ÊÄßÈóÆÈ¢ò ‰∏äÈù¢ÔºåÊàë‰ª¨Ê≤°ÊúâËÄÉËôëÁºìÂ≠òÔºàCacheÔºâÂíåÊåÅ‰πÖÂ±ÇÔºàRepositoryÔºâÁöÑÊï¥‰Ωì‰∫ãÂä°ÁöÑÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇÔºåÊõ¥Êñ∞CacheÊàêÂäüÔºåÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•‰∫ÜÊÄé‰πàÂêóÔºüÊàñÊòØÂèçËøáÊù•„ÄÇÂÖ≥‰∫éËøô‰∏™‰∫ãÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂº∫‰∏ÄËá¥ÊÄßÔºå‰Ω†ÈúÄË¶Å‰ΩøÁî®‚Äú‰∏§Èò∂ÊÆµÊèê‰∫§ÂçèËÆÆ‚Äù‚Äî‚Äîprepare, commit/rollback.ÂêéÁª≠ÂÜçÊé¢ËÆ®„ÄÇ ÂèÇËÄÉ1Ôºöhttps://coolshell.cn/articles/17416.html ÂèÇËÄÉ2Ôºöhttps://www.jianshu.com/p/3c111e4719b8 ÂèÇËÄÉ3ÔºöÁºìÂ≠òÊõ¥Êñ∞Á≠ñÁï•/ÁºìÂ≠òÁ©øÈÄè/ÁºìÂ≠òÈõ™Â¥©]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÁºìÂ≠òËÆæËÆ°‰∏é‰ºòÂåñ]]></title>
    <url>%2F2019%2F02%2F01%2Fredis%2F%E7%BC%93%E5%AD%98%E8%AE%BE%E8%AE%A1%E4%B8%8E%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨‰πùÁØáÊñáÁ´†„ÄÇ‰ªãÁªçredisÁºìÂ≠ò‰∏≠ ‰∏Ä‰∫õÈáçË¶ÅÁöÑÈóÆÈ¢ò„ÄÇ 1. ÁºìÂ≠òÊî∂ÁõäÂíåÊàêÊú¨ 1.1 Êî∂Áõä Âä†ÈÄüËØªÂÜô Èôç‰ΩéÂêéÁ´ØË¥üËΩΩ(Èôç‰ΩémysqlË¥üËΩΩ) 1.2 ÊàêÊú¨ Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÔºöÁºìÂ≠òÂ±ÇÂíåÊï∞ÊçÆÂ±ÇÊúâÊó∂Èó¥Á™óÂè£‰∏ç‰∏ÄËá¥ÔºåÂíåÊõ¥Êñ∞Á≠ñÁï•ÊúâÂÖ≥ ‰ª£Á†ÅÁª¥Êä§ÊàêÊú¨ÔºöÂ§ö‰∫Ü‰∏ÄÂ±ÇÁºìÂ≠òÈÄªËæë ËøêÁª¥ÊàêÊú¨Ôºö‰æãÂ¶Çredis cluster 1.3 ‰ΩøÁî®Âú∫ÊôØ Èôç‰ΩéÂêéÁ´ØË¥üËΩΩÔºöÂØπ‰∫éÈ´òÊ∂àËÄóÁöÑSQLÔºöjoinÁªìÊûúÈõÜ„ÄÅÂàÜÁªÑÁªüËÆ°ÁªìÊûúÔºõÂØπËøô‰∫õÁªìÊûúËøõË°åÁºìÂ≠ò„ÄÇ Âä†ÈÄüËØ∑Ê±ÇÂìçÂ∫î Â§ßÈáèÂÜôÂêàÂπ∂‰∏∫ÊâπÈáèÂÜôÔºöÂ¶ÇËÆ°Êï∞Âô®ÂÖàredisÁ¥ØÂä†ÂÜçÊâπÈáèÂÜôÂÖ•DB 2. ÁºìÂ≠òÁöÑÊõ¥Êñ∞Á≠ñÁï• LRU/LFU/FIFOÁÆóÊ≥ïÂâîÈô§Ôºö‰æãÂ¶Çmaxmemory-policy FIFO(first in first out) ÂÖàËøõÂÖàÂá∫Á≠ñÁï•ÔºåÊúÄÂÖàËøõÂÖ•ÁºìÂ≠òÁöÑÊï∞ÊçÆÂú®ÁºìÂ≠òÁ©∫Èó¥‰∏çÂ§üÁöÑÊÉÖÂÜµ‰∏ãÔºàË∂ÖÂá∫ÊúÄÂ§ßÂÖÉÁ¥†ÈôêÂà∂Ôºâ‰ºöË¢´‰ºòÂÖàË¢´Ê∏ÖÈô§ÊéâÔºå‰ª•ËÖæÂá∫Êñ∞ÁöÑÁ©∫Èó¥Êé•ÂèóÊñ∞ÁöÑÊï∞ÊçÆ„ÄÇÁ≠ñÁï•ÁÆóÊ≥ï‰∏ªË¶ÅÊØîËæÉÁºìÂ≠òÂÖÉÁ¥†ÁöÑÂàõÂª∫Êó∂Èó¥„ÄÇÂú®Êï∞ÊçÆÂÆûÊïàÊÄßË¶ÅÊ±ÇÂú∫ÊôØ‰∏ãÂèØÈÄâÊã©ËØ•Á±ªÁ≠ñÁï•Ôºå‰ºòÂÖà‰øùÈöúÊúÄÊñ∞Êï∞ÊçÆÂèØÁî®„ÄÇ LFU(less frequently used) ÊúÄÂ∞ë‰ΩøÁî®Á≠ñÁï•ÔºåÊó†ËÆ∫ÊòØÂê¶ËøáÊúüÔºåÊ†πÊçÆÂÖÉÁ¥†ÁöÑË¢´‰ΩøÁî®Ê¨°Êï∞Âà§Êñ≠ÔºåÊ∏ÖÈô§‰ΩøÁî®Ê¨°Êï∞ËæÉÂ∞ëÁöÑÂÖÉÁ¥†ÈáäÊîæÁ©∫Èó¥„ÄÇÁ≠ñÁï•ÁÆóÊ≥ï‰∏ªË¶ÅÊØîËæÉÂÖÉÁ¥†ÁöÑhitCountÔºàÂëΩ‰∏≠Ê¨°Êï∞Ôºâ„ÄÇÂú®‰øùËØÅÈ´òÈ¢ëÊï∞ÊçÆÊúâÊïàÊÄßÂú∫ÊôØ‰∏ãÔºåÂèØÈÄâÊã©ËøôÁ±ªÁ≠ñÁï•„ÄÇ LRU(least recently used) ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®Á≠ñÁï•ÔºåÊó†ËÆ∫ÊòØÂê¶ËøáÊúüÔºåÊ†πÊçÆÂÖÉÁ¥†ÊúÄÂêé‰∏ÄÊ¨°Ë¢´‰ΩøÁî®ÁöÑÊó∂Èó¥Êà≥ÔºåÊ∏ÖÈô§ÊúÄËøú‰ΩøÁî®Êó∂Èó¥Êà≥ÁöÑÂÖÉÁ¥†ÈáäÊîæÁ©∫Èó¥„ÄÇÁ≠ñÁï•ÁÆóÊ≥ï‰∏ªË¶ÅÊØîËæÉÂÖÉÁ¥†ÊúÄËøë‰∏ÄÊ¨°Ë¢´get‰ΩøÁî®Êó∂Èó¥„ÄÇÂú®ÁÉ≠ÁÇπÊï∞ÊçÆÂú∫ÊôØ‰∏ãËæÉÈÄÇÁî®Ôºå‰ºòÂÖà‰øùËØÅÁÉ≠ÁÇπÊï∞ÊçÆÁöÑÊúâÊïàÊÄß„ÄÇ Ë∂ÖÊó∂ÂâîÈô§Ôºö‰æãÂ¶Çexpire ‰∏ªÂä®Êõ¥Êñ∞ÔºöÂºÄÂèëÊéßÂà∂ÁîüÂëΩÂë®ÊúüÔºàÊúÄÁªà‰∏ÄËá¥ÊÄßÔºåÊó∂Èó¥Èó¥ÈöîÊØîËæÉÁü≠Ôºâ ‰Ωé‰∏ÄËá¥ÊÄßÔºöÊúÄÂ§ßÂÜÖÂ≠òÂíåÊ∑òÊ±∞Á≠ñÁï• È´ò‰∏ÄËá¥ÊÄßÔºöË∂ÖÊó∂ÂâîÈô§Âíå‰∏ªÂä®Êõ¥Êñ∞ÁªìÂêàÔºåÊúÄÂ§ßÂÜÖÂ≠òÂíåÊ∑òÊ±∞Á≠ñÁï•ÂÖúÂ∫ï„ÄÇ 3. ÁºìÂ≠òÁ≤íÂ∫¶ÊéßÂà∂ 3.1 ÁºìÂ≠òÁ≤íÂ∫¶ÊéßÂà∂‰∏â‰∏™ËßíÂ∫¶ ÈÄöÁî®ÊÄßÔºöÂÖ®ÈáèÂ±ûÊÄßÊõ¥Â•Ω(Ê∑ªÂä†Âà†Èô§Â±ûÊÄß‰∏çÈúÄË¶ÅÊîπ‰∏úË•ø) Âç†Áî®Á©∫Èó¥ÔºöÈÉ®ÂàÜÂ±ûÊÄßÊõ¥Â•Ω ‰ª£Á†ÅÁª¥Êä§ÔºöË°®Èù¢‰∏äÂÖ®ÈáèÂ±ûÊÄßÊõ¥Â•Ω(Ê∑ªÂä†Âà†Èô§Â±ûÊÄß‰∏çÈúÄË¶ÅÊîπ‰∏úË•ø) 4. ÁºìÂ≠òÁ©øÈÄè‰ºòÂåñ 4.1 ÂÆö‰πâ Â§ßÈáèËØ∑Ê±Ç‰∏çÂëΩ‰∏≠,ÁºìÂ≠òÂ∑≤ÁªèÊ≤°ÊúâÂ≠òÂú®ÁöÑÊÑè‰πâ‰∫ÜÔºö 4.2 ‰∫ßÁîüÂéüÂõ† ‰∏öÂä°‰ª£Á†ÅËá™Ë∫´ÈóÆÈ¢ò ÊÅ∂ÊÑèÊîªÂáª„ÄÅÁà¨Ëô´Á≠â 4.3 Â¶Ç‰ΩïÂèëÁé∞ ‰∏öÂä°ÂìçÂ∫îÊó∂Èó¥ ‰∏öÂä°Êú¨Ë∫´ÈóÆÈ¢ò Áõ∏ÂÖ≥ÊåáÊ†áÔºöÊÄªË∞ÉÁî®Êï∞„ÄÅÁºìÂ≠òÂ±ÇÂëΩ‰∏≠Êï∞„ÄÅÂ≠òÂÇ®Â±ÇÂëΩ‰∏≠Êï∞ 4.4 Ëß£ÂÜ≥ÊñπÊ°à ÊñπÊ°à‰∏ÄÔºöÁºìÂ≠òÁ©∫ÂØπË±° Â≠òÂú®ÁöÑÈóÆÈ¢ò ÈúÄË¶ÅÊõ¥Â§öÁöÑÈîÆ:ÊÅ∂ÊÑèÊîªÂáª„ÄÅÁà¨Ëô´‰ºöÊúâÂæàÂ§ö‰π±‰∏ÉÂÖ´Á≥üÁöÑÈîÆÔºåÂΩìÈáèÂæàÂ§ßÊó∂Ôºå‰ºöÊúâÈ£éÈô©ÔºåÊâÄ‰ª•‰ºöÂØπËøôÁßçÁ©∫ÂØπË±°ËÆæÁΩÆÁºìÂ≠òÊó∂Èó¥ÊéßÂà∂È£éÈô© ÁºìÂ≠òÂ±ÇÂíåÂ≠òÂÇ®Â±ÇÊï∞ÊçÆ‚ÄúÁü≠Êúü‚Äù‰∏ç‰∏ÄËá¥ÔºöÁºìÂ≠ò‰∫ÜÁ©∫ÂØπË±°Ôºå‰ΩÜÊòØÂΩì‰∏öÂä°ÊÅ¢Â§ç‰∫ÜÔºåÁúüÂÆûÊï∞ÊçÆÂèàÂ≠òÂú®‰∫éDB‰∏≠‰∫ÜÔºåÈÇ£‰πàÂú®Ëøô‰∏™Á©∫ÂØπË±°ËøáÊúüÊó∂Èó¥ÂÜÖÔºåÂèñÂà∞ÁöÑ‰ªçÁÑ∂ÊòØÁ©∫ÂØπË±°ÔºåÈÄ†ÊàêÁü≠ÊúüÂÜÖÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢ò„ÄÇËß£ÂÜ≥ÔºöÂèØ‰ª•ËÆ¢ÈòÖÊ∂àÊÅØÔºåÂΩìÊÅ¢Â§çÊ≠£Â∏∏ÂêéÊé•ÂèóÂà∞Ê∂àÊÅØÔºåÁÑ∂ÂêéÂà∑Êñ∞ÁºìÂ≠ò„ÄÇ ÊñπÊ°à‰∫åÔºöÂ∏ÉÈöÜËøáÊª§Âô®Êã¶Êà™ ‰ªÄ‰πàÊòØBloom FilterÔºü Â∏ÉÈöÜËøáÊª§Âô®ÔºàBloom FilterÔºâÊòØ1970Âπ¥Áî±Â∏ÉÈöÜÊèêÂá∫ÁöÑ, ‚Äúa space-efficient probabilistic data structure‚Äù„ÄÇÂÆÉÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™ÂæàÈïøÁöÑ‰∫åËøõÂà∂Áü¢ÈáèÂíå‰∏ÄÁ≥ªÂàóÈöèÊú∫Êò†Â∞ÑÂáΩÊï∞„ÄÇÂ∏ÉÈöÜËøáÊª§Âô®ÂèØ‰ª•Áî®‰∫éÊ£ÄÁ¥¢‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØÂê¶Âú®‰∏Ä‰∏™ÈõÜÂêà‰∏≠„ÄÇÂÆÉÁöÑ‰ºòÁÇπÊòØÁ©∫Èó¥ÊïàÁéáÂíåÊü•ËØ¢Êó∂Èó¥ÈÉΩËøúËøúË∂ÖËøá‰∏ÄËà¨ÁöÑÁÆóÊ≥ïÔºåÁº∫ÁÇπÊòØÊúâ‰∏ÄÂÆöÁöÑËØØËØÜÂà´ÁéáÂíåÂà†Èô§Âõ∞Èöæ„ÄÇ Â¶ÇÊûúÊÉ≥Âà§Êñ≠‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ‰∏çÊòØÂú®‰∏Ä‰∏™ÈõÜÂêàÈáåÔºå‰∏ÄËà¨ÊÉ≥Âà∞ÁöÑÊòØÂ∞ÜÈõÜÂêà‰∏≠ÊâÄÊúâÂÖÉÁ¥†‰øùÂ≠òËµ∑Êù•ÔºåÁÑ∂ÂêéÈÄöËøáÊØîËæÉÁ°ÆÂÆö„ÄÇÈìæË°®„ÄÅÊ†ë„ÄÅÊï£ÂàóË°®ÔºàÂèàÂè´ÂìàÂ∏åË°®ÔºåHash tableÔºâÁ≠âÁ≠âÊï∞ÊçÆÁªìÊûÑÈÉΩÊòØËøôÁßçÊÄùË∑Ø„ÄÇ‰ΩÜÊòØÈöèÁùÄÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑÂ¢ûÂä†ÔºåÊàë‰ª¨ÈúÄË¶ÅÁöÑÂ≠òÂÇ®Á©∫Èó¥Ë∂äÊù•Ë∂äÂ§ß„ÄÇÂêåÊó∂Ê£ÄÁ¥¢ÈÄüÂ∫¶‰πüË∂äÊù•Ë∂äÊÖ¢Ôºå‰∏äËø∞‰∏âÁßçÁªìÊûÑÁöÑÊ£ÄÁ¥¢Êó∂Èó¥Â§çÊùÇÂ∫¶ÂàÜÂà´‰∏∫O(n),O(log n),O(n/k)„ÄÇ Â∏ÉÈöÜËøáÊª§Âô®ÁöÑÂéüÁêÜÊòØÔºåÂΩì‰∏Ä‰∏™ÂÖÉÁ¥†Ë¢´Âä†ÂÖ•ÈõÜÂêàÊó∂ÔºåÈÄöËøáK‰∏™Êï£ÂàóÂáΩÊï∞Â∞ÜËøô‰∏™ÂÖÉÁ¥†Êò†Â∞ÑÊàê‰∏Ä‰∏™‰ΩçÊï∞ÁªÑ‰∏≠ÁöÑK‰∏™ÁÇπÔºåÊääÂÆÉ‰ª¨ÁΩÆ‰∏∫1„ÄÇ ‰ºòÁÇπÔºöÁõ∏ÊØî‰∫éÂÖ∂ÂÆÉÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ∏ÉÈöÜËøáÊª§Âô®Âú®Á©∫Èó¥ÂíåÊó∂Èó¥ÊñπÈù¢ÈÉΩÊúâÂ∑®Â§ßÁöÑ‰ºòÂäø„ÄÇÂ∏ÉÈöÜËøáÊª§Âô®Â≠òÂÇ®Á©∫Èó¥ÂíåÊèíÂÖ•/Êü•ËØ¢Êó∂Èó¥ÈÉΩÊòØÂ∏∏Êï∞ÔºàOÔºàkÔºâÔºâ„ÄÇÂè¶Â§ñ, Êï£ÂàóÂáΩÊï∞Áõ∏‰∫í‰πãÈó¥Ê≤°ÊúâÂÖ≥Á≥ªÔºåÊñπ‰æøÁî±Á°¨‰ª∂Âπ∂Ë°åÂÆûÁé∞„ÄÇÂ∏ÉÈöÜËøáÊª§Âô®‰∏çÈúÄË¶ÅÂ≠òÂÇ®ÂÖÉÁ¥†Êú¨Ë∫´ÔºåÂú®Êüê‰∫õÂØπ‰øùÂØÜË¶ÅÊ±ÇÈùûÂ∏∏‰∏•Ê†ºÁöÑÂú∫ÂêàÊúâ‰ºòÂäø„ÄÇÂ∏ÉÈöÜËøáÊª§Âô®ÂèØ‰ª•Ë°®Á§∫ÂÖ®ÈõÜÔºåÂÖ∂ÂÆÉ‰ªª‰ΩïÊï∞ÊçÆÁªìÊûÑÈÉΩ‰∏çËÉΩÔºõkÂíåmÁõ∏ÂêåÔºå‰ΩøÁî®Âêå‰∏ÄÁªÑÊï£ÂàóÂáΩÊï∞ÁöÑ‰∏§‰∏™Â∏ÉÈöÜËøáÊª§Âô®ÁöÑ‰∫§Âπ∂Â∑ÆËøêÁÆóÂèØ‰ª•‰ΩøÁî®‰ΩçÊìç‰ΩúËøõË°å„ÄÇ Áº∫ÁÇπÔºö‰ΩÜÊòØÂ∏ÉÈöÜËøáÊª§Âô®ÁöÑÁº∫ÁÇπÂíå‰ºòÁÇπ‰∏ÄÊ†∑ÊòéÊòæ„ÄÇËØØÁÆóÁéáÊòØÂÖ∂‰∏≠‰πã‰∏Ä„ÄÇÈöèÁùÄÂ≠òÂÖ•ÁöÑÂÖÉÁ¥†Êï∞ÈáèÂ¢ûÂä†ÔºåËØØÁÆóÁéáÈöè‰πãÂ¢ûÂä†„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÂÖÉÁ¥†Êï∞ÈáèÂ§™Â∞ëÔºåÂàô‰ΩøÁî®Êï£ÂàóË°®Ë∂≥Áü£„ÄÇÂè¶Â§ñÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏çËÉΩ‰ªéÂ∏ÉÈöÜËøáÊª§Âô®‰∏≠Âà†Èô§ÂÖÉÁ¥†„ÄÇÊàë‰ª¨ÂæàÂÆπÊòìÊÉ≥Âà∞Êää‰ΩçÊï∞ÁªÑÂèòÊàêÊï¥Êï∞Êï∞ÁªÑÔºåÊØèÊèíÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†Áõ∏Â∫îÁöÑËÆ°Êï∞Âô®Âä†1,ËøôÊ†∑Âà†Èô§ÂÖÉÁ¥†Êó∂Â∞ÜËÆ°Êï∞Âô®ÂáèÊéâÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÁÑ∂ËÄåË¶Å‰øùËØÅÂÆâÂÖ®Âú∞Âà†Èô§ÂÖÉÁ¥†Âπ∂ÈùûÂ¶ÇÊ≠§ÁÆÄÂçï„ÄÇÈ¶ñÂÖàÊàë‰ª¨ÂøÖÈ°ª‰øùËØÅÂà†Èô§ÁöÑÂÖÉÁ¥†ÁöÑÁ°ÆÂú®Â∏ÉÈöÜËøáÊª§Âô®ÈáåÈù¢„ÄÇËøô‰∏ÄÁÇπÂçïÂá≠Ëøô‰∏™ËøáÊª§Âô®ÊòØÊó†Ê≥ï‰øùËØÅÁöÑ„ÄÇÂè¶Â§ñËÆ°Êï∞Âô®ÂõûÁªï‰πü‰ºöÈÄ†ÊàêÈóÆÈ¢ò„ÄÇÂú®Èôç‰ΩéËØØÁÆóÁéáÊñπÈù¢ÔºåÊúâ‰∏çÂ∞ëÂ∑•‰ΩúÔºå‰ΩøÂæóÂá∫Áé∞‰∫ÜÂæàÂ§öÂ∏ÉÈöÜËøáÊª§Âô®ÁöÑÂèòÁßç„ÄÇ Ê£ÄÁ¥¢Êó∂ÔºåÊàë‰ª¨Âè™Ë¶ÅÁúãÁúãËøô‰∫õÁÇπÊòØ‰∏çÊòØÈÉΩÊòØ1Â∞±ÔºàÂ§ßÁ∫¶ÔºâÁü•ÈÅìÈõÜÂêà‰∏≠ÊúâÊ≤°ÊúâÂÆÉ‰∫ÜÔºöÂ¶ÇÊûúËøô‰∫õÁÇπÊúâ‰ªª‰Ωï‰∏Ä‰∏™0ÔºåÂàôË¢´Ê£ÄÂÖÉÁ¥†‰∏ÄÂÆö‰∏çÂú®ÔºõÂ¶ÇÊûúÈÉΩÊòØ1ÔºåÂàôË¢´Ê£ÄÂÖÉÁ¥†ÂæàÂèØËÉΩÂú®„ÄÇËøôÂ∞±ÊòØÂ∏ÉÈöÜËøáÊª§Âô®ÁöÑÂü∫Êú¨ÊÄùÊÉ≥„ÄÇ Bloom FilterÂ∫îÁî®Âú∫ÊôØÔºü Áî®RedisÁöÑBitmap‰Ωú‰∏∫‰ΩçÊï∞ÁªÑÊûÑÂª∫Ëµ∑Êù•ÁöÑÂèØÊâ©Â±ïÁöÑÂ∏ÉÈöÜËøáÊª§Âô®„ÄÇ RedisÂÆûÁé∞ÁöÑÂ∏ÉÈöÜËøáÊª§Âô®Â¶Ç‰ΩïÂø´ÈÄüÊúâÊïàÂà†Èô§Êï∞ÊçÆÔºüÔºöEXPIRE ‚ÄúbitmapÁöÑkeyÂÄº‚Äù 0 4.5 Ëß£ÂÜ≥ÊñπÊ°àÂØπÊØî 5. Êó†Â∫ïÊ¥ûÈóÆÈ¢ò‰ºòÂåñ 5.1 ÈóÆÈ¢òÊèèËø∞ 2010Âπ¥ÔºåfacebookÊúâ‰∫Ü3000‰∏™MemcacheËäÇÁÇπ ÂèëÁé∞ÈóÆÈ¢òÔºö&quot;Âä†&quot;Êú∫Âô®ÊÄßËÉΩÊ≤°ËÉΩÊèêÂçáÔºåÂèçËÄå‰∏ãÈôç 5.2 ÈóÆÈ¢òÂéüÂõ† ÂΩìÂ≠òÂú®ÁöÑËäÇÁÇπÂºÇÂ∏∏Â§öÁöÑÊó∂ÂÄôÔºåIOÁöÑ‰ª£‰ª∑Â∑≤ÁªèË∂ÖËøáÊï∞ÊçÆ‰º†ËæìÔºå‰∏äÊñáÊèêÂà∞ÁöÑfacebookÁöÑËäÇÁÇπÂ∑≤ÁªèË∂ÖËøá3000‰∏™ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂÜçÂ¢ûÂä†ËäÇÁÇπÂ∑≤ÁªèÊ≤°Ê≥ïÂÜçÊèêÈ´òÊïàÁéá‰∫Ü„ÄÇ 5.3 ÈóÆÈ¢òËß£ÂÜ≥‚Äî‰ºòÂåñIO ÂëΩ‰ª§Êú¨Ë∫´ÁöÑÊïàÁéáÔºö‰æãÂ¶Çsql‰ºòÂåñÔºåÂëΩ‰ª§‰ºòÂåñ ÁΩëÁªúÊ¨°Êï∞ÔºöÂáèÂ∞ëÈÄö‰ø°Ê¨°Êï∞ Èôç‰ΩéÊé•ÂÖ•ÊàêÊú¨:ÈïøËøû/ËøûÊé•Ê±†,NIOÁ≠â„ÄÇ IOËÆøÈóÆÂêàÂπ∂:O(n)Âà∞O(1)ËøáÁ®ã:ÊâπÈáèÊé•Âè£(mget)ÔºåÂ∞±ÊòØ‰∏ä‰∏ÄÁØáÊñáÁ´†‰∏≠‰ªãÁªçÁöÑÂØπ‰∫émgetÁöÑÂõõ‰∏™ÊñπÊ°à„ÄÇ 6. ÁºìÂ≠òÈõ™Â¥©‰ºòÂåñ 6.1 ‰ªÄ‰πàÊòØÁºìÂ≠òÈõ™Â¥©Ôºü ‰ªé‰∏ãÂõæÂèØ‰ª•ÂæàÊ∏ÖÊô∞Âá∫‰ªÄ‰πàÊòØÁºìÂ≠òÈõ™Â¥©ÔºöÁî±‰∫éÁºìÂ≠òÂ±ÇÊâøËΩΩÁùÄÂ§ßÈáèËØ∑Ê±ÇÔºåÊúâÊïàÁöÑ‰øùÊä§‰∫ÜÂ≠òÂÇ®Â±ÇÔºå‰ΩÜÊòØÂ¶ÇÊûúÁºìÂ≠òÂ±ÇÁî±‰∫éÊüê‰∫õÂéüÂõ†Êï¥‰Ωì‰∏çËÉΩÊèê‰æõÊúçÂä°Ôºå‰∫éÊòØÊâÄÊúâÁöÑËØ∑Ê±ÇÈÉΩ‰ºöËææÂà∞Â≠òÂÇ®Â±ÇÔºåÂ≠òÂÇ®Â±ÇÁöÑË∞ÉÁî®Èáè‰ºöÊö¥Â¢ûÔºåÈÄ†ÊàêÂ≠òÂÇ®Â±Ç‰πü‰ºöÊåÇÊéâÁöÑÊÉÖÂÜµ„ÄÇ ÁºìÂ≠òÈõ™Â¥©ÁöÑËã±ÊñáÂéüÊÑèÊòØ stampeding herdÔºàÂ•îÈÄÉÁöÑÈáéÁâõÔºâÔºåÊåáÁöÑÊòØÁºìÂ≠òÂ±ÇÂÆïÊéâÂêéÔºåÊµÅÈáè‰ºöÂÉèÂ•îÈÄÉÁöÑÈáéÁâõ‰∏ÄÊ†∑ÔºåÊâìÂêëÂêéÁ´ØÂ≠òÂÇ®„ÄÇ 6.2 Â¶Ç‰ΩïÈò≤Ê≠¢ÁºìÂ≠òÈõ™Â¥©Ôºü ‰øùËØÅÁºìÂ≠òÂ±ÇÊúçÂä°È´òÂèØÁî®ÊÄß„ÄÇ ÂíåÈ£ûÊú∫ÈÉΩÊúâÂ§ö‰∏™ÂºïÊìé‰∏ÄÊ†∑ÔºåÂ¶ÇÊûúÁºìÂ≠òÂ±ÇËÆæËÆ°ÊàêÈ´òÂèØÁî®ÁöÑÔºåÂç≥‰Ωø‰∏™Âà´ËäÇÁÇπ„ÄÅ‰∏™Âà´Êú∫Âô®„ÄÅÁîöËá≥ÊòØÊú∫ÊàøÂÆïÊéâÔºå‰æùÁÑ∂ÂèØ‰ª•Êèê‰æõÊúçÂä°Ôºå‰æãÂ¶ÇÂâçÈù¢‰ªãÁªçËøáÁöÑ Redis Sentinel Âíå Redis Cluster ÈÉΩÂÆûÁé∞‰∫ÜÈ´òÂèØÁî®„ÄÇ ‰æùËµñÈöîÁ¶ªÁªÑ‰ª∂‰∏∫ÂêéÁ´ØÈôêÊµÅÂπ∂ÈôçÁ∫ß Êó†ËÆ∫ÊòØÁºìÂ≠òÂ±ÇËøòÊòØÂ≠òÂÇ®Â±ÇÈÉΩ‰ºöÊúâÂá∫ÈîôÁöÑÊ¶ÇÁéáÔºåÂèØ‰ª•Â∞ÜÂÆÉ‰ª¨ËßÜÂêå‰∏∫ËµÑÊ∫ê„ÄÇ‰Ωú‰∏∫Âπ∂ÂèëÈáèËæÉÂ§ßÁöÑÁ≥ªÁªüÔºåÂÅáÂ¶ÇÊúâ‰∏Ä‰∏™ËµÑÊ∫ê‰∏çÂèØÁî®ÔºåÂèØËÉΩ‰ºöÈÄ†ÊàêÁ∫øÁ®ãÂÖ®ÈÉ® hang Âú®Ëøô‰∏™ËµÑÊ∫ê‰∏äÔºåÈÄ†ÊàêÊï¥‰∏™Á≥ªÁªü‰∏çÂèØÁî®„ÄÇÈôçÁ∫ßÂú®È´òÂπ∂ÂèëÁ≥ªÁªü‰∏≠ÊòØÈùûÂ∏∏Ê≠£Â∏∏ÁöÑÔºöÊØîÂ¶ÇÊé®ËçêÊúçÂä°‰∏≠ÔºåÂ¶ÇÊûú‰∏™ÊÄßÂåñÊé®ËçêÊúçÂä°‰∏çÂèØÁî®ÔºåÂèØ‰ª•ÈôçÁ∫ßË°•ÂÖÖÁÉ≠ÁÇπÊï∞ÊçÆÔºå‰∏çËá≥‰∫éÈÄ†ÊàêÂâçÁ´ØÈ°µÈù¢ÊòØÂºÄÂ§©Á™ó„ÄÇ Âú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÂØπÈáçË¶ÅÁöÑËµÑÊ∫ê ( ‰æãÂ¶Ç Redis„ÄÅ MySQL„ÄÅ Hbase„ÄÅÂ§ñÈÉ®Êé•Âè£ ) ÈÉΩËøõË°åÈöîÁ¶ªÔºåËÆ©ÊØèÁßçËµÑÊ∫êÈÉΩÂçïÁã¨ËøêË°åÂú®Ëá™Â∑±ÁöÑÁ∫øÁ®ãÊ±†‰∏≠ÔºåÂç≥‰Ωø‰∏™Âà´ËµÑÊ∫êÂá∫Áé∞‰∫ÜÈóÆÈ¢òÔºåÂØπÂÖ∂‰ªñÊúçÂä°Ê≤°ÊúâÂΩ±Âìç„ÄÇ‰ΩÜÊòØÁ∫øÁ®ãÊ±†Â¶Ç‰ΩïÁÆ°ÁêÜÔºåÊØîÂ¶ÇÂ¶Ç‰ΩïÂÖ≥Èó≠ËµÑÊ∫êÊ±†ÔºåÂºÄÂêØËµÑÊ∫êÊ±†ÔºåËµÑÊ∫êÊ±†ÈòÄÂÄºÁÆ°ÁêÜÔºåËøô‰∫õÂÅöËµ∑Êù•ËøòÊòØÁõ∏ÂΩìÂ§çÊùÇÁöÑÔºåËøôÈáåÊé®Ëçê‰∏Ä‰∏™ Java ‰æùËµñÈöîÁ¶ªÂ∑•ÂÖ∑ Hystrix„ÄÇË∂ÖÂá∫ËåÉÂõ¥‰∫Ü„ÄÇ‰∏çÂÜçËµòËø∞„ÄÇ 7. ÁÉ≠ÁÇπkeyÈáçÂª∫‰ºòÂåñ 7.1 ÈóÆÈ¢ò ÁÉ≠ÁÇπkey( ‰æãÂ¶Ç‰∏Ä‰∏™ÁÉ≠Èó®ÁöÑÂ®±‰πêÊñ∞ÈóªÔºâ+ËæÉÈïøÁöÑÈáçÂª∫Êó∂Èó¥ÔºàÂèØËÉΩÊòØ‰∏Ä‰∏™Â§çÊùÇËÆ°ÁÆóÔºå‰æãÂ¶ÇÂ§çÊùÇÁöÑ SQL„ÄÅÂ§öÊ¨° IO„ÄÅÂ§ö‰∏™‰æùËµñÁ≠âÔºâ Â∞±ÊòØËØ¥Âú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÊüê‰∏™keyÂú®ÁºìÂ≠ò‰∏≠ÈáçÂª∫Êó∂Èó¥Â§™ÈïøÔºå‰ª•Ëá≥‰∫éÈ´òÂπ∂Âèë‰∏ãÁºìÂ≠òÊü•‰∏çÂà∞ÔºåÈÉΩÂéªDBËøõË°åÊü•ËØ¢„ÄÇÂØπ‰∫éDBÂéãÂäõÂæàÂ§ßÔºåÂπ∂‰∏îÂìçÂ∫îÊó∂Èó¥Èïø„ÄÇ ‰∏â‰∏™ÁõÆÊ†áÔºöË¶ÅÂáèÂ∞ëÁºìÂ≠òÈáçÂª∫Ê¨°Êï∞„ÄÅÊï∞ÊçÆÂ∞ΩÂèØËÉΩ‰∏ÄËá¥„ÄÅÂáèÂ∞ëÊΩúÂú®Âç±Èô©„ÄÇ ‰∏§‰∏™Ëß£ÂÜ≥Ôºö‰∫íÊñ•ÈîÅ„ÄÅÊ∞∏Ëøú‰∏çËøáÊúü 7.2 ‰∫íÊñ•ÈîÅ‚Äîsetex,setnx Â≠òÂú®ÈóÆÈ¢òÔºöÊúâÁ≠âÂæÖÊó∂Èó¥„ÄÇ ‰º™‰ª£Á†ÅÔºö (1) ‰ªé Redis Ëé∑ÂèñÊï∞ÊçÆÔºåÂ¶ÇÊûúÂÄº‰∏ç‰∏∫Á©∫ÔºåÂàôÁõ¥Êé•ËøîÂõûÂÄºÔºåÂê¶ÂàôÊâßË°å (2.1) Âíå (2.2)„ÄÇ (2) Â¶ÇÊûú set(nx Âíå ex) ÁªìÊûú‰∏∫ trueÔºåËØ¥ÊòéÊ≠§Êó∂Ê≤°ÊúâÂÖ∂‰ªñÁ∫øÁ®ãÈáçÂª∫ÁºìÂ≠òÔºåÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ãÊâßË°åÁºìÂ≠òÊûÑÂª∫ÈÄªËæë„ÄÇ (2.2) Â¶ÇÊûú setnx(nx Âíå ex) ÁªìÊûú‰∏∫ falseÔºåËØ¥ÊòéÊ≠§Êó∂Â∑≤ÁªèÊúâÂÖ∂‰ªñÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åÊûÑÂª∫ÁºìÂ≠òÁöÑÂ∑•‰ΩúÔºåÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ãÂ∞Ü‰ºëÊÅØÊåáÂÆöÊó∂Èó¥ ( ‰æãÂ¶ÇËøôÈáåÊòØ 50 ÊØ´ÁßíÔºåÂèñÂÜ≥‰∫éÊûÑÂª∫ÁºìÂ≠òÁöÑÈÄüÂ∫¶ ) ÂêéÔºåÈáçÊñ∞ÊâßË°åÂáΩÊï∞ÔºåÁõ¥Âà∞Ëé∑ÂèñÂà∞Êï∞ÊçÆ„ÄÇ 7.3 Ê∞∏Ëøú‰∏çËøáÊúü ËøôÈáåÊàëÊÉ≥‰∫ÜÂæà‰πÖÂà∞Â∫ïÊòØ‰ªÄ‰πàÊÑèÊÄùÔºåÔºåÔºåÊàëÊÑüËßâËøôÊòØ‰∏Ä‰∏™Âú∫ÊôØÔºö‰øùËØÅÊï∞ÊçÆÁöÑÂÆöÊúüÊõ¥Êñ∞„ÄÇÂØπ‰∫éÁÉ≠ÁÇπkey,Êó†ÈùûÊòØÂπ∂ÂèëÁâπÂà´Â§ßÂπ∂‰∏îÈáçÂª∫ÁºìÂ≠òÊó∂Èó¥ÊØîËæÉÈïøÔºåÂ¶ÇÊûúÁõ¥Êé•ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÔºåÈÇ£‰πàÊó∂Èó¥Âà∞ÁöÑÊó∂ÂÄôÔºåÂ∑®Â§ßÁöÑËÆøÈóÆÈáè‰ºöÂéãËø´Âà∞Êï∞ÊçÆÂ∫ì‰∏äÔºåÊâÄ‰ª•Êàë‰ª¨ÂÆûÈôÖ‰∏äÔºåÊòØ‰∏çÁªô‰ªñËÆæÁΩÆËøáÊúüÊó∂Èó¥Ôºå‰ΩÜÊòØ‰∏çËÆæÁΩÆËøáÊúüÊó∂Èó¥ÔºåÊÄé‰πàÂÅöÂà∞ÂÆöÊó∂Êõ¥Êñ∞Âë¢ÔºüËøôÈáåÁöÑÊñπÊ°àÊòØÁªôÁÉ≠ÁÇπkeyÁöÑvalÂ¢ûÂä†‰∏Ä‰∏™ÈÄªËæëËøáÊúüÊó∂Èó¥Â≠óÊÆµÔºåÂπ∂ÂèëËÆøÈóÆÁöÑÊó∂ÂÄôÔºåÂà§Êñ≠Ëøô‰∏™ÈÄªËæëÂ≠óÊÆµÁöÑÊó∂Èó¥ÂÄºÊòØÂê¶Â§ß‰∫éÂΩìÂâçÊó∂Èó¥ÔºåÂ§ß‰∫é‰∫ÜËØ¥ÊòéË¶ÅÂØπÁºìÂ≠òËøõË°åÊõ¥Êñ∞‰∫ÜÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÔºå‰æùÁÑ∂ËÆ©ÊâÄÊúâÁ∫øÁ®ãËÆøÈóÆËÄÅÁöÑÁºìÂ≠òÔºåÂõ†‰∏∫ÁºìÂ≠òÂπ∂Ê≤°ÊúâËÆæÁΩÆËøáÊúüÔºå‰ΩÜÊòØÂè¶ÂºÄ‰∏Ä‰∏™Á∫øÁ®ãÂØπÁºìÂ≠òËøõË°åÈáçÊûÑ„ÄÇÁ≠âÈáçÊûÑÊàêÂäüÔºåÂç≥ÊâßË°å‰∫Üredis setÊìç‰Ωú‰πãÂêéÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÂ∞±ÂèØ‰ª•ËÆøÈóÆÂà∞ÈáçÊûÑÂêéÁöÑÁºìÂ≠ò‰∏≠ÁöÑÊñ∞ÁöÑÂÜÖÂÆπ‰∫Ü„ÄÇ‰∏çÁü•ÈÅìÊàëÁöÑÁêÜËß£ÊòØ‰∏çÊòØÊ≠£Á°Æ„ÄÇ ‚ÄúÊ∞∏Ëøú‰∏çËøáÊúü‚ÄùÂåÖÂê´‰∏§Â±ÇÊÑèÊÄùÔºö ‰ªéÁºìÂ≠òÂ±ÇÈù¢Êù•ÁúãÔºåÁ°ÆÂÆûÊ≤°ÊúâËÆæÁΩÆËøáÊúüÊó∂Èó¥ÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞ÁÉ≠ÁÇπ key ËøáÊúüÂêé‰∫ßÁîüÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØ‚ÄúÁâ©ÁêÜ‚Äù‰∏çËøáÊúü„ÄÇ ‰ªéÂäüËÉΩÂ±ÇÈù¢Êù•ÁúãÔºå‰∏∫ÊØè‰∏™ value ËÆæÁΩÆ‰∏Ä‰∏™ÈÄªËæëËøáÊúüÊó∂Èó¥ÔºåÂΩìÂèëÁé∞Ë∂ÖËøáÈÄªËæëËøáÊúüÊó∂Èó¥ÂêéÔºå‰ºö‰ΩøÁî®ÂçïÁã¨ÁöÑÁ∫øÁ®ãÂéªÊûÑÂª∫ÁºìÂ≠ò„ÄÇ 2018/6/19 Âè∑Ë°•ÂÖÖÔºöÁâ©ÁêÜ‰∏äÁºìÂ≠òÁ°ÆÂÆûÊòØ‰∏çËøáÊúüÁöÑÔºå‰øùËØÅÊâÄÊúâÁ∫øÁ®ãÈÉΩËÉΩËÆøÈóÆÂà∞Ôºå‰ΩÜÊòØÊúâÂèØËÉΩÊòØËÄÅÁöÑÊï∞ÊçÆÔºõÈÄªËæë‰∏äÁªô value Â¢ûÂä†ËøáÊúüÊó∂Èó¥ÔºåÂ¶ÇÊûúÂΩìËøáÊúüÊó∂Èó¥Ë∂ÖËøáÂΩìÂâçÊó∂Èó¥(ÊØè‰∏Ä‰∏™Á∫øÁ®ãÊãøÁºìÂ≠òÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩ‰ºöÂà§Êñ≠‰∏Ä‰∏ãÔºå‰πüÂ∞±ÊòØËØ¥ËøôÈáå‰ªçÁÑ∂‰ΩøÁî®‰∫íÊñ•ÈîÅÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Á∫øÁ®ãÂèëÁé∞ËøáÊúüÊó∂Èó¥Ë∂ÖËøáÂΩìÂâçÊó∂Èó¥‰∫ÜÔºåÈÇ£‰πàÈîÅ‰ΩèÔºåÂè¶ÂºÄ‰∏Ä‰∏™Á∫øÁ®ãÂéªÂÆåÊàêÊï∞ÊçÆÈáçÂª∫)ÔºåÊñ∞ÂºÄ‰∏Ä‰∏™Á∫øÁ®ãÂéªÊûÑÂª∫ÁºìÂ≠òÔºåÊûÑÂª∫ÊàêÂäü‰πãÂêéÔºåËÆæÁΩÆÊñ∞ÂÜÖÂÆπÂà∞ÁºìÂ≠ò‰∏≠Âπ∂‰∏îÂà†Èô§ËÄÅÁºìÂ≠òÔºåÂ∞±ÂÆåÊàê‰∫ÜÁÉ≠ÁÇπ key ÁöÑÈáçÂª∫„ÄÇ ‰º™‰ª£Á†ÅÂÆûÁé∞Ôºö ‰∏§ÁßçÊñπÊ°àÂØπÊØî]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis-ClusterÁêÜËÆ∫ËØ¶Ëß£]]></title>
    <url>%2F2019%2F02%2F01%2Fredis%2FRedis-Cluster%E7%90%86%E8%AE%BA%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨ÂÖ´ÁØáÊñáÁ´†„ÄÇ‰∏ä‰∏ÄÁØáÊàë‰ª¨Â≠¶‰π†‰∫Üredis sentinelÔºåÁü•ÈÅì‰∫ÜÂÆÉÊòØredisÈ´òÂèØÁî®ÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÊ°à„ÄÇ‰ΩÜÊòØÈù¢ÂØπË¶ÅÊ±ÇÂæàÈ´òÁöÑÂú∫ÊôØÔºå‰∏ÄÂè∞masterÊòØ‰∏ÄÂÆö‰∏çËÉΩËß£ÂÜ≥ÈóÆÈ¢òÁöÑÔºåredis 3.0ÁªôÊàë‰ª¨Â∏¶Êù•‰∫ÜÊúçÂä°Á´ØÈõÜÁæ§ÊñπÊ°àÔºåËß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇ 1. Êï∞ÊçÆÂàÜÂå∫ ÈõÜÁæ§ÔºåÈÇ£‰πàÂ∞±‰ºöÊ∂âÂèäÂà∞Êï∞ÊçÆÊòØÂ¶Ç‰ΩïÂàÜÁâáÁöÑ„ÄÇÊúâ‰∏§ÁßçÊñπÂºèÔºöÈ°∫Â∫èÂàÜÂå∫ÂíåÂìàÂ∏åÂàÜÂå∫ ‰∏§ËÄÖÂØπÊØîÔºö Áõ¥Êé•hashÂèñÊ®°ËøõË°åÊï∞ÊçÆÂàÜÁâáÊó∂ÔºåÂΩìËäÇÁÇπÂ¢ûÂä†Ôºå‰ºöÊúâÂæàÂ§öÊï∞ÊçÆÂëΩ‰∏≠‰∏ç‰∫ÜÔºåÈúÄË¶ÅÈáçÊñ∞Êò†Â∞Ñ„ÄÇÂ¶ÇÊûúÂ§ßÂ§öÊï∞Êï∞ÊçÆÂú®Â¢ûÂä†ÊàñËÄÖÂáèÂ∞ëËäÇÁÇπ‰πãÂêéËøõË°åËøÅÁßªÁöÑËØùÔºåÂØπ‰∫éÊÄßËÉΩÂΩ±ÂìçÊòØÂæàÂ§ßÁöÑÔºåÂõ†‰∏∫Êï∞ÊçÆËøÅÁßªÔºåÈÇ£‰πàÁºìÂ≠ò‰∏≠Áé∞Âú®ÊòØÊó†Ê≥ïÂëΩ‰∏≠ÁöÑÔºåÂøÖÈ°ªÂéªÊï∞ÊçÆÂ∫ìÂèñÔºåÊòØÁÅæÈöæÊÄßÁöÑË°å‰∏∫„ÄÇ Êó©ÊúüÁöÑÂÅöÊ≥ïÂ∞±ÊòØËøôÊ†∑ÔºåÂú®ÂÆ¢Êà∑Á´ØhashÂèñ‰ΩôËäÇÁÇπ‰∏™Êï∞Êù•ËøõË°åÊï∞ÊçÆÂàÜÁâá„ÄÇÂ¶ÇÊûúÈùûË¶ÅËøôÊ†∑ÔºåÈááÂèñÁøªÂÄçÊâ©ÂÆπ‰ºöÁ®çÂæÆÂ•Ω‰∏ÄÁÇπÔºåËøÅÁßªÊï∞ÊçÆÈáè‰ºöÂ∞è‰∏ÄÁÇπ„ÄÇ‰∏çËøáÊó†ËÆ∫Â¶Ç‰ΩïÔºåËøôÁßçÊñπÂºèÂú®Â§ßÊï∞ÊçÆÈáèÊÉÖÂÜµ‰∏ãÊòØ‰∏çÂèØË°åÁöÑ„ÄÇ 2. ‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ï ÂØπ‰∫é‰∏äÈù¢ÊèêÂà∞ÁöÑÁõ¥Êé•hashÂèñ‰ΩôÁöÑÊñπÂºèÔºå‰ºöÂØºËá¥Â§ßÈáèÊï∞ÊçÆÁöÑËøÅÁßª„ÄÇÈÇ£‰πàÊúâÊ≤°Êúâ‰∏ÄÁßçÊñπÂºèÔºåÂú®Â¢ûÂä†ÊàñÂáèÂ∞ëËäÇÁÇπÊó∂ÔºåÂè™ÊúâÂ∞ëÈÉ®ÂàÜÊï∞ÊçÆËøÅÁßªÂë¢Ôºü ÈíàÂØπ‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ïÔºåÂ∑≤ÁªèÂú®ÁÆÄÊòéÁêÜËß£‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ï‰∏≠ËØ¶ÁªÜËØ¥Êòé‰∫ÜÔºå‰∏çÂÜçËµòËø∞„ÄÇ ÂØπ‰∫éredis 3.0‰πãÂâçÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•Áî®ËøôÁßçÊñπÂºèÊù•ÂÆûÁé∞Êï∞ÊçÆÂàÜÁâá„ÄÇÂú®redis 3.0‰πãÂêéÔºåÂ∞±‰∏çÈúÄË¶ÅÂÆ¢Êà∑Á´ØÊù•ÂÆûÁé∞ÂàÜÁâáÁÆóÊ≥ï‰∫ÜÔºåËÄåÊòØÁõ¥Êé•ÁªôÊàë‰ª¨Êèê‰æõ‰∫ÜÊúçÂä°Á´ØÈõÜÁæ§ÊñπÊ°àredis cluster. 3. ËôöÊãüÊßΩ redis clusterÂºïÂÖ•ÊßΩÁöÑÊ¶ÇÂøµÔºå‰∏ÄÂÆöË¶Å‰∏é‰∏ÄËá¥ÊÄßhashÁöÑÊßΩÂå∫ÂàÜÔºÅËøôÈáåÊØè‰∏Ä‰∏™ÊßΩÊò†Â∞Ñ‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ CRC16(key) &amp; 16383 ËøôÈáåËÆ°ÁÆóÁªìÊûúÂèëÈÄÅÁªôredis cluster‰ªªÊÑè‰∏Ä‰∏™redisËäÇÁÇπÔºåËøô‰∏™redisËäÇÁÇπÂèëÁé∞‰ªñÊòØÂ±û‰∫éËá™Â∑±ÁÆ°ËæñËåÉÂõ¥ÁöÑÔºåÈÇ£Â∞±Â∞ÜÂÆÉÊîæËøõÂéªÔºõ‰∏çÂ±û‰∫é‰ªñÁöÑÊßΩËåÉÂõ¥ÁöÑËØùÔºåÁî±‰∫éredis‰πãÈó¥ÊòØÁõ∏‰∫íÈÄö‰ø°ÁöÑÔºåËøô‰∏™ËäÇÁÇπÊòØÁü•ÈÅìÂÖ∂‰ªñredisËäÇÁÇπÁöÑÊßΩÁöÑ‰ø°ÊÅØÔºåÈÇ£‰πà‰ºöÂëäËØâ‰ªñÂéªÈÇ£‰∏™redisËäÇÁÇπÂéªÁúãÁúã„ÄÇ ÈÇ£‰πàÂ∞±ÂÆûÁé∞‰∫ÜÊúçÂä°Á´ØÂØπ‰∫éÊßΩ„ÄÅËäÇÁÇπ„ÄÅÊï∞ÊçÆÁöÑÁÆ°ÁêÜ„ÄÇ ÂΩìmasterËäÇÁÇπÂ¢ûÂä†Êó∂ÔºåÂç≥Êâ©ÂÆπÊó∂ÔºåÂØπ‰∫é‰ª•‰∏ä‰∏§ÁßçÊñπÊ°àÔºåÈÉΩ‰ºöÂá∫Áé∞Êï∞ÊçÆËøÅÁßªÔºåÈÇ£‰πàÂè™ËÉΩ‰Ωú‰∏∫ÁºìÂ≠òÂú∫ÊôØ‰ΩøÁî®„ÄÇ‰ΩÜÊòØredis clusterÔºåÁî±‰∫éÊØè‰∏™ËäÇÁÇπÁª¥Êä§ÁöÑÊßΩÁöÑËåÉÂõ¥ÊòØÂõ∫ÂÆöÁöÑÔºåÂΩìÊúâÊñ∞Âä†ÂÖ•ÁöÑËäÇÁÇπÊó∂ÔºåÊòØ‰∏ç‰ºöÂπ≤Êâ∞Âà∞ÂÖ∂‰ªñËäÇÁÇπÁöÑÊßΩÁöÑÔºåÂøÖÈ°ªÊòØ‰ª•ÂâçÁöÑËäÇÁÇπÂ∞Ü‰ΩøÁî®ÊßΩÁöÑÊùÉÂà©ÂàÜÈÖçÁªô‰Ω†ÔºåÂπ∂‰∏îÂ∞ÜÊï∞ÊçÆÂàÜÈÖçÁªô‰Ω†ÔºåËøôÊ†∑ÔºåÊñ∞ÁöÑËäÇÁÇπÊâç‰ºöÁúüÊ≠£Êã•ÊúâËøô‰∫õÊßΩÂíåÊï∞ÊçÆ„ÄÇËøôÁßçÂÆûÁé∞ËøòÂ§Ñ‰∫éÂçäËá™Âä®Áä∂ÊÄÅÔºåÈúÄË¶Å‰∫∫Â∑•‰ªãÂÖ•„ÄÇ-----‰∏ªË¶ÅÁöÑÊÄùÊÉ≥ÊòØÔºöÊßΩÂà∞ÈõÜÁæ§ËäÇÁÇπÁöÑÊò†Â∞ÑÂÖ≥Á≥ªË¶ÅÊîπÂèòÔºå‰∏çÂèòÁöÑÊòØÈîÆÂà∞ÊßΩÁöÑÊò†Â∞ÑÂÖ≥Á≥ª. RedisÈõÜÁæ§ÔºåË¶Å‰øùËØÅ16384‰∏™ÊßΩÂØπÂ∫îÁöÑnodeÈÉΩÊ≠£Â∏∏Â∑•‰ΩúÔºåÂ¶ÇÊûúÊüê‰∏™nodeÂèëÁîüÊïÖÈöúÔºåÈÇ£ÂÆÉË¥üË¥£ÁöÑslots‰πüÂ∞±Â§±ÊïàÔºåÊï¥‰∏™ÈõÜÁæ§Â∞Ü‰∏çËÉΩÂ∑•‰Ωú„ÄÇ‰∏∫‰∫ÜÂ¢ûÂä†ÈõÜÁæ§ÁöÑÂèØËÆøÈóÆÊÄßÔºåÂÆòÊñπÊé®ËçêÁöÑÊñπÊ°àÊòØÂ∞ÜnodeÈÖçÁΩÆÊàê‰∏ª‰ªéÁªìÊûÑÔºåÂç≥‰∏Ä‰∏™master‰∏ªËäÇÁÇπÔºåÊåÇn‰∏™slave‰ªéËäÇÁÇπ„ÄÇËøôÊó∂ÔºåÂ¶ÇÊûú‰∏ªËäÇÁÇπÂ§±ÊïàÔºåRedis Cluster‰ºöÊ†πÊçÆÈÄâ‰∏æÁÆóÊ≥ï‰ªéslaveËäÇÁÇπ‰∏≠ÈÄâÊã©‰∏Ä‰∏™‰∏äÂçá‰∏∫‰∏ªËäÇÁÇπÔºåÊï¥‰∏™ÈõÜÁæ§ÁªßÁª≠ÂØπÂ§ñÊèê‰æõÊúçÂä°„ÄÇ 4. Êüê‰∏™MasterÂèàÊÄé‰πàÁü•ÈÅìÊüê‰∏™ÊßΩËá™Â∑±ÊòØ‰∏çÊòØÊã•ÊúâÂë¢Ôºü MasterËäÇÁÇπÁª¥Êä§ÁùÄ‰∏Ä‰∏™16384/8Â≠óËäÇÁöÑ‰ΩçÂ∫èÂàóÔºåMasterËäÇÁÇπÁî®bitÊù•Ê†áËØÜÂØπ‰∫éÊüê‰∏™ÊßΩËá™Â∑±ÊòØÂê¶Êã•Êúâ„ÄÇÊØîÂ¶ÇÂØπ‰∫éÁºñÂè∑‰∏∫1ÁöÑÊßΩÔºåMasterÂè™Ë¶ÅÂà§Êñ≠Â∫èÂàóÁöÑÁ¨¨‰∫å‰ΩçÔºàÁ¥¢Âºï‰ªé0ÂºÄÂßãÔºâÊòØ‰∏çÊòØ‰∏∫1Âç≥ÂèØ„ÄÇ Â¶Ç‰∏äÈù¢ÁöÑÂ∫èÂàóÔºåË°®Á§∫ÂΩìÂâçMasterÊã•ÊúâÁºñÂè∑‰∏∫1Ôºå134ÁöÑÊßΩ„ÄÇÈõÜÁæ§ÂêåÊó∂ËøòÁª¥Êä§ÁùÄÊßΩÂà∞ÈõÜÁæ§ËäÇÁÇπÁöÑÊò†Â∞ÑÔºåÊòØÁî±ÈïøÂ∫¶‰∏∫16384Á±ªÂûã‰∏∫ËäÇÁÇπÁöÑÊï∞ÁªÑÂÆûÁé∞ÁöÑÔºåÊßΩÁºñÂè∑‰∏∫Êï∞ÁªÑÁöÑ‰∏ãÊ†áÔºåÊï∞ÁªÑÂÜÖÂÆπ‰∏∫ÈõÜÁæ§ËäÇÁÇπÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂæàÂø´Âú∞ÈÄöËøáÊßΩÁºñÂè∑ÊâæÂà∞Ë¥üË¥£Ëøô‰∏™ÊßΩÁöÑËäÇÁÇπ„ÄÇ‰ΩçÂ∫èÂàóËøô‰∏™ÁªìÊûÑÂæàÁ≤æÂ∑ßÔºåÂç≥‰∏çÊµ™Ë¥πÂ≠òÂÇ®Á©∫Èó¥ÔºåÊìç‰ΩúËµ∑Êù•ÂèàÂæà‰æøÊç∑„ÄÇ ÂÖ∑‰ΩìÂèÇÁÖßÔºöhttp://blog.jobbole.com/103258/ ,ËøòÊèêÂà∞‰∫ÜslotËøÅÁßªÁöÑ‰∏Ä‰∫õÁªÜËäÇ„ÄÇ 5. redisËäÇÁÇπ‰πãÈó¥Â¶Ç‰ΩïÈÄö‰ø°ÁöÑÔºü gossipÂçèËÆÆÔºöËäÇÁÇπ‰πãÈó¥ÂΩºÊ≠§‰∏çÊñ≠ÈÄö‰ø°‰∫§Êç¢‰ø°ÊÅØÔºå‰∏ÄÊÆµÊó∂Èó¥ÂêéÊâÄÊúâËäÇÁÇπÈÉΩ‰ºöÁü•ÈÅìÈõÜÁæ§ÂÆåÊï¥ÁöÑ‰ø°ÊÅØ„ÄÇ ËäÇÁÇπ‰∏éËäÇÁÇπ‰πãÈó¥ÈÄöËøá‰∫åËøõÂà∂ÂçèËÆÆËøõË°åÈÄö‰ø°„ÄÇ ÂÆ¢Êà∑Á´ØÂíåÈõÜÁæ§ËäÇÁÇπ‰πãÈó¥ÈÄö‰ø°ÂíåÈÄöÂ∏∏‰∏ÄÊ†∑ÔºåÈÄöËøáÊñáÊú¨ÂçèËÆÆËøõË°å„ÄÇ ÈõÜÁæ§ËäÇÁÇπ‰∏ç‰ºö‰ª£ÁêÜÊü•ËØ¢„ÄÇ 6. ÈõÜÁæ§‰º∏Áº© ËøôÈáå6385‰∏∫Êñ∞Âä†ÂÖ•ÁöÑËäÇÁÇπÔºå‰∏ÄÂºÄÂßãÊòØÊ≤°ÊúâÊßΩÁöÑÔºåÊâÄ‰ª•ËøõË°åslotÁöÑËøÅÁßª„ÄÇ ÈõÜÁæ§‰º∏Áº©ÔºöÊßΩÂíåÊï∞ÊçÆÂú®ËäÇÁÇπ‰πãÈó¥ÁöÑÁßªÂä®„ÄÇ ËøÅÁßªÊï∞ÊçÆÁöÑÊµÅÁ®ãÂõæÔºö ËøÅÁßªkeyÂèØ‰ª•Áî®pipelineËøõË°åÊâπÈáèÁöÑËøÅÁßª„ÄÇ ÂØπ‰∫éÊâ©ÂÆπÔºåÂéüÁêÜÂ∑≤ÁªèÂæàÊ∏ÖÊô∞‰∫ÜÔºåËá≥‰∫éÂÖ∑‰ΩìÊìç‰ΩúÔºåÁΩë‰∏äÂæàÂ§ö„ÄÇËá≥‰∫éÁº©ÂÆπÔºå‰πüÊòØÂÖàÊâãÂä®ÂÆåÊàêÊï∞ÊçÆËøÅÁßªÔºåÂÜçÂÖ≥Èó≠redis„ÄÇ 7. ÂÆ¢Êà∑Á´ØË∑ØÁî± 7.1 movedÈáçÂÆöÂêë ÂÖ∂‰∏≠ÔºåÊßΩÁõ¥Êé•ÂëΩ‰∏≠ÁöÑËØùÔºåÂ∞±Áõ¥Êé•ËøîÂõûÊßΩÁºñÂè∑Ôºö ÊßΩ‰∏çÂëΩ‰∏≠ÔºåËøîÂõûÂ∏¶ÊèêÁ§∫‰ø°ÊÅØÁöÑÂºÇÂ∏∏ÔºåÂÆ¢Êà∑Á´ØÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ‰∏ÄÊù°ÂëΩ‰ª§Ôºö ÂØπ‰∫éÂëΩ‰ª§Ë°åÁöÑÂÆûÈ™åÔºåÁî®redis-cliÂéªËøûÊé•ÈõÜÁæ§Ôºö redis -c -p 7000:Âä†‰∏ä-cÔºåË°®Á§∫‰ΩøÁî®ÈõÜÁæ§Ê®°ÂºèÔºåÂ∏ÆÂä©Êàë‰ª¨Âú®Á¨¨‰∏ÄÊ¨°‰∏çÂëΩ‰∏≠ÁöÑÊÉÖÂÜµ‰∏ãËá™Âä®Ë∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑËäÇÁÇπ‰∏äÔºö Â¶ÇÊûú‰∏çÂä†-cÁöÑËØùÔºå‰ºöËøîÂõûmovedÂºÇÂ∏∏Ôºå‰∏ç‰ºöËá™Âä®Ë∑≥ËΩ¨Ôºö 7.2 askÈáçÂÆöÂêë Âú®Êâ©ÂÆπÁº©ÂÆπÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÈúÄË¶ÅÈÅçÂéÜËøô‰∏™ËäÇÁÇπ‰∏äÁöÑÊâÄÊúâÁöÑkeyÁÑ∂ÂêéËøõË°åËøÅÁßªÔºåÊòØÊØîËæÉÊÖ¢ÁöÑÔºåÂØπÂÆ¢Êà∑Á´ØÊòØ‰∏Ä‰∏™ÊåëÊàò„ÄÇÂõ†‰∏∫ÂÅáËÆæ‰∏Ä‰∏™Âú∫ÊôØÔºåÂÆ¢Êà∑Á´ØËÆøÈóÆÊüê‰∏™keyÔºåËäÇÁÇπÂëäËØâÂÆ¢Êà∑Á´ØËøô‰∏™keyÂú®Ê∫êËäÇÁÇπÔºåÂΩìÊàë‰ª¨ÂÜçÂéªÊ∫êËäÇÁÇπËÆøÈóÆÁöÑÊó∂ÂÄôÔºåÂç¥ÂèëÁé∞keyÂ∑≤ÁªèËøÅÁßªÂà∞ÁõÆÊ†áËäÇÁÇπ„ÄÇ 7.3 movedÈáçÂÆöÂêëÂíåaskÈáçÂÆöÂêëÂØπÊØî ‰∏§ËÄÖÈÉΩÊòØÂÆ¢Êà∑Á´ØÁöÑÈáçÂÆöÂêë movedÔºöÊßΩÂ∑≤ÁªèÁ°ÆÂÆöËΩ¨Áßª ask:ÊßΩËøòÂú®ËøÅÁßª‰∏≠ ÈóÆÈ¢òÔºöÂ¶ÇÊûúËäÇÁÇπ‰ºóÂ§öÔºåÈÇ£‰πàËÆ©ÂÆ¢Êà∑Á´ØÈöèÊú∫ËÆøÈóÆËäÇÁÇπÔºåÈÇ£‰πàÁõ¥Êé•ÂëΩ‰∏≠ÁöÑÊ¶ÇÁéáÂè™ÊúâÁôæÂàÜ‰πã‰∏ÄÔºåËøòÊúâÂ∞±ÊòØÂèëÁîüaskÂºÇÂ∏∏Êó∂ÔºàÂç≥ËäÇÁÇπÊ≠£Âú®ËøÅÁßªÊó∂ÔºâÂÆ¢Êà∑Á´ØÂ¶Ç‰ΩïËøòËÉΩÈ´òÊïàËøêËΩ¨Ôºü ÊÄªÁªì‰∏ÄÂè•ËØùÂ∞±ÊòØredis clusterÁöÑÂÆ¢Êà∑Á´ØÁöÑÂÆûÁé∞‰ºöÊõ¥Â§çÊùÇ„ÄÇ 8. smartÂÆ¢Êà∑Á´Ø 8.1 ËøΩÊ±ÇÁõÆÊ†á ËøΩÊ±ÇÊÄßËÉΩÔºå‰∏ç‰ºö‰ΩøÁî®‰ª£ÁêÜÊ®°ÂºèÔºåËÄåÊòØÁõ¥ËøûÂØπÂ∫îËäÇÁÇπ„ÄÇÈúÄË¶ÅÂØπmovedÂºÇÂ∏∏ÂíåaskÂºÇÂ∏∏ÂÅöÂÖºÂÆπ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÈúÄË¶ÅÊúâ‰∏Ä‰∏™Ëøô‰∏™ËØ≠Ë®ÄÂØπÂ∫îÁöÑÂÆ¢Êà∑Á´ØÊù•È´òÊïàÂÆûÁé∞Êü•ÊâæÁ≠âÊìç‰Ωú„ÄÇ 8.2 smartÂéüÁêÜ ‰ªéÈõÜÁæ§‰∏≠ÈÄâ‰∏Ä‰∏™ÂèØËøêË°åËäÇÁÇπÔºå‰ΩøÁî®cluster slotsÂàùÂßãÂåñÊßΩÂíåËäÇÁÇπÊò†Â∞Ñ Â∞Üslot‰∏énodeËäÇÁÇπÁöÑÁªìÊûúÊò†Â∞ÑÂà∞Êú¨Âú∞Ôºå‰∏∫ÊØè‰∏™ËäÇÁÇπÂàõÂª∫JedisPool ÂáÜÂ§áÊâßË°åÂëΩ‰ª§ Á¨¨‰∏ÄÊ≠•‰∏≠Â∞Üslot‰∏énodeËäÇÁÇπÁöÑÂØπÂ∫îÂÖ≥Á≥ªÊîæÂú®‰∫Ümap‰∏≠ÔºåÂΩ¢Êàê‰∏Ä‰∏™Êò†Â∞ÑÂÖ≥Á≥ªÔºõkeyÊòØÈÄöËøáCRC16ÁÆóÊ≥ïÂÜçÂèñ‰ΩôÂæóÂà∞slotÔºåÊâÄ‰ª•key‰∏éslotÁöÑÊò†Â∞ÑÂÖ≥Á≥ª‰πüÊòØÁ°ÆÂÆöÁöÑ„ÄÇÊàë‰ª¨Â∞±ÂèØ‰ª•Áõ¥Êé•ÂèëÈÄÅÂëΩ‰ª§„ÄÇÂè™Ë¶ÅÂêéÈù¢ÈõÜÁæ§Ê≤°ÊúâÂèëÁîüÊï∞ÊçÆËøÅÁßªÔºåÈÇ£‰πàÂ∞±‰ºöËøûÊé•ÊàêÂäü„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÂú®ËøûÊé•ÁöÑÊó∂ÂÄôÂá∫Áé∞‰∫ÜËøûÊé•Âá∫ÈîôÔºåËØ¥ÊòéËøô‰∏™keyÂ∑≤ÁªèËøÅÁßªÂà∞ÂÖ∂‰ªñÁöÑnode‰∏ä‰∫Ü„ÄÇÂ¶ÇÊûúÂèëÁé∞key‰∏çÂÅúÂú∞ËøÅÁßªÔºåË∂ÖËøá5Ê¨°Â∞±Êä•Èîô„ÄÇ Âú®ÂèëÁîümovedÂºÇÂ∏∏ÁöÑÊó∂ÂÄôÔºåÂàôÈúÄË¶ÅÂà∑Êñ∞ÁºìÂ≠òÔºåÂç≥‰∏ÄÂºÄÂßãÁª¥Êä§ÁöÑmap„ÄÇ Êúâ‰∏Ä‰∏™ÊÉÖÂÜµÊØîËæÉÂÖ®ÁöÑÂõæÔºö java redis clusterÂÆ¢Êà∑Á´ØÔºöjedisClusterÂü∫Êú¨‰ΩøÁî®‚Äì‰º™‰ª£Á†Å jedisClusterÂÜÖÈÉ®Â∑≤ÁªèÂ∞ÅË£ÖÂ•ΩÊ±†ÁöÑÂÄüËøòÊìç‰ΩúÁ≠â„ÄÇ ÂÖàÂÜô‰∏Ä‰∏™JedisClusterFactory: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import redis.clients.jedis.HostAndPort;import redis.clients.jedis.JedisCluster;import redis.clients.jedis.JedisPoolConfig;import java.io.IOException;import java.util.HashSet;import java.util.List;import java.util.Set;public class JedisClusterFactory &#123; private JedisCluster jedisCluster; private List&lt;String&gt; hostPortList; //Ë∂ÖÊó∂Êó∂Èó¥ private int timeout; public void init()&#123; //ËøôÈáåÂèØ‰ª•ËÆæÁΩÆÁõ∏ÂÖ≥ÂèÇÊï∞ JedisPoolConfig jedisPoolConfig = new JedisPoolConfig(); //‰ªéÈÖçÁΩÆÊñá‰ª∂‰∏≠ËØªÂèñip:portÁöÑÂèÇÊï∞ÊîæËøõSet‰∏≠ Set&lt;HostAndPort&gt; nodeSet = new HashSet&lt;HostAndPort&gt;(); for(String hostPort : hostPortList)&#123; String[] arr = hostPort.split(":"); if(arr.length != 2)&#123; continue; &#125; nodeSet.add(new HostAndPort(arr[0],Integer.parseInt(arr[1]))); &#125; try &#123; jedisCluster = new JedisCluster(nodeSet,timeout,jedisPoolConfig); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; public void destory()&#123; if(jedisCluster != null)&#123; try &#123; jedisCluster.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public JedisCluster getJedisCluster() &#123; return jedisCluster; &#125; //springÊ≥®ÂÖ•hostPortListÂíåtimeout public void setHostPortList(List&lt;String&gt; hostPortList) &#123; this.hostPortList = hostPortList; &#125; public void setTimeout(int timeout) &#123; this.timeout = timeout; &#125;&#125; hostPortList ÊîæÂÖ•spring bean‰∏≠ÔºåspringËá™Âä®ÂÆåÊàêÊ≥®ÂÖ•„ÄÇ 8.3 Â§öËäÇÁÇπÂëΩ‰ª§ÂÆûÁé∞ ÊúâÁöÑÊó∂ÂÄôÊàë‰ª¨ÊÉ≥Êìç‰ΩúÊâÄÊúâËäÇÁÇπÁöÑÊï∞ÊçÆ„ÄÇÂ¶Ç‰ΩïÂÆûÁé∞Âë¢Ôºü 8.4 ÊâπÈáèÊìç‰Ωú mget,msetÂøÖÈ°ªÂú®‰∏Ä‰∏™ÊßΩ„ÄÇËøô‰∏™Êù°‰ª∂ÊØîËæÉËãõÂàªÔºå‰∏ÄËà¨ÊòØ‰∏çËÉΩ‰øùËØÅÁöÑÔºåÈÇ£‰πàÂ¶Ç‰ΩïÂÆûÁé∞ÊâπÈáèÁöÑÊìç‰ΩúÂë¢Ôºü Redis ClusterÁöÑË°å‰∏∫ÂíåRedis ÁöÑÂçïËäÇÁÇπ‰∏çÂêåÔºåÁîöËá≥Âíå‰∏Ä‰∏™Sentinel ÁõëÊéßÁöÑ‰∏ª‰ªéÊ®°Âºè‰πü‰∏ç‰∏ÄÊ†∑„ÄÇ‰∏ªË¶ÅÂéüÂõ†ÊòØÈõÜÁæ§Ëá™Âä®ÂàÜÁâáÔºåÂ∞Ü‰∏Ä‰∏™key Êò†Â∞ÑÂà∞16384‰∏™ÊßΩ‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåËøô‰∫õÊßΩÂàÜÂ∏ÉÂú®Â§ö‰∏™ËäÇÁÇπ‰∏ä„ÄÇÂõ†Ê≠§Êìç‰ΩúÂ§ö‰∏™key ÁöÑÂëΩ‰ª§ÂøÖÈ°ª‰øùËØÅÊâÄÊúâÁöÑkey ÈÉΩÊò†Â∞ÑÂà∞Âêå‰∏Ä‰∏™ÊßΩ‰∏äÔºåÈÅøÂÖçË∑®ÊßΩÊâßË°åÈîôËØØ„ÄÇÊõ¥Ëøõ‰∏ÄÊ≠•ËØ¥Ôºå‰ªäÂêé‰∏Ä‰∏™ÂçïÁã¨ÁöÑÈõÜÁæ§ËäÇÁÇπÔºåÂè™ÊúçÂä°‰∫é‰∏ÄÁªÑ‰∏ìÁî®ÁöÑkeysÔºåËØ∑Ê±Ç‰∏Ä‰∏™ÂëΩ‰ª§Âà∞‰∏Ä‰∏™ServerÔºåÂè™ËÉΩÂæóÂà∞ËØ•Server ‰∏äÊã•Êúâkeys ÁöÑÂØπÂ∫îÁªìÊûú„ÄÇ‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑ‰æãÂ≠êÊòØÊâßË°åKEYSÂëΩ‰ª§ÔºåÂΩìÂèëÂ∏ÉËØ•ÂëΩ‰ª§Âà∞ÈõÜÁæ§ÁéØÂ¢É‰∏≠ÁöÑÊüê‰∏™ËäÇÊó∂ÔºåÂè™ËÉΩÂæóÂà∞ËØ•ËäÇÁÇπ‰∏äÊã•ÊúâÁöÑkeysÔºåËÄå‰∏çÊòØÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑkeys„ÄÇÊâÄ‰ª•Ë¶ÅÂæóÂà∞ÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑkeysÔºåÂøÖÈ°ª‰ªéÈõÜÁæ§ÁöÑÊâÄÊúâ‰∏ªËäÇÁÇπ‰∏äËé∑ÂèñÊâÄÊúâÁöÑkeys„ÄÇ ÂØπ‰∫éÂàÜÊï£Âú®redisÈõÜÁæ§‰∏≠‰∏çÂêåËäÇÁÇπÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨Â¶Ç‰ΩïÊØîËæÉÈ´òÊïàÂú∞ÊâπÈáèËé∑ÂèñÊï∞ÊçÆÂë¢ÔºüÔºüÔºüÔºü ‰∏≤Ë°åmget‚ÄìÂéüÂßãÊñπÊ°àÔºåÊï¥‰∏Ä‰∏™forÂæ™ÁéØ ‰∏≤Ë°åIO ÂØπkeyËøõË°åRCR16ÂíåÂèñ‰ΩôÊìç‰ΩúÂæóÂà∞slotÔºåÂ∞ÜslotsÊåâÁÖßËäÇÁÇπËøõË°åÂàÜÊâπ‰º†ÈÄÅÔºö Âπ∂Ë°åIO hash_tag ‰∏çÂÅö‰ªª‰ΩïÊîπÂèòÁöÑËØùÔºåhash‰πãÂêéÂ∞±ÊØîËæÉÂùáÂåÄÂú∞Êï£Âú®ÊØè‰∏™ËäÇÁÇπ‰∏äÔºö ÈÇ£‰πàÊàë‰ª¨ËÉΩ‰∏çËÉΩÂÉè‰ΩøÁî®ÂçïÊú∫redis‰∏ÄÊ†∑Ôºå‰∏ÄÊ¨°IOÂ∞ÜÊâÄÊúâÁöÑkeyÂèñÂá∫Êù•Âë¢Ôºühash-tagÊèê‰æõ‰∫ÜËøôÊ†∑ÁöÑÂäüËÉΩÔºåÂ¶ÇÊûúÂ∞Ü‰∏äËø∞ÁöÑkeyÊîπ‰∏∫Â¶Ç‰∏ãÔºå‰πüÂ∞±ÊòØÁî®Â§ßÊã¨Âè∑Êã¨Ëµ∑Êù•Áõ∏ÂêåÁöÑÂÜÖÂÆπÔºåÈÇ£‰πàËøô‰∫õkeyÂ∞±‰ºöÂà∞ÊåáÂÆöÁöÑ‰∏Ä‰∏™ËäÇÁÇπ‰∏ä„ÄÇ Âú®mgetÁöÑÊó∂ÂÄôÂè™ÈúÄË¶ÅÂú®‰∏ÄÂè∞Êú∫Âô®‰∏äÂéªÂç≥ÂèØ„ÄÇ ÂØπÊØî ÊñπÊ°à‰∏âÊØîËæÉÂ§çÊùÇÔºå‰∏ÄËà¨‰∏çÁî®ÔºõÊñπÊ°àÂõõÂèØËÉΩ‰ºöÂá∫Áé∞Êï∞ÊçÆÂÄæÊñúÔºå‰πü‰∏çÁî®„ÄÇÊñπÊ°à‰∏ÄÂú®keyÂ∞èÁöÑÊó∂ÂÄôÂèØ‰ª•Áî®ÔºõÊñπÊ°à‰∫åÁõ∏ÂØπÊù•ËØ¥Êúâ‰∏ÄÁÇπ‰ºòÂäøÔºõ ‰∏∫‰ªÄ‰πàËØ¥ÊòØ‰∏ÄÁÇπ‰ºòÂäøÂë¢ÔºüpipelineÊâπÈáèÂ§ÑÁêÜ‰∏çÂ∫îËØ•ÊØî‰∏≤Ë°åÂ§ÑÁêÜÂ•ΩÂæàÂ§öÂêóÔºü http://xiezefan.me/2015/12/13/redis_cluster_research_2/ http://trumandu.github.io/2016/05/09/RedisClusterÊûÑÂª∫ÊâπÈáèÊìç‰ΩúÊé¢ËÆ®/ 9. ÊïÖÈöúËΩ¨Áßª 9.1 ÊïÖÈöúÂèëÁé∞ ÈÄöËøáping/pongÊ∂àÊÅØÂÆûÁé∞ÊïÖÈöúÂèëÁé∞Ôºö‰∏çÈúÄË¶Åsentinel ÂàÜ‰∏∫‰∏ªËßÇ‰∏ãÁ∫øÂíåÂÆ¢ËßÇ‰∏ãÁ∫ø ‰∏ªËßÇ‰∏ãÁ∫øÔºö ÂÆ¢ËßÇ‰∏ãÁ∫øÔºö pfailÊ∂àÊÅØÂ∞±ÊòØ‰∏ªËßÇ‰∏ãÁ∫øÁöÑ‰ø°ÊÅØÔºåÁª¥Êä§Âú®‰∏Ä‰∏™ÈìæË°®‰∏≠ÔºåÈìæË°®‰∏≠ÂåÖÂê´‰∫ÜÊâÄÊúâÂÖ∂‰ªñËäÇÁÇπÂØπÂÖ∂‰ªñËäÇÁÇπÊâÄÊúâÁöÑ‰∏ªËßÇ‰ø°ÊÅØÔºåÊòØÊúâÊó∂Èó¥Âë®ÊúüÁöÑÔºå‰∏∫‰∫ÜÈò≤Ê≠¢ÂæàÊó©‰ª•ÂâçÁöÑ‰∏ªËßÇ‰∏ãÁ∫ø‰ø°ÊÅØËøòÊÆãÁïôÂú®ËøôÈáå„ÄÇÂØπËøô‰∏™ÈìæË°®ËøõË°åÂàÜÊûêÔºåÁ¨¶ÂêàÊù°‰ª∂Â∞±Â∞ùËØïÂÆ¢ËßÇ‰∏ãÁ∫ø„ÄÇ 9.2 ÊïÖÈöúÊÅ¢Â§ç ‰ªéËäÇÁÇπÊé•Êî∂Âà∞‰ªñÁöÑ‰∏ªËäÇÁÇπÂÆ¢ËßÇ‰∏ãÁ∫øÁöÑÈÄöÁü•ÔºåÂàôËøõË°åÊïÖÈöúÊÅ¢Â§çÁöÑÊìç‰Ωú„ÄÇ ËµÑÊ†ºÊ£ÄÊü• ÈÄâÂèñÂá∫Á¨¶ÂêàÊù°‰ª∂ÁöÑ‰ªéËäÇÁÇπÔºöÂΩì‰ªéËäÇÁÇπÂíåÊïÖÈöú‰∏ªËäÇÁÇπÁöÑÊñ≠Á∫øÊó∂Èó¥Â§™ÈïøÔºå‰ºöË¢´ÂèñÊ∂àËµÑÊ†º„ÄÇ ÂáÜÂ§áÈÄâ‰∏æÊó∂Èó¥ Â∞±ÊòØ‰∏∫‰∫Ü‰øùËØÅÂÅèÁßªÈáèÂ§ßÁöÑ‰ªéËäÇÁÇπ‰ºòÂÖàË¢´ÈÄâ‰∏æÊäïÁ•® ÈÄâ‰∏æÊäïÁ•® ÊõøÊç¢‰∏ªËäÇÁÇπ Ëøô‰∫õÊâÄÊúâÊ≠•È™§Âä†Ëµ∑Êù•ÔºåÂ∑Æ‰∏çÂ§öÂçÅÂá†ÁßíÂ∑¶Âè≥„ÄÇÊúÄÂêéÂ¶ÇÊûúÊïÖÈöúËäÇÁÇπÂèàÊÅ¢Â§çÂäüËÉΩ‰∫ÜÔºåÂ∞±Áß∞‰∏∫Êñ∞ÁöÑMasterÁöÑslaveËäÇÁÇπ„ÄÇ 10. Â∏∏ËßÅÈóÆÈ¢ò 10.1 ÈõÜÁæ§ÂÆåÊï¥ÊÄß cluster-require-full-coverageÈªòËÆ§‰∏∫yes - Ë¶ÅÊ±ÇÊâÄÊúâËäÇÁÇπÈÉΩÂú®ÊúçÂä°ÔºåÈõÜÁæ§‰∏≠16384‰∏™ÊßΩÂÖ®ÈÉ®ÂèØÁî®Ôºö‰øùËØÅÈõÜÁæ§ÂÆåÊï¥ÊÄß - ËäÇÁÇπÊïÖÈöúÊàñËÄÖÊ≠£Âú®ÊïÖÈöúËΩ¨ÁßªÔºö`(error)CLUSTERDOWN the cluster is down` ‰ΩÜÊòØÂ§ßÂ§öÊï∞‰∏öÂä°ÈÉΩÊó†Ê≥ïÂÆπÂøç„ÄÇÈúÄË¶ÅÂ∞Ücluster-require-full-coverageËÆæÁΩÆ‰∏∫no 10.2 Â∏¶ÂÆΩÊ∂àËÄó Ê∂àÊÅØÂèëÈÄÅÈ¢ëÁéáÔºöËäÇÁÇπÂèëÁé∞‰∏éÂÖ∂‰ªñËäÇÁÇπÊúÄÂêéÈÄö‰ø°Êó∂Èó¥Ë∂ÖËøácluster-node-timeout/2Êó∂‰ºöÁõ¥Êé•ÂèëÈÄÅPingÊ∂àÊÅØ Ê∂àÊÅØÊï∞ÊçÆÈáèÔºöslotsÊßΩÊï∞ÁªÑ(2kÁ©∫Èó¥)ÂíåÊï¥‰∏™ÈõÜÁæ§1„ÄÅ10ÁöÑÁä∂ÊÄÅÊï∞ÊçÆ(10‰∏™ËäÇÁÇπÁä∂ÊÄÅÊï∞ÊçÆÁ∫¶10k) ËäÇÁÇπÈÉ®ÁΩ≤ÁöÑÊú∫Âô®ËßÑÊ®°ÔºöËøõÂéªÂàÜÂ∏ÉÁöÑÊú∫Âô®Ë∂äÂ§ö‰∏îÊØèÂè∞Êú∫Âô®ÂàíÂàÜÁöÑËäÇÁÇπÊï∞Ë∂äÂùáÂåÄÔºåÂàôÈõÜÁæ§ÂÜÖÊï¥‰ΩìÁöÑÂèØÁî®Â∏¶ÂÆΩË∂äÈ´ò„ÄÇ ‰ºòÂåñÔºöÈÅøÂÖç‚ÄúÂ§ß‚ÄùÈõÜÁæ§ÔºåÔºöÈÅøÂÖçÂ§ö‰∏öÂä°‰ΩøÁî®‰∏Ä‰∏™ÈõÜÁæ§ÔºåÂ§ß‰∏öÂä°ÂèØÁî®Â§öÈõÜÁæ§Ôºõcluster-node-timeoutÊó∂Èó¥ËÆæÁΩÆË¶ÅÊ≥®ÊÑèÊòØÂ∏¶ÂÆΩÂíåÊïÖÈöúËΩ¨ÁßªÈÄüÂ∫¶ÁöÑÂùáË°°ÔºõÂ∞ΩÈáèÂùáÂåÄÂàÜÈÖçÂà∞Â§öÊú∫Âô®‰∏äÔºö‰øùËØÅÈ´òÂèØÁî®ÂíåÂ∏¶ÂÆΩ„ÄÇ 10.3 PubSubÂπøÊí≠ ÈóÆÈ¢òÔºöpublishÂú®ÈõÜÁæ§‰∏≠ÊØè‰∏™ËäÇÁÇπÂπøÊí≠ÔºöÂä†ÈáçÂ∏¶ÂÆΩ„ÄÇ Ëß£ÂÜ≥ÔºöÂçïÁã¨‚ÄúËµ∞‚Äù‰∏ÄÂ•óredis sentinel„ÄÇÂ∞±ÊòØÈíàÂØπÁõÆÊ†áÁöÑÂá†‰∏™ËäÇÁÇπÊûÑÂª∫redis sentinelÔºåÂú®Ëøô‰∏™ÈáåÈù¢ÂÆûÁé∞ÂπøÊí≠„ÄÇ 10.4 Êï∞ÊçÆÂÄæÊñú ËäÇÁÇπÂíåÊßΩÂàÜÈÖç‰∏çÂùáÂåÄ ./redis-trib.rb info ip:portÊü•ÁúãËäÇÁÇπ„ÄÅÊßΩ„ÄÅÈîÆÂÄºÂàÜÂ∏É ÊÖéÁî®rebalanceÂëΩ‰ª§ ‰∏çÂêåÊßΩ‰ΩçÂØπÂ∫îÈîÆÊï∞ÈáèÂ∑ÆÂºÇËæÉÂ§ß CRC16Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊØîËæÉÂùáÂåÄ ÂèØËÉΩÂ≠òÂú®hash_tag cluster countKeysinslot {slot}Ëé∑ÂèñÊßΩÂØπÂ∫îÈîÆÂÄº‰∏™Êï∞ ÂåÖÂê´bigkey ‰æãÂ¶ÇÂ§ßÂ≠óÁ¨¶‰∏≤„ÄÅÂá†Áôæ‰∏áÁöÑÂÖÉÁ¥†ÁöÑhash„ÄÅsetÁ≠â Âú®‰ªéËäÇÁÇπ‰∏äÊâßË°å:redis-cli --bigkeysÊù•Êü•ÁúãbigkeyÊÉÖÂÜµ ‰ºòÂåñÔºö‰ºòÂåñÊï∞ÊçÆÁªìÊûÑ ÂÜÖÂ≠òÁõ∏ÂÖ≥ÈÖçÁΩÆ‰∏ç‰∏ÄËá¥ Âõ†‰∏∫ÊüêÁßçÊÉÖÂÜµ‰∏ãÔºåÊüê‰∏™ËäÇÁÇπÂØπhashÊàñËÄÖSetËøôÁßçÊï∞ÊçÆÁªìÊûÑËøõË°å‰∫ÜÂçïÁã¨ÁöÑ‰ºòÂåñÔºåËÄåÂÖ∂‰ªñËäÇÁÇπÈÉΩÊ≤°ÊúâÈÖçÁΩÆÔºå‰ºöÂá∫Áé∞ÈÖçÁΩÆ‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ„ÄÇ 10.5 ËØ∑Ê±ÇÂÄæÊñú ÁÉ≠ÁÇπkeyÔºöÈáçË¶ÅÁöÑkeyÊàñËÄÖbigkey ‰ºòÂåñÔºöÈÅøÂÖçbigkey;ÁÉ≠ÈîÆ‰∏ç‰ΩøÁî®hash_tagÔºõÂΩì‰∏ÄËá¥ÊÄß‰∏çÈ´òÊó∂ÔºåÂèØ‰ª•Áî®Êú¨Âú∞ÁºìÂ≠ò+MQ 10.6 ËØªÂÜôÂàÜÁ¶ª Âè™ËØªËøûÊé•ÔºöÈõÜÁæ§Ê®°ÂºèÁöÑ‰ªéËäÇÁÇπ‰∏çÊé•Âèó‰ªª‰ΩïËØªÂÜôËØ∑Ê±Ç ÈáçÂÆöÂêëÂà∞Ë¥üË¥£ÊßΩÁöÑ‰∏ªËäÇÁÇπ(ÂØπ‰ªéËäÇÁÇπËøõË°åËØªÔºåÈÉΩÊòØÈáçÂÆöÂêëÂà∞‰∏ªËäÇÁÇπÂÜçËøîÂõû‰ø°ÊÅØ) readonlyÂëΩ‰ª§ÂèØ‰ª•ËØªÔºöËøûÊé•Á∫ßÂà´ÂëΩ‰ª§(ÊØèÊ¨°ÈáçÊñ∞ËøûÊé•ÈÉΩË¶ÅÂÜô‰∏ÄÊ¨°) ‰∏äÂõæÂèØ‰ª•ÁúãÂá∫Ôºåredis cluster ÈªòËÆ§slave ‰πüÊòØ‰∏çËÉΩËØªÁöÑÔºåÂ¶ÇÊûúË¶ÅËØªÂèñÔºåÈúÄË¶ÅÊâßË°å readonlyÔºåÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ËØªÂÜôÂàÜÁ¶ªÔºöÊõ¥Âä†Â§çÊùÇÔºàÊàêÊú¨ÂæàÈ´òÔºåÂ∞ΩÈáè‰∏çË¶Å‰ΩøÁî®Ôºâ ÂêåÊ†∑ÁöÑÈóÆÈ¢òÔºöÂ§çÂà∂Âª∂Ëøü„ÄÅËØªÂèñËøáÊúüÊï∞ÊçÆ„ÄÅ‰ªéËäÇÁÇπÊïÖÈöú ‰øÆÊîπÂÆ¢Êà∑Á´Ø 10.7 Êï∞ÊçÆËøÅÁßª ÂàÜ‰∏∫Á¶ªÁ∫øËøÅÁßªÂíåÂú®Á∫øËøÅÁßª(ÂîØÂìÅ‰ºöredis-migrate-toolÂíåË±åË±ÜËçöredis-port)„ÄÇ ÂÆòÊñπÁöÑÊñπÂºèÔºöÂè™ËÉΩ‰ªéÂçïÊú∫ËøÅÁßªÂà∞ÈõÜÁæ§„ÄÅ‰∏çÊîØÊåÅÂú®Á∫øËøÅÁßª„ÄÅ‰∏çÊîØÊåÅÊñ≠ÁÇπÁª≠‰º†„ÄÅÂçïÁ∫øÁ®ãËøÅÁßªÂΩ±ÂìçÈÄüÂ∫¶ ./redis-trib.rb import --from Ê∫êip:port --copy ÁõÆÊ†áip:port Âä†ÂÖ•Âú®ËøÅÁßªÊó∂ÂÜçÂæÄÊ∫êredisÊèíÂÖ•Âá†Êù°Êï∞ÊçÆÔºåËøôÂá†Êù°Êï∞ÊçÆ‰ºö‰∏¢Â§±(‰∏¢Â§±‰∏ÄÈÉ®ÂàÜ) 10.8 ÈõÜÁæ§vsÂçïÊú∫ ÈõÜÁæ§‰πüÊúâ‰∏ÄÂÆöÁöÑÈôêÂà∂Ôºö ÂàÜÂ∏ÉÂºèredis‰∏ç‰∏ÄÂÆöÊòØÂ•ΩÁöÑÔºö 11. ÁÆÄÂçïÊÄªÁªì]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁÆÄÊòéÁêÜËß£‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ï]]></title>
    <url>%2F2019%2F02%2F01%2Fmiscellany%2F15%E7%AE%80%E6%98%8E%E7%90%86%E8%A7%A3%E4%B8%80%E8%87%B4%E6%80%A7hash%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[Âú®ÂàÜÂ∏ÉÂºèÈõÜÁæ§‰∏≠ÔºåÂØπÊú∫Âô®ÁöÑÊ∑ªÂä†Âà†Èô§ÔºåÊàñËÄÖÊú∫Âô®ÊïÖÈöúÂêéËá™Âä®ËÑ±Á¶ªÈõÜÁæ§Ëøô‰∫õÊìç‰ΩúÊòØÂàÜÂ∏ÉÂºèÈõÜÁæ§ÁÆ°ÁêÜÊúÄÂü∫Êú¨ÁöÑÂäüËÉΩ„ÄÇÂ¶ÇÊûúÈááÁî®Â∏∏Áî®ÁöÑhash(object)%NÁÆóÊ≥ïÔºåÈÇ£‰πàÂú®ÊúâÊú∫Âô®Ê∑ªÂä†ÊàñËÄÖÂà†Èô§ÂêéÔºåÂæàÂ§öÂéüÊúâÁöÑÊï∞ÊçÆÂ∞±Êó†Ê≥ïÊâæÂà∞‰∫ÜÔºåËøôÊ†∑‰∏•ÈáçÁöÑËøùÂèç‰∫ÜÂçïË∞ÉÊÄßÂéüÂàô„ÄÇÊé•‰∏ãÊù•‰∏ªË¶ÅËÆ≤Ëß£‰∏Ä‰∏ã‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÊòØÂ¶Ç‰ΩïËÆæËÆ°ÁöÑ„ÄÇ ÁéØÂΩ¢HashÁ©∫Èó¥ ÊåâÁÖßÂ∏∏Áî®ÁöÑhashÁÆóÊ≥ïÊù•Â∞ÜÂØπÂ∫îÁöÑkeyÂìàÂ∏åÂà∞‰∏Ä‰∏™ÂÖ∑Êúâ2^32 Ê¨°Êñπ‰∏™Ê°∂ÁöÑÁ©∫Èó¥‰∏≠ÔºåÂç≥0~(2^32)-1ÁöÑÊï∞Â≠óÁ©∫Èó¥‰∏≠„ÄÇÁé∞Âú®Êàë‰ª¨ÂèØ‰ª•Â∞ÜËøô‰∫õÊï∞Â≠óÂ§¥Â∞æÁõ∏ËøûÔºåÊÉ≥Ë±°Êàê‰∏Ä‰∏™Èó≠ÂêàÁöÑÁéØÂΩ¢„ÄÇÂ¶Ç‰∏ãÂõæ ÊääÊï∞ÊçÆÈÄöËøá‰∏ÄÂÆöÁöÑhashÁÆóÊ≥ïÂ§ÑÁêÜÂêéÊò†Â∞ÑÂà∞ÁéØ‰∏ä Áé∞Âú®Êàë‰ª¨Â∞Üobject1„ÄÅobject2„ÄÅobject3„ÄÅobject4Âõõ‰∏™ÂØπË±°ÈÄöËøáÁâπÂÆöÁöÑHashÂáΩÊï∞ËÆ°ÁÆóÂá∫ÂØπÂ∫îÁöÑkeyÂÄºÔºåÁÑ∂ÂêéÊï£ÂàóÂà∞HashÁéØ‰∏ä„ÄÇÂ¶Ç‰∏ãÂõæÔºö 1234Hash(object1) = key1ÔºõHash(object2) = key2ÔºõHash(object3) = key3ÔºõHash(object4) = key4Ôºõ Â∞ÜÊú∫Âô®ÈÄöËøáhashÁÆóÊ≥ïÊò†Â∞ÑÂà∞ÁéØ‰∏ä Âú®ÈááÁî®‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÁöÑÂàÜÂ∏ÉÂºèÈõÜÁæ§‰∏≠Â∞ÜÊñ∞ÁöÑÊú∫Âô®Âä†ÂÖ•ÔºåÂÖ∂ÂéüÁêÜÊòØÈÄöËøá‰ΩøÁî®‰∏éÂØπË±°Â≠òÂÇ®‰∏ÄÊ†∑ÁöÑHashÁÆóÊ≥ïÂ∞ÜÊú∫Âô®‰πüÊò†Â∞ÑÂà∞ÁéØ‰∏≠Ôºà‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂØπÊú∫Âô®ÁöÑhashËÆ°ÁÆóÊòØÈááÁî®Êú∫Âô®ÁöÑIPÊàñËÄÖÊú∫Âô®ÂîØ‰∏ÄÁöÑÂà´Âêç‰Ωú‰∏∫ËæìÂÖ•ÂÄºÔºâÔºåÁÑ∂Âêé‰ª•È°∫Êó∂ÈíàÁöÑÊñπÂêëËÆ°ÁÆóÔºåÂ∞ÜÊâÄÊúâÂØπË±°Â≠òÂÇ®Âà∞Á¶ªËá™Â∑±ÊúÄËøëÁöÑÊú∫Âô®‰∏≠„ÄÇ ÂÅáËÆæÁé∞Âú®ÊúâNODE1ÔºåNODE2ÔºåNODE3‰∏âÂè∞Êú∫Âô®ÔºåÈÄöËøáHashÁÆóÊ≥ïÂæóÂà∞ÂØπÂ∫îÁöÑKEYÂÄºÔºåÊò†Â∞ÑÂà∞ÁéØ‰∏≠ÔºåÂÖ∂Á§∫ÊÑèÂõæÂ¶Ç‰∏ãÔºö 123Hash(NODE1) = KEY1;Hash(NODE2) = KEY2;Hash(NODE3) = KEY3; ÈÄöËøá‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÂØπË±°‰∏éÊú∫Âô®Â§Ñ‰∫éÂêå‰∏ÄÂìàÂ∏åÁ©∫Èó¥‰∏≠ÔºåËøôÊ†∑ÊåâÈ°∫Êó∂ÈíàËΩ¨Âä®object1Â≠òÂÇ®Âà∞‰∫ÜNODE1‰∏≠Ôºåobject3Â≠òÂÇ®Âà∞‰∫ÜNODE2‰∏≠Ôºåobject2„ÄÅobject4Â≠òÂÇ®Âà∞‰∫ÜNODE3‰∏≠„ÄÇÂú®ËøôÊ†∑ÁöÑÈÉ®ÁΩ≤ÁéØÂ¢É‰∏≠ÔºåhashÁéØÊòØ‰∏ç‰ºöÂèòÊõ¥ÁöÑÔºåÂõ†Ê≠§ÔºåÈÄöËøáÁÆóÂá∫ÂØπË±°ÁöÑhashÂÄºÂ∞±ËÉΩÂø´ÈÄüÁöÑÂÆö‰ΩçÂà∞ÂØπÂ∫îÁöÑÊú∫Âô®‰∏≠ÔºåËøôÊ†∑Â∞±ËÉΩÊâæÂà∞ÂØπË±°ÁúüÊ≠£ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆ‰∫Ü„ÄÇ Êú∫Âô®ÁöÑÂà†Èô§‰∏éÊ∑ªÂä† ÊôÆÈÄöhashÊ±Ç‰ΩôÁÆóÊ≥ïÊúÄ‰∏∫‰∏çÂ¶•ÁöÑÂú∞ÊñπÂ∞±ÊòØÂú®ÊúâÊú∫Âô®ÁöÑÊ∑ªÂä†ÊàñËÄÖÂà†Èô§‰πãÂêé‰ºöÁÖßÊàêÂ§ßÈáèÁöÑÂØπË±°Â≠òÂÇ®‰ΩçÁΩÆÂ§±ÊïàÔºåËøôÊ†∑Â∞±Â§ßÂ§ßÁöÑ‰∏çÊª°Ë∂≥ÂçïË∞ÉÊÄß‰∫Ü„ÄÇ‰∏ãÈù¢Êù•ÂàÜÊûê‰∏Ä‰∏ã‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÁöÑ„ÄÇ ËäÇÁÇπÔºàÊú∫Âô®ÔºâÁöÑÂà†Èô§ ‰ª•‰∏äÈù¢ÁöÑÂàÜÂ∏É‰∏∫‰æãÔºåÂ¶ÇÊûúNODE2Âá∫Áé∞ÊïÖÈöúË¢´Âà†Èô§‰∫ÜÔºåÈÇ£‰πàÊåâÁÖßÈ°∫Êó∂ÈíàËøÅÁßªÁöÑÊñπÊ≥ïÔºåobject3Â∞Ü‰ºöË¢´ËøÅÁßªÂà∞NODE3‰∏≠ÔºåËøôÊ†∑‰ªÖ‰ªÖÊòØobject3ÁöÑÊò†Â∞Ñ‰ΩçÁΩÆÂèëÁîü‰∫ÜÂèòÂåñÔºåÂÖ∂ÂÆÉÁöÑÂØπË±°Ê≤°Êúâ‰ªª‰ΩïÁöÑÊîπÂä®„ÄÇÂ¶Ç‰∏ãÂõæÔºö ËäÇÁÇπÔºàÊú∫Âô®ÔºâÁöÑÊ∑ªÂä† Â¶ÇÊûúÂæÄÈõÜÁæ§‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑËäÇÁÇπNODE4ÔºåÈÄöËøáÂØπÂ∫îÁöÑÂìàÂ∏åÁÆóÊ≥ïÂæóÂà∞KEY4ÔºåÂπ∂Êò†Â∞ÑÂà∞ÁéØ‰∏≠ÔºåÂ¶Ç‰∏ãÂõæÔºö ÈÄöËøáÊåâÈ°∫Êó∂ÈíàËøÅÁßªÁöÑËßÑÂàôÔºåÈÇ£‰πàobject2Ë¢´ËøÅÁßªÂà∞‰∫ÜNODE4‰∏≠ÔºåÂÖ∂ÂÆÉÂØπË±°Ëøò‰øùÊåÅËøôÂéüÊúâÁöÑÂ≠òÂÇ®‰ΩçÁΩÆ„ÄÇÈÄöËøáÂØπËäÇÁÇπÁöÑÊ∑ªÂä†ÂíåÂà†Èô§ÁöÑÂàÜÊûêÔºå‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÂú®‰øùÊåÅ‰∫ÜÂçïË∞ÉÊÄßÁöÑÂêåÊó∂ÔºåËøòÊòØÊï∞ÊçÆÁöÑËøÅÁßªËææÂà∞‰∫ÜÊúÄÂ∞èÔºåËøôÊ†∑ÁöÑÁÆóÊ≥ïÂØπÂàÜÂ∏ÉÂºèÈõÜÁæ§Êù•ËØ¥ÊòØÈùûÂ∏∏ÂêàÈÄÇÁöÑÔºåÈÅøÂÖç‰∫ÜÂ§ßÈáèÊï∞ÊçÆËøÅÁßªÔºåÂáèÂ∞è‰∫ÜÊúçÂä°Âô®ÁöÑÁöÑÂéãÂäõ„ÄÇ Âπ≥Ë°°ÊÄß Ê†πÊçÆ‰∏äÈù¢ÁöÑÂõæËß£ÂàÜÊûêÔºå‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÊª°Ë∂≥‰∫ÜÂçïË∞ÉÊÄßÂíåË¥üËΩΩÂùáË°°ÁöÑÁâπÊÄß‰ª•Âèä‰∏ÄËà¨hashÁÆóÊ≥ïÁöÑÂàÜÊï£ÊÄßÔºå‰ΩÜËøôËøòÂπ∂‰∏çËÉΩÂΩìÂÅöÂÖ∂Ë¢´ÂπøÊ≥õÂ∫îÁî®ÁöÑÂéüÁî±ÔºåÂõ†‰∏∫ËøòÁº∫Â∞ë‰∫ÜÂπ≥Ë°°ÊÄß„ÄÇ‰∏ãÈù¢Â∞ÜÂàÜÊûê‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÊòØÂ¶Ç‰ΩïÊª°Ë∂≥Âπ≥Ë°°ÊÄßÁöÑ„ÄÇ hashÁÆóÊ≥ïÊòØ‰∏ç‰øùËØÅÂπ≥Ë°°ÁöÑÔºåÂ¶Ç‰∏äÈù¢Âè™ÈÉ®ÁΩ≤‰∫ÜNODE1ÂíåNODE3ÁöÑÊÉÖÂÜµÔºàNODE2Ë¢´Âà†Èô§ÁöÑÂõæÔºâÔºåobject1Â≠òÂÇ®Âà∞‰∫ÜNODE1‰∏≠ÔºåËÄåobject2„ÄÅobject3„ÄÅobject4ÈÉΩÂ≠òÂÇ®Âà∞‰∫ÜNODE3‰∏≠ÔºåËøôÊ†∑Â∞±ÁÖßÊàê‰∫ÜÈùûÂ∏∏‰∏çÂπ≥Ë°°ÁöÑÁä∂ÊÄÅ„ÄÇÂú®‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï‰∏≠Ôºå‰∏∫‰∫ÜÂ∞ΩÂèØËÉΩÁöÑÊª°Ë∂≥Âπ≥Ë°°ÊÄßÔºåÂÖ∂ÂºïÂÖ•‰∫ÜËôöÊãüËäÇÁÇπ„ÄÇ ‚ÄúËôöÊãüËäÇÁÇπ‚ÄùÔºà virtual node ÔºâÊòØÂÆûÈôÖËäÇÁÇπÔºàÊú∫Âô®ÔºâÂú® hash Á©∫Èó¥ÁöÑÂ§çÂà∂ÂìÅÔºà replica ÔºâÔºå‰∏ÄÂÆûÈôÖ‰∏™ËäÇÁÇπÔºàÊú∫Âô®ÔºâÂØπÂ∫î‰∫ÜËã•Âπ≤‰∏™‚ÄúËôöÊãüËäÇÁÇπ‚ÄùÔºåËøô‰∏™ÂØπÂ∫î‰∏™Êï∞‰πüÊàê‰∏∫‚ÄúÂ§çÂà∂‰∏™Êï∞‚ÄùÔºå‚ÄúËôöÊãüËäÇÁÇπ‚ÄùÂú® hash Á©∫Èó¥‰∏≠‰ª•hashÂÄºÊéíÂàó„ÄÇ ‰ª•‰∏äÈù¢Âè™ÈÉ®ÁΩ≤‰∫ÜNODE1ÂíåNODE3ÁöÑÊÉÖÂÜµÔºàNODE2Ë¢´Âà†Èô§ÁöÑÂõæÔºâ‰∏∫‰æãÔºå‰πãÂâçÁöÑÂØπË±°Âú®Êú∫Âô®‰∏äÁöÑÂàÜÂ∏ÉÂæà‰∏çÂùáË°°ÔºåÁé∞Âú®Êàë‰ª¨‰ª•2‰∏™ÂâØÊú¨ÔºàÂ§çÂà∂‰∏™Êï∞Ôºâ‰∏∫‰æãÔºåËøôÊ†∑Êï¥‰∏™hashÁéØ‰∏≠Â∞±Â≠òÂú®‰∫Ü4‰∏™ËôöÊãüËäÇÁÇπÔºåÊúÄÂêéÂØπË±°Êò†Â∞ÑÁöÑÂÖ≥Á≥ªÂõæÂ¶Ç‰∏ãÔºö Ê†πÊçÆ‰∏äÂõæÂèØÁü•ÂØπË±°ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºöobject1-&gt;NODE1-1Ôºåobject2-&gt;NODE1-2Ôºåobject3-&gt;NODE3-2Ôºåobject4-&gt;NODE3-1„ÄÇÈÄöËøáËôöÊãüËäÇÁÇπÁöÑÂºïÂÖ•ÔºåÂØπË±°ÁöÑÂàÜÂ∏ÉÂ∞±ÊØîËæÉÂùáË°°‰∫Ü„ÄÇÈÇ£‰πàÂú®ÂÆûÈôÖÊìç‰Ωú‰∏≠ÔºåÁúüÊ≠£ÁöÑÂØπË±°Êü•ËØ¢ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÂë¢ÔºüÂØπË±°‰ªéhashÂà∞ËôöÊãüËäÇÁÇπÂà∞ÂÆûÈôÖËäÇÁÇπÁöÑËΩ¨Êç¢Â¶Ç‰∏ãÂõæÔºö ‚ÄúËôöÊãüËäÇÁÇπ‚ÄùÁöÑhashËÆ°ÁÆóÂèØ‰ª•ÈááÁî®ÂØπÂ∫îËäÇÁÇπÁöÑIPÂú∞ÂùÄÂä†Êï∞Â≠óÂêéÁºÄÁöÑÊñπÂºè„ÄÇ‰æãÂ¶ÇÂÅáËÆæNODE1ÁöÑIPÂú∞ÂùÄ‰∏∫192.168.1.100„ÄÇÂºïÂÖ•‚ÄúËôöÊãüËäÇÁÇπ‚ÄùÂâçÔºåËÆ°ÁÆó cache A ÁöÑ hash ÂÄºÔºö 1Hash(‚Äú192.168.1.100‚Äù); ÂºïÂÖ•‚ÄúËôöÊãüËäÇÁÇπ‚ÄùÂêéÔºåËÆ°ÁÆó‚ÄúËôöÊãüËäÇ‚ÄùÁÇπNODE1-1ÂíåNODE1-2ÁöÑhashÂÄº‰∏∫Ôºö 12Hash(‚Äú192.168.1.100#1‚Äù); // NODE1-1Hash(‚Äú192.168.1.100#2‚Äù); // NODE1-2 Êï¥ÁêÜËá™Ôºö ‰∫îÂàÜÈíüÁêÜËß£‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis-SentinelÂÆûÁé∞È´òÂèØÁî®ËØªÂÜôÂàÜÁ¶ª]]></title>
    <url>%2F2019%2F02%2F01%2Fredis%2FRedis-Sentinel%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨‰∏ÉÁØáÊñáÁ´†„ÄÇRedis Sentinel ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºå‰Ω†ÂèØ‰ª•Âú®‰∏Ä‰∏™Êû∂ÊûÑ‰∏≠ËøêË°åÂ§ö‰∏™ Sentinel ËøõÁ®ãÔºåËøô‰∫õËøõÁ®ã‰ΩøÁî®ÊµÅË®ÄÂçèËÆÆÔºàgossip protocols)Êù•Êé•Êî∂ÂÖ≥‰∫é‰∏ªÊúçÂä°Âô®ÊòØÂê¶‰∏ãÁ∫øÁöÑ‰ø°ÊÅØÔºåÂπ∂‰ΩøÁî®ÊäïÁ•®ÂçèËÆÆÔºàagreement protocolsÔºâÊù•ÂÜ≥ÂÆöÊòØÂê¶ÊâßË°åËá™Âä®ÊïÖÈöúËøÅÁßªÔºå‰ª•ÂèäÈÄâÊã©Âì™‰∏™‰ªéÊúçÂä°Âô®‰Ωú‰∏∫Êñ∞ÁöÑ‰∏ªÊúçÂä°Âô®„ÄÇ ËôΩÁÑ∂ Redis Sentinel ÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂèØÊâßË°åÊñá‰ª∂ redis-sentinel Ôºå‰ΩÜÂÆûÈôÖ‰∏äÂÆÉÂè™ÊòØ‰∏Ä‰∏™ËøêË°åÂú®ÁâπÊÆäÊ®°Âºè‰∏ãÁöÑ Redis ÊúçÂä°Âô®Ôºå‰Ω†ÂèØ‰ª•Âú®ÂêØÂä®‰∏Ä‰∏™ÊôÆÈÄö Redis ÊúçÂä°Âô®Êó∂ÈÄöËøáÁªôÂÆö ‚Äìsentinel ÈÄâÈ°πÊù•ÂêØÂä® Redis Sentinel „ÄÇ ÂêØÂä®ÊñπÂºè‰∏ÄÔºö‰ΩøÁî®sentinelÂèØÊâßË°åÊñá‰ª∂ redis-sentinel Á®ãÂ∫èÊù•ÂêØÂä® Sentinel Á≥ªÁªüÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö 1redis-sentinel /path/to/sentinel.conf sentinelÂè™ÊòØËøêË°åÂú®ÁâπÊÆäÊ®°Âºè‰∏ãÁöÑredisÊúçÂä°Âô®Ôºå‰Ω†ÂèØ‰ª•Áî®ÂêØÂä®redisÊúçÂä°ÁöÑÂëΩ‰ª§Êù•ÂêØÂä®‰∏Ä‰∏™ËøêË°åÂú® Sentinel Ê®°Âºè‰∏ãÁöÑ Redis ÊúçÂä°Âô®Ôºö 1redis-server /path/to/sentinel.conf --sentinel 1. redis sentinel È¶ñÂÖàÊù•ÁúãÁúã‰ªÄ‰πàÊòØ redis sentinelÔºå‰∏≠ÊñáÁøªËØëÊòØredisÂì®ÂÖµ„ÄÇÈ°æÂêçÊÄù‰πâÔºåÂì®ÂÖµÊòØÁ´ôÂ≤óÁõëÁù£Á™ÅÂèëÊÉÖÂÜµÁöÑÔºåÈÇ£‰πàËøôÈáåÂÖ∑‰ΩìÁöÑÂäüËÉΩ‰∏äÂæàÁ±ª‰ººÔºö ÁõëÊéßÔºöSentinel ‰ºö‰∏çÊñ≠Âú∞Ê£ÄÊü•‰Ω†ÁöÑ‰∏ªÊúçÂä°Âô®Âíå‰ªéÊúçÂä°Âô®ÊòØÂê¶Ëøê‰ΩúÊ≠£Â∏∏„ÄÇ ÊèêÈÜíÔºöÂΩìË¢´ÁõëÊéßÁöÑÊüê‰∏™ Redis ÊúçÂä°Âô®Âá∫Áé∞ÈóÆÈ¢òÊó∂ÔºåSentinel ÂèØ‰ª•ÈÄöËøá API ÂêëÁÆ°ÁêÜÂëòÊàñËÄÖÂÖ∂‰ªñÂ∫îÁî®Á®ãÂ∫èÂèëÈÄÅÈÄöÁü•„ÄÇ Ëá™Âä®ÊïÖÈöúËøÅÁßªÔºöÂΩì‰∏Ä‰∏™‰∏ªÊúçÂä°Âô®‰∏çËÉΩÊ≠£Â∏∏Â∑•‰ΩúÊó∂ÔºåSentinel ‰ºöÂºÄÂßã‰∏ÄÊ¨°Ëá™Âä®ÊïÖÈöúËøÅÁßªÊìç‰ΩúÔºåÂÆÉ‰ºöÂ∞ÜÂ§±Êïà‰∏ªÊúçÂä°Âô®ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™‰ªéÊúçÂä°Âô®ÂçáÁ∫ß‰∏∫Êñ∞ÁöÑ‰∏ªÊúçÂä°Âô®ÔºåÂπ∂ËÆ©Â§±Êïà‰∏ªÊúçÂä°Âô®ÁöÑÂÖ∂‰ªñ‰ªéÊúçÂä°Âô®Êîπ‰∏∫Â§çÂà∂Êñ∞ÁöÑ‰∏ªÊúçÂä°Âô®ÔºõÂΩìÂÆ¢Êà∑Á´ØËØïÂõæËøûÊé•Â§±ÊïàÁöÑ‰∏ªÊúçÂä°Âô®Êó∂ÔºåÈõÜÁæ§‰πü‰ºöÂêëÂÆ¢Êà∑Á´ØËøîÂõûÊñ∞‰∏ªÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÔºå‰ΩøÂæóÈõÜÁæ§ÂèØ‰ª•‰ΩøÁî®Êñ∞‰∏ªÊúçÂä°Âô®‰ª£ÊõøÂ§±ÊïàÊúçÂä°Âô®„ÄÇ ÂÖ∂‰∏≠ÊÄªÁªì‰∏Ä‰∏ãÊïÖÈöúËΩ¨ÁßªÁöÑÂü∫Êú¨ÂéüÁêÜÔºö Â§ö‰∏™sentinelÂèëÁé∞Âπ∂Á°ÆËÆ§masterÊúâÈóÆÈ¢ò ÈÄâ‰∏æÂá∫‰∏Ä‰∏™sentinel‰Ωú‰∏∫È¢ÜÂØº ÈÄâÂá∫‰∏Ä‰∏™ÂèØ‰ª•Êàê‰∏∫Êñ∞ÁöÑmasterÁöÑslave ÈÄöÁü•ÂÖ∂‰ªñÁöÑslaveÁß∞‰∏∫Êñ∞ÁöÑmasterÁöÑslave ÈÄöÁü•ÂÆ¢Êà∑Á´Ø‰∏ª‰ªéÂèòÂåñ Á≠âÂæÖËÄÅÁöÑmasterÂ§çÊ¥ªÁß∞‰∏∫Êñ∞ÁöÑmasterÁöÑslave ‰πüÊîØÊåÅÂ§ö‰∏™master-slaveÁªìÊûÑÔºö 2. ÂÆâË£Ö‰∏éÈÖçÁΩÆ ÈÖçÁΩÆÂºÄÂêØ‰∏ª‰ªéËäÇÁÇπ ÈÖçÁΩÆÂºÄÂêØsentinelÁõëÊéß‰∏ªËäÇÁÇπÔºàsentinelÊòØÁâπÊÆäÁöÑredisÔºâ ÂÆûÈôÖÂ∫îËØ•Â§öÂè∞Êú∫Âô®Ôºå‰ΩÜÊòØÊºîÁ§∫Êñπ‰æøÔºåÂè™Áî®‰∏ÄÂè∞Êú∫Âô®Êù•Êê≠Âª∫ ËØ¶ÁªÜÈÖçÁΩÆËäÇÁÇπ Êú¨Âú∞ÂÆâË£ÖÁöÑÁªìÊûÑÂõæÔºö ÂØπ‰∫émaster:redis-7000.confÈÖçÁΩÆÔºö 12345port 7000daemonize yespidfile /usr/local/redis/data/redis-7000.pidlogfile &quot;7000.log&quot;dir &quot;/usr/local/redis/data&quot; ÂØπ‰∫éslave:redis-7001Âíåredis-7002ÈÖçÁΩÆÔºö 123456port 7001daemonize yespidfile /usr/local/redis/data/redis-7001.pidlogfile &quot;7001.log&quot;dir &quot;/usr/local/redis/data&quot;slaveof 127.0.0.1 7000 ÂêØÂä®redisÊúçÂä°Ôºö 1redis-server ../config/redis-7000.conf ËÆøÈóÆ7000Á´ØÂè£ÁöÑmaster redis: 1redis-cli -p 7000 info replication ÊòæÁ§∫‰ªñÊúâ‰∏§‰∏™‰ªéËäÇÁÇπÔºö 12345678910# Replicationrole:masterconnected_slaves:2slave0:ip=127.0.0.1,port=7002,state=online,offset=99550,lag=1slave1:ip=127.0.0.1,port=7001,state=online,offset=99816,lag=0master_repl_offset:99816repl_backlog_active:1repl_backlog_size:1048576repl_backlog_first_byte_offset:2repl_backlog_histlen:99815 ÂØπ‰∫ésentinel‰∏ªË¶ÅÈÖçÁΩÆÔºö master sentinel config: 123456port 26379daemonize yesdir &quot;/usr/local/redis/data&quot;logfile &quot;26379.log&quot;sentinel monitor mymaster 127.0.0.1 7000 2... ÂêØÂä®redis sentinel: 1redis-sentinel ../config/redis-sentinel-26379.conf ËÆøÈóÆ26379 redis sentinel master: 1redis-cli -p 26379 info sentinel ÊòæÁ§∫Ôºö 123456# Sentinelsentinel_masters:1sentinel_tilt:0sentinel_running_scripts:0sentinel_scripts_queue_length:0master0:name=mymaster,status=ok,address=127.0.0.1:7000,slaves=2,sentinels=3 1Êü•ÁúãËøôÂÖ≠‰∏™ËøõÁ®ãÊòØÂê¶ÈÉΩËµ∑Êù•‰∫ÜÔºöps -ef | grep redis Ê≥®ÊÑèÔºåÂ¶ÇÊûú‰∏äÈù¢ÊòØÈÖçÁΩÆÂú®ËôöÊãüÊú∫ÁöÑËØùÔºåÈúÄË¶ÅÂ∞Ü127.0.0.1Êîπ‰∏∫ËôöÊãüÊú∫ÁöÑipÔºåË¶Å‰∏çÁÑ∂Êâæ‰∏çÁùÄ„ÄÇ 3. ÊïÖÈöúËΩ¨ÁßªÊºîÁªÉ 3.1 javaÂÆ¢Êà∑Á´ØÁ®ãÂ∫è JedisSentinelPoolÂè™ÊòØ‰∏Ä‰∏™ÈÖçÁΩÆ‰∏≠ÂøÉÔºå‰∏çÈúÄË¶ÅÂÖ∑‰ΩìËøûÊé•Êüê‰∏™redisÔºåÊ≥®ÊÑèÂÆÉ‰∏çÊòØ‰ª£ÁêÜ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435private Logger logger = LoggerFactory.getLogger(AppTest.class);@Testpublic void test4()&#123; //Âì®ÂÖµÈÖçÁΩÆÔºåÊàë‰ª¨ËÆøÈóÆredisÔºåÂ∞±ÈÄöËøásentinelÊù•ËÆøÈóÆ String masername = "mymaster"; Set&lt;String&gt; sentinels = new HashSet&lt;&gt;(); sentinels.add("10.128.24.176:26379"); sentinels.add("10.128.24.176:26380"); sentinels.add("10.128.24.176:26381"); JedisSentinelPool sentinelPool = new JedisSentinelPool(masername,sentinels); //‰∏Ä‰∏™whileÊ≠ªÂæ™ÁéØÔºåÊØèÈöî‰∏ÄÁßíÂæÄmasterÂ°ûÂÖ•‰∏Ä‰∏™ÂÄºÔºåÂπ∂‰∏îÊó•ÂøóÊâìÂç∞ while (true)&#123; Jedis jedis = null; try&#123; jedis = sentinelPool.getResource(); int index = new Random().nextInt(100000); String key = "k-" + index; String value = "v-" + index; jedis.set(key,value); logger.info("&#123;&#125; value is &#123;&#125;",key,jedis.get(key)); TimeUnit.MILLISECONDS.sleep(1000); &#125;catch (Exception e)&#123; logger.error(e.getMessage(),e); &#125;finally &#123; if(jedis != null)&#123; jedis.close(); &#125; &#125; &#125;&#125; maven‰æùËµñÊòØÔºö 123456789101112131415161718&lt;!--jedis--&gt;&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt;&lt;/dependency&gt;&lt;!--slf4jÊó•ÂøóÊé•Âè£--&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;1.7.6&lt;/version&gt;&lt;/dependency&gt;&lt;!--logbackÊó•ÂøóÂÆûÁé∞--&gt;&lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt;&lt;/dependency&gt; ÂêØÂä®Á®ãÂ∫èÔºåÂèëÁé∞ÊòØÊ≠£Â∏∏ÂÜôÂÖ•Ôºö 123456789101112131416:16:01.424 [main] INFO com.njupt.swg.AppTest - k-54795 value is v-5479516:16:02.426 [main] INFO com.njupt.swg.AppTest - k-55630 value is v-5563016:16:03.429 [main] INFO com.njupt.swg.AppTest - k-70642 value is v-7064216:16:04.430 [main] INFO com.njupt.swg.AppTest - k-42978 value is v-4297816:16:05.431 [main] INFO com.njupt.swg.AppTest - k-96297 value is v-9629716:16:06.433 [main] INFO com.njupt.swg.AppTest - k-4220 value is v-422016:16:07.435 [main] INFO com.njupt.swg.AppTest - k-34103 value is v-3410316:16:08.436 [main] INFO com.njupt.swg.AppTest - k-9177 value is v-917716:16:09.437 [main] INFO com.njupt.swg.AppTest - k-24389 value is v-2438916:16:10.439 [main] INFO com.njupt.swg.AppTest - k-32325 value is v-3232516:16:11.440 [main] INFO com.njupt.swg.AppTest - k-68538 value is v-6853816:16:12.441 [main] INFO com.njupt.swg.AppTest - k-36233 value is v-3623316:16:13.443 [main] INFO com.njupt.swg.AppTest - k-305 value is v-30516:16:14.444 [main] INFO com.njupt.swg.AppTest - k-59279 value is v-59279 Êàë‰ª¨Â∞ÜÁé∞Âú®ÁöÑÁ´ØÂè£‰∏∫7000ÁöÑredis master ÁªôkillÊéâ kill -9 masterÁöÑpid Êàë‰ª¨‰ºöÂèëÁé∞ÔºöÂÆ¢Êà∑Á´ØÊä•ÂºÇÂ∏∏Ôºå‰ΩÜÊòØÂú®Â§ßÊ¶ÇÂçÅÂá†Áßí‰πãÂêéÔºåÂ∞±ÁªßÁª≠Ê≠£Â∏∏Â°ûÂÄº‰∫Ü„ÄÇÂéüÂõ†ÊòØÊúçÂä°Á´ØÁöÑÂì®ÂÖµÊú∫Âà∂ÁöÑÈÄâ‰∏æmatserÈúÄË¶Å‰∏ÄÂÆöÁöÑÊó∂Èó¥„ÄÇ 4. ‰∏â‰∏™ÂÆöÊó∂‰ªªÂä° 4.1 ÊØè10ÁßíÊØè‰∏™sentinelÂØπmasterÂíåslaveÊâßË°åInfo ÂèëÁé∞slaveËäÇÁÇπ Á°ÆËÆ§‰∏ª‰ªéÂÖ≥Á≥ª 4.2 ÊØè2ÁßíÊØè‰∏™sentinelÈÄöËøámasterËäÇÁÇπÁöÑchannel‰∫§Êç¢‰ø°ÊÅØ(pub/sub) ÈÄöËøá__sentinel__:helloËøõË°åÈ¢ëÈÅì‰∫§‰∫í ‰∫§‰∫íÂØπËäÇÁÇπÁöÑ‚ÄúÁúãÊ≥ï‚ÄùÂíåËá™Ë∫´‰ø°ÊÅØ 4.3 ÊØè1ÁßíÊØè‰∏™sentinelÂØπÂÖ∂‰ªñsentinelÂíåredisÊâßË°åping ÂøÉË∑≥ÁõëÊµãÔºåÂ§±Ë¥•Âà§ÂÆö‰æùÊçÆ 5. ‰∏ªËßÇ‰∏ãÁ∫øÂíåÂÆ¢ËßÇ‰∏ãÁ∫ø ÂØπ‰∫é‰πãÂâçÁöÑSentinelÈÖçÁΩÆÊñá‰ª∂‰∏≠Êúâ‰∏§Êù°ÈÖçÁΩÆÔºö ÁõëÊéßmaster redisËäÇÁÇπÔºåËøôÈáåÊòØÂΩìË∂ÖËøá‰∏§‰∏™sentinelËÆ§‰∏∫masterÊåÇ‰∫ÜÔºåÂàôËÆ§‰∏∫masterÊåÇ‰∫Ü„ÄÇ sentinel monitor &lt;masterName&gt; &lt;masterIp&gt; &lt;msterPort&gt; &lt;quorum&gt; sentinel monitor mymaster 127.0.0.1 6379 2 ËøôÈáåÊòØÊØèÁßísentinelÈÉΩ‰ºöÂéªPingÂë®Âõ¥ÁöÑmaster redisÔºåË∂ÖËøá30ÁßíÊ≤°Êúâ‰ªª‰ΩïÂìçÂ∫îÔºåËØ¥ÊòéÂÖ∂ÊåÇ‰∫Ü„ÄÇ sentinel down-after-milliseconds &lt;masterName&gt; &lt;timeout&gt; sentinel down-after-milliseconds mymaster 300000 5.1 ‰∏ªËßÇ‰∏ãÁ∫ø ‰∏ªËßÇ‰∏ãÁ∫øÔºöÊØè‰∏™sentinelËäÇÁÇπÂØπRedisËäÇÁÇπÂ§±Ë¥•ÁöÑ‚ÄúÂÅèËßÅ‚Äù ËøôÊòØ‰∏ÄÁßç‰∏ªËßÇ‰∏ãÁ∫ø„ÄÇÂõ†‰∏∫Âú®Â§çÊùÇÁöÑÁΩëÁªúÁéØÂ¢É‰∏ãÔºåËøô‰∏™sentinel‰∏éËøô‰∏™master‰∏çÈÄöÔºå‰ΩÜÊòØmaster‰∏éÂÖ∂‰ªñÁöÑsentinelÈÉΩÊòØÈÄöÁöÑÂë¢ÔºüÊâÄ‰ª•ÊòØ‰∏ÄÁßç‚ÄúÂÅèËßÅ‚Äù ËøôÊòØ‰æùÈù†ÁöÑÁ¨¨‰∏âÁßçÂÆöÊó∂ÔºöÊØèÁßíÂéªping‰∏Ä‰∏ãÂë®Âõ¥ÁöÑsentinelÂíåredis„ÄÇÂØπ‰∫éslave redis,ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™‰∏ªËßÇ‰∏ãÁ∫øÔºåÂõ†‰∏∫‰ªñ‰∏çÈúÄË¶ÅËøõË°åÊïÖÈöúËΩ¨Áßª„ÄÇ 5.2 ÂÆ¢ËßÇ‰∏ãÁ∫ø ÂÆ¢ËßÇ‰∏ãÁ∫øÔºöÊâÄÊúâsentinelËäÇÁÇπÂØπmaster RedisËäÇÁÇπÂ§±Ë¥•‚ÄúËææÊàêÂÖ±ËØÜ‚ÄùÔºàË∂ÖËøáquorum‰∏™ÂàôÁªü‰∏ÄÔºâ ËøôÊòØ‰æùÈù†ÁöÑÁ¨¨‰∫åÁßçÂÆöÊó∂ÔºöÊØè‰∏§ÁßíÔºåsentinel‰πãÈó¥ËøõË°å‚ÄúÂïÜÈáè‚ÄùÔºå‰º†ÈÄíÁöÑÊ∂àÊÅØÊòØ:sentinel is-master-down-by-addr ÂØπ‰∫émaster redisÁöÑ‰∏ãÁ∫øÔºåÂøÖÈ°ªË¶ÅËææÊàêÂÖ±ËØÜÊâçÂèØ‰ª•ÔºåÂõ†‰∏∫Ê∂âÂèäÊïÖÈöúËΩ¨ÁßªÔºå‰ªÖ‰ªÖ‰æùÈù†‰∏Ä‰∏™sentinelÂà§Êñ≠ÊòØ‰∏çÂ§üÁöÑ„ÄÇ 6. È¢ÜÂØºËÄÖÈÄâ‰∏æ ÂéüÂõ†ÔºöÂè™Êúâ‰∏Ä‰∏™sentinelËäÇÁÇπÂÆåÊàêÊïÖÈöúËΩ¨Áßª ÈÄâ‰∏æÔºöÈÄöËøásentinel is-master-down-by-addrÂëΩ‰ª§ÈÉΩÂ∏åÊúõÊàê‰∏∫È¢ÜÂØºËÄÖ ÊØè‰∏™ÂÅö‰∏ªËßÇ‰∏ãÁ∫øÁöÑsentinelËäÇÁÇπÂêëÂÖ∂‰ªñsentinelËäÇÁÇπÂèëÈÄÅÂëΩ‰ª§ÔºåË¶ÅÊ±ÇÂ∞ÜÂÆÉËÆæÁΩÆ‰∏∫È¢ÜÂØºËÄÖ Êî∂Âà∞ÂëΩ‰ª§ÁöÑsentinelËäÇÁÇπÂ¶ÇÊûúËøòÊ≤°ÊúâÂêåÊÑèËøáÂÖ∂‰ªñsemtinelËäÇÁÇπÂèëÈÄÅÁöÑÂëΩ‰ª§ÔºåÈÇ£‰πàÂ∞ÜÂêåÊÑèËØ•ËØ∑Ê±ÇÔºåÂê¶ÂàôÊãíÁªù Â¶ÇÊûúËØ•sentinelËäÇÁÇπÂèëÁé∞Ëá™Â∑±ÁöÑÁ•®Êï∞Â∑≤ÁªèË∂ÖËøásentinelÈõÜÂêàÂçäÊï∞Âπ∂‰∏îË∂ÖËøáquorumÔºåÈÇ£‰πàÂÆÉÂ∞ÜÊàê‰∏∫È¢ÜÂØºËÄÖ„ÄÇ Â¶ÇÊûúÊ≠§ËøáÁ®ã‰∏≠Â§ö‰∏™sentinelËäÇÁÇπÊàê‰∏∫‰∫ÜÈ¢ÜÂØºËÄÖÔºåÈÇ£‰πàÂ∞ÜÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ÈáçÊñ∞ËøõË°åÈÄâ‰∏æ 7. ÊïÖÈöúËΩ¨Áßª ‰ªéslaveËäÇÁÇπ‰∏≠ÈÄâÂá∫‰∏Ä‰∏™‚ÄúÂêàÈÄÇÁöÑ‚ÄùËäÇÁÇπ‰Ωú‰∏∫Êñ∞ÁöÑmasterËäÇÁÇπ ÂØπ‰∏äËø∞ÁöÑslaveËäÇÁÇπÊâßË°å‚Äúslaveof no one‚ÄùÂëΩ‰ª§‰ΩøÂÖ∂Êàê‰∏∫masterËäÇÁÇπ ÂêëÂâ©‰ΩôÁöÑslaveËäÇÁÇπÂèëÈÄÅÂëΩ‰ª§ÔºåËÆ©ÂÆÉ‰ª¨Êàê‰∏∫Êñ∞masterËäÇÁÇπÁöÑslaveËäÇÁÇπÔºåÂ§çÂà∂ËßÑÂàôÂíåparallel-syncsÂèÇÊï∞‰∏ÄÊ†∑ Êõ¥Êñ∞ÂØπÂéüÊù•ÁöÑmasterËäÇÁÇπÈÖçÁΩÆ‰∏∫slaveÔºåÂπ∂‰øùÊåÅÁùÄÂØπÂÖ∂‚ÄúÂÖ≥Ê≥®‚ÄùÔºåÂΩìÊÅ¢Â§çÂêéÂëΩ‰ª§‰ªñÂéªÂ§çÂà∂Êñ∞ÁöÑmasterËäÇÁÇπ ÈÇ£‰πàÔºåÂ¶Ç‰ΩïÈÄâÊã©‚ÄúÂêàÈÄÇ‚ÄùÁöÑslaveËäÇÁÇπÂë¢Ôºü ÈÄâÊã©slave-priority(slaveËäÇÁÇπ‰ºòÂÖàÁ∫ß)ÊúÄÈ´òÁöÑslaveËäÇÁÇπÔºåÂ¶ÇÊûúÂ≠òÂú®ÂàôËøîÂõûÔºå‰∏çÂ≠òÂú®ÂàôÁªßÁª≠„ÄÇ ÈÄâÊã©Â§çÂà∂ÂÅèÁßªÈáèÊúÄÂ§ßÁöÑslaveËäÇÁÇπ(Â§çÂà∂ÂæóÊúÄÂÆåÊï¥)ÔºåÂ¶ÇÊûúÂ≠òÂú®ÂàôËøîÂõûÔºå‰∏çÂ≠òÂú®ÂàôÁªßÁª≠ ÈÄâÊã©run_idÊúÄÂ∞èÁöÑslaveËäÇÁÇπ(ÊúÄÊó©ÁöÑËäÇÁÇπ) 8. ËäÇÁÇπ‰∏ãÁ∫ø ‰∏ªËäÇÁÇπ‰∏ãÁ∫øÔºösentinel failover &lt;masterName&gt; ‰ªéËäÇÁÇπ‰∏ãÁ∫øË¶ÅÊ≥®ÊÑèËØªÂÜôÂàÜÁ¶ªÈóÆÈ¢ò„ÄÇ 9. ÊÄªÁªì‰∏éÊÄùËÄÉ redis sentinelÊòØredisÈ´òÂèØÁî®ÂÆûÁé∞ÊñπÊ°àÔºöÊïÖÈöúÂèëÁé∞„ÄÅÊïÖÈöúËá™Âä®ËΩ¨Áßª„ÄÅÈÖçÁΩÆ‰∏≠ÂøÉ„ÄÅÂÆ¢Êà∑Á´ØÈÄöÁü•„ÄÇ redis sentinel‰ªéredis2.8ÁâàÊú¨ÊâçÊ≠£ÂºèÁîü‰∫ßÂèØÁî®Ôºå‰πãÂâçÁâàÊú¨‰∏çÂèØÁîü‰∫ßÁî®„ÄÇ Â∞ΩÂèØËÉΩÂú®‰∏çÂêåÁâ©ÁêÜÊú∫‰∏äÈÉ®ÁΩ≤redis sentinelÊâÄÊúâËäÇÁÇπ„ÄÇ redis sentinel‰∏≠ÁöÑsentinelËäÇÁÇπ‰∏™Êï∞Â∫îËØ•Â§ß‰∫éÁ≠â‰∫é3‰∏îÊúÄÂ•ΩÊòØÂ•áÊï∞„ÄÇ redis sentinel‰∏≠ÁöÑÊï∞ÊçÆËäÇÁÇπÂíåÊôÆÈÄöÊï∞ÊçÆËäÇÁÇπÊ≤°ÊúâÂå∫Âà´„ÄÇÊØè‰∏™sentinelËäÇÁÇπÂú®Êú¨Ë¥®‰∏äËøòÊòØ‰∏Ä‰∏™redisÂÆû‰æãÔºåÂè™‰∏çËøáÂíåredisÊï∞ÊçÆËäÇÁÇπ‰∏çÂêåÁöÑÊòØÔºåÂÖ∂‰∏ªË¶Å‰ΩúÁî®ÊòØÁõëÊéßredisÊï∞ÊçÆËäÇÁÇπ ÂÆ¢Êà∑Á´ØÂàùÂßãÂåñÊó∂ËøûÊé•ÁöÑÊòØsentinelËäÇÁÇπÈõÜÂêàÔºå‰∏çÂÜçÊòØÂÖ∑‰ΩìÁöÑredisËäÇÁÇπÔºå‰ΩÜsentinelÂè™ÊòØÈÖçÁΩÆ‰∏≠ÂøÉ‰∏çÊòØ‰ª£ÁêÜ„ÄÇ redis sentinelÈÄöËøá‰∏â‰∏™ÂÆöÊó∂‰ªªÂä°ÂÆûÁé∞‰∫ÜsentinelËäÇÁÇπÂØπ‰∫é‰∏ªËäÇÁÇπ„ÄÅ‰ªéËäÇÁÇπ„ÄÅÂÖ∂‰ΩôsentinelËäÇÁÇπÁöÑÁõëÊéß„ÄÇ redis sentinelÂú®ÂØπËäÇÁÇπÂÅöÂ§±Ë¥•Âà§ÂÆöÊó∂ÂàÜ‰∏∫‰∏ªËßÇ‰∏ãÁ∫øÂíåÂÆ¢ËßÇ‰∏ãÁ∫ø„ÄÇ ÁúãÊáÇredis sentinelÊïÖÈöúËΩ¨ÁßªÊó•ÂøóÂØπ‰∫éredis sentinel‰ª•ÂèäÈóÆÈ¢òÊéíÊü•ÈùûÂ∏∏ÊúâÁî®„ÄÇ redis sentinelÂÆûÁé∞ËØªÂÜôÂàÜÁ¶ªÈ´òÂèØÁî®ÂèØ‰ª•‰æùËµñsentinelËäÇÁÇπÁöÑÊ∂àÊÅØÈÄöÁü•ÔºåËé∑ÂèñredisÊï∞ÊçÆËäÇÁÇπÁöÑÁä∂ÊÄÅÂèòÂåñ„ÄÇ redis sentinelÂèØ‰ª•ÂÆûÁé∞È´òÂèØÁî®ÁöÑËØªÂÜôÂàÜÁ¶ªÔºåÈ´òÂèØÁî®‰ΩìÁé∞Âú®ÊïÖÈöúËΩ¨ÁßªÔºåÈÇ£‰πàÂÆûÁé∞È´òÂèØÁî®ÁöÑÂü∫Á°ÄÂ∞±ÊòØË¶ÅÊúâ‰ªéËäÇÁÇπÔºå‰∏ª‰ªéËäÇÁÇπËøòÂÆûÁé∞‰∫ÜËØªÂÜôÂàÜÁ¶ªÔºåÂáèÂ∞ëmasterÁöÑÂéãÂäõ„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÊòØ‰ªéËäÇÁÇπ‰∏ãÁ∫ø‰∫ÜÔºåsentinelÊòØ‰∏ç‰ºöÂØπÂÖ∂ËøõË°åÊïÖÈöúËΩ¨ÁßªÁöÑÔºåÂπ∂‰∏îËøûÊé•‰ªéËäÇÁÇπÁöÑÂÆ¢Êà∑Á´Ø‰πüÊó†Ê≥ïËé∑ÂèñÂà∞Êñ∞ÁöÑÂèØÁî®‰ªéËäÇÁÇπÔºåËÄåËøô‰∫õÈóÆÈ¢òÂú®Cluster‰∏≠ÈÉΩÂæóÂà∞‰∫ÜÊúâÊïàÁöÑËß£ÂÜ≥„ÄÇ ÂØπ‰∫éÊÄßËÉΩÊèêÈ´ò„ÄÅÂÆπÈáèÊâ©Â±ïÁöÑÊó∂ÂÄôÔºåËøôÁßçÊñπÂºèÊòØÊØîËæÉÂ§çÊùÇÁöÑÔºåÊØîËæÉÊé®ËçêÁöÑÊòØ‰ΩøÁî®ÈõÜÁæ§ÔºåÂ∞±ÊòØ‰∏ãÈù¢ËÆ®ËÆ∫ÁöÑredis cluster!]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÂÄºËÆ°ÁÆóÁ≤æÂ∫¶‰∏¢Â§±ÈóÆÈ¢ò]]></title>
    <url>%2F2019%2F01%2F31%2Fmiscellany%2F14%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Êó†ËÆ∫Âú®‰ªÄ‰πà‰∏öÂä°‰∏≠ÔºåÈí±ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰∏úË•øÔºåÂØπË¥¶ÁöÑÊó∂ÂÄô‰∏ÄÂÆöË¶ÅÂØπÁöÑ‰∏äÔºå‰∏çËÉΩËøôËæπÂ∞ë‰∏ÄÂàÜÈÇ£ËæπÂ§ö‰∏ÄÂàÜ„ÄÇÂØπ‰∫éÊï∞ÂÄºÁöÑËÆ°ÁÆóÔºåÂ∞§ÂÖ∂ÊòØÂ∞èÊï∞ÔºådoubleÂíådoubleÈÉΩÊòØÁ¶ÅÊ≠¢‰ΩøÁî®ÁöÑ„ÄÇ ÈòøÈáåÂº∫Âà∂Ë¶ÅÊ±ÇÂ≠òÊîæÂ∞èÊï∞Êó∂‰ΩøÁî® decimalÔºåÁ¶ÅÊ≠¢‰ΩøÁî® float Âíå double„ÄÇ ËØ¥ÊòéÔºöfloat Âíå double Âú®Â≠òÂÇ®ÁöÑÊó∂ÂÄôÔºåÂ≠òÂú®Á≤æÂ∫¶ÊçüÂ§±ÁöÑÈóÆÈ¢òÔºåÂæàÂèØËÉΩÂú®ÂÄºÁöÑÊØîËæÉÊó∂ÔºåÂæóÂà∞‰∏çÊ≠£Á°ÆÁöÑÁªìÊûú„ÄÇÂ¶ÇÊûúÂ≠òÂÇ®ÁöÑÊï∞ÊçÆËåÉÂõ¥Ë∂ÖËøá decimal ÁöÑËåÉÂõ¥ÔºåÂª∫ËÆÆÂ∞ÜÊï∞ÊçÆÊãÜÊàêÊï¥Êï∞ÂíåÂ∞èÊï∞ÂàÜÂºÄÂ≠òÂÇ®„ÄÇ Â§ÑÁêÜÊñπÂºèÂèØ‰ª•‰∏∫Ôºömysql ÂèØ‰ª•Áî® decimal ÔºåÂ¶ÇÊûú‰Ω†ÊòØÁî® javaÔºå Âú®ÂïÜ‰∏öËÆ°ÁÆó‰∏≠Êàë‰ª¨Ë¶ÅÁî® java.math.BigDecimalÔºåÊ≥®ÊÑèÔºöÂ¶ÇÊûúÈúÄË¶ÅÁ≤æÁ°ÆËÆ°ÁÆóÔºåÈùûË¶ÅÁî®StringÊù•Â§üÈÄ†BigDecimal‰∏çÂèØÔºÅ ÈÇ£‰πàÂà∞Â∫ïÊòØ‰ªÄ‰πàÊÉÖÂÜµÔºü ‰∏Ä‰∏™‰æãÂ≠êËØ¥Êòé Â∫üËØù‰∏çÂ§öËØ¥Ôºå‰∏äÂõæÔºö ÈóÆÈ¢òÂéüÂõ† Êó†ËÆ∫ÊòØÊàë‰ª¨Êú¨ÊñáÊèêÂà∞ÁöÑdoubleÔºåËøòÊòØfloatÔºåÈÉΩÊòØÊµÆÁÇπÊï∞„ÄÇ Âú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏≠ÔºåÊµÆÁÇπÔºàËã±ËØ≠Ôºöfloating pointÔºåÁº©ÂÜô‰∏∫FPÔºâÊòØ‰∏ÄÁßçÂØπ‰∫éÂÆûÊï∞ÁöÑËøë‰ººÂÄºÊï∞ÂÄºË°®Áé∞Ê≥ïÔºåÁî±‰∏Ä‰∏™ÊúâÊïàÊï∞Â≠óÔºàÂç≥Â∞æÊï∞ÔºâÂä†‰∏äÂπÇÊï∞Êù•Ë°®Á§∫ÔºåÈÄöÂ∏∏ÊòØ‰πò‰ª•Êüê‰∏™Âü∫Êï∞ÁöÑÊï¥Êï∞Ê¨°ÊåáÊï∞ÂæóÂà∞„ÄÇ‰ª•ËøôÁßçË°®Á§∫Ê≥ïË°®Á§∫ÁöÑÊï∞ÂÄºÔºåÁß∞‰∏∫ÊµÆÁÇπÊï∞Ôºàfloating-point numberÔºâ„ÄÇ ÂÖ∂ÂÆûÊàëËßâÂæóÂæàÂ•ΩÁêÜËß£ÔºåÊàë‰ª¨‰πãÂâçËØ¥ËøáÔºåËÆ°ÁÆóÊú∫ËÆ°ÁÆóÂä†Âáè‰πòÈô§ÂïäÔºåÈÉΩÊòØÁî®ÁöÑÂä†Ê≥ïÂô®ÔºåÂÆûË¥®ÈÉΩÊòØ‰∫åËøõÂà∂ÁöÑÂä†Ê≥ïÂ§ÑÁêÜ„ÄÇÈÇ£‰πàËøôÈáåÂ∞±Êúâ‰∏Ä‰∏™‰∫åËøõÂà∂Ë°®Á§∫ÁöÑÈóÆÈ¢ò„ÄÇËØïÊÉ≥Ôºå4Ôºå2Ôºå8‰πãÊµÅÈÉΩÊòØ2ÁöÑÂπÇÊ¨°ÊñπÔºåÂèØ‰ª•ÂÆåÁæéÁî®‰∫åËøõÂà∂Ë°®Á§∫ÔºåËÆ°ÁÆóÂΩìÁÑ∂‰∏ç‰ºöÂá∫Áé∞ÈóÆÈ¢ò„ÄÇÂØπ‰∫é0Ôºå1Ôºå3Ôºå5‰πãÁ±ª‰πüÈÉΩÂèØ‰ª•Áî®‰∫åËøõÂà∂Êù•Ë°®Á§∫Âá∫Êù•ÔºåÊâÄ‰ª•ÔºåÊ≠£Êï∞ËÇØÂÆöÊòØÊ≤°ÈóÆÈ¢òÁöÑ„ÄÇ ‰ΩÜÊòØÂØπ‰∫éÂ∞èÊï∞Âë¢Ôºü1„ÄÅ0.5„ÄÅ0.25ÈÇ£ÈÉΩÊòØÂèØ‰ª•ËΩ¨Êç¢Êàê‰∫åËøõÂà∂ÁöÑÂ∞èÊï∞ÔºåÂ¶ÇÂçÅËøõÂà∂ÁöÑ0.1ÔºåÂ∞±Êó†Ê≥ïÁî®‰∫åËøõÂà∂ÂáÜÁ°ÆÁöÑË°®Á§∫Âá∫Êù•„ÄÇÂõ†Ê≠§Âè™ËÉΩ‰ΩøÁî®Ëøë‰ººÂÄºÁöÑÊñπÂºèË°®Ëææ„ÄÇ Â¶ÇÊûúÊàë‰ª¨Â∞ùËØïÁùÄÊää10ËøõÂà∂ÁöÑ0.1ËΩ¨ÂåñÊàê‰∫åËøõÂà∂Ôºå‰ºöÊÄé‰πàËΩ¨Âë¢Ôºü Âú®ÂçÅËøõÂà∂‰∏≠Ôºå0.1Â¶Ç‰ΩïËÆ°ÁÆóÂá∫Êù•ÁöÑÂë¢Ôºü 0.1 = 1 √∑ 10 ÈÇ£‰πà‰∫åËøõÂà∂‰∏≠‰πüÊòØÂêåÁêÜÔºö 1 √∑ 1010 Êàë‰ª¨ÂõûÂà∞Â∞èÂ≠¶ÁöÑËØæÂ†ÇÔºåÊù•ÂàóÁ´ñÂºèÂêßÔºö 123456789101112131415 0.000110011... ------------------1010 ) 1 0000 1010 ------ 1100 1010 ---- 10000 1010 ----- 1100 1010 ---- 10 ÂæàÊòæÁÑ∂ÔºåÈô§‰∏çÂ∞ΩÔºåÈô§Âá∫‰∫Ü‰∏Ä‰∏™Êó†ÈôêÂæ™ÁéØÂ∞èÊï∞Ôºö‰∫åËøõÂà∂ÁöÑ 0.0001100110011‚Ä¶ ÈÇ£‰πàÔºåÂ¶Ç‰ΩïÂú®ËÆ°ÁÆóÊú∫‰∏≠Ë°®Á§∫Ëøô‰∏™Êó†Èôê‰∏çÂæ™ÁéØÁöÑÂ∞èÊï∞Âë¢ÔºüÂè™ËÉΩËÄÉËôëÊåâÁÖß‰∏çÂêåÁöÑÁ≤æÂ∫¶‰øùÁêÜ‰∏çÂêåÁöÑ‰ΩçÊï∞„ÄÇ Êàë‰ª¨Áü•ÈÅìfloatÊòØÂçïÁ≤æÂ∫¶ÁöÑÔºådoubleÊòØÂèåÁ≤æÂ∫¶ÁöÑ„ÄÇ‰∏çÂêåÁöÑÁ≤æÂ∫¶ÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰øùÁïôÁöÑÊúâÊïàÊï∞Â≠ó‰ΩçÊï∞‰∏çÂêåÔºå‰øùÁïôÁöÑ‰ΩçÊï∞Ë∂äÂ§öÔºåÁ≤æÂ∫¶Ë∂äÈ´ò„ÄÇ ÊâÄ‰ª•ÔºåÊµÆÁÇπÊï∞Âú®Java‰∏≠ÊòØÊó†Ê≥ïÁ≤æÁ°ÆË°®Á§∫ÁöÑÔºåÂõ†‰∏∫Â§ßÈÉ®ÂàÜÊµÆÁÇπÊï∞ËΩ¨Êç¢Êàê‰∫åËøõÂà∂ÊòØ‰∏Ä‰∏™Êó†Èôê‰∏çÂæ™ÁéØÁöÑÂ∞èÊï∞ÔºåÂè™ËÉΩÈÄöËøá‰øùÁïôÁ≤æÂ∫¶ÁöÑÊñπÂºèËøõË°åËøë‰ººË°®Á§∫„ÄÇ ÈóÆÈ¢òÁöÑËß£ÂÜ≥ String ÊûÑÈÄ†ÊñπÊ≥ïÊòØÂÆåÂÖ®ÂèØÈ¢ÑÁü•ÁöÑÔºöÂÜôÂÖ• newBigDecimal(&quot;0.1&quot;) Â∞ÜÂàõÂª∫‰∏Ä‰∏™ BigDecimalÔºåÂÆÉÊ≠£Â•ΩÁ≠â‰∫éÈ¢ÑÊúüÁöÑ 0.1„ÄÇÂõ†Ê≠§ÔºåÊØîËæÉËÄåË®ÄÔºåÈÄöÂ∏∏Âª∫ËÆÆ‰ºòÂÖà‰ΩøÁî®StringÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ ‰ΩøÁî®BigDecimal(String val)ÔºÅ 123456789101112131415161718192021222324252627//Âä†Ê≥ïpublic static BigDecimal add(double v1, double v2)&#123; BigDecimal b1 = new BigDecimal(Double.toString(v1)); BigDecimal b2 = new BigDecimal(Double.toString(v2)); return b1.add(b2);&#125;//ÂáèÊ≥ïpublic static BigDecimal sub(double v1,double v2)&#123; BigDecimal b1 = new BigDecimal(Double.toString(v1)); BigDecimal b2 = new BigDecimal(Double.toString(v2)); return b1.subtract(b2);&#125;//‰πòÊ≥ïpublic static BigDecimal mul(double v1,double v2)&#123; BigDecimal b1 = new BigDecimal(Double.toString(v1)); BigDecimal b2 = new BigDecimal(Double.toString(v2)); return b1.multiply(b2);&#125;//Èô§Ê≥ïpublic static BigDecimal div(double v1,double v2)&#123; BigDecimal b1 = new BigDecimal(Double.toString(v1)); BigDecimal b2 = new BigDecimal(Double.toString(v2)); return b1.divide(b2,2,BigDecimal.ROUND_HALF_UP);//ÂõõËàç‰∫îÂÖ•,‰øùÁïô2‰ΩçÂ∞èÊï∞,Â∫îÂØπÈô§‰∏çÂ∞ΩÁöÑÊÉÖÂÜµ&#125; ÈÇ£‰πàÔºå‰∏äÈù¢ÁöÑÁ≤æÂ∫¶‰∏¢Â§±ÈóÆÈ¢òÂ∞±ËøéÂàÉËÄåËß£‰∫Ü„ÄÇ‰ΩÜÊòØÈô§‰∏çÂ∞ΩÊÄé‰πàÂäûÔºüÊØîÂ¶Ç10.0Èô§‰ª•ËøôÈáåÁöÑ3.0Ôºå‰øùÁïôÂ∞èÊï∞ÁÇπÂêé‰∏â‰ΩçÊúâÊïàÊï∞Â≠óÔºö ÈÇ£‰πàÔºåÊØè‰∏™Áî®Êà∑ÂæóÂà∞ÁöÑÈÉΩÊòØ3.333ÂÖÉÔºå‰∏â‰∏™Áî®Êà∑Âä†Ëµ∑Êù•ÊòØÂæó‰∏çÂà∞10ÂùóÈí±ÁöÑ„ÄÇ ÂØπ‰∫éÈô§Ê≥ïÔºåÂßãÁªà‰ºö‰∫ßÁîüÈô§‰∏çÂ∞ΩÁöÑÊÉÖÂÜµÊÄé‰πàÂäûÔºüÊúâ‰∏™ËØçÂè´ËΩßÂ∑Æ ‰ªÄ‰πàÊÑèÊÄùÂë¢Ôºü‰∏æ‰∏™ÁÆÄÂçï‰æãÂ≠ê„ÄÇÂÅáÂ¶ÇÁé∞Âú®ÈúÄË¶ÅÊää10ÂÖÉÂàÜÊàê3ÂàÜÔºåÂ¶ÇÊûúÊòØ10Èô§‰ª•3Ëøô‰πàÈô§Ôºå‰ºöÂèëÁé∞‰∏∫3.33333Êó†Á©∑Â∞ΩÁöÑ3„ÄÇËøô‰∫õÊï∞Â≠óÂÆåÂÖ®Êó†Ê≥ïÂú®Á®ãÂ∫èÊàñÊï∞ÊçÆÂ∫ì‰∏≠ËøõË°åÁ≤æÁ°ÆÁöÑÂ≠òÂÇ®„ÄÇ ÁÆÄÂçïÁêÜËß£Â∞±ÊòØÔºåÂΩìÈô§‰∏çÂ∞ΩÊàñÈúÄÂéªÈô§Â∞èÊï∞ÁÇπÁöÑÊó∂ÂÄôÔºåÂâçÈù¢ÁöÑn-1Á¨îÔºàËøôÈáån=3ÔºâÂÅöÂõõËàç‰∫îÂÖ•„ÄÇÊúÄÂêé‰∏ÄÁ¨îÂÅöÂÖúÂ∫ïÔºàÊÄªÈáëÈ¢ùÂáèÂéªÂâçÈù¢n-1Á¨î‰πãÂíåÔºâ„ÄÇËøôÊ†∑‰øùËØÅÊÄªÈáëÈ¢ùÁöÑ‰∏ç‰ºö‰∏¢Â§±„ÄÇ ÊØîÂ¶Ç10ÂùóÈí±Ôºå‰∏â‰∏™Áî®Êà∑ÂàÜÔºåÂâçÈù¢‰∏§‰∏™Áî®Êà∑Âè™ËÉΩÂêÑÂàÜÂà∞3„ÄÇ333ÂùóÈí±ÔºåÊúÄÂêé‰∏Ä‰∏™Áî®Êà∑ÂàÜÂà∞3.334ÂùóÈí±„ÄÇ‰øùËØÅÊÄªÈ¢ù‰∏çÂèò„ÄÇ Ëá≥‰∫éÂéüÁêÜÔºåÊúâ‰∏ÄÁÇπÁÇπÊï∞Â≠¶ÂåñÔºå‰ª•ÂêéÂÜç‰ΩúÊé¢ËÆ®Âêß„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis‰∏ª‰ªéÂ§çÂà∂]]></title>
    <url>%2F2019%2F01%2F31%2Fredis%2FRedis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨ÂÖ≠ÁØáÊñáÁ´†„ÄÇ‰ªãÁªçredis‰∏ª‰ªéÂ§çÂà∂ÂäüËÉΩÂÆûÁé∞ÂéüÁêÜ„ÄÇ‰Ωú‰∏∫È´òÂèØÁî®ÁöÑÂü∫Á°ÄÔºå‰∫ÜËß£‰∏Ä‰∏ãÂÖ∂‰∏≠ÁöÑÈó®ÈÅìÊòØÊúâÂøÖË¶ÅÁöÑ„ÄÇ 1.ÂçïÊú∫Êúâ‰ªÄ‰πàÈóÆÈ¢ò Êú∫Âô®ÊïÖÈöú ÂÆπÈáèÁì∂È¢à QPSÁì∂È¢à 2. ‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ΩúÁî® Êï∞ÊçÆÂâØÊú¨ Êâ©Â±ïËØªÊÄßËÉΩÔºåslave‰∏ìÈó®Áî®Êù•ËØª ‰∏Ä‰∏™masterÂèØ‰ª•ÊúâÂ§ö‰∏™slaveÔºå‰∏Ä‰∏™salveÂè™ËÉΩÊúâ‰∏Ä‰∏™master 3. ‰∏§ÁßçÂÆûÁé∞ÊñπÂºè ÊñπÂºè‰∏ÄÔºöslaveofÂëΩ‰ª§ slaveof masterIp masterPort slaveof no one(‰∏ç‰ºöÊ∏ÖÈô§ÂéüÊù•ÂêåÊ≠•ÁöÑÊï∞ÊçÆÔºåËÄåÊòØÊñ∞ÁöÑÊï∞ÊçÆ‰∏ç‰ºöÂÜçÂêåÊ≠•Áªô‰ªñ) ÊñπÂºè‰∫åÔºöÈÖçÁΩÆ ‰øÆÊîπÊüê‰∏ÄË°åÁöÑÈÖçÁΩÆÔºöslaveof ip port ‰ªéËäÇÁÇπÂè™ÂÅöËØªÊìç‰ΩúÔºöslave-read-only yes ÂØπÊØî ÂëΩ‰ª§ÁöÑ‰ºòÁÇπÔºö‰∏çÈúÄË¶ÅÈáçÂêØ ÂëΩ‰ª§ÁöÑÁº∫ÁÇπÔºö‰∏ç‰æø‰∫éÁÆ°ÁêÜ ÈÖçÁΩÆÁöÑ‰ºòÁÇπÔºöÁªü‰∏ÄÈÖçÁΩÆ ÈÖçÁΩÆÁöÑÁº∫ÁÇπÔºöÈúÄË¶ÅÈáçÂêØ ‰∏Ä‰∏™Âú∫ÊôØÔºåÂÅáÂ¶Ç6380ÊòØ6379ÁöÑ‰∏Ä‰∏™‰ªéËäÇÁÇπÔºåÁÑ∂ÂêéÂ∞Ü6380ÊâßË°åsalveof no oneÔºåÁÑ∂ÂêéÊèíÂÖ•‰∏Ä‰∫õÊñ∞ÁöÑÊï∞ÊçÆÔºõÂÜçÈáçÊñ∞ÂèòÊàê6379ÁöÑ‰ªéËäÇÁÇπÔºåÈÇ£‰πàÈáåÈù¢ÁöÑÊñ∞Êï∞ÊçÆ‰ºöË¢´Ê∏ÖÈô§Êéâ„ÄÇ Êü•Áúãrun_id redis-cli -p 6379 info server | grep run 4. ÂÖ®ÈáèÂ§çÂà∂ ÂÖ®ÈáèÂ§çÂà∂ÂºÄÈîÄ bgsaveÊó∂Èó¥ rdbÁΩëÁªú‰º†ËæìÊó∂Èó¥ ‰ªéËäÇÁÇπÊ∏ÖÁ©∫Êï∞ÊçÆÁöÑÊó∂Èó¥ ‰ªéËäÇÁÇπÂä†ËΩΩRDBÁöÑÊó∂Èó¥ ÂèØËÉΩÁöÑAOFÈáçÂÜôÊó∂Èó¥ Â≠òÂú®ÁöÑÈóÆÈ¢ò Êó∂Èó¥ÂºÄÈîÄÊØîËæÉÂ§ß Â¶ÇÊûúmasterÂíåslave‰πãÈó¥ÁΩëÁªúÊâ∞Âä®ÁîöËá≥Êñ≠ÂºÄÔºåÈÇ£‰πàmasterÊ≠§Èó¥Êõ¥Êñ∞ÁöÑÊï∞ÊçÆÂØπ‰∫éslaveÊòØ‰∏çÁü•ÈÅìÁöÑÔºåÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÂ∞±ÊòØÂÜçËøõË°å‰∏ÄÊ¨°ÂÖ®ÈáèÂ§çÂà∂Ôºå‰ΩÜÊòØÊòæÁÑ∂ÔºåÊ∂àËÄóÂ§™Â§ß‰∫Ü„ÄÇ 5. ÈÉ®ÂàÜÂ§çÂà∂ 6. ÂºÄÂèë‰∏éËøêÁª¥ÁöÑÈóÆÈ¢ò ËØªÂÜôÂàÜÁ¶ª masterÂè™ÂÅöÂÜôÊìç‰ΩúÔºåslaveÊù•ÂÅöËØªÊìç‰ΩúÔºåÊù•ÂàÜÊëäÊµÅÈáè„ÄÇ‰ΩÜÊòØ‰ºöÊúâ‰∏Ä‰∫õÈóÆÈ¢òÔºö Â§çÂà∂Êï∞ÊçÆÂª∂Ëøü ËØªÂà∞ËøáÊúüÊï∞ÊçÆ ‰ªéËäÇÁÇπÊïÖÈöú ‰∏ª‰ªéÈÖçÁΩÆ‰∏ç‰∏ÄËá¥ ‰æãÂ¶Çmaxmemory‰∏ç‰∏ÄËá¥Ôºö‰∏¢Â§±Êï∞ÊçÆ Êï∞ÊçÆÁªìÊûÑ‰ºòÂåñÂèÇÊï∞ÔºöÂÜÖÂ≠ò‰∏ç‰∏ÄËá¥ ËßÑÈÅøÂÖ®ÈáèÂ§çÂà∂ Á¨¨‰∏ÄÊ¨°ÂÖ®ÈáèÂ§çÂà∂Ôºö‰∏çÂèØÈÅøÂÖç‚ÄîÂ∞è‰∏ªËäÇÁÇπ(maxmemroy‰∏çË¶ÅÂ§™Â§ß)ÊàñËÄÖÂú®‰ΩéÂ≥∞Êó∂ËøõË°åÊìç‰Ωú ËäÇÁÇπrun_id‰∏çÂåπÈÖçÔºà‰∏ªËäÇÁÇπÈáçÂêØÔºåÈÇ£‰πàmasterÁöÑrun_id‰ºöÂèëÁîüÂèòÂåñÔºåslaveÂèëÁé∞ÂÖ∂run_idÂèòÂåñÔºå‰ºöËøõË°åÂÖ®ÈáèÂ§çÂà∂ÔºâÔºõÊàë‰ª¨ÂèØ‰ª•Áî®ÊïÖÈöúËΩ¨ÁßªÔºå‰æãÂ¶ÇÂì®ÂÖµÊàñÈõÜÁæ§Êù•ÈÅøÂÖçÂÖ®ÈáèÂ§çÂà∂„ÄÇ Â§çÂà∂ÁßØÂéãÁºìÂÜ≤Âå∫‰∏çË∂≥(ÁΩëÁªú‰∏≠Êñ≠ÔºåÈÉ®ÂàÜÂ§çÂà∂Êó†Ê≥ïÊª°Ë∂≥)ÔºåÂèØ‰ª•Â¢ûÂ§ßÂ§çÂà∂ÁºìÂÜ≤Âå∫ÈÖçÁΩÆsizeÔºåÁΩëÁªúÂ¢ûÂº∫ ËßÑÈÅøÂ§çÂà∂È£éÊö¥ Ê¶ÇÂøµÔºö‰∏ªËäÇÁÇπÂÆïÊú∫ÈÄ†ÊàêÂ§ßÈáèÁöÑÂÖ®ÈáèÂ§çÂà∂ Âçï‰∏ªËäÇÁÇπÂ§çÂà∂È£éÊö¥Ôºö‰∏ªËäÇÁÇπÈáçÂêØÔºåÂ§ö‰ªéËäÇÁÇπÂ§çÂà∂ÔºõËß£ÂÜ≥ÔºöÊõ¥Êç¢Â§çÂà∂ÊãìÊâë ÂçïÊú∫Âô®Â§çÂà∂È£éÊö¥ÔºöÊú∫Âô®ÂÆïÊú∫ÂêéÔºàËØ•Êú∫Âô®ÂÖ®ÊòØMaterÔºâÔºåÂ§ßÈáèÂÖ®ÈáèÂ§çÂà∂„ÄÇËß£ÂÜ≥ÔºömasterÂàÜÊï£Â§öÊú∫Âô®„ÄÇ ËØ¥Âà∞Â∫ïÔºåËøòÊòØÈúÄË¶ÅÊúâ‰∏ÄÁßçÈ´òÂèØÁî®ÁöÑÂÆûÁé∞ÊñπÂºèÔºåÂú®masterÂá∫Áé∞ÊïÖÈöú‰πãÂêéÔºåÂ¶Ç‰ΩïËá™Âä®ÂÆûÁé∞‰ªéslaveÊôãÂçá‰∏∫masterÁªßÁª≠‰ΩøÁî®.ËÄå‰∏çÊòØ‰∏ÄÁõ¥Ê≠ªÂÆàÁùÄÂéüÊù•ËÄÅÁöÑmaster‰∏çÊîæÔºåÂõ†‰∏∫ËÄÅÁöÑmasterÂï•Êó∂ÂÄôÊÅ¢Â§ç‰∏çÁü•ÈÅìÔºåÊÅ¢Â§ç‰∫ÜÂèØËÉΩ‰ºöÈÄ†ÊàêÂ§çÂà∂È£éÊö¥ÔºåÊó¢ÁÑ∂‰ªéËäÇÁÇπÊú¨Êù•ÊòØ‰∏ÄÁõ¥‰∏émasterËäÇÁÇπ‰øùÊåÅÂ∞ΩÈáèÁöÑÂêåÊ≠•ÁöÑÔºåÈÇ£‰πà‰∏∫‰ªÄ‰πà‰∏çÂ∞ÜÊï∞ÊçÆÊúÄÊñ∞ÁöÑ‰ªéËäÇÁÇπÂçáÁ∫ß‰∏∫‰∏ªËäÇÁÇπÂë¢Ôºü‰∏ã‰∏ÄÁ´†ÁªßÁª≠Êù•ÂàÜÊûê„ÄÇ]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÊåÅ‰πÖÂåñ]]></title>
    <url>%2F2019%2F01%2F31%2Fredis%2FRedis%E6%8C%81%E4%B9%85%E5%8C%96%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨‰∫îÁØáÊñáÁ´†„ÄÇredisÂ§ÑÁêÜÊï∞ÊçÆÈÉΩÊòØÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÔºåÊâÄ‰ª•ÈÄüÂ∫¶ÁâπÂà´Âø´ÔºåÂêåÊ†∑ÔºåÂÆÉ‰πüÂèØ‰ª•ÊîØÊåÅÊåÅ‰πÖÂåñÔºåËøôÈáåÊ≥®ÊÑèÔºåÂπ∂‰∏çÊòØËØ¥redisË¶ÅÊù•ÂÖÖÂΩìmysqlÈÇ£ÁßçËßíËâ≤ÔºåÂÖ∂ÂÆûÊõ¥Â§öÁöÑÊòØ‰∏∫‰∫ÜÂú®Â¥©Ê∫ÉÁöÑÊó∂ÂÄôÂø´ÈÄüÊÅ¢Â§ç‰ª•Âèä‰∏ª‰ªéÂ§çÂà∂ËøôÊ†∑ÁöÑÂäüËÉΩ„ÄÇredisÁöÑÊåÅ‰πÖÂåñ‰∏ªË¶ÅÊúâ‰∏§ÁßçÊñπÂºèÔºå‰∏ÄÁßçÊòØRDBÔºå‰∏ÄÁßçÊòØAOFÔºåÂØπ‰∫é‰ªñ‰ª¨ÁöÑÂéüÁêÜÂíåÂå∫Âà´ÈÉΩÊòØÊØîËæÉÈáçË¶ÅÁöÑÈù¢ËØïËÄÉÂØüÁÇπÔºåÈúÄË¶ÅÊéåÊè°„ÄÇ 1. ‰ªÄ‰πàÊòØÊåÅ‰πÖÂåñ redisÊâÄÊúâÊï∞ÊçÆ‰øùÊåÅÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂØπÊï∞ÊçÆÁöÑÊõ¥Êñ∞Â∞ÜÂºÇÊ≠•Âú∞‰øùÂ≠òÂà∞Á£ÅÁõò‰∏≠„ÄÇ 2. ÊåÅ‰πÖÂåñÁöÑÊñπÂºè Âø´ÁÖß‚Äîmysql dumpÊàñËÄÖredis rdb ÂÜôÊó•Âøó‚Äîmysql binlogÊàñËÄÖhbase glogÊàñËÄÖredis aof 3. RDB ‰ªÄ‰πàÊòØRDB Ëß¶ÂèëÊú∫Âà∂‰∏âÁßç‰∏ªË¶ÅÊñπÂºè save(ÂêåÊ≠•ÊåÅ‰πÖÂåñÔºå‰ºöÈÄ†Êàêredis‰∏ªÁ∫øÁ®ãÁöÑÈòªÂ°ûÔºå‰∏çÊé®Ëçê‰ΩøÁî®) saveÊòØÂêåÊ≠•ÁöÑÔºåÂΩì‰øùÂ≠òÁöÑÊï∞ÊçÆÈáèÂæàÂ§ßÊó∂ÔºåÂèØËÉΩÈÄ†ÊàêredisÁöÑÈòªÂ°ûÔºåÂç≥ÂÆ¢Êà∑Á´ØËÆøÈóÆredisË¢´ÈòªÂ°û„ÄÇ ‰ªñÁöÑÊñá‰ª∂Á≠ñÁï•ÊòØÔºöÂ¶ÇÊûúÂ≠òÂú®ËÄÅÁöÑRDBÊñá‰ª∂ÔºåÂàôÊñ∞ÁöÑÊõøÊç¢ËÄÅÁöÑ„ÄÇÂ§çÊùÇÂ∫¶‰∏∫O(n)„ÄÇ bgsave(ÂºÇÊ≠•Ôºåfork‰∏Ä‰∏™Â≠êËøõÁ®ãÊù•ËøõË°åÊåÅ‰πÖÂåñÔºå‰∏ç‰ºöÈÄ†Êàê‰∏ªÁ∫øÁ®ãÁöÑÈòªÂ°û) ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåforkÊòØÊØîËæÉÂø´ÁöÑÔºå‰ΩÜÊòØ‰πüÂèØ‰ª•‰ºöÊÖ¢ÔºåËøôÊó∂‰ºöÈòªÂ°ûredis„ÄÇÂè™Ë¶Åfork‰∏çÊÖ¢ÔºåÂÆ¢Êà∑Á´Ø‰∏ç‰ºöË¢´ÈòªÂ°û„ÄÇ ‰ªñÁöÑÊñá‰ª∂Á≠ñÁï•ÂíåÂ§çÊùÇÂ∫¶‰∏ésaveÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ saveÂíåbgsave‰∏§ËÄÖÂØπÊØîÔºö Ëá™Âä® redisÁöÑËá™Âä®‰øùÂ≠òÁöÑÈªòËÆ§ÈÖçÁΩÆÊòØÔºö ÈÖçÁΩÆ seconds changes save 900 1 save 300 10 save 60 10000 Â∞±ÊòØËØ¥ÔºåÂú®60ÁßíÂÜÖÊîπÂèò‰∫Ü10000Êù°Êï∞ÊçÆÔºåÂ∞±Ëá™Âä®‰øùÂ≠òÔºõÂú®300ÁßíÂÜÖÊúâ10Êù°ÊîπÂèòÊâçËá™Âä®‰øùÂ≠òÔºõ900ÁßíÂÜÖÊúâ1‰∏ÄÊù°ÊîπÂèòÂ∞±‰øùÂ≠ò„ÄÇ RDBÊÄªÁªì RDBÊòØRedisÂÜÖÂ≠òÂà∞Á°¨ÁõòÁöÑÂø´ÁÖßÔºåÁî®‰∫éÊåÅ‰πÖÂåñ„ÄÇ saveÈÄöÂ∏∏‰ºöÈòªÂ°ûredis„ÄÇ bgsave‰∏ç‰ºöÈòªÂ°ûredisÔºå‰ΩÜÊòØ‰ºöforkÊñ∞ËøõÁ®ã„ÄÇ saveËá™Âä®ÈÖçÁΩÆÊª°Ë∂≥‰ªª‰∏ÄÂ∞±‰ºöË¢´ÊâßË°å„ÄÇ Êúâ‰∫õËß¶ÂèëÊú∫Âà∂‰∏çÂÆπÂøΩËßÜ„ÄÇ 4. AOF RDBÈóÆÈ¢ò ÂÖ®ÈáèÊï∞ÊçÆÂ≠òÂÖ•Á£ÅÁõò O(n)Êï∞ÊçÆÁöÑÂ§á‰ªΩÔºåÂæàËÄóÊó∂Èó¥ÔºõÂØπ‰∫ébgsaveÊù•ËØ¥Ôºåfork()ÊòØ‰∏Ä‰∏™ÂæàÊ∂àËÄóÂÜÖÂ≠òÁöÑÊìç‰ΩúÔºõÂ∞ÜÊï∞ÊçÆÂÖ®ÂÜôÂà∞Á°¨ÁõòÔºåÂøÖÁÑ∂ÂØπÁ°¨ÁõòIOÂç†Áî®ÂæàÂ§ß„ÄÇ ÂÆïÊú∫‰∏¢Â§±Êï∞ÊçÆÂ§ö ËøòÊúâ‰∏ÄÁÇπÊòØÔºöÊüê‰∏™Êó∂Èó¥ÁÇπÂÆïÊú∫ÔºåÈÇ£‰πàÂú®Êüê‰∏™Êó∂Èó¥ÊÆµÁöÑÊï∞ÊçÆÂ∞±‰∏¢Â§±‰∫Ü„ÄÇ AOFÂéüÁêÜ Â∞ÜÂØπredisÁöÑÊìç‰ΩúËøΩÂä†Âà∞aofÊñá‰ª∂‰∏≠„ÄÇÂΩìredisÂÆïÊú∫‰πãÂêéÔºå‰ΩøÁî®aofÊÅ¢Â§çÊâÄÊúâÁöÑÊìç‰ΩúÁªßËÄåÂÆûÁé∞Êï∞ÊçÆÁöÑÊÅ¢Â§ç„ÄÇ AOF‰∏âÁßçÁ≠ñÁï• always everysec redisÂá∫Áé∞ÊïÖÈöúÔºåÊúâÂèØËÉΩ‰∏¢Â§±‰∏ÄÁßíÁöÑÊï∞ÊçÆ„ÄÇredisÈªòËÆ§ÊñπÂºè„ÄÇ no ‰∏âÁßçÁ≠ñÁï•ÁöÑÊØîËæÉ AOFÈáçÂÜô Â•ΩÂ§ÑÊòØÔºöÂáèÂ∞ëÁ°¨ÁõòÂç†Áî®„ÄÅÂáèÂ∞ëÊï∞ÊçÆ‰∏¢Â§± ‰∏ãÈù¢ÊòØAOFÁöÑbgrewirteaofÁöÑËøáÁ®ãÔºö Ê≥®ÊÑèÔºöËøôÈáåÁöÑÈáçÂÜôÂπ∂‰∏çÊòØ‰∏äÈù¢ÊºîÁ§∫ÁöÑÔºåÂ∞ÜÂéüÊù•ÁöÑaofÊñá‰ª∂ËøõË°åÈáçÂÜôÔºåËÄåÊòØÊ†πÊçÆredisÁé∞Âú®ÁöÑÂÜÖÂ≠òÊï∞ÊçÆËøõË°å‰∏ÄÊ¨°ÂõûÊ∫Ø„ÄÇ aofÈáçÂÜôÊµÅÁ®ã ‰πüÂ∞±ÊòØËØ¥ÔºåÂ≠êËøõÁ®ãÂú®ÊâßË°å AOF ÈáçÂÜôÊó∂Ôºå‰∏ªËøõÁ®ãÈúÄË¶ÅÊâßË°å‰ª•‰∏ã‰∏â‰∏™Â∑•‰ΩúÔºö 1.Â§ÑÁêÜÂëΩ‰ª§ËØ∑Ê±ÇÔºõ 2.Â∞ÜÂÜôÂëΩ‰ª§ËøΩÂä†Âà∞Áé∞ÊúâÁöÑ AOF Êñá‰ª∂‰∏≠Ôºõ 3.Â∞ÜÂÜôÂëΩ‰ª§ËøΩÂä†Âà∞ AOF ÈáçÂÜôÁºìÂ≠ò‰∏≠„ÄÇ Â¶ÇÊ≠§ÂèØ‰ª•‰øùËØÅÔºö Áé∞ÊúâÁöÑAOFÂäüËÉΩÁªßÁª≠ÊâßË°åÔºåÂç≥‰Ωø AOF ÈáçÂÜôÊúüÈó¥ÂèëÁîüÂÅúÊú∫Ôºå‰πü‰∏ç‰ºöÊúâ‰ªª‰ΩïÊï∞ÊçÆ‰∏¢Â§±Ôºõ ÊâÄÊúâÂØπÊï∞ÊçÆÂ∫ìËøõË°å‰øÆÊîπÁöÑÂëΩ‰ª§ÈÉΩ‰ºöË¢´ËÆ∞ÂΩïÂà∞ AOF ÈáçÂÜôÁºìÂ≠ò‰∏≠„ÄÇ ÂΩìÂ≠êËøõÁ®ãÂÆåÊàêÂØπ AOF Êñá‰ª∂ÈáçÂÜô‰πãÂêéÔºåÂÆÉ‰ºöÂêëÁà∂ËøõÁ®ãÂèëÈÄÅ‰∏Ä‰∏™ÂÆåÊàê‰ø°Âè∑ÔºåÁà∂ËøõÁ®ãÊé•Âà∞ËØ•ÂÆåÊàê‰ø°Âè∑‰πãÂêéÔºå‰ºöË∞ÉÁî®‰∏Ä‰∏™‰ø°Âè∑Â§ÑÁêÜÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞ÂÆåÊàê‰ª•‰∏ãÂ∑•‰ΩúÔºö(ÈòªÂ°û) Â∞Ü AOF ÈáçÂÜôÁºìÂ≠ò‰∏≠ÁöÑÂÜÖÂÆπÂÖ®ÈÉ®ÂÜôÂÖ•Âà∞Êñ∞ÁöÑ AOF Êñá‰ª∂‰∏≠Ôºõ(Áé∞Êúâ AOF Êñá‰ª∂„ÄÅÊñ∞ÁöÑ AOF Êñá‰ª∂ÂíåÊï∞ÊçÆÂ∫ì‰∏âËÄÖÁöÑÁä∂ÊÄÅÂ∞±ÂÆåÂÖ®‰∏ÄËá¥‰∫Ü) ÂØπÊñ∞ÁöÑ AOF Êñá‰ª∂ËøõË°åÊîπÂêçÔºåË¶ÜÁõñÂéüÊúâÁöÑ AOF Êñá‰ª∂„ÄÇ(ÊâßË°åÂÆåÊØïÂêéÔºåÁ®ãÂ∫èÂ∞±ÂÆåÊàê‰∫ÜÊñ∞Êóß‰∏§‰∏™ AOF Êñá‰ª∂ÁöÑÊõøÊç¢) ÂΩìËøô‰∏™‰ø°Âè∑Â§ÑÁêÜÂáΩÊï∞ÊâßË°åÂÆåÊØï‰πãÂêéÔºå‰∏ªËøõÁ®ãÂ∞±ÂèØ‰ª•ÁªßÁª≠ÂÉèÂæÄÂ∏∏‰∏ÄÊ†∑Êé•Êî∂ÂëΩ‰ª§ËØ∑Ê±Ç‰∫Ü„ÄÇÂú®Êï¥‰∏™ AOF ÂêéÂè∞ÈáçÂÜôËøáÁ®ã‰∏≠ÔºåÂè™ÊúâÊúÄÂêéÁöÑ‚Äú‰∏ªËøõÁ®ãÂÜôÂÖ•ÂëΩ‰ª§Âà∞AOFÁºìÂ≠ò‚ÄùÂíå‚ÄúÂØπÊñ∞ÁöÑ AOF Êñá‰ª∂ËøõË°åÊîπÂêçÔºåË¶ÜÁõñÂéüÊúâÁöÑ AOF Êñá‰ª∂‚ÄùËøô‰∏§‰∏™Ê≠•È™§‰ºöÈÄ†Êàê‰∏ªËøõÁ®ãÈòªÂ°ûÔºåÂú®ÂÖ∂‰ªñÊó∂ÂÄôÔºå AOF ÂêéÂè∞ÈáçÂÜôÈÉΩ‰∏ç‰ºöÂØπ‰∏ªËøõÁ®ãÈÄ†ÊàêÈòªÂ°ûÔºåËøôÂ∞Ü AOF ÈáçÂÜôÂØπÊÄßËÉΩÈÄ†ÊàêÁöÑÂΩ±ÂìçÈôçÂà∞ÊúÄ‰Ωé„ÄÇ Â∞èÁªìÔºö AOF ÈáçÂÜôÁöÑÁõÆÁöÑÊòØËΩªÈáèÂú∞‰øùÂ≠òÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅÔºåÊï¥‰∏™ÈáçÂÜôËøáÁ®ãÂü∫Êú¨‰∏ä‰∏çÂΩ±Âìç Redis ‰∏ªËøõÁ®ãÂ§ÑÁêÜÂëΩ‰ª§ËØ∑Ê±ÇÔºõ AOFÂú®redisÂÆïÊú∫ÁöÑÊó∂ÂÄôÊúÄÂ§ö‰∏¢Â§±‰∏ÄÁßíÁöÑÊï∞ÊçÆÔºåÊØîRDBË¶ÅÂ•Ω‰∏ÄÁÇπÔºåÂπ∂‰∏îÂèØËØªÊÄßÈ´òÔºåÂü∫Êú¨‰∏äËÉΩÁúãÂæóÊáÇ AOF ÈáçÂÜôÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ÊúâÊ≠ß‰πâÁöÑÂêçÂ≠óÔºåÂÆûÈôÖ‰∏äÈáçÂÜôÂ∑•‰ΩúÊòØÈíàÂØπÊï∞ÊçÆÂ∫ìÁöÑÂΩìÂâçÂÄºÊù•ËøõË°åÁöÑÔºåÈáçÂÜôËøáÁ®ã‰∏≠‰∏ç‰ºöËØªÂÜô„ÄÅ‰πü‰∏çÈÄÇÁî®ÂéüÊù•ÁöÑ AOF Êñá‰ª∂Ôºõ AOF ÂèØ‰ª•Áî±Áî®Êà∑ÊâãÂä®Ëß¶ÂèëÔºå‰πüÂèØ‰ª•Áî±ÊúçÂä°Âô®Ëá™Âä®Ëß¶Âèë„ÄÇ 5. ÊåÅ‰πÖÂåñÁöÑÂèñËàçÂíåÈÄâÊã© RDBÂíåAOFÂØπÊØî ÂèØ‰ª•ÁúãÂá∫Ôºå‰∏ñÁïå‰∏äÊ≤°ÊúâÂÆåÁæéÁöÑ‰∏úË•øÔºåÂè™ÊúâÂêàÈÄÇÁöÑ‰∏úË•ø„ÄÇAOFÂêåÊ†∑Â≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºöAOFÊñá‰ª∂ÁöÑ‰ΩìÁßØÈÄöÂ∏∏Ë¶ÅÂ§ß‰∫éRDBÊñá‰ª∂ÁöÑ‰ΩìÁßØ„ÄÅ‰∏îÊÅ¢Â§çÈÄüÂ∫¶ÊÖ¢„ÄÇ RDBÊúÄ‰Ω≥Á≠ñÁï• ‚ÄúÂÖ≥‚ÄùÔºöÂª∫ËÆÆÂÖ≥Èó≠Ôºå‰ΩÜÊòØÂêéÈù¢‰∏ª‰ªéÂ§çÂà∂ÂäüËÉΩÊòØÈúÄË¶Å‰ªñÁöÑÔºåÂõ†‰∏∫ÈúÄË¶Å‰∏ªËäÇÁÇπÊâßË°ådbsaveÔºåÁÑ∂ÂêéÂ∞ÜrdbÊñá‰ª∂‰º†Áªô‰ªéËäÇÁÇπ„ÄÇÊâÄ‰ª•ËØ¥ÔºåÂÖ≥‰∏çÊòØÊ∞∏‰πÖÂÖ≥„ÄÇ ‚ÄúÈõÜ‰∏≠ÁÆ°ÁêÜ‚ÄùÔºöËôΩÁÑ∂RDBÂæàÈáçÔºå‰ΩÜÊòØÂØπ‰∫éÊï∞ÊçÆÂ§á‰ªΩÊòØÂæàÈáçË¶ÅÁöÑÔºåÊåâÁÖßÂ∞èÊó∂ÊàñËÄÖÂ§©ÈõÜ‰∏≠Âú∞ËøõË°åÂ§á‰ªΩÊØîËæÉÂ•ΩÔºåÂõ†‰∏∫‰ªñÁöÑÊñá‰ª∂ÂæàÂ∞èÔºåÂà©‰∫é‰º†Ëæì„ÄÇ ‚Äú‰∏ª‰ªéÔºå‰ªéÂºÄ‚ÄùÔºöÊúâÊó∂ÂÄô‰ªéËäÇÁÇπÊâìÂºÄËøô‰∏™ÂäüËÉΩÊòØÊØîËæÉÂ•ΩÁöÑÔºå‰ΩÜÊòØÂ§á‰ªΩÂ§™È¢ëÁπÅÔºåÂèñÂÜ≥‰∫éÂÆûÈôÖÁöÑÂú∫ÊôØ„ÄÇ AOFÊúÄ‰Ω≥Á≠ñÁï• ‚ÄúÂºÄ‚ÄùÔºöÂª∫ËÆÆÊâìÂºÄÔºåÂ¶ÇÊûú‰ªÖ‰ªÖÊòØ‰Ωú‰∏∫‰∏Ä‰∏™ÊôÆÈÄöÁºìÂ≠òÔºåÂØπ‰∫éÊï∞ÊçÆË¶ÅÊ±Ç‰∏çÊòØÂæàÈ´òÔºåËøôÊ¨°Êï∞ÊçÆ‰∏¢‰∫ÜÔºå‰∏ãÊ¨°ÂèØ‰ª•‰ªéÊï∞ÊçÆÂ∫ìÂèñ(Êï∞ÊçÆÂ∫ìÂéãÂäõ‰∏çÊòØÂæàÂ§ß)ÔºåËøôÁßçÊÉÖÂÜµÂ∞±Âª∫ËÆÆÂÖ≥Èó≠ÔºåÂõ†‰∏∫AOFËøòÊòØÊúâÊÄßËÉΩÂºÄÈîÄÁöÑ„ÄÇ ‚Äúeverysec‚Äù Redis4 Redis 4.0 Êñ∞Â¢û‰∫Ü RDB-AOF Ê∑∑ÂêàÊåÅ‰πÖÂåñÊ†ºÂºèÔºå ËøôÊòØ‰∏Ä‰∏™ÂèØÈÄâÁöÑÂäüËÉΩÔºå Âú®ÂºÄÂêØ‰∫ÜËøô‰∏™ÂäüËÉΩ‰πãÂêéÔºå AOF ÈáçÂÜô‰∫ßÁîüÁöÑÊñá‰ª∂Â∞ÜÂêåÊó∂ÂåÖÂê´ RDB Ê†ºÂºèÁöÑÂÜÖÂÆπÂíå AOF Ê†ºÂºèÁöÑÂÜÖÂÆπÔºå ÂÖ∂‰∏≠ RDB Ê†ºÂºèÁöÑÂÜÖÂÆπÁî®‰∫éËÆ∞ÂΩïÂ∑≤ÊúâÁöÑÊï∞ÊçÆÔºå ËÄå AOF Ê†ºÂºèÁöÑÂÜÖÂ≠òÂàôÁî®‰∫éËÆ∞ÂΩïÊúÄËøëÂèëÁîü‰∫ÜÂèòÂåñÁöÑÊï∞ÊçÆÔºå ËøôÊ†∑ Redis Â∞±ÂèØ‰ª•ÂêåÊó∂ÂÖºÊúâ RDB ÊåÅ‰πÖÂåñÂíå AOF ÊåÅ‰πÖÂåñÁöÑ‰ºòÁÇπ ‚Äî‚Äî Êó¢ËÉΩÂ§üÂø´ÈÄüÂú∞ÁîüÊàêÈáçÂÜôÊñá‰ª∂Ôºå ‰πüËÉΩÂ§üÂú®Âá∫Áé∞ÈóÆÈ¢òÊó∂Ôºå Âø´ÈÄüÂú∞ËΩΩÂÖ•Êï∞ÊçÆ„ÄÇ RDBÂíåAOFÂÖ±Â≠òÁöÑÊÉÖÂÜµ‰∏ãÂ¶Ç‰ΩïÊÅ¢Â§çÊï∞ÊçÆÔºö ‰ºòÁÇπÔºö Ê∑∑ÂêàÊåÅ‰πÖÂåñÁªìÂêà‰∫ÜRDBÊåÅ‰πÖÂåñ Âíå AOF ÊåÅ‰πÖÂåñÁöÑ‰ºòÁÇπ, Áî±‰∫éÁªùÂ§ßÈÉ®ÂàÜÈÉΩÊòØRDBÊ†ºÂºèÔºåÂä†ËΩΩÈÄüÂ∫¶Âø´ÔºåÂêåÊó∂ÁªìÂêàAOFÔºåÂ¢ûÈáèÁöÑÊï∞ÊçÆ‰ª•AOFÊñπÂºè‰øùÂ≠ò‰∫ÜÔºåÊï∞ÊçÆÊõ¥Â∞ëÁöÑ‰∏¢Â§±„ÄÇ Áº∫ÁÇπÔºö ÂÖºÂÆπÊÄßÂ∑ÆÔºå‰∏ÄÊó¶ÂºÄÂêØ‰∫ÜÊ∑∑ÂêàÊåÅ‰πÖÂåñÔºåÂú®4.0‰πãÂâçÁâàÊú¨ÈÉΩ‰∏çËØÜÂà´ËØ•aofÊñá‰ª∂ÔºåÂêåÊó∂Áî±‰∫éÂâçÈÉ®ÂàÜÊòØRDBÊ†ºÂºèÔºåÈòÖËØªÊÄßËæÉÂ∑Æ Á≠ñÁï•ÊòØÔºö 6. ÊÄªÁªì http://www.ywnds.com/?p=4876]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•NginxÂéüÁêÜ]]></title>
    <url>%2F2019%2F01%2F30%2Fmiscellany%2F13%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6Nginx%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[NginxÊòØ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑHTTPÂíåÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÔºåÂèäÁîµÂ≠êÈÇÆ‰ª∂ÔºàIMAP/POP3Ôºâ‰ª£ÁêÜÊúçÂä°Âô®ÔºåÂêåÊó∂‰πüÊòØ‰∏Ä‰∏™ÈùûÂ∏∏È´òÊïàÁöÑÂèçÂêë‰ª£ÁêÜ„ÄÅË¥üËΩΩÂπ≥Ë°°‰∏≠Èó¥‰ª∂„ÄÇÊòØÈùûÂ∏∏Â∏∏Áî®ÁöÑweb server.Êàë‰ª¨ÈúÄË¶ÅÁêÜËß£ÂÆÉÁöÑÂéüÁêÜÔºåÊâçËÉΩËææÂà∞Ê∏∏ÂàÉÊúâ‰ΩôÁöÑÁ®ãÂ∫¶„ÄÇ Êú¨ÁØáÊñáÁ´†ÈúÄË¶ÅÂØπNginxÊúâÂü∫Êú¨ÁöÑ‰ΩøÁî®‰ª•ÂèäÂØπIOÂ§çÁî®Ê®°ÂûãÊúâ‰∏ÄÂÆöÁöÑ‰∫ÜËß£„ÄÇÊñáÁ´†ÊØîËæÉÈïø„ÄÇ 1.Ê≠£Âêë‰ª£ÁêÜÂíåÂèçÂêë‰ª£ÁêÜ Ê≠£Âêë‰ª£ÁêÜÁöÑÂ∑•‰ΩúÂéüÁêÜÂ∞±ÂÉè‰∏Ä‰∏™Ë∑≥ÊùøÔºåÊØîÂ¶ÇÔºöÊàëËÆøÈóÆ‰∏ç‰∫Ügoogle.comÔºå‰ΩÜÊòØÊàëËÉΩËÆøÈóÆ‰∏Ä‰∏™‰ª£ÁêÜÊúçÂä°Âô®AÔºåAËÉΩËÆøÈóÆgoogle.comÔºå‰∫éÊòØÊàëÂÖàËøû‰∏ä‰ª£ÁêÜÊúçÂä°Âô®AÔºåÂëäËØâ‰ªñÊàëÈúÄË¶Ågoogle.comÁöÑÂÜÖÂÆπÔºåAÂ∞±ÂéªÂèñÂõûÊù•ÔºåÁÑ∂ÂêéËøîÂõûÁªôÊàë„ÄÇ‰ªéÁΩëÁ´ôÁöÑËßíÂ∫¶ÔºåÂè™Âú®‰ª£ÁêÜÊúçÂä°Âô®Êù•ÂèñÂÜÖÂÆπÁöÑÊó∂ÂÄôÊúâ‰∏ÄÊ¨°ËÆ∞ÂΩïÔºåÊúâÊó∂ÂÄôÂπ∂‰∏çÁü•ÈÅìÊòØÁî®Êà∑ÁöÑËØ∑Ê±ÇÔºå‰πüÈöêËóè‰∫ÜÁî®Êà∑ÁöÑËµÑÊñôÔºåËøôÂèñÂÜ≥‰∫é‰ª£ÁêÜÂëä‰∏çÂëäËØâÁΩëÁ´ô„ÄÇ ÂèçÂêë‰ª£ÁêÜÔºàReverse ProxyÔºâÊñπÂºèÊòØÊåá‰ª•‰ª£ÁêÜÊúçÂä°Âô®Êù•Êé•Âèóinternet‰∏äÁöÑËøûÊé•ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂÜÖÈÉ®ÁΩëÁªú‰∏äÁöÑÊúçÂä°Âô®ÔºåÂπ∂Â∞Ü‰ªéÊúçÂä°Âô®‰∏äÂæóÂà∞ÁöÑÁªìÊûúËøîÂõûÁªôinternet‰∏äËØ∑Ê±ÇËøûÊé•ÁöÑÂÆ¢Êà∑Á´ØÔºåÊ≠§Êó∂‰ª£ÁêÜÊúçÂä°Âô®ÂØπÂ§ñÂ∞±Ë°®Áé∞‰∏∫‰∏Ä‰∏™ÊúçÂä°Âô®„ÄÇ ÁÆÄÂçïÊù•ËØ¥Ôºö Ê≠£Âêë‰ª£ÁêÜÊòØ‰∏çÁü•ÈÅìÂÆ¢Êà∑Á´ØÊòØË∞ÅÔºå‰ª£ÁêÜÊòØ‰∏Ä‰∏™Ë∑≥ÊùøÔºåÊâÄÊúâÂÆ¢Êà∑Á´ØÈÄöËøáËøô‰∏™Ë∑≥ÊùøÊù•ËÆøÈóÆÂà∞ÂØπÂ∫îÁöÑÂÜÖÂÆπ„ÄÇ ÂèçÂêë‰ª£ÁêÜÊòØ‰∏çÁü•ÈÅìÊúçÂä°Á´ØÊòØË∞ÅÔºåÁî®Êà∑ÁöÑËØ∑Ê±ÇË¢´ËΩ¨ÂèëÂà∞ÂÜÖÈÉ®ÁöÑÊüêÂè∞ÊúçÂä°Âô®ÂéªÂ§ÑÁêÜ„ÄÇ 2.Âü∫Êú¨ÁöÑÂ∑•‰ΩúÊµÅÁ®ã Áî®Êà∑ÈÄöËøáÂüüÂêçÂèëÂá∫ËÆøÈóÆWebÊúçÂä°Âô®ÁöÑËØ∑Ê±ÇÔºåËØ•ÂüüÂêçË¢´DNSÊúçÂä°Âô®Ëß£Êûê‰∏∫ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÔºõ ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®Êé•ÂèóÁî®Êà∑ÁöÑËØ∑Ê±ÇÔºõ ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®Âú®Êú¨Âú∞ÁºìÂ≠ò‰∏≠Êü•ÊâæËØ∑Ê±ÇÁöÑÂÜÖÂÆπÔºåÊâæÂà∞ÂêéÁõ¥Êé•ÊääÂÜÖÂÆπÂèëÈÄÅÁªôÁî®Êà∑Ôºõ Â¶ÇÊûúÊú¨Âú∞ÁºìÂ≠òÈáåÊ≤°ÊúâÁî®Êà∑ÊâÄËØ∑Ê±ÇÁöÑ‰ø°ÊÅØÂÜÖÂÆπÔºåÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®‰ºö‰ª£ÊõøÁî®Êà∑ÂêëÊ∫êÊúçÂä°Âô®ËØ∑Ê±ÇÂêåÊ†∑ÁöÑ‰ø°ÊÅØÂÜÖÂÆπÔºåÂπ∂Êää‰ø°ÊÅØÂÜÖÂÆπÂèëÁªôÁî®Êà∑ÔºåÂ¶ÇÊûú‰ø°ÊÅØÂÜÖÂÆπÊòØÁºìÂ≠òÁöÑËøò‰ºöÊääÂÆÉ‰øùÂ≠òÂà∞ÁºìÂ≠ò‰∏≠„ÄÇ 3.‰ºòÁÇπ ‰øùÊä§‰∫ÜÁúüÂÆûÁöÑwebÊúçÂä°Âô®Ôºå‰øùËØÅ‰∫ÜwebÊúçÂä°Âô®ÁöÑËµÑÊ∫êÂÆâÂÖ® ËäÇÁ∫¶‰∫ÜÊúâÈôêÁöÑIPÂú∞ÂùÄËµÑÊ∫ê ÂáèÂ∞ëWEBÊúçÂä°Âô®ÂéãÂäõÔºåÊèêÈ´òÂìçÂ∫îÈÄüÂ∫¶(ÁºìÂ≠òÂäüËÉΩ) ËØ∑Ê±ÇÁöÑÁªü‰∏ÄÊéßÂà∂ÔºåÂåÖÊã¨ËÆæÁΩÆÊùÉÈôê„ÄÅËøáÊª§ËßÑÂàôÁ≠â ÂÆûÁé∞Ë¥üËΩΩÂùáË°° Âå∫ÂàÜÂä®ÊÄÅÂíåÈùôÊÄÅÂèØÁºìÂ≠òÂÜÖÂÆπ ‚Ä¶ 4.‰ΩøÁî®Âú∫ÊôØ Nginx‰Ωú‰∏∫Http‰ª£ÁêÜ„ÄÅÂèçÂêë‰ª£ÁêÜ Nginx‰Ωú‰∏∫Ë¥üËΩΩÂùáË°°Âô® Ip hashÁÆóÊ≥ïÔºåÂØπÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑipËøõË°åhashÊìç‰ΩúÔºåÁÑ∂ÂêéÊ†πÊçÆhashÁªìÊûúÂ∞ÜÂêå‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØipÁöÑËØ∑Ê±ÇÂàÜÂèëÁªôÂêå‰∏ÄÂè∞ÊúçÂä°Âô®ËøõË°åÂ§ÑÁêÜÔºåÂèØ‰ª•Ëß£ÂÜ≥session‰∏çÂÖ±‰∫´ÁöÑÈóÆÈ¢ò„ÄÇ Nginx‰Ωú‰∏∫WebÁºìÂ≠ò 5.NginxÁöÑMaster-WorkerÊ®°Âºè ÂêØÂä®NginxÂêéÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂú®80Á´ØÂè£ÂêØÂä®‰∫ÜSocketÊúçÂä°ËøõË°åÁõëÂê¨ÔºåÂ¶ÇÂõæÊâÄÁ§∫ÔºåNginxÊ∂âÂèäMasterËøõÁ®ãÂíåWorkerËøõÁ®ã„ÄÇ 6.MasterËøõÁ®ãÁöÑ‰ΩúÁî®ÊòØÔºü ËØªÂèñÂπ∂È™åËØÅÈÖçÁΩÆÊñá‰ª∂nginx.confÔºõÁÆ°ÁêÜworkerËøõÁ®ãÔºõ Êé•Êî∂Êù•Ëá™Â§ñÁïåÁöÑ‰ø°Âè∑ ÂêëÂêÑworkerËøõÁ®ãÂèëÈÄÅ‰ø°Âè∑ ÁõëÊéßworkerËøõÁ®ãÁöÑËøêË°åÁä∂ÊÄÅÔºåÂΩìworkerËøõÁ®ãÈÄÄÂá∫Âêé(ÂºÇÂ∏∏ÊÉÖÂÜµ‰∏ã)Ôºå‰ºöËá™Âä®ÈáçÊñ∞ÂêØÂä®Êñ∞ÁöÑworkerËøõÁ®ã 7.WorkerËøõÁ®ãÁöÑ‰ΩúÁî®ÊòØÔºü ÊØè‰∏Ä‰∏™WorkerËøõÁ®ãÈÉΩÁª¥Êä§‰∏Ä‰∏™Á∫øÁ®ãÔºàÈÅøÂÖçÁ∫øÁ®ãÂàáÊç¢ÔºâÔºåÂ§ÑÁêÜËøûÊé•ÂíåËØ∑Ê±ÇÔºõÊ≥®ÊÑèWorkerËøõÁ®ãÁöÑ‰∏™Êï∞Áî±ÈÖçÁΩÆÊñá‰ª∂ÂÜ≥ÂÆöÔºå‰∏ÄËà¨ÂíåCPU‰∏™Êï∞Áõ∏ÂÖ≥ÔºàÊúâÂà©‰∫éËøõÁ®ãÂàáÊç¢ÔºâÔºåÈÖçÁΩÆÂá†‰∏™Â∞±ÊúâÂá†‰∏™WorkerËøõÁ®ã„ÄÇ ÊÄùËÄÉÔºöNginxÂ¶Ç‰ΩïÂÅöÂà∞ÁÉ≠ÈÉ®ÁΩ≤Ôºü ÊâÄË∞ìÁÉ≠ÈÉ®ÁΩ≤ÔºåÂ∞±ÊòØÈÖçÁΩÆÊñá‰ª∂nginx.conf‰øÆÊîπÂêéÔºå‰∏çÈúÄË¶Åstop NginxÔºå‰∏çÈúÄË¶Å‰∏≠Êñ≠ËØ∑Ê±ÇÔºåÂ∞±ËÉΩËÆ©ÈÖçÁΩÆÊñá‰ª∂ÁîüÊïàÔºÅÔºànginx -s reload ÈáçÊñ∞Âä†ËΩΩ/nginx -tÊ£ÄÊü•ÈÖçÁΩÆ/nginx -s stopÔºâ ÈÄöËøá‰∏äÊñáÊàë‰ª¨Â∑≤ÁªèÁü•ÈÅìworkerËøõÁ®ãË¥üË¥£Â§ÑÁêÜÂÖ∑‰ΩìÁöÑËØ∑Ê±ÇÔºåÈÇ£‰πàÂ¶ÇÊûúÊÉ≥ËææÂà∞ÁÉ≠ÈÉ®ÁΩ≤ÁöÑÊïàÊûúÔºåÂèØ‰ª•ÊÉ≥Ë±°Ôºö ÊñπÊ°à‰∏ÄÔºö ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂nginx.confÂêéÔºå‰∏ªËøõÁ®ãmasterË¥üË¥£Êé®ÈÄÅÁªôwokerËøõÁ®ãÊõ¥Êñ∞ÈÖçÁΩÆ‰ø°ÊÅØÔºåwokerËøõÁ®ãÊî∂Âà∞‰ø°ÊÅØÂêéÔºåÊõ¥Êñ∞ËøõÁ®ãÂÜÖÈÉ®ÁöÑÁ∫øÁ®ã‰ø°ÊÅØ„ÄÇÔºàÊúâÁÇπvolatileÁöÑÂë≥ÈÅìÔºâ ÊñπÊ°à‰∫åÔºö ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂nginx.confÂêéÔºåÈáçÊñ∞ÁîüÊàêÊñ∞ÁöÑworkerËøõÁ®ãÔºåÂΩìÁÑ∂‰ºö‰ª•Êñ∞ÁöÑÈÖçÁΩÆËøõË°åÂ§ÑÁêÜËØ∑Ê±ÇÔºåËÄå‰∏îÊñ∞ÁöÑËØ∑Ê±ÇÂøÖÈ°ªÈÉΩ‰∫§ÁªôÊñ∞ÁöÑworkerËøõÁ®ãÔºåËá≥‰∫éËÄÅÁöÑworkerËøõÁ®ãÔºåÁ≠âÊääÈÇ£‰∫õ‰ª•ÂâçÁöÑËØ∑Ê±ÇÂ§ÑÁêÜÂÆåÊØïÂêéÔºåkillÊéâÂç≥ÂèØ„ÄÇ NginxÈááÁî®ÁöÑÂ∞±ÊòØÊñπÊ°à‰∫åÊù•ËææÂà∞ÁÉ≠ÈÉ®ÁΩ≤ÁöÑÔºÅ ÊÄùËÄÉÔºöNginxÂ¶Ç‰ΩïÂÅöÂà∞È´òÂπ∂Âèë‰∏ãÁöÑÈ´òÊïàÂ§ÑÁêÜÔºü ‰∏äÊñáÂ∑≤ÁªèÊèêÂèäNginxÁöÑworkerËøõÁ®ã‰∏™Êï∞‰∏éCPUÁªëÂÆö„ÄÅworkerËøõÁ®ãÂÜÖÈÉ®ÂåÖÂê´‰∏Ä‰∏™Á∫øÁ®ãÈ´òÊïàÂõûÁéØÂ§ÑÁêÜËØ∑Ê±ÇÔºåËøôÁöÑÁ°ÆÊúâÂä©‰∫éÊïàÁéáÔºå‰ΩÜËøôÊòØ‰∏çÂ§üÁöÑ„ÄÇ ‰Ωú‰∏∫‰∏ì‰∏öÁöÑÁ®ãÂ∫èÂëòÔºåÊàë‰ª¨ÂèØ‰ª•ÂºÄ‰∏Ä‰∏ãËÑëÊ¥ûÔºöBIO/NIO/AIO„ÄÅÂºÇÊ≠•/ÂêåÊ≠•„ÄÅÈòªÂ°û/ÈùûÈòªÂ°û‚Ä¶ Ë¶ÅÂêåÊó∂Â§ÑÁêÜÈÇ£‰πàÂ§öÁöÑËØ∑Ê±ÇÔºåË¶ÅÁü•ÈÅìÔºåÊúâÁöÑËØ∑Ê±ÇÈúÄË¶ÅÂèëÁîüIOÔºåÂèØËÉΩÈúÄË¶ÅÂæàÈïøÊó∂Èó¥ÔºåÂ¶ÇÊûúÁ≠âÁùÄÂÆÉÔºåÂ∞±‰ºöÊãñÊÖ¢workerÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇ NginxÈááÁî®‰∫ÜLinuxÁöÑepollÊ®°ÂûãÔºåepollÊ®°ÂûãÂü∫‰∫é‰∫ã‰ª∂È©±Âä®Êú∫Âà∂ÔºåÂÆÉÂèØ‰ª•ÁõëÊéßÂ§ö‰∏™‰∫ã‰ª∂ÊòØÂê¶ÂáÜÂ§áÂÆåÊØïÔºåÂ¶ÇÊûúOKÔºåÈÇ£‰πàÊîæÂÖ•epollÈòüÂàó‰∏≠ÔºåËøô‰∏™ËøáÁ®ãÊòØÂºÇÊ≠•ÁöÑ„ÄÇworkerÂè™ÈúÄË¶Å‰ªéepollÈòüÂàóÂæ™ÁéØÂ§ÑÁêÜÂç≥ÂèØ„ÄÇ ÊÄùËÄÉÔºöNginxÊåÇ‰∫ÜÊÄé‰πàÂäûÔºü NginxÊó¢ÁÑ∂‰Ωú‰∏∫ÂÖ•Âè£ÁΩëÂÖ≥ÔºåÂæàÈáçË¶ÅÔºåÂ¶ÇÊûúÂá∫Áé∞ÂçïÁÇπÈóÆÈ¢òÔºåÊòæÁÑ∂ÊòØ‰∏çÂèØÊé•ÂèóÁöÑ„ÄÇ Á≠îÊ°àÊòØÔºöKeepalived+NginxÂÆûÁé∞È´òÂèØÁî®„ÄÇ KeepalivedÊòØ‰∏Ä‰∏™È´òÂèØÁî®Ëß£ÂÜ≥ÊñπÊ°àÔºå‰∏ªË¶ÅÊòØÁî®Êù•Èò≤Ê≠¢ÊúçÂä°Âô®ÂçïÁÇπÂèëÁîüÊïÖÈöúÔºåÂèØ‰ª•ÈÄöËøáÂíåNginxÈÖçÂêàÊù•ÂÆûÁé∞WebÊúçÂä°ÁöÑÈ´òÂèØÁî®„ÄÇÔºàÂÖ∂ÂÆûÔºåKeepalived‰∏ç‰ªÖ‰ªÖÂèØ‰ª•ÂíåNginxÈÖçÂêàÔºåËøòÂèØ‰ª•ÂíåÂæàÂ§öÂÖ∂‰ªñÊúçÂä°ÈÖçÂêàÔºâ Keepalived+NginxÂÆûÁé∞È´òÂèØÁî®ÁöÑÊÄùË∑ØÔºö Á¨¨‰∏ÄÔºöËØ∑Ê±Ç‰∏çË¶ÅÁõ¥Êé•ÊâìÂà∞Nginx‰∏äÔºåÂ∫îËØ•ÂÖàÈÄöËøáKeepalivedÔºàËøôÂ∞±ÊòØÊâÄË∞ìËôöÊãüIPÔºåVIPÔºâ Á¨¨‰∫åÔºöKeepalivedÂ∫îËØ•ËÉΩÁõëÊéßNginxÁöÑÁîüÂëΩÁä∂ÊÄÅÔºàÊèê‰æõ‰∏Ä‰∏™Áî®Êà∑Ëá™ÂÆö‰πâÁöÑËÑöÊú¨ÔºåÂÆöÊúüÊ£ÄÊü•NginxËøõÁ®ãÁä∂ÊÄÅÔºåËøõË°åÊùÉÈáçÂèòÂåñ,‰ªéËÄåÂÆûÁé∞NginxÊïÖÈöúÂàáÊç¢Ôºâ 6.nginx.conf Á¨¨‰∏ÄÔºölocationÂèØ‰ª•ËøõË°åÊ≠£ÂàôÂåπÈÖçÔºåÂ∫îËØ•Ê≥®ÊÑèÊ≠£ÂàôÁöÑÂá†ÁßçÂΩ¢Âºè‰ª•Âèä‰ºòÂÖàÁ∫ß„ÄÇÔºàËøôÈáå‰∏çÂ±ïÂºÄÔºâ Á¨¨‰∫åÔºöNginxËÉΩÂ§üÊèêÈ´òÈÄüÂ∫¶ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ÁâπÊÄßÂ∞±ÊòØÔºöÂä®ÈùôÂàÜÁ¶ªÔºåÂ∞±ÊòØÊääÈùôÊÄÅËµÑÊ∫êÊîæÂà∞Nginx‰∏äÔºåÁî±NginxÁÆ°ÁêÜÔºåÂä®ÊÄÅËØ∑Ê±ÇËΩ¨ÂèëÁªôÂêéÁ´Ø„ÄÇ Á¨¨‰∏âÔºöÊàë‰ª¨ÂèØ‰ª•Âú®Nginx‰∏ãÊääÈùôÊÄÅËµÑÊ∫ê„ÄÅÊó•ÂøóÊñá‰ª∂ÂΩíÂ±ûÂà∞‰∏çÂêåÂüüÂêç‰∏ãÔºà‰πüÂç≥ÊòØÁõÆÂΩïÔºâÔºåËøôÊ†∑Êñπ‰æøÁÆ°ÁêÜÁª¥Êä§„ÄÇ Á¨¨ÂõõÔºöNginxÂèØ‰ª•ËøõË°åIPËÆøÈóÆÊéßÂà∂ÔºåÊúâ‰∫õÁîµÂïÜÂπ≥Âè∞ÔºåÂ∞±ÂèØ‰ª•Âú®NginxËøô‰∏ÄÂ±ÇÔºåÂÅö‰∏Ä‰∏ãÂ§ÑÁêÜÔºåÂÜÖÁΩÆ‰∏Ä‰∏™ÈªëÂêçÂçïÊ®°ÂùóÔºåÈÇ£‰πàÂ∞±‰∏çÂøÖÁ≠âËØ∑Ê±ÇÈÄöËøáNginxËææÂà∞ÂêéÁ´ØÂú®ËøõË°åÊã¶Êà™ÔºåËÄåÊòØÁõ¥Êé•Âú®NginxËøô‰∏ÄÂ±ÇÂ∞±Â§ÑÁêÜÊéâ„ÄÇ Èô§‰∫ÜÂèØ‰ª•Êò†Â∞ÑÈùôÊÄÅËµÑÊ∫êÔºå‰∏äÈù¢Â∑≤ÁªèËØ¥‰∫ÜÔºåÂèØ‰ª•‰Ωú‰∏∫‰∏Ä‰∏™‰ª£ÁêÜÊúçÂä°Âô®Êù•‰ΩøÁî®„ÄÇ ÊâÄË∞ìÂèçÂêë‰ª£ÁêÜÔºåÂæàÁÆÄÂçïÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂú®locationËøô‰∏ÄÊÆµÈÖçÁΩÆ‰∏≠ÁöÑrootÊõøÊç¢Êàêproxy_passÂç≥ÂèØ„ÄÇrootËØ¥ÊòéÊòØÈùôÊÄÅËµÑÊ∫êÔºåÂèØ‰ª•Áî±NginxËøõË°åËøîÂõûÔºõËÄåproxy_passËØ¥ÊòéÊòØÂä®ÊÄÅËØ∑Ê±ÇÔºåÈúÄË¶ÅËøõË°åËΩ¨ÂèëÔºåÊØîÂ¶Ç‰ª£ÁêÜÂà∞Tomcat‰∏ä„ÄÇ ÂèçÂêë‰ª£ÁêÜÔºå‰∏äÈù¢Â∑≤ÁªèËØ¥‰∫ÜÔºåËøáÁ®ãÊòØÈÄèÊòéÁöÑÔºåÊØîÂ¶ÇËØ¥request -&gt; Nginx -&gt; TomcatÔºåÈÇ£‰πàÂØπ‰∫éTomcatËÄåË®ÄÔºåËØ∑Ê±ÇÁöÑIPÂú∞ÂùÄÂ∞±ÊòØNginxÁöÑÂú∞ÂùÄÔºåËÄåÈùûÁúüÂÆûÁöÑrequestÂú∞ÂùÄÔºåËøô‰∏ÄÁÇπÈúÄË¶ÅÊ≥®ÊÑè„ÄÇ‰∏çËøáÂ•ΩÂú®Nginx‰∏ç‰ªÖ‰ªÖÂèØ‰ª•ÂèçÂêë‰ª£ÁêÜËØ∑Ê±ÇÔºåËøòÂèØ‰ª•Áî±Áî®Êà∑Ëá™ÂÆö‰πâËÆæÁΩÆHTTP HEADER„ÄÇ Ë¥üËΩΩÂùáË°°„Äêupstream„Äë ‰∏äÈù¢ÁöÑÂèçÂêë‰ª£ÁêÜ‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáproxy_passÊù•ÊåáÂÆöTomcatÁöÑÂú∞ÂùÄÔºåÂæàÊòæÁÑ∂Êàë‰ª¨Âè™ËÉΩÊåáÂÆö‰∏ÄÂè∞TomcatÂú∞ÂùÄÔºåÈÇ£‰πàÊàë‰ª¨Â¶ÇÊûúÊÉ≥ÊåáÂÆöÂ§öÂè∞Êù•ËææÂà∞Ë¥üËΩΩÂùáË°°Âë¢Ôºü Á¨¨‰∏ÄÔºåÈÄöËøáupstreamÊù•ÂÆö‰πâ‰∏ÄÁªÑTomcatÔºåÂπ∂ÊåáÂÆöË¥üËΩΩÁ≠ñÁï•ÔºàIPHASH„ÄÅÂä†ÊùÉËÆ∫Ë∞É„ÄÅÊúÄÂ∞ëËøûÊé•ÔºâÔºåÂÅ•Â∫∑Ê£ÄÊü•Á≠ñÁï•ÔºàNginxÂèØ‰ª•ÁõëÊéßËøô‰∏ÄÁªÑTomcatÁöÑÁä∂ÊÄÅÔºâÁ≠â„ÄÇ Á¨¨‰∫åÔºåÂ∞Üproxy_passÊõøÊç¢ÊàêupstreamÊåáÂÆöÁöÑÂÄºÂç≥ÂèØ„ÄÇ Ë¥üËΩΩÂùáË°°ÂèØËÉΩÂ∏¶Êù•ÁöÑÈóÆÈ¢òÔºü Ë¥üËΩΩÂùáË°°ÊâÄÂ∏¶Êù•ÁöÑÊòéÊòæÁöÑÈóÆÈ¢òÊòØÔºå‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂèØ‰ª•Âà∞A serverÔºå‰πüÂèØ‰ª•Âà∞B serverÔºåËøôÂÆåÂÖ®‰∏çÂèóÊàë‰ª¨ÁöÑÊéßÂà∂ÔºåÂΩìÁÑ∂Ëøô‰πü‰∏çÊòØ‰ªÄ‰πàÈóÆÈ¢òÔºåÂè™ÊòØÊàë‰ª¨ÂæóÊ≥®ÊÑèÁöÑÊòØÔºöÁî®Êà∑Áä∂ÊÄÅÁöÑ‰øùÂ≠òÈóÆÈ¢òÔºåÂ¶ÇSession‰ºöËØù‰ø°ÊÅØÔºå‰∏çËÉΩÂú®‰øùÂ≠òÂà∞ÊúçÂä°Âô®‰∏ä„ÄÇ 7.ÊÉäÁæ§Áé∞Ë±° ÂÆö‰πâÔºöÊÉäÁæ§ÊïàÂ∫îÂ∞±ÊòØÂΩì‰∏Ä‰∏™fdÁöÑ‰∫ã‰ª∂Ë¢´Ëß¶ÂèëÊó∂ÔºåÊâÄÊúâÁ≠âÂæÖËøô‰∏™fdÁöÑÁ∫øÁ®ãÊàñËøõÁ®ãÈÉΩË¢´Âî§ÈÜí„ÄÇ NginxÁöÑIOÈÄöÂ∏∏‰ΩøÁî®epollÔºåepollÂáΩÊï∞‰ΩøÁî®‰∫ÜI/OÂ§çÁî®Ê®°Âûã„ÄÇ‰∏éI/OÈòªÂ°ûÊ®°ÂûãÊØîËæÉÔºåI/OÂ§çÁî®Ê®°ÂûãÁöÑ‰ºòÂäøÂú®‰∫éÂèØ‰ª•ÂêåÊó∂Á≠âÂæÖÂ§ö‰∏™ÔºàËÄå‰∏çÂè™ÊòØ‰∏Ä‰∏™ÔºâÂ•óÊé•Â≠óÊèèËø∞Á¨¶Â∞±Áª™„ÄÇNginxÁöÑepollÂ∑•‰ΩúÊµÅÁ®ãÂ¶Ç‰∏ãÔºö masterËøõÁ®ãÂÖàÂª∫Â•ΩÈúÄË¶ÅlistenÁöÑsocketÂêéÔºåÁÑ∂ÂêéÂÜçforkÂá∫Â§ö‰∏™wokerËøõÁ®ãÔºåËøôÊ†∑ÊØè‰∏™workËøõÁ®ãÈÉΩÂèØ‰ª•ÂéªacceptËøô‰∏™socket ÂΩì‰∏Ä‰∏™clientËøûÊé•Âà∞Êù•Êó∂ÔºåÊâÄÊúâacceptÁöÑworkËøõÁ®ãÈÉΩ‰ºöÂèóÂà∞ÈÄöÁü•Ôºå‰ΩÜÂè™Êúâ‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•acceptÊàêÂäüÔºåÂÖ∂ÂÆÉÁöÑÂàô‰ºöacceptÂ§±Ë¥•ÔºåNginxÊèê‰æõ‰∫Ü‰∏ÄÊääÂÖ±‰∫´ÈîÅaccept_mutexÊù•‰øùËØÅÂêå‰∏ÄÊó∂ÂàªÂè™Êúâ‰∏Ä‰∏™workËøõÁ®ãÂú®acceptËøûÊé•Ôºå‰ªéËÄåËß£ÂÜ≥ÊÉäÁæ§ÈóÆÈ¢ò ÂΩì‰∏Ä‰∏™workerËøõÁ®ãacceptËøô‰∏™ËøûÊé•ÂêéÔºåÂ∞±ÂºÄÂßãËØªÂèñËØ∑Ê±ÇÔºåËß£ÊûêËØ∑Ê±ÇÔºåÂ§ÑÁêÜËØ∑Ê±ÇÔºå‰∫ßÁîüÊï∞ÊçÆÂêéÔºåÂÜçËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÊúÄÂêéÊâçÊñ≠ÂºÄËøûÊé•ÔºåËøôÊ†∑‰∏Ä‰∏™ÂÆåÊàêÁöÑËØ∑Ê±ÇÂ∞±ÁªìÊùü‰∫Ü 8.NginxÊû∂ÊûÑÂèäÂ∑•‰ΩúÊµÅÁ®ã NginxÁúüÊ≠£Â§ÑÁêÜËØ∑Ê±Ç‰∏öÂä°ÁöÑÊòØWorker‰πã‰∏ãÁöÑÁ∫øÁ®ã„ÄÇworkerËøõÁ®ã‰∏≠Êúâ‰∏Ä‰∏™ngx_worker_process_cycle()ÂáΩÊï∞ÔºåÊâßË°åÊó†ÈôêÂæ™ÁéØÔºå‰∏çÊñ≠Â§ÑÁêÜÊî∂Âà∞ÁöÑÊù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÂπ∂ËøõË°åÂ§ÑÁêÜÔºåÁõ¥Âà∞Êï¥‰∏™NginxÊúçÂä°Ë¢´ÂÅúÊ≠¢„ÄÇ ÂΩì‰∏Ä‰∏™ worker ËøõÁ®ãÂú® accept() Ëøô‰∏™ËøûÊé•‰πãÂêéÔºåÂ∞±ÂºÄÂßãËØªÂèñËØ∑Ê±ÇÔºåËß£ÊûêËØ∑Ê±ÇÔºåÂ§ÑÁêÜËØ∑Ê±ÇÔºå‰∫ßÁîüÊï∞ÊçÆÂêéÔºåÂÜçËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÊúÄÂêéÊâçÊñ≠ÂºÄËøûÊé•Ôºå‰∏Ä‰∏™ÂÆåÊï¥ÁöÑËØ∑Ê±Ç„ÄÇ‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂÆåÂÖ®Áî± worker ËøõÁ®ãÊù•Â§ÑÁêÜÔºåËÄå‰∏îÂè™ËÉΩÂú®‰∏Ä‰∏™ worker ËøõÁ®ã‰∏≠Â§ÑÁêÜ„ÄÇ ËøôÊ†∑ÂÅöÂ∏¶Êù•ÁöÑÂ•ΩÂ§ÑÔºö ËäÇÁúÅÈîÅÂ∏¶Êù•ÁöÑÂºÄÈîÄ„ÄÇÊØè‰∏™ worker ËøõÁ®ãÈÉΩÊòØÁã¨Á´ãÁöÑËøõÁ®ãÔºå‰∏çÂÖ±‰∫´ËµÑÊ∫êÔºå‰∏çÈúÄË¶ÅÂä†ÈîÅ„ÄÇÂêåÊó∂Âú®ÁºñÁ®ã‰ª•ÂèäÈóÆÈ¢òÊü•‰∏äÊó∂Ôºå‰πü‰ºöÊñπ‰æøÂæàÂ§ö„ÄÇ Áã¨Á´ãËøõÁ®ãÔºåÂáèÂ∞ëÈ£éÈô©„ÄÇÈááÁî®Áã¨Á´ãÁöÑËøõÁ®ãÔºåÂèØ‰ª•ËÆ©‰∫íÁõ∏‰πãÈó¥‰∏ç‰ºöÂΩ±ÂìçÔºå‰∏Ä‰∏™ËøõÁ®ãÈÄÄÂá∫ÂêéÔºåÂÖ∂ÂÆÉËøõÁ®ãËøòÂú®Â∑•‰ΩúÔºåÊúçÂä°‰∏ç‰ºö‰∏≠Êñ≠Ôºåmaster ËøõÁ®ãÂàôÂæàÂø´ÈáçÊñ∞ÂêØÂä®Êñ∞ÁöÑ worker ËøõÁ®ã„ÄÇÂΩìÁÑ∂Ôºåworker ËøõÁ®ãÁöÑ‰πüËÉΩÂèëÁîüÊÑèÂ§ñÈÄÄÂá∫„ÄÇ 9.nginx‰∏∫‰ªÄ‰πàÈ´òÊÄßËÉΩ Âõ†‰∏∫nginxÊòØÂ§öËøõÁ®ãÂçïÁ∫øÁ®ãÁöÑ‰ª£Ë°®ÔºåÂ§öËøõÁ®ãÊ®°ÂûãÊØè‰∏™ËøõÁ®ã/Á∫øÁ®ãÂè™ËÉΩÂ§ÑÁêÜ‰∏ÄË∑ØIOÔºåÈÇ£‰πà NginxÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÂ§öË∑ØIOÂë¢Ôºü Â¶ÇÊûú‰∏ç‰ΩøÁî® IO Â§öË∑ØÂ§çÁî®ÔºåÈÇ£‰πàÂú®‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÔºåÂêåÊó∂Âè™ËÉΩÂ§ÑÁêÜ‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÊØîÂ¶ÇÊâßË°å accept()ÔºåÂ¶ÇÊûúÊ≤°ÊúâËøûÊé•ËøáÊù•ÔºåÈÇ£‰πàÁ®ãÂ∫è‰ºöÈòªÂ°ûÂú®ËøôÈáåÔºåÁõ¥Âà∞Êúâ‰∏Ä‰∏™ËøûÊé•ËøáÊù•ÔºåÊâçËÉΩÁªßÁª≠Âêë‰∏ãÊâßË°å„ÄÇ ËÄåÂ§öË∑ØÂ§çÁî®ÔºåÂÖÅËÆ∏Êàë‰ª¨Âè™Âú®‰∫ã‰ª∂ÂèëÁîüÊó∂ÊâçÂ∞ÜÊéßÂà∂ËøîÂõûÁªôÁ®ãÂ∫èÔºåËÄåÂÖ∂‰ªñÊó∂ÂÄôÂÜÖÊ†∏ÈÉΩÊåÇËµ∑ËøõÁ®ãÔºåÈöèÊó∂ÂæÖÂëΩ„ÄÇ Ê†∏ÂøÉÔºöNginxÈááÁî®ÁöÑ IOÂ§öË∑ØÂ§çÁî®Ê®°Âûãepoll epollÈÄöËøáÂú®LinuxÂÜÖÊ†∏‰∏≠Áî≥ËØ∑‰∏Ä‰∏™ÁÆÄÊòìÁöÑÊñá‰ª∂Á≥ªÁªüÔºàÊñá‰ª∂Á≥ªÁªü‰∏ÄËà¨Áî®‰ªÄ‰πàÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞ÔºüB+Ê†ëÔºâÔºåÂÖ∂Â∑•‰ΩúÊµÅÁ®ãÂàÜ‰∏∫‰∏âÈÉ®ÂàÜÔºö Ë∞ÉÁî® int epoll_create(int size)Âª∫Á´ã‰∏Ä‰∏™epollÂØπË±°ÔºåÂÜÖÊ†∏‰ºöÂàõÂª∫‰∏Ä‰∏™eventpollÁªìÊûÑ‰ΩìÔºåÁî®‰∫éÂ≠òÊîæÈÄöËøáepoll_ctl()ÂêëepollÂØπË±°‰∏≠Ê∑ªÂä†ËøõÊù•ÁöÑ‰∫ã‰ª∂ÔºåËøô‰∫õ‰∫ã‰ª∂ÈÉΩ‰ºöÊåÇËΩΩÂú®Á∫¢ÈªëÊ†ë‰∏≠„ÄÇ Ë∞ÉÁî® int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event) Âú® epoll ÂØπË±°‰∏≠‰∏∫ fd Ê≥®ÂÜå‰∫ã‰ª∂ÔºåÊâÄÊúâÊ∑ªÂä†Âà∞epoll‰∏≠ÁöÑ‰∫ã‰ª∂ÈÉΩ‰ºö‰∏éËÆæÂ§áÈ©±Âä®Á®ãÂ∫èÂª∫Á´ãÂõûË∞ÉÂÖ≥Á≥ªÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂΩìÁõ∏Â∫îÁöÑ‰∫ã‰ª∂ÂèëÁîüÊó∂‰ºöË∞ÉÁî®Ëøô‰∏™sockfdÁöÑÂõûË∞ÉÊñπÊ≥ïÔºåÂ∞ÜsockfdÊ∑ªÂä†Âà∞eventpoll ‰∏≠ÁöÑÂèåÈìæË°® Ë∞ÉÁî® int epoll_wait(int epfd, struct epoll_event * events, int maxevents, int timeout) Êù•Á≠âÂæÖ‰∫ã‰ª∂ÁöÑÂèëÁîüÔºåtimeout ‰∏∫ -1 Êó∂ÔºåËØ•Ë∞ÉÁî®‰ºöÈòªÂ°ûÁõ¥Âà∞Êúâ‰∫ã‰ª∂ÂèëÁîü ËøôÊ†∑ÔºåÊ≥®ÂÜåÂ•Ω‰∫ã‰ª∂‰πãÂêéÔºåÂè™Ë¶ÅÊúâ fd ‰∏ä‰∫ã‰ª∂ÂèëÁîüÔºåepoll_wait() Â∞±ËÉΩÊ£ÄÊµãÂà∞Âπ∂ËøîÂõûÁªôÁî®Êà∑ÔºåÁî®Êà∑Â∞±ËÉΩ‚ÄùÈùûÈòªÂ°û‚ÄúÂú∞ËøõË°å I/O ‰∫Ü„ÄÇ epoll() ‰∏≠ÂÜÖÊ†∏ÂàôÁª¥Êä§‰∏Ä‰∏™ÈìæË°®Ôºåepoll_wait Áõ¥Êé•Ê£ÄÊü•ÈìæË°®ÊòØ‰∏çÊòØÁ©∫Â∞±Áü•ÈÅìÊòØÂê¶ÊúâÊñá‰ª∂ÊèèËø∞Á¨¶ÂáÜÂ§áÂ•Ω‰∫Ü„ÄÇÔºàepoll ‰∏é select Áõ∏ÊØîÊúÄÂ§ßÁöÑ‰ºòÁÇπÊòØ‰∏ç‰ºöÈöèÁùÄ sockfd Êï∞ÁõÆÂ¢ûÈïøËÄåÈôç‰ΩéÊïàÁéáÔºå‰ΩøÁî® select() Êó∂ÔºåÂÜÖÊ†∏ÈááÁî®ËΩÆËÆ≠ÁöÑÊñπÊ≥ïÊù•Êü•ÁúãÊòØÂê¶Êúâfd ÂáÜÂ§áÂ•ΩÔºåÂÖ∂‰∏≠ÁöÑ‰øùÂ≠ò sockfd ÁöÑÊòØÁ±ª‰ººÊï∞ÁªÑÁöÑÊï∞ÊçÆÁªìÊûÑ fd_setÔºåkey ‰∏∫ fdÔºåvalue ‰∏∫ 0 ÊàñËÄÖ 1„ÄÇÔºâ ËÉΩËææÂà∞ËøôÁßçÊïàÊûúÔºåÊòØÂõ†‰∏∫Âú®ÂÜÖÊ†∏ÂÆûÁé∞‰∏≠ epoll ÊòØÊ†πÊçÆÊØè‰∏™ sockfd ‰∏äÈù¢ÁöÑ‰∏éËÆæÂ§áÈ©±Âä®Á®ãÂ∫èÂª∫Á´ãËµ∑Êù•ÁöÑÂõûË∞ÉÂáΩÊï∞ÂÆûÁé∞ÁöÑ„ÄÇÈÇ£‰πàÔºåÊüê‰∏™ sockfd ‰∏äÁöÑ‰∫ã‰ª∂ÂèëÁîüÊó∂Ôºå‰∏éÂÆÉÂØπÂ∫îÁöÑÂõûË∞ÉÂáΩÊï∞Â∞±‰ºöË¢´Ë∞ÉÁî®ÔºåÊù•ÊääËøô‰∏™ sockfd Âä†ÂÖ•ÈìæË°®ÔºåÂÖ∂‰ªñÂ§Ñ‰∫é‚ÄúÁ©∫Èó≤ÁöÑ‚ÄùÁä∂ÊÄÅÁöÑÂàô‰∏ç‰ºö„ÄÇÂú®ËøôÁÇπ‰∏äÔºåepoll ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™‚Äù‰º™‚ÄùAIO„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÁªùÂ§ßÈÉ®ÂàÜÁöÑ I/O ÈÉΩÊòØ‚ÄúÊ¥ªË∑ÉÁöÑ‚ÄùÔºåÊØè‰∏™ socket ‰ΩøÁî®ÁéáÂæàÈ´òÁöÑËØùÔºåepollÊïàÁéá‰∏ç‰∏ÄÂÆöÊØî select È´òÔºàÂèØËÉΩÊòØË¶ÅÁª¥Êä§ÈòüÂàóÂ§çÊùÇÔºâ„ÄÇ ÂèØ‰ª•ÁúãÂá∫ÔºåÂõ†‰∏∫‰∏Ä‰∏™ËøõÁ®ãÈáåÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÔºåÊâÄ‰ª•‰∏Ä‰∏™ËøõÁ®ãÂêåÊó∂Âè™ËÉΩÂÅö‰∏Ä‰ª∂‰∫ãÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøá‰∏çÊñ≠Âú∞ÂàáÊç¢Êù•‚ÄúÂêåÊó∂‚ÄùÂ§ÑÁêÜÂ§ö‰∏™ËØ∑Ê±Ç„ÄÇ ‰æãÂ≠êÔºöNginx ‰ºöÊ≥®ÂÜå‰∏Ä‰∏™‰∫ã‰ª∂Ôºö‚ÄúÂ¶ÇÊûúÊù•Ëá™‰∏Ä‰∏™Êñ∞ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±ÇÂà∞Êù•‰∫ÜÔºåÂÜçÈÄöÁü•Êàë‚ÄùÔºåÊ≠§ÂêéÂè™ÊúâËøûÊé•ËØ∑Ê±ÇÂà∞Êù•ÔºåÊúçÂä°Âô®Êâç‰ºöÊâßË°å accept() Êù•Êé•Êî∂ËØ∑Ê±Ç„ÄÇÂèàÊØîÂ¶ÇÂêë‰∏äÊ∏∏ÊúçÂä°Âô®ÔºàÊØîÂ¶Ç PHP-FPMÔºâËΩ¨ÂèëËØ∑Ê±ÇÔºåÂπ∂Á≠âÂæÖËØ∑Ê±ÇËøîÂõûÊó∂ÔºåËøô‰∏™Â§ÑÁêÜÁöÑ worker ‰∏ç‰ºöÂú®ËøôÈòªÂ°ûÔºåÂÆÉ‰ºöÂú®ÂèëÈÄÅÂÆåËØ∑Ê±ÇÂêéÔºåÊ≥®ÂÜå‰∏Ä‰∏™‰∫ã‰ª∂Ôºö‚ÄúÂ¶ÇÊûúÁºìÂÜ≤Âå∫Êé•Êî∂Âà∞Êï∞ÊçÆ‰∫ÜÔºåÂëäËØâÊàë‰∏ÄÂ£∞ÔºåÊàëÂÜçÂ∞ÜÂÆÉËØªËøõÊù•‚ÄùÔºå‰∫éÊòØËøõÁ®ãÂ∞±Á©∫Èó≤‰∏ãÊù•Á≠âÂæÖ‰∫ã‰ª∂ÂèëÁîü„ÄÇ ËøôÊ†∑ÔºåÂü∫‰∫é Â§öËøõÁ®ã+epollÔºå Nginx ‰æøËÉΩÂÆûÁé∞È´òÂπ∂Âèë„ÄÇ 10.Âá†ÁßçË¥üËΩΩÂùáË°°ÁöÑÁÆóÊ≥ï‰ªãÁªç ËΩÆËØ¢ÔºàÈªòËÆ§Ôºâ ÊØè‰∏™ËØ∑Ê±ÇÊåâÊó∂Èó¥È°∫Â∫èÈÄê‰∏ÄÂàÜÈÖçÂà∞‰∏çÂêåÁöÑÂêéÁ´ØÊúçÂä°Âô®ÔºåÂ¶ÇÊûúÂêéÁ´ØÊúçÂä°Âô®downÊéâÔºåËÉΩËá™Âä®ÂâîÈô§„ÄÇ weight ÊåáÂÆöËΩÆËØ¢Âá†ÁéáÔºåweightÂíåËÆøÈóÆÊØîÁéáÊàêÊ≠£ÊØîÔºåÁî®‰∫éÂêéÁ´ØÊúçÂä°Âô®ÊÄßËÉΩ‰∏çÂùáÁöÑÊÉÖÂÜµ„ÄÇ ip_hash ÊØè‰∏™ËØ∑Ê±ÇÊåâËÆøÈóÆipÁöÑhashÁªìÊûúÂàÜÈÖçÔºåËøôÊ†∑ÊØè‰∏™ËÆøÂÆ¢Âõ∫ÂÆöËÆøÈóÆÂêå‰∏Ä‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂèØ‰ª•Ëß£ÂÜ≥sessionÁöÑÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØ‰∏çËÉΩËß£ÂÜ≥ÂÆïÊú∫ÈóÆÈ¢ò„ÄÇ Ââç‰∏âÁßçÊòØnginxËá™Â∏¶ÁöÑÔºåÁõ¥Êé•Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÂç≥ÂèØ‰ΩøÁî®„ÄÇ fairÔºàÁ¨¨‰∏âÊñπÔºâ ÊåâÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁõ∏Â∫îÊó∂Èó¥Êù•ÂàÜÈÖçËØ∑Ê±ÇÔºåÁõ∏Â∫îÊó∂Èó¥Áü≠ÁöÑ‰ºòÂÖàÂàÜÈÖç„ÄÇ url_hashÔºàÁ¨¨‰∏âÊñπÔºâ ÊåâËÆøÈóÆurlÁöÑhashÁªìÊûúÊù•ÂàÜÈÖçËØ∑Ê±ÇÔºå‰ΩøÊØè‰∏™urlÂÆöÂêëÂà∞Âêå‰∏Ä‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂêéÁ´ØÊúçÂä°Âô®‰∏∫ÁºìÂ≠òÊó∂ÊØîËæÉÊúâÊïà„ÄÇ 11.Âü∫‰∫é‰∏çÂêåÂ±ÇÊ¨°ÁöÑË¥üËΩΩÂùáË°° ‰∏ÉÂ±ÇÂ∞±ÊòØÂü∫‰∫éURLÁ≠âÂ∫îÁî®Â±Ç‰ø°ÊÅØÁöÑË¥üËΩΩÂùáË°°Ôºõ ÂêåÁêÜÔºåËøòÊúâÂü∫‰∫éMACÂú∞ÂùÄÁöÑ‰∫åÂ±ÇË¥üËΩΩÂùáË°°ÂíåÂü∫‰∫éIPÂú∞ÂùÄÁöÑ‰∏âÂ±ÇË¥üËΩΩÂùáË°°„ÄÇ Êç¢Âè•ËØùËØ¥: ‰∫åÂ±ÇË¥üËΩΩÂùáË°°‰ºöÈÄöËøá‰∏Ä‰∏™ËôöÊãüMACÂú∞ÂùÄÊé•ÂèóËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂÜçÂàÜÈÖçÂà∞ÁúüÊòØÁöÑMACÂú∞ÂùÄÔºõ ‰∏âÂ±ÇË¥üËΩΩÂùáË°°‰ºöÈÄöËøá‰∏Ä‰∏™ËôöÊãüIPÂú∞ÂùÄÊé•Êî∂ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂÜçÂàÜÈÖçÂà∞ÁúüÂÆûÁöÑIPÂú∞ÂùÄÔºõ ÂõõÂ±ÇÈÄöËøáËôöÊãüÁöÑURLÊàñ‰∏ªÊú∫ÂêçÊé•Êî∂ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂÜçÂàÜÈÖçÂà∞ÁúüÊòØÁöÑÊúçÂä°Âô®„ÄÇ ÊâÄË∞ìÁöÑÂõõÂà∞‰∏ÉÂ±ÇË¥üËΩΩÂùáË°°ÔºåÂ∞±ÊòØÂú®ÂØπÂêéÂè∞ÁöÑÊúçÂä°Âô®ËøõË°åË¥üËΩΩÂùáË°°Êó∂Ôºå‰æùÊçÆÂõõÂ±ÇÁöÑ‰ø°ÊÅØÊàñ‰∏ÉÂ±ÇÁöÑ‰ø°ÊÅØÊù•ÂÜ≥ÂÆöÊÄé‰πàÊ†∑ËΩ¨ÂèëÊµÅÈáè„ÄÇ ÊØîÂ¶ÇÂõõÂ±ÇÁöÑË¥üËΩΩÂùáË°°ÔºåÂ∞±ÊòØÈÄöËøáÂèëÂ∏É‰∏âÂ±ÇÁöÑIPÂú∞ÂùÄÔºàVIPÔºâÔºåÁÑ∂ÂêéÂä†ÂõõÂ±ÇÁöÑÁ´ØÂè£Âè∑ÔºåÊù•ÂÜ≥ÂÆöÂì™‰∫õÊµÅÈáèÈúÄË¶ÅÂÅöË¥üËΩΩÂùáË°°ÔºåÂØπÈúÄË¶ÅÂ§ÑÁêÜÁöÑÊµÅÈáèËøõË°åNATÂ§ÑÁêÜÔºåËΩ¨ÂèëËá≥ÂêéÂè∞ÊúçÂä°Âô®ÔºåÂπ∂ËÆ∞ÂΩï‰∏ãËøô‰∏™TCPÊàñËÄÖUDPÁöÑÊµÅÈáèÊòØÁî±Âì™Âè∞ÊúçÂä°Âô®Â§ÑÁêÜÁöÑÔºåÂêéÁª≠Ëøô‰∏™ËøûÊé•ÁöÑÊâÄÊúâÊµÅÈáèÈÉΩÂêåÊ†∑ËΩ¨ÂèëÂà∞Âêå‰∏ÄÂè∞ÊúçÂä°Âô®Â§ÑÁêÜ„ÄÇ ‰∏ÉÂ±ÇÁöÑË¥üËΩΩÂùáË°°ÔºåÂ∞±ÊòØÂú®ÂõõÂ±ÇÁöÑÂü∫Á°Ä‰∏äÔºàÊ≤°ÊúâÂõõÂ±ÇÊòØÁªùÂØπ‰∏çÂèØËÉΩÊúâ‰∏ÉÂ±ÇÁöÑÔºâÔºåÂÜçËÄÉËôëÂ∫îÁî®Â±ÇÁöÑÁâπÂæÅÔºåÊØîÂ¶ÇÂêå‰∏Ä‰∏™WebÊúçÂä°Âô®ÁöÑË¥üËΩΩÂùáË°°ÔºåÈô§‰∫ÜÊ†πÊçÆVIPÂä†80Á´ØÂè£Ëæ®Âà´ÊòØÂê¶ÈúÄË¶ÅÂ§ÑÁêÜÁöÑÊµÅÈáèÔºåËøòÂèØÊ†πÊçÆ‰∏ÉÂ±ÇÁöÑURL„ÄÅÊµèËßàÂô®Á±ªÂà´„ÄÅËØ≠Ë®ÄÊù•ÂÜ≥ÂÆöÊòØÂê¶Ë¶ÅËøõË°åË¥üËΩΩÂùáË°°„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûú‰Ω†ÁöÑWebÊúçÂä°Âô®ÂàÜÊàê‰∏§ÁªÑÔºå‰∏ÄÁªÑÊòØ‰∏≠ÊñáËØ≠Ë®ÄÁöÑÔºå‰∏ÄÁªÑÊòØËã±ÊñáËØ≠Ë®ÄÁöÑÔºåÈÇ£‰πà‰∏ÉÂ±ÇË¥üËΩΩÂùáË°°Â∞±ÂèØ‰ª•ÂΩìÁî®Êà∑Êù•ËÆøÈóÆ‰Ω†ÁöÑÂüüÂêçÊó∂ÔºåËá™Âä®Ëæ®Âà´Áî®Êà∑ËØ≠Ë®ÄÔºåÁÑ∂ÂêéÈÄâÊã©ÂØπÂ∫îÁöÑËØ≠Ë®ÄÊúçÂä°Âô®ÁªÑËøõË°åË¥üËΩΩÂùáË°°Â§ÑÁêÜ„ÄÇ Ë¥üËΩΩÂùáË°°Âô®ÈÄöÂ∏∏Áß∞‰∏∫ÂõõÂ±Ç‰∫§Êç¢Êú∫Êàñ‰∏ÉÂ±Ç‰∫§Êç¢Êú∫„ÄÇÂõõÂ±Ç‰∫§Êç¢Êú∫‰∏ªË¶ÅÂàÜÊûêIPÂ±ÇÂèäTCP/UDPÂ±ÇÔºåÂÆûÁé∞ÂõõÂ±ÇÊµÅÈáèË¥üËΩΩÂùáË°°„ÄÇ‰∏ÉÂ±Ç‰∫§Êç¢Êú∫Èô§‰∫ÜÊîØÊåÅÂõõÂ±ÇË¥üËΩΩÂùáË°°‰ª•Â§ñÔºåËøòÊúâÂàÜÊûêÂ∫îÁî®Â±ÇÁöÑ‰ø°ÊÅØÔºåÂ¶ÇHTTPÂçèËÆÆURIÊàñCookie‰ø°ÊÅØ„ÄÇ Ë¥üËΩΩÂùáË°°ËÆæÂ§á‰πüÂ∏∏Ë¢´Áß∞‰∏∫&quot;ÂõõÂà∞‰∏ÉÂ±Ç‰∫§Êç¢Êú∫&quot;ÔºåÈÇ£‰πàÂõõÂ±ÇÂíå‰∏ÉÂ±Ç‰∏§ËÄÖÂà∞Â∫ïÂå∫Âà´Âú®Âì™ÈáåÔºü Á¨¨‰∏ÄÔºåÊäÄÊúØÂéüÁêÜ‰∏äÁöÑÂå∫Âà´„ÄÇ ÊâÄË∞ìÂõõÂ±ÇË¥üËΩΩÂùáË°°Ôºå‰πüÂ∞±ÊòØ‰∏ªË¶ÅÈÄöËøáÊä•Êñá‰∏≠ÁöÑÁõÆÊ†áÂú∞ÂùÄÂíåÁ´ØÂè£ÔºåÂÜçÂä†‰∏äË¥üËΩΩÂùáË°°ËÆæÂ§áËÆæÁΩÆÁöÑÊúçÂä°Âô®ÈÄâÊã©ÊñπÂºèÔºåÂÜ≥ÂÆöÊúÄÁªàÈÄâÊã©ÁöÑÂÜÖÈÉ®ÊúçÂä°Âô®„ÄÇ ÊâÄË∞ì‰∏ÉÂ±ÇË¥üËΩΩÂùáË°°Ôºå‰πüÁß∞‰∏∫‚ÄúÂÜÖÂÆπ‰∫§Êç¢‚ÄùÔºå‰πüÂ∞±ÊòØ‰∏ªË¶ÅÈÄöËøáÊä•Êñá‰∏≠ÁöÑÁúüÊ≠£ÊúâÊÑè‰πâÁöÑÂ∫îÁî®Â±ÇÂÜÖÂÆπÔºåÂÜçÂä†‰∏äË¥üËΩΩÂùáË°°ËÆæÂ§áËÆæÁΩÆÁöÑÊúçÂä°Âô®ÈÄâÊã©ÊñπÂºèÔºåÂÜ≥ÂÆöÊúÄÁªàÈÄâÊã©ÁöÑÂÜÖÈÉ®ÊúçÂä°Âô®„ÄÇ Á¨¨‰∫åÔºåÂ∫îÁî®Âú∫ÊôØÁöÑÈúÄÊ±Ç„ÄÇ ‰∏ÉÂ±ÇÂ∫îÁî®Ë¥üËΩΩÁöÑÂ•ΩÂ§ÑÔºåÊòØ‰ΩøÂæóÊï¥‰∏™ÁΩëÁªúÊõ¥&quot;Êô∫ËÉΩÂåñ&quot;„ÄÇ‰æãÂ¶ÇËÆøÈóÆ‰∏Ä‰∏™ÁΩëÁ´ôÁöÑÁî®Êà∑ÊµÅÈáèÔºåÂèØ‰ª•ÈÄöËøá‰∏ÉÂ±ÇÁöÑÊñπÂºèÔºåÂ∞ÜÂØπÂõæÁâáÁ±ªÁöÑËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÁâπÂÆöÁöÑÂõæÁâáÊúçÂä°Âô®Âπ∂ÂèØ‰ª•‰ΩøÁî®ÁºìÂ≠òÊäÄÊúØÔºõÂ∞ÜÂØπÊñáÂ≠óÁ±ªÁöÑËØ∑Ê±ÇÂèØ‰ª•ËΩ¨ÂèëÂà∞ÁâπÂÆöÁöÑÊñáÂ≠óÊúçÂä°Âô®Âπ∂ÂèØ‰ª•‰ΩøÁî®ÂéãÁº©ÊäÄÊúØ„ÄÇ Âè¶Â§ñ‰∏Ä‰∏™Â∏∏Â∏∏Ë¢´ÊèêÂà∞ÂäüËÉΩÂ∞±ÊòØÂÆâÂÖ®ÊÄß„ÄÇ 12.ÊÄªÁªì ÁêÜËß£Ê≠£Âêë‰ª£ÁêÜÂíåÂèçÂêë‰ª£ÁêÜÁöÑÊ¶ÇÂøµ nginxÁöÑ‰ºòÁÇπÂíå‰ΩøÁî®Âú∫ÊôØ masterÂíåwork‰∏§ÁßçËøõÁ®ãÁöÑ‰ΩúÁî® Â¶Ç‰ΩïÁÉ≠ÈÉ®ÁΩ≤ NginxÂçïÁÇπÊïÖÈöúÁöÑÈ¢ÑÈò≤ Êò†Â∞ÑÈùôÊÄÅÊñá‰ª∂„ÄÅÂèçÂêë‰ª£ÁêÜË∑≥ËΩ¨Âà∞ÂêéÁ´ØÊúçÂä°Âô®Â§ÑÁêÜÁöÑÂÜôÊ≥ï ÊÉäÁæ§Áé∞Ë±° Nginx ÈááÁî®ÁöÑÊòØÂ§öËøõÁ®ãÔºàÂçïÁ∫øÁ®ãÔºâ &amp; Â§öË∑ØIOÂ§çÁî®Ê®°Âûã(Â∫ïÂ±Ç‰æùÈù†epollÂÆûÁé∞) Âá†ÁßçË¥üËΩΩÂùáË°°ÁöÑÁÆóÊ≥ï ÂõõÂ±ÇÁöÑË¥üËΩΩÂùáË°°Âíå‰∏ÉÂ±ÇÁöÑË¥üËΩΩÂùáË°°]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis‰∏∫‰ªÄ‰πàÂø´]]></title>
    <url>%2F2019%2F01%2F30%2Fredis%2FRedis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨ÂõõÁØáÊñáÁ´†ÔºåÊú¨Êñá‰∏ªË¶ÅÊîªÂÖãÈù¢ËØïÈ¢ò-Redis‰∏∫‰ªÄ‰πàËøô‰πàÂø´„ÄÇËøôÂ∞±Ê∂âÂèäRedisÁöÑÁ∫øÁ®ãÊ®°ÂûãÂï¶„ÄÇ ÂÆåÂÖ®Âü∫‰∫éÂÜÖÂ≠ò RedisÊòØÁ∫ØÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÔºåÁõ∏ÂØπ‰∫éËØªÂÜôÁ£ÅÁõòÔºåËØªÂÜôÂÜÖÂ≠òÁöÑÈÄüÂ∫¶Â∞±‰∏çÊòØÂá†ÂÄçÂá†ÂçÅÂÄç‰∫ÜÔºå‰∏ÄËà¨ÔºåhashÊü•ÊâæÂèØ‰ª•ËææÂà∞ÊØèÁßíÁôæ‰∏áÊ¨°ÁöÑÊï∞ÈáèÁ∫ß„ÄÇ Â§öË∑ØÂ§çÁî®IO ‚ÄúÂ§öË∑Ø‚ÄùÊåáÁöÑÊòØÂ§ö‰∏™ÁΩëÁªúËøûÊé•Ôºå‚ÄúÂ§çÁî®‚ÄùÊåáÁöÑÊòØÂ§çÁî®Âêå‰∏Ä‰∏™Á∫øÁ®ã„ÄÇÈááÁî®Â§öË∑Ø I/O Â§çÁî®ÊäÄÊúØÂèØ‰ª•ËÆ©Âçï‰∏™Á∫øÁ®ãÈ´òÊïàÁöÑÂ§ÑÁêÜÂ§ö‰∏™ËøûÊé•ËØ∑Ê±ÇÔºàÂ∞ΩÈáèÂáèÂ∞ëÁΩëÁªúIOÁöÑÊó∂Èó¥Ê∂àËÄóÔºâ„ÄÇ Redis‰∏∫‰ªÄ‰πàÊòØÂçïÁ∫øÁ®ãÁöÑÔºü Âõ†‰∏∫CPU‰∏çÊòØRedisÁöÑÁì∂È¢à„ÄÇRedisÁöÑÁì∂È¢àÊúÄÊúâÂèØËÉΩÊòØÊú∫Âô®ÂÜÖÂ≠òÊàñËÄÖÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇÊó¢ÁÑ∂ÂçïÁ∫øÁ®ãÂÆπÊòìÂÆûÁé∞ÔºåËÄå‰∏îCPU‰∏ç‰ºöÊàê‰∏∫Áì∂È¢àÔºåÈÇ£Â∞±È°∫ÁêÜÊàêÁ´†Âú∞ÈááÁî®ÂçïÁ∫øÁ®ãÁöÑÊñπÊ°à‰∫Ü„ÄÇ ‰∏∫‰ªÄ‰πà Redis ‰∏≠Ë¶Å‰ΩøÁî® I/O Â§öË∑ØÂ§çÁî®ËøôÁßçÊäÄÊúØÂë¢Ôºü È¶ñÂÖàÔºåRedis ÊòØË∑ëÂú®ÂçïÁ∫øÁ®ã‰∏≠ÁöÑÔºåÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÊòØÊåâÁÖßÈ°∫Â∫èÁ∫øÊÄßÊâßË°åÁöÑÔºå‰ΩÜÊòØÁî±‰∫éËØªÂÜôÊìç‰ΩúÁ≠âÂæÖÁî®Êà∑ËæìÂÖ•ÊàñËæìÂá∫ÈÉΩÊòØÈòªÂ°ûÁöÑÔºåÊâÄ‰ª• I/O Êìç‰ΩúÂú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂæÄÂæÄ‰∏çËÉΩÁõ¥Êé•ËøîÂõûÔºåËøô‰ºöÂØºËá¥Êüê‰∏ÄÊñá‰ª∂ÁöÑ I/O ÈòªÂ°ûÂØºËá¥Êï¥‰∏™ËøõÁ®ãÊó†Ê≥ïÂØπÂÖ∂ÂÆÉÂÆ¢Êà∑Êèê‰æõÊúçÂä°ÔºåËÄå I/O Â§öË∑ØÂ§çÁî®Â∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òËÄåÂá∫Áé∞ÁöÑ„ÄÇ ÂÅáËÆæ‰Ω†ÊòØ‰∏Ä‰∏™ËÄÅÂ∏àÔºåËÆ©30‰∏™Â≠¶ÁîüËß£Á≠î‰∏ÄÈÅìÈ¢òÁõÆÔºåÁÑ∂ÂêéÊ£ÄÊü•Â≠¶ÁîüÂÅöÁöÑÊòØÂê¶Ê≠£Á°ÆÔºå‰Ω†Êúâ‰∏ãÈù¢Âá†‰∏™ÈÄâÊã©Ôºö Á¨¨‰∏ÄÁßçÈÄâÊã©ÔºöÊåâÈ°∫Â∫èÈÄê‰∏™Ê£ÄÊü•ÔºåÂÖàÊ£ÄÊü•AÔºåÁÑ∂ÂêéÊòØBÔºå‰πãÂêéÊòØC„ÄÅD„ÄÇ„ÄÇ„ÄÇËøô‰∏≠Èó¥Â¶ÇÊûúÊúâ‰∏Ä‰∏™Â≠¶ÁîüÂç°‰∏ªÔºåÂÖ®Áè≠ÈÉΩ‰ºöË¢´ËÄΩËØØ„ÄÇËøôÁßçÊ®°ÂºèÂ∞±Â•ΩÊØîÔºå‰Ω†Áî®Âæ™ÁéØÊå®‰∏™Â§ÑÁêÜsocketÔºåÊ†πÊú¨‰∏çÂÖ∑ÊúâÂπ∂ÂèëËÉΩÂäõ„ÄÇ Á¨¨‰∫åÁßçÈÄâÊã©Ôºö‰Ω†ÂàõÂª∫30‰∏™ÂàÜË∫´ÔºåÊØè‰∏™ÂàÜË∫´Ê£ÄÊü•‰∏Ä‰∏™Â≠¶ÁîüÁöÑÁ≠îÊ°àÊòØÂê¶Ê≠£Á°Æ„ÄÇ ËøôÁßçÁ±ª‰ºº‰∫é‰∏∫ÊØè‰∏Ä‰∏™Áî®Êà∑ÂàõÂª∫‰∏Ä‰∏™ËøõÁ®ãÊàñËÄÖÁ∫øÁ®ãÂ§ÑÁêÜËøûÊé•„ÄÇ Á¨¨‰∏âÁßçÈÄâÊã©Ôºå‰Ω†Á´ôÂú®ËÆ≤Âè∞‰∏äÁ≠âÔºåË∞ÅËß£Á≠îÂÆåË∞Å‰∏æÊâã„ÄÇËøôÊó∂C„ÄÅD‰∏æÊâãÔºåË°®Á§∫‰ªñ‰ª¨Ëß£Á≠îÈóÆÈ¢òÂÆåÊØïÔºå‰Ω†‰∏ãÂéª‰æùÊ¨°Ê£ÄÊü•C„ÄÅDÁöÑÁ≠îÊ°àÔºåÁÑ∂ÂêéÁªßÁª≠ÂõûÂà∞ËÆ≤Âè∞‰∏äÁ≠â„ÄÇÊ≠§Êó∂E„ÄÅAÂèà‰∏æÊâãÔºåÁÑ∂ÂêéÂéªÂ§ÑÁêÜEÂíåA„ÄÇ„ÄÇ„ÄÇ Á¨¨‰∏âÁßçÂ∞±ÊòØIOÂ§çÁî®Ê®°ÂûãÔºåLinux‰∏ãÁöÑselect„ÄÅpollÂíåepollÂ∞±ÊòØÂπ≤Ëøô‰∏™ÁöÑ„ÄÇÂ∞ÜÁî®Êà∑socketÂØπÂ∫îÁöÑfdÊ≥®ÂÜåËøõepollÔºåÁÑ∂ÂêéepollÂ∏Æ‰Ω†ÁõëÂê¨Âì™‰∫õsocket‰∏äÊúâÊ∂àÊÅØÂà∞ËææÔºåËøôÊ†∑Â∞±ÈÅøÂÖç‰∫ÜÂ§ßÈáèÁöÑÊó†Áî®Êìç‰Ωú„ÄÇÊ≠§Êó∂ÁöÑsocketÂ∫îËØ•ÈááÁî®ÈùûÈòªÂ°ûÊ®°Âºè„ÄÇËøôÊ†∑ÔºåÊï¥‰∏™ËøáÁ®ãÂè™Âú®Ë∞ÉÁî®select„ÄÅpoll„ÄÅepollËøô‰∫õË∞ÉÁî®ÁöÑÊó∂ÂÄôÊâç‰ºöÈòªÂ°ûÔºåÊî∂ÂèëÂÆ¢Êà∑Ê∂àÊÅØÊòØ‰∏ç‰ºöÈòªÂ°ûÁöÑÔºåÊï¥‰∏™ËøõÁ®ãÊàñËÄÖÁ∫øÁ®ãÂ∞±Ë¢´ÂÖÖÂàÜÂà©Áî®Ëµ∑Êù•ÔºåËøôÂ∞±ÊòØ‰∫ã‰ª∂È©±Âä®ÔºåÊâÄË∞ìÁöÑreactorÊ®°Âºè„ÄÇ ÊâÄ‰ª•ÔºåI/OÂ§öË∑ØÂ§çÁî®ÁöÑÊú¨Ë¥®ÊòØÈÄöËøá‰∏ÄÁßçÊú∫Âà∂ÔºàÁ≥ªÁªüÂÜÖÊ†∏ÁºìÂÜ≤I/OÊï∞ÊçÆÔºâÔºåËÆ©Âçï‰∏™ËøõÁ®ãÂèØ‰ª•ÁõëËßÜÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶Ôºå‰∏ÄÊó¶Êüê‰∏™ÊèèËø∞Á¨¶Â∞±Áª™Ôºà‰∏ÄËà¨ÊòØËØªÂ∞±Áª™ÊàñÂÜôÂ∞±Áª™ÔºâÔºåËÉΩÂ§üÈÄöÁü•Á®ãÂ∫èËøõË°åÁõ∏Â∫îÁöÑËØªÂÜôÊìç‰Ωú„ÄÇ ËøôÈáåËøòÊ∂âÂèä‰∏Ä‰∏™ÂêçËØçÔºöfdÊñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ Linux Á≥ªÁªü‰∏≠ÔºåÊää‰∏ÄÂàáÈÉΩÁúãÂÅöÊòØÊñá‰ª∂ÔºåÂΩìËøõÁ®ãÊâìÂºÄÁé∞ÊúâÊñá‰ª∂ÊàñÂàõÂª∫Êñ∞Êñá‰ª∂Êó∂ÔºåÂÜÖÊ†∏ÂêëËøõÁ®ãËøîÂõû‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÊñá‰ª∂ÊèèËø∞Á¨¶Â∞±ÊòØÂÜÖÊ†∏‰∏∫‰∫ÜÈ´òÊïàÁÆ°ÁêÜÂ∑≤Ë¢´ÊâìÂºÄÁöÑÊñá‰ª∂ÊâÄÂàõÂª∫ÁöÑÁ¥¢ÂºïÔºåÁî®Êù•ÊåáÂêëË¢´ÊâìÂºÄÁöÑÊñá‰ª∂ÔºåÊâÄÊúâÊâßË°åI/OÊìç‰ΩúÁöÑÁ≥ªÁªüË∞ÉÁî®ÈÉΩ‰ºöÈÄöËøáÊñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ redisÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºü Redis ÊúçÂä°ÈááÁî® Reactor ÁöÑÊñπÂºèÊù•ÂÆûÁé∞Êñá‰ª∂‰∫ã‰ª∂Â§ÑÁêÜÂô®„ÄÇ Êñá‰ª∂‰∫ã‰ª∂Â§ÑÁêÜÂô®‰ΩøÁî® I/O Â§öË∑ØÂ§çÁî®Ê®°ÂùóÂêåÊó∂ÁõëÂê¨Â§ö‰∏™ FDÔºåÂΩì accept„ÄÅread„ÄÅwrite Âíå close Êñá‰ª∂‰∫ã‰ª∂‰∫ßÁîüÊó∂ÔºåÊñá‰ª∂‰∫ã‰ª∂Â§ÑÁêÜÂô®Â∞±‰ºöÂõûË∞É FD ÁªëÂÆöÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®„ÄÇ ËôΩÁÑ∂Êï¥‰∏™Êñá‰ª∂‰∫ã‰ª∂Â§ÑÁêÜÂô®ÊòØÂú®ÂçïÁ∫øÁ®ã‰∏äËøêË°åÁöÑÔºå‰ΩÜÊòØÈÄöËøá I/O Â§öË∑ØÂ§çÁî®Ê®°ÂùóÁöÑÂºïÂÖ•ÔºåÂÆûÁé∞‰∫ÜÂêåÊó∂ÂØπÂ§ö‰∏™ FD ËØªÂÜôÁöÑÁõëÊéßÔºåÊèêÈ´ò‰∫ÜÁΩëÁªúÈÄö‰ø°Ê®°ÂûãÁöÑÊÄßËÉΩÔºåÂêåÊó∂‰πüÂèØ‰ª•‰øùËØÅÊï¥‰∏™ Redis ÊúçÂä°ÂÆûÁé∞ÁöÑÁÆÄÂçï„ÄÇ ‰∏äÈù¢ÁÆÄÂçïÁêÜËß£Â∞±ÊòØÔºöÂ§ö‰∏™ÁΩëÁªúËøûÊé•Âπ∂ÂèëËØªÂÜôredisÁöÑÊó∂ÂÄôÔºåÂÖàÂ∞ÜÂØπÂ∫îÁöÑfdÊ≥®ÂÜåÂà∞epoll‰∏äÔºåI/OÂ§öË∑ØÂ§çÁî®Ê®°Âùó‰ºöÁõëÂê¨Ëøô‰∫õÁΩëÁªúËØ∑Ê±ÇÁöÑÊÉÖÂÜµÔºå‰∏ÄÊó¶Êúâ‰∏Ä‰∏™ÁΩëÁªúËøûÊé•‰∫ßÁîü‰∫Üaccept„ÄÅread„ÄÅwrite Âíå close Êñá‰ª∂‰∫ã‰ª∂ÔºåI/OÂ§öË∑ØÂ§çÁî®Ê®°ÂùóÂ∞±‰ºöÂêëÊñá‰ª∂‰∫ã‰ª∂ÂàÜÊ¥æÂô®‰º†ÈÄÅÈÇ£‰∫õ‰∫ßÁîü‰∫Ü‰∫ã‰ª∂ÁöÑÁΩëÁªúËøûÊé•„ÄÇ ÂΩìÁÑ∂‰∫ÜÔºå‰∏äÈù¢ÁöÑÊñá‰ª∂‰∫ã‰ª∂ÂèØËÉΩ‰ºöÂπ∂Âèë‰∫ßÁîüÔºåËøôÊó∂ÁöÑÁ≠ñÁï•ÊòØÔºåÂ∞ÜÊâÄÊúâ‰∫ßÁîü‰∫ã‰ª∂ÁöÑÂ•óÊé•Â≠óÔºàÂØπÂ∫î‰∏äÈù¢ÁöÑÁΩëÁªúËøûÊé•ÔºâÈÉΩÂÖ•ÈòüÂà∞‰∏Ä‰∏™ÈòüÂàóÈáåÈù¢Ôºå ÁÑ∂ÂêéÈÄöËøáËøô‰∏™ÈòüÂàóÔºå ‰ª•ÊúâÂ∫èÔºàsequentiallyÔºâ„ÄÅÂêåÊ≠•ÔºàsynchronouslyÔºâ„ÄÅÊØèÊ¨°‰∏Ä‰∏™Â•óÊé•Â≠óÁöÑÊñπÂºèÂêëÊñá‰ª∂‰∫ã‰ª∂ÂàÜÊ¥æÂô®‰º†ÈÄÅÂ•óÊé•Â≠óÔºö ÂΩì‰∏ä‰∏Ä‰∏™Â•óÊé•Â≠ó‰∫ßÁîüÁöÑ‰∫ã‰ª∂Ë¢´Â§ÑÁêÜÂÆåÊØï‰πãÂêéÔºàËØ•Â•óÊé•Â≠ó‰∏∫‰∫ã‰ª∂ÊâÄÂÖ≥ËÅîÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®ÊâßË°åÂÆåÊØïÔºâÔºå I/O Â§öË∑ØÂ§çÁî®Á®ãÂ∫èÊâç‰ºöÁªßÁª≠ÂêëÊñá‰ª∂‰∫ã‰ª∂ÂàÜÊ¥æÂô®‰º†ÈÄÅ‰∏ã‰∏Ä‰∏™Â•óÊé•Â≠ó„ÄÇÂÜçÁúãÁúã‰∏ãÂõæÔºå‰∏é‰∏äÂõæ‰Ωø‰∏ÄÊ†∑ÁöÑÔºö Êñá‰ª∂‰∫ã‰ª∂ÂàÜÊ¥æÂô®Êé•Êî∂ I/O Â§öË∑ØÂ§çÁî®Á®ãÂ∫è‰º†Êù•ÁöÑÂ•óÊé•Â≠óÔºå Âπ∂Ê†πÊçÆÂ•óÊé•Â≠ó‰∫ßÁîüÁöÑ‰∫ã‰ª∂ÁöÑÁ±ªÂûãÔºå Ë∞ÉÁî®Áõ∏Â∫îÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®„ÄÇ ÊúçÂä°Âô®‰ºö‰∏∫ÊâßË°å‰∏çÂêå‰ªªÂä°ÁöÑÂ•óÊé•Â≠óÂÖ≥ËÅî‰∏çÂêåÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®Ôºå Ëøô‰∫õÂ§ÑÁêÜÂô®ÊòØ‰∏Ä‰∏™‰∏™ÂáΩÊï∞Ôºå ÂÆÉ‰ª¨ÂÆö‰πâ‰∫ÜÊüê‰∏™‰∫ã‰ª∂ÂèëÁîüÊó∂Ôºå ÊúçÂä°Âô®Â∫îËØ•ÊâßË°åÁöÑÂä®‰Ωú„ÄÇ Êï¥‰∏™Ê®°Âùó‰Ωø Redis ËÉΩ‰ª•ÂçïËøõÁ®ãËøêË°åÁöÑÂêåÊó∂ÊúçÂä°ÊàêÂçÉ‰∏ä‰∏á‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÈÅøÂÖç‰∫ÜÁî±‰∫éÂ§öËøõÁ®ãÂ∫îÁî®ÁöÑÂºïÂÖ•ÂØºËá¥‰ª£Á†ÅÂÆûÁé∞Â§çÊùÇÂ∫¶ÁöÑÊèêÂçáÔºåÂáèÂ∞ë‰∫ÜÂá∫ÈîôÁöÑÂèØËÉΩÊÄßÔºåÂçïÁ∫øÁ®ãËøòÂáèÂ∞ëÁ∫øÁ®ãÂàáÊç¢ÂíåË∞ÉÂ∫¶ÔºåÂÆûÁé∞Êõ¥Âä†ÁÆÄÂçï ÊúÄÂêéÊÄªÁªì‰∏Ä‰∏ãÔºå‰∏∫‰ªÄ‰πàredisÊØîËæÉÂø´Â§ßÊ¶ÇÊÄùË∑ØÈÄö‰øóÁöÑËØ¥Â∞±ÊòØÔºöRedisÊòØÁ∫ØÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÔºåËØªÂèñÂø´ÔºåÁì∂È¢àÂú®‰∫éIO‰∏äÔºåÂ¶ÇÊûú‰ΩøÁî®ÈòªÂ°ûÂºèIOÔºåÂõ†‰∏∫ÊòØÂçïÁ∫øÁ®ãÁöÑÁºòÊïÖÔºåÂ∞±‰ºöÂÅúÊ≠¢Á≠âÂæÖ„ÄÇÊâÄ‰ª•ÈááÁî®IOÂ§öË∑ØÂ§çÁî®ÁõëÂê¨Êñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÁä∂ÊÄÅÔºåÂ∞ÜÂØπredisÁöÑÂºÄÂÖ≥ËØªÂÜôÊç¢Êàê‰∫ã‰ª∂ÔºåÂä†ÂÖ•ÈòüÂàóËøõË°åÁõ∏Â∫îÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÔºåÂêûÂêêÈáèÊØîËæÉÂ§ß„ÄÇ IOÂ§çÁî®Ê®°ÂûãÁöÑÈÄâÊã© Âõ†‰∏∫ Redis ÈúÄË¶ÅÂú®Â§ö‰∏™Âπ≥Âè∞‰∏äËøêË°åÔºåÂêåÊó∂‰∏∫‰∫ÜÊúÄÂ§ßÂåñÊâßË°åÁöÑÊïàÁéá‰∏éÊÄßËÉΩÔºåÊâÄ‰ª•‰ºöÊ†πÊçÆÁºñËØëÂπ≥Âè∞ÁöÑ‰∏çÂêåÈÄâÊã©‰∏çÂêåÁöÑ I/O Â§öË∑ØÂ§çÁî®ÂáΩÊï∞‰Ωú‰∏∫Â≠êÊ®°ÂùóÔºåÊèê‰æõÁªô‰∏äÂ±ÇÁªü‰∏ÄÁöÑÊé•Âè£Ôºõ Âõ†‰∏∫ select ÂáΩÊï∞ÊòØ‰Ωú‰∏∫ POSIX Ê†áÂáÜ‰∏≠ÁöÑÁ≥ªÁªüË∞ÉÁî®ÔºåÂú®‰∏çÂêåÁâàÊú¨ÁöÑÊìç‰ΩúÁ≥ªÁªü‰∏äÈÉΩ‰ºöÂÆûÁé∞ÔºåÊâÄ‰ª•Â∞ÜÂÖ∂‰Ωú‰∏∫‰øùÂ∫ïÊñπÊ°àÔºö Redis ‰ºö‰ºòÂÖàÈÄâÊã©Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(1) ÁöÑ I/O Â§öË∑ØÂ§çÁî®ÂáΩÊï∞‰Ωú‰∏∫Â∫ïÂ±ÇÂÆûÁé∞ÔºåÂåÖÊã¨ Solaries 10 ‰∏≠ÁöÑ evport„ÄÅLinux ‰∏≠ÁöÑ epoll Âíå macOS/FreeBSD ‰∏≠ÁöÑ kqueueÔºå‰∏äËø∞ÁöÑËøô‰∫õÂáΩÊï∞ÈÉΩ‰ΩøÁî®‰∫ÜÂÜÖÊ†∏ÂÜÖÈÉ®ÁöÑÁªìÊûÑÔºåÂπ∂‰∏îËÉΩÂ§üÊúçÂä°Âá†ÂçÅ‰∏áÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ ‰ΩÜÊòØÂ¶ÇÊûúÂΩìÂâçÁºñËØëÁéØÂ¢ÉÊ≤°Êúâ‰∏äËø∞ÂáΩÊï∞ÔºåÂ∞±‰ºöÈÄâÊã© select ‰Ωú‰∏∫Â§áÈÄâÊñπÊ°àÔºåÁî±‰∫éÂÖ∂Âú®‰ΩøÁî®Êó∂‰ºöÊâ´ÊèèÂÖ®ÈÉ®ÁõëÂê¨ÁöÑÊèèËø∞Á¨¶ÔºåÊâÄ‰ª•ÂÖ∂Êó∂Èó¥Â§çÊùÇÂ∫¶ËæÉÂ∑Æ O(n)ÔºåÂπ∂‰∏îÂè™ËÉΩÂêåÊó∂ÊúçÂä° 1024 ‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÊâÄ‰ª•‰∏ÄËà¨Âπ∂‰∏ç‰ºö‰ª• select ‰Ωú‰∏∫Á¨¨‰∏ÄÊñπÊ°à‰ΩøÁî®„ÄÇ reidsÂú®linux‰∏ãÁöÑÂÆâË£Ö RedisÂØπ‰∫éLinuxÊòØÂÆòÊñπÊîØÊåÅÁöÑÔºåÂÆâË£ÖËµ∑Êù•‰πüÈùûÂ∏∏Âú∞ÁÆÄÂçïÔºåÁõ¥Êé•ÁºñËØëÊ∫êÁ†ÅÁÑ∂ÂêéËøõË°åÂÆâË£ÖÂç≥ÂèØ„ÄÇ ËøôÈáå‰ª•centos‰∏∫‰æãÔºåÂ§ßÊ¶ÇËØ¥‰∏Ä‰∏ãÊ≠•È™§Ôºö ‰∏ãËΩΩredisÁºñËØëÂ∑•ÂÖ∑:yum install gccÂíåyum install g++ Ëß£Âéãredis.tar.gzÊñá‰ª∂ÔºåËøõÂéª‰πãÂêéËøõË°åÁºñËØë:make ÁÑ∂ÂêéÂÆâË£ÖÔºömake install PREFIX=/usr/local/redis ÂÆâË£ÖÊàêÂäü‰πãÂêéËøõÂÖ•/usr/local/redis/bin‰∏ãÂêØÂä®redis ./redis-server]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÂÖ∂‰ªñÁöÑÂäüËÉΩ‰ªãÁªç]]></title>
    <url>%2F2019%2F01%2F29%2Fredis%2FRedis%E5%85%B6%E4%BB%96%E7%9A%84%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨‰∏âÁØáÊñáÁ´†ÔºåÊú¨Êñá‰∏ªË¶Å‰ªãÁªçredis‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÂäüËÉΩ„ÄÇÈÅáÂà∞Êüê‰∫õÂú∫ÊôØÁöÑÊó∂ÂÄôÂèØ‰ª•ÊÉ≥Âà∞redisÊòØ‰∏çÊòØÂèØ‰ª•ÂÆûÁé∞„ÄÇ ‰∏Ä„ÄÅÊÖ¢Êü•ËØ¢Êó•Âøó 1.1 ‰ªÄ‰πàÊòØÊÖ¢Êü•ËØ¢Êó•Âøó ÊÖ¢Êü•ËØ¢Êó•ÂøóÂ∏ÆÂä©ÂºÄÂèëÂíåËøêÁª¥‰∫∫ÂëòÂÆö‰ΩçÁ≥ªÁªüÂ≠òÂú®ÁöÑÊÖ¢Êìç‰Ωú„ÄÇÊÖ¢Êü•ËØ¢Êó•ÂøóÂ∞±ÊòØÁ≥ªÁªüÂú®ÂëΩ‰ª§ÊâßË°åÂâçÂêéËÆ°ÁÆóÊØèÊù°ÂëΩ‰ª§ÁöÑÊâßË°åÊó∂Èó¥ÔºåÂΩìË∂ÖËøáÈ¢ÑËÆæÈòÄÂÄºÔºåÂ∞±Â∞ÜËøôÊù°ÂëΩ‰ª§ÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºàÊÖ¢Êü•ËØ¢IDÔºåÂèëÁîüÊó∂Èó¥Êà≥ÔºåËÄóÊó∂ÔºåÂëΩ‰ª§ÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºâËÆ∞ÂΩï‰∏ãÊù•„ÄÇ 1.2 redis‰∏ÄÊù°ÂëΩ‰ª§ÁÆÄÂçïÁöÑÁîüÂëΩÂë®Êúü ÊÖ¢Êü•ËØ¢Âè™‰ºöÂá∫Áé∞Âú®„Äê3.ÊâßË°åÂëΩ‰ª§„ÄëËøô‰∏™Èò∂ÊÆµÔºåÂç≥ÊÖ¢Êü•ËØ¢Âè™ËÆ∞ÂΩïÂëΩ‰ª§ÊâßË°åÊó∂Èó¥ÔºåÂπ∂‰∏çÂåÖÊã¨ÂëΩ‰ª§ÊéíÈòüÊó∂Èó¥ÂíåÁΩëÁªú‰º†ËæìÊó∂Èó¥„ÄÇ 1.3 ÊÖ¢Êü•ËØ¢ÈÖçÁΩÆÂèÇÊï∞ ÊÖ¢Êü•ËØ¢ÁöÑÈ¢ÑËÆæÈòÄÂÄº slowlog-log-slower-than slowlog-log-slower-thanÂèÇÊï∞Â∞±ÊòØÈ¢ÑËÆæÈòÄÂÄºÔºåÂçï‰ΩçÊòØÂæÆÁßí,ÈªòËÆ§ÂÄºÊòØ10000ÔºåÂ¶ÇÊûú‰∏ÄÊù°ÂëΩ‰ª§ÁöÑÊâßË°åÊó∂Èó¥Ë∂ÖËøá10000ÂæÆÂ¶ô(10ÊØ´Áßí)ÔºåÈÇ£‰πàÂÆÉÂ∞ÜË¢´ËÆ∞ÂΩïÂú®ÊÖ¢Êü•ËØ¢Êó•Âøó‰∏≠„ÄÇ Â¶ÇÊûúslowlog-log-slower-thanÁöÑÂÄºÊòØ0ÔºåÂàô‰ºöËÆ∞ÂΩïÊâÄÊúâÂëΩ‰ª§„ÄÇ Â¶ÇÊûúslowlog-log-slower-thanÁöÑÂÄºÂ∞è‰∫é0ÔºåÂàô‰ªª‰ΩïÂëΩ‰ª§ÈÉΩ‰∏ç‰ºöËÆ∞ÂΩïÊó•Âøó„ÄÇ redisÁöÑÊìç‰Ωú‰∏ÄËà¨ÊòØÂæÆÂ¶ôÁ∫ßÔºåslowlog-log-slower-than‰∏çË¶ÅËÆæÁΩÆÂ§™Â§ßÔºå‰∏ÄËà¨ËÆæÁΩÆ‰∏∫1ÊØ´Áßí„ÄÇÊîØÊåÅÂä®ÊÄÅËÆæÁΩÆ„ÄÇ ÊÖ¢Êü•ËØ¢Êó•ÂøóÁöÑÈïøÂ∫¶slowlog-max-len slowlog-max-lenÂè™ÊòØËØ¥Êòé‰∫ÜÊÖ¢Êü•ËØ¢Êó•ÂøóÊúÄÂ§öÂ≠òÂÇ®Â§öÂ∞ëÊù°„ÄÇ Redis‰ΩøÁî®‰∏Ä‰∏™ÂàóË°®Êù•Â≠òÂÇ®ÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåshowlog-max-lenÂ∞±ÊòØÂàóË°®ÁöÑÊúÄÂ§ßÈïøÂ∫¶„ÄÇ ÂΩìÊÖ¢Êü•ËØ¢Êó•ÂøóÂ∑≤ÁªèÂà∞ËææÂàóË°®ÁöÑÊúÄÂ§ßÈïøÂ∫¶Êó∂ÔºåÂèàÊúâÊÖ¢Êü•ËØ¢Êó•ÂøóË¶ÅËøõÂÖ•ÂàóË°®ÔºåÂàôÊúÄÊó©ÊèíÂÖ•ÂàóË°®ÁöÑÊó•ÂøóÂ∞Ü‰ºöË¢´ÁßªÂá∫ÂàóË°®ÔºåÊñ∞Êó•ÂøóË¢´ÊèíÂÖ•ÂàóË°®ÁöÑÊú´Â∞æ„ÄÇ ÈªòËÆ§ÊòØ128Ôºå‰ΩÜÊòØslowlog-max-len‰∏çË¶ÅËÆæÁΩÆÂ§™Â∞èÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏∫1000‰ª•‰∏ä. ÊÖ¢Êü•ËØ¢Êó•ÂøóÊòØ‰∏Ä‰∏™ÂÖàËøõÂÖàÂá∫ÈòüÂàóÔºåÊÖ¢Êü•ËØ¢ËæÉÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩ‰ºö‰∏¢Â§±ÈÉ®ÂàÜÊÖ¢Êü•ËØ¢ÂëΩ‰ª§ÔºåÂèØ‰ª•ÂÆöÊúüÊâßË°åslow getÂëΩ‰ª§Â∞ÜÊÖ¢Êü•ËØ¢Êó•ÂøóÊåÅ‰πÖÂåñÂà∞ÂÖ∂‰ªñÂ≠òÂÇ®‰∏≠„ÄÇÁÑ∂ÂêéÂà∂‰ΩúÂèØËßÜÂåñÁïåÈù¢Êü•ËØ¢„ÄÇ ‰∫å„ÄÅpipeline 2.1 ‰∏∫‰ªÄ‰πà‰ºöÂá∫Áé∞Pipeline Áî®ÊôÆÈÄöÁöÑgetÂíåsetÔºåÂ¶ÇÊûúÂêåÊó∂ÈúÄË¶ÅÊâßË°åÂ§ßÈáèÁöÑÂëΩ‰ª§ÔºåÈÇ£Â∞±ÊòØÁ≠âÂæÖ‰∏ä‰∏ÄÊù°ÂëΩ‰ª§Â∫îÁ≠îÂêéÂÜçÊâßË°åÔºåËøô‰∏≠Èó¥‰∏ç‰ªÖ‰ªÖÂ§ö‰∫ÜRTTÔºàRound Time TripÔºâÔºåËÄå‰∏îËøòÈ¢ëÁπÅÁöÑË∞ÉÁî®Á≥ªÁªüIOÔºåÂèëÈÄÅÁΩëÁªúËØ∑Ê±Ç„ÄÇ ÂØπ‰∫éÂ§öÊù°ÂëΩ‰ª§‰∏çÊòØÊúâmgetÂíåmsetÂêóÔºüÁ°ÆÂÆûÂØπ‰∫é‰∏ÄÊâπÁöÑgetÂíåsetÂèØ‰ª•Áî®mgetÂíåmsetÔºå‰ΩÜÊòØÂÆÉÁöÑÈóÆÈ¢òÂú®‰∫éÂ¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÂêåÊó∂‰º†ËæìgetÂíåhgetÂë¢ÔºüÊ≠§Êó∂pipeline(ÊµÅÊ∞¥Á∫ø)Â∞±Âá∫Áé∞‰∫Ü„ÄÇ ÊâÄ‰ª•ÊµÅÊ∞¥Á∫øËß£ÂÜ≥ÁöÑÈóÆÈ¢òÊòØNÊù°ÂëΩ‰ª§ÁΩëÁªúÈÄö‰ø°ÁöÑÂáèÂ∞ë„ÄÇ ‰∏∫‰ªÄ‰πàËØ¥ÁΩëÁªúËÄóË¥πÊó∂Èó¥Â§ßÂë¢ÔºüËøôÈáåÁªôÂá∫‰∏Ä‰∏™ÊûÅÁ´ØÁöÑ‰æãÂ≠ê„ÄÇ pipeline‰∏éÂéüÁîüMÊìç‰ΩúÁöÑÂØπÊØî„ÄÇ ÂéüÁîüMÊìç‰ΩúÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊìç‰Ωú„ÄÇ pipelineÈùûÂéüÂ≠êÂëΩ‰ª§„ÄÇ ÂΩìÊüê‰∏™ÂëΩ‰ª§ÁöÑÊâßË°åÈúÄË¶Å‰æùËµñÂâç‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑËøîÂõûÁªìÊûúÊó∂ÔºåÊó†Ê≥ï‰ΩøÁî®pipeline„ÄÇ 12mset a ‚Äúa1‚Äù b ‚Äúb‚Äù c ‚Äúc1‚Äù mget a b c mgetÂíåmsetÂëΩ‰ª§‰πüÊòØ‰∏∫‰∫ÜÂáèÂ∞ëÁΩëÁªúËøûÊé•Âíå‰º†ËæìÊó∂Èó¥ÊâÄËÆæÁΩÆÁöÑÔºåÂÖ∂Êú¨Ë¥®ÂíåpipelineÁöÑÂ∫îÁî®Âå∫Âà´‰∏çÂ§ßÔºå‰ΩÜÊòØÂú®ÁâπÂÆöÂú∫ÊôØ‰∏ãÂè™ËÉΩÁî®pipelineÂÆûÁé∞Ôºå‰æãÂ¶ÇÔºö 12get aset b ‚Äò1‚Äô pipelineÈÄÇÂêàÊâßË°åËøôÁßçËøûÁª≠Ôºå‰∏îÊó†Áõ∏ÂÖ≥ÊÄßÁöÑÂëΩ‰ª§„ÄÇ 2.2 ‰∏Ä‰∏™demo Êê≠Âª∫‰∏Ä‰∏™quickstartÁöÑmavenÂ∑•Á®ã„ÄÇËøáÁ®ãÁï•„ÄÇ ÂºïÂÖ•‰æùËµñÔºö 12345&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt;&lt;/dependency&gt; Áõ¥Êé•ÂÜçÂçïÂÖÉÊµãËØï‰∏≠ËøõË°åÊµãËØïÔºöÊôÆÈÄöÁöÑÁõ¥Êé•hset 10000Êù°Êï∞ÊçÆÔºö 1234567891011@Testpublic void test1()&#123; Jedis jedis = new Jedis("127.0.0.1",6379); long before = System.currentTimeMillis(); for(int i=0;i&lt;10000;i++)&#123; jedis.hset("hashkey"+i,"filed"+i,"value"+i); &#125; long after = System.currentTimeMillis(); System.out.println("‰∏ÄÂÖ±ËÄóÊó∂: "+(after-before)+"ms");&#125; ËøêË°åÁªìÊûúÔºö ‰∏ÄÂÖ±ËÄóÊó∂: 1526ms ‰ΩÜÊòØÁî®pipelineÂêéÔºö 123456789101112131415@Testpublic void test2()&#123; Jedis jedis = new Jedis("127.0.0.1",6379); long before = System.currentTimeMillis(); //ÂàÜ‰∏∫10Ê¨°ÊâπÈáèÂèëÈÄÅ for(int i=0;i&lt;10;i++)&#123; Pipeline pipeline = jedis.pipelined(); for(int j=1000*i;j&lt;(i+1)*1000;j++)&#123; pipeline.hset("hashkey:"+j,"field:"+j,"value:"+j); &#125; pipeline.syncAndReturnAll(); &#125; long after = System.currentTimeMillis(); System.out.println("‰ΩøÁî®pipeline‰∏ÄÂÖ±ËÄóÊó∂: "+(after-before)+"ms");&#125; ËøêË°åÁªìÊûúÔºö‰ΩøÁî®pipeline‰∏ÄÂÖ±ËÄóÊó∂: 139ms ÂèØ‰ª•È¢ÑËßÅÔºåÂØπ‰∫éÊõ¥Â§öÁöÑ‰º†ËæìÊ¨°Êï∞ÔºåpipelineÁöÑ‰ºòÂäøÂ∞ÜË∂äÊù•Ë∂äÊòéÊòæ„ÄÇ‰ΩÜÊòØpipelineÊØèÊ¨°Âè™ËÉΩ‰ΩúÁî®Âú®‰∏Ä‰∏™redisËäÇÁÇπ‰∏ä„ÄÇ ‰∏â„ÄÅÂèëÂ∏ÉËÆ¢ÈòÖ 3.1 ËßíËâ≤ ÂèëÂ∏ÉËÄÖ----È¢ëÈÅì----ËÆ¢ÈòÖËÄÖ 3.2 Ê®°Âûã Ê≥®ÊÑèÔºåÊñ∞ËÆ¢ÈòÖÁöÑÔºåÊòØ‰∏çËÉΩÊî∂Âà∞‰πãÂâçÁöÑÊ∂àÊÅØÁöÑ„ÄÇ ËÆ¢ÈòÖËÄÖ1Ôºösubscribe mytopic ËÆ¢ÈòÖËÄÖ2Ôºösubscribe mytopic ËÆ¢ÈòÖËÄÖ3Ôºösubscribe mytopic ÂèëÂ∏ÉËÄÖÔºöpublish mytopic ‚Äúhello‚Äù Áº∫ÁÇπÊòØ‰∏çËÉΩ‰øùËØÅÊ∂àÊÅØÂèØËææÔºåÊâÄ‰ª•ËøòÊòØÁî®‰∏ì‰∏öÁöÑÊ∂àÊÅØÈòüÂàó‰º†ËææÊØîËæÉ‰øùÈöú„ÄÇ ‰∏éÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂûãÂæàÁ±ª‰ººÁöÑÊòØÊ∂àÊÅØÈòüÂàóÊ®°Âûã„ÄÇ Âè™Êúâ‰∏Ä‰∏™ÊòØÂèØ‰ª•Êî∂Âà∞Ê∂àÊÅØÁöÑ„ÄÇ Âõõ„ÄÅbitMap 4.1 ‰ΩçÂõæÊòØ‰ªÄ‰πà Â∞±ÊòØÈÄöËøá‰∏Ä‰∏™bit‰ΩçÊù•Ë°®Á§∫Êüê‰∏™ÂÖÉÁ¥†ÂØπÂ∫îÁöÑÂÄºÊàñËÄÖÁä∂ÊÄÅ,ÂÖ∂‰∏≠ÁöÑkeyÂ∞±ÊòØÂØπÂ∫îÂÖÉÁ¥†Êú¨Ë∫´„ÄÇÊàë‰ª¨Áü•ÈÅì8‰∏™bitÂèØ‰ª•ÁªÑÊàê‰∏Ä‰∏™ByteÔºåÊâÄ‰ª•bitmapÊú¨Ë∫´‰ºöÊûÅÂ§ßÁöÑËäÇÁúÅÂÇ®Â≠òÁ©∫Èó¥„ÄÇ Bitmap‰∏çÊòØ‰∏Ä‰∏™Á°ÆÂàáÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåËÄåÊòØÂü∫‰∫éStringÁ±ªÂûãÂÆö‰πâÁöÑ‰∏ÄÁ≥ªÂàóÈù¢Âêë‰ΩçÊìç‰ΩúÁöÑÊñπÊ≥ï„ÄÇÂõ†‰∏∫StringÊòØ‰∫åËøõÂà∂ÂÆâÂÖ®ÁöÑÂπ∂‰∏îÂÆÉ‰ª¨ÁöÑÊúÄÂ§ßÈïøÂ∫¶ÊòØ512MBÔºå ÊâÄ‰ª•StringÁ±ªÂûãÂæàÂêàÈÄÇÂéª‰Ωú‰∏∫‰∏Ä‰∏™2^32ÈïøÂ∫¶ÁöÑ‰ΩçÊï∞ÁªÑ„ÄÇ ÊØîÂ¶ÇÊàë‰ª¨ÊâßË°å set hello big ÈÇ£‰πàËøô‰∏™bigÂÖ∂ÂÆûÊòØËøô‰∏™ÂΩ¢ÊÄÅÔºö ÊâßË°ågetbit hello 0 ÂæóÂà∞0Ôºõ ÊâßË°ågetbit hello 1 ÂæóÂà∞1 setbit hello 7 1ÔºåÈÇ£‰πàÂÜçget hello Â∞ÜÂæóÂà∞cig 4.2 ‰ΩçÂõæÊúâ‰ªÄ‰πàÁî®Âë¢Ôºü ‰ΩçÂõæÈô§‰∫ÜgetbitÂíåsetbit‰πãÂ§ñÔºåËøòÊúâbitcount key [start end]ÔºåÂ∞±ÊòØËé∑ÂèñÊâßË°åËåÉÂõ¥ÂÜÖÁöÑ1ÁöÑ‰∏™Êï∞„ÄÇ bitop‰ΩúÁî®ÊòØÂÅöÂ§ö‰∏™BitmapÁöÑand,or,not,xorÊìç‰Ωú„ÄÇ ‰ª•‰∏Ä‰∏™Âú∫ÊôØ‰∏∫‰æãÔºöÊó•Ê¥ªË∑ÉÁî®Êà∑ ÊØèÊ¨°Áî®Êà∑ÁôªÂΩïÊó∂‰ºöÊâßË°å‰∏ÄÊ¨°redis.setbit(daily_active_users, user_id, 1) Âõ†‰∏∫Êó•Ê¥ªË∑ÉÁî®Êà∑ÊØèÂ§©ÈÉΩÂèòÂåñÔºåÊâÄ‰ª•ÈúÄË¶ÅÊØèÂ§©ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑbitmap„ÄÇÊàë‰ª¨ÁÆÄÂçïÂú∞ÊääÊó•ÊúüÔºàÂπ¥ÊúàÊó•ÔºâÊ∑ªÂä†Âà∞keyÂêéÈù¢Ôºå‰ª•ÂêéÂ∞±ÂèØ‰ª•Ê†πÊçÆÂπ¥ÊúàÊó•Ëøô‰∏™keyÊâæÂà∞ÊüêÂ§©Ê¥ªË∑ÉÁî®Êà∑„ÄÇÂÆûÁé∞‰∫ÜËøô‰∏™ÂäüËÉΩ„ÄÇ Á¨¨‰∫å‰∏™Âú∫ÊôØÔºöÁî®Êà∑Á≠æÂà∞ÊÉÖÂÜµ Â∞ÜÈÇ£Â§©ÊâÄ‰ª£Ë°®ÁöÑÁΩëÁ´ôÁöÑ‰∏äÁ∫øÊó•‰Ωú‰∏∫offsetÂèÇÊï∞Ôºå ÊØîÂ¶Ç,Â¶ÇÊûú‰ªäÂ§©ÊòØÁΩëÁ´ô‰∏äÁ∫øÁöÑÁ¨¨100Â§©,ËÄåÁî®Êà∑$uid=10001Âú®‰ªäÂ§©ÈòÖËßàËøáÁΩëÁ´ô, ÈÇ£‰πàÊâßË°åÂëΩ‰ª§SETBIT peter 100 1. Â¶ÇÊûúÊòéÂ§©$uid=10001‰πüÁªßÁª≠ÈòÖËßàÁΩëÁ´ô,ÈÇ£‰πàÊâßË°åÂëΩ‰ª§SETBIT peter 101 1 ,‰ª•Ê≠§Á±ªÊé®. ‰ªîÁªÜÊÉ≥ÊÉ≥ÔºåÁî®‰ΩçÂõæÔºå‰∏ÄÂ§©Á≠æÂà∞‰∏ÄÊ¨°Âè™Ë¶ÅÂç†‰∏Ä‰∏™bitÔºå8Â§©ÊâçÂç†‰∏Ä‰∏™Â≠óËäÇ„ÄÇÈÇ£‰πà‰∏ÄÂπ¥Ëøô‰∏™Áî®Êà∑Á≠æÂà∞Âç†ÁöÑÊï∞ÊçÆÊòØ365/8=45.625‰∏™Â≠óËäÇ.Â¶ÇÊûú‰∏çÁî®‰ΩçÂõæÂÆûÁé∞Ôºå‰øùÂ≠ò‰∏ÄÊù°ËÆ∞ÂΩïÂ∞ÜËøúËøúÂ§ß‰∫é‰∏Ä‰∏™ÊØîÁâπÂêßÔºåÈÇ£‰πàÂΩìÁî®Êà∑ÈáèÂæàÂ§ßÁöÑÊó∂ÂÄôÔºåÂ∑ÆË∑ùÂ∞Ü‰ºöÁâπÂà´Â§ß„ÄÇ ‰∫î„ÄÅhyperLogLog Âü∫‰∫éHyperLogLogÁÆóÊ≥ïÔºöÊûÅÂ∞èÁ©∫Èó¥ÂÆåÊàêÁã¨Á´ãÊï∞ÈáèÁªüËÆ°„ÄÇÊú¨Ë¥®ËøòÊòØÂ≠óÁ¨¶‰∏≤„ÄÇ pfadd key element [element...]:ÂêëhyperloglogÊ∑ªÂä†ÂÖÉÁ¥† pfcount key [key...]:ËÆ°ÁÆóhyperloglogÁöÑÁã¨Á´ãÊÄªÊï∞ pfmerge destkey sourcekey [sourcekey...]:ÂêàÂπ∂Â§ö‰∏™hyperloglog api‰æãÂ≠ê ‰∏∫‰ªÄ‰πàË¶ÅÁî®hyperLogLogÂë¢ Êàë‰ª¨‰∏äÈù¢‰æãÂ≠êÂèØ‰ª•ÁúãÂà∞Ôºå‰ªñÁöÑÂäüËÉΩÁ±ª‰ºº‰∫éÂéªÈáçÔºåÁªüËÆ°Âá∫ÊâÄÊúâ‰∏ç‰∏ÄÊ†∑ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞„ÄÇ ‰ªñÁöÑ‰ºòÁÇπÊòØÔºöÂç†Áî®ÂÜÖÂ≠òÊûÅÂ∞è„ÄÇ Áº∫ÁÇπ‰πüÊúâÔºö ‰ªñÂèØËÉΩ‰ºöÂá∫ÈîôÔºåÈîôËØØÁéá‰∏∫0.81%ÔºåÁúã‰Ω†ÊòØÂê¶ËÉΩÂ§üÂÆπÂøçÈîôËØØ‰∫Ü ‰∏çËÉΩÊãøÂà∞ÂçïÊù°Êï∞ÊçÆ ÂÖ≠„ÄÅgeo Â≠òÂÇ®ÁªèÁ∫¨Â∫¶„ÄÅËÆ°ÁÆó‰∏§Âú∞Ë∑ùÁ¶ª„ÄÅËåÉÂõ¥ËÆ°ÁÆóÁ≠â„ÄÇ ÊèêÂà∞LBS(Location Based Service)ÔºåÂü∫‰∫é‰ΩçÁΩÆÁöÑÊúçÂä°„ÄÇÊàëÁ´ãÂç≥ÊÉ≥Ëµ∑MongodbÁöÑGEOÂÆûÁé∞Âú∞ÁêÜÂùêÊ†áÊü•ËØ¢Á≠âÂäüËÉΩÔºåÂÖ∑‰Ωì‰ªãÁªç‰∏∫Âú∞ÁêÜ‰ΩçÁΩÆÈôÑËøëÊü•ËØ¢ÁöÑGEOHASHËß£ÂÜ≥ÊñπÊ°à„ÄÇ mongodbÊúÄÂ§ßÁöÑÁâπÁÇπÊòØÁÅµÊ¥ªÔºåÂõ†‰∏∫ÂÖ∂Êï∞ÊçÆÊòØ‰ª•jsonÁöÑÊ†ºÂºèÂ≠òÂÇ®ÔºåÊâÄ‰ª•Â≠óÊÆµÈöèÊó∂ÂèØ‰ª•Â¢ûÂä†ÊàñÂáèÂ∞ëÔºõRedisÁöÑÁâπÁÇπÊòØÂø´ÔºåÈÄÇÂêàÂçï‰∏ÄÁöÑÔºåÁÆÄÂçïÁöÑÔºåÂ§ßÈáèÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÔºõHBaseÊàëÊ≤°ÊúâÂÅöÊ∑±ÂÖ•Á†îÁ©∂ÔºåÂÆÉÁöÑÁâπÁÇπÊòØÂ§ßÔºåÈÄÇÂêàÂÅöÁ¶ªÁ∫øÁºìÂ≠ò„ÄÇÂú®Â§ÑÁêÜÁ§æ‰∫§ËøôÁßçÂÖ≥Á≥ªÂ§çÊùÇÁöÑÊï∞ÊçÆÂ≠òÂÇ®Êó∂Ôºå‰æùÁÑ∂ËøòÊòØÈúÄË¶ÅÁî®mysqlËøôÁßçÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºånosqlÂπ∂‰∏çËÉΩÂÆåÂÖ®Êõø‰ª£„ÄÇ ‰∏É„ÄÅÊÄªÁªì È¶ñÂÖàÊòØÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåÂèØ‰ª•ÂÆöÊó∂Âú∞ÊåÅ‰πÖÂåñÔºåÂπ∂‰∏îÁî®‰∏Ä‰∏™ÂèØËßÜÂåñÈ°µÈù¢ËøõË°åÁõëÊµã„ÄÇ pipelineËß£ÂÜ≥ÁöÑÊòØÂØπÊ≤°ÊúâÁõ∏‰∫í‰æùËµñÁöÑÊìç‰ΩúÁöÑÊâπÈáèÊâßË°åÔºåÂáèÂ∞ëÁΩëÁªú‰º†ËæìÂíåIOÊó∂Èó¥„ÄÇ‰ΩÜÊòØÂë¢ÔºåÈúÄË¶ÅÊ≥®ÊÑè‰∏ÄËà¨Âè™ËÉΩÂæÄ‰∏Ä‰∏™ËäÇÁÇπÊîæÊï∞ÊçÆÔºåÈù¢ÂØπÈõÜÁæ§ÁöÑÊó∂ÂÄôÔºåÂ∞±ÈúÄË¶ÅÈááÂèñ‰∏Ä‰∫õÁ≠ñÁï•‰∫Ü„ÄÇmset„ÄÅmgetÔºåÁõÆÂâçÂè™ÊîØÊåÅÂÖ∑ÊúâÁõ∏ÂêåslotÂÄºÁöÑkeyÊâßË°åÊâπÈáèÊìç‰Ωú„ÄÇÂêéÊñáÂÜçËÆ≤„ÄÇ ÂèØ‰ª•ÂÆûÁé∞ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âûã‰ª•ÂèäÊ∂àÊÅØÈòüÂàóÔºå‰ΩÜÊòØÊ∂àÊÅØÊòØÊó†Áä∂ÊÄÅÁöÑÔºå‰∏çËÉΩ‰øùËØÅÊ∂àÊÅØ‰∏ÄÂÆöÈÄÅËææÔºåÊâÄ‰ª•ÈúÄË¶ÅÁî®‰∏ì‰∏öÁöÑMQÊù•ÂÆûÁé∞„ÄÇ ‰ΩçÂõæÔºåÂèØ‰ª•ÂÆûÁé∞ÊûÅÂ∞èÁöÑÁ©∫Èó¥ÂÆåÊàêÂØπÂ§ßÈáèÁî®Êà∑‰ø°ÊÅØÁöÑÁªüËÆ°„ÄÇ Âú∞ÁêÜÂùêÊ†áÊúçÂä°]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÂü∫Êú¨Êï∞ÊçÆÁªìÊûÑÂíåÊìç‰Ωú]]></title>
    <url>%2F2019%2F01%2F29%2Fredis%2FRedis%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨‰∫åÁØáÊñáÁ´†ÔºåÊú¨Êñá‰∏ªË¶Å‰ªãÁªçredisÂ¶Ç‰ΩïÂêØÂä®Ôºå‰ª•ÂèäÂü∫Êú¨ÁöÑÈîÆÂëΩ‰ª§Âíå‰∫îÁßçÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÊìç‰Ωú„ÄÇÈÉ®ÂàÜÂõæÁâáÂèØËÉΩÁúã‰∏çÊ∏ÖÊ•öÔºåÂèØ‰ª•ÊãñÂà∞Êñ∞Á™óÂè£ÊâìÂºÄ„ÄÇ ‰∏Ä„ÄÅÂêØÂä®ÊñπÂºè ÊàëÁöÑÁéØÂ¢ÉÊòØwindowsÔºåÈÇ£‰πàÁõ¥Êé•ËøõÂÖ•redisÁöÑËß£ÂéãÁõÆÂΩï‰∏≠ÔºåÂàÜÂà´ÊâßË°åredis-server.exeÂíåredis-cli.exe‰∏§‰∏™ÂèØÊâßË°åÁöÑÁ®ãÂ∫è„ÄÇ‰πüÂèØ‰ª•ÈÄöËøácmdÂêØÂä®Ôºö ‰∏çË¶ÅÁõ¥Êé•Áî®crtl+CÂÖ≥Èó≠serverÔºåÂú®linux‰∏ãÔºåÁõ¥Êé•ÂÅúÊéâserverÁöÑËØùÔºå‰ºöÂØºËá¥Êï∞ÊçÆÁöÑ‰∏¢Â§±„ÄÇÊ≠£Á°ÆÁöÑÂÅöÊ≥ïÊòØÂú®ÂÆ¢Êà∑Á´ØÊâßË°å redis-cli.exe shutdown ËøòÂèØ‰ª•ÊåáÂÆöÁ´ØÂè£ÂêØÂä®Ôºö./redis-server.exe --port 6380 ÈÇ£‰πàÂØπÂ∫îÂÆ¢Êà∑Á´ØËøûÊé•‰πüË¶ÅÊåáÂÆöÁõ∏Â∫î ÁöÑÁ´ØÂè£ÊâçËÉΩËøûÊé•„ÄÇÂÖ≥Èó≠ÊúçÂä°Á´Ø‰πüË¶ÅÊåáÂÆöÁõ∏Â∫îÁöÑÁ´ØÂè£ÊâçË°åÔºö -hÊåáÂÆöËøúÁ®ãredisÁöÑip ÈÄöËøáÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®,ÂèØ‰ª•Âú®‰∏ãÈù¢Ëøô‰∏™Êñá‰ª∂‰∏≠ÊåáÂÆöÁ´ØÂè£Âè∑Ôºö ÁªìÂêàÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®: ËøòÂèØ‰ª•ËÆæÁΩÆÂØÜÁ†ÅÔºö ÈÇ£‰πàÂÆ¢Êà∑Á´ØËøûÊé•Â∞±ÂøÖÈ°ªË¶ÅÂØÜÁ†ÅÈ™åËØÅ‰∫ÜÔºö ‰∫å„ÄÅÂëΩ‰ª§ 1„ÄÅÂü∫Á°ÄÂëΩ‰ª§ info:Êü•ÁúãÁ≥ªÁªü‰ø°ÊÅØ select (0-15)Ôºåredis‰∏ÄÂÖ±Êúâ16‰∏™Â∑•‰ΩúÂå∫Èó¥Ôºå‰∏ÄËà¨ÈªòËÆ§‰ªé0ÂºÄÂßãÔºåÂà∞15. flushdbÔºöÊ∏ÖÁ©∫ÂΩìÂâçÈÄâÊã©ÁöÑÁ©∫Èó¥ flushallÔºöÊ∏ÖÁ©∫ÊâÄÊúâ dbsizeÔºöÂΩìÂâçÁ©∫Èó¥ÈáåÈù¢key-valueÈîÆÂÄºÂØπÁöÑÊï∞ÁõÆ saveÔºö‰∫∫Â∑•ÂÆûÁé∞redisÁöÑÊåÅ‰πÖÂåñ quitÔºöÈÄÄÂá∫ 2„ÄÅÈîÆÂëΩ‰ª§ del keyÊàêÂäüËøîÂõû1ÔºåÂ§±Ë¥•ËøîÂõû0. exits key ttlÂíåexpire type key Êü•ÁúãkeyÁöÑÁ±ªÂûã randomkey: rename oldkey newkey Â¶ÇÊûúÊòØÈáçÂëΩÂêç‰∏∫Â∑≤ÁªèÂ≠òÂú®ÁöÑkeyÂë¢Ôºü renamenx: ‰∏â„ÄÅredisÊï∞ÊçÆÁªìÊûÑ 1„ÄÅStringÂ≠óÁ¨¶‰∏≤ setex&amp;psetex getrange&amp;getset mset&amp;mget&amp;strlen setnx&amp;msetnx Êï∞ÂÄºÊìç‰Ωú 2„ÄÅhash 3„ÄÅlist 4„ÄÅset 5„ÄÅsorted set]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàùÊ≠•ËÆ§ËØÜRedis]]></title>
    <url>%2F2019%2F01%2F29%2Fredis%2F%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86Redis%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫redisÂ≠¶‰π†Á¨îËÆ∞ÁöÑÁ¨¨‰∏ÄÁØáÊñáÁ´†Ôºå‰∏ªË¶Å‰ªéÊÑüÊÄßÂ±ÇÈù¢Êù•ËÆ§ËØÜ‰∏Ä‰∏ãËøô‰∏™ÂºÄÂèë‰∏≠ÁöÑÂÆ†ÂÑøÔºåÊó†ËÆ∫ÊòØ‰ªÄ‰πàÂ∫îÁî®ÔºåÂè™Ë¶ÅÊúâÁÇπÁî®Êà∑ÈáèÁöÑÔºå‰∏ç‰∏äredisÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ‰Ωú‰∏∫ÂΩì‰ªäÊúÄ‰ºòÁßÄÁöÑÁºìÂ≠ò‰∏≠Èó¥‰ª∂ÔºåÊ≤°ÊúâÁêÜÁî±‰∏çÂéªÊ∑±ÂÖ•‰∫ÜËß£ÂÆÉÔºÅ ‰∏Ä„ÄÅredisÊòØ‰ªÄ‰πà redisÂæàÂø´ÔºåÂÆòÊñπÂÆ£Áß∞QPS(ÊØèÁßíÊü•ËØ¢Áéá)Ëææ10‰∏á„ÄÇ RedisÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑ‰ΩøÁî®ANSI CËØ≠Ë®ÄÁºñÂÜô„ÄÅÊîØÊåÅÁΩëÁªú„ÄÅÂçïËøõÁ®ãÂçïÁ∫øÁ®ã„ÄÅÂèØÂü∫‰∫éÂÜÖÂ≠ò‰∫¶ÂèØÊåÅ‰πÖÂåñ„ÄÅ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑkey-valueÊï∞ÊçÆÂ∫ì„ÄÇ ÁÆÄËÄåË®Ä‰πãÔºåÂ∞±ÊòØ‰∏Ä‰∏™ÁºìÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂü∫‰∫éÂÜÖÂ≠òÔºå‰πüÂèØ‰ª•ÊåÅ‰πÖÂåñÔºåÈÄüÂ∫¶Ë¥ºÂø´ÔºåÂá†‰πéÊâÄÊúâ‰∫íËÅîÁΩëÂÖ¨Âè∏ÈÉΩÂú®‰ΩøÁî®„ÄÇ ÊúâÁöÑÂàùÂ≠¶ËÄÖÂèØËÉΩÁúãÂà∞Êï∞ÊçÆÂ∫ìËøô‰∏™Â≠óÁúºÔºåÂ∞±Êää‰ªñÂΩíÁ±ª‰∫émysql‰πãÁ±ªÔºåÂÖ∂ÂÆû‰∏çÊòØÔºåmysqlÊòØ‰∏ÄÁßçÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºåÊòØÂ≠òÂú®Á£ÅÁõò‰∏≠ÁöÑ„ÄÇÊ†∏ÂøÉÁöÑÊï∞ÊçÆÊòØ‰∏ÄÂÆöË¶ÅËêΩÂú∞Âà∞mysql‰πãÁ±ªÁöÑÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ„ÄÇredisÂÖ∂ÂÆû‰ΩøÁî®ÊúÄÂ§öÁöÑÂäüËÉΩÊòØÁºìÂ≠òÔºåÊó¢ÁÑ∂ËÉΩÂ≠ò‰∏úË•øÔºåÈÇ£‰πàÂøÖÁÑ∂‰πüÊúâÊï∞ÊçÆÂ∫ìÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÊúâÂèØËÉΩ‰ºöÈÄ†ÊàêÊï∞ÊçÆÁöÑÁº∫Â§±„ÄÇÊâÄ‰ª•ÔºåÊï∞ÊçÆ‰∏ÄÂÆöÊòØË¶ÅËêΩÂÖ•Êï∞ÊçÆÂ∫ìÊâç‰øùÈô©ÔºåredisÂèØ‰ª•‰Ωú‰∏∫ÁºìÂ≠òÔºåÁºìÂ≠òÁÉ≠ÁÇπÊï∞ÊçÆÊàñËÄÖÂè™ËØªÊï∞ÊçÆÔºåÊèêÈ´òÊÄßËÉΩÂπ∂‰øùÊä§Êï∞ÊçÆÂ∫ì„ÄÇ ‰∫å„ÄÅ‰∏∫‰ªÄ‰πàË¶ÅÁî®redis Â•Ω‰∫ÜÔºåÊàë‰ª¨Â∑≤ÁªèÁü•ÈÅìÂÆÉÊòØ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑÁºìÂ≠ò‰∏≠Èó¥‰ª∂„ÄÇÈÇ£‰πàÂøÖÁÑ∂‰∏ÄÂ§ßÂäüËÉΩÊòØ‰Ωú‰∏∫ÁºìÂ≠ò‰ΩøÁî®„ÄÇÈÇ£‰∏∫‰ªÄ‰πàË¶ÅÁî®ÁºìÂ≠òÂë¢ÔºüÁõ¥Êé•‰ªéÊï∞ÊçÆÂ∫ìÊü•‰∏çÂ∞±Ë°å‰∫ÜÁ†ÅÔºü Âú®ÂÆûÈôÖÁöÑ‰∏öÂä°Âú∫ÊôØ‰∏≠ÔºåÁî®Êà∑Èáè‰∏Ä‰∏äÊù•ÔºåÊï∞ÊçÆÂ∫ìÊòØÂêÉ‰∏çÊ∂àÁöÑ„ÄÇÊï∞ÊçÆÂ∫ìÊòØÊÄßËÉΩÁöÑ‰∏ÄÂ§ßÁì∂È¢àÔºåÂ¶ÇÊûú‰∏çÈááÂèñÊé™ÊñΩÔºåÁî®Êà∑ÁöÑÊìç‰ΩúÂ∞ÜÂç°Âú®Êï∞ÊçÆÂ∫ìÂ§ÑÁêÜËøô‰∏ÄÂùóÔºåÊúÄÁªàÂèØËÉΩÂØºËá¥‰∏çÂèØÁî®„ÄÇ ÈÇ£‰πàÔºåÊ≠§Êó∂ÔºåÂä†ÂÖ•ÁºìÂ≠òÔºåÊØîÂ¶ÇÂïÜÂüéÈ¶ñÈ°µÊúâÂæàÂ§öÂæàÂ§öÂÜÖÂÆπÔºåËøô‰∫õÂÜÖÂÆπ‰∏çÂèØËÉΩÁªèÂ∏∏ÂèòÂåñÔºåËá≥Â∞ë‰πüË¶Å‰∏§‰∏âÂ§©ÂêßÔºüÊâÄ‰ª•ÔºåÂèØ‰ª•Â∞ÜËøô‰∫õÊï∞ÊçÆÊîæÂà∞redis‰∏≠ÔºåÁî®Êà∑ËøõÂïÜÂüé‰πãÂêéÔºåÊï∞ÊçÆÁõ¥Êé•‰ªéredis‰∏≠Ëé∑ÂèñÂç≥ÂèØ„ÄÇÈÄüÂ∫¶ÊûÅÂø´ÔºåÊèêÈ´ò‰∫ÜÁî®Êà∑ÁöÑ‰ΩìÈ™å„ÄÇ Êó¢ÁÑ∂ÊòØÁºìÂ≠òÔºåÈÇ£‰πàÂøÖÂÆö‰ºöÂ≠òÂú®Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•ÁºìÂ≠òÊúÄÈÄÇÂêà‰∫éËØªÂ§öÂÜôÂ∞ëÁöÑÊÉÖÂÜµÔºåÂΩìÁÑ∂Âï¶ÔºåË¶Å‰øÆÊîπÁºìÂ≠òËÇØÂÆöÊòØÂèØ‰ª•ÁöÑÔºå‰ΩÜÊòØË¶ÅÊ≥®ÊÑèÁÉ≠ÁÇπkeyÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇÂæÆÂçöÊúÄÁÅ´ÁöÑ‰∏ÄÁâáÊñ∞ÈóªÔºåÊ≠§Êó∂ÊúâÂá†Áôæ‰∏á‰∫∫ÂÜçÁúãÔºå‰Ω†Âç¥Ë¶Å‰øÆÊîπ‰∏Ä‰∏ãÔºåËÇØÂÆöÊòØË¶ÅÊ≥®ÊÑèÁÇπ‰ªÄ‰πà‰∏úË•øÊâçË°åÁöÑÔºåÂêéÁª≠ÁöÑÊñáÁ´†‰ºöËÆ≤Âà∞Â¶Ç‰ΩïÂ§ÑÁêÜÁÉ≠ÁÇπkey‰øÆÊîπÁöÑÈóÆÈ¢ò„ÄÇ ‰∏â„ÄÅRedis‰∏éÂÖ∂‰ªñkey-valueÂ≠òÂÇ®Êúâ‰ªÄ‰πà‰∏çÂêå ËøôÈáåÂÖàÁÆÄÂçïËØ¥ËØ¥ÔºåÂêéÈù¢‰ºöÊúâÊñáÁ´†ËØ¶ÁªÜÊØî‰ª∑‰∏Ä‰∏ã„ÄÇ Â§öÊ†∑ÁöÑÊï∞ÊçÆÁªìÊûÑÂíåÂéüÂ≠êÊÄßÊìç‰Ωú RedisÊúâÁùÄÊõ¥‰∏∫Â§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÂπ∂‰∏îÊèê‰æõÂØπ‰ªñ‰ª¨ÁöÑÂéüÂ≠êÊÄßÊìç‰ΩúÔºåËøôÊòØ‰∏Ä‰∏™‰∏çÂêå‰∫éÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑËøõÂåñË∑ØÂæÑ„ÄÇredis‰∏≠ÁöÑÂçï‰∏™ÂëΩ‰ª§ÈÉΩÊòØÂéüÂ≠êÊÄßÁöÑÔºå‰ªÄ‰πàÊòØÂéüÂ≠êÊÄßÔºåÂ∞±ÊòØËØ•ÂëΩ‰ª§‰∏çÂèØÂàÜÂâ≤„ÄÇ ËøêË°å‰∫éÂÜÖÂ≠ò+ÊåÅ‰πÖÂåñ‰∫éÁ£ÅÁõò RedisËøêË°åÂú®ÂÜÖÂ≠ò‰∏≠‰ΩÜÊòØÂèØ‰ª•ÊåÅ‰πÖÂåñÂà∞Á£ÅÁõòÔºåÊâÄ‰ª•Âú®ÂØπ‰∏çÂêåÊï∞ÊçÆÈõÜËøõË°åÈ´òÈÄüËØªÂÜôÊó∂ÈúÄË¶ÅÊùÉË°°ÂÜÖÂ≠òÔºåÂõ†‰∏∫Êï∞ÊçÆÈáè‰∏çËÉΩÂ§ß‰∫éÁ°¨‰ª∂ÂÜÖÂ≠ò„ÄÇÂè¶‰∏Ä‰∏™‰ºòÁÇπÊòØÔºå Áõ∏ÊØîÂú®Á£ÅÁõò‰∏äÁõ∏ÂêåÁöÑÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂú®ÂÜÖÂ≠ò‰∏≠Êìç‰ΩúËµ∑Êù•ÈùûÂ∏∏ÁÆÄÂçïÔºåËøôÊ†∑RedisÂèØ‰ª•ÂÅöÂæàÂ§öÂÜÖÈÉ®Â§çÊùÇÊÄßÂæàÂº∫ÁöÑ‰∫ãÊÉÖ„ÄÇ ÂêåÊó∂ÔºåÂú®Á£ÅÁõòÊ†ºÂºèÊñπÈù¢‰ªñ‰ª¨ÊòØÁ¥ßÂáëÁöÑ‰ª•ËøΩÂä†ÁöÑÊñπÂºè‰∫ßÁîüÁöÑÔºåÂõ†‰∏∫‰ªñ‰ª¨Âπ∂‰∏çÈúÄË¶ÅËøõË°åÈöèÊú∫ËÆøÈóÆ„ÄÇ Ê≥®ÔºöÊàë‰ª¨Ë¶ÅÁü•ÈÅìÔºåÂØπ‰∫éÁ£ÅÁõòÁöÑÈ°∫Â∫èËÆøÈóÆÈÄüÂ∫¶ÊòØËøúÂ§ß‰∫éÈöèÊú∫ËÆøÈóÆÁöÑ„ÄÇËøôÁßçÂú®Á°¨Áõò‰∏äÈ°∫Â∫èËøΩÂä†ÊïàÁéáÂæàÈ´ò„ÄÇ Âõõ„ÄÅredisÁâπÁÇπ ÈÄüÂ∫¶Âø´Ôºö Âü∫‰∫éÂÜÖÂ≠ò,ËøôÊòØÂø´ÁöÑÊúÄ‰∏ªË¶ÅÂéüÂõ†„ÄÇ ÊåÅ‰πÖÂåñÔºö ÂèØ‰ª•ÂêåÊ≠•ÊàñÂºÇÊ≠•‰øùÂ≠òÂà∞Á£ÅÁõò‰∏≠ Â§öÁßçÊï∞ÊçÆÁªìÊûÑÔºö Èô§‰∫Ü‰∫îÁßçÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåËøòÊîØÊåÅ‰ΩçÂõæ„ÄÅHyperLogLogÔºåGEOÁ≠â ÊîØÊåÅÂ§öÁßçÁºñÁ®ãËØ≠Ë®ÄÂÆ¢Êà∑Á´ØÔºö javaÔºåpythonÔºårubyÔºåLua‚Ä¶ ÂäüËÉΩ‰∏∞ÂØåÔºö ÂèØ‰ª•ÂÆûÁé∞ÂèëÂ∏É-ËÆ¢ÈòÖÔºåÊîØÊåÅ‰∫ãÂä°„ÄÅLuaËÑöÊú¨ ÁÆÄÂçïÔºö ‰∏ç‰æùËµñ‰∏éÂ§ñÈÉ®Â∫ì„ÄÅÂçïÁ∫øÁ®ãÊ®°Âûã ‰∏ª‰ªéÂ§çÂà∂Ôºö ‰∏ªÊúçÂä°Âô®ÂêåÊ≠•Êï∞ÊçÆÂà∞‰ªéÊúçÂä°Âô®ÔºåÊòØÈ´òÂèØÁî®ÁöÑÂü∫Á°Ä È´òÂèØÁî®„ÄÅÂàÜÂ∏ÉÂºèÔºö È´òÂèØÁî®Ôºöredis-Sentinel(v2.8ÁâàÊú¨)ÔºõÂàÜÂ∏ÉÂºèÔºöredis-cluster(v3.0ÁâàÊú¨) ‰∫î„ÄÅredisÂÖ∏ÂûãÂ∫îÁî®Âú∫ÊôØ ÁºìÂ≠òÁ≥ªÁªüÔºöËøô‰∏™Â∞±‰∏çÂ§öËØ¥‰∫ÜÔºåredis‰Ωú‰∏∫È´òÈÄüÁºìÂ≠òÊòØÂÖ∂‰∏ªË¶ÅÂ≠òÂú®‰ª∑ÂÄº„ÄÇ ËÆ°Êï∞Âô®ÔºöÂõ†‰∏∫ÊòØÂéüÂ≠êÊìç‰Ωúincr+ÂçïÁ∫øÁ®ãÔºå‰Ωú‰∏∫ËÆ°Êï∞Âô®Ê∞∏Ëøú‰∏ç‰ºöÂá∫Èîô Ê∂àÊÅØÈòüÂàóÁ≥ªÁªüÔºöÊï∞ÊçÆÁªìÊûÑlistÂèØ‰ª•ÂÆûÁé∞ËøôÁßçÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°ÂºèÁöÑÊ∂àÊÅØÈòüÂàó„ÄÇ ÊéíË°åÊ¶úÔºöÊúâÂ∫èÈõÜÂêàsorted setÂ∞±ÂèØ‰ª•ÂÆûÁé∞ Á§æ‰∫§ÁΩëÁªúÔºöredis‰∏éÁ§æ‰∫§ÁΩëÁªúÂ∞±ÊòØ‰∏ÄÂÆ∂ÔºåÈùûÂ∏∏Êñπ‰æøÁî®setÂ∞±ËÉΩÂÆûÁé∞ËØ∏Â¶ÇÂÖ±ÂêåÂ•ΩÂèãËøô‰∫õÂäüËÉΩ„ÄÇ ÂÖ≠„ÄÅredis‰ºòÂäø ÁºìÂ≠òÁÆ°ÁêÜÔºöÂèØ‰ª•Âú®ÂøÖË¶ÅÊó∂Â∞ÜÊó†ÊïàÁöÑÊóßÊï∞ÊçÆ‰ªéÂÜÖÂ≠ò‰∏≠Âà†Èô§Ôºå‰∏∫Êñ∞Êï∞ÊçÆËÖæÂá∫Êñ∞ÁöÑÁ©∫Èó¥ Êèê‰æõÊõ¥Â§ßÁöÑÁÅµÊ¥ªÊÄßÔºöredisÊîØÊåÅÂ§öÁßçÁ±ªÂûãÔºåÂπ∂‰∏îÈááÁî®key-value ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÔºåkeyÂíåvalueÁöÑÂ§ßÂ∞èÈôêÂà∂ÈÉΩÊòØ512Mb,‰∏éÁºñÁ†ÅÊó†ÂÖ≥ÔºåÊâÄ‰ª•Êï∞ÊçÆÂÆâÂÖ®„ÄÇ‰ΩÜÊòØmemcachedÈôêÂà∂keyÊúÄÂ§ß‰∏∫250Â≠óËäÇÔºåvalue‰∏∫1MBÔºåÂÜµ‰∏îÂè™ÊîØÊåÅStringÁ±ªÂûã„ÄÇ redisÊèê‰æõ‰∏ª‰ªéÂ§çÂà∂ÔºöÂÆûÁé∞È´òÂèØÁî®ÁöÑcacheÁ≥ªÁªüÔºåÊîØÊåÅÈõÜÁæ§‰∏≠Â§ö‰∏™ÊúçÂä°Âô®‰πãÈó¥ÁöÑÊï∞ÊçÆÂêåÊ≠•„ÄÇ Êï∞ÊçÆÊåÅ‰πÖÂåñÔºöredisÂèØ‰ª•ÈÄöËøá‰∏§ÁßçÊñπÂºèÂ∞ÜÊï∞ÊçÆËøõË°åÊåÅ‰πÖÂåñÔºå‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äËßÑÈÅøÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∏çÁ®≥ÂÆöÁöÑÈóÆÈ¢òÔºå‰πüÂèØ‰ª•Âú®ÈáçÂêØÊúçÂä°Âô®Êó∂ÊúÄÂø´ÁöÑÊÅ¢Â§çÁºìÂ≠ò‰∏≠ÊâÄÈúÄÁöÑÊï∞ÊçÆÔºåÊèêÈ´ò‰∫ÜÊïàÁéáÁöÑÂêåÊó∂ÂáèËΩª‰∫Ü‰∏ªÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÂºÄÈîÄ„ÄÇ ‰∏é‰º†ÁªüÁöÑMemcachedÁõ∏ÊØîÔºå‰ºòÂäøËøòÊòØÂæàÂ§ßÁöÑÔºå‰∏§ËÄÖÁöÑÂÖ∑‰ΩìÂØπÊØîÊàë‰ºöÂú®ÂêéÁª≠ÁöÑÊñáÁ´†‰∏≠ËØ¶ÁªÜËØ¥Êòé„ÄÇËøôÈáåÊ≥®ÊÑèÂ≠òÂú®Âç≥ÂêàÁêÜÔºåMemcached‰πüÊúâ‰∏çÂèØÊõø‰ª£ÁöÑÈÄÇÁî®Âú∫ÊôØÔºö Â≠òÂÇ®‰∏Ä‰∫õÁ≤íÂ∫¶ÊØîËæÉÂ∞èÁöÑÈùôÊÄÅÊï∞ÊçÆÔºåÊØîÂ¶Ç‰∏Ä‰∫õhtmlÁâáÊÆµÔºåMemcached‰æøÊòØÊàë‰ª¨Êõ¥Â•ΩÁöÑÈÄâÊã©„ÄÇÁõ∏ÂØπ‰∫éredisËÄåË®ÄÔºåMemcachedÁöÑÂÖÉÊï∞ÊçÆmetadataÊõ¥Â∞è‰∫õÔºåÊâÄ‰ª•Áõ∏ÂØπÊù•ËÆ≤ÂØπ‰∫éÊï∞ÊçÆÂ≠òÂÇ®ÁÆ°ÁêÜÁöÑÊÄßËÉΩÊõ¥È´òÔºåÈ¢ùÂ§ñÂºÄÈîÄÊõ¥Â∞è„ÄÇ MemcachedÁöÑÁâπÁÇπÔºöMemcachedÂîØ‰∏ÄÊîØÊåÅÁöÑÊï∞ÊçÆÁ±ªÂûãÊòØString,ÊâÄ‰ª•Êõ¥ÈÄÇÂêàÂ≠òÂÇ®Âè™ËØªÊï∞ÊçÆÔºåÂõ†‰∏∫Â≠óÁ¨¶‰∏≤Âπ∂‰∏ç‰ºöÂõ†‰∏∫È¢ùÂ§ñÁöÑÂ§ÑÁêÜÈÄ†ÊàêÈ¢ùÂ§ñÁöÑÂºÄÈîÄ„ÄÇÊØïÁ´üMemcachedÊØèÊ¨°Êõ¥Êñ∞‰∏Ä‰∏™ÂØπË±°Êó∂ÔºåÈÉΩÈúÄË¶ÅÈáçÂ§çÊâßË°å‰∏ãÈù¢ÁöÑÊìç‰ΩúÔºöËé∑ÂèñÊï¥‰∏™Â≠óÁ¨¶‰∏≤-&gt;ÂèçÂ∫èÂàóÂåñ‰∏∫ÂØπË±°-&gt;‰øÆÊîπÂÖ∂‰∏≠ÁöÑÂÄº-&gt;ÂÜçÊ¨°Â∫èÂàóÂåñËØ•ÂØπË±°-&gt;Âú®ÁºìÂ≠ò‰∏≠Â∞ÜÊï¥‰∏™Â≠óÁ¨¶‰∏≤ÊõøÊç¢‰∏∫Êñ∞Â≠óÁ¨¶‰∏≤„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÊõ¥Êñ∞Â≠òÂÇ®Êï∞ÊçÆÂ∞±‰ºöÊúâÊõ¥È´òÁöÑÊ∂àËÄóÔºåÂèØËÉΩÂ∞±‰∏çÊòØÊàë‰ª¨ÁöÑÊúÄ‰Ω≥ÈÄâÊã©‰∫Ü„ÄÇ ‰∏É„ÄÅÊÄªÁªì Âè™Ë¶ÅËÆ∞‰Ωèredis‰∏â‰∏™ÂÖ≥ÈîÆÂ≠óÔºöÂø´„ÄÅÊåÅ‰πÖÂåñ„ÄÅÈ´òÂèØÁî®ÂíåÂàÜÂ∏ÉÂºè]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âú∞ÁêÜ‰ΩçÁΩÆÈôÑËøëÊü•ËØ¢ÁöÑGEOHASHËß£ÂÜ≥ÊñπÊ°à]]></title>
    <url>%2F2019%2F01%2F29%2Fmiscellany%2F12%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E9%99%84%E8%BF%91%E6%9F%A5%E8%AF%A2%E7%9A%84GEOHASH%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[Âú∞ÁêÜ‰ΩçÁΩÆÈôÑËøëÊü•ËØ¢ÁöÑGEOHASHËß£ÂÜ≥ÊñπÊ°à 1.ÈúÄÊ±ÇÂú∫ÊôØ Áé∞‰ªä‰∫íËÅîÁΩëÁ°ÆÂÆû‰ªéÊñπÊñπÈù¢Èù¢ÂΩ±ÂìçÊàë‰ª¨ÁöÑÁîüÊ¥ª„ÄÇÁé∞Âú®Êàë‰ª¨ÂèØ‰ª•Ë∂≥‰∏çÂá∫Êà∑Â∞±ËÉΩ‰π∞Âà∞Êàë‰ª¨ÂøÉ‰ª™ÁöÑË°£ÊúçÔºåÊâæÂà∞ÈôÑËøëÁöÑÁæéÈ£ü„ÄÇÂΩìÊàë‰ª¨ÁÇπÂºÄ‰∏Ä‰∏™Â§ñÂçñÁöÑappÂ∞±ËÉΩÁúãÂà∞Ëá™Â∑±ÈôÑËøëÁöÑÈ§êÂéÖÔºåÈÇ£Êàë‰ª¨ÊúâÊ≤°ÊúâÊÉ≥ËøáËøôÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÂë¢Ôºü 2.Â∞ùËØïËß£ÂÜ≥ È¶ñÂÖàÊàë‰ª¨ËÉΩÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÊääÊâÄÊúâÈ§êÂéÖÁöÑÁªèÁ∫¨Â∫¶Â≠ò‰∏ãÊù• ÁÑ∂ÂêéÂΩìÁî®Êà∑ÈÄâÊã©ÈôÑËøëÈ§êÂéÖÊó∂ Êàë‰ª¨ÂÖàËé∑ÂèñÁî®Êà∑ÁöÑÁªèÁ∫¨Â∫¶ÔºåÁÑ∂ÂêéÂà∞Êï∞ÊçÆÂ∫ì‰∏≠Êü•Âá∫ÊâÄÊúâÁöÑÁªèÁ∫¨Â∫¶Ôºå‰æùÊ¨°ËÆ°ÁÆóÂÆÉ‰ª¨ÂíåÁî®Êà∑Èó¥ÁöÑË∑ùÁ¶ª„ÄÇ ÊúÄÂêéÊ†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑË∑ùÁ¶ªËåÉÂõ¥ËøáÊª§Âá∫ÂêàÈÄÇÁöÑÈ§êÂéÖÔºåÂπ∂Ê†πÊçÆË∑ùÁ¶ªÂÅö‰∏Ä‰∏™ÂçáÂ∫èÊéíÂàó„ÄÇ ËøôÊ†∑Ë≤å‰ººËÉΩÊü•Âá∫ÈôÑËøëÁöÑÈ§êÂéÖÔºå‰ΩÜÊòØÈ§êÂéÖÁöÑÊï∞ÈáèËøô‰πàÂ§öÔºåÁõ¥Êé•ÂÖ®Êü•Âá∫Êù•ÂÜÖÂ≠ò‰πüË¶ÅÁàÜÊéâÔºåÂç≥‰ΩøÂàÜÊâπÂ§ÑÁêÜËÆ°ÁÆóÈáè‰πüÂçÅÂàÜÂ§ß„ÄÇËøôÊ†∑Áî®Êà∑Á≠âÂæÖÁöÑÊó∂Èó¥Â∞±‰ºöÁâπÂà´Èïø„ÄÇÈÇ£Êúâ‰ªÄ‰πàÂäûÊ≥ïËÉΩÂáèÂ∞ëÊàë‰ª¨ÁöÑËÆ°ÁÆóÈáèÂë¢Ôºü ÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÊàë‰ª¨Â∫îËØ•Âè™ËÆ°ÁÆóÁî®Êà∑ÂÖ≥ÂøÉÁöÑÈÇ£‰∏ÄÁâáÊï∞ÊçÆÔºåËÄå‰∏çÊòØËÆ°ÁÆóÊâÄÊúâÁöÑ„ÄÇ‰æãÂ¶ÇÁî®Êà∑Âú®Âåó‰∫¨ÔºåÈÇ£ÂÆåÂÖ®Ê≤°ÂøÖË¶ÅËÆ°ÁÆóÊµ∑ÂçóÔºåÈªëÈæôÊ±üÔºåÊñ∞ÁñÜÔºåÊµôÊ±üÁ≠âÂÖ∂ÂÆÉÂú∞Âå∫ÁöÑÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ËÉΩÂø´ÈÄüÂÆö‰ΩçÂà∞Âåó‰∫¨ÁîöËá≥Êüê‰∏™Âå∫ÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑËÆ°ÁÆóÈáèÂ∞ÜÂ§ßÂ§ßÂáèÂ∞ë„ÄÇÊàë‰ª¨ÂèëÁé∞ËøôÂÖ∂ÂÆûÂ∞±ÊòØÁ¥¢ÂºïÁöÑÂäüËÉΩÔºå‰ΩÜÊòØMySQLÂØπËøôÁßç‰∫åÁª¥ÁöÑÂú∞ÁêÜ‰ΩçÁΩÆÁöÑÁ¥¢ÂºïÊîØÊåÅÂπ∂‰∏çÂèãÂ•ΩÔºàmongodbÊúâÁõ¥Êé•ÁöÑÂú∞ÁêÜ‰ΩçÁΩÆÁ¥¢ÂºïÔºâÔºåÂÆÉÂØπ‰∏ÄÁª¥ÁöÑÂÉèÂ≠óÁ¨¶‰∏≤ËøôÊ†∑ÁöÑÊîØÊåÅÂæàÂ•Ω„ÄÇÈÇ£Â¶ÇÊûúÊàë‰ª¨ÁöÑÊï∞ÊçÆÂú®MySQL‰∏≠ÔºåÊúâÊ≤°Êúâ‰ªÄ‰πàÊñπÊ≥ïËÉΩÂ∞ÜÊàë‰ª¨ÁöÑ‰∫åÁª¥ÂùêÊ†áËΩ¨Êç¢‰∏∫‰∏ÄÁßçÂèØÊØîËæÉÁöÑÂ≠óÁ¨¶‰∏≤Âë¢ÔºüËøôÂ∞±ÊòØÊàë‰ª¨‰ªäÂ§©Ë¶Å‰ªãÁªçÁöÑgeohashÁÆóÊ≥ï„ÄÇ 3.Âü∫Êú¨ÊÄùÊÉ≥ geohashÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÂ∞Ü‰∏Ä‰∏™Âú∞ÁêÜÂùêÊ†áËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ÂèØÊØîËæÉÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÁÆóÊ≥ï„ÄÇ‰∏çËøáÁîüÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÁöÑÊòØ‰∏Ä‰∏™Áü©ÂΩ¢ÁöÑËåÉÂõ¥ÔºåÂπ∂‰∏çÊòØ‰∏Ä‰∏™ÁÇπ„ÄÇ ÊØîÂ¶ÇË•ø‰∫åÊóóÂú∞ÈìÅÈôÑËøëËøô‰∏ÄÁâáÁü©ÂΩ¢Âå∫ÂüüÂ∞±ÂèØ‰ª•Áî®wx4eyu82Ëøô‰∏™Â≠óÁ¨¶‰∏≤Ë°®Á§∫ÔºåÂπ∂‰∏îË∂äÈù†ÂâçÁöÑÁºñÁ†ÅË°®Á§∫È¢ùËåÉÂõ¥Ë∂äÂ§ßÔºåÊØîÂ¶Ç‰∏≠ÂõΩÁªùÂ§ßÈÉ®ÂàÜÂú∞Âå∫ÂèØ‰ª•Áî®wËøô‰∏™Â≠óÊØçË°®Á§∫ÁöÑÁü©ÂΩ¢Âå∫ÂüüÂÜÖ„ÄÇÂÉèwx4eyu82Ë°®Á§∫ÁöÑÂå∫Âüü‰∏ÄÂÆöÂú®wx4eË°®Á§∫ÁöÑÂå∫ÂüüËåÉÂõ¥ÂÜÖ„ÄÇÂà©Áî®Ëøô‰∫õÁâπÊÄßÊàë‰ª¨Â∞±ÂèØ‰ª•ÂÆûÁé∞ÈôÑËøëÈ§êÂéÖÁöÑÂäüËÉΩ‰∫ÜÔºåÊØîÂ¶ÇÊàë‰ª¨Â∏åÊúõÊü•ÁúãË•ø‰∫åÊóóÂú∞ÈìÅÈôÑËøëÁöÑÈ§êÂéÖÂ∞±ÂèØ‰ª•ËøôÊ†∑Êü•ËØ¢Ôºöselect * from table where geohash like 'wx4eyu82%'; ËøôÊ†∑Â∞±ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÔºåÂø´ÈÄüÊü•ËØ¢Âá∫Áõ∏ÂÖ≥È§êÂéÖÁöÑ‰ø°ÊÅØ‰∫Ü„ÄÇÂπ∂‰∏îÊàë‰ª¨ËøòÂèØ‰ª•Áî®wx4eyu82‰∏∫keyÔºåÈ§êÂéÖ‰ø°ÊÅØ‰∏∫valueÂÅöÁºìÂ≠ò„ÄÇ ÈÄöËøá‰∏äÈù¢ÁöÑ‰ªãÁªçÊàë‰ª¨Áü•ÈÅì‰∫ÜGeoHashÂ∞±ÊòØ‰∏ÄÁßçÂ∞ÜÁªèÁ∫¨Â∫¶ËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤ÁöÑÊñπÊ≥ïÔºåÂπ∂‰∏î‰ΩøÂæóÂú®Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÂ≠óÁ¨¶‰∏≤ÂâçÁºÄÂåπÈÖçË∂äÂ§öÁöÑË∑ùÁ¶ªË∂äËøë. 4.GeoHashÁÆóÊ≥ïÁöÑÊ≠•È™§ È¶ñÂÖàÊàë‰ª¨Â∞ÜÁªèÂ∫¶ÂíåÁ∫¨Â∫¶ÈÉΩÂçïÁã¨ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™‰∫åËøõÂà∂ÁºñÁ†Å ÂæóÂà∞ÁªèÂ∫¶ÂíåÁ∫¨Â∫¶ÁöÑ‰∫åËøõÂà∂ÁºñÁ†ÅÂêéÔºåÊàë‰ª¨ÊåâÁÖßÂ•áÊï∞‰ΩçÊîæÁ∫¨Â∫¶ÔºåÂÅ∂Êï∞‰∏∫ÊîæÁªèÂ∫¶ÁöÑËßÑÂàôÔºàÊàë‰ª¨ËøôÈáåÂ•áÊï∞ÂÅ∂Êï∞‰∏ãÊ†áÊòØ‰ªé0ÂºÄÂßãÔºâÂ∞ÜÂÆÉ‰ª¨ÂêàÊàê‰∏Ä‰∏™‰∫åËøõÂà∂ÁºñÁ†Å ÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜËøô‰∏™‰∫åËøõÂà∂ÁºñÁ†ÅËΩ¨Êç¢‰∏∫base32ÁºñÁ†Å ‰∏æ‰æã Âú∞ÁêÉÁ∫¨Â∫¶Âå∫Èó¥ÊòØ[-90,90]Ôºå ÂåóÊµ∑ÂÖ¨Âõ≠ÁöÑÁ∫¨Â∫¶ÊòØ39.928167ÔºåÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁÆóÊ≥ïÂØπÁ∫¨Â∫¶39.928167ËøõË°åÈÄºËøëÁºñÁ†Å: Âå∫Èó¥[-90,90]ËøõË°å‰∫åÂàÜ‰∏∫[-90,0),[0,90]ÔºåÁß∞‰∏∫Â∑¶Âè≥Âå∫Èó¥ÔºåÂèØ‰ª•Á°ÆÂÆö39.928167Â±û‰∫éÂè≥Âå∫Èó¥[0,90]ÔºåÁªôÊ†áËÆ∞‰∏∫1Ôºõ Êé•ÁùÄÂ∞ÜÂå∫Èó¥[0,90]ËøõË°å‰∫åÂàÜ‰∏∫ [0,45),[45,90]ÔºåÂèØ‰ª•Á°ÆÂÆö39.928167Â±û‰∫éÂ∑¶Âå∫Èó¥ [0,45)ÔºåÁªôÊ†áËÆ∞‰∏∫0Ôºõ ÈÄíÂΩí‰∏äËø∞ËøáÁ®ã39.928167ÊÄªÊòØÂ±û‰∫éÊüê‰∏™Âå∫Èó¥[a,b]„ÄÇÈöèÁùÄÊØèÊ¨°Ëø≠‰ª£Âå∫Èó¥[a,b]ÊÄªÂú®Áº©Â∞èÔºåÂπ∂Ë∂äÊù•Ë∂äÈÄºËøë39.928167Ôºõ Â¶ÇÊûúÁªôÂÆöÁöÑÁ∫¨Â∫¶xÔºà39.928167ÔºâÂ±û‰∫éÂ∑¶Âå∫Èó¥ÔºåÂàôËÆ∞ÂΩï0ÔºåÂ¶ÇÊûúÂ±û‰∫éÂè≥Âå∫Èó¥ÂàôËÆ∞ÂΩï1ÔºåËøôÊ†∑ÈöèÁùÄÁÆóÊ≥ïÁöÑËøõË°å‰ºö‰∫ßÁîü‰∏Ä‰∏™Â∫èÂàó1011100ÔºåÂ∫èÂàóÁöÑÈïøÂ∫¶Ë∑üÁªôÂÆöÁöÑÂå∫Èó¥ÂàíÂàÜÊ¨°Êï∞ÊúâÂÖ≥„ÄÇ ÈÄöËøá‰∏äËø∞ËÆ°ÁÆóÔºåÁ∫¨Â∫¶‰∫ßÁîüÁöÑÁºñÁ†Å‰∏∫10111 00011ÔºåÁªèÂ∫¶‰∫ßÁîüÁöÑÁºñÁ†Å‰∏∫11010 01011„ÄÇÂÅ∂Êï∞‰ΩçÊîæÁªèÂ∫¶ÔºåÂ•áÊï∞‰ΩçÊîæÁ∫¨Â∫¶ÔºåÊää2‰∏≤ÁºñÁ†ÅÁªÑÂêàÁîüÊàêÊñ∞‰∏≤Ôºö11100 11101 00100 01111„ÄÇ ÊúÄÂêé‰ΩøÁî®Áî®0-9„ÄÅb-zÔºàÂéªÊéâa, i, l, oÔºâËøô32‰∏™Â≠óÊØçËøõË°åbase32ÁºñÁ†ÅÔºåÈ¶ñÂÖàÂ∞Ü11100 11101 00100 01111ËΩ¨ÊàêÂçÅËøõÂà∂ÔºåÂØπÂ∫îÁùÄ28„ÄÅ29„ÄÅ4„ÄÅ15ÔºåÂçÅËøõÂà∂ÂØπÂ∫îÁöÑÁºñÁ†ÅÂ∞±ÊòØwx4g„ÄÇ 5.Áº∫Èô∑-geohashÁöÑËæπÁïåÈóÆÈ¢ò ÊØîÂ¶ÇÁ∫¢Ëâ≤ÁöÑÁÇπÊòØÊàë‰ª¨ÁöÑ‰ΩçÁΩÆÔºåÁªøËâ≤ÁöÑ‰∏§‰∏™ÁÇπÂàÜÂà´ÊòØÈôÑËøëÁöÑ‰∏§‰∏™È§êÈ¶ÜÔºå‰ΩÜÊòØÂú®Êü•ËØ¢ÁöÑÊó∂ÂÄô‰ºöÂèëÁé∞Ë∑ùÁ¶ªËæÉËøúÈ§êÈ¶ÜÁöÑGeoHashÁºñÁ†Å‰∏éÊàë‰ª¨‰∏ÄÊ†∑ÔºàÂõ†‰∏∫Âú®Âêå‰∏Ä‰∏™GeoHashÂå∫ÂüüÂùó‰∏äÔºâÔºåËÄåËæÉËøëÈ§êÈ¶ÜÁöÑGeoHashÁºñÁ†Å‰∏éÊàë‰ª¨‰∏ç‰∏ÄËá¥„ÄÇ ÁõÆÂâçÊØîËæÉÈÄöË°åÁöÑÂÅöÊ≥ïÂ∞±ÊòØÊàë‰ª¨‰∏ç‰ªÖËé∑ÂèñÂΩìÂâçÊàë‰ª¨ÊâÄÂú®ÁöÑÁü©ÂΩ¢Âå∫ÂüüÔºåËøòËé∑ÂèñÂë®Âõ¥8‰∏™Áü©ÂΩ¢Âùó‰∏≠ÁöÑÁÇπ„ÄÇÈÇ£‰πàÊÄéÊ†∑ÂÆö‰ΩçÂë®Âõ¥8‰∏™ÁÇπÂë¢ÔºüÂÖ≥ÈîÆÂ∞±ÊòØÈúÄË¶ÅËé∑ÂèñÂë®Âõ¥8‰∏™ÁÇπÁöÑÁªèÁ∫¨Â∫¶ÔºåÈÇ£Êàë‰ª¨Â∑≤ÁªèÁü•ÈÅìËá™Â∑±ÁöÑÁªèÁ∫¨Â∫¶ÔºåÂè™ÈúÄË¶ÅÁî®Ëá™Â∑±ÁöÑÁªèÁ∫¨Â∫¶ÂáèÂéªÊúÄÂ∞èÂàíÂàÜÂçï‰ΩçÁöÑÁªèÁ∫¨Â∫¶Â∞±Ë°å„ÄÇÂõ†‰∏∫Êàë‰ª¨Áü•ÈÅìÁªèÁ∫¨Â∫¶ÁöÑËåÉÂõ¥,ÂèàÁü•ÈÅìÈúÄË¶ÅÂàíÂàÜÁöÑÊ¨°Êï∞ÔºåÊâÄ‰ª•ÂæàÂÆπÊòìÂ∞±ËÉΩËÆ°ÁÆóÂá∫ÊúÄÂ∞èÂàíÂàÜÂçï‰ΩçÁöÑÁªèÁ∫¨Â∫¶„ÄÇ 6.Âá†ÁßçÂÆûÁé∞geohashÊñπÊ°àÁöÑÂØπÊØî 6.1ÊîØÊåÅ‰∫åÁª¥Á¥¢ÂºïÁöÑÂ≠òÂÇ®Êï∞ÊçÆÂ∫ìÔºömongodb mongoDBÊîØÊåÅ‰∫åÁª¥Á©∫Èó¥Á¥¢Âºï,‰ΩøÁî®Á©∫Èó¥Á¥¢Âºï,mongoDBÊîØÊåÅ‰∏ÄÁßçÁâπÊÆäÊü•ËØ¢,Â¶ÇÊüêÂú∞ÂõæÁΩëÁ´ô‰∏äÂèØ‰ª•Êü•ÊâæÁ¶ª‰Ω†ÊúÄËøëÁöÑÂíñÂï°ÂéÖ,Èì∂Ë°åÁ≠â‰ø°ÊÅØ„ÄÇËøô‰∏™‰ΩøÁî®mongoDBÁöÑÁ©∫Èó¥Á¥¢ÂºïÁªìÂêàÁâπÊÆäÁöÑÊü•ËØ¢ÊñπÊ≥ïÂæàÂÆπÊòìÂÆûÁé∞„ÄÇ APIÁõ¥Êé•ÊîØÊåÅÔºåÂæàÊñπ‰æø ÊîØÊåÅÊåâÁÖßË∑ùÁ¶ªÊéíÂ∫èÔºåÂπ∂ÊîØÊåÅÂàÜÈ°µ„ÄÇÊîØÊåÅÂ§öÊù°‰ª∂Á≠õÈÄâ„ÄÇ ÂèØÊª°Ë∂≥ÂÆûÊó∂ÊÄßÈúÄÊ±Ç„ÄÇ ËµÑÊ∫êÂç†Áî®Â§ßÔºåÊï∞ÊçÆÈáèËææÂà∞Áôæ‰∏áÁ∫ßËØ∑ÊµÅÈáèÂú®10wÂ∑¶Âè≥Êü•ËØ¢ÈÄüÂ∫¶ÊòéÊòæ‰∏ãÈôç„ÄÇ 6.2ÂçáÁ∫ßMysqlËá≥5.7ÔºåÊîØÊåÅGeohash MySQL 5.7.5 Â¢ûÂä†‰∫ÜÂØπGeoHashÁöÑÊîØÊåÅÔºåÊèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàógeohashÁöÑÂáΩÊï∞Ôºå‰ΩÜÊòØÂÖ∂ÂÆûMysqlÂπ∂Ê≤°ÊúâÊèê‰æõÁ±ª‰ººmogodbÁ±ªÂûãnearËøôÊ†∑ÁöÑÂáΩÊï∞Ôºå‰ªÖ‰ªÖÊèê‰æõ‰∫Ü‰∏Ä‰∫õÁªèÁ∫¨Â∫¶ËΩ¨hash„ÄÅhashÂèñÁªèÁ∫¨Â∫¶ÁöÑ‰∏Ä‰∫õÂáΩÊï∞„ÄÇ ‰ºòÁÇπ:ÂáΩÊï∞Áõ¥Êé•Ë∞ÉÁî®ÔºåÁîüÊàêÁõÆÊ†áhash„ÄÅÊ†πÊçÆhashËé∑ÂèñÁªèÁ∫¨Â∫¶„ÄÇ Áº∫ÁÇπÔºö‰∏çÊîØÊåÅËåÉÂõ¥Êü•ËØ¢ÂáΩÊï∞ÔºåÈúÄË¶ÅËá™Ë°åÂ§ÑÁêÜÂë®Ëæπ8ÁÇπÁöÑÈóÆÈ¢òÔºåÈúÄË¶ÅË°•ÂÖÖgeoÁöÑÁÆóÊ≥ï 6.3Redis Commands: Geography Edition GEO ÁâπÊÄßÂú® Redis 3.2 ÁâàÂèëÂ∏ÉÔºå Ëøô‰∏™ÂäüËÉΩÂèØ‰ª•Â∞ÜÁî®Êà∑ÁªôÂÆöÁöÑÂú∞ÁêÜ‰ΩçÁΩÆ‰ø°ÊÅØÂÇ®Â≠òËµ∑Êù•Ôºå Âπ∂ÂØπËøô‰∫õ‰ø°ÊÅØËøõË°åÊìç‰ΩúÔºåGEOÈÄöËøáÂ¶Ç‰∏ãÂëΩ‰ª§Êù•ÂÆåÊàêGEOÈúÄÊ±Ç. ÂëΩ‰ª§ ÊèèËø∞ geoadd Ê∑ªÂä†‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÁªèÁ∫¨Â∫¶Âú∞ÁêÜ‰ΩçÁΩÆ georadius Ëé∑ÂèñÊåáÂÆöËåÉÂõ¥ÂÜÖÁöÑÂØπË±°Ôºå‰πüÂèØ‰ª•Â¢ûÂä†ÂèÇÊï∞withdistanceÁõ¥Êé•ÁÆóÂá∫Ë∑ùÁ¶ªÔºå‰πüÂèØ‰ª•Â¢ûÂä†ÂèÇÊï∞descending/ascending ËøõË°åË∑ùÁ¶ªÊéíÂ∫è georadiusbymember ÈÄöËøáÊåáÂÆöÁöÑÂØπË±°ÔºåËé∑ÂèñÂÖ∂Âë®ËæπÂØπË±° geoencode ËΩ¨Êç¢‰∏∫geohashÔºå52-bitÔºåÂêåÊó∂ËøîÂõûËØ•Âå∫ÂüüÊúÄÂ∞èËßíÁöÑgeohash,ÊúÄÂ§ßËßíÁöÑgeohashÔºåÂèä‰∏≠ÂøÉÁÇπ geodecode Âêå‰∏äÈÄÜÊìç‰Ωú ‰ºòÁÇπ:ÊïàÁéáÈ´òÔºåAPI‰∏∞ÂØå Áº∫ÁÇπÔºö3.2ÁâàÊú¨ÊòØÂê¶Á®≥ÂÆöÔºü Èù¢ËØïÁöÑÊó∂ÂÄôÔºåÈóÆÂà∞geohashÁÆóÊ≥ï‰ª•ÂèäÊäÄÊúØÈÄâÂûãÂ§ßÊ¶Ç‰πüËÉΩËØ¥‰∏ÄËØ¥‰∫Ü‚Ä¶ Êú¨ÊñáÁ´†ÂÄüÈâ¥ÂæàÂ§ö‰ºòÁßÄÊñáÁ´†Ôºå‰∏ÉÊãºÂÖ´ÂáëËÄåÂá∫„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ë°•Á†ÅÁöÑÂâç‰∏ñ‰ªäÁîü]]></title>
    <url>%2F2019%2F01%2F29%2Fjava-basic%2F%E8%A1%A5%E7%A0%81%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F%2F</url>
    <content type="text"><![CDATA[ËÆ°ÁÆóÊú∫Â¶Ç‰ΩïÊù•‰øùÂ≠òË¥üÊï∞Âë¢ÔºüÂÖ∂ÂÆûÂè™Ë¶ÅËææÂà∞ËøôÊ†∑ÁöÑÁõÆÁöÑÔºöÊ≠£Êï∞Ë¥üÊï∞ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÊ†áËØÜÂç≥ÂèØÔºå‰ΩÜÊòØÔºåÊ≠£Â¶Ç‰∫∫Á±ªÁî®+1Âíå-1Êù•Ë°®Á§∫ÂèØ‰ª•ÊèêÈ´òÊïàÁéá‰∏ÄÊ†∑Ôºå‰πüÂæóÊúâ‰∏Ä‰∏™ÊØîËæÉÈÄÇÂΩìÁöÑÈÄÇÂêàÊàë‰ª¨ÁöÑËÆ°ÁÆóÊú∫ËØÜÂà´ÁöÑ‰∏Ä‰∏™ÊñπÂºè„ÄÇ‰∏ãÈù¢Êù•ËØ¶ÁªÜËÆ≤Ëß£„ÄÇ ÈóÆÈ¢òÁöÑÁî±Êù• ‰∏ãÈù¢‰∏∫‰∫ÜË°®Á§∫Êñπ‰æøÔºåÂÖàÂÅáËÆæÂ≠òÂÇ®‰∏Ä‰∏™Êï¥ÂûãÊï∞Â≠óÁî®4‰∏™bit„ÄÇ ‰∏æ‰æãÊù•ËØ¥Ôºå+2Âú®ËÆ°ÁÆóÊú∫‰∏≠Ë°®Á§∫‰∏∫‰∫åËøõÂà∂ÁöÑ0010ÔºåÈÇ£‰πà-2ÊÄé‰πàË°®Á§∫Âë¢Ôºü ÂæàÂÆπÊòìÊÉ≥Âà∞ÔºåÂèØ‰ª•Â∞Ü‰∏Ä‰∏™‰∫åËøõÂà∂‰ΩçÔºàbitÔºâ‰∏ìÈó®ËßÑÂÆö‰∏∫Á¨¶Âè∑‰ΩçÔºåÂÆÉÁ≠â‰∫é0Êó∂Â∞±Ë°®Á§∫Ê≠£Êï∞ÔºåÁ≠â‰∫é1Êó∂Â∞±Ë°®Á§∫Ë¥üÊï∞„ÄÇÊØîÂ¶ÇÔºåÂú®8‰ΩçÊú∫‰∏≠ÔºåËßÑÂÆöÊØè‰∏™Â≠óËäÇÁöÑÊúÄÈ´ò‰Ωç‰∏∫Á¨¶Âè∑‰Ωç„ÄÇÈÇ£‰πàÔºå+2Â∞±ÊòØ0010ÔºåËÄå-8ÂàôÊòØ1010„ÄÇ Êõ¥Â§öÁöÑ‰æãÂ≠êÂ¶Ç‰∏ãÔºö ËøôÂ∞±ÊòØÁõ¥Êé•Áî®ÂéüÁ†ÅÁöÑÊñπÂºèÊù•Â≠òÂÇ®ÔºåËôΩÁÑ∂ËØ¥ËøôÁßçÊñπÂºèÁêÜËÆ∫‰∏äÊòØÂèØË°åÁöÑÔºåÊØïÁ´üÊØè‰∏™Êï∞ÊàëÈÉΩÂîØ‰∏ÄÊ†áËØÜ‰∫Ü„ÄÇ ‰ΩÜÊòØËøôÁßçÊñπÂºèÂ≠òÂú®ÈóÆÈ¢òÔºåÊàë‰ª¨Â∏åÊúõ+1Âíå-1Áõ∏Âä†‰∏∫0Ôºå‰ΩÜÊòØÈÄöËøáËøô‰∏™ÊñπÂºèÁÆóÂá∫Êù•ÁöÑÊòØÔºö0001+1001=1010 (-2)„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÊåâÁÖßÊ≠£Â∏∏‰∏ÄÊ≠•Â§¥ÁöÑÊñπÂºèÂæó‰∏çÂà∞Êàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÁªìÊûú„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥‰∫Ü‚ÄúÊ≠£Ë¥üÁõ∏Âä†Á≠â‰∫é0‚ÄùÁöÑÈóÆÈ¢òÔºå‰∫∫‰ª¨ÂèëÊòé‰∫ÜÂèçÁ†Å„ÄÇ ÂèçÁ†Å ‚ÄúÂèçÁ†Å‚ÄùË°®Á§∫ÊñπÂºèÊòØÁî®Êù•Â§ÑÁêÜË¥üÊï∞ÁöÑÔºåÁ¨¶Âè∑‰ΩçÁΩÆ‰∏çÂèòÔºåÂÖ∂‰Ωô‰ΩçÁΩÆÁõ∏Âèç„ÄÇ Ê≠§Êó∂ÔºåÊàë‰ª¨ÂÜçÊù•ÁÆó‰∏Ä‰∏ã+1Âíå-1Áõ∏Âä†ÔºåÂèòÊàê‰∫Ü0001+1110=1111ÔºåÂàöÂ•ΩÂèçÁ†ÅË°®Á§∫ÊñπÂºè‰∏≠Ôºå1111Ë±°ÂæÅ-0„ÄÇ Ê≠§Êó∂ÔºåÂ•ΩÂÉèÊòØËß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞Ôºå0Ëøô‰∏™Êó∂ÂÄôÊúâ‰∫Ü‰∏§ÁßçË°®ËææÔºö0000Âíå1111„ÄÇ Âç≥Âú®Áî®ÂèçÁ†ÅË°®Á§∫ÁöÑÊÉÖÂÜµ‰∏ãÔºå0Á´üÁÑ∂ÂèØ‰ª•Áî®‰∏§‰∏™ÂÄºÊù•Ë°®Á§∫ÔºåËøôÊòæÁÑ∂‰∏çÂ•ΩÂêß„ÄÇÊØïÁ´ü+0Âíå-0Â∞±ÊòØÂêå‰∏Ä‰∏™Áé©ÊÑèÂïä„ÄÇ Ëøô‰∏™Êó∂ÂÄôË°•Á†ÅÈó™‰∫ÆÁôªÂú∫„ÄÇ Ë°•Á†Å ÂæàÁÆÄÂçïÔºåÂú®ÂàöÊâçÂèçÁ†ÅÁöÑÂü∫Á°Ä‰∏äÂä†1„ÄÇ Ê≠§Êó∂ÔºåÊàë‰ª¨ËøôÈáåÂÅáÂÆöÊï¥ÂΩ¢Âè™Êúâ4‰Ωç„ÄÇÈÇ£‰πà-0Ë°®Á§∫‰∏∫1111+1=10000ÔºåÊòæÁÑ∂Ê∫¢Âá∫‰∫ÜÔºåÂ∞±ÈúÄË¶Å‰∏¢ÂºÉÊúÄÈ´ò‰ΩçÔºåÂèòÊàê0000. Ê≠§Êó∂ÔºåÁ•ûÂ•áÂú∞ÂèëÁé∞ÔºåËææÂà∞‰∫ÜÁªü‰∏ÄÔºå+0Âíå-0ÈÉΩÊòØÁî®0000Êù•Ë°®Á§∫‰∫Ü„ÄÇ Ê≠§Êó∂Ôºå‰πüÊª°Ë∂≥Ê≠£Ë¥üÊï∞Áõ∏Âä†‰∏∫0ÁöÑÊù°‰ª∂„ÄÇÊØîÂ¶Ç+2‰∏∫0010Ôºå-2‰∏∫1110.Ê≠§Êó∂‰∏§ËÄÖÁõ∏Âä†‰∏∫Ôºö0010+1110=(0)0000Ôºå‰∏¢ÊéâÊúÄÈ´ò‰ΩçÂ∞±ÊòØ0000 ÈÇ£‰πàÂØπ‰∫éÊôÆÈÄöÊÉÖÂÜµÔºåÊØîÂ¶Ç7+(-4)Âë¢?Âç≥0111+1100=0011ÔºåÂ∞±ÊòØ3„ÄÇOKÔºåÂ§ßÂäüÂëäÊàê„ÄÇ Ë°•Á†ÅÊÄé‰πàÊ±Ç ‰∏äÈù¢Â∑≤ÁªèËØ¥ÁöÑÂæàËØ¶ÁªÜÂï¶ÔºåÊØîÂ¶Ç-4ÔºåÂ∞±ÊòØÂú®4(0100)ÁöÑÂü∫Á°Ä‰∏äÂèñÂèç(1011)ÂÜçÂä†‰∏Ä(1100). ‰∏äÈù¢‰πüËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàË¶ÅÁî®Ë°•Á†Å„ÄÇÂç≥‰øùËØÅ‰∫ÜÂØπÁß∞ÁöÑÊ≠£Ë¥üÊï∞Áõ∏Âä†‰∏∫0Âπ∂‰∏î0Âè™Êúâ‰∏ÄÁßçË°®Á§∫ÊñπÂºè„ÄÇ ËøòÊúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÁÇπÂ∞±ÊòØÔºåÊàë‰ª¨Ê≥®ÊÑèÂà∞Ôºå7-4ÂÖ∂ÂÆûÊàë‰ª¨ÈÉΩÊòØËΩ¨Êç¢Êàê7+(-4)Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂú®ËÆ°ÁÆóÊú∫‰∏≠ÔºåÂáèÊ≥ïÈÉΩÊòØÁî®Âä†Ê≥ïÁöÑÈÄªËæëÂÆûÁé∞ÁöÑ„ÄÇ Âç≥Ôºö‰∏ÄÂ•óÂä†Ê≥ïÁöÑÁîµË∑ØÂÆûÁé∞Âä†ÂáèÊ≥ï„ÄÇÊ≠§Â§ñÔºå‰πòÊ≥ïÂíåÈô§Ê≥ïÂÖ∂ÂÆûÈÉΩÊòØÂä†Ê≥ïËøôÂ•óÁîµË∑ØÂÆûÁé∞ÁöÑ„ÄÇ Ë°•Á†ÅÁöÑÊú¨Ë¥® ËøôÈáåÂÅáËÆæÂ≠òÂÇ®‰∏Ä‰∏™Êï¥ÂûãÁî®8‰∏™bit„ÄÇ Ë¶ÅÂ∞ÜÊ≠£Êï∞ËΩ¨ÊàêÂØπÂ∫îÁöÑË¥üÊï∞ÔºåÂÖ∂ÂÆûÂè™Ë¶ÅÁî®0ÂáèÂéªËøô‰∏™Êï∞Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÊØîÂ¶ÇÔºå-8ÂÖ∂ÂÆûÂ∞±ÊòØ0-8„ÄÇ Âàô8ÁöÑ‰∫åËøõÂà∂ÊòØ00001000Ôºå-8Â∞±ÂèØ‰ª•Áî®‰∏ãÈù¢ÁöÑÂºèÂ≠êÊ±ÇÂá∫Ôºö 123 ÔºêÔºêÔºêÔºêÔºêÔºêÔºêÔºêÔºçÔºêÔºêÔºêÔºêÔºëÔºêÔºêÔºêÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºç Âõ†‰∏∫00000000ÔºàË¢´ÂáèÊï∞ÔºâÂ∞è‰∫é0000100ÔºàÂáèÊï∞ÔºâÔºåÊâÄ‰ª•‰∏çÂ§üÂáè„ÄÇËØ∑ÂõûÂøÜ‰∏Ä‰∏ãÂ∞èÂ≠¶ÁÆóÊúØÔºåÂ¶ÇÊûúË¢´ÂáèÊï∞ÁöÑÊüê‰∏Ä‰ΩçÂ∞è‰∫éÂáèÊï∞ÔºåÊàë‰ª¨ÊÄé‰πàÂäûÔºüÂæàÁÆÄÂçïÔºåÈóÆ‰∏ä‰∏Ä‰ΩçÂÄü1Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÊâÄ‰ª•Ôºå0000000‰πüÈóÆ‰∏ä‰∏Ä‰ΩçÂÄü‰∫Ü1Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåË¢´ÂáèÊï∞ÂÖ∂ÂÆûÊòØ100000000ÔºåÁÆóÂºè‰πüÂ∞±ÊîπÂÜôÊàêÔºö 1234ÔºëÔºêÔºêÔºêÔºêÔºêÔºêÔºêÔºêÔºçÔºêÔºêÔºêÔºêÔºëÔºêÔºêÔºêÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºç ÔºëÔºëÔºëÔºëÔºëÔºêÔºêÔºê Ëøõ‰∏ÄÊ≠•ËßÇÂØüÔºåÂèØ‰ª•ÂèëÁé∞100000000 = 11111111 + 1ÔºåÊâÄ‰ª•‰∏äÈù¢ÁöÑÂºèÂ≠êÂèØ‰ª•ÊãÜÊàê‰∏§‰∏™Ôºö 1234567 ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºçÔºêÔºêÔºêÔºêÔºëÔºêÔºêÔºêÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºç ÔºëÔºëÔºëÔºëÔºêÔºëÔºëÔºëÔºãÔºêÔºêÔºêÔºêÔºêÔºêÔºêÔºëÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºçÔºç ÔºëÔºëÔºëÔºëÔºëÔºêÔºêÔºê ÈÄöËøáËøô‰∏ÄÊ≠•ÔºåÊàë‰ª¨Â∞±‰ªéÊï∞Â≠¶‰∏äÁü•ÈÅì‰∫Ü‰∏∫‰ªÄ‰πàË°•Á†ÅÊòØÂèñÂèçÂä†‰∏Ä‰∫Ü„ÄÇ ‰Ω†ÁúãÔºåÊ±Ç‰ªª‰Ωï‰∏Ä‰∏™Ë¥üÊï∞ÔºåÈÉΩÊòØ0-Ê≠£Êï∞ÔºåÈÇ£‰πàÂ∞±Áî®ÂÄü‰ΩçÁöÑÊÄùÊÉ≥Êù•ÔºåÂàôÂèòÊàê100000000„ÄÇ 100000000ÂàôÂèØ‰ª•ÂàÜËß£‰∏∫11111111+00000001„ÄÇ Ê≠§Êó∂Ê±ÇË¥üÊï∞ÁöÑËøáÁ®ãÂ∞±Â∞±ÂèòÊàê11111111-X+1 ËÄåÂÖàÁî®11111111Êù•ÂáèËøô‰∏™Ê≠£Êï∞ÔºåËøô‰∏™ÁªìÊûúÂ∞±ÊòØÂØπÊ≠£Êï∞ÂèñÂèç„ÄÇ Ê≠§Êó∂ÂÜçÂä†‰∏äÂè¶Â§ñ‰∏Ä‰∏™1. Ëøô‰∏éÊàë‰ª¨Ê±ÇË°•Á†ÅÁöÑËøáÁ®ãÊòØ‰∏ÄÊ†∑ÁöÑÔºåËøô‰πüËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàË¶ÅËøôÊ†∑Ê±ÇË°•Á†Å„ÄÇ ËØÅÊòé(ÂèØ‰∏çÁúã) Â∞Ü‰∏äÈù¢ÁöÑÁâπ‰æãÊäΩË±°‰∏Ä‰∏ãÔºåÁî®Áªü‰∏ÄË°®ËææÂºèÊù•ËØÅÊòé‰∏Ä‰∏ã„ÄÇ Êàë‰ª¨Ë¶ÅËØÅÊòéÁöÑÊòØÔºåX-YÊàñX+(-Y)ÂèØ‰ª•Áî®XÂä†‰∏äYÁöÑË°•Á†ÅÂÆåÊàê„ÄÇ YÁöÑË°•Á†ÅÁ≠â‰∫é(11111111-Y)+1„ÄÇÊâÄ‰ª•ÔºåXÂä†‰∏äYË°•Á†ÅÔºåÂ∞±Á≠â‰∫éÔºö 1X + (11111111-Y) + 1 Êàë‰ª¨ÂÅáÂÆöËøô‰∏™ÁÆóÂºèÁöÑÁªìÊûúÁ≠â‰∫éZÔºåÂç≥ 1Z = X + (11111111-Y) + 1 Êé•‰∏ãÊù•ÔºåÂàÜÊàê‰∏§ÁßçÊÉÖÂÜµËÆ®ËÆ∫„ÄÇ Á¨¨‰∏ÄÁßçÊÉÖÂÜµÔºåÂ¶ÇÊûúXÂ∞è‰∫éYÔºåÈÇ£‰πàZÊòØ‰∏Ä‰∏™Ë¥üÊï∞„ÄÇ Áî±YÁöÑË°•Á†ÅÁ≠â‰∫é(11111111-Y)+1ÔºåÊ†áËÆ∞‰∏∫F=(11111111-Y)+1,ÈÇ£‰πàÂ¶Ç‰ΩïÊ†πÊçÆFÈÄÜÂêëÊ±ÇYÂë¢Ôºü 1Y=1111111-(F-1) OK,Âõ†‰∏∫Ê≠§Êó∂ZÊòØ‰∏Ä‰∏™Ë¥üÊï∞ÔºåÈÇ£‰πàZËøõË°åË°•Á†ÅÁöÑÈÄÜËøêÁÆóÂ∞±ÂèØ‰ª•Ê±ÇÂá∫ÂÆÉÁöÑÁªùÂØπÂÄºÔºåÂç≥Ê≠£Êï∞„ÄÇÂÜçÂä†‰∏Ä‰∏™Á¨¶Âè∑Ôºå‰∏§ËÄÖÁõ∏Á≠â„ÄÇ 1Z = -[11111111-(Z-1)] = -[11111111-(X + (11111111-Y) + 1-1)] = X - Y Á¨¨‰∫åÁßçÊÉÖÂÜµÔºåÂ¶ÇÊûúXÂ§ß‰∫éY ËøôÊÑèÂë≥ÁùÄZËÇØÂÆöÂ§ß‰∫é11111111Ôºå‰ΩÜÊòØÊàë‰ª¨ËßÑÂÆö‰∫ÜËøôÊòØ8‰ΩçÊú∫ÔºåÊúÄÈ´òÁöÑÁ¨¨9‰ΩçÊòØÊ∫¢Âá∫‰ΩçÔºåÂøÖÈ°ªË¢´ËàçÂéªÔºåËøôÁõ∏ÂΩì‰∫éÂáèÂéª100000000„ÄÇÊâÄ‰ª•Ôºå 1Z = Z - 100000000 = X + (11111111-Y) + 1 - 100000000 = X - Y ËøôÂ∞±ËØÅÊòé‰∫ÜÔºåÂú®Ê≠£Â∏∏ÁöÑÂä†Ê≥ïËßÑÂàô‰∏ãÔºåÂèØ‰ª•Âà©Áî®2ÁöÑË°•Á†ÅÂæóÂà∞Ê≠£Êï∞‰∏éË¥üÊï∞Áõ∏Âä†ÁöÑÊ≠£Á°ÆÁªìÊûú„ÄÇÊç¢Ë®Ä‰πãÔºåËÆ°ÁÆóÊú∫Âè™Ë¶ÅÈÉ®ÁΩ≤Âä†Ê≥ïÁîµË∑ØÂíåË°•Á†ÅÁîµË∑ØÔºåÂ∞±ÂèØ‰ª•ÂÆåÊàêÊâÄÊúâÊï¥Êï∞ÁöÑÂä†Ê≥ï„ÄÇ Êú¨ÊñáÊï¥ÁêÜËá™Ôºö ÂÖ≥‰∫é2ÁöÑË°•Á†Å Áü•‰πéÁ¨¨‰∏ÄÊù°ËØÑËÆ∫]]></content>
      <tags>
        <tag>javaÂü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringBoot‰ΩøÁî®logbackÂÆûÁé∞Êó•ÂøóÊåâÂ§©ÊªöÂä®]]></title>
    <url>%2F2019%2F01%2F28%2Fmiscellany%2F11SpringBoot%E4%BD%BF%E7%94%A8logback%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E6%8C%89%E5%A4%A9%E6%BB%9A%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[Êó•ÂøóÊòØ‰ªª‰Ωï‰∏Ä‰∏™Á≥ªÁªüÈÉΩÂøÖÂ§áÁöÑ‰∏úË•øÔºåÊó•ÂøóÁöÑÈáçË¶ÅÁ®ãÂ∫¶‰∏ùÊØ´‰∏ç‰∫ö‰∫é‰ª£Á†Å„ÄÇËÄåspringboot‰∏≠ÁªèÂ∏∏‰ΩøÁî®ÁöÑÊòØlogbackÔºåÈÇ£‰πà‰ªäÂ§©Êàë‰ª¨Â∞±Êù•Â≠¶‰π†‰∏Ä‰∏ãÂú®springboot‰∏ãÂ¶Ç‰ΩïÈÖçÁΩÆlogbackÊó•Âøó„ÄÇÁêÜËß£‰∫ÜËøôÈáåÁöÑÈÖçÁΩÆÔºåÂØπ‰∫é‰ªª‰ΩïÁöÑÊó•ÂøóÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÈúÄÊ±Ç Êó•ÂøóÊåâÂ§©ÊªöÂä®ÂàÜÂâ≤ infoÂíåerrorÊó•ÂøóËæìÂá∫Âà∞‰∏çÂêåÊñá‰ª∂ ‰∏∫‰ªÄ‰πà‰ΩøÁî®Logback LogbackÊòØLog4jÁöÑÂçáÁ∫ßÁâàÔºå‰ΩúËÄÖ‰∏∫Âêå‰∏Ä‰∏™‰∫∫Ôºå‰ΩúËÄÖ‰∏çÊÉ≥ÂÜçÂéªÊîπLog4jÔºåÊâÄ‰ª•ÂÜô‰∫ÜLogback ‰ΩøÁî®Êó•ÂøóÊ°ÜÊû∂ÁöÑÊúÄ‰Ω≥ÂÆûË∑µÊòØÈÄâÊã©‰∏ÄÊ¨æÊó•ÂøóÈó®Èù¢+‰∏ÄÊ¨æÊó•ÂøóÂÆûÁé∞ÔºåËøôÈáåÈÄâÊã©Slf4j+Logback,Slf4j‰ΩúËÄÖ‰πüÊòØLogbackÁöÑ‰ΩúËÄÖ SpringBoot‰ªé1.4ÁâàÊú¨ÂºÄÂßãÔºåÂÜÖÁΩÆÁöÑÊó•ÂøóÊ°ÜÊû∂Â∞±ÊòØLogback LogbackÂú®SpringBoot‰∏≠ÈÖçÁΩÆÊñπÂºè‰∏Ä ÂèØ‰ª•Áõ¥Êé•Âú®applicatin.propertiesÊàñËÄÖapplication.yml‰∏≠ÈÖçÁΩÆ ‰ª•Âú®application.yml‰∏≠ÈÖçÁΩÆ‰∏∫‰æã 123456logging: pattern: console: "%d - %msg%n" file: /var/log/tomcat/sell.log level: com.imooc.LoggerTest: debug ÂèØ‰ª•ÂèëÁé∞ÔºåËøôÁßçÈÖçÁΩÆÊñπÂºèÁÆÄÂçïÔºå‰ΩÜËÉΩÂÆûÁé∞ÁöÑÂäüËÉΩ‰πüÂæàÂ±ÄÈôêÔºåÂè™ËÉΩ ÂÆöÂà∂ËæìÂá∫Ê†ºÂºè ËæìÂá∫Êñá‰ª∂ÁöÑË∑ØÂæÑ ÊåáÂÆöÊüê‰∏™ÂåÖ‰∏ãÁöÑÊó•ÂøóÁ∫ßÂà´ Â¶ÇÊûúÈúÄË¶ÅÂÆåÊàêÊàë‰ª¨ÁöÑÈúÄÊ±ÇÔºåËøôÂ∞±ÂæóÁî®Á¨¨‰∫åÁßçÈÖçÁΩÆ‰∫Ü LogbackÂú®SpringBoot‰∏≠ÈÖçÁΩÆÊñπÂºè‰∫å Âú®resourceÁõÆÂΩï‰∏ãÊñ∞Âª∫logback-spring.xml, ÂÜÖÂÆπÂ¶Ç‰∏ã 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;configuration&gt; &lt;!--ÊâìÂç∞Âà∞ÊéßÂà∂Âè∞ÁöÑÊ†ºÂºè--&gt; &lt;appender name="consoleLog" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt; &lt;pattern&gt; %d - %msg%n &lt;/pattern&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;!--Èô§‰∫ÜerrorÁ∫ßÂà´ÁöÑÊó•ÂøóÊñá‰ª∂‰øùÂ≠òÊ†ºÂºè‰ª•ÂèäÊªöÂä®Á≠ñÁï•--&gt; &lt;appender name="fileInfoLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!--ËøáÊª§Âô®ÔºåÂ∞ÜerrorÁ∫ßÂà´ËøáÊª§Êéâ--&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;DENY&lt;/onMatch&gt; &lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt; &lt;/filter&gt; &lt;encoder&gt; &lt;pattern&gt; %msg%n &lt;/pattern&gt; &lt;/encoder&gt; &lt;!--ÊªöÂä®Á≠ñÁï•--&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--Ë∑ØÂæÑ--&gt; &lt;fileNamePattern&gt;/var/log/tomcat/sell/info.%d.log&lt;/fileNamePattern&gt; &lt;/rollingPolicy&gt; &lt;/appender&gt; &lt;!--errorÁ∫ßÂà´Êó•ÂøóÊñá‰ª∂‰øùÂ≠òÊ†ºÂºè‰ª•ÂèäÊªöÂä®Á≠ñÁï•--&gt; &lt;appender name="fileErrorLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!--Âè™ËÆ©errorÁ∫ßÂà´ÁöÑÊó•ÂøóËøõÊù•--&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;/filter&gt; &lt;encoder&gt; &lt;pattern&gt; %msg%n &lt;/pattern&gt; &lt;/encoder&gt; &lt;!--ÊªöÂä®Á≠ñÁï•--&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--Ë∑ØÂæÑ--&gt; &lt;fileNamePattern&gt;/var/log/tomcat/sell/error.%d.log&lt;/fileNamePattern&gt; &lt;/rollingPolicy&gt; &lt;/appender&gt; &lt;root level="info"&gt; &lt;appender-ref ref="consoleLog" /&gt; &lt;appender-ref ref="fileInfoLog" /&gt; &lt;appender-ref ref="fileErrorLog" /&gt; &lt;/root&gt;&lt;/configuration&gt; ÊØè‰∏Ä‰∏™appender‰Ω†ÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™Êó•ÂøóÂ§ÑÁêÜÁ≠ñÁï•„ÄÇ Á¨¨‰∏Ä‰∏™appenderÁöÑname=&quot;consoleLog&quot;, ÂêçÂ≠óÊòØËá™Â∑±ÈöèÊÑèÂèñÁöÑÔºåÂèñËøô‰∏™ÂêçÂ≠óÔºåË°®Á§∫Ëøô‰∏™Á≠ñÁï•Áî®‰∫éÊéßÂà∂Âè∞ÁöÑÊó•Âøó„ÄÇ Êàë‰ª¨ÈáçÁÇπÁúãÁ¨¨‰∫å‰∏™ÂíåÁ¨¨‰∏â‰∏™appender,Âõ†‰∏∫Ë¶ÅÊääinfoÂíåerrorÊó•ÂøóËæìÂÖ•Âà∞‰∏çÂêåÊñá‰ª∂ÔºåÊâÄ‰ª•Êàë‰ª¨ÂàÜÂà´Âª∫‰∫Ü‰∏§‰∏™appender„ÄÇ rollingPolicyÊòØÊªöÂä®Á≠ñÁï•ÔºåËøôÈáåÊàë‰ª¨ËÆæÁΩÆÊåâÊó∂Èó¥ÊªöÂä® filterÊòØÊó•ÂøóÁöÑËøáÊª§ÊñπÂºèÔºåÊàë‰ª¨Âú®fileInfoLogÈáåÂÅö‰∫ÜÂ¶Ç‰∏ãËøáÊª§ 123&lt;level&gt;ERROR&lt;/level&gt;&lt;onMatch&gt;DENY&lt;/onMatch&gt;&lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt; ‰∏äËø∞‰ª£Á†ÅÁøªËØë‰πãÂêéÔºöÊã¶Êà™ERRORÁ∫ßÂà´ÁöÑÊó•Âøó„ÄÇÂ¶ÇÊûúÂåπÈÖçÂà∞‰∫ÜÔºåÂàôÁ¶ÅÁî®Â§ÑÁêÜ„ÄÇÂ¶ÇÊûú‰∏çÂåπÈÖçÔºåÂàôÊé•ÂèóÔºåÂºÄÂßãÂ§ÑÁêÜÊó•Âøó„ÄÇ ÈÇ£ÊúâÁöÑÂêåÂ≠¶Ë¶ÅÈóÆ‰∫ÜÔºå‰∏çËÉΩËøôÊ†∑ÂÜôÂêó 1&lt;level&gt;INFO&lt;/level&gt; ËøôÊ†∑‰∏çÊòØÂè™Êã¶Êà™INFOÊó•Âøó‰∫ÜÂêóÔºü ‰∏çÂØπÔºÅ ËøôÂ∞±ÂæóËØ¥‰∏Ä‰∏ãÊó•ÂøóÁ∫ßÂà´‰∫Ü DEBUG -&gt;INFO -&gt; WARN -&gt;ERROR Â¶ÇÊûú‰Ω†ËÆæÁΩÆÁöÑÊó•ÂøóÁ∫ßÂà´ÊòØINFOÔºåÈÇ£‰πàÊòØ‰ºöÊã¶Êà™ERRORÊó•ÂøóÁöÑÂì¶„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúÁõ¥Êé•ÂÜôinfoÔºåÈÇ£‰πàÂ§ß‰∫éÁ≠â‰∫éinfoÁ∫ßÂà´ÁöÑÊó•ÂøóÈÉΩ‰ºöÂÜôËøõÂéªÔºåËøùËÉå‰∫ÜÊàë‰ª¨ÁöÑÈúÄÊ±Ç„ÄÇ Êï¥ÁêÜËá™Ôºö http://www.imooc.com/article/19005]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlÈù¢ËØïÈ´òÈ¢ëÁêÜËÆ∫Áü•ËØÜ]]></title>
    <url>%2F2019%2F01%2F27%2Fmysql%2Fmysql%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[Êï¥ÁêÜ‰∏Ä‰∫õÈù¢ËØïÈ¢òÔºåÁÆÄÂçïÁúãÁúã„ÄÇ ÁõÆÂΩï Êï∞ÊçÆÂ∫ì‰∏âËåÉÂºè ‰∫ãÂä° mysqlÊï∞ÊçÆÂ∫ìÈªòËÆ§ÊúÄÂ§ßËøûÊé•Êï∞ ÂàÜÈ°µ Ëß¶ÂèëÂô® Â≠òÂÇ®ËøáÁ®ã Áî®jdbcÊÄé‰πàË∞ÉÁî®Â≠òÂÇ®ËøáÁ®ãÔºü ÂØπjdbcÁöÑÁêÜËß£ ÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑjdbcÁöÑÁ®ãÂ∫è„ÄÇÂÜô‰∏Ä‰∏™ËÆøÈóÆoracleÊï∞ÊçÆÁöÑjdbcÁ®ãÂ∫è JDBC‰∏≠ÁöÑPreparedStatementÁõ∏ÊØîStatementÁöÑÂ•ΩÂ§Ñ Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†‰ΩúÁî® ÈÄâÊã©ÂêàÈÄÇÁöÑÂ≠òÂÇ®ÂºïÊìé Êï∞ÊçÆÂ∫ì‰ºòÂåñ-Á¥¢Âºï Êï∞ÊçÆÂ∫ì‰ºòÂåñ-ÂàÜË°® Êï∞ÊçÆÂ∫ì‰ºòÂåñ-ËØªÂÜôÂàÜÁ¶ª Êï∞ÊçÆÂ∫ì‰ºòÂåñ-ÁºìÂ≠ò Êï∞ÊçÆÂ∫ì‰ºòÂåñ-sqlËØ≠Âè•‰ºòÂåñÁöÑÊäÄÂ∑ß jdbcÊâπÈáèÊèíÂÖ•Âá†Áôæ‰∏áÊï∞ÊçÆÊÄé‰πàÂÆûÁé∞ ËÅöÁ∞áÁ¥¢ÂºïÂíåÈùûËÅöÁ∞áÁ¥¢Âºï sqlÊ≥®ÂÖ•ÈóÆÈ¢ò mysqlÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅ 1. Êï∞ÊçÆÂ∫ì‰∏âËåÉÂºè 1.1 ËåÉÂºèÊòØ‰ªÄ‰πà ËåÉÂºèÂ∞±ÊòØËßÑËåÉÔºåË¶ÅÊª°Ë∂≥Á¨¨‰∫åËåÉÂºèÂøÖÈ°ªÂÖàÊª°Ë∂≥Á¨¨‰∏ÄËåÉÂºèÔºåË¶ÅÊª°Ë∂≥Á¨¨‰∏âËåÉÂºèÔºåÂøÖÈ°ªË¶ÅÂÖàÊª°Ë∂≥Á¨¨‰∫åËåÉÂºè„ÄÇ 1NF(Á¨¨‰∏ÄËåÉÂºè)ÔºöÂàóÊï∞ÊçÆ‰∏çÂèØÂàÜÂâ≤ÔºåÂç≥‰∏ÄÂàó‰∏çËÉΩÊúâÂ§ö‰∏™ÂÄº 2NF(Á¨¨‰∫åËåÉÂºè)Ôºö‰∏ªÈîÆ(ÊØè‰∏ÄË°åÈÉΩÊúâÂîØ‰∏ÄÊ†áËØÜ) 3NF(Á¨¨‰∏âËåÉÂºè)ÔºöÂ§ñÈîÆ(Ë°®‰∏≠‰∏çÂåÖÂê´Â∑≤Âú®ÂÖ∂‰ªñË°®‰∏≠ÂåÖÂê´ÁöÑÈùû‰∏ªÂÖ≥ÈîÆ‰ø°ÊÅØ) 1.2 Âèç‰∏âËåÉÂºè Âèç‰∏âËåÉÂºèÔºöÊúâÊó∂‰∏∫‰∫ÜÊïàÁéáÔºåÂèØ‰ª•ËÆæÁΩÆÈáçÂ§çÊàñËÄÖÊé®ÂØºÂá∫ÁöÑÂ≠óÊÆµÔºå‰æãÂ¶ÇÔºöËÆ¢ÂçïÊÄª‰ª∑Ê†ºËÆ¢ÂçïÈ°πÁöÑÂçï‰ª∑ÔºåËøô‰∏™ËÆ¢ÂçïÊÄª‰ª∑ËôΩÁÑ∂ÂèØ‰ª•Áî±ËÆ¢ÂçïÈ°πËÆ°ÁÆóÂá∫Êù•Ôºå‰ΩÜÊòØÂΩìËÆ¢ÂçïÊï∞ÁõÆÂ∫ûÂ§ßÊó∂ÔºåÊïàÁéáÊØîËæÉ‰ΩéÔºåÊâÄ‰ª•ËÆ¢ÂçïÁöÑÊÄª‰ª∑Ëøô‰∏™Â≠óÊÆµÊòØÂøÖË¶ÅÁöÑ„ÄÇ 2. ‰∫ãÂä° 2.1 Âê´‰πâ ‰∫ãÂä°Êó∂Âπ∂ÂèëÊéßÂà∂ÁöÑÂçï‰ΩçÔºåÊòØÁî®Êà∑ÂÆö‰πâÁöÑ‰∏Ä‰∏™Êìç‰ΩúÂ∫èÂàóÔºåË¶Å‰πàÈÉΩÂÅöÔºåË¶Å‰πàÈÉΩ‰∏çÂÅöÔºåÊòØ‰∏çÂèØÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰Ωç„ÄÇ 2.2 ‰∫ãÂä°ÁöÑÂõõ‰∏™ÁâπÂæÅ(ACIDÁâπÊÄß) ÂéüÂ≠êÊÄßÔºöË°®Á§∫‰∫ãÂä°ÂÜÖÊìç‰Ωú‰∏çÂèØÂàÜÂâ≤ ‰∏ÄËá¥ÊÄßÔºöË¶Å‰πàÊàêÂäüÔºåË¶Å‰πàÂ§±Ë¥•ÔºåËã•ÂêéÈù¢Â§±Ë¥•ÔºåÂâçÈù¢ÂàôÂõûÊªö ÈöîÁ¶ªÊÄßÔºö‰∏Ä‰∏™‰∫ãÂä°ÂºÄÂßã‰∫ÜÔºå‰∏çË¢´ÂÖ∂‰ªñ‰∫ãÂä°Âπ≤Êâ∞ ÊåÅ‰πÖÊÄßÔºö‰∫ãÂä°ÂºÄÂßã‰∫ÜÔºåÂ∞±‰∏çËÉΩÁ™ÅÁÑ∂ÁªàÊ≠¢ 3. mysqlÊï∞ÊçÆÂ∫ìÈªòËÆ§ÊúÄÂ§ßËøûÊé•Êï∞ 3.1 ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÊúÄÂ§ßËøûÊé•Êï∞ ÁâπÂÆöÊúçÂä°Âô®‰∏äÁöÑÊï∞ÊçÆÂ∫ìÂè™ËÉΩÊîØÊåÅ‰∏ÄÂÆöÊï∞ÁõÆÂêåÊó∂ËøûÊé•ÔºåËøôÊó∂ÈúÄË¶ÅÊàë‰ª¨ËÆæÁΩÆÊúÄÂ§ßËøûÊé•Êï∞ÔºàÊúÄÂ§öÂêåÊó∂ÊúçÂä°Â§öÂ∞ëËøûÊé•Ôºâ„ÄÇÂú®Êï∞ÊçÆÂ∫ìÂÆâË£ÖÊó∂‰ºöÊúâ‰∏Ä‰∏™ÈªòËÆ§ÁöÑÊúÄÂ§ßËøûÊé•Êï∞„ÄÇ my.ini‰∏≠max_connections=100 4. ÂàÜÈ°µ 4.1 ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂàÜÈ°µÔºü Âú®ÂæàÂ§öÊï∞ÊçÆÊó∂Ôºå‰∏çÂèØËÉΩÂÆåÂÖ®ÊòæÁ§∫Êï∞ÊçÆ„ÄÇËøõË°åÂàÜÊÆµÊòæÁ§∫. 4.2 mysqlÂ¶Ç‰ΩïÂàÜÈ°µ 12String sql = "select * from students order by id limit " + pageSize*(pageNumber-1) + "," + pageSize; 4.3 oracleÂàÜÈ°µ ÊòØ‰ΩøÁî®‰∫Ü‰∏âÂ±ÇÂµåÂ•óÊü•ËØ¢„ÄÇ 1234String sql = &quot;select * from &quot; + (select *,rownum rid from (select * from students order by postime desc) where rid&lt;=&quot; + pagesize*pagenumber + &quot;) as t&quot; + &quot;where t&gt;&quot; + pageSize*(pageNumber-1); 5. Ëß¶ÂèëÂô® Áï•„ÄÇ 6. Â≠òÂÇ®ËøáÁ®ã 6.1 Êï∞ÊçÆÂ∫ìÂ≠òÂÇ®ËøáÁ®ãÂÖ∑ÊúâÂ¶Ç‰∏ã‰ºòÁÇπÔºö 1„ÄÅÂ≠òÂÇ®ËøáÁ®ãÂè™Âú®ÂàõÂª∫Êó∂ËøõË°åÁºñËØëÔºå‰ª•ÂêéÊØèÊ¨°ÊâßË°åÂ≠òÂÇ®ËøáÁ®ãÈÉΩ‰∏çÈúÄÂÜçÈáçÊñ∞ÁºñËØëÔºåËÄå‰∏ÄËà¨ SQL ËØ≠Âè•ÊØèÊâßË°å‰∏ÄÊ¨°Â∞±ÁºñËØë‰∏ÄÊ¨°ÔºåÂõ†Ê≠§‰ΩøÁî®Â≠òÂÇ®ËøáÁ®ãÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òÊï∞ÊçÆÂ∫ìÊâßË°åÈÄüÂ∫¶„ÄÇ 2„ÄÅÈÄöÂ∏∏ÔºåÂ§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæëÈúÄË¶ÅÂ§öÊù° SQL ËØ≠Âè•„ÄÇËøô‰∫õËØ≠Âè•Ë¶ÅÂàÜÂà´Âú∞‰ªéÂÆ¢Êà∑Êú∫ÂèëÈÄÅÂà∞ÊúçÂä°Âô®ÔºåÂΩìÂÆ¢Êà∑Êú∫ÂíåÊúçÂä°Âô®‰πãÈó¥ÁöÑÊìç‰ΩúÂæàÂ§öÊó∂ÔºåÂ∞Ü‰∫ßÁîüÂ§ßÈáèÁöÑÁΩëÁªú‰º†Ëæì„ÄÇÂ¶ÇÊûúÂ∞ÜËøô‰∫õÊìç‰ΩúÊîæÂú®‰∏Ä‰∏™Â≠òÂÇ®ËøáÁ®ã‰∏≠ÔºåÈÇ£‰πàÂÆ¢Êà∑Êú∫ÂíåÊúçÂä°Âô®‰πãÈó¥ÁöÑÁΩëÁªú‰º†ËæìÂ∞±‰ºöÂ§ßÂ§ßÂáèÂ∞ëÔºåÈôç‰Ωé‰∫ÜÁΩëÁªúË¥üËΩΩ„ÄÇ 3„ÄÅÂ≠òÂÇ®ËøáÁ®ãÂàõÂª∫‰∏ÄÊ¨°‰æøÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®Ôºå‰ªéËÄåÂèØ‰ª•ÂáèÂ∞ëÊï∞ÊçÆÂ∫ìÂºÄÂèë‰∫∫ÂëòÁöÑÂ∑•‰ΩúÈáè„ÄÇ 4„ÄÅÂÆâÂÖ®ÊÄßÈ´òÔºåÂ≠òÂÇ®ËøáÁ®ãÂèØ‰ª•Â±èËîΩÂØπÂ∫ïÂ±ÇÊï∞ÊçÆÂ∫ìÂØπË±°ÁöÑÁõ¥Êé•ËÆøÈóÆÔºå‰ΩøÁî® EXECUTE ÊùÉÈôêË∞ÉÁî®Â≠òÂÇ®ËøáÁ®ãÔºåÊó†ÈúÄÊã•ÊúâËÆøÈóÆÂ∫ïÂ±ÇÊï∞ÊçÆÂ∫ìÂØπË±°ÁöÑÊòæÂºèÊùÉÈôê„ÄÇ 6.2 ÂÆö‰πâÂ≠òÂÇ®ËøáÁ®ã: 12345678create procedure insert_Student (_name varchar(50),_age int ,out _id int)begin insert into student value(null,_name,_age); select max(stuId) into _id from student;end;call insert_Student('wfz',23,@id);select @id; 7. Áî®jdbcÊÄé‰πàË∞ÉÁî®Â≠òÂÇ®ËøáÁ®ãÔºü Ë¥æÁêèÊ¨≤Êâß‰∫ã Âä†ËΩΩÈ©±Âä® Ëé∑ÂèñËøûÊé• ËÆæÁΩÆÂèÇÊï∞ ÊâßË°å ÈáäÊîæËøûÊé• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import java.sql.CallableStatement;import java.sql.Connection;import java.sql.DriverManager;import java.sql.SQLException;import java.sql.Types;public class JdbcTest &#123; /** * @param args */ public static void main(String[] args) &#123; // TODO Auto-generated method stub Connection cn = null; CallableStatement cstmt = null; try &#123; //ËøôÈáåÊúÄÂ•Ω‰∏çË¶ÅËøô‰πàÂπ≤ÔºåÂõ†‰∏∫È©±Âä®ÂêçÂÜôÊ≠ªÂú®Á®ãÂ∫è‰∏≠‰∫Ü Class.forName("com.mysql.jdbc.Driver"); //ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåËøôÈáåÂ∫îÁî®DataSourceÊï∞ÊçÆÔºåÂ¶ÇÊûúÁî®Ê°ÜÊû∂Ôºå //Ëøô‰∏™Êï∞ÊçÆÊ∫ê‰∏çÈúÄË¶ÅÊàë‰ª¨ÁºñÁ†ÅÂàõÂª∫ÔºåÊàë‰ª¨Âè™ÈúÄDatasource ds = context.lookup() //cn = ds.getConnection(); cn = DriverManager.getConnection("jdbc:mysql:///test","root","root"); cstmt = cn.prepareCall("&#123;call insert_Student(?,?,?)&#125;"); cstmt.registerOutParameter(3,Types.INTEGER); cstmt.setString(1, "wangwu"); cstmt.setInt(2, 25); cstmt.execute(); //getÁ¨¨Âá†‰∏™Ôºå‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏ç‰∏ÄÊ†∑ÔºåÂª∫ËÆÆ‰∏çÂÜô System.out.println(cstmt.getString(3)); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; finally &#123; /*try&#123;cstmt.close();&#125;catch(Exception e)&#123;&#125; try&#123;cn.close();&#125;catch(Exception e)&#123;&#125;*/ try &#123; if(cstmt != null) cstmt.close(); if(cn != null) cn.close(); &#125; catch (SQLException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; &#125; 8. ÂØπjdbcÁöÑÁêÜËß£ Java database connection javaÊï∞ÊçÆÂ∫ìËøûÊé•.Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªü(mysql oracleÁ≠â)ÊòØÂæàÂ§öÔºåÊØè‰∏™Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÊîØÊåÅÁöÑÂëΩ‰ª§ÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ JavaÂè™ÂÆö‰πâÊé•Âè£ÔºåËÆ©Êï∞ÊçÆÂ∫ìÂéÇÂïÜËá™Â∑±ÂÆûÁé∞Êé•Âè£ÔºåÂØπ‰∫éÊàë‰ª¨ËÄÖËÄåË®Ä„ÄÇÂè™ÈúÄË¶ÅÂØºÂÖ•ÂØπÂ∫îÂéÇÂïÜÂºÄÂèëÁöÑÂÆûÁé∞Âç≥ÂèØ„ÄÇÁÑ∂Âêé‰ª•Êé•Âè£ÊñπÂºèËøõË°åË∞ÉÁî®.(mysql + mysqlÈ©±Âä®ÔºàÂÆûÁé∞Ôºâ+jdbc) 9. ÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑjdbcÁöÑÁ®ãÂ∫è„ÄÇÂÜô‰∏Ä‰∏™ËÆøÈóÆoracleÊï∞ÊçÆÁöÑjdbcÁ®ãÂ∫è Ë¥æÁêèÊ¨≤Êâß‰∫ã Âä†ËΩΩÈ©±Âä®(com.mysql.jdbc.Driver,oracle.jdbc.driver.OracleDriver) ÂèñËøûÊé•(DriverManager.getConnection(url,usernam,passord)) ËÆæÁΩÆÂèÇÊï∞ Statement PreparedStatement cstmt.setXXX(index, value); ÊâßË°å executeQuery executeUpdate ÈáäÊîæËøûÊé•(ÊòØÂê¶ËøûÊé•Ë¶Å‰ªéÂ∞èÂà∞Â§ßÔºåÂøÖÈ°ªÊîæÂà∞finnaly) 10. JDBC‰∏≠ÁöÑPreparedStatementÁõ∏ÊØîStatementÁöÑÂ•ΩÂ§Ñ Â§ßÂ§öÊï∞Êàë‰ª¨ÈÉΩ‰ΩøÁî®PreparedStatement‰ª£ÊõøStatement 1ÔºöPreparedStatementÊòØÈ¢ÑÁºñËØëÁöÑÔºåÊØîStatementÈÄüÂ∫¶Âø´ 2Ôºö‰ª£Á†ÅÁöÑÂèØËØªÊÄßÂíåÂèØÁª¥Êä§ÊÄß ËôΩÁÑ∂Áî®PreparedStatementÊù•‰ª£ÊõøStatement‰ºö‰Ωø‰ª£Á†ÅÂ§öÂá∫Âá†Ë°å,‰ΩÜËøôÊ†∑ÁöÑ‰ª£Á†ÅÊó†ËÆ∫‰ªéÂèØËØªÊÄßËøòÊòØÂèØÁª¥Êä§ÊÄß‰∏äÊù•ËØ¥.ÈÉΩÊØîÁõ¥Êé•Áî®StatementÁöÑ‰ª£Á†ÅÈ´òÂæàÂ§öÊ°£Ê¨°Ôºö 123456789stmt.executeUpdate("insert into tb_name (col1,col2,col2,col4) values('"+var1+"','"+var2+"',"+var3+",'"+var4+"')"); perstmt = con.prepareStatement("insert into tb_name (col1,col2,col2,col4) values (?,?,?,?)");perstmt.setString(1,var1);perstmt.setString(2,var2);perstmt.setString(3,var3);perstmt.setString(4,var4);perstmt.executeUpdate(); 3ÔºöÂÆâÂÖ®ÊÄß PreparedStatementÂèØ‰ª•Èò≤Ê≠¢SQLÊ≥®ÂÖ•ÊîªÂáªÔºåËÄåStatementÂç¥‰∏çËÉΩ„ÄÇ ÊØîÂ¶ÇËØ¥Ôºö String sql = ‚Äúselect * from tb_name where name= '‚Äù+varname+&quot;‚Äô and passwd=‚Äô&quot;+varpasswd+&quot;‚Äô&quot;; Â¶ÇÊûúÊàë‰ª¨Êää[' or '1' = '1]‰Ωú‰∏∫varpasswd‰º†ÂÖ•ËøõÊù•.Áî®Êà∑ÂêçÈöèÊÑè,ÁúãÁúã‰ºöÊàê‰∏∫‰ªÄ‰πà? select * from tb_name = ‚ÄòÈöèÊÑè‚Äô and passwd = ‚Äò‚Äô or ‚Äò1‚Äô = ‚Äò1‚Äô; Âõ†‰∏∫'1'='1'ËÇØÂÆöÊàêÁ´ãÔºåÊâÄ‰ª•ÂèØ‰ª•‰ªª‰ΩïÈÄöËøáÈ™åËØÅ„ÄÇ Êõ¥ÊúâÁîöËÄÖÔºöÊää[';drop table tb_name;]‰Ωú‰∏∫varpasswd‰º†ÂÖ•ËøõÊù•,ÂàôÔºö select * from tb_name = ‚ÄòÈöèÊÑè‚Äô and passwd = ‚Äò‚Äô;drop table tb_name; Êúâ‰∫õÊï∞ÊçÆÂ∫ìÊòØ‰∏ç‰ºöËÆ©‰Ω†ÊàêÂäüÁöÑÔºå‰ΩÜ‰πüÊúâÂæàÂ§öÊï∞ÊçÆÂ∫ìÂ∞±ÂèØ‰ª•‰ΩøËøô‰∫õËØ≠Âè•ÂæóÂà∞ÊâßË°å„ÄÇ ËÄåÂ¶ÇÊûú‰Ω†‰ΩøÁî®È¢ÑÁºñËØëËØ≠Âè•‰Ω†‰º†ÂÖ•ÁöÑ‰ªª‰ΩïÂÜÖÂÆπÂ∞±‰∏ç‰ºöÂíåÂéüÊù•ÁöÑËØ≠Âè•ÂèëÁîü‰ªª‰ΩïÂåπÈÖçÁöÑÂÖ≥Á≥ªÔºåÂè™Ë¶ÅÂÖ®‰ΩøÁî®È¢ÑÁºñËØëËØ≠Âè•‰Ω†Â∞±Áî®‰∏çÁùÄÂØπ‰º†ÂÖ•ÁöÑÊï∞ÊçÆÂÅö‰ªª‰ΩïËøáËôë„ÄÇËÄåÂ¶ÇÊûú‰ΩøÁî®ÊôÆÈÄöÁöÑstatement,ÊúâÂèØËÉΩË¶ÅÂØπdropÁ≠âÂÅöË¥πÂ∞ΩÂøÉÊú∫ÁöÑÂà§Êñ≠ÂíåËøáËôë„ÄÇ 11. Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†‰ΩúÁî® 1„ÄÅÈôêÂÆöÊï∞ÊçÆÂ∫ìÁöÑ‰∏™Êï∞Ôºå‰∏ç‰ºöÂØºËá¥Áî±‰∫éÊï∞ÊçÆÂ∫ìËøûÊé•ËøáÂ§öÂØºËá¥Á≥ªÁªüËøêË°åÁºìÊÖ¢ÊàñÂ¥©Ê∫É 2„ÄÅÊï∞ÊçÆÂ∫ìËøûÊé•‰∏çÈúÄË¶ÅÊØèÊ¨°ÈÉΩÂéªÂàõÂª∫ÊàñÈîÄÊØÅÔºåËäÇÁ∫¶‰∫ÜËµÑÊ∫ê 3„ÄÅÊï∞ÊçÆÂ∫ìËøûÊé•‰∏çÈúÄË¶ÅÊØèÊ¨°ÈÉΩÂéªÂàõÂª∫ÔºåÂìçÂ∫îÊó∂Èó¥Êõ¥Âø´„ÄÇ 12. ÈÄâÊã©ÂêàÈÄÇÁöÑÂ≠òÂÇ®ÂºïÊìé Âú®ÂºÄÂèë‰∏≠ÔºåÊàë‰ª¨ÁªèÂ∏∏‰ΩøÁî®ÁöÑÂ≠òÂÇ®ÂºïÊìé myisam / innodb/ memory MyISAMÂ≠òÂÇ®ÂºïÊìé Â¶ÇÊûúË°®ÂØπ‰∫ãÂä°Ë¶ÅÊ±Ç‰∏çÈ´òÔºåÂêåÊó∂ÊòØ‰ª•Êü•ËØ¢ÂíåÊ∑ªÂä†‰∏∫‰∏ªÁöÑÔºåÊàë‰ª¨ËÄÉËôë‰ΩøÁî®myisamÂ≠òÂÇ®ÂºïÊìé. ÊØîÂ¶Ç bbs ‰∏≠ÁöÑ ÂèëÂ∏ñË°®ÔºåÂõûÂ§çË°®. INNODBÂ≠òÂÇ®ÂºïÊìé: ÂØπ‰∫ãÂä°Ë¶ÅÊ±ÇÈ´òÔºå‰øùÂ≠òÁöÑÊï∞ÊçÆÈÉΩÊòØÈáçË¶ÅÊï∞ÊçÆÔºåÊàë‰ª¨Âª∫ËÆÆ‰ΩøÁî®INNODB,ÊØîÂ¶ÇËÆ¢ÂçïË°®ÔºåË¥¶Âè∑Ë°®. Memory Â≠òÂÇ® Êàë‰ª¨Êï∞ÊçÆÂèòÂåñÈ¢ëÁπÅÔºå‰∏çÈúÄË¶ÅÂÖ•Â∫ìÔºåÂêåÊó∂ÂèàÈ¢ëÁπÅÁöÑÊü•ËØ¢Âíå‰øÆÊîπÔºåÊàë‰ª¨ËÄÉËôë‰ΩøÁî®memory, ÈÄüÂ∫¶ÊûÅÂø´. MyISAM Âíå INNODBÁöÑÂå∫Âà´(‰∏ªË¶Å) ‰∫ãÂä°ÂÆâÂÖ® myisam‰∏çÊîØÊåÅ‰∫ãÂä°ËÄåinnodbÊîØÊåÅ Êü•ËØ¢ÂíåÊ∑ªÂä†ÈÄüÂ∫¶ myisam‰∏çÁî®ÊîØÊåÅ‰∫ãÂä°Â∞±‰∏çÁî®ËÄÉËôëÂêåÊ≠•ÈîÅÔºåÊü•ÊâæÂíåÊ∑ªÂä†ÂíåÊ∑ªÂä†ÁöÑÈÄüÂ∫¶Âø´ ÊîØÊåÅÂÖ®ÊñáÁ¥¢Âºï myisamÊîØÊåÅinnodb‰∏çÊîØÊåÅ ÈîÅÊú∫Âà∂ myisamÊîØÊåÅË°®ÈîÅËÄåinnodbÊîØÊåÅË°åÈîÅ(‰∫ãÂä°) Â§ñÈîÆ MyISAM ‰∏çÊîØÊåÅÂ§ñÈîÆÔºå INNODBÊîØÊåÅÂ§ñÈîÆ. (ÈÄöÂ∏∏‰∏çËÆæÁΩÆÂ§ñÈîÆÔºåÈÄöÂ∏∏ÊòØÂú®Á®ãÂ∫è‰∏≠‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥) ‰∏ãÈù¢ÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰ºòÂåñÊâãÊÆµÔºå‰ΩÜÊòØÂè™ÊòØË°®Èù¢ÔºåÈúÄË¶Å‰ª•ÂêéÂÜçÂ•ΩÂ•ΩÊé¢Á©∂ Âú®È°πÁõÆËá™È™åÈ°πÁõÆËΩ¨ÊµãËØï‰πãÂâçÔºåÂú®ÂêØÂä®mysqlÊï∞ÊçÆÂ∫ìÊó∂ÂºÄÂêØÊÖ¢Êü•ËØ¢ÔºåÂπ∂‰∏îÊääÊâßË°åÊÖ¢ÁöÑËØ≠Âè•ÂÜôÂà∞Êó•Âøó‰∏≠ÔºåÂú®ËøêË°å‰∏ÄÂÆöÊó∂Èó¥Âêé„ÄÇÈÄöËøáÊü•ÁúãÊó•ÂøóÊâæÂà∞ÊÖ¢Êü•ËØ¢ËØ≠Âè•„ÄÇ 1234567891011121314151617181920212223242526272829show variables like '%slow%'; #Êü•ÁúãMySQLÊÖ¢Êü•ËØ¢ÊòØÂê¶ÂºÄÂêØset global slow_query_log=ON; #ÂºÄÂêØMySQLÊÖ¢Êü•ËØ¢ÂäüËÉΩshow variables like "long_query_time"; #Êü•ÁúãMySQLÊÖ¢Êü•ËØ¢Êó∂Èó¥ËÆæÁΩÆÔºåÈªòËÆ§10Áßíset global long_query_time=5; #‰øÆÊîπ‰∏∫ËÆ∞ÂΩï5ÁßíÂÜÖÁöÑÊü•ËØ¢select sleep(6); #ÊµãËØïMySQLÊÖ¢Êü•ËØ¢show variables like "%slow%"; #Êü•ÁúãMySQLÊÖ¢Êü•ËØ¢Êó•ÂøóË∑ØÂæÑshow global status like '%slow%'; #Êü•ÁúãMySQLÊÖ¢Êü•ËØ¢Áä∂ÊÄÅÊàñËÄÖvi /etc/my.cnf #ÁºñËæëÔºåÂú®[mysqld]ÊÆµÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†Åslow-query-log = on #ÂºÄÂêØMySQLÊÖ¢Êü•ËØ¢ÂäüËÉΩslow_query_log_file = /var/run/mysqld/mysqld-slow.log #ËÆæÁΩÆMySQLÊÖ¢Êü•ËØ¢Êó•ÂøóË∑ØÂæÑlong_query_time = 5 #‰øÆÊîπ‰∏∫ËÆ∞ÂΩï5ÁßíÂÜÖÁöÑÊü•ËØ¢ÔºåÈªòËÆ§‰∏çËÆæÁΩÆÊ≠§ÂèÇÊï∞‰∏∫ËÆ∞ÂΩï10ÁßíÂÜÖÁöÑÊü•ËØ¢log-queries-not-using-indexes = on #ËÆ∞ÂΩïÊú™‰ΩøÁî®Á¥¢ÂºïÁöÑÊü•ËØ¢:wq! #‰øùÂ≠òÈÄÄÂá∫service mysqld restart #ÈáçÂêØMySQLÊúçÂä° 13. Êï∞ÊçÆÂ∫ì‰ºòÂåñ-Á¥¢Âºï 13.1 Á¥¢ÂºïÁöÑÊ¶ÇÂøµ Á¥¢ÂºïÔºàIndexÔºâÊòØÂ∏ÆÂä©DBMSÈ´òÊïàËé∑ÂèñÊï∞ÊçÆÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ 13.2 Á¥¢ÂºïÊúâÂì™‰∫õ ÂàÜÁ±ªÔºöÊôÆÈÄöÁ¥¢Âºï/ÂîØ‰∏ÄÁ¥¢Âºï/‰∏ªÈîÆÁ¥¢Âºï/ÂÖ®ÊñáÁ¥¢Âºï ÊôÆÈÄöÁ¥¢Âºï:ÂÖÅËÆ∏ÈáçÂ§çÁöÑÂÄºÂá∫Áé∞ ÂîØ‰∏ÄÁ¥¢Âºï:Èô§‰∫Ü‰∏çËÉΩÊúâÈáçÂ§çÁöÑËÆ∞ÂΩïÂ§ñÔºåÂÖ∂ÂÆÉÂíåÊôÆÈÄöÁ¥¢Âºï‰∏ÄÊ†∑(Áî®Êà∑Âêç„ÄÅÁî®Êà∑Ë∫´‰ªΩËØÅ„ÄÅemail,tel) ‰∏ªÈîÆÁ¥¢ÂºïÔºöÊòØÈöèÁùÄËÆæÂÆö‰∏ªÈîÆËÄåÂàõÂª∫ÁöÑÔºå‰πüÂ∞±ÊòØÊääÊüê‰∏™ÂàóËÆæ‰∏∫‰∏ªÈîÆÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆÂ∫ìÂ∞±‰ºöÁµ¶ÊîπÂàóÂàõÂª∫Á¥¢Âºï„ÄÇËøôÂ∞±ÊòØ‰∏ªÈîÆÁ¥¢Âºï.ÂîØ‰∏Ä‰∏îÊ≤°ÊúânullÂÄº ÂÖ®ÊñáÁ¥¢Âºï:Áî®Êù•ÂØπË°®‰∏≠ÁöÑÊñáÊú¨Âüü(charÔºåvarcharÔºåtext)ËøõË°åÁ¥¢ÂºïÔºå ÂÖ®ÊñáÁ¥¢ÂºïÈíàÂØπMyIsam explain select * from articles where match(title,body) against(‚Äòdatabase‚Äô);„Äê‰ºö‰ΩøÁî®ÂÖ®ÊñáÁ¥¢Âºï„Äë 13.3 ‰ΩøÁî®Á¥¢ÂºïÁöÑÊ≥®ÊÑè‰∫ãÈ°π Á¥¢ÂºïÂºäÁ´Ø Âç†Áî®Á£ÅÁõòÁ©∫Èó¥„ÄÇ ÂØπdml(ÊèíÂÖ•„ÄÅ‰øÆÊîπ„ÄÅÂà†Èô§)Êìç‰ΩúÊúâÂΩ±ÂìçÔºåÂèòÊÖ¢„ÄÇ ‰ΩøÁî®Âú∫ÊôØÔºö ËÇØÂÆöÂú®whereÊù°‰ª∂ÁªèÂ∏∏‰ΩøÁî®,Â¶ÇÊûú‰∏çÂÅöÊü•ËØ¢Â∞±Ê≤°ÊúâÊÑè‰πâ ËØ•Â≠óÊÆµÁöÑÂÜÖÂÆπ‰∏çÊòØÂîØ‰∏ÄÁöÑÂá†‰∏™ÂÄº(sex) Â≠óÊÆµÂÜÖÂÆπ‰∏çÊòØÈ¢ëÁπÅÂèòÂåñ. Ê≥®ÊÑè‰∫ãÈ°π ÂØπ‰∫éÂàõÂª∫ÁöÑÂ§öÂàóÁ¥¢ÂºïÔºàÂ§çÂêàÁ¥¢ÂºïÔºâÔºå‰∏çÊòØ‰ΩøÁî®ÁöÑÁ¨¨‰∏ÄÈÉ®ÂàÜÂ∞±‰∏ç‰ºö‰ΩøÁî®Á¥¢Âºï„ÄÇ 123alter table dept add index my_ind (dname,loc); // dname Â∑¶ËæπÁöÑÂàó,locÂ∞±ÊòØÂè≥ËæπÁöÑÂàóexplain select * from dept where dname='aaa'\G ‰ºö‰ΩøÁî®Âà∞Á¥¢Âºïexplain select * from dept where loc='aaa'\G Â∞±‰∏ç‰ºö‰ΩøÁî®Âà∞Á¥¢Âºï ÂØπ‰∫é‰ΩøÁî®likeÁöÑÊü•ËØ¢ÔºåÊü•ËØ¢Â¶ÇÊûúÊòØ%aaa‰∏ç‰ºö‰ΩøÁî®Âà∞Á¥¢ÂºïËÄåaaa%‰ºö‰ΩøÁî®Âà∞Á¥¢Âºï„ÄÇ 12explain select * from dept where dname like '%aaa'\G‰∏çËÉΩ‰ΩøÁî®Á¥¢Âºïexplain select * from dept where dname like 'aaa%'\G‰ΩøÁî®Á¥¢Âºï. ÊâÄ‰ª•Âú®likeÊü•ËØ¢Êó∂Ôºå‚ÄòÂÖ≥ÈîÆÂ≠ó‚ÄôÁöÑÊúÄÂâçÈù¢‰∏çËÉΩ‰ΩøÁî®% ÊàñËÄÖ _ËøôÊ†∑ÁöÑÂ≠óÁ¨¶ÔºåÂ¶ÇÊûú‰∏ÄÂÆöË¶ÅÂâçÈù¢ÊúâÂèòÂåñÁöÑÂÄºÔºåÂàôËÄÉËôë‰ΩøÁî® ÂÖ®ÊñáÁ¥¢Âºï-&gt;sphinx. Á¥¢ÂºïÂàóÊéíÂ∫è MySQLÊü•ËØ¢Âè™‰ΩøÁî®‰∏Ä‰∏™Á¥¢ÂºïÔºåÂõ†Ê≠§Â¶ÇÊûúwhereÂ≠êÂè•‰∏≠Â∑≤Áªè‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÁöÑËØùÔºåÈÇ£‰πàorder by‰∏≠ÁöÑÂàóÊòØ‰∏ç‰ºö‰ΩøÁî®Á¥¢ÂºïÁöÑ„ÄÇÂõ†Ê≠§Êï∞ÊçÆÂ∫ìÈªòËÆ§ÊéíÂ∫èÂèØ‰ª•Á¨¶ÂêàË¶ÅÊ±ÇÁöÑÊÉÖÂÜµ‰∏ã‰∏çË¶Å‰ΩøÁî®ÊéíÂ∫èÊìç‰ΩúÔºõÂ∞ΩÈáè‰∏çË¶ÅÂåÖÂê´Â§ö‰∏™ÂàóÁöÑÊéíÂ∫èÔºåÂ¶ÇÊûúÈúÄË¶ÅÊúÄÂ•ΩÁªôËøô‰∫õÂàóÂàõÂª∫Â§çÂêàÁ¥¢Âºï„ÄÇ Â¶ÇÊûúÂàóÁ±ªÂûãÊòØÂ≠óÁ¨¶‰∏≤ÔºåÈÇ£‰∏ÄÂÆöË¶ÅÂú®Êù°‰ª∂‰∏≠Â∞ÜÊï∞ÊçÆ‰ΩøÁî®ÂºïÂè∑ÂºïÁî®Ëµ∑Êù•„ÄÇÂê¶Âàô‰∏ç‰ΩøÁî®Á¥¢Âºï„ÄÇ 123expain select * from dept where dname=‚Äô111‚Äô;expain select * from dept where dname=111;ÔºàÊï∞ÂÄºËá™Âä®ËΩ¨Â≠óÁ¨¶‰∏≤Ôºâexpain select * from dept where dname=qqq;Êä•Èîô ‰πüÂ∞±ÊòØÔºåÂ¶ÇÊûúÂàóÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÊó†ËÆ∫ÊòØ‰∏çÊòØÂ≠óÁ¨¶‰∏≤Êï∞Â≠óÂ∞±‰∏ÄÂÆöË¶ÅÁî® ‚Äò‚Äô ÊääÂÆÉÂåÖÊã¨Ëµ∑Êù•. Â¶ÇÊûúmysql‰º∞ËÆ°‰ΩøÁî®ÂÖ®Ë°®Êâ´ÊèèË¶ÅÊØî‰ΩøÁî®Á¥¢ÂºïÂø´ÔºåÂàô‰∏ç‰ΩøÁî®Á¥¢Âºï„ÄÇ Ë°®ÈáåÈù¢Âè™Êúâ‰∏ÄÊù°ËÆ∞ÂΩï Á¥¢Âºï‰∏ç‰ºöÂåÖÂê´ÊúâNULLÂÄºÁöÑÂàó Âè™Ë¶ÅÂàó‰∏≠ÂåÖÂê´ÊúâNULLÂÄºÈÉΩÂ∞Ü‰∏ç‰ºöË¢´ÂåÖÂê´Âú®MySQLÁ¥¢Âºï‰∏≠ÔºåÂ§çÂêàÁ¥¢Âºï‰∏≠Âè™Ë¶ÅÊúâ‰∏ÄÂàóÂê´ÊúâNULLÂÄºÔºåÈÇ£‰πàËøô‰∏ÄÂàóÂØπ‰∫éÊ≠§Â§çÂêàÁ¥¢ÂºïÂ∞±ÊòØÊó†ÊïàÁöÑ„ÄÇÊâÄ‰ª•Êàë‰ª¨Âú®Êï∞ÊçÆÂ∫ìËÆæËÆ°Êó∂‰∏çË¶ÅËÆ©Â≠óÊÆµÁöÑÈªòËÆ§ÂÄº‰∏∫NULL„ÄÇ ‰ΩøÁî®Áü≠Á¥¢Âºï ÂØπ‰∏≤ÂàóËøõË°åÁ¥¢ÂºïÔºåÂ¶ÇÊûúÂèØËÉΩÂ∫îËØ•ÊåáÂÆö‰∏Ä‰∏™ÂâçÁºÄÈïøÂ∫¶„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÊúâ‰∏Ä‰∏™CHAR(255)ÁöÑÂàóÔºåÂ¶ÇÊûúÂú®Ââç10‰∏™Êàñ20‰∏™Â≠óÁ¨¶ÂÜÖÔºåÂ§öÊï∞ÂÄºÊòØÊÉü‰∏ÄÁöÑÔºåÈÇ£‰πàÂ∞±‰∏çË¶ÅÂØπÊï¥‰∏™ÂàóËøõË°åÁ¥¢Âºï„ÄÇÁü≠Á¥¢Âºï‰∏ç‰ªÖÂèØ‰ª•ÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶ËÄå‰∏îÂèØ‰ª•ËäÇÁúÅÁ£ÅÁõòÁ©∫Èó¥ÂíåI/OÊìç‰Ωú„ÄÇ ‰∏çË¶ÅÂú®Âàó‰∏äËøõË°åËøêÁÆóÔºå‰∏ç‰ΩøÁî®NOT INÂíå&lt;&gt;Êìç‰ΩúÔºå‰∏çÊîØÊåÅÊ≠£ÂàôË°®ËææÂºè„ÄÇ 14. Êï∞ÊçÆÂ∫ì‰ºòÂåñ-ÂàÜË°® ÂàÜË°®ÂàÜ‰∏∫Ê∞¥Âπ≥(ÊåâË°å)ÂàÜË°®ÂíåÂûÇÁõ¥(ÊåâÂàó)ÂàÜË°® Ê∞¥Âπ≥ÂàÜË°®ÊÉÖÂΩ¢Ôºö Ê†πÊçÆÁªèÈ™åÔºåMysqlË°®Êï∞ÊçÆ‰∏ÄËà¨ËææÂà∞Áôæ‰∏áÁ∫ßÂà´ÔºåÊü•ËØ¢ÊïàÁéá‰ºöÂæà‰ΩéÔºåÂÆπÊòìÈÄ†ÊàêË°®ÈîÅÔºåÁîöËá≥Â†ÜÁßØÂæàÂ§öËøûÊé•ÔºåÁõ¥Êé•ÊåÇÊéâÔºõÊ∞¥Âπ≥ÂàÜË°®ËÉΩÂ§üÂæàÂ§ßÁ®ãÂ∫¶ËæÉÂ∞ëËøô‰∫õÂéãÂäõ„ÄÇ ÂûÇÁõ¥ÂàÜË°®ÊÉÖÂΩ¢Ôºö Â¶ÇÊûú‰∏ÄÂº†Ë°®‰∏≠Êüê‰∏™Â≠óÊÆµÂÄºÈùûÂ∏∏Â§ö(ÈïøÊñáÊú¨„ÄÅ‰∫åËøõÂà∂Á≠â)ÔºåËÄå‰∏îÂè™ÊúâÂú®ÂæàÂ∞ëÁöÑÊÉÖÂÜµ‰∏ã‰ºöÊü•ËØ¢„ÄÇËøôÊó∂ÂÄôÂ∞±ÂèØ‰ª•ÊääÂ≠óÊÆµÂ§ö‰∏™ÂçïÁã¨ÊîæÂà∞‰∏Ä‰∏™Ë°®ÔºåÈÄöËøáÂ§ñÈîÆÂÖ≥ËÅîËµ∑Êù•„ÄÇËÄÉËØïËØ¶ÊÉÖÔºå‰∏ÄËà¨Êàë‰ª¨Âè™ÂÖ≥Ê≥®ÂàÜÊï∞Ôºå‰∏çÂÖ≥Ê≥®ËØ¶ÊÉÖ„ÄÇ Ê∞¥Âπ≥ÂàÜË°®Á≠ñÁï•Ôºö 1.ÊåâÊó∂Èó¥ÂàÜË°® ËøôÁßçÂàÜË°®ÊñπÂºèÊúâ‰∏ÄÂÆöÁöÑÂ±ÄÈôêÊÄßÔºåÂΩìÊï∞ÊçÆÊúâËæÉÂº∫ÁöÑÂÆûÊïàÊÄßÔºåÂ¶ÇÂæÆÂçöÂèëÈÄÅËÆ∞ÂΩï„ÄÅÂæÆ‰ø°Ê∂àÊÅØËÆ∞ÂΩïÁ≠âÔºåËøôÁßçÊï∞ÊçÆÂæàÂ∞ëÊúâÁî®Êà∑‰ºöÊü•ËØ¢Âá†‰∏™ÊúàÂâçÁöÑÊï∞ÊçÆÔºåÂ¶ÇÈúÄË¶ÅÂ∞±ÂèØ‰ª•ÊåâÊúàÂàÜË°®„ÄÇ 2.ÊåâÂå∫Èó¥ËåÉÂõ¥ÂàÜË°® ‰∏ÄËà¨Âú®Êúâ‰∏•Ê†ºÁöÑËá™Â¢ûidÈúÄÊ±Ç‰∏äÔºåÂ¶ÇÊåâÁÖßuser_idÊ∞¥Âπ≥ÂàÜË°®Ôºö 123table_1 user_id‰ªé1~100w table_2 user_id‰ªé101~200w table_3 user_id‰ªé201~300w 3.hashÂàÜË°® ÈÄöËøá‰∏Ä‰∏™ÂéüÂßãÁõÆÊ†áÁöÑIDÊàñËÄÖÂêçÁß∞ÈÄöËøá‰∏ÄÂÆöÁöÑhashÁÆóÊ≥ïËÆ°ÁÆóÂá∫Êï∞ÊçÆÂ≠òÂÇ®Ë°®ÁöÑË°®ÂêçÔºåÁÑ∂ÂêéËÆøÈóÆÁõ∏Â∫îÁöÑË°®„ÄÇ 15. Êï∞ÊçÆÂ∫ì‰ºòÂåñ-ËØªÂÜôÂàÜÁ¶ª ‰∏ÄÂè∞Êï∞ÊçÆÂ∫ìÊîØÊåÅÁöÑÊúÄÂ§ßÂπ∂ÂèëËøûÊé•Êï∞ÊòØÊúâÈôêÁöÑÔºåÂ¶ÇÊûúÁî®Êà∑Âπ∂ÂèëËÆøÈóÆÂ§™Â§ö„ÄÇ‰∏ÄÂè∞ÊúçÂä°Âô®Êª°Ë∂≥‰∏çË¶ÅË¶ÅÊ±ÇÊòØÂ∞±ÂèØ‰ª•ÈõÜÁæ§Â§ÑÁêÜ„ÄÇMysqlÁöÑÈõÜÁæ§Â§ÑÁêÜÊäÄÊúØÊúÄÂ∏∏Áî®ÁöÑÂ∞±ÊòØËØªÂÜôÂàÜÁ¶ª„ÄÇ ‰∏ª‰ªéÂêåÊ≠• Êï∞ÊçÆÂ∫ìÊúÄÁªà‰ºöÊääÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á£ÅÁõòÔºåÂ¶ÇÊûúÈõÜÁæ§ÂøÖÈ°ªÁ°Æ‰øùÊØè‰∏™Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÊòØ‰∏ÄÁõ¥ÁöÑ„ÄÇËÉΩÊîπÂèòÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÁöÑÊìç‰ΩúÈÉΩÂæÄ‰∏ªÊï∞ÊçÆÂ∫ìÂéªÂÜôÔºåËÄåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ì‰ªé‰∏ªÊï∞ÊçÆÂ∫ì‰∏äÂêåÊ≠•Êï∞ÊçÆ„ÄÇ ËØªÂÜôÂàÜÁ¶ª ‰ΩøÁî®Ë¥üËΩΩÂùáË°°Êù•ÂÆûÁé∞ÂÜôÁöÑÊìç‰ΩúÈÉΩÂæÄ‰∏ªÊï∞ÊçÆÂéªÔºåËÄåËØªÁöÑÊìç‰ΩúÂæÄ‰ªéÊúçÂä°Âô®Âéª„ÄÇ 16. Êï∞ÊçÆÂ∫ì‰ºòÂåñ-ÁºìÂ≠ò ‰ªÄ‰πàÊòØÁºìÂ≠ò Âú®ÊåÅ‰πÖÂ±Ç(dao)ÂíåÊï∞ÊçÆÂ∫ì(db)‰πãÈó¥Ê∑ªÂä†‰∏Ä‰∏™ÁºìÂ≠òÂ±ÇÔºåÂ¶ÇÊûúÁî®Êà∑ËÆøÈóÆÁöÑÊï∞ÊçÆÂ∑≤ÁªèÁºìÂ≠òËµ∑Êù•Êó∂ÔºåÂú®Áî®Êà∑ËÆøÈóÆÊó∂Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÔºå‰∏çÁî®ËÆøÈóÆÊï∞ÊçÆÂ∫ì„ÄÇËÄåÁºìÂ≠òÊòØÂú®Êìç‰ΩúÂÜÖÂ≠òÁ∫ßÔºåËÆøÈóÆÈÄüÂ∫¶Âø´„ÄÇ ‰ΩúÁî® ÂáèÂ∞ëÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÂéãÂäõÔºåÂáèÂ∞ëËÆøÈóÆÊó∂Èó¥„ÄÇ Java‰∏≠Â∏∏Áî®ÁöÑÁºìÂ≠òÊúâ hibernateÁöÑ‰∫åÁ∫ßÁºìÂ≠ò„ÄÇËØ•ÁºìÂ≠ò‰∏çËÉΩÂÆåÊàêÂàÜÂ∏ÉÂºèÁºìÂ≠ò„ÄÇ ÂèØ‰ª•‰ΩøÁî®redis(memcaheÁ≠â)Êù•‰Ωú‰∏∫‰∏≠Â§ÆÁºìÂ≠ò„ÄÇÂØπÁºìÂ≠òÁöÑÊï∞ÊçÆËøõË°åÈõÜ‰∏≠Â§ÑÁêÜ 17. Êï∞ÊçÆÂ∫ì‰ºòÂåñ-sqlËØ≠Âè•‰ºòÂåñÁöÑÊäÄÂ∑ß DDL‰ºòÂåñ ÈÄöËøáÁ¶ÅÁî®Á¥¢ÂºïÊù•Êèê‰æõÂØºÂÖ•Êï∞ÊçÆÊÄßËÉΩÔºåËøô‰∏™Êìç‰Ωú‰∏ªË¶ÅÈíàÂØπÁé∞ÊúâÊï∞ÊçÆÂ∫ìÁöÑË°®ËøΩÂä†Êï∞ÊçÆ 123456//ÂéªÈô§ÈîÆalter table test3 DISABLE keys;//ÊâπÈáèÊèíÂÖ•Êï∞ÊçÆinsert into test3 ***//ÊÅ¢Â§çÈîÆalter table test3 ENABLE keys; ÂÖ≥Èó≠ÂîØ‰∏ÄÊ†°È™å 12set unique_checks=0 ÂÖ≥Èó≠set unique_checks=1 ÂºÄÂêØ ‰øÆÊîπ‰∫ãÂä°Êèê‰∫§ÊñπÂºè(ÂØºÂÖ•)ÔºàÂèòÂ§öÊ¨°Êèê‰∫§‰∏∫‰∏ÄÊ¨°Ôºâ 123set autocommit=0 ÂÖ≥Èó≠//ÊâπÈáèÊèíÂÖ•set autocommit=1 ÂºÄÂêØ DML‰ºòÂåñÔºàÂèòÂ§öÊ¨°Êèê‰∫§‰∏∫‰∏ÄÊ¨°Ôºâ 12345insert into test values(1,2);insert into test values(1,3);insert into test values(1,4);//ÂêàÂπ∂Â§öÊù°‰∏∫‰∏ÄÊù°insert into test values(1,2),(1,3),(1,4) DQL‰ºòÂåñ Order by‰ºòÂåñ Â§öÁî®Á¥¢ÂºïÊéíÂ∫è ÊôÆÈÄöÁªìÊûúÊéíÂ∫èÔºàÈùûÁ¥¢ÂºïÊéíÂ∫èÔºâFilesort group by‰ºòÂåñ ‰ΩøÁî®order by null,ÂèñÊ∂àÈªòËÆ§ÊéíÂ∫è Á≠âÁ≠âÁ≠âÁ≠â‚Ä¶ 18. jdbcÊâπÈáèÊèíÂÖ•Âá†Áôæ‰∏áÊï∞ÊçÆÊÄé‰πàÂÆûÁé∞ 1„ÄÅÂèòÂ§öÊ¨°Êèê‰∫§‰∏∫‰∏ÄÊ¨° 2„ÄÅ‰ΩøÁî®ÊâπÈáèÊìç‰Ωú 3„ÄÅÂÉèËøôÊ†∑ÁöÑÊâπÈáèÊèíÂÖ•Êìç‰ΩúËÉΩ‰∏ç‰ΩøÁî®‰ª£Á†ÅÊìç‰ΩúÂ∞±‰∏ç‰ΩøÁî®ÔºåÂèØ‰ª•‰ΩøÁî®Â≠òÂÇ®ËøáÁ®ãÊù•ÂÆûÁé∞ mysql‰ºòÂåñÊâãÊÆµ‰ªãÁªçÂà∞ËøôÈáå„ÄÇ 19. ËÅöÁ∞áÁ¥¢ÂºïÂíåÈùûËÅöÁ∞áÁ¥¢Âºï Á¥¢ÂºïÂàÜ‰∏∫ËÅöÁ∞áÁ¥¢ÂºïÂíåÈùûËÅöÁ∞áÁ¥¢Âºï„ÄÇ ‚ÄúËÅöÁ∞áÁ¥¢Âºï‚Äù ‰ª•‰∏ÄÊú¨Ëã±ÊñáËØæÊú¨‰∏∫‰æãÔºåË¶ÅÊâæÁ¨¨8ËØæÔºåÁõ¥Êé•Áøª‰π¶ÔºåËã•ÂÖàÁøªÂà∞Á¨¨5ËØæÔºåÂàôÂæÄÂêéÁøªÔºåÂÜçÁøªÂà∞Á¨¨10ËØæÔºåÂàôÂèàÂæÄÂâçÁøª„ÄÇËøôÊú¨‰π¶Êú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™Á¥¢ÂºïÔºåÂç≥‚ÄúËÅöÁ∞áÁ¥¢Âºï‚Äù„ÄÇ ‚ÄúÈùûËÅöÁ∞áÁ¥¢Âºï‚Äù Â¶ÇÊûúË¶ÅÊâæ&quot;fire‚ÄùËøô‰∏™ÂçïËØçÔºå‰ºöÁøªÂà∞‰π¶ÂêéÈù¢ÁöÑÈôÑÂΩïÔºåËøô‰∏™ÈôÑÂΩïÊòØÊåâÂ≠óÊØçÊéíÂ∫èÁöÑÔºåÊâæÂà∞FÂ≠óÊØçÈÇ£‰∏ÄÂùóÔºåÂÜçÊâæÂà∞&quot;fire‚ÄùÔºåÂØπÂ∫îÁöÑ‰ºöÊòØÂÆÉÂú®Á¨¨Âá†ËØæ„ÄÇËøô‰∏™ÈôÑÂΩïÔºå‰∏∫‚ÄúÈùûËÅöÁ∞áÁ¥¢Âºï‚Äù„ÄÇ Áî±Ê≠§ÂèØËßÅÔºåËÅöÁ∞áÁ¥¢ÂºïÔºåÁ¥¢ÂºïÁöÑÈ°∫Â∫èÂ∞±ÊòØÊï∞ÊçÆÂ≠òÊîæÁöÑÈ°∫Â∫èÔºåÊâÄ‰ª•ÔºåÂæàÂÆπÊòìÁêÜËß£Ôºå‰∏ÄÂº†Êï∞ÊçÆË°®Âè™ËÉΩÊúâ‰∏Ä‰∏™ËÅöÁ∞áÁ¥¢Âºï„ÄÇ ËÅöÁ∞áÁ¥¢ÂºïË¶ÅÊØîÈùûËÅöÁ∞áÁ¥¢ÂºïÊü•ËØ¢ÊïàÁéáÈ´òÂæàÂ§öÔºåÁâπÂà´ÊòØËåÉÂõ¥Êü•ËØ¢ÁöÑÊó∂ÂÄô„ÄÇÊâÄ‰ª•ÔºåËá≥‰∫éËÅöÁ∞áÁ¥¢ÂºïÂà∞Â∫ïÂ∫îËØ•‰∏∫‰∏ªÈîÆÔºåËøòÊòØÂÖ∂‰ªñÂ≠óÊÆµÔºåËøô‰∏™ÂèØ‰ª•ÂÜçËÆ®ËÆ∫„ÄÇ 1„ÄÅMYSQLÁöÑÁ¥¢Âºï mysql‰∏≠Ôºå‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÂØπÁ¥¢ÂºïÁöÑÂÆûÁé∞ÊñπÂºè‰∏çÂêåÔºåÂ§ßËá¥ËØ¥‰∏ãMyISAMÂíåInnoDB‰∏§ÁßçÂ≠òÂÇ®ÂºïÊìé„ÄÇ MyISAMÂ≠òÂÇ®ÂºïÊìéÁöÑÁ¥¢ÂºïÂÆûÁé∞ MyISAMÁöÑB+TreeÁöÑÂè∂Â≠êËäÇÁÇπ‰∏äÁöÑdataÔºåÂπ∂‰∏çÊòØÊï∞ÊçÆÊú¨Ë∫´ÔºåËÄåÊòØÊï∞ÊçÆÂ≠òÊîæÁöÑÂú∞ÂùÄ„ÄÇ‰∏ªÁ¥¢ÂºïÂíåËæÖÂä©Á¥¢ÂºïÊ≤°Âï•Âå∫Âà´ÔºåÂè™ÊòØ‰∏ªÁ¥¢Âºï‰∏≠ÁöÑkey‰∏ÄÂÆöÂæóÊòØÂîØ‰∏ÄÁöÑ„ÄÇËøôÈáåÁöÑÁ¥¢ÂºïÈÉΩÊòØÈùûËÅöÁ∞áÁ¥¢Âºï„ÄÇ MyISAMËøòÈááÁî®ÂéãÁº©Êú∫Âà∂Â≠òÂÇ®Á¥¢ÂºïÔºåÊØîÂ¶ÇÔºåÁ¨¨‰∏Ä‰∏™Á¥¢Âºï‰∏∫‚Äúher‚ÄùÔºåÁ¨¨‰∫å‰∏™Á¥¢Âºï‰∏∫‚Äúhere‚ÄùÔºåÈÇ£‰πàÁ¨¨‰∫å‰∏™Á¥¢Âºï‰ºöË¢´Â≠òÂÇ®‰∏∫‚Äú3,e‚ÄùÔºåËøôÊ†∑ÁöÑÁº∫ÁÇπÊòØÂêå‰∏Ä‰∏™ËäÇÁÇπ‰∏≠ÁöÑÁ¥¢ÂºïÂè™ËÉΩÈááÁî®È°∫Â∫èÊü•Êâæ„ÄÇ InnoDBÂ≠òÂÇ®ÂºïÊìéÁöÑÁ¥¢ÂºïÂÆûÁé∞ InnoDB ÁöÑÊï∞ÊçÆÊñá‰ª∂Êú¨Ë∫´Â∞±ÊòØÁ¥¢ÂºïÊñá‰ª∂ÔºåB+TreeÁöÑÂè∂Â≠êËäÇÁÇπ‰∏äÁöÑdataÂ∞±ÊòØÊï∞ÊçÆÊú¨Ë∫´Ôºåkey‰∏∫‰∏ªÈîÆÔºåËøôÊòØËÅöÁ∞áÁ¥¢Âºï„ÄÇÈùûËÅöÁ∞áÁ¥¢ÂºïÔºåÂè∂Â≠êËäÇÁÇπ‰∏äÁöÑdataÊòØ‰∏ªÈîÆ (ÊâÄ‰ª•ËÅöÁ∞áÁ¥¢ÂºïÁöÑkeyÔºå‰∏çËÉΩËøáÈïø)„ÄÇ‰∏∫‰ªÄ‰πàÂ≠òÊîæÁöÑ‰∏ªÈîÆÔºåËÄå‰∏çÊòØËÆ∞ÂΩïÊâÄÂú®Âú∞ÂùÄÂë¢ÔºåÁêÜÁî±Áõ∏ÂΩìÁÆÄÂçïÔºåÂõ†‰∏∫ËÆ∞ÂΩïÊâÄÂú®Âú∞ÂùÄÂπ∂‰∏çËÉΩ‰øùËØÅ‰∏ÄÂÆö‰∏ç‰ºöÂèòÔºå‰ΩÜ‰∏ªÈîÆÂèØ‰ª•‰øùËØÅ„ÄÇ Ëá≥‰∫é‰∏∫‰ªÄ‰πà‰∏ªÈîÆÈÄöÂ∏∏Âª∫ËÆÆ‰ΩøÁî®Ëá™Â¢ûidÂë¢Ôºü 2.ËÅöÁ∞áÁ¥¢Âºï ËÅöÁ∞áÁ¥¢ÂºïÁöÑÊï∞ÊçÆÁöÑÁâ©ÁêÜÂ≠òÊîæÈ°∫Â∫è‰∏éÁ¥¢ÂºïÈ°∫Â∫èÊòØ‰∏ÄËá¥ÁöÑÔºåÂç≥ÔºöÂè™Ë¶ÅÁ¥¢ÂºïÊòØÁõ∏ÈÇªÁöÑÔºåÈÇ£‰πàÂØπÂ∫îÁöÑÊï∞ÊçÆ‰∏ÄÂÆö‰πüÊòØÁõ∏ÈÇªÂú∞Â≠òÊîæÂú®Á£ÅÁõò‰∏äÁöÑ„ÄÇÂ¶ÇÊûú‰∏ªÈîÆ‰∏çÊòØËá™Â¢ûidÔºåÈÇ£‰πàÂèØ‰ª•ÊÉ≥ Ë±°ÔºåÂÆÉ‰ºöÂπ≤‰∫õ‰ªÄ‰πàÔºå‰∏çÊñ≠Âú∞Ë∞ÉÊï¥Êï∞ÊçÆÁöÑÁâ©ÁêÜÂú∞ÂùÄ„ÄÅÂàÜÈ°µÔºåÂΩìÁÑ∂‰πüÊúâÂÖ∂‰ªñ‰∏Ä‰∫õÊé™ÊñΩÊù•ÂáèÂ∞ëËøô‰∫õÊìç‰ΩúÔºå‰ΩÜÂç¥Êó†Ê≥ïÂΩªÂ∫ïÈÅøÂÖç„ÄÇ‰ΩÜÔºåÂ¶ÇÊûúÊòØËá™Â¢ûÁöÑÔºåÈÇ£Â∞±ÁÆÄÂçï‰∫ÜÔºåÂÆÉÂè™ÈúÄË¶Å‰∏Ä È°µ‰∏ÄÈ°µÂú∞ÂÜôÔºåÁ¥¢ÂºïÁªìÊûÑÁõ∏ÂØπÁ¥ßÂáëÔºåÁ£ÅÁõòÁ¢éÁâáÂ∞ëÔºåÊïàÁéá‰πüÈ´ò„ÄÇ ËÅöÁ∞áÁ¥¢Âºï‰∏ç‰ΩÜÂú®Ê£ÄÁ¥¢‰∏äÂèØ‰ª•Â§ßÂ§ßÊª¥ÊèêÈ´òÊïàÁéáÔºåÂú®Êï∞ÊçÆËØªÂèñ‰∏ä‰πü‰∏ÄÊ†∑„ÄÇÊØîÂ¶ÇÔºöÈúÄË¶ÅÊü•ËØ¢f~tÁöÑÊâÄÊúâÂçïËØç„ÄÇ ‰∏Ä‰∏™‰ΩøÁî®MyISAMÁöÑ‰∏ªÁ¥¢ÂºïÔºå‰∏Ä‰∏™‰ΩøÁî®InnoDBÁöÑËÅöÁ∞áÁ¥¢Âºï„ÄÇ‰∏§ÁßçÁ¥¢ÂºïÁöÑB+TreeÊ£ÄÁ¥¢Êó∂Èó¥‰∏ÄÊ†∑Ôºå‰ΩÜËØªÂèñÊó∂Âç¥Êúâ‰∫ÜÂ∑ÆÂºÇ„ÄÇ Âõ†‰∏∫MyISAMÁöÑ‰∏ªÁ¥¢ÂºïÂπ∂ÈùûËÅöÁ∞áÁ¥¢ÂºïÔºåÈÇ£‰πà‰ªñÁöÑÊï∞ÊçÆÁöÑÁâ©ÁêÜÂú∞ÂùÄÂøÖÁÑ∂ÊòØÂáå‰π±ÁöÑÔºåÊãøÂà∞Ëøô‰∫õÁâ©ÁêÜÂú∞ÂùÄÔºåÊåâÁÖßÂêàÈÄÇÁöÑÁÆóÊ≥ïËøõË°åI/OËØªÂèñÔºå‰∫éÊòØÂºÄÂßã‰∏çÂÅúÁöÑÂØªÈÅì‰∏çÂÅúÁöÑÊóãËΩ¨„ÄÇËÅöÁ∞áÁ¥¢ÂºïÂàôÂè™ÈúÄ‰∏ÄÊ¨°I/O„ÄÇ ‰∏çËøáÔºåÂ¶ÇÊûúÊ∂âÂèäÂà∞Â§ßÊï∞ÊçÆÈáèÁöÑÊéíÂ∫è„ÄÅÂÖ®Ë°®Êâ´Êèè„ÄÅcount‰πãÁ±ªÁöÑÊìç‰ΩúÁöÑËØùÔºåËøòÊòØMyISAMÂç†‰ºòÂäø‰∫õÔºåÂõ†‰∏∫Á¥¢ÂºïÊâÄÂç†Á©∫Èó¥Â∞èÔºåËøô‰∫õÊìç‰ΩúÊòØÈúÄË¶ÅÂú®ÂÜÖÂ≠ò‰∏≠ÂÆåÊàêÁöÑ„ÄÇ Èâ¥‰∫éËÅöÁ∞áÁ¥¢ÂºïÁöÑËåÉÂõ¥Êü•ËØ¢ÊïàÁéáÔºåÂæàÂ§ö‰∫∫ËÆ§‰∏∫‰ΩøÁî®‰∏ªÈîÆ‰Ωú‰∏∫ËÅöÁ∞áÁ¥¢ÂºïÂ§™Â§öÊµ™Ë¥πÔºåÊØïÁ´üÂá†‰πé‰∏ç‰ºö‰ΩøÁî®‰∏ªÈîÆËøõË°åËåÉÂõ¥Êü•ËØ¢„ÄÇ‰ΩÜËã•ÂÜçËÄÉËôëÂà∞ËÅöÁ∞áÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÔºåÂ∞±‰∏çÂ•ΩÂÆöËÆ∫‰∫Ü„ÄÇ 20. sqlÊ≥®ÂÖ•ÈóÆÈ¢ò 20.1 ‰ªÄ‰πàÊòØsqlÊ≥®ÂÖ• sqlÊ≥®ÂÖ•Â§ßÂÆ∂ÈÉΩ‰∏çÈôåÁîüÔºåÊòØ‰∏ÄÁßçÂ∏∏ËßÅÁöÑÊîªÂáªÊñπÂºèÔºåÊîªÂáªËÄÖÂú®ÁïåÈù¢ÁöÑË°®Âçï‰ø°ÊÅØÊàñurl‰∏äËæìÂÖ•‰∏Ä‰∫õÂ•áÊÄ™ÁöÑsqlÁâáÊÆµÔºå‰æãÂ¶Ç‚Äúor ‚Äò1‚Äô=‚Äô1‚Äô‚ÄùËøôÊ†∑ÁöÑËØ≠Âè•ÔºåÊúâÂèØËÉΩÂÖ•‰æµÂèÇÊï∞Ê†°È™å‰∏çË∂≥ÁöÑÂ∫îÁî®Á®ãÂ∫è„ÄÇÊâÄ‰ª•Âú®Êàë‰ª¨ÁöÑÂ∫îÁî®‰∏≠ÈúÄË¶ÅÂÅö‰∏Ä‰∫õÂ∑•‰ΩúÔºåÊù•Èò≤Â§áËøôÊ†∑ÁöÑÊîªÂáªÊñπÂºè„ÄÇÂú®‰∏Ä‰∫õÂÆâÂÖ®ÊÄßÂæàÈ´òÁöÑÂ∫îÁî®‰∏≠ÔºåÊØîÂ¶ÇÈì∂Ë°åËΩØ‰ª∂ÔºåÁªèÂ∏∏‰ΩøÁî®Â∞ÜsqlËØ≠Âè•ÂÖ®ÈÉ®ÊõøÊç¢‰∏∫Â≠òÂÇ®ËøáÁ®ãËøôÊ†∑ÁöÑÊñπÂºèÔºåÊù•Èò≤Ê≠¢sqlÊ≥®ÂÖ•ÔºåËøôÂΩìÁÑ∂ÊòØ‰∏ÄÁßçÂæàÂÆâÂÖ®ÁöÑÊñπÂºèÔºå‰ΩÜÊàë‰ª¨Âπ≥Êó∂ÂºÄÂèë‰∏≠ÔºåÂèØËÉΩ‰∏çÈúÄË¶ÅËøôÁßçÊ≠ªÊùøÁöÑÊñπÂºè„ÄÇ 20.2 PrepareStatementËß£ÂÜ≥SQLÊ≥®ÂÖ•ÁöÑÈóÆÈ¢ò Âú®‰ΩøÁî®JDBCÁöÑËøáÁ®ã‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®PrepareStatementËøõË°åÈ¢ÑÂ§ÑÁêÜÔºåÈ¢ÑÂ§ÑÁêÜÁöÑ‰ºòÂäøÂ∞±ÊòØÈ¢ÑÈò≤ÁªùÂ§ßÂ§öÊï∞ÁöÑSQLÊ≥®ÂÖ•ÔºõËÄå‰∏îÈíàÂØπÂ§öÊ¨°Êìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑÊÉÖÂÜµÔºåÂèØ‰ª•ÊûÅÂ§ßÁöÑÊèêÈ´òËÆøÈóÆÊï∞ÊçÆÂ∫ìÁöÑÊïàÁéá„ÄÇ ÈÇ£‰∏∫‰ªÄ‰πàÂÆÉËøôÊ†∑Â§ÑÁêÜÂ∞±ËÉΩÈ¢ÑÈò≤SQLÊ≥®ÂÖ•ÊèêÈ´òÂÆâÂÖ®ÊÄßÂë¢ÔºüÂÖ∂ÂÆûÊòØÂõ†‰∏∫SQLËØ≠Âè•Âú®Á®ãÂ∫èËøêË°åÂâçÂ∑≤ÁªèËøõË°å‰∫ÜÈ¢ÑÁºñËØë„ÄÇÂú®Á®ãÂ∫èËøêË°åÊó∂Á¨¨‰∏ÄÊ¨°Êìç‰ΩúÊï∞ÊçÆÂ∫ì‰πãÂâçÔºåSQLËØ≠Âè•Â∑≤ÁªèË¢´Êï∞ÊçÆÂ∫ìÂàÜÊûêÔºåÁºñËØëÂíå‰ºòÂåñÔºåÂØπÂ∫îÁöÑÊâßË°åËÆ°Âàí‰πü‰ºöÁºìÂ≠ò‰∏ãÊù•Âπ∂ÂÖÅËÆ∏Êï∞ÊçÆÂ∫ì‰ª•ÂèÇÊï∞ÂåñÁöÑÂΩ¢ÂºèËøõË°åÊü•ËØ¢„ÄÇÂΩìËøêË°åÊó∂Âä®ÊÄÅÂú∞ÊääÂèÇÊï∞‰º†ÁªôPreprareStatementÊó∂ÔºåÂç≥‰ΩøÂèÇÊï∞ÈáåÊúâÊïèÊÑüÂ≠óÁ¨¶Â¶Ç or ‚Äò1=1‚ÄôÔºåÊï∞ÊçÆÂ∫ì‰πü‰ºö‰Ωú‰∏∫‰∏Ä‰∏™ÂèÇÊï∞‰∏Ä‰∏™Â≠óÊÆµÁöÑÂ±ûÊÄßÂÄºÊù•Â§ÑÁêÜËÄå‰∏ç‰ºö‰Ωú‰∏∫‰∏Ä‰∏™SQLÊåá‰ª§„ÄÇÂ¶ÇÊ≠§ÔºåÂ∞±Ëµ∑Âà∞‰∫ÜSQLÊ≥®ÂÖ•ÁöÑ‰ΩúÁî®‰∫ÜÔºÅ 20.3 MyBatisÂ¶Ç‰ΩïÈò≤Ê≠¢sqlÊ≥®ÂÖ• mybatisÊ°ÜÊû∂‰Ωú‰∏∫‰∏ÄÊ¨æÂçäËá™Âä®ÂåñÁöÑÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂ÔºåÂÖ∂sqlËØ≠Âè•ÈÉΩË¶ÅÊàë‰ª¨Ëá™Â∑±Êù•ÊâãÂä®ÁºñÂÜôÔºåËøô‰∏™Êó∂ÂÄôÂΩìÁÑ∂ÈúÄË¶ÅÈò≤Ê≠¢sqlÊ≥®ÂÖ•„ÄÇÂÖ∂ÂÆûMybatisÁöÑsqlÊòØ‰∏Ä‰∏™ÂÖ∑Êúâ‚ÄúËæìÂÖ•+ËæìÂá∫‚ÄùÂäüËÉΩÔºåÁ±ª‰ºº‰∫éÂáΩÊï∞ÁöÑÁªìÊûÑÔºåÂ¶Ç‰∏ãÔºö 12345&lt;select id=‚ÄúgetBlogById‚Äú resultType=‚ÄúBlog‚Äú parameterType=‚Äùint‚Äù&gt; select id,title,author,content from blog where id=#&#123;id&#125; &lt;/select&gt; ËøôÈáåÔºåparameterTypeÊ†áÁ§∫‰∫ÜËæìÂÖ•ÁöÑÂèÇÊï∞Á±ªÂûãÔºåresultTypeÊ†áÁ§∫‰∫ÜËæìÂá∫ÁöÑÂèÇÊï∞Á±ªÂûã„ÄÇÂõûÂ∫î‰∏äÊñáÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Èò≤Ê≠¢sqlÊ≥®ÂÖ•ÔºåÁêÜÊâÄÂΩìÁÑ∂Âú∞Ë¶ÅÂú®ËæìÂÖ•ÂèÇÊï∞‰∏ä‰∏ãÂäüÂ§´„ÄÇ‰∏äÈù¢‰ª£Á†Å‰∏≠‚Äú#{id}‚ÄùÂç≥ËæìÂÖ•ÂèÇÊï∞Âú®sql‰∏≠ÊãºÊé•ÁöÑÈÉ®ÂàÜÔºå‰º†ÂÖ•ÂèÇÊï∞ÂêéÔºåÊâìÂç∞Âá∫ÊâßË°åÁöÑsqlËØ≠Âè•Ôºå‰ºöÁúãÂà∞sqlÊòØËøôÊ†∑ÁöÑÔºö select id,title,author,content from blog where id = ? ‰∏çÁÆ°ËæìÂÖ•‰ªÄ‰πàÂèÇÊï∞ÔºåÊâìÂç∞Âá∫ÁöÑsqlÈÉΩÊòØËøôÊ†∑ÁöÑ„ÄÇËøôÊòØÂõ†‰∏∫mybatisÂêØÁî®‰∫ÜÈ¢ÑÁºñËØëÂäüËÉΩÔºåÂú®sqlÊâßË°åÂâçÔºå‰ºöÂÖàÂ∞Ü‰∏äÈù¢ÁöÑsqlÂèëÈÄÅÁªôÊï∞ÊçÆÂ∫ìËøõË°åÁºñËØëÔºåÊâßË°åÊó∂ÔºåÁõ¥Êé•‰ΩøÁî®ÁºñËØëÂ•ΩÁöÑsqlÔºåÊõøÊç¢Âç†‰ΩçÁ¨¶‚ÄúÔºü‚ÄùÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂõ†‰∏∫sqlÊ≥®ÂÖ•Âè™ËÉΩÂØπÁºñËØëËøáÁ®ãËµ∑‰ΩúÁî®ÔºåÊâÄ‰ª•ËøôÊ†∑ÁöÑÊñπÂºèÂ∞±ÂæàÂ•ΩÂú∞ÈÅøÂÖç‰∫ÜsqlÊ≥®ÂÖ•ÁöÑÈóÆÈ¢ò„ÄÇ mybatisÊòØÂ¶Ç‰ΩïÂÅöÂà∞sqlÈ¢ÑÁºñËØëÁöÑÂë¢ÔºüÂÖ∂ÂÆûÂú®Ê°ÜÊû∂Â∫ïÂ±ÇÔºåÊòØjdbc‰∏≠ÁöÑPreparedStatementÁ±ªÂú®Ëµ∑‰ΩúÁî®ÔºåPreparedStatementÊòØÊàë‰ª¨ÂæàÁÜüÊÇâÁöÑStatementÁöÑÂ≠êÁ±ªÔºåÂÆÉÁöÑÂØπË±°ÂåÖÂê´‰∫ÜÁºñËØëÂ•ΩÁöÑsqlËØ≠Âè•„ÄÇËøôÁßç‚ÄúÂáÜÂ§áÂ•Ω‚ÄùÁöÑÊñπÂºè‰∏ç‰ªÖËÉΩÊèêÈ´òÂÆâÂÖ®ÊÄßÔºåËÄå‰∏îÂú®Â§öÊ¨°ÊâßË°å‰∏Ä‰∏™sqlÊó∂ÔºåËÉΩÂ§üÊèêÈ´òÊïàÁéáÔºåÂéüÂõ†ÊòØsqlÂ∑≤ÁºñËØëÂ•ΩÔºåÂÜçÊ¨°ÊâßË°åÊó∂Êó†ÈúÄÂÜçÁºñËØë„ÄÇ Ë°•ÂÖÖ 12345&lt;select id=‚ÄúorderBlog‚Äú resultType=‚ÄúBlog‚Äú parameterType=‚Äùmap‚Äù&gt; select id,title,author,content from blog order by $&#123;orderParam&#125; &lt;/select&gt; ‰ªîÁªÜËßÇÂØüÔºåÂÜÖËÅîÂèÇÊï∞ÁöÑÊ†ºÂºèÁî±‚Äú#{xxx}‚ÄùÂèò‰∏∫‰∫Ü${xxx}„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÁªôÂèÇÊï∞‚ÄúorderParam‚ÄùËµãÂÄº‰∏∫‚Äùid‚Äù,Â∞ÜsqlÊâìÂç∞Âá∫Êù•ÔºåÊòØËøôÊ†∑ÁöÑÔºö select id,title,author,content from blog order by id ÊòæÁÑ∂ÔºåËøôÊ†∑ÊòØÊó†Ê≥ïÈòªÊ≠¢sqlÊ≥®ÂÖ•ÁöÑ„ÄÇÂú®mybatis‰∏≠Ôºå‚Äù${xxx}‚ÄùËøôÊ†∑Ê†ºÂºèÁöÑÂèÇÊï∞‰ºöÁõ¥Êé•ÂèÇ‰∏ésqlÁºñËØëÔºå‰ªéËÄå‰∏çËÉΩÈÅøÂÖçÊ≥®ÂÖ•ÊîªÂáª„ÄÇ‰ΩÜÊ∂âÂèäÂà∞Âä®ÊÄÅË°®ÂêçÂíåÂàóÂêçÊó∂ÔºåÂè™ËÉΩ‰ΩøÁî®‚Äú${xxx}‚ÄùËøôÊ†∑ÁöÑÂèÇÊï∞Ê†ºÂºèÔºåÊâÄ‰ª•ÔºåËøôÊ†∑ÁöÑÂèÇÊï∞ÈúÄË¶ÅÊàë‰ª¨Âú®‰ª£Á†Å‰∏≠ÊâãÂ∑•ËøõË°åÂ§ÑÁêÜÊù•Èò≤Ê≠¢Ê≥®ÂÖ•„ÄÇ 21. mysqlÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅ 21.1 ÊÇ≤ËßÇÈîÅ ÊÇ≤ËßÇÈîÅÔºàPessimistic LockÔºâÔºåÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÂæàÊÇ≤ËßÇÔºåÊØèÊ¨°ÂéªÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰ºö‰øÆÊîπÔºåÊâÄ‰ª•ÊØèÊ¨°Âú®ÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩ‰ºö‰∏äÈîÅÔºåËøôÊ†∑Âà´‰∫∫ÊÉ≥ÊãøËøô‰∏™Êï∞ÊçÆÂ∞±‰ºöblockÁõ¥Âà∞ÂÆÉÊãøÂà∞ÈîÅ„ÄÇ ÊÇ≤ËßÇÈîÅÔºöÂÅáÂÆö‰ºöÂèëÁîüÂπ∂ÂèëÂÜ≤Á™ÅÔºåÂ±èËîΩ‰∏ÄÂàáÂèØËÉΩËøùÂèçÊï∞ÊçÆÂÆåÊï¥ÊÄßÁöÑÊìç‰Ωú„ÄÇ Java synchronized Â∞±Â±û‰∫éÊÇ≤ËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÔºåÊØèÊ¨°Á∫øÁ®ãË¶Å‰øÆÊîπÊï∞ÊçÆÊó∂ÈÉΩÂÖàËé∑ÂæóÈîÅÔºå‰øùËØÅÂêå‰∏ÄÊó∂ÂàªÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÊìç‰ΩúÊï∞ÊçÆÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂàô‰ºöË¢´block„ÄÇ 21.2 ‰πêËßÇÈîÅ ‰πêËßÇÈîÅÔºàOptimistic LockÔºâÔºåÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÂæà‰πêËßÇÔºåÊØèÊ¨°ÂéªÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰∏ç‰ºö‰øÆÊîπÔºåÊâÄ‰ª•‰∏ç‰ºö‰∏äÈîÅÔºå‰ΩÜÊòØÂú®Êèê‰∫§Êõ¥Êñ∞ÁöÑÊó∂ÂÄô‰ºöÂà§Êñ≠‰∏Ä‰∏ãÂú®Ê≠§ÊúüÈó¥Âà´‰∫∫ÊúâÊ≤°ÊúâÂéªÊõ¥Êñ∞Ëøô‰∏™Êï∞ÊçÆ„ÄÇ‰πêËßÇÈîÅÈÄÇÁî®‰∫éËØªÂ§öÂÜôÂ∞ëÁöÑÂ∫îÁî®Âú∫ÊôØÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÂêûÂêêÈáè„ÄÇ ‰πêËßÇÈîÅÔºöÂÅáËÆæ‰∏ç‰ºöÂèëÁîüÂπ∂ÂèëÂÜ≤Á™ÅÔºåÂè™Âú®Êèê‰∫§Êìç‰ΩúÊó∂Ê£ÄÊü•ÊòØÂê¶ËøùÂèçÊï∞ÊçÆÂÆåÊï¥ÊÄß„ÄÇ ‰πêËßÇÈîÅ‰∏ÄËà¨Êù•ËØ¥Êúâ‰ª•‰∏ã2ÁßçÊñπÂºèÔºö ‰ΩøÁî®Êï∞ÊçÆÁâàÊú¨ÔºàVersionÔºâËÆ∞ÂΩïÊú∫Âà∂ÂÆûÁé∞ÔºåËøôÊòØ‰πêËßÇÈîÅÊúÄÂ∏∏Áî®ÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºè„ÄÇ‰ΩïË∞ìÊï∞ÊçÆÁâàÊú¨ÔºüÂç≥‰∏∫Êï∞ÊçÆÂ¢ûÂä†‰∏Ä‰∏™ÁâàÊú¨Ê†áËØÜÔºå‰∏ÄËà¨ÊòØÈÄöËøá‰∏∫Êï∞ÊçÆÂ∫ìË°®Â¢ûÂä†‰∏Ä‰∏™Êï∞Â≠óÁ±ªÂûãÁöÑ version Â≠óÊÆµÊù•ÂÆûÁé∞„ÄÇÂΩìËØªÂèñÊï∞ÊçÆÊó∂ÔºåÂ∞ÜversionÂ≠óÊÆµÁöÑÂÄº‰∏ÄÂêåËØªÂá∫ÔºåÊï∞ÊçÆÊØèÊõ¥Êñ∞‰∏ÄÊ¨°ÔºåÂØπÊ≠§versionÂÄºÂä†‰∏Ä„ÄÇÂΩìÊàë‰ª¨Êèê‰∫§Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåÂà§Êñ≠Êï∞ÊçÆÂ∫ìË°®ÂØπÂ∫îËÆ∞ÂΩïÁöÑÂΩìÂâçÁâàÊú¨‰ø°ÊÅØ‰∏éÁ¨¨‰∏ÄÊ¨°ÂèñÂá∫Êù•ÁöÑversionÂÄºËøõË°åÊØîÂØπÔºåÂ¶ÇÊûúÊï∞ÊçÆÂ∫ìË°®ÂΩìÂâçÁâàÊú¨Âè∑‰∏éÁ¨¨‰∏ÄÊ¨°ÂèñÂá∫Êù•ÁöÑversionÂÄºÁõ∏Á≠âÔºåÂàô‰∫à‰ª•Êõ¥Êñ∞ÔºåÂê¶ÂàôËÆ§‰∏∫ÊòØËøáÊúüÊï∞ÊçÆ„ÄÇ ‰ΩøÁî®Êó∂Èó¥Êà≥ÔºàtimestampÔºâ„ÄÇ‰πêËßÇÈîÅÂÆöÁöÑÁ¨¨‰∫åÁßçÂÆûÁé∞ÊñπÂºèÂíåÁ¨¨‰∏ÄÁßçÂ∑Æ‰∏çÂ§öÔºåÂêåÊ†∑ÊòØÂú®ÈúÄË¶Å‰πêËßÇÈîÅÊéßÂà∂ÁöÑtable‰∏≠Â¢ûÂä†‰∏Ä‰∏™Â≠óÊÆµÔºåÂêçÁß∞Êó†ÊâÄË∞ìÔºåÂ≠óÊÆµÁ±ªÂûã‰ΩøÁî®Êó∂Èó¥Êà≥ÔºàtimestampÔºâ, Âíå‰∏äÈù¢ÁöÑversionÁ±ª‰ººÔºå‰πüÊòØÂú®Êõ¥Êñ∞Êèê‰∫§ÁöÑÊó∂ÂÄôÊ£ÄÊü•ÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠Êï∞ÊçÆÁöÑÊó∂Èó¥Êà≥ÂíåËá™Â∑±Êõ¥Êñ∞ÂâçÂèñÂà∞ÁöÑÊó∂Èó¥Êà≥ËøõË°åÂØπÊØîÔºåÂ¶ÇÊûú‰∏ÄËá¥ÂàôOKÔºåÂê¶ÂàôÂ∞±ÊòØÁâàÊú¨ÂÜ≤Á™Å„ÄÇ Java JUC‰∏≠ÁöÑatomicÂåÖÂ∞±ÊòØ‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÔºåAtomicInteger ÈÄöËøáCASÔºàCompare And SetÔºâÊìç‰ΩúÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÁöÑËá™Â¢û„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§çÊùÇÊü•ËØ¢ËÆ≠ÁªÉ]]></title>
    <url>%2F2019%2F01%2F27%2Fmysql%2F%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2%E8%AE%AD%E7%BB%83%2F</url>
    <content type="text"><![CDATA[ÂØπ‰∏Ä‰∫õÂú∫ÊôØËøõË°åsqlÁöÑ‰∏Ä‰∫õËÆ≠ÁªÉ„ÄÇ 1„ÄÅÊü•ËØ¢ËØ≠ÊñáÊàêÁª©ÊØîÊï∞Â≠¶ÊàêÁª©Â•ΩÁöÑÂ≠¶ÁîüÁöÑÂ≠¶Âè∑ 1234567891011121„ÄÅÊãøÂà∞ËØ≠ÊñáÁßëÁõÆÁöÑÊâÄÊúâÂàÜÊï∞idÂíåÂàÜÊï∞ÔºöSELECT Sid,score from score WHERE Cid=12„ÄÅÊãøÂà∞Êï∞Â≠¶ÁßëÁõÆÁöÑÊâÄÊúâÂàÜÊï∞idÂíåÂàÜÊï∞ÔºöSELECT Sid,score FROM score WHERE Cid=23„ÄÅÊâæÂà∞Âêå‰∏Ä‰∏™Â≠¶ÁîüÂØπÂ∫îÁöÑËØ≠ÊñáÂàÜÊï∞ÊØîÊï∞Â≠¶ÂàÜÊï∞È´òÁöÑ‰∫∫ÔºöSELECT a.Sid from (SELECT Sid,score from score WHERE Cid=1) a, (SELECT Sid,score FROM score WHERE Cid=2) bWHERE a.score&gt;b.score and a.Sid=b.Sid 2„ÄÅÊü•ËØ¢Âπ≥ÂùáÊàêÁª©Â§ß‰∫é60ÂàÜÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑ÂíåÂπ≥ÂùáÊàêÁª© 123456789SELECT sc.Sid, AVG(sc.score)FROM score scGROUP BY sc.SidHAVING AVG(sc.score) &gt; 60 3„ÄÅÊü•ËØ¢ÊâÄÊúâÂêåÂ≠¶ÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç„ÄÅÈÄâËØæÊï∞„ÄÅÊÄªÊàêÁª© 12345678910SELECT st.Sid AS 'Â≠¶Âè∑', st.Sname AS 'Â≠¶ÁîüÂßìÂêç', COUNT(sc.Cid) AS 'ÈÄâËØæÊï∞', SUM(sc.score) AS 'ÊÄªÂàÜ'FROM student stJOIN score sc ON st.Sid = sc.SidGROUP BY st.Sid 4„ÄÅÊü•ËØ¢Âßì‚ÄúÁéã‚ÄùÁöÑËÄÅÂ∏àÁöÑ‰∏™Êï∞ 123456SELECT count(te.Tname)FROM teacher teWHERE te.Tname LIKE 'Áéã%' 5„ÄÅÊü•ËØ¢Ê≤°Â≠¶Ëøá‚ÄúÁéã‰∫å‚ÄùËÄÅÂ∏àËØæÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç 123456789101112131415161718192021#1„ÄÅÊâæÂá∫ÊâÄÊúâÂ≠¶ÁîüÂØπÂ∫îÁöÑÂ≠¶Âè∑ÂíåËÄÅÂ∏àSELECT st.Sid,te.Tname from student stJOIN score sc ON st.Sid = sc.SidJOIN course co on sc.Cid = co.CidJOIN teacher te ON co.Tid = te.Tid#2„ÄÅÊâæÂà∞ÊâÄÊúâËÄÅÂ∏àÊòØÁéã‰∫îÁöÑÂ≠¶ÁîüidÂíåÂßìÂêçSELECT st.Sid,st.Sname,te.Tname from student stJOIN score sc ON st.Sid = sc.SidJOIN course co on sc.Cid = co.CidJOIN teacher te ON co.Tid = te.TidWHERE te.Tname='Áéã‰∫î'#3„ÄÅÊúÄÂêéÂ∞ÜÁéã‰∫îÁöÑÂÖ®ÈÉ®ÂâîÈô§ÔºåÂ∞±ÊòØÊ≤°ÊúâÂ≠¶Áéã‰∫îËØæÁöÑÂ≠¶Áîü‰ø°ÊÅØSELECT st.Sid,st.Sname from student st WHERE st.Sid NOT IN(SELECT st.Sid from student stJOIN score sc ON st.Sid = sc.SidJOIN course co on sc.Cid = co.CidJOIN teacher te ON co.Tid = te.TidWHERE te.Tname='Áéã‰∫î') 6„ÄÅÊü•ËØ¢Â≠¶Ëøá‚ÄúËØ≠Êñá‚ÄùÂπ∂‰∏î‰πüÂ≠¶Ëøá‚ÄúÊï∞Â≠¶‚ÄùËØæÁ®ãÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç 1234567891011121314#1„ÄÅÊâæÂà∞Â≠¶Ëøá"ËØ≠Êñá"ÁöÑÂ≠¶ÁîüSELECT st.Sid from student st JOIN score sc ON st.Sid = sc.Sid AND sc.Cid = 1#2„ÄÅÂú®Â≠¶ËøáËØ≠ÊñáÁöÑÂ≠¶Áîü‰∏≠ÂÜçÊâæÂá∫Â≠¶Êï∞Â≠¶ÁöÑÂ≠¶ÁîüSELECT st.Sid,st.Sname from student st JOIN score sc ON st.Sid = sc.Sid AND sc.Cid = 2AND st.Sid IN(SELECT st.Sid from student st JOIN score sc ON st.Sid = sc.Sid AND sc.Cid = 1) 7„ÄÅÊü•ËØ¢ËØæÁ®ãÁºñÂè∑‚ÄúÊï∞Â≠¶‚ÄùÁöÑÊàêÁª©ÊØîËØæÁ®ãÁºñÂè∑‚ÄúËØ≠Êñá‚ÄùËØæÁ®ã‰ΩéÁöÑÊâÄÊúâÂêåÂ≠¶ÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç 1234567891011121314151617#1„ÄÅÂÖàÊâæÂà∞ËØæÁ®ã‰∏∫ËØ≠ÊñáÁöÑÊâÄÊúâ‰∫∫ÁöÑÂàÜÊï∞SELECT * from score sc WHERE sc.Cid=1#2„ÄÅÂÖàÊâæÂà∞ËØæÁ®ã‰∏∫Êï∞Â≠¶ÁöÑÊâÄÊúâ‰∫∫ÁöÑÂàÜÊï∞SELECT * from score sc WHERE sc.Cid=2#3„ÄÅÊâæÂà∞ËØ≠ÊñáÊØîÊï∞Â≠¶ÊàêÁª©Â•ΩÁöÑÂ≠¶ÁîüÁöÑÊàêÁª©SELECT * FROM (SELECT * from score sc WHERE sc.Cid=1) sc1,(SELECT * from score sc WHERE sc.Cid=2) sc2WHERE sc1.score&gt;sc2.score AND sc1.Sid=sc2.Sid#4„ÄÅÂ∞ÜÂ≠¶Áîü‰ø°ÊÅØÂÜçÊãøÂá∫Êù•SELECT st.Sid,st.Sname from student st WHERE st.Sid IN(SELECT sc1.Sid FROM (SELECT * from score sc WHERE sc.Cid=1) sc1,(SELECT * from score sc WHERE sc.Cid=2) sc2WHERE sc1.score&gt;sc2.score AND sc1.Sid=sc2.Sid) 8„ÄÅÊü•ËØ¢ÊâÄÊúâËØæÁ®ãÊàêÁª©Â∞è‰∫é60ÂàÜÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç 123SELECT DISTINCT st.Sid,st.Sname from student stJOIN score sc on st.Sid = sc.SidWHERE sc.score&lt;60 9„ÄÅÊü•ËØ¢Ê≤°ÊúâÂ≠¶ÂÖ®ÊâÄÊúâËØæÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç 12345678910#1„ÄÅÁªüËÆ°Âá∫ÊâÄÊúâÂ≠¶ÁîüÂ≠¶‰π†ÁöÑËØæÁ®ãÊï∞SELECT COUNT(sc.Cid) from student stJOIN score sc on st.Sid=sc.SidGROUP BY sc.Sid#2„ÄÅÊØè‰∏™Â≠¶ÁîüÂ≠¶‰π†ÁöÑËØæÁ®ãÊï∞Â∞è‰∫éÊÄªËØæÁ®ãÊï∞ÔºåËØ¥ÊòéÊ≤°ÊúâÂ≠¶ÂÖ®SELECT st.Sid,st.Sname from student stJOIN score sc on st.Sid=sc.SidGROUP BY sc.SidHAVING COUNT(sc.Cid)&lt;(SELECT count(*) FROM course) 10„ÄÅ Êü•ËØ¢Ëá≥Â∞ëÊúâ‰∏ÄÈó®ËØæ‰∏éÂ≠¶Âè∑‰∏∫‚Äú1‚ÄùÁöÑÂêåÂ≠¶ÊâÄÂ≠¶Áõ∏ÂêåÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑ÂíåÂßìÂêç 12345678#1„ÄÅÊâæÂá∫Â≠¶Âè∑‰∏∫1ÁöÑÂ≠¶ÁîüÊâÄÂ≠¶ÁöÑËØæÁ®ãidSELECT sc.Cid from student st,score sc WHERE st.Sid=sc.Sid AND st.Sid=1#2„ÄÅ‰ªéÊü•ËØ¢ÁªìÊûúÊù•ÁúãÊòØÈÄâÊã©‰∫ÜËØ≠ÊñáÔºà1ÔºâÂíåÊï∞Â≠¶Ôºà2ÔºâSELECT DISTINCT st.Sid,st.Sname from student st,score sc WHERE st.Sid=sc.SidAND sc.Cid IN( SELECT sc.Cid from student st,score sc WHERE st.Sid=sc.Sid AND st.Sid=1) 11„ÄÅÊü•ËØ¢Âíå‚Äú1‚ÄùÂè∑ÁöÑÂêåÂ≠¶Â≠¶‰π†ÁöÑËØæÁ®ãÂÆåÂÖ®Áõ∏ÂêåÁöÑÂÖ∂‰ªñÂêåÂ≠¶Â≠¶Âè∑ÂíåÂßìÂêç 12345678910111213141516171819202122232425#1„ÄÅÊâæÂà∞2Âè∑ÂêåÂ≠¶ÊâÄÊúâÂ≠¶ÁöÑËØæÁ®ãSELECT sc.Cid from student stJOIN score sc on st.Sid=sc.SidWHERE st.Sid=2#2„ÄÅÊâæÂà∞ÊúâË∑ü‰ªñÂ≠¶ÁöÑ‰∏ç‰∏ÄÊ†∑ÁöÑÂ≠¶ÁîüSELECT DISTINCT st.Sid,st.Sname from student st,score sc WHERE st.Sid=sc.SidAND sc.Cid not in ( SELECT sc.Cid from student st JOIN score sc on st.Sid=sc.Sid WHERE st.Sid=1)#3„ÄÅÂÜçÊâæÂá∫‰∏ÄÊ†∑ÁöÑÂ≠¶ÁîüÔºåÂπ∂‰∏îÂ∞Ü‰ªñËá™Â∑±ÂâîÈô§SELECT DISTINCT st.Sid,st.Sname from student st,score sc WHERE st.Sid=sc.SidAND st.Sid not in( SELECT DISTINCT st.Sid from student st,score sc WHERE st.Sid=sc.Sid AND sc.Cid not in ( SELECT sc.Cid from student st JOIN score sc on st.Sid=sc.Sid WHERE st.Sid=1 ))AND st.Sid!=1 12„ÄÅÊåâÂπ≥ÂùáÊàêÁª©‰ªéÈ´òÂà∞‰ΩéÊòæÁ§∫ÊâÄÊúâÂ≠¶ÁîüÁöÑ‰∏âÈó®ÁöÑËØæÁ®ãÊàêÁª©,ÊåâÂ¶Ç‰∏ãÂΩ¢ÂºèÊòæÁ§∫Ôºö Â≠¶ÁîüID,ËØ≠Êñá,Êï∞Â≠¶,Ëã±ËØ≠,ÊúâÊïàËØæÁ®ãÊï∞,ÊúâÊïàÂπ≥ÂùáÂàÜ 123456789101112131415161718#1„ÄÅÊ†πÊçÆÂ≠¶ÁîüidÂàÜÁªÑÔºåÊåâÁÖßÂ≠¶ÁîüÁöÑÂπ≥ÂùáÊàêÁª©ÊéíÂ∫èSELECT *FROM student stJOIN score sc ON st.Sid=sc.SidGROUP BY st.SidORDER BY AVG(sc.score)#2„ÄÅÊåâÁÖßË¶ÅÊ±ÇÊòæÁ§∫SELECT st.Sid AS 'Â≠¶Áîüid',(SELECT score from score WHERE Cid=1 and st.Sid=Sid) AS 'ËØ≠Êñá',(SELECT score from score WHERE Cid=2 and st.Sid=Sid) AS 'Êï∞Â≠¶',(SELECT score from score WHERE Cid=3 and st.Sid=Sid) AS 'Ëã±ËØ≠',COUNT(*) AS 'ÊúâÊïàËØæÁ®ãÊï∞',AVG(sc.score) AS 'Âπ≥ÂùáÂàÜ'FROM student stJOIN score sc ON st.Sid=sc.SidGROUP BY st.SidORDER BY AVG(sc.score) 13„ÄÅÊü•ËØ¢ÂêÑÁßëÊàêÁª©ÊúÄÈ´òÂíåÊúÄ‰ΩéÁöÑÂàÜÔºö‰ª•Â¶Ç‰∏ãÂΩ¢ÂºèÊòæÁ§∫ÔºöËØæÁ®ãIDÔºåÊúÄÈ´òÂàÜÔºåÊúÄ‰ΩéÂàÜ 12345SELECT sc.Cid,MAX(sc.score) AS 'ÊúÄÈ´òÂàÜ',MIN(sc.score) AS 'ÊúÄ‰ΩéÂàÜ' from student stJOIN score sc on st.Sid=sc.SidGROUP BY sc.Cid 14„ÄÅÊ£ÄÁ¥¢‚ÄúËØ≠Êñá‚ÄùËØæÁ®ãÂàÜÊï∞Â∞è‰∫é60ÔºåÊåâÂàÜÊï∞ÈôçÂ∫èÊéíÂàóÁöÑÂêåÂ≠¶Â≠¶Âè∑ 1234SELECT st.Sid,st.Sname from student stJOIN score sc ON st.Sid=sc.SidWHERE sc.score&lt;60 AND sc.Cid=1ORDER BY sc.score DESC 15„ÄÅÊü•ËØ¢‰∏§Èó®‰ª•‰∏ä‰∏çÂèäÊ†ºËØæÁ®ãÁöÑÂêåÂ≠¶ÁöÑÂ≠¶Âè∑ÂèäÂÖ∂Âπ≥ÂùáÊàêÁª© 12345678910111213141516#1„ÄÅÂÖàÊü•ËØ¢Âá∫ÊåÇÁßëË∂ÖËøá‰∏§Èó®ÁöÑÂ≠¶ÁîüidSELECT sc.Sid from score sc WHERE sc.score&lt;60 GROUP BY sc.Sid HAVING count(*)&gt;2#2„ÄÅÂÜçÁõ∏Â∫îÂú∞Êü•Âá∫Â≠¶ÁîüÁöÑ‰ø°ÊÅØSELECT st.Sid,AVG(sc.score) from student stJOIN score sc on st.Sid=sc.SidWHERE st.Sid in( SELECT sc.Sid from score sc WHERE sc.score&lt;60 GROUP BY sc.Sid HAVING count(*)&gt;2)GROUP BY st.Sid 16„ÄÅÊü•ËØ¢Ê≤°Â≠¶Ëøá‚ÄúÁéã‰∫î‚ÄùËÄÅÂ∏àËÆ≤ÊéàÁöÑ‰ªª‰∏ÄÈó®ËØæÁ®ãÁöÑÂ≠¶ÁîüÂßìÂêç 123456789101112131415#1„ÄÅÊü•Âá∫Êä•ÂêçÁéã‰∫îËÄÅÂ∏àËØæÁ®ãÁöÑÂ≠¶ÁîüidSELECT st.Sid from student stJOIN score sc on st.Sid=sc.SidJOIN course co on sc.Cid=co.CidJOIN teacher te on co.Tid=te.TidWHERE te.Tname="Áéã‰∫î"#3„ÄÅÊâæÂá∫Ê≤°Êúâ‰∏äÁéã‰∫îËÄÅÂ∏àËØæÁöÑÂ≠¶ÁîüÊòØÂì™‰∫õSELECT * from student st WHERE st.Sid not in(SELECT st.Sid from student stJOIN score sc on st.Sid=sc.SidJOIN course co on sc.Cid=co.CidJOIN teacher te on co.Tid=te.TidWHERE te.Tname="Áéã‰∫î") 17„ÄÅÊü•ËØ¢ÈÄâ‰øÆÂÖ®ÈÉ®ËØæÁ®ãÁöÑÂ≠¶Áîü 12345678910#1„ÄÅÊü•Âá∫ÊØè‰∏™Â≠¶ÁîüÈÄâ‰øÆÁöÑËØæÁ®ãÊï∞SELECT st.Sid,st.Sname,count(sc.Cid) from student stJOIN score sc on st.Sid=sc.SidGROUP BY sc.Sid#2„ÄÅÂÜçÊâæÂá∫Êï∞ÈáèÁ≠â‰∫éÂÖ®ÈÉ®ËØæÁ®ãÁöÑÂ≠¶ÁîüSELECT st.Sid,st.Sname,count(sc.Cid) from student stJOIN score sc on st.Sid=sc.SidGROUP BY sc.SidHAVING count(sc.Cid)=(SELECT count(*) FROM course) 18„ÄÅÊü•ËØ¢ÂÖ®ÈÉ®Â≠¶ÁîüÈÉΩÈÄâ‰øÆÁöÑËØæÁ®ãÁöÑËØæÁ®ãÂè∑ÂíåËØæÁ®ãÂêç 12345#1„ÄÅÂú®ÂàÜÊï∞Ë°®‰∏≠ÊâæÂá∫ÊØèÁßçËØæÁ®ãÁöÑÈÄâ‰øÆ‰∫∫Êï∞SELECT sc.Cid,count(sc.Cid) from score sc GROUP BY sc.Cid#2„ÄÅ‰∫∫Êï∞Á≠â‰∫é7(8Âè∑Â≠¶ÁîüÊó†‰ªª‰ΩïÂèÇ‰∏é)ËØ¥ÊòéÊâÄÊúâ‰∫∫ÈÉΩÈÄâ‰∫ÜSELECT * from course co where co.Cid=(SELECT sc.Cid from score sc GROUP BY sc.Cid HAVING count(sc.Cid) = 7) 19„ÄÅÊ£ÄÁ¥¢Ëá≥Â∞ëÈÄâ‰øÆ‰∏§Èó®ËØæÁ®ãÁöÑÂ≠¶ÁîüÂ≠¶Âè∑ 12345678910#1„ÄÅÂÖàÈÄâÂá∫ÊØè‰∏™Â≠¶ÁîüÈÄâÁßÄÁöÑËØæÁ®ãSELECT count(sc.Cid) from student stJOIN score sc on sc.Sid=st.Sidgroup by sc.Sid#2„ÄÅÂÜçÈÄâÂá∫ÈÄâÁßÄËØæÁ®ãË∂ÖËøá2Èó®ÁöÑÂ≠¶ÁîüSELECT st.Sid,st.Sname from student stJOIN score sc on sc.Sid=st.Sidgroup by sc.SidHAVING count(sc.Cid)&gt;=2 20„ÄÅÁªüËÆ°ÊØèÈó®ËØæÁ®ãÁöÑÂ≠¶ÁîüÈÄâ‰øÆ‰∫∫Êï∞ 1234#1„ÄÅÁªüËÆ°Âá∫ÊØèÈó®ÈÄâÁßÄÁöÑÂ≠¶ÁîüÊï∞SELECT count(sc.Sid) from student stJOIN score sc on sc.Sid=st.SidGROUP BY sc.Cid]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLÂøÖÁü•ÂøÖ‰ºöÁü•ËØÜÁÇπÊèêÁÇº]]></title>
    <url>%2F2019%2F01%2F27%2Fmysql%2FSQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%2F</url>
    <content type="text"><![CDATA[ËøôÊòØÂØπ„ÄämysqlÂøÖÁü•ÂøÖ‰ºö„ÄãÁöÑÁü•ËØÜÊèêÁÇº„ÄÇ ‰∏Ä„ÄÅÂü∫Á°Ä Ê®°ÂºèÂÆö‰πâ‰∫ÜÊï∞ÊçÆÂ¶Ç‰ΩïÂ≠òÂÇ®„ÄÅÂ≠òÂÇ®‰ªÄ‰πàÊ†∑ÁöÑÊï∞ÊçÆ‰ª•ÂèäÊï∞ÊçÆÂ¶Ç‰ΩïÂàÜËß£Á≠â‰ø°ÊÅØÔºåÊï∞ÊçÆÂ∫ìÂíåË°®ÈÉΩÊúâÊ®°Âºè„ÄÇ ‰∏ªÈîÆÁöÑÂÄº‰∏çÂÖÅËÆ∏‰øÆÊîπÔºå‰πü‰∏çÂÖÅËÆ∏Â§çÁî®Ôºà‰∏çËÉΩ‰ΩøÁî®Â∑≤ÁªèÂà†Èô§ÁöÑ‰∏ªÈîÆÂÄºËµãÁªôÊñ∞Êï∞ÊçÆË°åÁöÑ‰∏ªÈîÆÔºâ„ÄÇ SQLÔºàStructured Query Language)ÔºåÊ†áÂáÜ SQL Áî± ANSI Ê†áÂáÜÂßîÂëò‰ºöÁÆ°ÁêÜÔºå‰ªéËÄåÁß∞‰∏∫ ANSI SQL„ÄÇÂêÑ‰∏™ DBMS ÈÉΩÊúâËá™Â∑±ÁöÑÂÆûÁé∞ÔºåÂ¶Ç PL/SQL„ÄÅTransact-SQL Á≠â„ÄÇ SQL ËØ≠Âè•‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºå‰ΩÜÊòØÊï∞ÊçÆÂ∫ìË°®Âêç„ÄÅÂàóÂêçÂíåÂÄºÊòØÂê¶Âå∫ÂàÜ‰æùËµñ‰∫éÂÖ∑‰ΩìÁöÑ DBMS ‰ª•ÂèäÈÖçÁΩÆ„ÄÇ SQL ÊîØÊåÅ‰ª•‰∏ã‰∏âÁßçÊ≥®ÈáäÔºö 12345# Ê≥®ÈáäSELECT *FROM mytable; -- Ê≥®Èáä/* Ê≥®Èáä1 Ê≥®Èáä2 */ ‰∫å„ÄÅÂàõÂª∫Ë°® 123456CREATE TABLE mytable ( id INT NOT NULL AUTO_INCREMENT, col1 INT NOT NULL DEFAULT 1, col2 VARCHAR(45) NULL, col3 DATE NULL, PRIMARY KEY (`id`)); ‰∏â„ÄÅ‰øÆÊîπË°® Ê∑ªÂä†Âàó 12ALTER TABLE mytableADD col CHAR(20); Âà†Èô§Âàó 12ALTER TABLE mytableDROP COLUMN col; Âà†Èô§Ë°® 1DROP TABLE mytable; Âõõ„ÄÅÊèíÂÖ• ÊôÆÈÄöÊèíÂÖ• 12INSERT INTO mytable(col1, col2)VALUES(val1, val2); ÊèíÂÖ•Ê£ÄÁ¥¢Âá∫Êù•ÁöÑÊï∞ÊçÆ 123INSERT INTO mytable1(col1, col2)SELECT col1, col2FROM mytable2; Â∞Ü‰∏Ä‰∏™Ë°®ÁöÑÂÜÖÂÆπÊèíÂÖ•Âà∞‰∏Ä‰∏™Êñ∞Ë°® 12CREATE TABLE newtable ASSELECT * FROM mytable; ‰∫î„ÄÅÊõ¥Êñ∞ 123UPDATE mytableSET col = valWHERE id = 1; ÂÖ≠„ÄÅÂà†Èô§ 12DELETE FROM mytableWHERE id = 1; TRUNCATE TABLE ÂèØ‰ª•Ê∏ÖÁ©∫Ë°®Ôºå‰πüÂ∞±ÊòØÂà†Èô§ÊâÄÊúâË°å„ÄÇ 1TRUNCATE TABLE mytable; ‰ΩøÁî®Êõ¥Êñ∞ÂíåÂà†Èô§Êìç‰ΩúÊó∂‰∏ÄÂÆöË¶ÅÁî® WHERE Â≠êÂè•Ôºå‰∏çÁÑ∂‰ºöÊääÊï¥Âº†Ë°®ÁöÑÊï∞ÊçÆÈÉΩÁ†¥Âùè„ÄÇÂèØ‰ª•ÂÖàÁî® SELECT ËØ≠Âè•ËøõË°åÊµãËØïÔºåÈò≤Ê≠¢ÈîôËØØÂà†Èô§„ÄÇ ‰∏É„ÄÅÊü•ËØ¢ DISTINCT Áõ∏ÂêåÂÄºÂè™‰ºöÂá∫Áé∞‰∏ÄÊ¨°„ÄÇÂÆÉ‰ΩúÁî®‰∫éÊâÄÊúâÂàóÔºå‰πüÂ∞±ÊòØËØ¥ÊâÄÊúâÂàóÁöÑÂÄºÈÉΩÁõ∏ÂêåÊâçÁÆóÁõ∏Âêå„ÄÇ 12SELECT DISTINCT col1, col2FROM mytable; LIMIT ÈôêÂà∂ËøîÂõûÁöÑË°åÊï∞„ÄÇÂèØ‰ª•Êúâ‰∏§‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫Ëµ∑ÂßãË°åÔºå‰ªé 0 ÂºÄÂßãÔºõÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫ËøîÂõûÁöÑÊÄªË°åÊï∞„ÄÇ ËøîÂõûÂâç 5 Ë°åÔºö 123SELECT *FROM mytableLIMIT 5; 123SELECT *FROM mytableLIMIT 0, 5; ËøîÂõûÁ¨¨ 3 ~ 5 Ë°åÔºö 123SELECT *FROM mytableLIMIT 2, 3; ÂÖ´„ÄÅÊéíÂ∫è ASC ÔºöÂçáÂ∫èÔºàÈªòËÆ§Ôºâ DESC ÔºöÈôçÂ∫è ÂèØ‰ª•ÊåâÂ§ö‰∏™ÂàóËøõË°åÊéíÂ∫èÔºåÂπ∂‰∏î‰∏∫ÊØè‰∏™ÂàóÊåáÂÆö‰∏çÂêåÁöÑÊéíÂ∫èÊñπÂºèÔºö 123SELECT *FROM mytableORDER BY col1 DESC, col2 ASC; ‰πù„ÄÅËøáÊª§ ‰∏çËøõË°åËøáÊª§ÁöÑÊï∞ÊçÆÈùûÂ∏∏Â§ßÔºåÂØºËá¥ÈÄöËøáÁΩëÁªú‰º†Ëæì‰∫ÜÂ§ö‰ΩôÁöÑÊï∞ÊçÆÔºå‰ªéËÄåÊµ™Ë¥π‰∫ÜÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇÂõ†Ê≠§Â∞ΩÈáè‰ΩøÁî® SQL ËØ≠Âè•Êù•ËøáÊª§‰∏çÂøÖË¶ÅÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÊòØ‰º†ËæìÊâÄÊúâÁöÑÊï∞ÊçÆÂà∞ÂÆ¢Êà∑Á´Ø‰∏≠ÁÑ∂ÂêéÁî±ÂÆ¢Êà∑Á´ØËøõË°åËøáÊª§„ÄÇ 123SELECT *FROM mytableWHERE col IS NULL; ‰∏ãË°®ÊòæÁ§∫‰∫Ü WHERE Â≠êÂè•ÂèØÁî®ÁöÑÊìç‰ΩúÁ¨¶ Êìç‰ΩúÁ¨¶ ËØ¥Êòé = Á≠â‰∫é &lt; Â∞è‰∫é &gt; Â§ß‰∫é &lt;&gt; != ‰∏çÁ≠â‰∫é &lt;= !&gt; Â∞è‰∫éÁ≠â‰∫é &gt;= !&lt; Â§ß‰∫éÁ≠â‰∫é BETWEEN Âú®‰∏§‰∏™ÂÄº‰πãÈó¥ IS NULL ‰∏∫ NULL ÂÄº Â∫îËØ•Ê≥®ÊÑèÂà∞ÔºåNULL ‰∏é 0„ÄÅÁ©∫Â≠óÁ¨¶‰∏≤ÈÉΩ‰∏çÂêå„ÄÇ AND Âíå OR Áî®‰∫éËøûÊé•Â§ö‰∏™ËøáÊª§Êù°‰ª∂„ÄÇ‰ºòÂÖàÂ§ÑÁêÜ ANDÔºåÂΩì‰∏Ä‰∏™ËøáÊª§Ë°®ËææÂºèÊ∂âÂèäÂà∞Â§ö‰∏™ AND Âíå OR Êó∂ÔºåÂèØ‰ª•‰ΩøÁî® () Êù•ÂÜ≥ÂÆö‰ºòÂÖàÁ∫ßÔºå‰ΩøÂæó‰ºòÂÖàÁ∫ßÂÖ≥Á≥ªÊõ¥Ê∏ÖÊô∞„ÄÇ IN Êìç‰ΩúÁ¨¶Áî®‰∫éÂåπÈÖç‰∏ÄÁªÑÂÄºÔºåÂÖ∂Âêé‰πüÂèØ‰ª•Êé•‰∏Ä‰∏™ SELECT Â≠êÂè•Ôºå‰ªéËÄåÂåπÈÖçÂ≠êÊü•ËØ¢ÂæóÂà∞ÁöÑ‰∏ÄÁªÑÂÄº„ÄÇ NOT Êìç‰ΩúÁ¨¶Áî®‰∫éÂê¶ÂÆö‰∏Ä‰∏™Êù°‰ª∂„ÄÇ ÂçÅ„ÄÅÈÄöÈÖçÁ¨¶ ÈÄöÈÖçÁ¨¶‰πüÊòØÁî®Âú®ËøáÊª§ËØ≠Âè•‰∏≠Ôºå‰ΩÜÂÆÉÂè™ËÉΩÁî®‰∫éÊñáÊú¨Â≠óÊÆµ„ÄÇ % ÂåπÈÖç &gt;=0 ‰∏™‰ªªÊÑèÂ≠óÁ¨¶Ôºõ \_ ÂåπÈÖç ==1 ‰∏™‰ªªÊÑèÂ≠óÁ¨¶Ôºõ [ ] ÂèØ‰ª•ÂåπÈÖçÈõÜÂêàÂÜÖÁöÑÂ≠óÁ¨¶Ôºå‰æãÂ¶Ç [ab] Â∞ÜÂåπÈÖçÂ≠óÁ¨¶ a ÊàñËÄÖ b„ÄÇÁî®ËÑ±Â≠óÁ¨¶ ^ ÂèØ‰ª•ÂØπÂÖ∂ËøõË°åÂê¶ÂÆöÔºå‰πüÂ∞±ÊòØ‰∏çÂåπÈÖçÈõÜÂêàÂÜÖÁöÑÂ≠óÁ¨¶„ÄÇ ‰ΩøÁî® Like Êù•ËøõË°åÈÄöÈÖçÁ¨¶ÂåπÈÖç„ÄÇ 123SELECT *FROM mytableWHERE col LIKE '[^AB]%'; -- ‰∏ç‰ª• A Âíå B ÂºÄÂ§¥ÁöÑ‰ªªÊÑèÊñáÊú¨ ‰∏çË¶ÅÊª•Áî®ÈÄöÈÖçÁ¨¶ÔºåÈÄöÈÖçÁ¨¶‰Ωç‰∫éÂºÄÂ§¥Â§ÑÂåπÈÖç‰ºöÈùûÂ∏∏ÊÖ¢„ÄÇ ÂçÅ‰∏Ä„ÄÅËÆ°ÁÆóÂ≠óÊÆµ Âú®Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®‰∏äÂÆåÊàêÊï∞ÊçÆÁöÑËΩ¨Êç¢ÂíåÊ†ºÂºèÂåñÁöÑÂ∑•‰ΩúÂæÄÂæÄÊØîÂÆ¢Êà∑Á´Ø‰∏äÂø´ÂæóÂ§öÔºåÂπ∂‰∏îËΩ¨Êç¢ÂíåÊ†ºÂºèÂåñÂêéÁöÑÊï∞ÊçÆÈáèÊõ¥Â∞ëÁöÑËØùÂèØ‰ª•ÂáèÂ∞ëÁΩëÁªúÈÄö‰ø°Èáè„ÄÇ ËÆ°ÁÆóÂ≠óÊÆµÈÄöÂ∏∏ÈúÄË¶Å‰ΩøÁî® AS Êù•ÂèñÂà´ÂêçÔºåÂê¶ÂàôËæìÂá∫ÁöÑÊó∂ÂÄôÂ≠óÊÆµÂêç‰∏∫ËÆ°ÁÆóË°®ËææÂºè„ÄÇ 12SELECT col1 * col2 AS aliasFROM mytable; CONCAT() Áî®‰∫éËøûÊé•‰∏§‰∏™Â≠óÊÆµ„ÄÇËÆ∏Â§öÊï∞ÊçÆÂ∫ì‰ºö‰ΩøÁî®Á©∫Ê†ºÊää‰∏Ä‰∏™ÂÄºÂ°´ÂÖÖ‰∏∫ÂàóÂÆΩÔºåÂõ†Ê≠§ËøûÊé•ÁöÑÁªìÊûú‰ºöÂá∫Áé∞‰∏Ä‰∫õ‰∏çÂøÖË¶ÅÁöÑÁ©∫Ê†ºÔºå‰ΩøÁî® TRIM() ÂèØ‰ª•ÂéªÈô§È¶ñÂ∞æÁ©∫Ê†º„ÄÇ 12SELECT CONCAT(TRIM(col1), '(', TRIM(col2), ')') AS concat_colFROM mytable; ÂçÅ‰∫å„ÄÅÂáΩÊï∞ Ê±áÊÄª ÂáΩ Êï∞ ËØ¥ Êòé AVG() ËøîÂõûÊüêÂàóÁöÑÂπ≥ÂùáÂÄº COUNT() ËøîÂõûÊüêÂàóÁöÑË°åÊï∞ MAX() ËøîÂõûÊüêÂàóÁöÑÊúÄÂ§ßÂÄº MIN() ËøîÂõûÊüêÂàóÁöÑÊúÄÂ∞èÂÄº SUM() ËøîÂõûÊüêÂàóÂÄº‰πãÂíå AVG() ‰ºöÂøΩÁï• NULL Ë°å„ÄÇ ‰ΩøÁî® DISTINCT ÂèØ‰ª•ËÆ©Ê±áÊÄªÂáΩÊï∞ÂÄºÊ±áÊÄª‰∏çÂêåÁöÑÂÄº„ÄÇ 12SELECT AVG(DISTINCT col1) AS avg_colFROM mytable; ÊñáÊú¨Â§ÑÁêÜ ÂáΩÊï∞ ËØ¥Êòé LEFT() Â∑¶ËæπÁöÑÂ≠óÁ¨¶ RIGHT() Âè≥ËæπÁöÑÂ≠óÁ¨¶ LOWER() ËΩ¨Êç¢‰∏∫Â∞èÂÜôÂ≠óÁ¨¶ UPPER() ËΩ¨Êç¢‰∏∫Â§ßÂÜôÂ≠óÁ¨¶ LTRIM() ÂéªÈô§Â∑¶ËæπÁöÑÁ©∫Ê†º RTRIM() ÂéªÈô§Âè≥ËæπÁöÑÁ©∫Ê†º LENGTH() ÈïøÂ∫¶ SOUNDEX() ËΩ¨Êç¢‰∏∫ËØ≠Èü≥ÂÄº ÂÖ∂‰∏≠Ôºå SOUNDEX() ÂèØ‰ª•Â∞Ü‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫ÊèèËø∞ÂÖ∂ËØ≠Èü≥Ë°®Á§∫ÁöÑÂ≠óÊØçÊï∞Â≠óÊ®°Âºè„ÄÇ 123SELECT *FROM mytableWHERE SOUNDEX(col1) = SOUNDEX('apple') Êó•ÊúüÂíåÊó∂Èó¥Â§ÑÁêÜ Êó•ÊúüÊ†ºÂºèÔºöYYYY-MM-DD Êó∂Èó¥Ê†ºÂºèÔºöHH:MM:SS ÂáΩ Êï∞ ËØ¥ Êòé AddDate() Â¢ûÂä†‰∏Ä‰∏™Êó•ÊúüÔºàÂ§©„ÄÅÂë®Á≠âÔºâ AddTime() Â¢ûÂä†‰∏Ä‰∏™Êó∂Èó¥ÔºàÊó∂„ÄÅÂàÜÁ≠âÔºâ CurDate() ËøîÂõûÂΩìÂâçÊó•Êúü CurTime() ËøîÂõûÂΩìÂâçÊó∂Èó¥ Date() ËøîÂõûÊó•ÊúüÊó∂Èó¥ÁöÑÊó•ÊúüÈÉ®ÂàÜ DateDiff() ËÆ°ÁÆó‰∏§‰∏™Êó•Êúü‰πãÂ∑Æ Date_Add() È´òÂ∫¶ÁÅµÊ¥ªÁöÑÊó•ÊúüËøêÁÆóÂáΩÊï∞ Date_Format() ËøîÂõû‰∏Ä‰∏™Ê†ºÂºèÂåñÁöÑÊó•ÊúüÊàñÊó∂Èó¥‰∏≤ Day() ËøîÂõû‰∏Ä‰∏™Êó•ÊúüÁöÑÂ§©Êï∞ÈÉ®ÂàÜ DayOfWeek() ÂØπ‰∫é‰∏Ä‰∏™Êó•ÊúüÔºåËøîÂõûÂØπÂ∫îÁöÑÊòüÊúüÂá† Hour() ËøîÂõû‰∏Ä‰∏™Êó∂Èó¥ÁöÑÂ∞èÊó∂ÈÉ®ÂàÜ Minute() ËøîÂõû‰∏Ä‰∏™Êó∂Èó¥ÁöÑÂàÜÈíüÈÉ®ÂàÜ Month() ËøîÂõû‰∏Ä‰∏™Êó•ÊúüÁöÑÊúà‰ªΩÈÉ®ÂàÜ Now() ËøîÂõûÂΩìÂâçÊó•ÊúüÂíåÊó∂Èó¥ Second() ËøîÂõû‰∏Ä‰∏™Êó∂Èó¥ÁöÑÁßíÈÉ®ÂàÜ Time() ËøîÂõû‰∏Ä‰∏™Êó•ÊúüÊó∂Èó¥ÁöÑÊó∂Èó¥ÈÉ®ÂàÜ Year() ËøîÂõû‰∏Ä‰∏™Êó•ÊúüÁöÑÂπ¥‰ªΩÈÉ®ÂàÜ 1mysql&gt; SELECT NOW(); 12018-4-14 20:25:11 Êï∞ÂÄºÂ§ÑÁêÜ ÂáΩÊï∞ ËØ¥Êòé SIN() Ê≠£Âº¶ COS() ‰ΩôÂº¶ TAN() Ê≠£Âàá ABS() ÁªùÂØπÂÄº SQRT() Âπ≥ÊñπÊ†π MOD() ‰ΩôÊï∞ EXP() ÊåáÊï∞ PI() ÂúÜÂë®Áéá RAND() ÈöèÊú∫Êï∞ ÂçÅ‰∏â„ÄÅÂàÜÁªÑ ÂàÜÁªÑÂ∞±ÊòØÊääÂÖ∑ÊúâÁõ∏ÂêåÁöÑÊï∞ÊçÆÂÄºÁöÑË°åÊîæÂú®Âêå‰∏ÄÁªÑ‰∏≠„ÄÇ ÂèØ‰ª•ÂØπÂêå‰∏ÄÂàÜÁªÑÊï∞ÊçÆ‰ΩøÁî®Ê±áÊÄªÂáΩÊï∞ËøõË°åÂ§ÑÁêÜÔºå‰æãÂ¶ÇÊ±ÇÂàÜÁªÑÊï∞ÊçÆÁöÑÂπ≥ÂùáÂÄºÁ≠â„ÄÇ ÊåáÂÆöÁöÑÂàÜÁªÑÂ≠óÊÆµÈô§‰∫ÜËÉΩÊåâËØ•Â≠óÊÆµËøõË°åÂàÜÁªÑÔºå‰πü‰ºöËá™Âä®ÊåâËØ•Â≠óÊÆµËøõË°åÊéíÂ∫è„ÄÇ 123SELECT col, COUNT(*) AS numFROM mytableGROUP BY col; GROUP BY Ëá™Âä®ÊåâÂàÜÁªÑÂ≠óÊÆµËøõË°åÊéíÂ∫èÔºåORDER BY ‰πüÂèØ‰ª•ÊåâÊ±áÊÄªÂ≠óÊÆµÊù•ËøõË°åÊéíÂ∫è„ÄÇ 1234SELECT col, COUNT(*) AS numFROM mytableGROUP BY colORDER BY num; WHERE ËøáÊª§Ë°åÔºåHAVING ËøáÊª§ÂàÜÁªÑÔºåË°åËøáÊª§Â∫îÂΩìÂÖà‰∫éÂàÜÁªÑËøáÊª§„ÄÇ 12345SELECT col, COUNT(*) AS numFROM mytableWHERE col &gt; 2GROUP BY colHAVING num &gt;= 2; ÂàÜÁªÑËßÑÂÆöÔºö GROUP BY Â≠êÂè•Âá∫Áé∞Âú® WHERE Â≠êÂè•‰πãÂêéÔºåORDER BY Â≠êÂè•‰πãÂâçÔºõ Èô§‰∫ÜÊ±áÊÄªÂ≠óÊÆµÂ§ñÔºåSELECT ËØ≠Âè•‰∏≠ÁöÑÊØè‰∏ÄÂ≠óÊÆµÈÉΩÂøÖÈ°ªÂú® GROUP BY Â≠êÂè•‰∏≠ÁªôÂá∫Ôºõ NULL ÁöÑË°å‰ºöÂçïÁã¨ÂàÜ‰∏∫‰∏ÄÁªÑÔºõ Â§ßÂ§öÊï∞ SQL ÂÆûÁé∞‰∏çÊîØÊåÅ GROUP BY ÂàóÂÖ∑ÊúâÂèØÂèòÈïøÂ∫¶ÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ ÂçÅÂõõ„ÄÅÂ≠êÊü•ËØ¢ Â≠êÊü•ËØ¢‰∏≠Âè™ËÉΩËøîÂõû‰∏Ä‰∏™Â≠óÊÆµÁöÑÊï∞ÊçÆ„ÄÇ ÂèØ‰ª•Â∞ÜÂ≠êÊü•ËØ¢ÁöÑÁªìÊûú‰Ωú‰∏∫ WHRER ËØ≠Âè•ÁöÑËøáÊª§Êù°‰ª∂Ôºö 1234SELECT *FROM mytable1WHERE col1 IN (SELECT col2 FROM mytable2); ‰∏ãÈù¢ÁöÑËØ≠Âè•ÂèØ‰ª•Ê£ÄÁ¥¢Âá∫ÂÆ¢Êà∑ÁöÑËÆ¢ÂçïÊï∞ÈáèÔºåÂ≠êÊü•ËØ¢ËØ≠Âè•‰ºöÂØπÁ¨¨‰∏Ä‰∏™Êü•ËØ¢Ê£ÄÁ¥¢Âá∫ÁöÑÊØè‰∏™ÂÆ¢Êà∑ÊâßË°å‰∏ÄÊ¨°Ôºö 123456SELECT cust_name, (SELECT COUNT(*) FROM Orders WHERE Orders.cust_id = Customers.cust_id) AS orders_numFROM CustomersORDER BY cust_name; ÂçÅ‰∫î„ÄÅËøûÊé• ËøûÊé•Áî®‰∫éËøûÊé•Â§ö‰∏™Ë°®Ôºå‰ΩøÁî® JOIN ÂÖ≥ÈîÆÂ≠óÔºåÂπ∂‰∏îÊù°‰ª∂ËØ≠Âè•‰ΩøÁî® ON ËÄå‰∏çÊòØ WHERE„ÄÇ ËøûÊé•ÂèØ‰ª•ÊõøÊç¢Â≠êÊü•ËØ¢ÔºåÂπ∂‰∏îÊØîÂ≠êÊü•ËØ¢ÁöÑÊïàÁéá‰∏ÄËà¨‰ºöÊõ¥Âø´„ÄÇ ÂèØ‰ª•Áî® AS ÁªôÂàóÂêç„ÄÅËÆ°ÁÆóÂ≠óÊÆµÂíåË°®ÂêçÂèñÂà´ÂêçÔºåÁªôË°®ÂêçÂèñÂà´ÂêçÊòØ‰∏∫‰∫ÜÁÆÄÂåñ SQL ËØ≠Âè•‰ª•ÂèäËøûÊé•Áõ∏ÂêåË°®„ÄÇ ÂÜÖËøûÊé• ÂÜÖËøûÊé•ÂèàÁß∞Á≠âÂÄºËøûÊé•Ôºå‰ΩøÁî® INNER JOIN ÂÖ≥ÈîÆÂ≠ó„ÄÇ 123SELECT A.value, B.valueFROM tablea AS A INNER JOIN tableb AS BON A.key = B.key; ÂèØ‰ª•‰∏çÊòéÁ°Æ‰ΩøÁî® INNER JOINÔºåËÄå‰ΩøÁî®ÊôÆÈÄöÊü•ËØ¢Âπ∂Âú® WHERE ‰∏≠Â∞Ü‰∏§‰∏™Ë°®‰∏≠Ë¶ÅËøûÊé•ÁöÑÂàóÁî®Á≠âÂÄºÊñπÊ≥ïËøûÊé•Ëµ∑Êù•„ÄÇ 123SELECT A.value, B.valueFROM tablea AS A, tableb AS BWHERE A.key = B.key; Âú®Ê≤°ÊúâÊù°‰ª∂ËØ≠Âè•ÁöÑÊÉÖÂÜµ‰∏ãËøîÂõûÁ¨õÂç°Â∞îÁßØ„ÄÇ Ëá™ËøûÊé• Ëá™ËøûÊé•ÂèØ‰ª•ÁúãÊàêÂÜÖËøûÊé•ÁöÑ‰∏ÄÁßçÔºåÂè™ÊòØËøûÊé•ÁöÑË°®ÊòØËá™Ë∫´ËÄåÂ∑≤„ÄÇ ‰∏ÄÂº†ÂëòÂ∑•Ë°®ÔºåÂåÖÂê´ÂëòÂ∑•ÂßìÂêçÂíåÂëòÂ∑•ÊâÄÂ±ûÈÉ®Èó®ÔºåË¶ÅÊâæÂá∫‰∏é Jim Â§ÑÂú®Âêå‰∏ÄÈÉ®Èó®ÁöÑÊâÄÊúâÂëòÂ∑•ÂßìÂêç„ÄÇ Â≠êÊü•ËØ¢ÁâàÊú¨ 123456SELECT nameFROM employeeWHERE department = ( SELECT department FROM employee WHERE name = "Jim"); Ëá™ËøûÊé•ÁâàÊú¨ 1234SELECT e1.nameFROM employee AS e1 INNER JOIN employee AS e2ON e1.department = e2.department AND e2.name = "Jim"; Ëá™ÁÑ∂ËøûÊé• Ëá™ÁÑ∂ËøûÊé•ÊòØÊääÂêåÂêçÂàóÈÄöËøáÁ≠âÂÄºÊµãËØïËøûÊé•Ëµ∑Êù•ÁöÑÔºåÂêåÂêçÂàóÂèØ‰ª•ÊúâÂ§ö‰∏™„ÄÇ ÂÜÖËøûÊé•ÂíåËá™ÁÑ∂ËøûÊé•ÁöÑÂå∫Âà´ÔºöÂÜÖËøûÊé•Êèê‰æõËøûÊé•ÁöÑÂàóÔºåËÄåËá™ÁÑ∂ËøûÊé•Ëá™Âä®ËøûÊé•ÊâÄÊúâÂêåÂêçÂàó„ÄÇ 12SELECT A.value, B.valueFROM tablea AS A NATURAL JOIN tableb AS B; Â§ñËøûÊé• Â§ñËøûÊé•‰øùÁïô‰∫ÜÊ≤°ÊúâÂÖ≥ËÅîÁöÑÈÇ£‰∫õË°å„ÄÇÂàÜ‰∏∫Â∑¶Â§ñËøûÊé•ÔºåÂè≥Â§ñËøûÊé•‰ª•ÂèäÂÖ®Â§ñËøûÊé•ÔºåÂ∑¶Â§ñËøûÊé•Â∞±ÊòØ‰øùÁïôÂ∑¶Ë°®Ê≤°ÊúâÂÖ≥ËÅîÁöÑË°å„ÄÇ Ê£ÄÁ¥¢ÊâÄÊúâÈ°æÂÆ¢ÁöÑËÆ¢Âçï‰ø°ÊÅØÔºåÂåÖÊã¨ËøòÊ≤°ÊúâËÆ¢Âçï‰ø°ÊÅØÁöÑÈ°æÂÆ¢„ÄÇ 123SELECT Customers.cust_id, Orders.order_numFROM Customers LEFT OUTER JOIN OrdersON Customers.cust_id = Orders.cust_id; customers Ë°®Ôºö cust_id cust_name 1 a 2 b 3 c orders Ë°®Ôºö order_id cust_id 1 1 2 1 3 3 4 3 ÁªìÊûúÔºö cust_id cust_name order_id 1 a 1 1 a 2 3 c 3 3 c 4 2 b Null ÂçÅÂÖ≠„ÄÅÁªÑÂêàÊü•ËØ¢ ‰ΩøÁî® UNION Êù•ÁªÑÂêà‰∏§‰∏™Êü•ËØ¢ÔºåÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™Êü•ËØ¢ËøîÂõû M Ë°åÔºåÁ¨¨‰∫å‰∏™Êü•ËØ¢ËøîÂõû N Ë°åÔºåÈÇ£‰πàÁªÑÂêàÊü•ËØ¢ÁöÑÁªìÊûú‰∏ÄËà¨‰∏∫ M+N Ë°å„ÄÇ ÊØè‰∏™Êü•ËØ¢ÂøÖÈ°ªÂåÖÂê´Áõ∏ÂêåÁöÑÂàó„ÄÅË°®ËææÂºèÂíåËÅöÈõÜÂáΩÊï∞„ÄÇ ÈªòËÆ§‰ºöÂéªÈô§Áõ∏ÂêåË°åÔºåÂ¶ÇÊûúÈúÄË¶Å‰øùÁïôÁõ∏ÂêåË°åÔºå‰ΩøÁî® UNION ALL„ÄÇ Âè™ËÉΩÂåÖÂê´‰∏Ä‰∏™ ORDER BY Â≠êÂè•ÔºåÂπ∂‰∏îÂøÖÈ°ª‰Ωç‰∫éËØ≠Âè•ÁöÑÊúÄÂêé„ÄÇ 1234567SELECT colFROM mytableWHERE col = 1UNIONSELECT colFROM mytableWHERE col =2; ÂçÅ‰∏É„ÄÅËßÜÂõæ ËßÜÂõæÊòØËôöÊãüÁöÑË°®ÔºåÊú¨Ë∫´‰∏çÂåÖÂê´Êï∞ÊçÆÔºå‰πüÂ∞±‰∏çËÉΩÂØπÂÖ∂ËøõË°åÁ¥¢ÂºïÊìç‰Ωú„ÄÇ ÂØπËßÜÂõæÁöÑÊìç‰ΩúÂíåÂØπÊôÆÈÄöË°®ÁöÑÊìç‰Ωú‰∏ÄÊ†∑„ÄÇ ËßÜÂõæÂÖ∑ÊúâÂ¶Ç‰∏ãÂ•ΩÂ§ÑÔºö ÁÆÄÂåñÂ§çÊùÇÁöÑ SQL Êìç‰ΩúÔºåÊØîÂ¶ÇÂ§çÊùÇÁöÑËøûÊé•Ôºõ Âè™‰ΩøÁî®ÂÆûÈôÖË°®ÁöÑ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÔºõ ÈÄöËøáÂè™ÁªôÁî®Êà∑ËÆøÈóÆËßÜÂõæÁöÑÊùÉÈôêÔºå‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄßÔºõ Êõ¥ÊîπÊï∞ÊçÆÊ†ºÂºèÂíåË°®Á§∫„ÄÇ 1234CREATE VIEW myview ASSELECT Concat(col1, col2) AS concat_col, col3*col4 AS compute_colFROM mytableWHERE col5 = val; ÂçÅÂÖ´„ÄÅÂ≠òÂÇ®ËøáÁ®ã Â≠òÂÇ®ËøáÁ®ãÂèØ‰ª•ÁúãÊàêÊòØÂØπ‰∏ÄÁ≥ªÂàó SQL Êìç‰ΩúÁöÑÊâπÂ§ÑÁêÜÔºõ ‰ΩøÁî®Â≠òÂÇ®ËøáÁ®ãÁöÑÂ•ΩÂ§ÑÔºö ‰ª£Á†ÅÂ∞ÅË£ÖÔºå‰øùËØÅ‰∫Ü‰∏ÄÂÆöÁöÑÂÆâÂÖ®ÊÄßÔºõ ‰ª£Á†ÅÂ§çÁî®Ôºõ Áî±‰∫éÊòØÈ¢ÑÂÖàÁºñËØëÔºåÂõ†Ê≠§ÂÖ∑ÊúâÂæàÈ´òÁöÑÊÄßËÉΩ„ÄÇ ÂëΩ‰ª§Ë°å‰∏≠ÂàõÂª∫Â≠òÂÇ®ËøáÁ®ãÈúÄË¶ÅËá™ÂÆö‰πâÂàÜÈöîÁ¨¶ÔºåÂõ†‰∏∫ÂëΩ‰ª§Ë°åÊòØ‰ª• ; ‰∏∫ÁªìÊùüÁ¨¶ÔºåËÄåÂ≠òÂÇ®ËøáÁ®ã‰∏≠‰πüÂåÖÂê´‰∫ÜÂàÜÂè∑ÔºåÂõ†Ê≠§‰ºöÈîôËØØÊääËøôÈÉ®ÂàÜÂàÜÂè∑ÂΩìÊàêÊòØÁªìÊùüÁ¨¶ÔºåÈÄ†ÊàêËØ≠Ê≥ïÈîôËØØ„ÄÇ ÂåÖÂê´ in„ÄÅout Âíå inout ‰∏âÁßçÂèÇÊï∞„ÄÇ ÁªôÂèòÈáèËµãÂÄºÈÉΩÈúÄË¶ÅÁî® select into ËØ≠Âè•„ÄÇ ÊØèÊ¨°Âè™ËÉΩÁªô‰∏Ä‰∏™ÂèòÈáèËµãÂÄºÔºå‰∏çÊîØÊåÅÈõÜÂêàÁöÑÊìç‰Ωú„ÄÇ 123456789101112delimiter //create procedure myprocedure( out ret int ) begin declare y int; select sum(col1) from mytable into y; select y*y into ret; end //delimiter ; 12call myprocedure(@ret);select @ret; ÂçÅ‰πù„ÄÅÊ∏∏Ê†á Âú®Â≠òÂÇ®ËøáÁ®ã‰∏≠‰ΩøÁî®Ê∏∏Ê†áÂèØ‰ª•ÂØπ‰∏Ä‰∏™ÁªìÊûúÈõÜËøõË°åÁßªÂä®ÈÅçÂéÜ„ÄÇ Ê∏∏Ê†á‰∏ªË¶ÅÁî®‰∫é‰∫§‰∫íÂºèÂ∫îÁî®ÔºåÂÖ∂‰∏≠Áî®Êà∑ÈúÄË¶ÅÂØπÊï∞ÊçÆÈõÜ‰∏≠ÁöÑ‰ªªÊÑèË°åËøõË°åÊµèËßàÂíå‰øÆÊîπ„ÄÇ ‰ΩøÁî®Ê∏∏Ê†áÁöÑÂõõ‰∏™Ê≠•È™§Ôºö Â£∞ÊòéÊ∏∏Ê†áÔºåËøô‰∏™ËøáÁ®ãÊ≤°ÊúâÂÆûÈôÖÊ£ÄÁ¥¢Âá∫Êï∞ÊçÆÔºõ ÊâìÂºÄÊ∏∏Ê†áÔºõ ÂèñÂá∫Êï∞ÊçÆÔºõ ÂÖ≥Èó≠Ê∏∏Ê†áÔºõ 1234567891011121314151617181920delimiter //create procedure myprocedure(out ret int) begin declare done boolean default 0; declare mycursor cursor for select col1 from mytable; # ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ continue handlerÔºåÂΩì sqlstate '02000' Ëøô‰∏™Êù°‰ª∂Âá∫Áé∞Êó∂Ôºå‰ºöÊâßË°å set done = 1 declare continue handler for sqlstate '02000' set done = 1; open mycursor; repeat fetch mycursor into ret; select ret; until done end repeat; close mycursor; end // delimiter ; ‰∫åÂçÅ„ÄÅËß¶ÂèëÂô® Ëß¶ÂèëÂô®‰ºöÂú®Êüê‰∏™Ë°®ÊâßË°å‰ª•‰∏ãËØ≠Âè•Êó∂ËÄåËá™Âä®ÊâßË°åÔºöDELETE„ÄÅINSERT„ÄÅUPDATE„ÄÇ Ëß¶ÂèëÂô®ÂøÖÈ°ªÊåáÂÆöÂú®ËØ≠Âè•ÊâßË°å‰πãÂâçËøòÊòØ‰πãÂêéËá™Âä®ÊâßË°åÔºå‰πãÂâçÊâßË°å‰ΩøÁî® BEFORE ÂÖ≥ÈîÆÂ≠óÔºå‰πãÂêéÊâßË°å‰ΩøÁî® AFTER ÂÖ≥ÈîÆÂ≠ó„ÄÇBEFORE Áî®‰∫éÊï∞ÊçÆÈ™åËØÅÂíåÂáÄÂåñÔºåAFTER Áî®‰∫éÂÆ°ËÆ°Ë∑üË∏™ÔºåÂ∞Ü‰øÆÊîπËÆ∞ÂΩïÂà∞Âè¶Â§ñ‰∏ÄÂº†Ë°®‰∏≠„ÄÇ INSERT Ëß¶ÂèëÂô®ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫ NEW ÁöÑËôöÊãüË°®„ÄÇ 1234CREATE TRIGGER mytrigger AFTER INSERT ON mytableFOR EACH ROW SELECT NEW.col into @result;SELECT @result; -- Ëé∑ÂèñÁªìÊûú DELETE Ëß¶ÂèëÂô®ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫ OLD ÁöÑËôöÊãüË°®ÔºåÂπ∂‰∏îÊòØÂè™ËØªÁöÑ„ÄÇ UPDATE Ëß¶ÂèëÂô®ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫ NEW Âíå‰∏Ä‰∏™Âêç‰∏∫ OLD ÁöÑËôöÊãüË°®ÔºåÂÖ∂‰∏≠ NEW ÊòØÂèØ‰ª•Ë¢´‰øÆÊîπÂú∞ÔºåËÄå OLD ÊòØÂè™ËØªÁöÑ„ÄÇ MySQL ‰∏çÂÖÅËÆ∏Âú®Ëß¶ÂèëÂô®‰∏≠‰ΩøÁî® CALL ËØ≠Âè•Ôºå‰πüÂ∞±ÊòØ‰∏çËÉΩË∞ÉÁî®Â≠òÂÇ®ËøáÁ®ã„ÄÇ ‰∫åÂçÅ‰∏Ä„ÄÅ‰∫ãÂä°Â§ÑÁêÜ Âü∫Êú¨ÊúØËØ≠Ôºö ‰∫ãÂä°ÔºàtransactionÔºâÊåá‰∏ÄÁªÑ SQL ËØ≠Âè•Ôºõ ÂõûÈÄÄÔºàrollbackÔºâÊåáÊí§ÈîÄÊåáÂÆö SQL ËØ≠Âè•ÁöÑËøáÁ®ãÔºõ Êèê‰∫§ÔºàcommitÔºâÊåáÂ∞ÜÊú™Â≠òÂÇ®ÁöÑ SQL ËØ≠Âè•ÁªìÊûúÂÜôÂÖ•Êï∞ÊçÆÂ∫ìË°®Ôºõ ‰øùÁïôÁÇπÔºàsavepointÔºâÊåá‰∫ãÂä°Â§ÑÁêÜ‰∏≠ËÆæÁΩÆÁöÑ‰∏¥Êó∂Âç†‰ΩçÁ¨¶ÔºàplaceholderÔºâÔºå‰Ω†ÂèØ‰ª•ÂØπÂÆÉÂèëÂ∏ÉÂõûÈÄÄÔºà‰∏éÂõûÈÄÄÊï¥‰∏™‰∫ãÂä°Â§ÑÁêÜ‰∏çÂêåÔºâ„ÄÇ ‰∏çËÉΩÂõûÈÄÄ SELECT ËØ≠Âè•ÔºåÂõûÈÄÄ SELECT ËØ≠Âè•‰πüÊ≤°ÊÑè‰πâÔºõ‰πü‰∏çËÉΩÂõûÈÄÄ CREATE Âíå DROP ËØ≠Âè•„ÄÇ MySQL ÁöÑ‰∫ãÂä°Êèê‰∫§ÈªòËÆ§ÊòØÈöêÂºèÊèê‰∫§ÔºåÊØèÊâßË°å‰∏ÄÊù°ËØ≠Âè•Â∞±ÊääËøôÊù°ËØ≠Âè•ÂΩìÊàê‰∏Ä‰∏™‰∫ãÂä°ÁÑ∂ÂêéËøõË°åÊèê‰∫§„ÄÇÂΩìÂá∫Áé∞ START TRANSACTION ËØ≠Âè•Êó∂Ôºå‰ºöÂÖ≥Èó≠ÈöêÂºèÊèê‰∫§ÔºõÂΩì COMMIT Êàñ ROLLBACK ËØ≠Âè•ÊâßË°åÂêéÔºå‰∫ãÂä°‰ºöËá™Âä®ÂÖ≥Èó≠ÔºåÈáçÊñ∞ÊÅ¢Â§çÈöêÂºèÊèê‰∫§„ÄÇ ÈÄöËøáËÆæÁΩÆ autocommit ‰∏∫ 0 ÂèØ‰ª•ÂèñÊ∂àËá™Âä®Êèê‰∫§ÔºåÁõ¥Âà∞ autocommit Ë¢´ËÆæÁΩÆ‰∏∫ 1 Êâç‰ºöÊèê‰∫§Ôºõautocommit Ê†áËÆ∞ÊòØÈíàÂØπÊØè‰∏™ËøûÊé•ËÄå‰∏çÊòØÈíàÂØπÊúçÂä°Âô®ÁöÑ„ÄÇ Â¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆ‰øùÁïôÁÇπÔºåROLLBACK ‰ºöÂõûÈÄÄÂà∞ START TRANSACTION ËØ≠Âè•Â§ÑÔºõÂ¶ÇÊûúËÆæÁΩÆ‰∫Ü‰øùÁïôÁÇπÔºåÂπ∂‰∏îÂú® ROLLBACK ‰∏≠ÊåáÂÆöËØ•‰øùÁïôÁÇπÔºåÂàô‰ºöÂõûÈÄÄÂà∞ËØ•‰øùÁïôÁÇπ„ÄÇ 1234567START TRANSACTION// ...SAVEPOINT delete1// ...ROLLBACK TO delete1// ...COMMIT ‰∫åÂçÅ‰∫å„ÄÅÂ≠óÁ¨¶ÈõÜ Âü∫Êú¨ÊúØËØ≠Ôºö Â≠óÁ¨¶ÈõÜ‰∏∫Â≠óÊØçÂíåÁ¨¶Âè∑ÁöÑÈõÜÂêàÔºõ ÁºñÁ†Å‰∏∫Êüê‰∏™Â≠óÁ¨¶ÈõÜÊàêÂëòÁöÑÂÜÖÈÉ®Ë°®Á§∫Ôºõ Ê†°ÂØπÂ≠óÁ¨¶ÊåáÂÆöÂ¶Ç‰ΩïÊØîËæÉÔºå‰∏ªË¶ÅÁî®‰∫éÊéíÂ∫èÂíåÂàÜÁªÑ„ÄÇ Èô§‰∫ÜÁªôË°®ÊåáÂÆöÂ≠óÁ¨¶ÈõÜÂíåÊ†°ÂØπÂ§ñÔºå‰πüÂèØ‰ª•ÁªôÂàóÊåáÂÆöÔºö 123CREATE TABLE mytable(col VARCHAR(10) CHARACTER SET latin COLLATE latin1_general_ci )DEFAULT CHARACTER SET hebrew COLLATE hebrew_general_ci; ÂèØ‰ª•Âú®ÊéíÂ∫è„ÄÅÂàÜÁªÑÊó∂ÊåáÂÆöÊ†°ÂØπÔºö 123SELECT *FROM mytableORDER BY col COLLATE latin1_general_ci; ‰∫åÂçÅ‰∏â„ÄÅÊùÉÈôêÁÆ°ÁêÜ MySQL ÁöÑË¥¶Êà∑‰ø°ÊÅØ‰øùÂ≠òÂú® mysql Ëøô‰∏™Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇ 12USE mysql;SELECT user FROM user; ÂàõÂª∫Ë¥¶Êà∑ 1CREATE USER myuser IDENTIFIED BY 'mypassword'; Êñ∞ÂàõÂª∫ÁöÑË¥¶Êà∑Ê≤°Êúâ‰ªª‰ΩïÊùÉÈôê„ÄÇ ‰øÆÊîπË¥¶Êà∑Âêç 1RENAME myuser TO newuser; Âà†Èô§Ë¥¶Êà∑ 1DROP USER myuser; Êü•ÁúãÊùÉÈôê 1SHOW GRANTS FOR myuser; Êéà‰∫àÊùÉÈôê 1GRANT SELECT, INSERT ON mydatabase.* TO myuser; Ë¥¶Êà∑Áî® username@host ÁöÑÂΩ¢ÂºèÂÆö‰πâÔºåusername@% ‰ΩøÁî®ÁöÑÊòØÈªòËÆ§‰∏ªÊú∫Âêç„ÄÇ Âà†Èô§ÊùÉÈôê 1REVOKE SELECT, INSERT ON mydatabase.* FROM myuser; GRANT Âíå REVOKE ÂèØÂú®Âá†‰∏™Â±ÇÊ¨°‰∏äÊéßÂà∂ËÆøÈóÆÊùÉÈôêÔºö Êï¥‰∏™ÊúçÂä°Âô®Ôºå‰ΩøÁî® GRANT ALL Âíå REVOKE ALLÔºõ Êï¥‰∏™Êï∞ÊçÆÂ∫ìÔºå‰ΩøÁî® ON database.\*Ôºõ ÁâπÂÆöÁöÑË°®Ôºå‰ΩøÁî® ON database.tableÔºõ ÁâπÂÆöÁöÑÂàóÔºõ ÁâπÂÆöÁöÑÂ≠òÂÇ®ËøáÁ®ã„ÄÇ Êõ¥ÊîπÂØÜÁ†Å ÂøÖÈ°ª‰ΩøÁî® Password() ÂáΩÊï∞ 1SET PASSWROD FOR myuser = Password('new_password'); ËΩ¨Ëá™Ôºö SQL]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ∫ì‰∫ãÂä°Ê†∏ÂøÉÈóÆÈ¢ò]]></title>
    <url>%2F2019%2F01%2F27%2Fmysql%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰ªé‰∫ãÂä°ÂºïÂá∫‰∫ÜMysql InnoDB RRÈöîÁ¶ªÁ∫ßÂà´‰∏ãÊòØÂ¶Ç‰ΩïÈò≤Ê≠¢ÂπªËØªÁöÑ„ÄÇ 1. Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄß ÊúÄÈáçË¶ÅÁöÑÊòØACIDÁâπÊÄß„ÄÇ ÂéüÂ≠êÊÄß(Atomicity)Ôºö‰∫ãÂä°Ë¶Å‰πàÈÉΩÊàêÂäüË¶Å‰πàÈÉΩÂ§±Ë¥• ‰∏ÄËá¥ÊÄß(Consistency)ÔºöÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊúâÂæàÂ§öÁ∫¶ÊùüÔºå‰∫ãÂä°ÂâçÂêéÈÉΩË¶ÅÊª°Ë∂≥Ëøô‰∫õÁ∫¶Êùü(‰∏ç‰ªÖ‰ªÖÊòØÊï∞ÊçÆÂ∫ìÁâ©ÁêÜÁ∫¶ÊùüÔºåËøòÂåÖÊã¨ÂÜÖÈÉ®ÈÄªËæë‰∏äÁöÑ‰∏Ä‰∫õÂÅáËÆæ) ÈöîÁ¶ªÊÄß(Isolation)Ôºö‰∏§‰∏™‰∫ãÂä°‰∫íÁõ∏Áã¨Á´ãÔºå‰∏çËÉΩ‰∫íÁõ∏Âπ≤Êâ∞ ÊåÅ‰πÖÊÄß(Durability)Ôºö‰∫ãÂä°ÊâßË°åÊàêÂäü‰πãÂêéÁªìÊûúÂèØ‰ª•ÊåÅ‰πÖÂåñÔºåÊ∞∏‰πÖÂ≠òÂÇ®‰∏ãÊù•(redoÊó•Âøó) ÂØπ‰∫é‰∏ÄËá¥ÊÄßÔºåÂèØËÉΩËß£ÈáäÊØîËæÉÊäΩË±°Ôºå‰ªñÁöÑÂÆûÈôÖÂê´‰πâÊòØÔºöÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÂ∫îÊª°Ë∂≥ÂÆåÊï¥ÊÄßÁ∫¶Êùü„ÄÇÊãøËΩ¨Ë¥¶‰∏öÂä°Êù•ËØ¥ÔºåÂÅáËÆæÁî®Êà∑AÂíåÁî®Êà∑B‰∏ÄÂÖ±Êúâ2000ÂùóÈí±ÔºåÈÇ£‰πà‰ªñ‰ª¨‰πãÈó¥Êó†ËÆ∫Â¶Ç‰ΩïËΩ¨Ë¥¶ÔºåÊÄªÂÖ±ÁöÑÈí±Â∫îËØ•ÈÉΩÊòØ2000. 2. ‰∫ãÂä°Âπ∂ÂèëËÆøÈóÆÂºïËµ∑ÁöÑÈóÆÈ¢ò Êõ¥Êñ∞‰∏¢Â§±-mysqlÊâÄÊúâ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´Âú®Êï∞ÊçÆÂ∫ìÂ±ÇÈù¢ÂùáÂèØÈÅøÂÖç ÂèñÊ¨æ‰∫ãÂä° Â≠òÊ¨æ‰∫ãÂä° ÂºÄÂßã‰∫ãÂä° ÂºÄÂßã‰∫ãÂä° Êü•ËØ¢‰ΩôÈ¢ù‰∏∫100ÂÖÉ Êó† Êó† Êü•ËØ¢‰ΩôÈ¢ù‰∏∫100ÂÖÉ Êó† Â≠òÂÖ•20Ôºå‰ΩôÈ¢ùÂèò‰∏∫120ÂÖÉ Êó† Êèê‰∫§‰∫ãÂä° ÂèñÂá∫10ÂÖÉÔºå‰ΩôÈ¢ùÊîπ‰∏∫90ÂÖÉ Êó† ÂõûÊªö‰∫ãÂä°Ôºå‰ΩôÈ¢ùÊÅ¢Â§ç‰∏∫100ÂÖÉ Êõ¥Êñ∞‰∏¢Â§± ËÑèËØªÈóÆÈ¢ò-‰∏Ä‰∏™‰∫ãÂä°ËØªÂà∞Âè¶‰∏Ä‰∏™‰∫ãÂä°Êú™Êèê‰∫§ÁöÑÊï∞ÊçÆ ‰∏çÂèØÈáçÂ§çËØª-‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÊï∞ÊçÆÔºåÊú™Êèê‰∫§Êï∞ÊçÆÔºåÊ≠§Êó∂‰∫ãÂä°BÊèê‰∫§Êñ∞ÁöÑÊï∞ÊçÆÔºåÂØºËá¥AÂ§öÊ¨°ËØªÂèñÊï∞ÊçÆÊúüÈó¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥Ôºå‰∏çÊª°Ë∂≥ÈöîÁ¶ªÊÄß ÂπªËØª-‰∫ãÂä°AÂèóÂà∞Âè¶‰∏Ä‰∏™‰∫ãÂä°ÊèíÂÖ•Êñ∞ÁöÑ‰∏ÄË°åÊàñËÄÖÂà†Èô§‰∏ÄË°åÁöÑÂΩ±ÂìçÔºåÂØºËá¥ÂπªËßâ ‰∏çÂèØÈáçÂ§çËØªÁöÑÈáçÁÇπÊòØ‰øÆÊîπ: ÂêåÊ†∑ÁöÑÊù°‰ª∂ÁöÑselect, ‰Ω†ËØªÂèñËøáÁöÑÊï∞ÊçÆ, ÂÜçÊ¨°ËØªÂèñÂá∫Êù•ÂèëÁé∞ÂÄº‰∏ç‰∏ÄÊ†∑‰∫Ü ÂπªËØªÁöÑÈáçÁÇπÂú®‰∫éÊñ∞Â¢ûÊàñËÄÖÂà†Èô§: ÂêåÊ†∑ÁöÑÊù°‰ª∂ÁöÑselect, Á¨¨1Ê¨°ÂíåÁ¨¨2Ê¨°ËØªÂá∫Êù•ÁöÑËÆ∞ÂΩïÊï∞‰∏ç‰∏ÄÊ†∑ ÂÖ∑‰ΩìÂèØ‰ª•Ëá™Â∑±ËÆæÁΩÆ‰∏çÂêåÁöÑÈöîÁ¶ªÁ∫ßÂà´ËøõË°åÊºîÁ§∫„ÄÇ 3. ‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´ Read uncommittedÔºöËØªÂà∞ÂÖ∂‰ªñ‰∫ãÂä°Êú™commitÁöÑÂÄº Read committedÔºöËß£ÂÜ≥‰∫ÜËÑèËØªÈóÆÈ¢òÔºå‰ΩÜÊòØ‰ºöËØªÂà∞ÂÖ∂‰ªñ‰∫ãÂä°commitÁöÑÂÄºÔºåËØª‰∏§Ê¨°ÂèØËÉΩ‰ºöËØªÂà∞‰∏§‰∏™ÂÄºÔºåÊâÄ‰ª•ÂèàÂè´‰∏çÂèØÈáçÂ§çËØª Repeatable ReadÔºöËß£ÂÜ≥‰∫Ü‰∏çÂèØÈáçÂ§çËØªÈóÆÈ¢òÔºåÂèØÈáçÂ§çËØªÔºåÂà´‰∫∫commitÂØπÊàëÊ≤°ÊúâÂΩ±ÂìçÔºå‰ΩÜÊòØÂØπ‰∫éÂà´ÁöÑ‰∫ãÂä°ÊèíÂÖ•Êìç‰ΩúÔºåÂèØËÉΩ‰ºö‰∫ßÁîüÂπªËØª SerializableÔºö‰∏≤Ë°åÂåñÔºåÂΩìÂèëÁîü‰∏§‰∏™‰∫ãÂä°ÂêåÊó∂Êèê‰∫§ÔºåÁªìÊûúÂè™ÂèØËÉΩÊúâ‰∏Ä‰∏™ÔºåÁõ∏ÂΩì‰∫é‰∏≤Ë°åÊâßË°åÂêéÁöÑÊüê‰∏™ÁªìÊûú Á∫ßÂà´Ë∂äÊù•Ë∂äÈ´òÔºåÂÆâÂÖ®ÊÄß‰πüË∂äÊù•Ë∂äÈ´òÔºå‰ΩÜÊòØ‰ΩÜÊòØÊÄßËÉΩË∂äÊù•Ë∂ä‰Ωé„ÄÇËØ¥Êòé‰∏Ä‰∏ãÔºåÂá∫Áé∞ÂπªËØªÂè™ÊòØÈíàÂØπËøôÁßçRepeatable ReadÈöîÁ¶ªÁ∫ßÂà´Ôºå‰ΩÜÊòØInnoDBÂ∑≤Áªè‰∏çÂ≠òÂú®ÂπªËØªÈóÆÈ¢ò‰∫ÜÔºåÂ¶Ç‰ΩïËß£ÂÜ≥ÁöÑÂë¢Ôºü‰∏ªË¶ÅÊòØÁî®next-keyÈîÅÊù•Ëß£ÂÜ≥Ôºå‰∏ãÊñá‰ºöËÆ≤Âà∞„ÄÇ 4. ÂΩìÂâçËØªÂíåÂø´ÁÖßËØª 4.1 ÂΩìÂâçËØª ËØªÂèñÁöÑÈÉΩÊòØÂΩìÂâçÊï∞ÊçÆÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºåÂπ∂‰∏îÂú®ËØªÁöÑÊó∂ÂÄôÂØπÂÖ∂Âä†ÈîÅÔºå‰∏çÂÖÅËÆ∏ÂÖ∂‰ªñ‰∫ãÂä°ËøõË°å‰øÆÊîπÊìç‰Ωú„ÄÇ select ... lock in share modeÔºàÂÖ±‰∫´ÈîÅÔºâ‰ª•Âèä select ... for update„ÄÅupdate„ÄÅdelete„ÄÅinsertÔºàÊéí‰ªñÈîÅÔºâËøô‰∫õÊìç‰ΩúÈÉΩÊòØÂΩìÂâçËØª„ÄÇ ‰∏∫‰ªÄ‰πàÂ∞Ü ÊèíÂÖ•/Êõ¥Êñ∞/Âà†Èô§ Êìç‰ΩúÔºåÈÉΩÂΩí‰∏∫ÂΩìÂâçËØªÔºüÂèØ‰ª•ÁúãÁúã‰∏ãÈù¢Ëøô‰∏™ Êõ¥Êñ∞ Êìç‰ΩúÔºåÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâßË°åÊµÅÁ®ãÔºö ‰ªéÂõæ‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞Ôºå‰∏Ä‰∏™UpdateÊìç‰ΩúÁöÑÂÖ∑‰ΩìÊµÅÁ®ã„ÄÇÂΩìUpdate SQLË¢´ÂèëÁªôMySQLÂêéÔºåMySQL Server‰ºöÊ†πÊçÆwhereÊù°‰ª∂ÔºåÂèëÂá∫current read ËØªÂèñÁ¨¨‰∏ÄÊù°Êª°Ë∂≥Êù°‰ª∂ÁöÑËÆ∞ÂΩïÔºåÁÑ∂ÂêéInnoDBÂºïÊìé‰ºöÂ∞ÜÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïËøîÂõûÔºåÂπ∂Âä†ÈîÅ (current read)„ÄÇ ÂæÖMySQL ServerÊî∂Âà∞ËøôÊù°Âä†ÈîÅÁöÑËÆ∞ÂΩï‰πãÂêéÔºå‰ºöÂÜçÂèëËµ∑‰∏Ä‰∏™UpdateËØ∑Ê±ÇÔºåÊõ¥Êñ∞ËøôÊù°ËÆ∞ÂΩï„ÄÇ ‰∏ÄÊù°ËÆ∞ÂΩïÊìç‰ΩúÂÆåÊàêÔºåÂÜçËØªÂèñ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÔºåÁõ¥Ëá≥Ê≤°ÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑËÆ∞ÂΩï‰∏∫Ê≠¢„ÄÇÂõ†Ê≠§ÔºåUpdateÊìç‰ΩúÂÜÖÈÉ®ÔºåÂ∞±ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂΩìÂâçËØª„ÄÇ 4.2 Âø´ÁÖßËØª ‰∏çÂä†ÈîÅÁöÑÈùûÈòªÂ°ûËØªÔºåÁÆÄÂçïÁöÑselectÔºàÂâçÊèêÊòØ‰∫ãÂä°Á∫ßÂà´‰∏çÊòØserializableÔºåÂõ†‰∏∫Âú®serializableÁ∫ßÂà´‰∏ãÈÉΩÊòØ‰∏≤Ë°åËØªÔºåÊôÆÈÄöÁöÑselect‰πü‰ºöÈÄÄÂåñ‰∏∫ÂΩìÂâçËØªÂç≥select ... lock in share modeÔºâ Âø´ÁÖßËØªÁöÑÂÆûÁé∞ÊòØÂü∫‰∫éÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMVCCÔºâÂÆûÁé∞ÔºåÊó®Âú®ÊèêÈ´òÊÄßËÉΩ„ÄÇÊúâÂèØËÉΩËØªÂà∞ÁöÑ‰∏çÊòØÊï∞ÊçÆÁöÑÊúÄÊñ∞ÁâàÊú¨„ÄÇÔºàÂàõÂª∫Âø´ÁÖßÁöÑÊó∂Êú∫ÂÜ≥ÂÆö‰∫ÜËØªÂà∞ÁöÑÊï∞ÊçÆÁöÑÁâàÊú¨ÔºåÂ¶ÇÊûú‰∫ãÂä°AÂÖàÂø´ÁÖßËØªÔºå‰∫ãÂä°B‰øÆÊîπÔºåÈÇ£‰πà‰∫ãÂä°AÂÜçÂø´ÁÖßËØªÂ∞±ËøòÊòØÊõ¥Êñ∞ÂâçÁöÑÁâàÊú¨Ôºå‰∫ãÂä°AÁöÑÂΩìÂâçËØª‰ºöËØªÂà∞ÊúÄÊñ∞ÁöÑÊï∞ÊçÆÔºõËÄåÂΩì‰∫ãÂä°BÂÖàÊõ¥Êñ∞Ôºå‰∫ãÂä°AÂÜçÂø´ÁÖßËØªÔºåÂ∞±‰ºöËØªÂà∞Êï∞ÊçÆÊúÄÊñ∞ÁâàÊú¨‰∫ÜÔºâ 4.3 MVCC MVCCÂú®MySQLÁöÑInnoDB‰∏≠ÁöÑÂÆûÁé∞ Âú®InnoDB‰∏≠Ôºå‰ºöÂú®ÊØèË°åÊï∞ÊçÆÂêéÊ∑ªÂä†‰∏§‰∏™È¢ùÂ§ñÁöÑÈöêËóèÁöÑÂÄºÊù•ÂÆûÁé∞MVCCÔºåËøô‰∏§‰∏™ÂÄº‰∏Ä‰∏™ËÆ∞ÂΩïËøôË°åÊï∞ÊçÆ‰ΩïÊó∂Ë¢´ÂàõÂª∫ÔºåÂè¶Â§ñ‰∏Ä‰∏™ËÆ∞ÂΩïËøôË°åÊï∞ÊçÆ‰ΩïÊó∂ËøáÊúüÔºàÊàñËÄÖË¢´Âà†Èô§Ôºâ„ÄÇ Âú®ÂÆûÈôÖÊìç‰Ωú‰∏≠ÔºåÂ≠òÂÇ®ÁöÑÂπ∂‰∏çÊòØÊó∂Èó¥ÔºåËÄåÊòØ‰∫ãÂä°ÁöÑÁâàÊú¨Âè∑ÔºåÊØèÂºÄÂêØ‰∏Ä‰∏™Êñ∞‰∫ãÂä°Ôºå‰∫ãÂä°ÁöÑÁâàÊú¨Âè∑Â∞±‰ºöÈÄíÂ¢û„ÄÇ Âú®ÂèØÈáçËØªRepeatable reads‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºö SELECTÊó∂ÔºåËØªÂèñÂàõÂª∫ÁâàÊú¨Âè∑&lt;=ÂΩìÂâç‰∫ãÂä°ÁâàÊú¨Âè∑ÔºåÂà†Èô§ÁâàÊú¨Âè∑‰∏∫Á©∫Êàñ&gt;ÂΩìÂâç‰∫ãÂä°ÁâàÊú¨Âè∑„ÄÇ INSERTÊó∂Ôºå‰øùÂ≠òÂΩìÂâç‰∫ãÂä°ÁâàÊú¨Âè∑‰∏∫Ë°åÁöÑÂàõÂª∫ÁâàÊú¨Âè∑ DELETEÊó∂Ôºå‰øùÂ≠òÂΩìÂâç‰∫ãÂä°ÁâàÊú¨Âè∑‰∏∫Ë°åÁöÑÂà†Èô§ÁâàÊú¨Âè∑ UPDATEÊó∂ÔºåÊèíÂÖ•‰∏ÄÊù°Êñ∞Á∫™ÂΩïÔºå‰øùÂ≠òÂΩìÂâç‰∫ãÂä°ÁâàÊú¨Âè∑‰∏∫Ë°åÂàõÂª∫ÁâàÊú¨Âè∑ÔºåÂêåÊó∂‰øùÂ≠òÂΩìÂâç‰∫ãÂä°ÁâàÊú¨Âè∑Âà∞ÂéüÊù•Âà†Èô§ÁöÑË°å ÈÄöËøáMVCCÔºåËôΩÁÑ∂ÊØèË°åËÆ∞ÂΩïÈÉΩÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÊõ¥Â§öÁöÑË°åÊ£ÄÊü•Â∑•‰Ωú‰ª•Âèä‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÁª¥Êä§Â∑•‰ΩúÔºå‰ΩÜÂèØ‰ª•ÂáèÂ∞ëÈîÅÁöÑ‰ΩøÁî®ÔºåÂ§ßÂ§öÊï∞ËØªÊìç‰ΩúÈÉΩ‰∏çÁî®Âä†ÈîÅÔºåËØªÊï∞ÊçÆÊìç‰ΩúÂæàÁÆÄÂçïÔºåÊÄßËÉΩÂæàÂ•ΩÔºåÂπ∂‰∏î‰πüËÉΩ‰øùËØÅÂè™‰ºöËØªÂèñÂà∞Á¨¶ÂêàÊ†áÂáÜÁöÑË°åÔºå‰πüÂè™ÈîÅ‰ΩèÂøÖË¶ÅË°å„ÄÇ ËØ¥ÁôΩ‰∫ÜÔºåÂ∞±ÊòØ‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞„ÄÇÂÖçÂéª‰∫ÜÂä†ÈîÅËß£ÈîÅÁöÑËøáÁ®ãÔºåÂØπ‰∫éËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÊôØÁâπÂà´ÈÄÇÁî®„ÄÇ 5. RCÔºåRRÁ∫ßÂà´‰∏ãÁöÑInnoDBÈùûÈòªÂ°ûËØªÔºàÂø´ÁÖßËØªÔºâÂ¶Ç‰ΩïÂÆûÁé∞ ÈÄöËøáÊï∞ÊçÆË°åÈáåÁöÑDB_TRX_ID„ÄÅDB_ROLL_PTR„ÄÅDB_ROW_IDËøô‰∏â‰∏™Â≠óÊÆµ DB_TRX_IDÔºåÊúÄÂêé‰∏ÄÊ¨°‰øÆÊîπÊú¨Ë°å‰∫ãÂä°ÁöÑID DB_ROLL_PTRÔºåÂç≥ÂõûÊªöÊåáÈíà,‰∏éundoÊó•ÂøóÈÖçÂêà DB_ROW_IDÔºåÈöèÁùÄÊñ∞Ë°åÊèíÂÖ•ËÄåÂçïË∞ÉÈÄíÂ¢ûÁöÑË°åÂè∑ÔºàinnoDB‰∏≠Â¶ÇÊûúÊó¢Ê≤°Êúâ‰∏ªÈîÆÁ¥¢Âºï‰πüÊ≤°ÊúâÂîØ‰∏ÄÁ¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöËá™Âä®ÁîüÊàê‰∏Ä‰∏™ÈöêËóè‰∏ªÈîÆÔºåÂ∞±ÊòØËøô‰∏™Áé©ÊÑèÔºâ Ëøô‰∏â‰∏™Â≠óÊÆµÁªìÂêàundoÊó•ÂøóÔºåËøô‰∏™Êó•ÂøóÈáåÈù¢ËÆ∞ÂΩïÁöÑÈÉΩÊòØËÄÅÁâàÊú¨ÁöÑÊï∞ÊçÆÔºåËøôÊ†∑ÔºåÂø´ÁÖßËØªÂ∞±ÂèØ‰ª•ËØªÂá∫ÈÄÇÂêàÁöÑ‰∏Ä‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆÂá∫Êù•„ÄÇÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊó•ÂøóÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰∏úË•øÔºåÂèØ‰ª•ËØ¥ÂÖ∂ÈáçË¶ÅÊÄßÊòØÂ§ß‰∫éÊï∞ÊçÆÊú¨Ë∫´ÁöÑÔºåÂõ†‰∏∫Êï∞ÊçÆ‰∏¢Â§±ÂèØ‰ª•ÈÄöËøáÊó•ÂøóÊâæÂõûÊù•Ôºå‰ΩÜÊòØÊó•Âøó‰∏¢Â§±‰∫ÜÔºåÈÇ£‰πà‰ª•ÂêéÊï∞ÊçÆÂ∫ìÂá∫Áé∞Â¥©Ê∫ÉÁ≠âÂ∞±È∫ªÁÉ¶‰∫Ü„ÄÇ 6. Êó•Âøó Êï∞ÊçÆÂ∫ìÊï∞ÊçÆÂ≠òÊîæÁöÑÊñá‰ª∂Áß∞‰∏∫data fileÔºõÊó•ÂøóÊñá‰ª∂Áß∞‰∏∫log fileÔºõÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊòØÊúâÁºìÂ≠òÁöÑÔºåÂ¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÔºåÊØèÊ¨°ÈÉΩÂÜôÊàñËÄÖËØªÁâ©ÁêÜdiskÔºåÈÇ£ÊÄßËÉΩÂ∞±Â§™‰Ωé‰∏ã‰∫Ü„ÄÇÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÁöÑÁºìÂ≠òÁß∞‰∏∫data bufferÔºåÊó•ÂøóÔºàredoÔºâÁºìÂ≠òÁß∞‰∏∫log bufferÔºõÊó¢ÁÑ∂Êï∞ÊçÆÂ∫ìÊï∞ÊçÆÊúâÁºìÂ≠òÔºåÂ∞±ÂæàÈöæ‰øùËØÅÁºìÂ≠òÊï∞ÊçÆÔºàËÑèÊï∞ÊçÆÔºâ‰∏éÁ£ÅÁõòÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇÊØîÂ¶ÇÊüêÊ¨°Êï∞ÊçÆÂ∫ìÊìç‰ΩúÔºö 1update driver_info set driver_status = 2 where driver_id = 10001; Êõ¥Êñ∞driver_statusÂ≠óÊÆµÁöÑÊï∞ÊçÆ‰ºöÂ≠òÊîæÂú®ÁºìÂ≠ò‰∏≠ÔºåÁ≠âÂæÖÂ≠òÂÇ®ÂºïÊìéÂ∞Üdriver_statusÂà∑Êñ∞data_fileÔºåÂπ∂ËøîÂõûÁªô‰∏öÂä°ÊñπÊõ¥Êñ∞ÊàêÂäü„ÄÇÂ¶ÇÊûúÊ≠§Êó∂Êï∞ÊçÆÂ∫ìÂÆïÊú∫ÔºåÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ∞±‰∏¢Â§±‰∫ÜÔºå‰∏öÂä°ÊñπÂç¥‰ª•‰∏∫Êõ¥Êñ∞ÊàêÂäü‰∫ÜÔºåÊï∞ÊçÆ‰∏ç‰∏ÄËá¥Ôºå‰πüÊ≤°ÊúâÊåÅ‰πÖÂåñÂ≠òÂÇ®„ÄÇ ‰∏äÈù¢ÁöÑÈóÆÈ¢òÂ∞±ÂèØ‰ª•ÈÄöËøá‰∫ãÂä°ÁöÑACIDÁâπÊÄßÊù•‰øùËØÅ„ÄÇ 12345BEGIN transÔºõupdate driver_info set driver_status = 2 where driver_id = 10001;COMMIT; ËøôÊ†∑ÊâßË°åÂêéÔºåÊõ¥Êñ∞Ë¶Å‰πàÊàêÂäüÔºåË¶Å‰πàÂ§±Ë¥•„ÄÇ‰∏öÂä°ÊñπÁöÑËøîÂõûÂíåÊï∞ÊçÆÂ∫ìdata file‰∏≠ÁöÑÊï∞ÊçÆ‰øùÊåÅ‰∏ÄËá¥„ÄÇË¶Å‰øùËØÅËøôÊ†∑ÁöÑÁâπÊÄßËøôÂ∞±‰∏çÂæó‰∏çËØ¥Â≠òÂÇ®ÂºïÊìéinnodbÁöÑredoÂíåundoÊó•Âøó„ÄÇ 6.1 undoÊòØÂï• undoÊó•ÂøóÁî®‰∫éÂ≠òÊîæÊï∞ÊçÆ‰øÆÊîπË¢´‰øÆÊîπÂâçÁöÑÂÄºÔºåÂÅáËÆæ‰øÆÊîπ tba Ë°®‰∏≠ id=2ÁöÑË°åÊï∞ÊçÆÔºåÊääName=‚ÄòB‚Äô ‰øÆÊîπ‰∏∫Name = ‚ÄòB2‚Äô ÔºåÈÇ£‰πàundoÊó•ÂøóÂ∞±‰ºöÁî®Êù•Â≠òÊîæName='B‚ÄôÁöÑËÆ∞ÂΩïÔºåÂ¶ÇÊûúËøô‰∏™‰øÆÊîπÂá∫Áé∞ÂºÇÂ∏∏ÔºåÂèØ‰ª•‰ΩøÁî®undoÊó•ÂøóÊù•ÂÆûÁé∞ÂõûÊªöÊìç‰ΩúÔºå‰øùËØÅ‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ ÂØπÊï∞ÊçÆÁöÑÂèòÊõ¥Êìç‰ΩúÔºå‰∏ªË¶ÅÊù•Ëá™ INSERT UPDATE DELETEÔºåËÄåUNDO LOG‰∏≠ÂàÜ‰∏∫‰∏§ÁßçÁ±ªÂûãÔºå‰∏ÄÁßçÊòØ INSERT_UNDOÔºàINSERTÊìç‰ΩúÔºå‰∫ãÂä°Êèê‰∫§ÂêéÂèØ‰ª•Á´ãÂç≥‰∏¢ÂºÉÔºâÔºåËÆ∞ÂΩïÊèíÂÖ•ÁöÑÂîØ‰∏ÄÈîÆÂÄºÔºõ‰∏ÄÁßçÊòØ UPDATE_UNDOÔºàÂåÖÂê´UPDATEÂèäDELETEÊìç‰ΩúÔºâÔºåËÆ∞ÂΩï‰øÆÊîπÁöÑÂîØ‰∏ÄÈîÆÂÄº‰ª•Âèäold columnËÆ∞ÂΩï„ÄÇ 6.2 redoÊòØÂï• Â≠òÂÇ®ÂºïÊìé‰πü‰ºö‰∏∫redo undoÊó•ÂøóÂºÄËæüÂÜÖÂ≠òÁºìÂ≠òÁ©∫Èó¥Ôºålog buffer„ÄÇÁ£ÅÁõò‰∏äÁöÑÊó•ÂøóÊñá‰ª∂Áß∞‰∏∫log fileÔºåÊòØÈ°∫Â∫èËøΩÂä†ÁöÑÔºåÊÄßËÉΩÈùûÂ∏∏È´òÔºåÊ≥®ÔºöÁ£ÅÁõòÁöÑÈ°∫Â∫èÂÜôÊÄßËÉΩÊØîÂÜÖÂ≠òÁöÑÂÜôÊÄßËÉΩÂ∑Æ‰∏ç‰∫ÜÂ§öÂ∞ë„ÄÇ redoÊó•ÂøóËÆ∞ÂΩï‰∫ãÂä°ÊâßË°åÂêéÁöÑÁä∂ÊÄÅÔºåÁî®Êù•ÊÅ¢Â§çÊú™ÂÜôÂÖ•data fileÁöÑÂ∑≤ÊàêÂäü‰∫ãÂä°Êõ¥Êñ∞ÁöÑÊï∞ÊçÆ„ÄÇ‰æãÂ¶ÇÊüê‰∏Ä‰∫ãÂä°ÁöÑ‰∫ãÂä°Â∫èÂè∑‰∏∫T1ÔºåÂÖ∂ÂØπÊï∞ÊçÆXËøõË°å‰øÆÊîπÔºåËÆæXÁöÑÂéüÂÄºÊòØ5Ôºå‰øÆÊîπÂêéÁöÑÂÄº‰∏∫15ÔºåÈÇ£‰πàUndoÊó•Âøó‰∏∫&lt;T1, X, 5&gt;ÔºåRedoÊó•Âøó‰∏∫&lt;T1, X, 15&gt;„ÄÇ Ê¢≥ÁêÜ‰∏ã‰∫ãÂä°ÊâßË°åÁöÑÂêÑ‰∏™Èò∂ÊÆµÔºö ÂÜôundoÊó•ÂøóÂà∞log bufferÔºõ ÊâßË°å‰∫ãÂä°ÔºåÂπ∂ÂÜôredoÊó•ÂøóÂà∞log bufferÔºõ Â¶ÇÊûúinnodb_flush_log_at_trx_commit=1ÔºåÂàôÂ∞ÜredoÊó•ÂøóÂÜôÂà∞log fileÔºåÂπ∂Âà∑Êñ∞ËêΩÁõò„ÄÇ Êèê‰∫§‰∫ãÂä°„ÄÇ ÈÇ£redoÊó•ÂøóÊòØÂÜôËøõÂéª‰∫ÜÔºå‰ΩÜÊòØÊï∞ÊçÆÂë¢Ôºü Âú®Êï∞ÊçÆÂ∫ìÁöÑ‰∏ñÁïåÈáåÔºåÊï∞ÊçÆ‰ªéÊù•ÈÉΩ‰∏çÈáçË¶ÅÔºåÊó•ÂøóÊâçÊòØÊúÄÈáçË¶ÅÁöÑÔºåÊúâ‰∫ÜÊó•ÂøóÂ∞±Êúâ‰∫Ü‰∏ÄÂàá„ÄÇ Âõ†‰∏∫data buffer‰∏≠ÁöÑÊï∞ÊçÆ‰ºöÂú®ÂêàÈÄÇÁöÑÊó∂Èó¥ Áî±Â≠òÂÇ®ÂºïÊìéÂÜôÂÖ•Âà∞data fileÔºåÂ¶ÇÊûúÂú®ÂÜôÂÖ•‰πãÂâçÔºåÊï∞ÊçÆÂ∫ìÂÆïÊú∫‰∫ÜÔºåÊ†πÊçÆËêΩÁõòÁöÑredoÊó•ÂøóÔºåÂÆåÂÖ®ÂèØ‰ª•Â∞Ü‰∫ãÂä°Êõ¥ÊîπÁöÑÊï∞ÊçÆÊÅ¢Â§ç„ÄÇÂ•Ω‰∫ÜÔºåÁúãÂá∫Êó•ÂøóÁöÑÈáçË¶ÅÊÄß‰∫ÜÂêß„ÄÇÂÖàÊåÅ‰πÖÂåñÊó•ÂøóÁöÑÁ≠ñÁï•Âè´ÂÅöWrite Ahead LogÔºåÂç≥È¢ÑÂÜôÊó•Âøó„ÄÇ 6.3 Undo + Redo‰∫ãÂä°ÁöÑÁÆÄÂåñËøáÁ®ã ÂÅáËÆæÊúâA„ÄÅB‰∏§‰∏™Êï∞ÊçÆÔºåÂÄºÂàÜÂà´‰∏∫1,2ÔºåÂºÄÂßã‰∏Ä‰∏™‰∫ãÂä°Ôºå‰∫ãÂä°ÁöÑÊìç‰ΩúÂÜÖÂÆπ‰∏∫ÔºöÊää1‰øÆÊîπ‰∏∫3Ôºå2‰øÆÊîπ‰∏∫4ÔºåÈÇ£‰πàÂÆûÈôÖÁöÑËÆ∞ÂΩïÂ¶Ç‰∏ãÔºàÁÆÄÂåñÔºâÔºö ‰∫ãÂä°ÂºÄÂßã. ËÆ∞ÂΩïA=1Âà∞undo log buffer. ‰øÆÊîπA=3. ËÆ∞ÂΩïA=3Âà∞redo log buffer. ËÆ∞ÂΩïB=2Âà∞undo log buffer. ‰øÆÊîπB=4. ËÆ∞ÂΩïB=4Âà∞redo log buffer. Â∞Üredo logÂÜôÂÖ•Á£ÅÁõò„ÄÇ ‰∫ãÂä°Êèê‰∫§ Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ôºå2Ôºå4Ôºå5Ôºå7Ôºå8ÈÉΩÊòØÊñ∞Â¢ûÊìç‰ΩúÔºå‰ΩÜÊòØ2Ôºå4Ôºå5Ôºå7ÈÉΩÊòØÁºìÂÜ≤Âà∞bufferÂå∫ÔºåÂè™Êúâ8ÊòØÁ£ÅÁõòIOÊìç‰Ωú„ÄÇ‰∏∫‰∫Ü‰øùËØÅRedo LogÊúâËæÉÂ•ΩÁöÑIOÊÄßËÉΩÔºåËÆæËÆ°‰∏ÄËà¨Êúâ‰ª•‰∏ãÁâπÁÇπÔºö Â∞ΩÈáè‰øùÊåÅRedo LogÂ≠òÂÇ®Âú®‰∏ÄÊÆµËøûÁª≠ÁöÑÁ©∫Èó¥‰∏ä„ÄÇÂõ†Ê≠§Âú®Á≥ªÁªüÁ¨¨‰∏ÄÊ¨°ÂêØÂä®Êó∂Â∞±‰ºöÂ∞ÜÊó•ÂøóÊñá‰ª∂ÁöÑÁ©∫Èó¥ÂÆåÂÖ®ÂàÜÈÖç„ÄÇ ‰ª•È°∫Â∫èËøΩÂä†ÁöÑÊñπÂºèËÆ∞ÂΩïRedo Log,ÈÄöËøáÈ°∫Â∫èIOÊù•ÊîπÂñÑÊÄßËÉΩ„ÄÇ ÊâπÈáèÂÜôÂÖ•Êó•Âøó„ÄÇÊó•ÂøóÂπ∂‰∏çÊòØÁõ¥Êé•ÂÜôÂÖ•Êñá‰ª∂ÔºåËÄåÊòØÂÖàÂÜôÂÖ•redo log buffer.ÂΩìÈúÄË¶ÅÂ∞ÜÊó•ÂøóÂà∑Êñ∞Âà∞Á£ÅÁõòÊó∂ (Â¶Ç‰∫ãÂä°Êèê‰∫§),Â∞ÜËÆ∏Â§öÊó•Âøó‰∏ÄËµ∑ÂÜôÂÖ•Á£ÅÁõò. Âπ∂ÂèëÁöÑ‰∫ãÂä°ÂÖ±‰∫´Redo LogÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂÆÉ‰ª¨ÁöÑRedo LogÊåâËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫èÔºå‰æùÊ¨°‰∫§ÊõøÁöÑËÆ∞ÂΩïÂú®‰∏ÄËµ∑Ôºå ‰ª•ÂáèÂ∞ëÊó•ÂøóÂç†Áî®ÁöÑÁ©∫Èó¥„ÄÇ‰æãÂ¶Ç,Redo Log‰∏≠ÁöÑËÆ∞ÂΩïÂÜÖÂÆπÂèØËÉΩÊòØËøôÊ†∑ÁöÑÔºö ËÆ∞ÂΩï1: &lt;trx1, insert ‚Ä¶&gt; ËÆ∞ÂΩï2: &lt;trx2, update ‚Ä¶&gt; ËÆ∞ÂΩï3: &lt;trx1, delete ‚Ä¶&gt; ËÆ∞ÂΩï4: &lt;trx3, update ‚Ä¶&gt; ËÆ∞ÂΩï5: &lt;trx2, insert ‚Ä¶&gt; Âõ†‰∏∫‰∏ä‰∏ÄÊù°ÁöÑÂéüÂõ†,ÂΩì‰∏Ä‰∏™‰∫ãÂä°Â∞ÜRedo LogÂÜôÂÖ•Á£ÅÁõòÊó∂Ôºå‰πü‰ºöÂ∞ÜÂÖ∂‰ªñÊú™Êèê‰∫§ÁöÑ‰∫ãÂä°ÁöÑÊó•ÂøóÂÜôÂÖ•Á£ÅÁõò Redo Log‰∏äÂè™ËøõË°åÈ°∫Â∫èËøΩÂä†ÁöÑÊìç‰ΩúÔºåÂΩì‰∏Ä‰∏™‰∫ãÂä°ÈúÄË¶ÅÂõûÊªöÊó∂ÔºåÂÆÉÁöÑRedo LogËÆ∞ÂΩï‰πü‰∏ç‰ºö‰ªéRedo Log‰∏≠Âà†Èô§Êéâ„ÄÇ 6.4 ÂõûÊªö ÂâçÈù¢ËØ¥Âà∞Êú™Êèê‰∫§ÁöÑ‰∫ãÂä°ÂíåÂõûÊªö‰∫ÜÁöÑ‰∫ãÂä°‰πü‰ºöËÆ∞ÂΩïRedo LogÔºåÂõ†Ê≠§Âú®ËøõË°åÊÅ¢Â§çÊó∂,Ëøô‰∫õ‰∫ãÂä°Ë¶ÅËøõË°åÁâπÊÆäÁöÑÁöÑÂ§ÑÁêÜ„ÄÇÊúâ2Áßç‰∏çÂêåÁöÑÊÅ¢Â§çÁ≠ñÁï•Ôºö ËøõË°åÊÅ¢Â§çÊó∂ÔºåÂè™ÈáçÂÅöÂ∑≤ÁªèÊèê‰∫§‰∫ÜÁöÑ‰∫ãÂä°„ÄÇ ËøõË°åÊÅ¢Â§çÊó∂ÔºåÈáçÂÅöÊâÄÊúâ‰∫ãÂä°ÂåÖÊã¨Êú™Êèê‰∫§ÁöÑ‰∫ãÂä°ÂíåÂõûÊªö‰∫ÜÁöÑ‰∫ãÂä°„ÄÇÁÑ∂ÂêéÈÄöËøáUndo LogÂõûÊªöÈÇ£‰∫õÊú™Êèê‰∫§ÁöÑ‰∫ãÂä°„ÄÇ MySQLÊï∞ÊçÆÂ∫ìInnoDBÂ≠òÂÇ®ÂºïÊìé‰ΩøÁî®‰∫ÜÁ¨¨‰∫å‰∏™Á≠ñÁï•„ÄÇ InnoDBÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÂ¶Ç‰ΩïÈÅøÂÖçÂπªËØª Ë°®Ë±°ÂéüÂõ†:Âø´ÁÖßËØªÔºàÈùûÈòªÂ°ûËØªÔºâ‚Äì‰º™MVCC ÂÜÖÂú®ÂéüÂõ†Ôºönext-keyÈîÅÔºàË°åÈîÅ+gapÈîÅÔºâ 6.5 next-keyÈîÅ Âú® RR Á∫ßÂà´‰∏ãÔºåÂ¶ÇÊûúÊü•ËØ¢Êù°‰ª∂ËÉΩ‰ΩøÁî®‰∏äÂîØ‰∏ÄÁ¥¢ÂºïÔºåÊàñËÄÖÊòØ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÊü•ËØ¢Êù°‰ª∂ÔºåÈÇ£‰πà‰ªÖÂä†Ë°åÈîÅÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™ËåÉÂõ¥Êü•ËØ¢ÔºåÈÇ£‰πàÂ∞±‰ºöÁªôËøô‰∏™ËåÉÂõ¥Âä†‰∏ä gap ÈîÅÊàñËÄÖ next-keyÈîÅ (Ë°åÈîÅ+gapÈîÅ)„ÄÇ ÈÇ£‰πàgapÈîÅÂï•Êó∂ÂÄôÂá∫Áé∞Âë¢Ôºü ‰ΩøÁî®‰∏ªÈîÆÁ¥¢ÂºïÊàñËÄÖÂîØ‰∏ÄÁ¥¢ÂºïÊó∂Ôºö Â¶ÇÊûúwhereÊù°‰ª∂ÂÖ®ÈÉ®ÂëΩ‰∏≠ÔºåÂàô‰∏ç‰ºöÁî®GapÈîÅÔºåÂè™‰ºöÂä†ËÆ∞ÂΩïÈîÅ Â¶ÇÊûúwhereÊù°‰ª∂ÈÉ®ÂàÜÂëΩ‰∏≠ÊàñËÄÖÂÖ®‰∏çÂëΩ‰∏≠ÔºåÂàô‰ºöÂä†GapÈîÅ Âú®Ëµ∞ÈùûÂîØ‰∏ÄÁ¥¢ÂºïÊàñËÄÖ‰∏çËµ∞Á¥¢ÂºïÁöÑÂΩìÂâçËØª‰∏≠Ôºå‰πü‰ºöÂá∫Áé∞GapÈîÅ„ÄÇÂØπ‰∫é‰∏çËµ∞Á¥¢ÂºïÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÂ∞±‰ºöÈîÅ‰ΩèÊï¥Âº†Ë°®„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºöÂè™ÊúâÂØπÂîØ‰∏ÄÁ¥¢Âºï+ÂÖ®ÈÉ®ÂëΩ‰∏≠Êâç‰∏ç‰ºöÂä†gapÈîÅ„ÄÇ ÂÖ∑‰ΩìÊù•‰∏™‰æãÂ≠êËØ¥ÊòéÈó¥ÈöôÈîÅÂ¶Ç‰ΩïÂ∑•‰Ωú„ÄÇ 7. ‰æãÂ≠ê-Ëµ∞ÂîØ‰∏ÄÁ¥¢Âºï 7.1 ÂáÜÂ§áÂ∑•‰Ωú ÊúâËøôÊ†∑‰∏Ä‰∏™Ë°®testÔºåÂÖ∂‰∏≠name‰∏∫‰∏ªÈîÆÔºåid‰∏∫ÂîØ‰∏ÄÈîÆ„ÄÇ 123456CREATE TABLE `test` ( `name` varchar(11) primary key, `id` int, unique KEY `id` (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; insert into test(name,id) values ("f",1), ("h",2), ("b",3), ("a",5), ("c",6),("d",9); name id f 1 h 2 b 3 a 5 c 6 d 9 È¶ñÂÖàÈ™åËØÅ‰∏Ä‰∏ã‰ΩøÁî®‰∏ªÈîÆÁ¥¢ÂºïÊàñËÄÖÂîØ‰∏ÄÁ¥¢ÂºïÊó∂‰ºöÊÄé‰πàÊ†∑„ÄÇ 7.2 Á¨¨‰∏ÄÁßçÊÉÖÂÜµÔºöÂîØ‰∏ÄÁ¥¢Âºï+ÂëΩ‰∏≠ÊâÄÊúâÊï∞ÊçÆ session1ÊâßË°å 1delete from test where id = 3; session2ÊâßË°åÔºö 1insert into test(name,id) values("swg",4); Ê≠§Êó∂Áî±‰∫éidÊòØÂîØ‰∏ÄÁ¥¢ÂºïÔºåÂπ∂‰∏îÊòØÂëΩ‰∏≠ÁöÑÔºåÊâÄ‰ª•Âè™ÊòØÂØπËøô‰∏ÄË°åÂä†Êéí‰ªñÈîÅÔºåËÄåÊ≤°ÊúâÂä†gapÈîÅÔºåÊâÄ‰ª•session2ÊòØÂèØ‰ª•Ê≠£Â∏∏ÊâßË°åÁöÑÔºå‰∏çËÉΩË¢´ÈòªÂ°û„ÄÇ 7.3 Á¨¨‰∏ÄÁßçÊÉÖÂÜµÔºöÂîØ‰∏ÄÁ¥¢Âºï+‰∏çÂëΩ‰∏≠Êï∞ÊçÆ session1ÊâßË°å 1delete from test where id = 7; session2ÊâßË°åÔºö 1insert into test(name,id) values("swg",8); Ê≠§Êó∂session2‰ºöÈòªÂ°û‰ΩèÔºåËØÅÊòéid=7Âë®Âõ¥Âä†‰∫ÜgapÈîÅ„ÄÇgapÈîÅÁöÑËåÉÂõ¥ÈÅµ‰ªéÂ∑¶ÂºÄÂè≥Èó≠ÁöÑÂéüÂàôÔºåËøôÈáåÂ∞±ÊòØ(6,7Ôºâ‰ª•Âèä(7,9)ÈÉΩ‰ºöË¢´ÈîÅ‰Ωè„ÄÇÂä†‰∏ärecordÈîÅÁªÑÊàênext-keyÈîÅÔºåÊâÄ‰ª•next-keyÈîÅÁöÑËåÉÂõ¥ÊòØ(6,7]‰ª•Âèä(7,9]Ëøô‰∏™ËåÉÂõ¥„ÄÇ 7.4 Á¨¨‰∏âÁßçÊÉÖÂÜµÔºöÂîØ‰∏ÄÁ¥¢Âºï+‰∏çÂëΩ‰∏≠ÊâÄÊúâÊï∞ÊçÆ session1ÊâßË°å 1select * from test where id in (5,7,9) lock in share mode; ËøôÈáåÊòØ‰∏Ä‰∏™ËåÉÂõ¥Ôºå5Âíå9ÈÉΩÊòØÂ≠òÂú®ÁöÑÔºå‰ΩÜÊòØ7‰∏çÂ≠òÂú®ÔºåÂç≥ÈÉ®ÂàÜÊï∞ÊçÆ‰∏çÂ≠òÂú®„ÄÇ session2ÊâßË°åÔºö 1234567insert into test(name,id) values("swg",4);&lt;!--ÂèØ‰ª•--&gt;insert into test(name,id) values("swg",7);&lt;!--‰∏çÂèØ‰ª•--&gt;insert into test(name,id) values("swg",8);&lt;!--‰∏çÂèØ‰ª•--&gt;insert into test(name,id) values("swg",10);&lt;!--ÂèØ‰ª•--&gt; ÈÇ£‰πàÂØπ‰∫é(5,9]ÁöÑËåÉÂõ¥ÂÜÖÂ∞±ÈòªÂ°û‰Ωè‰∫ÜÔºåÈÇ£‰πàÈÉ®ÂàÜÂëΩ‰∏≠Â∞±ÊòØÈÉ®ÂàÜÂä†gapÈîÅ„ÄÇ 7.5 Á¨¨ÂõõÁßçÊÉÖÂÜµÔºöÂîØ‰∏ÄÁ¥¢Âºï+ÂëΩ‰∏≠ÊâÄÊúâÊï∞ÊçÆ session1ÊâßË°å 1select * from test where id in (5,6,9) lock in share mode; ËøôÈáåÂÖ®ÈÉ®ÂëΩ‰∏≠ÔºåÈÇ£‰πà session2ÊâßË°åÔºö 123insert into test(name,id) values("swg",7);&lt;!--ÂèØ‰ª•--&gt;insert into test(name,id) values("swg",8);&lt;!--ÂèØ‰ª•--&gt; Ëøô‰∏™Êó∂ÂÄôÂ∞±‰∏ç‰ºöÂä†gapÈîÅ‰∫Ü„ÄÇ 8. ‰æãÂ≠ê-‰∏çËµ∞ÂîØ‰∏ÄÁ¥¢ÂºïÊàñËÄÖ‰∏çËµ∞Á¥¢Âºï ‰∏ãÈù¢Êù•ÁúãÁúã‰∏çËµ∞ÈùûÂîØ‰∏ÄÁ¥¢ÂºïÁöÑÂΩìÂâçËØªÊòØ‰ªÄ‰πàÊÉÖÂÜµ„ÄÇ Ê≠§Êó∂Ë°®ÁöÑÊï∞ÊçÆ‰∏∫Ôºö name id h 2 c 6 b 9 d 9 f 11 a 15 Êääid‰∏äÁöÑÂîØ‰∏ÄÁ¥¢ÂºïÊç¢Êàê‰∫ÜÊôÆÈÄöÁ¥¢Âºï„ÄÇ 8.1 Á¨¨‰∫îÁßçÊÉÖÂÜµÔºöÈùûÂîØ‰∏ÄÁ¥¢Âºï session1ÊâßË°å 1delete from test where id = 9; session2ÊâßË°åÔºö 1insert into test(name,id) values("swg",9); Ê≠§Êó∂session2ÊòØ‰ºöË¢´block‰ΩèÁöÑ„ÄÇgapÁöÑËåÉÂõ¥ÊòØ(6,9]‰ª•Âèä(9,11]. 12345insert into test(name,id) values("swg",5);&lt;!--ÂèØ‰ª•--&gt;insert into test(name,id) values("swg",7);&lt;!--‰∏çÂèØ‰ª•--&gt;insert into test(name,id) values("swg",12);&lt;!--ÂèØ‰ª•--&gt; ‰∏äÈù¢ÁöÑÂéüÁêÜÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂç≥Âè™Ë¶ÅÊòØ6Âíå11‰πãÈó¥ÁöÑÊï∞Ôºå‰∏çÂåÖÂê´‰∏¥ÁïåÂÄºÁöÑÊó∂ÂÄôÔºåÊó†ËÆ∫ÊèíÂÖ•‰ªÄ‰πàÊï∞ÊçÆÔºåÈÉΩÊòØ‰ºöÈòªÂ°ûÁöÑ„ÄÇ ‰ΩÜÊòØÂÖ≥‰∫é‰∏¥ÁïåÂÄº6Âíå11ÔºåËøôÈáåÂ∞±ÊØîËæÉÁâπÊÆä‰∫ÜÔºåÂõ†‰∏∫ÈúÄË¶ÅÂä†‰∏ä‰∏ªÈîÆÁöÑÂÄºÊâçËÉΩËøõË°åÁ≤æÂáÜÁöÑÂà§Êñ≠„ÄÇ 123insert into test(name,id) values(&quot;bb&quot;,6);&lt;!--ÂèØ‰ª•--&gt;insert into test(name,id) values(&quot;dd&quot;,6);&lt;!--‰∏çÂèØ‰ª•--&gt; ËøôÊòØ‰ªÄ‰πàÂéüÂõ†Âë¢Ôºü Êàë‰ª¨Â∞ÜÊï∞ÊçÆÁîªÊàêÂõæÔºö ËøôÈáåÁöÑgapÂå∫Èó¥ÂèØËÉΩÊòØ(Ë¥üÊó†Á©∑Ôºå2],(2,6],(6,9],(9,11],(11,15],(15,Ê≠£Êó†Á©∑) Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ôºåid‰∏∫6ÁöÑË°åÔºåÂØπÂ∫îÁöÑname‰∏∫c(‰∏çË¶ÅÂøòËÆ∞nameÊòØ‰∏ªÈîÆÔºå‰∏ªÈîÆÊåâÁÖßÈ°∫Â∫èÊéíÂ∫è)ÔºåÈÇ£‰πà‰∏ªÈîÆ‰∏≠Â∞±ÊòØÊåâÁÖßÂ≠óÊØçË°®ÁöÑÈ°∫Â∫èËøõË°åÊéíÂàóÁöÑÔºàASCIIÁ†ÅÔºâÔºåÂ¶ÇÊûúÊèíÂÖ•ÁöÑnameÂ∞è‰∫écÔºåÈÇ£‰πàÂ∞±‰∏çÂú®gapÁöÑËåÉÂõ¥ÂÜÖ(c,)ÔºåÂ∞±ÂèØ‰ª•ÊèíÂÖ•Ôºå‰ΩÜÊòØddÂú®gapÁöÑËåÉÂõ¥ÂÜÖ,ÊâÄ‰ª•Â∞±‰ºöÈòªÂ°û‰Ωè„ÄÇ 8.2 Á¨¨‰∫îÁßçÊÉÖÂÜµÔºö‰∏çËµ∞Á¥¢Âºï Ëøô‰∏™Êó∂ÂÄôÔºåÊâÄÊúâÁöÑÈó¥ÈöôÈÉΩ‰ºöÂä†‰∏äÈó¥ÈöôÈîÅÔºåÈÇ£‰πàÂ∞±ÊòØÈîÅË°®‰∫Ü„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈîÅÊ®°Âùó]]></title>
    <url>%2F2019%2F01%2F26%2Fmysql%2F%E9%94%81%E6%A8%A1%E5%9D%97%2F</url>
    <content type="text"><![CDATA[Êú¨Á´†ÂØπË°åÈîÅË°®ÊâÄ„ÄÅÂÖ±‰∫´ÈîÅÊéí‰ªñÈîÅËøõË°åËØ¶ÁªÜËØ¥Êòé„ÄÇËøôÊòØÊï∞ÊçÆÂ∫ìÈîÅÁöÑÊ†∏ÂøÉÁü•ËØÜ„ÄÇ MySQL‰∏≠Âá†ÁßçÈáçË¶ÅÁöÑÈîÅÊ¶ÇÂøµ ÂÖ±‰∫´ÈîÅÔºàSÔºâÂíå Êéí‰ªñÈîÅÔºàXÔºâ InnoDB ÂÆûÁé∞‰∫ÜÊ†áÂáÜÁöÑË°åÁ∫ßÈîÅÔºåÂåÖÊã¨‰∏§ÁßçÔºöÂÖ±‰∫´ÈîÅÔºàÁÆÄÁß∞ s ÈîÅÔºâ„ÄÅÊéíÂÆÉÈîÅÔºàÁÆÄÁß∞ x ÈîÅÔºâ ÂÖ±‰∫´ÈîÅÂÖÅËÆ∏ÊåÅÈîÅ‰∫ãÂä°ËØªÂèñ‰∏ÄË°å ÊéíÂÆÉÈîÅÂÖÅËÆ∏ÊåÅÈîÅ‰∫ãÂä°Êõ¥Êñ∞ÊàñËÄÖÂà†Èô§‰∏ÄË°å Â¶ÇÊûú‰∫ãÂä° T1 ÊåÅÊúâË°å r ÁöÑ s ÈîÅÔºåÈÇ£‰πàÂè¶‰∏Ä‰∏™‰∫ãÂä° T2 ËØ∑Ê±Ç r ÁöÑÈîÅÊó∂Ôºå‰ºöÂÅöÂ¶Ç‰∏ãÂ§ÑÁêÜÔºö T2 ËØ∑Ê±Ç s ÈîÅÁ´ãÂç≥Ë¢´ÂÖÅËÆ∏ÔºåÁªìÊûú T1 T2 ÈÉΩÊåÅÊúâ r Ë°åÁöÑ s ÈîÅ T2 ËØ∑Ê±Ç x ÈîÅ‰∏çËÉΩË¢´Á´ãÂç≥ÂÖÅËÆ∏ Â¶ÇÊûú T1 ÊåÅÊúâ r ÁöÑ x ÈîÅÔºåÈÇ£‰πà T2 ËØ∑Ê±Ç r ÁöÑ x„ÄÅs ÈîÅÈÉΩ‰∏çËÉΩË¢´Á´ãÂç≥ÂÖÅËÆ∏ÔºåT2 ÂøÖÈ°ªÁ≠âÂæÖT1ÈáäÊîæ x ÈîÅÊâçË°å„ÄÇ ÊÑèÂêëÈîÅ innodbÁöÑÊÑèÂêëÈîÅ‰∏ªË¶ÅÁî®Êà∑Â§öÁ≤íÂ∫¶ÁöÑÈîÅÂπ∂Â≠òÁöÑÊÉÖÂÜµ„ÄÇÊØîÂ¶Ç‰∫ãÂä°AË¶ÅÂú®‰∏Ä‰∏™Ë°®‰∏äÂä†SÈîÅÔºåÂ¶ÇÊûúË°®‰∏≠ÁöÑ‰∏ÄË°åÂ∑≤Ë¢´‰∫ãÂä°BÂä†‰∫ÜXÈîÅÔºåÈÇ£‰πàËØ•ÈîÅÁöÑÁî≥ËØ∑‰πüÂ∫îË¢´ÈòªÂ°û„ÄÇÂ¶ÇÊûúË°®‰∏≠ÁöÑÊï∞ÊçÆÂæàÂ§öÔºåÈÄêË°åÊ£ÄÊü•ÈîÅÊ†áÂøóÁöÑÂºÄÈîÄÂ∞ÜÂæàÂ§ßÔºåÁ≥ªÁªüÁöÑÊÄßËÉΩÂ∞Ü‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂèØ‰ª•Âú®Ë°®Á∫ß‰∏äÂºïÂÖ•Êñ∞ÁöÑÈîÅÁ±ªÂûãÊù•Ë°®Á§∫ÂÖ∂ÊâÄÂ±ûË°åÁöÑÂä†ÈîÅÊÉÖÂÜµÔºåËøôÂ∞±ÂºïÂá∫‰∫Ü‚ÄúÊÑèÂêëÈîÅ‚ÄùÁöÑÊ¶ÇÂøµ„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûúË°®‰∏≠ËÆ∞ÂΩï1‰∫øÔºå‰∫ãÂä°AÊääÂÖ∂‰∏≠ÊúâÂá†Êù°ËÆ∞ÂΩï‰∏ä‰∫ÜË°åÈîÅ‰∫ÜÔºåËøôÊó∂‰∫ãÂä°BÈúÄË¶ÅÁªôËøô‰∏™Ë°®Âä†Ë°®Á∫ßÈîÅÔºåÂ¶ÇÊûúÊ≤°ÊúâÊÑèÂêëÈîÅÁöÑËØùÔºåÈÇ£Â∞±Ë¶ÅÂéªË°®‰∏≠Êü•ÊâæËøô‰∏Ä‰∫øÊù°ËÆ∞ÂΩïÊòØÂê¶‰∏äÈîÅ‰∫Ü„ÄÇÂ¶ÇÊûúÂ≠òÂú®ÊÑèÂêëÈîÅÔºåÈÇ£‰πàÂÅáÂ¶Ç‰∫ãÂä°Ôº°Âú®Êõ¥Êñ∞‰∏ÄÊù°ËÆ∞ÂΩï‰πãÂâçÔºåÂÖàÂä†ÊÑèÂêëÈîÅÔºåÂÜçÂä†Ôº∏ÈîÅÔºå‰∫ãÂä°BÂÖàÊ£ÄÊü•ËØ•Ë°®‰∏äÊòØÂê¶Â≠òÂú®ÊÑèÂêëÈîÅÔºåÂ≠òÂú®ÁöÑÊÑèÂêëÈîÅÊòØÂê¶‰∏éËá™Â∑±ÂáÜÂ§áÂä†ÁöÑÈîÅÂÜ≤Á™ÅÔºåÂ¶ÇÊûúÊúâÂÜ≤Á™ÅÔºåÂàôÁ≠âÂæÖÁõ¥Âà∞‰∫ãÂä°Ôº°ÈáäÊîæÔºåËÄåÊó†È°ªÈÄêÊù°ËÆ∞ÂΩïÂéªÊ£ÄÊµã„ÄÇ‰∫ãÂä°Ôº¢Êõ¥Êñ∞Ë°®Êó∂ÔºåÂÖ∂ÂÆûÊó†È°ªÁü•ÈÅìÂà∞Â∫ïÂì™‰∏ÄË°åË¢´ÈîÅ‰∫ÜÔºåÂÆÉÂè™Ë¶ÅÁü•ÈÅìÂèçÊ≠£Êúâ‰∏ÄË°åË¢´ÈîÅ‰∫ÜÂ∞±Ë°å‰∫Ü„ÄÇ ËØ¥ÁôΩ‰∫ÜÊÑèÂêëÈîÅÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÂ§ÑÁêÜË°åÈîÅÂíåË°®ÈîÅ‰πãÈó¥ÁöÑÁüõÁõæÔºåËÉΩÂ§üÊòæÁ§∫‚ÄúÊüê‰∏™‰∫ãÂä°Ê≠£Âú®Êüê‰∏ÄË°å‰∏äÊåÅÊúâ‰∫ÜÈîÅÔºåÊàñËÄÖÂáÜÂ§áÂéªÊåÅÊúâÈîÅ‚Äù ÊÑèÂêëÊéíÂÆÉÈîÅÔºàÁÆÄÁß∞ IX ÈîÅÔºâË°®Êòé‰∏Ä‰∏™‰∫ãÂä°ÊÑèÂõæÂú®Êüê‰∏™Ë°®‰∏≠ËÆæÁΩÆÊüê‰∫õË°åÁöÑ x ÈîÅ ÊÑèÂêëÂÖ±‰∫´ÈîÅÔºàÁÆÄÁß∞ IS ÈîÅÔºâË°®Êòé‰∏Ä‰∏™‰∫ãÂä°ÊÑèÂõæÂú®Êüê‰∏™Ë°®‰∏≠ËÆæÁΩÆÊüê‰∫õË°åÁöÑ s ÈîÅ ‰æãÂ¶ÇÔºå SELECT ... LOCK IN SHARE MODE ËÆæÁΩÆ‰∏Ä‰∏™ IS ÈîÅ, SELECT ... FOR UPDATE ËÆæÁΩÆ‰∏Ä‰∏™ IX ÈîÅ„ÄÇ ÊÑèÂêëÈîÅÁöÑÂéüÂàôÂ¶Ç‰∏ãÔºö ‰∏Ä‰∏™‰∫ãÂä°ÂøÖÈ°ªÂÖàÊåÅÊúâËØ•Ë°®‰∏äÁöÑ IS ÊàñËÄÖÊõ¥Âº∫ÁöÑÈîÅÊâçËÉΩÊåÅÊúâËØ•Ë°®‰∏≠ÊüêË°åÁöÑ S ÈîÅ ‰∏Ä‰∏™‰∫ãÂä°ÂøÖÈ°ªÂÖàÊåÅÊúâËØ•Ë°®‰∏äÁöÑ IX ÈîÅÊâçËÉΩÊåÅÊúâËØ•Ë°®‰∏≠ÊüêË°åÁöÑ X ÈîÅ next-keyÈîÅ InnoDBÊúâ‰∏âÁßçË°åÈîÅÁöÑÁÆóÊ≥ïÔºö Record LockÔºöÂçï‰∏™Ë°åËÆ∞ÂΩï‰∏äÁöÑÈîÅ„ÄÇÂàÜ‰∏∫S LockÂíåX Lock Gap LockÔºöÈó¥ÈöôÈîÅÔºåÈîÅÂÆö‰∏Ä‰∏™ËåÉÂõ¥Ôºå‰ΩÜ‰∏çÂåÖÊã¨ËÆ∞ÂΩïÊú¨Ë∫´„ÄÇGAPÈîÅÁöÑÁõÆÁöÑÔºåÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Âêå‰∏Ä‰∫ãÂä°ÁöÑ‰∏§Ê¨°ÂΩìÂâçËØªÔºåÂá∫Áé∞ÂπªËØªÁöÑÊÉÖÂÜµ„ÄÇ Next-Key LockÔºö1+2ÔºåÈîÅÂÆö‰∏Ä‰∏™ËåÉÂõ¥ÔºåÂπ∂‰∏îÈîÅÂÆöËÆ∞ÂΩïÊú¨Ë∫´„ÄÇÂØπ‰∫éË°åÁöÑÊü•ËØ¢ÔºåÈÉΩÊòØÈááÁî®ËØ•ÊñπÊ≥ïÔºå‰∏ªË¶ÅÁõÆÁöÑÊòØËß£ÂÜ≥ÂπªËØªÁöÑÈóÆÈ¢ò„ÄÇ Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåmysqlÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂèØÈáçÂ§çËØªÔºåÂπ∂‰∏îinnodb_locks_unsafe_for_binlogÂèÇÊï∞‰∏∫0ÔºåËøôÊó∂ÈªòËÆ§ÈááÁî®next-key locks„ÄÇÊâÄË∞ìNext-Key LocksÔºåÂ∞±ÊòØRecord lockÂíågap lockÁöÑÁªìÂêàÔºåÂç≥Èô§‰∫ÜÈîÅ‰ΩèËÆ∞ÂΩïÊú¨Ë∫´ÔºåËøòË¶ÅÂÜçÈîÅ‰ΩèÁ¥¢Âºï‰πãÈó¥ÁöÑÈó¥Èöô„ÄÇ ‰æãÂ≠êÔºöÂÅáËÆæ‰∏Ä‰∏™Á¥¢ÂºïÂåÖÂê´ÂÄº 10,11,13Âíå20ÔºåÁ¥¢Âºï‰∏äÂèØËÉΩÁöÑNK ÈîÅÂåÖÊã¨Â¶Ç‰∏ãÂá†‰∏™Âå∫Èó¥ÔºàÊ≥®ÊÑèÂºÄÈó≠Âå∫Èó¥Ôºâ 12345(negative infinity, 10](10, 11](11, 13](13, 20](20, positive infinity) Innodb‰ΩøÁî®NK ÈîÅÊù•ËøõË°åÁ¥¢ÂºïÊêúÁ¥¢ÂíåÊâ´ÊèèÔºåÈòªÊ≠¢‰∫ÜÂπªËØª„ÄÇ Èó¥ÈöôÈîÅÂú®Innodb‰∏≠ÊòØË¢´‚ÄúÂçÅË∂≥ÁöÑÊäëÂà∂‚ÄùÁöÑÔºå‰πüÂ∞±ÊòØËØ¥Ôºå‰ªñ‰ª¨Âè™ÈòªÊ≠¢ÂÖ∂‰ªñ‰∫ãÂä°ÊèíÂÖ•Âà∞Èó¥Èöô‰∏≠Ôºå‰ªñ‰ª¨‰∏çÈòªÊ≠¢ÂÖ∂‰ªñ‰∫ãÁâ©Âú®Âêå‰∏Ä‰∏™Èó¥Èöô‰∏äËé∑ÂæóÈó¥ÈöôÈîÅ„ÄÇ ‰∏ãÁØáÊñáÁ´†‰ºöËØ¶ÁªÜ‰ªãÁªç‰∏Ä‰∏ã„ÄÇ MyISAMÂíåInnoDBÂÖ≥‰∫éÈîÅÊñπÈù¢ÁöÑÂå∫Âà´ ÁªìËÆ∫Ôºö MyISAMÈªòËÆ§‰ΩøÁî®ÁöÑÊòØË°®Á∫ßÈîÅÔºå‰∏çÊîØÊåÅË°åÁ∫ßÈîÅ InnoDBÈªòËÆ§‰ΩøÁî®ÁöÑÊòØË°åÁ∫ßÈîÅÔºå‰πüÊîØÊåÅË°®Á∫ßÈîÅ ÊâÄË∞ìË°®Á∫ßÈîÅÔºåÂ∞±ÊòØÈîÅ‰ΩèÊï¥Âº†Ë°®„ÄÇÂºÄÈîÄÂ∞èÔºåÂä†ÈîÅÂø´Ôºõ‰∏ç‰ºöÂá∫Áé∞Ê≠ªÈîÅÔºåÈîÅÂÆöÁ≤íÂ∫¶Â§ßÔºåÂèëÁîüÈîÅÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáÊúÄÈ´òÔºåÂπ∂ÂèëÂ∫¶ÊúÄ‰Ωé„ÄÇ MyISAMÂú®ÊâßË°åselectÁöÑÊó∂ÂÄô‰ºö‰∫ßÁîü‰∏Ä‰∏™Ë°®ÂÖ±‰∫´ËØªÈîÅÔºåÂΩìËøõË°åÊõ¥Êñ∞Á≠âÊìç‰ΩúÁöÑÊó∂ÂÄô‰ºö‰∫ßÁîüË°®Áã¨Âç†ÂÜôÈîÅÔºàÊéí‰ªñÈîÅÔºâ„ÄÇÊâÄ‰ª•Ôºö myISAMË°®ÁöÑËØªÊìç‰ΩúÔºå‰∏ç‰ºöÈòªÂ°ûÂÖ∂‰ªñÁî®Êà∑ÂØπÂêå‰∏Ä‰∏™Ë°®ÁöÑËØªËØ∑Ê±ÇÔºå‰ΩÜ‰ºöÈòªÂ°ûÂØπÂêå‰∏Ä‰∏™Ë°®ÁöÑÂÜôËØ∑Ê±Ç„ÄÇ myISAMË°®ÁöÑÂÜôÊìç‰ΩúÔºå‰ºöÈòªÂ°ûÂÖ∂‰ªñÁî®Êà∑ÂØπÂêå‰∏Ä‰∏™Ë°®ÁöÑËØªÂíåÂÜôÊìç‰Ωú„ÄÇ myISAMË°®ÁöÑËØª„ÄÅÂÜôÊìç‰Ωú‰πãÈó¥„ÄÅ‰ª•ÂèäÂÜôÊìç‰Ωú‰πãÈó¥ÊòØ‰∏≤Ë°åÁöÑ„ÄÇ ËøôÈáåÁöÑËØªÊòØÂÖ±‰∫´ÈîÅÔºå‰πüÂèØ‰ª•Â∞ÜÂÖ∂Âèò‰∏∫Êéí‰ªñÈîÅÔºåËØ≠Ê≥ïÊòØselect ‚Ä¶ for update ‰∏äÈù¢ËØ¥ÂÆå‰∫ÜMyISAMÁöÑË°®ÈîÅÔºå‰∏ãÈù¢Ë¶ÅËØ¥ËØ¥InnoDBÂï¶„ÄÇInnoDBÊîØÊåÅË°åÁ∫ßÈîÅ„ÄÇ ÊâÄË∞ìË°åÁ∫ßÈîÅÔºåÂ∞±ÊòØÈîÅ‰Ωè‰∏ÄË°åÊï∞ÊçÆ„ÄÇÂºÄÈîÄÂ§ßÔºåÂä†ÈîÅÊÖ¢Ôºõ‰ºöÂá∫Áé∞Ê≠ªÈîÅÔºõÈîÅÂÆöÁ≤íÂ∫¶ÊúÄÂ∞èÔºåÂèëÁîüÈîÅÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáÊúÄ‰ΩéÔºåÂπ∂ÂèëÊÄß‰πüÊúÄÈ´ò„ÄÇ SELECT ‚Ä¶ LOCK IN SHARE MODE Âíå SELECT ‚Ä¶ FOR UPDATE Â¶ÇÊûú‰Ω†Âú®Êü•ËØ¢Êï∞ÊçÆÔºåÁÑ∂ÂêéÂú®Âêå‰∏Ä‰∏™‰∫ãÂä°ÈáåÊèíÂÖ•ÊàñËÄÖ‰øÆÊîπÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºåÂ∏∏ËßÑÁöÑ select ËØ≠Âè•‰∏ç‰ºöÊèê‰æõË∂≥Â§üÁöÑ‰øùÊä§„ÄÇÂÖ∂‰ªñÁöÑ‰∫ãÂä°ÂèØ‰ª•‰øÆÊîπÊàñËÄÖÂà†Èô§‰Ω†Ê≠£Âú®Êü•ËØ¢ÁöÑË°å„ÄÇInnoDB ÊîØÊåÅ‰∏§ÁßçÂèØ‰ª•Êèê‰æõÂÆâÂÖ®Êú∫Âà∂ÁöÑËØªÂèñÈîÅÔºö SELECT ... LOCK IN SHARE MODE SELECT ... FOR UPDATE SELECT ‚Ä¶ LOCK IN SHARE MODE Âú®ËØªÂèñÁöÑË°å‰∏äËÆæÁΩÆ‰∏Ä‰∏™ÂÖ±‰∫´ÈîÅÔºåÂÖ∂‰ªñÁöÑsessionÂèØ‰ª•ËØªËøô‰∫õË°åÔºå‰ΩÜÂú®‰Ω†ÁöÑ‰∫ãÂä°Êèê‰∫§‰πãÂâç‰∏çÂèØ‰ª•‰øÆÊîπÂÆÉ‰ª¨„ÄÇÂ¶ÇÊûúËøô‰∫õË°åÈáåÊúâË¢´ÂÖ∂‰ªñÁöÑËøòÊ≤°ÊúâÊèê‰∫§ÁöÑ‰∫ãÂä°‰øÆÊîπÔºå‰Ω†ÁöÑÊü•ËØ¢‰ºöÁ≠âÂà∞ÈÇ£‰∏™‰∫ãÂä°ÁªìÊùü‰πãÂêé‰ΩøÁî®ÊúÄÊñ∞ÁöÑÂÄº„ÄÇ Á¥¢ÂºïÊêúÁ¥¢ÈÅáÂà∞ÁöÑËÆ∞ÂΩïÔºåSELECT ‚Ä¶ FOR UPDATE ‰ºöÈîÅ‰ΩèË°åÂèä‰ªª‰ΩïÂÖ≥ËÅîÁöÑÁ¥¢ÂºïÊù°ÁõÆÔºåÂíå‰Ω†ÂØπÈÇ£‰∫õË°åÊâßË°å update ËØ≠Âè•Áõ∏Âêå„ÄÇÂÖ∂‰ªñÁöÑ‰∫ãÂä°‰ºöË¢´ÈòªÂ°ûÂú®ÊØîÂ¶ÇÊâßË°å update Êìç‰ΩúÔºåËé∑ÂèñÂÖ±‰∫´ÈîÅÔºåÊàñ‰ªéÊüê‰∫õ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ËØªÂèñÊï∞ÊçÆÁ≠âÊìç‰Ωú„ÄÇ ‰ΩøÁî® SELECT FOR UPDATE ‰∏∫ update Êìç‰ΩúÈîÅÂÆöË°åÔºåÂè™ÈÄÇÁî®‰∫é autocommit Ë¢´Á¶ÅÁî®ÔºàÂΩì‰ΩøÁî® START TRANSACTION ÂºÄÂßã‰∫ãÂä°ÊàñËÄÖËÆæÁΩÆ autocommit ‰∏∫0Êó∂Ôºâ„ÄÇÂ¶ÇÊûú autocommit Â∑≤ÂêØÁî®ÔºåÁ¨¶ÂêàËßÑËåÉÁöÑË°å‰∏ç‰ºöË¢´ÈîÅÂÆö„ÄÇ ‰ª•‰∏äÊòØÂØπÂÆòÊñπÊñáÊ°£ÁöÑÁøªËØëËß£ËØª„ÄÇ SELECT ‚Ä¶ LOCK IN SHARE MODE ÔºöÂÖ±‰∫´ÈîÅ(SÈîÅ, share locks)„ÄÇÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•ËØªÂèñÊï∞ÊçÆÔºå‰ΩÜ‰∏çËÉΩÂØπËØ•Êï∞ÊçÆËøõË°å‰øÆÊîπÔºåÁõ¥Âà∞ÊâÄÊúâÁöÑÂÖ±‰∫´ÈîÅË¢´ÈáäÊîæ„ÄÇ Â¶ÇÊûú‰∫ãÂä°ÂØπÊüêË°åÊï∞ÊçÆÂä†‰∏äÂÖ±‰∫´ÈîÅ‰πãÂêéÔºåÂèØËøõË°åËØªÂÜôÊìç‰ΩúÔºõÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•ÂØπËØ•Êï∞ÊçÆÂä†ÂÖ±‰∫´ÈîÅÔºå‰ΩÜ‰∏çËÉΩÂä†Êéí‰ªñÈîÅÔºå‰∏îÂè™ËÉΩËØªÊï∞ÊçÆÔºå‰∏çËÉΩ‰øÆÊîπÊï∞ÊçÆ„ÄÇ SELECT ‚Ä¶ FOR UPDATEÔºöÊéí‰ªñÈîÅ(XÈîÅ, exclusive locks)„ÄÇÂ¶ÇÊûú‰∫ãÂä°ÂØπÊï∞ÊçÆÂä†‰∏äÊéí‰ªñÈîÅ‰πãÂêéÔºåÂàôÂÖ∂‰ªñ‰∫ãÂä°‰∏çËÉΩÂØπËØ•Êï∞ÊçÆÂä†‰ªª‰ΩïÁöÑÈîÅ„ÄÇËé∑ÂèñÊéí‰ªñÈîÅÁöÑ‰∫ãÂä°Êó¢ËÉΩËØªÂèñÊï∞ÊçÆÔºå‰πüËÉΩ‰øÆÊîπÊï∞ÊçÆ„ÄÇ Ê≥®ÔºöÊôÆÈÄö select ËØ≠Âè•ÈªòËÆ§‰∏çÂä†ÈîÅÔºåËÄåCUDÊìç‰ΩúÈªòËÆ§Âä†Êéí‰ªñÈîÅ„ÄÇ ÂΩìÂâç‰∫ãÂä°Ëé∑ÂèñÂÖ±‰∫´ÈîÅÂêéÔºåÂèØ‰ª•ËØªÂÜôÔºåÂÖ∂‰ªñ‰∫ãÂä°ÊòØÂê¶ÂèØ‰ª•ËøõË°åËØªÂÜôÊìç‰ΩúÂíåËé∑ÂèñÂÖ±‰∫´ÈîÅÔºöÂèØ‰ª•ËØªÔºåÂèØ‰ª•Ëé∑ÂèñÂÖ±‰∫´ÈîÅÔºå‰∏çÂèØ‰ª•ÂÜô ‰∏§‰∏™‰∫ãÂä°ÂêåÊó∂Ëé∑ÂèñÂÖ±‰∫´ÈîÅÂêéÔºåÊòØÂê¶ÂèØ‰ª•ËøõË°åupdateÊìç‰ΩúÔºö‰∏çÂèØ‰ª• ÂΩìÂâç‰∫ãÂä°Ëé∑ÂèñÊéí‰ªñÈîÅÂêéÔºåÂÖ∂‰ªñ‰∫ãÂä°ÊòØÂê¶ÂèØ‰ª•ËøõË°åËØªÂÜôÊìç‰ΩúÂíåËé∑ÂèñÂÖ±‰∫´ÈîÅÔºöÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•ËØªÔºå‰∏çÂèØ‰ª•Ëé∑ÂèñÂÖ±‰∫´ÈîÅÔºå‰∏çÂèØ‰ª•ÂÜô ÊòØÂê¶ÂèØÂØπ‰∏ÄÊù°Êï∞ÊçÆÂä†Â§ö‰∏™Êéí‰ªñÈîÅÔºö‰∏çÂèØ‰ª• Ë°åÈîÅÂíåÁ¥¢ÂºïÁöÑÂÖ≥Á≥ªÔºöÊü•ËØ¢Â≠óÊÆµÊú™Âä†Á¥¢ÂºïÔºà‰∏ªÈîÆÁ¥¢Âºï„ÄÅÊôÆÈÄöÁ¥¢ÂºïÁ≠âÔºâÊó∂Ôºå‰ΩøÁî®Ë°®ÈîÅ Ê≥®ÔºöInnoDBË°åÁ∫ßÈîÅÂü∫‰∫éÁ¥¢ÂºïÂÆûÁé∞„ÄÇ Êú™Âä†Á¥¢ÂºïÊó∂Ôºå‰∏§ÁßçË°åÈîÅÊÉÖÂÜµ‰∏∫Ôºà‰ΩøÁî®Ë°®ÈîÅÔºâÔºö ‰∫ãÂä°1Ëé∑ÂèñÊüêË°åÊï∞ÊçÆÂÖ±‰∫´ÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•Ëé∑Âèñ‰∏çÂêåË°åÊï∞ÊçÆÁöÑÂÖ±‰∫´ÈîÅÔºå‰∏çÂèØ‰ª•Ëé∑Âèñ‰∏çÂêåË°åÊï∞ÊçÆÁöÑÊéí‰ªñÈîÅ ‰∫ãÂä°1Ëé∑ÂèñÊüêË°åÊï∞ÊçÆÊéí‰ªñÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°‰∏çÂèØ‰ª•Ëé∑Âèñ‰∏çÂêåË°åÊï∞ÊçÆÁöÑÂÖ±‰∫´ÈîÅ„ÄÅÊéí‰ªñÈîÅ Âä†Á¥¢ÂºïÂêéÔºå‰∏§ÁßçË°åÈîÅ‰∏∫Ôºà‰ΩøÁî®Ë°åÈîÅÔºâÔºö ‰∫ãÂä°1Ëé∑ÂèñÊüêË°åÊï∞ÊçÆÂÖ±‰∫´ÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•Ëé∑Âèñ‰∏çÂêåË°åÊï∞ÊçÆÁöÑÊéí‰ªñÈîÅ ‰∫ãÂä°1Ëé∑ÂèñÊüêË°åÊï∞ÊçÆÊéí‰ªñÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•Ëé∑Âèñ‰∏çÂêåË°åÊï∞ÊçÆÁöÑÂÖ±‰∫´ÈîÅ„ÄÅÊéí‰ªñÈîÅ Á¥¢ÂºïÊï∞ÊçÆÈáçÂ§çÁéáÂ§™È´ò‰ºöÂØºËá¥ÂÖ®Ë°®Êâ´ÊèèÔºöÂΩìË°®‰∏≠Á¥¢ÂºïÂ≠óÊÆµÊï∞ÊçÆÈáçÂ§çÁéáÂ§™È´òÔºåÂàôMySQLÂèØËÉΩ‰ºöÂøΩÁï•Á¥¢ÂºïÔºåËøõË°åÂÖ®Ë°®Êâ´ÊèèÔºåÊ≠§Êó∂‰ΩøÁî®Ë°®ÈîÅ„ÄÇÂèØ‰ΩøÁî® force index Âº∫Âà∂‰ΩøÁî®Á¥¢Âºï„ÄÇ ÊÄªÁªìÔºàÂæàÈáçË¶ÅÔºâ MyISAMÈªòËÆ§‰ΩøÁî®ÁöÑÊòØË°®Á∫ßÈîÅÔºå‰∏çÊîØÊåÅË°åÁ∫ßÈîÅ ÊâßË°åselectÁöÑÊó∂ÂÄô‰ºö‰∫ßÁîü‰∏Ä‰∏™Ë°®ÂÖ±‰∫´ËØªÈîÅ ÂΩìËøõË°åÊõ¥Êñ∞Á≠âÊìç‰ΩúÁöÑÊó∂ÂÄô‰ºö‰∫ßÁîüË°®Áã¨Âç†ÂÜôÈîÅÔºàÊéí‰ªñÈîÅÔºâ ËØª‰∏ç‰ºöÈòªÂ°ûÂÖ∂‰ªñsessionÁöÑËØª‰ª•ÂèäËé∑ÂèñË°®ÂÖ±‰∫´ËØªÈîÅ ÂÜô‰ºöÈòªÂ°ûÂÖ∂‰ªñsessionËØªÂíåÂÜôÊìç‰Ωú ÂÜô‰∏éËØª‰πãÈó¥ÊòØ‰∏≤Ë°åÁöÑ InnoDBÈªòËÆ§‰ΩøÁî®ÁöÑÊòØË°åÁ∫ßÈîÅÔºå‰πüÊîØÊåÅË°®Á∫ßÈîÅ InnoDB ÊîØÊåÅ‰∏§ÁßçÂèØ‰ª•Êèê‰æõÂÆâÂÖ®Êú∫Âà∂ÁöÑËØªÂèñÈîÅÔºöSELECT ‚Ä¶ LOCK IN SHARE MODE‰ª•ÂèäSELECT ‚Ä¶ FOR UPDATE SELECT ‚Ä¶ LOCK IN SHARE MODE Âú®ËØªÂèñÁöÑË°å‰∏äËÆæÁΩÆ‰∏Ä‰∏™ÂÖ±‰∫´ÈîÅ SELECT ‚Ä¶ FOR UPDATEÔºöÊéí‰ªñÈîÅ ‰∏Ä‰∏™sessionÂØπÊüê‰∏ÄË°å‰∏äÂÖ±‰∫´ÈîÅÔºåÂÖ∂‰ªñÁöÑsessionÂèØ‰ª•ËØªËøôË°åÔºå‰πüÂèØ‰ª•Ëé∑ÂèñÂÖ±‰∫´ÈîÅÔºå‰ΩÜÊòØ‰∏çÂÖÅËÆ∏ÂÜôÔºåÊõ¥‰∏çÂÖÅËÆ∏Ëé∑ÂèñÂÜôÈîÅ„ÄÇÂØπ‰∫éÂÖ∂‰ªñË°åÔºåÂèØ‰ª•ËØªÂÜôÂÖ∂‰ªñË°åÊï∞ÊçÆ‰πüÂèØ‰ª•‰∏äËØªÂÜôÈîÅ„ÄÇ ‰∏Ä‰∏™sessionÂØπÊüê‰∏ÄË°å‰∏äÊéí‰ªñÈîÅÔºåÂÖ∂‰ªñÁöÑsessionÂàô‰∏çËÉΩÂä†‰ªª‰ΩïÈîÅÔºåÂåÖÊã¨ÂÖ±‰∫´ÈîÅ„ÄÇÂÖÅËÆ∏ËØªËøô‰∏ÄË°åÔºå‰ΩÜÊòØ‰∏çËÉΩÂÜô„ÄÇÂÖÅËÆ∏ÂØπÂÖ∂‰ªñË°åÊï∞ÊçÆËøõË°åËØªÂÜô‰ª•Âèä‰∏äËØªÂÜôÈîÅ„ÄÇ InnoDB‰∏≠Ë°åÁ∫ßÈîÅÂü∫‰∫éÁ¥¢ÂºïÂÆûÁé∞ÔºåÊâÄ‰ª•Âú®‰∏çÂä†Á¥¢ÂºïÁöÑÊó∂ÂÄôÔºåËøô‰∏§ËÄÖ‰∏äÁöÑÂÖ∂ÂÆûÈÉΩÊòØË°®ÈîÅÔºõÂä†‰∏äÁ¥¢Âºï‰πãÂêéÔºå‰ΩøÁî®Ë°åÈîÅ„ÄÇ ‰ª•‰∏äÁöÑÂÜÖÂÆπÈÉΩÊòØ‰ªéÂçöÂÆ¢Ôºöhttps://blog.csdn.net/u012099869/article/details/52778728 ‰∏≠Êï¥ÁêÜËÄåÊù•ÔºåÂÖ∑‰ΩìÁöÑÂÆûÈ™å‰πüÂú®‰ªñÁöÑÂçöÂÆ¢‰∏≠ËøõË°å‰∫ÜËØ¶ÁªÜÁöÑÂ±ïÁ§∫„ÄÇ MyISAMÈÄÇÂêàÂú∫ÊôØ È¢ëÁπÅÊâßË°åÂÖ®Ë°®countËØ≠Âè•(MyISAMÂ∑≤ÁªèÁî®‰∏Ä‰∏™Ë°®‰øùÂ≠ò‰∫ÜË°åÊï∞) ÂØπÊï∞ÊçÆËøõË°åÂ¢ûÂà†ÊîπÁöÑÈ¢ëÁéá‰∏çÈ´òÔºåÊü•ËØ¢ÈùûÂ∏∏È¢ëÁπÅ Ê≤°Êúâ‰∫ãÂä° InnoDBÈÄÇÂêàÂú∫ÊôØ Êï∞ÊçÆÂ¢ûÂà†ÊîπÊü•ÈÉΩÁõ∏ÂΩìÈ¢ëÁπÅ ÂèØÈù†ÊÄßË¶ÅÊ±ÇÊØîËæÉÈ´òÔºåË¶ÅÊ±ÇÊîØÊåÅ‰∫ãÂä°]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÖ≥‰∫éÁ¥¢ÂºïÂ§±ÊïàÂíåËÅîÂêàÁ¥¢Âºï]]></title>
    <url>%2F2019%2F01%2F26%2Fmysql%2F%E5%85%B3%E4%BA%8E%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E5%92%8C%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%2F</url>
    <content type="text"><![CDATA[ÁêÜËß£ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôÔºåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨ÈÅøÂÖçÁ¥¢ÂºïÂ§±Êïà„ÄÇ Á¥¢ÂºïÂ§±Êïà Êü•ËØ¢Êù°‰ª∂ÂåÖÂê´or ÂΩìorÂ∑¶Âè≥Êü•ËØ¢Â≠óÊÆµÂè™Êúâ‰∏Ä‰∏™ÊòØÁ¥¢ÂºïÔºåËØ•Á¥¢ÂºïÂ§±ÊïàÔºåexplainÊâßË°åËÆ°Âàíkey=nullÔºõÂè™ÊúâÂΩìorÂ∑¶Âè≥Êü•ËØ¢Â≠óÊÆµÂùá‰∏∫Á¥¢ÂºïÊó∂ÔºåÊâç‰ºöÁîüÊïàÔºõ ÁªÑÂêàÁ¥¢ÂºïÔºå‰∏çÊòØ‰ΩøÁî®Á¨¨‰∏ÄÂàóÁ¥¢ÂºïÔºåÁ¥¢ÂºïÂ§±Êïà Â¶ÇÊûúselect * from key1=1 and key2= 2;Âª∫Á´ãÁªÑÂêàÁ¥¢ÂºïÔºàkey1Ôºåkey2Ôºâ; select * from key1 = 1;ÁªÑÂêàÁ¥¢ÂºïÊúâÊïàÔºõ select * from key1 = 1 and key2= 2;ÁªÑÂêàÁ¥¢ÂºïÊúâÊïàÔºõ select * from key2 = 2;ÁªÑÂêàÁ¥¢ÂºïÂ§±ÊïàÔºõ‰∏çÁ¨¶ÂêàÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô like ‰ª•%ÂºÄÂ§¥ ‰ΩøÁî®likeÊ®°Á≥äÊü•ËØ¢ÔºåÂΩì%Âú®ÂâçÁºÄÊó∂ÔºåÁ¥¢ÂºïÂ§±ÊïàÔºõ Â¶Ç‰ΩïÂàóÁ±ªÂûãÊòØÂ≠óÁ¨¶‰∏≤ÔºåwhereÊó∂‰∏ÄÂÆöÁî®ÂºïÂè∑Êã¨Ëµ∑Êù•ÔºåÂê¶ÂàôÁ¥¢ÂºïÂ§±Êïà ÂΩìÂÖ®Ë°®Êâ´ÊèèÈÄüÂ∫¶ÊØîÁ¥¢ÂºïÈÄüÂ∫¶Âø´Êó∂Ôºåmysql‰ºö‰ΩøÁî®ÂÖ®Ë°®Êâ´ÊèèÔºåÊ≠§Êó∂Á¥¢ÂºïÂ§±Êïà ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô Âª∫Á´ã‰ª•‰∏ãsqlÔºö 123456789CREATE TABLE IF NOT EXISTS `test_index`( `id` int(4) NOT NULL AUTO_INCREMENT, `a` int(4) NOT NULL DEFAULT '0', `b` int(4) NOT NULL DEFAULT '0', `c` int(4) NOT NULL DEFAULT '0', `data` int(4) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `union_index` (`a`,`b`,`c`))ENGINE=InnoDB ROW_FORMAT=DYNAMIC DEFAULT CHARSET=binary; ÊµãËØïÁöÑmysqlÁâàÊú¨ÊòØ 5.7. È¶ñÂÖà‰ª•Âàóa‰Ωú‰∏∫Êù°‰ª∂Êü•ËØ¢Êï∞ÊçÆÔºåÊàë‰ª¨ÁúãÂà∞ type: ref Ë°®Á§∫ÂºïÁî®Êü•Êâæ, key_len: 4 Ë°®Á§∫Á¥¢ÂºïÈïøÂ∫¶‰∏∫4Ôºå‰πüÂ∞±ÊòØÂà©Áî®‰∏ä‰∫ÜÁ¥¢ÂºïÊù•ËøõË°åÊü•Êâæ: 123456789101112131415explain select data from test_index where a = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: refpossible_keys: union_index key: union_index key_len: 4 ref: const rows: 70 filtered: 100.00 Extra: NULL1 row in set, 1 warning (0.01 sec) ÁÑ∂Âêé‰ª•Âàób‰Ωú‰∏∫Êù°‰ª∂Êü•ËØ¢Êï∞ÊçÆÔºåÂèØ‰ª•ÁúãÂà∞type: ALLË°®Á§∫ÂÖ®Ë°®Êü•Êâæ, key_len: NULL Ë°®Á§∫Ê≤°ÊúâÁ¥¢ÂºïÔºå‰πüÂ∞±ËØ¥ÊòéÂ¶ÇÊûúÂè™‰ΩøÁî®b‰Ωú‰∏∫Êü•ËØ¢Êù°‰ª∂Ôºå‰∏çËÉΩÂà©Áî®Á¥¢ÂºïÊù•Âä†Âø´Êü•ÊâæÈÄüÂ∫¶. 123456789101112131415explain select data from test_index where b = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: ALLpossible_keys: NULL key: NULL key_len: NULL ref: NULL rows: 716173 filtered: 10.00 Extra: Using where1 row in set, 1 warning (0.00 sec) Êé•ÁùÄ‰ª•Âàóc‰Ωú‰∏∫Êù°‰ª∂Êü•ËØ¢Êï∞ÊçÆÔºåÂèØ‰ª•ÁúãÂà∞type: ALLË°®Á§∫ÂÖ®Ë°®Êü•Êâæ, key_len: NULL Ë°®Á§∫Ê≤°ÊúâÁ¥¢ÂºïÔºåÊÉÖÂÜµ‰∏éÁî®b‰Ωú‰∏∫Êù°‰ª∂‰∏ÄÊ†∑ÔºåÂè™‰ΩøÁî®c‰Ωú‰∏∫Êü•ËØ¢Êù°‰ª∂‰πü‰∏çËÉΩÂà©Áî®Á¥¢ÂºïÊù•Âä†Âø´Êü•ÊâæÈÄüÂ∫¶ 123456789101112131415explain select data from test_index where c = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: ALLpossible_keys: NULL key: NULL key_len: NULL ref: NULL rows: 716173 filtered: 10.00 Extra: Using where1 row in set, 1 warning (0.00 sec) Áé∞Âú®Êù•Êµã‰∏Ä‰∏ã‰ΩøÁî®a„ÄÅb‰Ωú‰∏∫Êù°‰ª∂ÁöÑÊÉÖÂÜµÔºåÊàë‰ª¨ÁúãÂà∞ type: ref Ë°®Á§∫ÂºïÁî®Êü•Êâæ, key_len: 8 Ë°®Á§∫Á¥¢ÂºïÈïøÂ∫¶‰∏∫8Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨Âà©Áî®‰∏ä‰∫Üa„ÄÅbËÅîÂêàÁ¥¢ÂºïÊù•ËøõË°åÊü•Êâæ 123456789101112131415explain select data from test_index where a = 1 and b = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: refpossible_keys: union_index key: union_index key_len: 8 ref: const,const rows: 1 filtered: 100.00 Extra: NULL1 row in set, 1 warning (0.00 sec) Á¥ßÊé•ÁùÄÊù•Êµã‰∏Ä‰∏ã‰ΩøÁî®a„ÄÅc‰Ωú‰∏∫Êù°‰ª∂ÁöÑÊÉÖÂÜµÔºåÊàë‰ª¨ÁúãÂà∞ type: ref Ë°®Á§∫ÂºïÁî®Êü•Êâæ, key_len: 4 Ë°®Á§∫Á¥¢ÂºïÈïøÂ∫¶‰∏∫4ÔºåËøôÂ∞±Â•áÊÄ™‰∫ÜÔºåÊåâÁÖßÊúÄÂ∑¶ÂéüÂàôÊù•ËØ¥Ôºåa„ÄÅc‰∏äÊòØ‰∏ç‰ºöÂª∫Á´ãÁ¥¢ÂºïÁöÑÔºå‰∏∫‰ªÄ‰πà‰ºöÊúâÁ¥¢ÂºïÈïøÂ∫¶Âë¢ÔºüÂÖ∂ÂÆû‰∏éa„ÄÅb‰∏äÁöÑÁ¥¢Âºï‰∏ÄÊØîËæÉÊàë‰ª¨Â∞±ËÉΩÂèëÁé∞Ôºåa„ÄÅc‰∏äÁöÑÁ¥¢ÂºïÈïøÂ∫¶Âè™Êúâ4ÔºåËÄå‰∏îÂçïÁã¨ÁöÑc‰∏äÊòØÊ≤°ÊúâÁ¥¢ÂºïÁöÑÔºåÊâÄ‰ª•4Â≠óËäÇÈïøÂ∫¶ÁöÑÁ¥¢ÂºïÂè™ËÉΩÊòØa‰∏äÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ËøôÁßçÊÉÖÂÜµÊàë‰ª¨Âè™‰ΩøÁî®‰∫ÜaÂàó‰∏äÁöÑÁ¥¢ÂºïÊù•ËøõË°åÊü•Êâæ 123456789101112131415explain select data from test_index where a = 1 and c = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: refpossible_keys: union_index key: union_index key_len: 4 ref: const rows: 70 filtered: 10.00 Extra: Using index condition1 row in set, 1 warning (0.00 sec) ‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•È™åËØÅ‰∏äÈù¢ÁöÑÊÉ≥Ê≥ïÔºåËøô‰∏ÄÊ¨°Êµã‰∏Ä‰∏ã‰ΩøÁî®b„ÄÅc‰Ωú‰∏∫Êù°‰ª∂ÁöÑÊÉÖÂÜµÔºåÊàë‰ª¨ÁúãÂà∞ type: ALL Ë°®Á§∫ÂÖ®Ë°®Êü•Êâæ, key_len: NULL Ë°®Á§∫Ê≤°ÊúâÁ¥¢ÂºïÂèØ‰ª•‰ΩøÁî®ÔºåÊåâÁÖßÊúÄÂ∑¶ÂéüÂàôÊù•ËØ¥ÔºåbÂàó‰∏äÊ≤°ÊúâÁ¥¢ÂºïÔºåcÂàó‰∏ä‰πüÊ≤°ÊúâÁ¥¢ÂºïÔºåÂêåÊó∂b„ÄÅcÁöÑ‰∏ä‰πü‰∏çÂ≠òÂú®ËÅîÂêàÁ¥¢ÂºïÔºåÊâÄ‰ª•‰ΩøÁî®b„ÄÅc‰Ωú‰∏∫Êü•ËØ¢Êù°‰ª∂Êó∂Êó†Ê≥ïÂà©Áî®ËÅîÂêàÁ¥¢Âºï 123456789101112131415explain select data from test_index where b = 1 and c = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: ALLpossible_keys: NULL key: NULL key_len: NULL ref: NULL rows: 716173 filtered: 1.00 Extra: Using where1 row in set, 1 warning (0.00 sec) ÊµãËØïÂÆå‰∏§‰∏™Êù°‰ª∂ÁöÑÊÉÖÂÜµÔºåÊé•‰∏ãÊù•ÊµãËØï‰∏Ä‰∏ã‰ΩøÁî®a„ÄÅb„ÄÅc‰Ωú‰∏∫Êù°‰ª∂ÁöÑÊÉÖÂÜµÔºåÊàë‰ª¨ÁúãÂà∞ type: ref Ë°®Á§∫ÂºïÁî®Êü•Êâæ, key_len: 12 Ë°®Á§∫Á¥¢ÂºïÈïøÂ∫¶‰∏∫12ÔºåËøôÂÆåÂÖ®Á¨¶ÂêàËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂéüÂàôÔºåÂêåÊó∂‰ΩøÁî®3‰∏™Êù°‰ª∂Êü•ËØ¢ÂèØ‰ª•Âà©Áî®ËÅîÂêàÁ¥¢Âºï 123456789101112131415explain select data from test_index where a = 1 and b = 1 and c = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: refpossible_keys: union_index key: union_index key_len: 12 ref: const,const,const rows: 1 filtered: 100.00 Extra: NULL1 row in set, 1 warning (0.00 sec) ‰∏ãÈù¢ËøôÁßçÊÉÖÂÜµ‰πüËÉΩÂà©Áî®a„ÄÅb‰∏äÁöÑËÅîÂêàÁ¥¢ÂºïÔºåÁ¥¢ÂºïÈïøÂ∫¶‰∏∫8 123456789101112131415explain select data from test_index where b = 1 and a = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: refpossible_keys: union_index key: union_index key_len: 8 ref: const,const rows: 1 filtered: 100.00 Extra: NULL1 row in set, 1 warning (0.00 sec) ÂÜçÊù•ËØïËØïËøôÁßçÊÉÖÂÜµÔºåÊåâÁÖßÊúÄÂ∑¶ÂéüÂàôÔºåc‰∏äÊ≤°ÊúâÂª∫Á´ãÁ¥¢ÂºïÔºåa‰∏äÊúâÁ¥¢ÂºïÔºåc„ÄÅaÊ≤°ÊúâÂª∫Á´ãËÅîÂêàÁ¥¢ÂºïÔºåÊâÄ‰ª•Âè™ËÉΩ‰ΩøÁî®a‰∏äÁöÑÁ¥¢ÂºïËøõË°åÊü•ÊâæÔºåÁªìÊûúÁ¥¢ÂºïÈïøÂ∫¶Âè™Êúâ4ÔºåÈ™åËØÅ‰∫ÜÊàë‰ª¨ÁöÑÊÉ≥Ê≥ïÔºåËÅîÂêàÊü•ËØ¢Êù°‰ª∂‰ΩøÁî®Á¥¢ÂºïÊó∂Êª°Ë∂≥‚Äú‰∫§Êç¢Âæã‚Äù 123456789101112131415explain select data from test_index where c = 1 and a = 1*************************** 1. row *************************** id: 1select_type: SIMPLE table: test_indexpartitions: NULL type: refpossible_keys: union_index key: union_index key_len: 4 ref: const rows: 70 filtered: 10.00 Extra: Using index condition1 row in set, 1 warning (0.00 sec) ËÅîÂêàÁ¥¢ÂºïÊÄªÁªì ËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂéüÂàôÂ∞±ÊòØÂª∫Á´ãÁ¥¢ÂºïKEY union_index (a,b,c)Êó∂ÔºåÁ≠â‰∫éÂª∫Á´ã‰∫Ü(a)„ÄÅ(a,b)„ÄÅ(a,b,c)‰∏â‰∏™Á¥¢ÂºïÔºå‰ªéÂΩ¢Âºè‰∏äÁúãÂ∞±ÊòØÁ¥¢ÂºïÂêëÂ∑¶‰æßËÅöÈõÜÔºåÊâÄ‰ª•Âè´ÂÅöÊúÄÂ∑¶ÂéüÂàôÔºåÂõ†Ê≠§ÊúÄÂ∏∏Áî®ÁöÑÊù°‰ª∂Â∫îËØ•ÊîæÂà∞ËÅîÂêàÁ¥¢ÂºïÁöÑÁªÑÂ∑¶‰æß„ÄÇ **ÂØπ‰∫é&quot;=&quot;Âíå&quot;in&quot;ÂèØ‰ª•‰π±Â∫è„ÄÇ**Âà©Áî®ËÅîÂêàÁ¥¢ÂºïÂä†ÈÄüÊü•ËØ¢Êó∂ÔºåËÅîÂêàÊü•ËØ¢Êù°‰ª∂Á¨¶Âêà‚Äú‰∫§Êç¢Âæã‚ÄùÔºå‰πüÂ∞±ÊòØwhere a = 1 and b = 1 Á≠â‰ª∑‰∫é where b = 1 and a = 1„ÄÇËøôÂΩíÂäü‰∫émysqlÊü•ËØ¢‰ºòÂåñÂô®ÔºåmysqlÊü•ËØ¢‰ºòÂåñÂô®‰ºöÂà§Êñ≠Á∫†Ê≠£ËøôÊù°sqlËØ≠Âè•ËØ•‰ª•‰ªÄ‰πàÊ†∑ÁöÑÈ°∫Â∫èÊâßË°åÊïàÁéáÊúÄÈ´òÔºåÊúÄÂêéÊâçÁîüÊàêÁúüÊ≠£ÁöÑÊâßË°åËÆ°Âàí„ÄÇ mysql‰ºö‰∏ÄÁõ¥ÂêëÂè≥ÂåπÈÖçÁõ¥Âà∞ÈÅáÂà∞ËåÉÂõ¥Êü•ËØ¢(&lt;,&gt;,between,like)Â∞±ÂÅúÊ≠¢ÂåπÈÖç„ÄÇÊØîÂ¶Ça=3 and b=4 and c&gt;5 and d=6ÔºåÂ¶ÇÊûúÂª∫Á´ã(a,b,c,d)È°∫Â∫èÁöÑÁ¥¢ÂºïÔºådÊòØÁî®‰∏çÂà∞Á¥¢ÂºïÁöÑ„ÄÇÂ¶ÇÊûúÂª∫Á´ã(a,b,d,c)ÁöÑÁ¥¢ÂºïÂàôÈÉΩÂèØ‰ª•Áî®Âà∞Ôºåa,b,dÁöÑÈ°∫Â∫èÂèØ‰ª•‰ªªÊÑèË∞ÉÊï¥„ÄÇ ÂØπ‰∫éÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÁöÑÁêÜËß£ mysqlÁ¥¢ÂºïÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÁöÑÁêÜËß£?‚ÄìÊ≤àÊù∞ÁöÑÂõûÁ≠î ÂÖ∂ÂÆûÊàëËßâÂæóÂè™Ë¶ÅÁêÜËß£‰∏ÄÁÇπÂ∞±ÊòØÔºåÂè™Ë¶ÅÊúâÊúÄÂ∑¶ËæπÁöÑÁ¥¢ÂºïÂÖÉÁ¥†ÔºåÈÇ£‰πàËøô‰∏™Á¥¢ÂºïÁªìÊûÑ‰∏ÄÂÆöÊòØÊåâÁÖßÊúÄÂ∑¶Á¥¢ÂºïÂÖÉÁ¥†ÊéíÂ∫èÁöÑÔºåÂêéÂ∫èÁöÑÁ¥¢ÂºïÂÖÉÁ¥†‰πüÊòØ‰æùËµñ‰∫éÊúÄÂ∑¶ÂÖÉÁ¥†‰πãÂêéÊâçÊúâÂèØËÉΩÂèòÂæóÊúâÊÑè‰πâ„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLË∞É‰ºò]]></title>
    <url>%2F2019%2F01%2F26%2Fmysql%2FMySQL%E8%B0%83%E4%BC%98%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰ªãÁªçÊúÄÂü∫Êú¨ÁöÑsqlË∞É‰ºòÊâãÊÆµ„ÄÇ Ê†πÊçÆÊÖ¢Êó•ÂøóÂÆö‰ΩçÊÖ¢Êü•ËØ¢sql 12&lt;!--ËøôÈáåÊòØÁî®Ê®°Á≥äÊü•ËØ¢Êü•Âá∫ÂÖ≥‰∫éÊü•ËØ¢ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÈ°π--&gt;show variables like '%query%' Êàë‰ª¨ÂÖ≥Ê≥®slow_query_logÔºöOFFÔºåË°®Á§∫ÊÖ¢Êü•ËØ¢Â§Ñ‰∫éÂÖ≥Èó≠Áä∂ÊÄÅ„ÄÇÂÖ≥Ê≥®long_query_timeÔºöË∂ÖÂá∫Ëøô‰∏™Êó∂Èó¥Â∞±ÊòØÊÖ¢Êü•ËØ¢ÔºåËÆ∞ÂΩïÂà∞slow_query_log_fileÊñá‰ª∂‰∏≠„ÄÇ 1show status like '%slow_queries%' Ëøô‰∏ÄÂè•‰ΩúÁî®ÊòØÁªüËÆ°ÊÖ¢Êü•ËØ¢ÁöÑÊï∞Èáè„ÄÇ Â¶Ç‰ΩïÊâìÂºÄÊÖ¢Êü•ËØ¢Âë¢Ôºü 1234&lt;!--ÊâìÂºÄÊÖ¢Êü•ËØ¢--&gt;set global slow_query_log = on;&lt;!--ÊÖ¢Êü•ËØ¢ÁöÑÊ†áÂáÜÊòØ1Áßí--&gt;set global long_query_time = 1; Ê≥®ÊÑèË¶ÅÈáçÂêØ‰∏Ä‰∏ãÂÆ¢Êà∑Á´Ø„ÄÇÊàñËÄÖÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆæÁΩÆÔºåÈáçÂêØÊúçÂä°Á´ØÂ∞±Ê∞∏‰πÖ‰øùÁïô‰∫Ü„ÄÇ explainÂàÜÊûêÊÖ¢Êó•Âøó ‰∏ä‰∏ÄÊ≠•Êó∂ÊâìÂºÄÊÖ¢Êü•ËØ¢Êó•Âøó„ÄÇ‰∏ãÈù¢Ë¶ÅËøõË°åÂàÜÊûê„ÄÇ 1explain select ... ÂØπËøô‰∏™ÂëΩ‰ª§ËøõË°åÂàÜÊûê„ÄÇÊúâ‰∏§‰∏™ÂÖ≥ÈîÆÂ≠óÊÆµÔºö typeÔºöË°®Á§∫mysqlÊâæÂà∞Êï∞ÊçÆË°åÁöÑÊñπÂºèÔºå‰∏ãÈù¢ÁöÑÈ°∫Â∫èÊòØÁî±Âø´Âà∞ÊÖ¢Ôºö system&gt;const&gt; eq_ref&gt;ref&gt;fulltext&gt;ref_or_null&gt;index_merge&gt;unique_subquery&gt;index_subquery&gt;range&gt;index&gt;all ÂÖ∂‰∏≠indexÂíåall‰∏∫ÂÖ®Ë°®Êâ´Êèè„ÄÇËØ¥ÊòéÈúÄË¶Å‰ºòÂåñ„ÄÇ extraÔºö using_filesortÔºöË°®Á§∫MySQL‰ºöÂØπÁªìÊûú‰ΩøÁî®‰∏Ä‰∏™Â§ñÈÉ®Á¥¢ÂºïÊéíÂ∫èÔºåËÄå‰∏çÊòØ‰ªéË°®ÈáåÊåâÁ¥¢ÂºïÊ¨°Â∫èËØªÂà∞Áõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇÂèØËÉΩÂú®ÂÜÖÂ≠òÊàñËÄÖÁ£ÅÁõò‰∏äËøõË°åÊéíÂ∫è„ÄÇMqSQL‰∏≠Êó†Ê≥ïÂà©Áî®Á¥¢ÂºïÂÆåÊàêÁöÑÊéíÂ∫èÊìç‰ΩúÁß∞‰∏∫‚ÄúÊñá‰ª∂ÊéíÂ∫è‚Äù using temporaryÔºöË°®Á§∫MySQLÂú®ÂØπÊü•ËØ¢ÁªìÊûúÊéíÂ∫èÊó∂‰ΩøÁî®‰∏¥Êó∂Ë°®„ÄÇÂ∏∏ËßÅ‰∫éÊéíÂ∫èorder by ÂíåÂàÜÁªÑÊü•ËØ¢ group by„ÄÇ ÂΩìextra‰∏≠Âá∫Áé∞‰ª•‰∏ä‰∏§È°πÊÑèÂë≥ÁùÄMYSQLÊ†πÊú¨‰∏çËÉΩ‰ΩøÁî®Á¥¢ÂºïÔºåÊïàÁéá‰ºöÂèóÂà∞ÈáçÂ§ßÂΩ±ÂìçÔºåÂ∫îÂ∞ΩÂèØËÉΩÂØπÊ≠§ËøõË°å‰ºòÂåñ„ÄÇ ‰øÆÊîπsqlÊàñËÄÖÂ∞ΩÈáèËÆ©sqlËµ∞Á¥¢Âºï ‰∏ä‰∏ÄÊ≠•ÂàÜÊûêÂÆå‰πãÂêéÔºåÂ∞±Ë¶ÅÈááÂèñ‰∏ÄÂÆöÁöÑÊé™ÊñΩÊù•‰øÆÊ≠£„ÄÇ Â¶ÇÊûúÊòØÊ≤°ÊúâÂä†Á¥¢ÂºïÔºåÂèØ‰ª•ÂØπÂÖ∂Âä†‰∏äÁ¥¢Âºï„ÄÇextraÂ∞±‰ºöÂèòÊàêusing indexÔºåË°®Á§∫Ëµ∞‰∫ÜÁ¥¢Âºï„ÄÇ Á¥¢ÂºïÊòØË∂äÂ§öË∂äÂ•ΩÂêó Êï∞ÊçÆÈáèÂ∞èÁöÑË°®‰∏çÈúÄË¶ÅÂª∫Á´ãÁ¥¢ÂºïÔºåÂª∫Á´ã‰ºöÂ¢ûÂä†È¢ùÂ§ñÁöÑÁ¥¢ÂºïÂºÄÈîÄ Êï∞ÊçÆÂèòÊõ¥ÈúÄË¶ÅÁª¥Êä§Á¥¢ÂºïÔºåÂõ†Ê≠§Êõ¥Â§öÁöÑÁ¥¢ÂºïÊÑèÂë≥ÁùÄÊõ¥Â§öÁöÑÁª¥Êä§ÊàêÊú¨ Êõ¥Â§öÁöÑÁ¥¢ÂºïÊÑèÂë≥ÁùÄ‰πüÈúÄË¶ÅÊõ¥Â§öÁöÑÁ©∫Èó¥ ÂèØ‰ª•ÁêÜËß£‰∏∫Ôºå‰∏Ä‰∏™Âá†È°µÁöÑÂÆ£‰º†ÊâãÂÜå ÂØπ‰∫éÂá†È°µÁöÑÂÆ£‰º†ÊâãÂÜåÊàë‰ª¨ËøòÈúÄË¶ÅÂª∫Á´ã‰∏Ä‰∏™ÁõÆÂΩïÂêóÔºü ÂèòÊõ¥Ëøô‰∏™Â∞èÁöÑÂÆ£‰º†ÊâãÂÜåÈáåÈù¢ÁöÑÁ´†ËäÇËøòË¶Å‰øÆÊîπÁõÆÂΩï‰∏çÊòØÊõ¥ÁÉ¶ÂêóÔºü ‰∏Ä‰∏™ÂÆ£‰º†ÊâãÂÜåÂÜÖÂÆπÂ∞±‰∏§È°µÔºåÁªìÊûú‰Ω†ÁöÑÁõÆÂΩïÂ∞±Âç†‰∫Ü‰∏ÄÈ°µÔºåËøôÂêàÁêÜÂêóÔºü]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÁ¥¢ÂºïÂÖ®Èù¢Ëß£ËØª]]></title>
    <url>%2F2019%2F01%2F26%2Fmysql%2FMySQL%E7%B4%A2%E5%BC%95%E5%85%A8%E9%9D%A2%E8%A7%A3%E8%AF%BB%2F</url>
    <content type="text"><![CDATA[ÂΩªÂ∫ïÁêÜËß£MySQLÁöÑÂ≠òÂÇ®ÂºïÊìéÊï∞ÊçÆÁªìÊûÑ‰ª•ÂèäËÅöÈõÜÁ¥¢Âºï„ÄÇ 1.‰∏∫‰ªÄ‰πàÈúÄË¶ÅÁ¥¢Âºï Â¶ÇÊûú‰∏çÁî®Á¥¢ÂºïÔºåÈÇ£‰πàÊúÄÁÆÄÂçïÁöÑÊñπÊ°àÊòØÔºöÂ∞ÜÊï∞ÊçÆÂÖ®ÈÉ®ÊàñËÄÖÂàÜÊâπÊ¨°Âú∞Âä†ËΩΩÂà∞ÂÜÖÂ≠òÔºåÂõ†‰∏∫Êï∞ÊçÆÊòØ‰ª•È°µÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ËΩÆËØ¢Ëøô‰∫õÈ°µÔºåÊâæÂá∫ÊúâÊ≤°ÊúâÊàë‰ª¨ÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÇ Âú®Â§ßÊï∞ÊçÆÈáèÁöÑÊÉÖÂÜµ‰∏ãÔºåÊòæÁÑ∂ÊòØ‰ºöÈùûÂ∏∏ÊÖ¢ÁöÑ„ÄÇÂõ†‰∏∫ÂÆÉË¶ÅËøõË°åÂÖ®Ë°®ÁöÑÊâ´Êèè„ÄÇ ËÄåÁ¥¢ÂºïÁöÑÁÅµÊÑüÊù•Ê∫ê‰∫éÂ≠óÂÖ∏ÔºåÊàë‰ª¨Áü•ÈÅìÔºåÊñ∞ÂçéÂ≠óÂÖ∏ÂâçÈù¢ÊúâÊåâÁÖßÊãºÈü≥ÊàñËÄÖÊåâÂÅèÊóÅÈÉ®È¶ñÊéíÂ∫èÁöÑ‰∏Ä‰∏™ÂàóË°®È°µÔºåÊàë‰ª¨ÂèØ‰ª•Âø´ÈÄüÂú∞Ê†πÊçÆËøô‰∏™Á¥¢ÂºïÁõÆÂΩïËøÖÈÄüÂÆö‰ΩçÂà∞ÊüêÂá†È°µÔºåÁÑ∂ÂêéÊàë‰ª¨Âà∞Ëøô‰∏™ÊüêÂá†È°µÊâæ‰∏Ä‰∏ãÂ∞±ÂèØ‰ª•ÊâæÂà∞‰∫Ü„ÄÇ‰∏çÈúÄË¶ÅÂÖ®Ë°®Êâ´Êèè„ÄÇ 2.Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑ 2.1 ‰∫åÂèâÊü•ÊâæÊ†ë‰∏äÈòµ ‰∫åÂèâÊü•ÊâæÊ†ëÁöÑÁâπÁÇπÔºö ‰∫åÂàÜÊêúÁ¥¢Ê†ëÊú¨Ë¥®‰∏äÊòØ‰∏ÄÊ£µ‰∫åÂèâÊ†ë„ÄÇ‰∏çÈúÄË¶ÅÊòØ‰∏ÄÊ£µÂÆåÂÖ®‰∫åÂèâÊ†ë„ÄÇ ÊØè‰∏™ËäÇÁÇπÁöÑÈîÆÂÄºÂ§ß‰∫éÂ∑¶Â≠©Â≠ê ÊØè‰∏™ËäÇÁÇπÁöÑÈîÆÂÄºÂ∞è‰∫éÂè≥Â≠©Â≠ê ‰ª•Â∑¶Âè≥Â≠©Â≠ê‰∏∫Ê†πÁöÑÂ≠êÊ†ë‰ªç‰∏∫‰∫åÂàÜÊêúÁ¥¢Ê†ë ‰∫åÂèâÊü•ÊâæÊ†ëÊúâÁÇπÂæàÊòéÊòæÔºåÊàë‰ª¨Êü•ËØ¢‰∏Ä‰∏™Êï∞ÊçÆÂè™ÈúÄË¶ÅO(logn)ÁöÑÊó∂Èó¥„ÄÇ‰ΩÜÊòØÂÆÉÂ≠òÂú®‰∏Ä‰∏™Ëá¥ÂëΩÈóÆÈ¢òÔºö Êàë‰ª¨ÊúâÊó∂‰ºöÂà†Èô§Â¢ûÂä†Êï∞ÊçÆÔºåÊêûÁöÑ‰∏çÂ•ΩÔºå‰ºöÊää‰ªñÊÅ∂ÂåñÊàê‰∏Ä‰∏™ÈìæË°®„ÄÇ ‰ΩÜÊòØÊúâÁöÑÂêåÂ≠¶ËØ¥ÔºåÊàë‰ª¨ÂèØ‰ª•Âà©Áî®Á∫¢ÈªëÊ†ë‰πãÁ±ªÁöÑÊï∞ÊçÆÁªìÊûÑÊù•Áª¥ÊåÅ‰ΩèÂπ≥Ë°°‰∫åÂèâÊ†ëÁöÑÁâπÊÄßÔºåËøôÊ†∑‰∏çÂ∞±Â•Ω‰∫ÜÂêóÔºü ËøôÈáåËøòÂ≠òÂú®Âè¶‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØIO„ÄÇÊàë‰ª¨Áü•ÈÅì‰ªéÁ£ÅÁõòÊü•ËØ¢Êï∞ÊçÆÔºåÂΩ±ÂìçÊÄßËÉΩÁöÑÂÖ≥ÈîÆÁÇπÊòØiOÁöÑÊ¨°Êï∞ÔºåÁÑ∂ÂêéËøôÁßç‰∏Ä‰∏™ËäÇÁÇπÂè™Êúâ‰∏§‰∏™Â≠©Â≠êÔºåÂú®Êµ∑ÈáèÊï∞ÊçÆÈáåÔºåIOÁöÑÊ¨°Êï∞ËøòÊòØÂ§™Â§öÔºåÂΩ±ÂìçÊÄßËÉΩ„ÄÇ Êàë‰ª¨Ëøô‰∏™Êó∂ÂÄôÂ∞±Áü•ÈÅì‰∫ÜÊñπÂêëÔºåÊàë‰ª¨ÊÉ≥Êâæ‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÔºåÂÆÉÊó¢ÂåÖÂê´‰∫Ü‰∫åÂèâÊ†ëÁöÑ‰ºòÁÇπÔºåËøòË¶ÅÊòØÂπ≥Ë°°ÁöÑÊ†ëÔºåËøòËÉΩ‰ΩøÊ†ëÁöÑÈ´òÂ∫¶ÂèòÁüÆÔºåÂπ∂‰∏îÊØè‰∏™ËäÇÁÇπÂ≠òÂÇ®Êõ¥Â§öÁöÑÊï∞ÊçÆ„ÄÇ 2.2 BTree‰∏äÈòµ BÊï∞ÂèàÂè´Âπ≥Ë°°Â§öË∑ØÊü•ÊâæÊ†ë„ÄÇMÈò∂‰ª£Ë°®‰∏Ä‰∏™Ê†ëËäÇÁÇπÊúÄÂ§öÊúâÂ§öÂ∞ë‰∏™Êü•ÊâæË∑ØÂæÑÔºåM=MË∑Ø,ÂΩìM=2ÂàôÊòØ2ÂèâÊ†ë,M=3ÂàôÊòØ3Âèâ ÊúâÂá†‰∏™ÁâπÁÇπÔºö Ê†πËäÇÁÇπËá≥Â∞ëÂåÖÂê´‰∏§‰∏™Â≠©Â≠ê ÊéíÂ∫èÊñπÂºèÔºöÊâÄÊúâËäÇÁÇπÂÖ≥ÈîÆÂ≠óÊòØÊåâÈÄíÂ¢ûÊ¨°Â∫èÊéíÂàóÔºåÂπ∂ÈÅµÂæ™Â∑¶Â∞èÂè≥Â§ßÂéüÂàô Â≠êËäÇÁÇπÊï∞ÔºöÊ†ë‰∏≠ÊØè‰∏™ËäÇÁÇπÊúÄÂ§öÂåÖÂê´m‰∏™Â≠©Â≠ê(m&gt;=2)ÔºõÈô§Ê†πËäÇÁÇπÂíåÂè∂ËäÇÁÇπÂ§ñÔºåÂÖ∂‰ªñÊØè‰∏™ËäÇÁÇπËá≥Â∞ëÊúâceil(m/2)‰∏™Â≠©Â≠ê ÂÖ≥ÈîÆÂ≠óÊï∞ÔºöÊûùËäÇÁÇπÁöÑÂÖ≥ÈîÆÂ≠óÊï∞ÈáèÂ§ß‰∫éÁ≠â‰∫éceil(m/2)-1‰∏™‰∏îÂ∞è‰∫éÁ≠â‰∫ém-1‰∏™ÔºàÂàÜÂà´ÊØîÂ≠©Â≠êÊï∞Â∞ë‰∏Ä‰∏™Ôºâ ÊâÄÊúâÂè∂Â≠êËäÇÁÇπÈÉΩ‰Ωç‰∫éÂêå‰∏ÄÂ±ÇÔºåÂç≥ÊâÄÊúâÂè∂Â≠êËäÇÁÇπÈ´òÂ∫¶ÈÉΩ‰∏ÄÊ†∑ Êàë‰ª¨ÁªìÂêàËøô‰∏™ÂõæÊù•ÁêÜËß£„ÄÇ ÂèØ‰ª•ÁúãÂà∞ÔºåÊàë‰ª¨ËøôÊòØ‰∏Ä‰∏™3Ë∑ØBÊ†ëÔºåÊ†πËäÇÁÇπÊúâ3‰∏™Â≠©Â≠êÔºåÊúâ2‰∏™ÂÖ≥ÈîÆÂ≠ó„ÄÇÊ†πÊçÆËßÑÂàôÔºåÂ≠êËäÇÁÇπÊï∞ÊúÄÂ§ö‰∏∫m‰∏™Âç≥3‰∏™ÔºåÊúÄÂ∞ë‰∏∫ceil(1.5)‰∏™Âç≥2‰∏™ÔºõÂÖ≥ÈîÆÂ≠óÊï∞ÊúÄÂ§ö‰∏∫m-1‰∏™Âç≥2‰∏™ÔºåÊúÄÂ∞ë‰∏∫‰∫éceil(1.5)-1‰∏™Âç≥1‰∏™. ÈÇ£‰πàÊàë‰ª¨ËøõË°åÊèíÂÖ•ÁöÑÊó∂ÂÄôÔºåÂÖ≥ÈîÆÂ≠óËøôÈáåÊúÄÂ§ö‰∏∫2‰∏™ÔºåÊâÄ‰ª•Â§ß‰∫é2Â∞±Ë¶ÅËøõË°åÊãÜÂàÜ„ÄÇ Â¶Ç‰ΩïÊãÜÂàÜÂë¢ÔºüÊãø‰∏™‰æãÂ≠êÊù•Ôºö ÂÆö‰πâ‰∏Ä‰∏™5Èò∂Ê†ëÔºàÂπ≥Ë°°5Ë∑ØÊü•ÊâæÊ†ë;ÔºâÔºåÁé∞Âú®Êàë‰ª¨Ë¶ÅÊää3„ÄÅ8„ÄÅ31„ÄÅ11„ÄÅ23„ÄÅ29„ÄÅ50„ÄÅ28 Ëøô‰∫õÊï∞Â≠óÊûÑÂª∫Âá∫‰∏Ä‰∏™5Èò∂Ê†ëÂá∫Êù•; ÈÇ£‰πàÂÖ≥ÈîÆÂ≠óÊúÄÂ§ö‰∏∫4‰∏™ÔºåË∂ÖËøá4‰∏™Â∞±ÊãÜÂàÜ„ÄÇ ÂÖàÊèíÂÖ• 3„ÄÅ8„ÄÅ31„ÄÅ11 ÂÜçÊèíÂÖ•23„ÄÅ29 ÂÜçÊèíÂÖ•50„ÄÅ28 Â§ßÊ¶ÇÂ∞±ÊòØËøôÊ†∑ÁöÑÊµÅÁ®ã„ÄÇÊÄª‰πãË¶ÅÁª¥Êä§‰∏Ä‰∏™‰ªéÂ∑¶Âà∞Âè≥ÈÄêÊ∏êÂ¢ûÂ§ßÁöÑ‰∏Ä‰∏™ÁâπÊÄßÔºåÂπ∂‰∏îÂøÖÈ°ªÊòØÂπ≥Ë°°ÁöÑ„ÄÇ(Â§ßÊ¶ÇÂøΩÁï•ÈáåÈù¢ÂèØËÉΩÂ≠òÂú®ÁöÑ‰∏Ä‰∫õÂ∞èÈîôËØØÔºåÁêÜËß£ÂÖ∂‰∏≠ÊÑèÊÄùÂç≥ÂèØ) ÂØπ‰∫éÂà†Èô§‰πüÊòØÂ¶ÇÊ≠§ÔºåË¶ÅÊª°Ë∂≥‰ª•‰∏äÁöÑÁâπÊÄßÊâçË°åÔºåËøôÈáåÂ∞±‰∏çÂÜçËµòËø∞‰∫Ü„ÄÇ ÂØπBÊ†ëÊÄªÁªì‰∏Ä‰∏ãÔºö BÊ†ëÁõ∏ÂØπ‰∫éÂπ≥Ë°°‰∫åÂèâÊ†ëÁöÑ‰∏çÂêåÊòØÔºåÊØè‰∏™ËäÇÁÇπÂåÖÂê´ÁöÑÂÖ≥ÈîÆÂ≠óÂ¢ûÂ§ö‰∫ÜÔºåÁâπÂà´ÊòØÂú®BÊ†ëÂ∫îÁî®Âà∞Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆÂ∫ìÂÖÖÂàÜÂà©Áî®‰∫ÜÁ£ÅÁõòÂùóÁöÑÂéüÁêÜÔºàÁ£ÅÁõòÊï∞ÊçÆÂ≠òÂÇ®ÊòØÈááÁî®ÂùóÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÁöÑÔºåÊØè‰∏™ÂùóÁöÑÂ§ßÂ∞è‰∏∫4KÔºåÊØèÊ¨°IOËøõË°åÊï∞ÊçÆËØªÂèñÊó∂ÔºåÂêå‰∏Ä‰∏™Á£ÅÁõòÂùóÁöÑÊï∞ÊçÆÂèØ‰ª•‰∏ÄÊ¨°ÊÄßËØªÂèñÂá∫Êù•ÔºâÊääËäÇÁÇπÂ§ßÂ∞èÈôêÂà∂ÂíåÂÖÖÂàÜ‰ΩøÁî®Âú®Á£ÅÁõòÂø´Â§ßÂ∞èËåÉÂõ¥ÔºõÊääÊ†ëÁöÑËäÇÁÇπÂÖ≥ÈîÆÂ≠óÂ¢ûÂ§öÂêéÊ†ëÁöÑÂ±ÇÁ∫ßÊØîÂéüÊù•ÁöÑ‰∫åÂèâÊ†ëÂ∞ë‰∫ÜÔºåÂáèÂ∞ëÊï∞ÊçÆÊü•ÊâæÁöÑÊ¨°Êï∞ÂíåÂ§çÊùÇÂ∫¶; 2.3 B+Ê†ë ÊòØBÊ†ëÁöÑÂèò‰ΩìÔºåÂÖ∂ÂÆö‰πâÂü∫Êú¨‰∏ä‰∏éBÊ†ëÊòØÂ∑Æ‰∏çÂ§öÁöÑ„ÄÇÈô§‰∫ÜÔºö ÈùûÂè∂Â≠êËäÇÁÇπÁöÑÂ≠êÊ†ëÊåáÈíà‰∏éÂÖ≥ÈîÆÂ≠ó‰∏™Êï∞Áõ∏Âêå ÈùûÂè∂Â≠êËäÇÁÇπ‰ªÖÁî®Êù•Á¥¢ÂºïÔºåÊï∞ÊçÆÈÉΩ‰øùÂ≠òÂú®Âè∂Â≠êËäÇÁÇπ‰∏≠ ÊâÄÊúâÂè∂Â≠êËäÇÁÇπÂùáÊúâ‰∏Ä‰∏™ÈìæÊåáÈíàÊåáÂêë‰∏ã‰∏Ä‰∏™Âè∂Â≠êËäÇÁÇπ ËøôÂ∞±ÊòØB+Ê†ëÁõ∏ÂØπ‰∫éBÊ†ëÁöÑÊîπËøõÁöÑÂá†‰∏™ÁÇπ„ÄÇ Áî±‰∫éÊï∞ÊçÆÂ≠òÂú®Âè∂Â≠êËäÇÁÇπÔºå‰ºòÁÇπÊòØÈùûÂè∂Â≠êËäÇÁÇπ‰øùÂ≠òÁöÑÂÖ≥ÈîÆÂ≠óÊõ¥Â§ö‰∫ÜÔºåÊ†ëÁöÑÈ´òÂ∫¶Â∞±‰ºöÊõ¥ÁüÆ„ÄÇ 2.4 ÊÄªÁªì B+Ê†ëÊõ¥ÈÄÇÂêàÁî®Êù•ÂÅöÂ≠òÂÇ®Á¥¢ÂºïÔºö B+Ê†ëÁöÑÁ£ÅÁõòËØªÂÜô‰ª£‰ª∑Êõ¥‰ΩéÔºàÂõ†‰∏∫ÂÜÖÈÉ®‰∏çÂ≠òÊîæÊï∞ÊçÆÔºå‰∏ÄÊ¨°ÊÄßËØªÂèñÁöÑÂÖ≥ÈîÆÂ≠óÊõ¥Â§öÔºåIOÊ¨°Êï∞Èôç‰ΩéÔºâ B+Ê†ëÁöÑÊü•ËØ¢ÊïàÁéáÊõ¥Âä†Á®≥ÂÆöÔºà‰ªª‰ΩïÂÖ≥ÈîÆÂ≠óÁöÑÊü•ÊâæÈÉΩË¶ÅÂà∞Âè∂Â≠êËäÇÁÇπÔºåÂØºËá¥ÊØè‰∏™Êü•ËØ¢ÈÉΩÂ∑Æ‰∏çÂ§öÔºâ B+Ê†ëÊúâÂà©‰∫éÂØπÊï∞ÊçÆÂ∫ìÊâ´ÊèèÔºàÈÅçÂéÜÂè∂Â≠êËäÇÁÇπÂ∞±ÂèØ‰ª•Áõ¥Êé•Êâ´ÊèèÊï¥‰∏™Ë°®ÔºåËøô‰∏™ÈÄÇÂêàÂÅöËåÉÂõ¥Êü•ËØ¢Ôºâ 2.5 HashÁ¥¢Âºï‰πüÂèØ‰ª•ËÄÉËôë‰∏Ä‰∏ã HashÁªìÊûÑÂèØ‰ª•‰∏ÄÊ¨°ÊÄßÂú∞ÂÆö‰ΩçÂà∞ÂìçÂ∫î‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÈÅáÂà∞Á¢∞ÊíûÁöÑÊÉÖÂÜµÔºåÂè™ÈúÄË¶ÅÈÅçÂéÜÈìæË°®Âç≥ÂèØ„ÄÇÈÇ£‰πàÊÄßËÉΩËøô‰πàÈ´òÔºå‰∏∫‰ªÄ‰πàÊàë‰ª¨‰∏çÁî®HashÁ¥¢ÂºïÂë¢Ôºü ÂÆÉ‰πüÊúâÁº∫ÁÇπÔºö Âè™ËÉΩÂÅöÁ≠âÂÄºÊìç‰ΩúÔºå‰∏çËÉΩ‰ΩøÁî®ËåÉÂõ¥Êü•ËØ¢ hashÁ¥¢Âºï‰∏çÊòØÊåâÁÖßÁ¥¢ÂºïÂÄºÈ°∫Â∫èÂ≠òÂÇ®ÔºåÊó†Ê≥ï‰ΩøÁî®‰∫éÊéíÂ∫è„ÄÇ ‰∏çËÉΩÂà©Áî®ÈÉ®ÂàÜÁ¥¢ÂºïÈîÆÊü•ËØ¢ÔºàÊØîÂ¶ÇÁªÑÂêàÁ¥¢ÂºïÔºåhashÁ¥¢ÂºïÊòØÂØπËøôÂá†‰∏™Á¥¢Âºï‰∏ÄËµ∑hashËÆ°ÁÆóÁöÑÔºåËÄåÊàë‰ª¨Áî®ÁªÑÂêàÁ¥¢Âºï‰∏≠ÁöÑÈÉ®ÂàÜÁ¥¢ÂºïÊó∂Â∞±Êó†Ê≥ïÁî®‰∫ÜÔºâ ‰∏çËÉΩÈÅøÂÖçË°®Êâ´ÊèèÔºà‰ºöÂá∫Áé∞hashsÂÜ≤Á™ÅÔºåÂøÖÁÑ∂Ë¶ÅÊâ´ÊèèÈáåÈù¢ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÊâçË°åÔºâ ÈÅáÂà∞Â§ßÈáèhashÂÄºÁõ∏Á≠âÁöÑÊó∂ÂÄôÊÄßËÉΩ‰∏ç‰∏ÄÂÆöÊØîBÊ†ëÈ´ò(Âêå‰∏ä) 3. ËÅöÈõÜÁ¥¢Âºï 3.1 ‰ªÄ‰πàÊòØËÅöÈõÜÁ¥¢Âºï Âú®ËÅöÈõÜÁ¥¢Âºï‰∏≠ÔºåË°®‰∏≠Ë°åÁöÑÁâ©ÁêÜÈ°∫Â∫è‰∏éÈîÆÂÄºÁöÑÈÄªËæëÔºàÁ¥¢ÂºïÔºâÈ°∫Â∫èÁõ∏Âêå„ÄÇ‰∏Ä‰∏™Ë°®Âè™ËÉΩÂåÖÂê´‰∏Ä‰∏™ËÅöÈõÜÁ¥¢Âºï„ÄÇ Â¶ÇÊûúÊüêÁ¥¢Âºï‰∏çÊòØËÅöÈõÜÁ¥¢ÂºïÔºåÂàôË°®‰∏≠Ë°åÁöÑÁâ©ÁêÜÈ°∫Â∫è‰∏éÈîÆÂÄºÁöÑÈÄªËæëÈ°∫Â∫è‰∏çÂåπÈÖç„ÄÇ‰∏éÈùûËÅöÈõÜÁ¥¢ÂºïÁõ∏ÊØîÔºåËÅöÈõÜÁ¥¢ÂºïÈÄöÂ∏∏Êèê‰æõÊõ¥Âø´ÁöÑÊï∞ÊçÆËÆøÈóÆÈÄüÂ∫¶„ÄÇ 3.2 MyISAMÂíåInnoDBÁ¥¢ÂºïÂÆûÁé∞ Á¨¨‰∏Ä‰∏™‰∏çÂêåÊòØÔºöInnoDBÁöÑÊï∞ÊçÆÊñá‰ª∂Êú¨Ë∫´Â∞±ÊòØÁ¥¢ÂºïÊñá‰ª∂„ÄÇËÄåMyISAMÁöÑÁ¥¢ÂºïÂíåÊï∞ÊçÆÊòØÂàÜÂºÄÁöÑ„ÄÇ MyISAMÂºïÊìé‰ΩøÁî®B+Tree‰Ωú‰∏∫Á¥¢ÂºïÁªìÊûÑÔºåÂè∂ËäÇÁÇπÁöÑdataÂüüÂ≠òÊîæÁöÑÊòØÊï∞ÊçÆËÆ∞ÂΩïÁöÑÂú∞ÂùÄÔºåÊòØÊ≤°Êúâ‰ªª‰ΩïÈ°∫Â∫èËÄåË®ÄÁöÑÔºåÊâÄ‰ª•MyISAMÁöÑÁ¥¢ÂºïÊñπÂºè‰πüÂè´ÂÅö‚ÄúÈùûËÅöÈõÜ‚ÄùÁöÑÔºå‰πãÊâÄ‰ª•Ëøô‰πàÁß∞ÂëºÊòØ‰∏∫‰∫Ü‰∏éInnoDBÁöÑËÅöÈõÜÁ¥¢ÂºïÂå∫ÂàÜ„ÄÇ MyISAM‰∏≠Á¥¢ÂºïÊ£ÄÁ¥¢ÁöÑÁÆóÊ≥ï‰∏∫È¶ñÂÖàÊåâÁÖßB+TreeÊêúÁ¥¢ÁÆóÊ≥ïÊêúÁ¥¢Á¥¢ÂºïÔºåÂ¶ÇÊûúÊåáÂÆöÁöÑKeyÂ≠òÂú®ÔºåÂàôÂèñÂá∫ÂÖ∂dataÂüüÁöÑÂÄºÔºåÁÑ∂Âêé‰ª•dataÂüüÁöÑÂÄº‰∏∫Âú∞ÂùÄÔºåËØªÂèñÁõ∏Â∫îÊï∞ÊçÆËÆ∞ÂΩï„ÄÇ Âú®MyISAM‰∏≠Ôºå‰∏ªÁ¥¢ÂºïÂíåËæÖÂä©Á¥¢ÂºïÔºàSecondary keyÔºâÂú®ÁªìÊûÑ‰∏äÊ≤°Êúâ‰ªª‰ΩïÂå∫Âà´ÔºåÂè™ÊòØ‰∏ªÁ¥¢ÂºïË¶ÅÊ±ÇkeyÊòØÂîØ‰∏ÄÁöÑÔºåËÄåËæÖÂä©Á¥¢ÂºïÁöÑkeyÂèØ‰ª•ÈáçÂ§ç„ÄÇ InnoDB‰πü‰ΩøÁî®B+Tree‰Ωú‰∏∫Á¥¢ÂºïÁªìÊûÑ„ÄÇInnoDBÁöÑÊï∞ÊçÆÊñá‰ª∂Êú¨Ë∫´Â∞±ÊòØÁ¥¢ÂºïÊñá‰ª∂ÔºåÂç≥ InnoDB Ë°®ÊòØÂü∫‰∫éËÅöÁ∞áÁ¥¢ÂºïÂª∫Á´ãÁöÑ„ÄÇ MyISAMÁ¥¢ÂºïÊñá‰ª∂ÂíåÊï∞ÊçÆÊñá‰ª∂ÊòØÂàÜÁ¶ªÁöÑÔºåÁ¥¢ÂºïÊñá‰ª∂‰ªÖ‰øùÂ≠òÊï∞ÊçÆËÆ∞ÂΩïÁöÑÂú∞ÂùÄÔºàËøô‰∏ÄÁÇπÂèØ‰ª•ÈÄöËøáÂú®dataÁõÆÂΩï‰∏ãÊü•ÁúãÊï∞ÊçÆÂ∫ìÊñá‰ª∂È™åËØÅ„ÄÇInnodbÊØè‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂè™Êúâ‰∏Ä‰∏™Êï∞ÊçÆÊñá‰ª∂ÔºåËÄåMyisamÂàôÊúâ‰∏â‰∏™ÔºàÊï∞ÊçÆÊñá‰ª∂„ÄÅÁ¥¢ÂºïÊñá‰ª∂„ÄÅË°®ÁªìÊûÑÊñá‰ª∂ÔºâÔºâ„ÄÇ ËÄåÂú®InnoDB‰∏≠ÔºåË°®Êï∞ÊçÆÊñá‰ª∂Êú¨Ë∫´Â∞±ÊòØÊåâB+TreeÁªÑÁªáÁöÑ‰∏Ä‰∏™Á¥¢ÂºïÁªìÊûÑÔºåËøôÊ£µÊ†ëÁöÑÂè∂ËäÇÁÇπdataÂüü‰øùÂ≠ò‰∫ÜÂÆåÊï¥ÁöÑÊï∞ÊçÆËÆ∞ÂΩï„ÄÇËøô‰∏™Á¥¢ÂºïÁöÑkeyÊòØÊï∞ÊçÆË°®ÁöÑ‰∏ªÈîÆÔºåÂõ†Ê≠§InnoDBË°®Êï∞ÊçÆÊñá‰ª∂Êú¨Ë∫´Â∞±ÊòØ‰∏ªÁ¥¢Âºï„ÄÇ ‰∏äÂõæÊòØInnoDB‰∏ªÁ¥¢ÂºïÔºàÂêåÊó∂‰πüÊòØÊï∞ÊçÆÊñá‰ª∂ÔºâÁöÑÁ§∫ÊÑèÂõæÔºåÂèØ‰ª•ÁúãÂà∞Âè∂ËäÇÁÇπÂåÖÂê´‰∫ÜÂÆåÊï¥ÁöÑÊï∞ÊçÆËÆ∞ÂΩï„ÄÇËøôÁßçÁ¥¢ÂºïÂè´ÂÅöËÅöÈõÜÁ¥¢Âºï„ÄÇËÅöÈõÜÁ¥¢ÂºïÁöÑÁ°ÆÂÆöËßÑÂàô‰∏∫Ôºö Ëã•‰∏Ä‰∏™‰∏ªÈîÆË¢´ÂÆö‰πâÔºåËØ•‰∏ªÈîÆÂàô‰Ωú‰∏∫ËÅöÈõÜÁ¥¢Âºï Ëã•Ê≤°Êúâ‰∏ªÈîÆË¢´ÂÆö‰πâÔºåËØ•Ë°®ÁöÑÁ¨¨‰∏Ä‰∏™ÂîØ‰∏ÄÈùûÁ©∫Á¥¢Âºï‰Ωú‰∏∫ËÅöÈõÜÁ¥¢Âºï Ëã•‰∏äËø∞ÈÉΩÊâæ‰∏çÂà∞ÔºåinnodbÂÜÖÈÉ®‰ºöÁîüÊàê‰∏Ä‰∏™ÈöêËóè‰∏ªÈîÆ(ËÅöÈõÜÁ¥¢Âºï) Èùû‰∏ªÈîÆÁ¥¢ÂºïÂ≠òÂÇ®Áõ∏ÂÖ≥ÈîÆ‰ΩçÂíåÂÖ∂ÂØπÂ∫îÁöÑ‰∏ªÈîÆÂÄºÔºåÂåÖÂê´‰∏§Ê¨°Êü•Êâæ Á¨¨‰∫å‰∏™‰∏éMyISAMÁ¥¢ÂºïÁöÑ‰∏çÂêåÊòØInnoDBÁöÑËæÖÂä©Á¥¢ÂºïdataÂüüÂ≠òÂÇ®Áõ∏Â∫îËÆ∞ÂΩï‰∏ªÈîÆÁöÑÂÄºËÄå‰∏çÊòØÂú∞ÂùÄ„ÄÇ Êç¢Âè•ËØùËØ¥ÔºåInnoDBÁöÑÊâÄÊúâËæÖÂä©Á¥¢ÂºïÈÉΩÂºïÁî®‰∏ªÈîÆ‰Ωú‰∏∫dataÂüü„ÄÇ ËÅöÈõÜÁ¥¢ÂºïËøôÁßçÂÆûÁé∞ÊñπÂºè‰ΩøÂæóÊåâ‰∏ªÈîÆÁöÑÊêúÁ¥¢ÂçÅÂàÜÈ´òÊïàÔºå‰ΩÜÊòØËæÖÂä©Á¥¢ÂºïÊêúÁ¥¢ÈúÄË¶ÅÊ£ÄÁ¥¢‰∏§ÈÅçÁ¥¢ÂºïÔºöÈ¶ñÂÖàÊ£ÄÁ¥¢ËæÖÂä©Á¥¢ÂºïËé∑Âæó‰∏ªÈîÆÔºåÁÑ∂ÂêéÁî®‰∏ªÈîÆÂà∞‰∏ªÁ¥¢Âºï‰∏≠Ê£ÄÁ¥¢Ëé∑ÂæóËÆ∞ÂΩï„ÄÇ ‰∫ÜËß£‰∏çÂêåÂ≠òÂÇ®ÂºïÊìéÁöÑÁ¥¢ÂºïÂÆûÁé∞ÊñπÂºèÂØπ‰∫éÊ≠£Á°Æ‰ΩøÁî®Âíå‰ºòÂåñÁ¥¢ÂºïÈÉΩÈùûÂ∏∏ÊúâÂ∏ÆÂä©Ôºå‰æãÂ¶ÇÁü•ÈÅì‰∫ÜInnoDBÁöÑÁ¥¢ÂºïÂÆûÁé∞ÂêéÔºåÂ∞±ÂæàÂÆπÊòìÊòéÁôΩ‰∏∫‰ªÄ‰πà‰∏çÂª∫ËÆÆ‰ΩøÁî®ËøáÈïøÁöÑÂ≠óÊÆµ‰Ωú‰∏∫‰∏ªÈîÆÔºåÂõ†‰∏∫ÊâÄÊúâËæÖÂä©Á¥¢ÂºïÈÉΩÂºïÁî®‰∏ªÁ¥¢ÂºïÔºåËøáÈïøÁöÑ‰∏ªÁ¥¢Âºï‰ºö‰ª§ËæÖÂä©Á¥¢ÂºïÂèòÂæóËøáÂ§ß„ÄÇÂÜç‰æãÂ¶ÇÔºåÁî®ÈùûÂçïË∞ÉÁöÑÂ≠óÊÆµ‰Ωú‰∏∫‰∏ªÈîÆÂú®InnoDB‰∏≠‰∏çÊòØ‰∏™Â•Ω‰∏ªÊÑèÔºåÂõ†‰∏∫InnoDBÊï∞ÊçÆÊñá‰ª∂Êú¨Ë∫´ÊòØ‰∏ÄÈ¢óB+TreeÔºåÈùûÂçïË∞ÉÁöÑ‰∏ªÈîÆ‰ºöÈÄ†ÊàêÂú®ÊèíÂÖ•Êñ∞ËÆ∞ÂΩïÊó∂Êï∞ÊçÆÊñá‰ª∂‰∏∫‰∫ÜÁª¥ÊåÅB+TreeÁöÑÁâπÊÄßËÄåÈ¢ëÁπÅÁöÑÂàÜË£ÇË∞ÉÊï¥ÔºåÂçÅÂàÜ‰ΩéÊïàÔºåËÄå‰ΩøÁî®Ëá™Â¢ûÂ≠óÊÆµ‰Ωú‰∏∫‰∏ªÈîÆÂàôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈÄâÊã© 4. ÊÄªÁªì Êú¨ÊñáÈ¶ñÂÖà‰ªãÁªçÁöÑÊòØ‰∏∫‰ªÄ‰πàË¶ÅÁ¥¢Âºï„ÄÇËøô‰∏™ÈóÆÈ¢òÂæàÁÆÄÂçï„ÄÇ ÁÑ∂Âêé‰ªãÁªç‰∫ÜÂá†ÁßçÊï∞ÊçÆÁªìÊûÑÔºö‰∫åÂèâÊêúÁ¥¢Ê†ë„ÄÅ‰∫åÂèâÂπ≥Ë°°Ê†ë„ÄÅBÊ†ë‰ª•ÂèäB+Ê†ë„ÄÇ‰∏ÄÊ≠•‰∏ÄÊ≠•ÂºïÂá∫‰∏∫‰ªÄ‰πàÊúÄÁªàÊòØB+Ê†ë„ÄÇÈù¢ËØïÁöÑÊó∂ÂÄôÂ∞±ÁúãËß£ÂÜ≥Ôºö‰∏∫‰ªÄ‰πà‰∏çËÉΩÁî®‰∫åÂèâÊêúÁ¥¢Ê†ë„ÄÅ‰∏∫‰ªÄ‰πà‰∏çÁî®Á∫¢ÈªëÊ†ë„ÄÅBÊ†ëÂíåB+Ê†ëÂêÑËá™ÁöÑÊï∞ÊçÆÁªìÊûÑÁâπÁÇπ„ÄÅB+Ê†ëÁöÑ‰ºòÁÇπ ÊúÄÂêé‰ªãÁªç‰∫ÜËÅöÈõÜÁ¥¢ÂºïÔºåÂõ†‰∏∫ËøôÊòØMyISAM‰∏éInnoDBÁ¥¢ÂºïÁªìÊûÑÊúÄÂ§ßÁöÑ‰∏çÂêå„ÄÇ ‰πãÂâçËøòÊòØ‰∏çËÉΩÂ§™ÂáÜÁ°ÆÁêÜËß£ËÅöÈõÜÁ¥¢ÂºïÔºåËøô‰∏§ÁßçÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØ‰ª•B+Ê†ëÊï∞ÊçÆÁªìÊûÑÂª∫Á´ãÁ¥¢ÂºïÁªìÊûÑÁöÑÔºå‰ΩÜÊòØInnoDBÊú¨Ë∫´Ëøô‰∏™B+Ê†ëÂ∞±‰Ωú‰∏∫‰∫ÜÁ¥¢ÂºïÊñá‰ª∂ÔºåÂç≥Á¥¢Âºï‰∏éÊï∞ÊçÆÊòØÊîæÂú®‰∏ÄËµ∑ÁöÑÔºåÊâÄ‰ª•ÈÄªËæë‰∏äËøôÊ†∑ÊéíÁöÑÊï∞ÊçÆÔºåÂÆÉÁâ©ÁêÜ‰∏ä‰πüÊòØËøô‰πàÊéí„ÄÇ ËÄåMyISAMÁöÑÁ¥¢ÂºïÁªìÊûÑ(B+Ê†ë)‰∏éÊï∞ÊçÆÊòØÂàÜÁ¶ªÁöÑÔºåËôΩÁÑ∂B+Ê†ëÂèØËÉΩÊòØÊåâÁÖß‰∏ªÈîÆÊúâÂ∫èÂú∞ÁªÑÁªáÔºå‰ΩÜÊòØË°®ÁöÑÊï∞ÊçÆÂú®Âè¶‰∏Ä‰∏™Âú∞ÊñπÊòØÈöèÊú∫ÊîæÁöÑÔºåÊâæÊï∞ÊçÆÊòØÊ†πÊçÆÂú∞ÂùÄÊù•ÊâæÂç≥ÂèØÔºåÊâÄ‰ª•ËøôÁßçÁªìÊûÑÂ∞±‰∏çÊòØËÅöÈõÜÁöÑ„ÄÇ ÁêÜËß£‰∫ÜËøô‰∏™Ôºå‰∏ãÈù¢Â∞±ÈùûÂ∏∏Â•ΩÁêÜËß£‰∫ÜÔºåInnoDBËøô‰∏™B+Ê†ëÔºåÊàë‰ª¨Áü•ÈÅìÔºåÂè∂Â≠êËäÇÁÇπÁöÑÊ†∏ÂøÉÊï∞ÊçÆÂ∞±ÊòØ‰∏ªÈîÆ„ÄÇÊâÄ‰ª•ÊòØÊåâÁÖß‰∏ªÈîÆÈÄíÂ¢ûÁöÑÊñπÂºèËøõË°åÊéíÂàó„ÄÇËøôÊ†∑Â≠êÔºåÊó†ËÆ∫ÊòØÊåâÁÖß‰∏ªÈîÆÊéíÂ∫èËøòÊòØËåÉÂõ¥ÊêúÁ¥¢ÔºåÈÉΩ‰ºöÈùûÂ∏∏Âú∞Âø´„ÄÇ ÈÇ£‰πàÂ¶ÇÊûúÊòØÈùû‰∏ªÈîÆÁ¥¢ÂºïÁöÑËæÖÂä©Á¥¢ÂºïÂë¢ÔºüInnoDBÂè™ËÉΩÈÄöËøá‰∏§Ê¨°Êü•ËØ¢Êù•ÂÆûÁé∞‰∫ÜÔºåÈ¶ñÂÖàÁ¨¨‰∏ÄÊ≠•ÊòØÊ†πÊçÆËøô‰∏™ËæÖÂä©Á¥¢ÂºïÊâæÂà∞Â≠òÊîæÂú®Âè∂Â≠êËäÇÁÇπ‰∏≠ÁöÑ‰∏ªÈîÆÂÄºÔºåÁÑ∂ÂêéÊ†πÊçÆ‰∏ªÈîÆÂÜçÂéª‰∏ªÈîÆÁ¥¢Âºï‰∏≠ÂéªÊü•ÊâæÂØπÂ∫îÁöÑÊï∞ÊçÆ„ÄÇ ËÄåMyISAMÁ¥¢ÂºïÔºå‰∏ªÈîÆÁ¥¢ÂºïÂíåËæÖÂä©Á¥¢ÂºïÂ∞±Âå∫Âà´‰∏çÂ§ß‰∫Ü„ÄÇÈÉΩÊòØÂçïÁã¨‰∏Ä‰∏™Á¥¢ÂºïÁªìÊûÑÔºåÁÑ∂ÂêéÊ†πÊçÆÊúÄÂêéÂè∂Â≠êËäÇÁÇπ‰∏≠ÁöÑËØ•Êù°Êï∞ÊçÆÁöÑÂú∞ÂùÄÂéªÊâæ„ÄÇ ‰∏äÈù¢ËØ¥ÁöÑÊåâÁÖß‰∏ªÈîÆÊéíÂàóÔºåÂ∞±ÊòØËøôÈáåÊâÄË∞ìÁöÑËÅöÈõÜÁ¥¢ÂºïÂï¶„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆö‰∏ªÈîÆÔºå‰ºöÊåâÁÖß‰∏äÈù¢ÊâÄËØ¥ÁöÑËßÑÂàôÂéªÊûÑÂª∫ËÅöÈõÜÁ¥¢Âºï„ÄÇ ÈÇ£‰πàÔºåÈù¢ËØïÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•Â∫îÂØπInnoDB‰∏éMyISAMÁ¥¢ÂºïÁªìÊûÑÁöÑÂêÑËá™ÁöÑÂÆûÁé∞Âíå‰∏çÂêåÁÇπÂï¶„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂÖ•Èó®]]></title>
    <url>%2F2019%2F01%2F26%2Fmysql%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[Á¥¢ÂºïÊòØÊï∞ÊçÆÂ∫ì‰∏≠ÊèêÈ´òÊÄßËÉΩÁöÑ‰∏ÄÂ§ßÂà©Âô®„ÄÇÊú¨ÁØáÂÖ•Èó®Á¥¢ÂºïÁöÑÂü∫Êú¨Áü•ËØÜ„ÄÇ 1. ‰ªÄ‰πàÊòØÁ¥¢Âºï Âú®Êï∞ÊçÆ‰πãÂ§ñÔºåÊï∞ÊçÆÂ∫ìÁ≥ªÁªüËøòÁª¥Êä§ÁùÄÊª°Ë∂≥ÁâπÂÆöÊü•ÊâæÁÆóÊ≥ïÁöÑÊï∞ÊçÆÁªìÊûÑÔºåËøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰ª•ÊüêÁßçÊñπÂºèÂºïÁî®ÔºàÊåáÂêëÔºâÊï∞ÊçÆÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®Ëøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰∏äÂÆûÁé∞È´òÁ∫ßÊü•ÊâæÁÆóÊ≥ï„ÄÇËøôÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂ∞±ÊòØÁ¥¢Âºï„ÄÇ 2. ‰∏∫‰ªÄ‰πàË¶ÅÁî®Á¥¢Âºï Á¥¢Âºï‰∏ªË¶ÅÂ∞±ÊòØ‰∏∫‰∫ÜÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶Áî®ÁöÑ„ÄÇ 3. Á¥¢ÂºïÁöÑ‰∏Ä‰∫õÁº∫ÁÇπ Á¨¨‰∏ÄÔºåÂàõÂª∫Á¥¢ÂºïÂíåÁª¥Êä§Á¥¢ÂºïË¶ÅËÄóË¥πÊó∂Èó¥ÔºåËøôÁßçÊó∂Èó¥ÈöèÁùÄÊï∞ÊçÆÈáèÁöÑÂ¢ûÂä†ËÄåÂ¢ûÂä†„ÄÇ Á¨¨‰∫åÔºåÁ¥¢ÂºïÈúÄË¶ÅÂç†Áâ©ÁêÜÁ©∫Èó¥ÔºåÈô§‰∫ÜÊï∞ÊçÆË°®Âç†Êï∞ÊçÆÁ©∫Èó¥‰πãÂ§ñÔºåÊØè‰∏Ä‰∏™Á¥¢ÂºïËøòË¶ÅÂç†‰∏ÄÂÆöÁöÑÁâ©ÁêÜÁ©∫Èó¥ÔºåÂ¶ÇÊûúË¶ÅÂª∫Á´ãËÅöÁ∞áÁ¥¢ÂºïÔºåÈÇ£‰πàÈúÄË¶ÅÁöÑÁ©∫Èó¥Â∞±‰ºöÊõ¥Â§ß„ÄÇ Á¨¨‰∏âÔºåÂΩìÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÂ¢ûÂä†„ÄÅÂà†Èô§Âíå‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÁ¥¢Âºï‰πüË¶ÅÂä®ÊÄÅÁöÑÁª¥Êä§ÔºåËøôÊ†∑Â∞±Èôç‰Ωé‰∫ÜÊï∞ÊçÆÁöÑÁª¥Êä§ÈÄüÂ∫¶„ÄÇ 4. Âì™‰∫õÂ≠óÊÆµÈÄÇÂêàÁî®Á¥¢Âºï Âú®ÁªèÂ∏∏ÈúÄË¶ÅÊêúÁ¥¢ÁöÑÂàó‰∏äÔºåÂèØ‰ª•Âä†Âø´ÊêúÁ¥¢ÁöÑÈÄüÂ∫¶Ôºõ Âú®‰Ωú‰∏∫‰∏ªÈîÆÁöÑÂàó‰∏äÔºåÂº∫Âà∂ËØ•ÂàóÁöÑÂîØ‰∏ÄÊÄßÂíåÁªÑÁªáË°®‰∏≠Êï∞ÊçÆÁöÑÊéíÂàóÁªìÊûÑÔºõ Âú®ÁªèÂ∏∏Áî®Âú®ËøûÊé•ÁöÑÂàó‰∏äÔºåËøô‰∫õÂàó‰∏ªË¶ÅÊòØ‰∏Ä‰∫õÂ§ñÈîÆÔºåÂèØ‰ª•Âä†Âø´ËøûÊé•ÁöÑÈÄüÂ∫¶Ôºõ Âú®ÁªèÂ∏∏ÈúÄË¶ÅÊ†πÊçÆËåÉÂõ¥ËøõË°åÊêúÁ¥¢ÁöÑÂàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂõ†‰∏∫Á¥¢ÂºïÂ∑≤ÁªèÊéíÂ∫èÔºåÂÖ∂ÊåáÂÆöÁöÑËåÉÂõ¥ÊòØËøûÁª≠ÁöÑÔºõ Âú®ÁªèÂ∏∏ÈúÄË¶ÅÊéíÂ∫èÁöÑÂàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂõ†‰∏∫Á¥¢ÂºïÂ∑≤ÁªèÊéíÂ∫èÔºåËøôÊ†∑Êü•ËØ¢ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÁöÑÊéíÂ∫èÔºåÂä†Âø´ÊéíÂ∫èÊü•ËØ¢Êó∂Èó¥Ôºõ Âú®ÁªèÂ∏∏‰ΩøÁî®Âú®WHEREÂ≠êÂè•‰∏≠ÁöÑÂàó‰∏äÈù¢ÂàõÂª∫Á¥¢ÂºïÔºåÂä†Âø´Êù°‰ª∂ÁöÑÂà§Êñ≠ÈÄüÂ∫¶„ÄÇÔºàËøôÂêå‰∏ÄÔºâ 5. ‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢ÂºïÁöÑÁöÑËøô‰∫õÂàóÂÖ∑Êúâ‰∏ãÂàóÁâπÁÇπ Á¨¨‰∏ÄÔºåÂØπ‰∫éÈÇ£‰∫õÂú®Êü•ËØ¢‰∏≠ÂæàÂ∞ë‰ΩøÁî®ÊàñËÄÖÂèÇËÄÉÁöÑÂàó‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢Âºï„ÄÇËøôÊòØÂõ†‰∏∫ÔºåÊó¢ÁÑ∂Ëøô‰∫õÂàóÂæàÂ∞ë‰ΩøÁî®Âà∞ÔºåÂõ†Ê≠§ÊúâÁ¥¢ÂºïÊàñËÄÖÊó†Á¥¢ÂºïÔºåÂπ∂‰∏çËÉΩÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶„ÄÇÁõ∏ÂèçÔºåÁî±‰∫éÂ¢ûÂä†‰∫ÜÁ¥¢ÂºïÔºåÂèçËÄåÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑÁª¥Êä§ÈÄüÂ∫¶ÂíåÂ¢ûÂ§ß‰∫ÜÁ©∫Èó¥ÈúÄÊ±Ç„ÄÇ Á¨¨‰∫åÔºåÂØπ‰∫éÈÇ£‰∫õÂè™ÊúâÂæàÂ∞ëÊï∞ÊçÆÂÄºÁöÑÂàó‰πü‰∏çÂ∫îËØ•Â¢ûÂä†Á¥¢Âºï„ÄÇËøôÊòØÂõ†‰∏∫ÔºåÁî±‰∫éËøô‰∫õÂàóÁöÑÂèñÂÄºÂæàÂ∞ëÔºå‰æãÂ¶Ç‰∫∫‰∫ãË°®ÁöÑÊÄßÂà´ÂàóÔºåÂú®Êü•ËØ¢ÁöÑÁªìÊûú‰∏≠ÔºåÁªìÊûúÈõÜÁöÑÊï∞ÊçÆË°åÂç†‰∫ÜË°®‰∏≠Êï∞ÊçÆË°åÁöÑÂæàÂ§ßÊØî‰æãÔºåÂç≥ÈúÄË¶ÅÂú®Ë°®‰∏≠ÊêúÁ¥¢ÁöÑÊï∞ÊçÆË°åÁöÑÊØî‰æãÂæàÂ§ß„ÄÇÂ¢ûÂä†Á¥¢ÂºïÔºåÂπ∂‰∏çËÉΩÊòéÊòæÂä†Âø´Ê£ÄÁ¥¢ÈÄüÂ∫¶„ÄÇ Á¨¨‰∏âÔºåÂØπ‰∫éÈÇ£‰∫õÂÆö‰πâ‰∏∫text, imageÂíåbitÊï∞ÊçÆÁ±ªÂûãÁöÑÂàó‰∏çÂ∫îËØ•Â¢ûÂä†Á¥¢Âºï„ÄÇËøôÊòØÂõ†‰∏∫ÔºåËøô‰∫õÂàóÁöÑÊï∞ÊçÆÈáèË¶Å‰πàÁõ∏ÂΩìÂ§ßÔºåË¶Å‰πàÂèñÂÄºÂæàÂ∞ë„ÄÇ Á¨¨ÂõõÔºåÂΩì‰øÆÊîπÊÄßËÉΩËøúËøúÂ§ß‰∫éÊ£ÄÁ¥¢ÊÄßËÉΩÊó∂Ôºå‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢Âºï„ÄÇËøôÊòØÂõ†‰∏∫Ôºå‰øÆÊîπÊÄßËÉΩÂíåÊ£ÄÁ¥¢ÊÄßËÉΩÊòØ‰∫íÁõ∏ÁüõÁõæÁöÑ„ÄÇÂΩìÂ¢ûÂä†Á¥¢ÂºïÊó∂Ôºå‰ºöÊèêÈ´òÊ£ÄÁ¥¢ÊÄßËÉΩÔºå‰ΩÜÊòØ‰ºöÈôç‰Ωé‰øÆÊîπÊÄßËÉΩ„ÄÇÂΩìÂáèÂ∞ëÁ¥¢ÂºïÊó∂Ôºå‰ºöÊèêÈ´ò‰øÆÊîπÊÄßËÉΩÔºåÈôç‰ΩéÊ£ÄÁ¥¢ÊÄßËÉΩ„ÄÇÂõ†Ê≠§ÔºåÂΩì‰øÆÊîπÊÄßËÉΩËøúËøúÂ§ß‰∫éÊ£ÄÁ¥¢ÊÄßËÉΩÊó∂Ôºå‰∏çÂ∫îËØ•ÂàõÂª∫Á¥¢Âºï„ÄÇ 6. Á¥¢ÂºïÁöÑÂàÜÁ±ª B-Tree Á¥¢ÂºïÔºå Hash Á¥¢ÂºïÔºå Fulltext Á¥¢ÂºïÂíåR-Tree Á¥¢Âºï ÊúÄ‰∏ªË¶ÅÂÖ≥ÂøÉÁöÑÊòØB-Tree Á¥¢Âºï„ÄÇ‰∏ãÈù¢ÂÜçÊèê‰∏Ä‰∏ãËÅöÈõÜÁ¥¢ÂºïÔºåÂõ†‰∏∫ËøôÊòØinnodbÊúÄ‰∏ªË¶ÅÁöÑÁªÑÁªáÊñπÂºè„ÄÇ Âú®ËÅöÈõÜÁ¥¢Âºï‰∏≠ÔºåË°®‰∏≠Ë°åÁöÑÁâ©ÁêÜÈ°∫Â∫è‰∏éÈîÆÂÄºÁöÑÈÄªËæëÔºàÁ¥¢ÂºïÔºâÈ°∫Â∫èÁõ∏Âêå„ÄÇ‰∏Ä‰∏™Ë°®Âè™ËÉΩÂåÖÂê´‰∏Ä‰∏™ËÅöÈõÜÁ¥¢Âºï„ÄÇ Â¶ÇÊûúÊüêÁ¥¢Âºï‰∏çÊòØËÅöÈõÜÁ¥¢ÂºïÔºåÂàôË°®‰∏≠Ë°åÁöÑÁâ©ÁêÜÈ°∫Â∫è‰∏éÈîÆÂÄºÁöÑÈÄªËæëÈ°∫Â∫è‰∏çÂåπÈÖç„ÄÇ‰∏éÈùûËÅöÈõÜÁ¥¢ÂºïÁõ∏ÊØîÔºåËÅöÈõÜÁ¥¢ÂºïÈÄöÂ∏∏Êèê‰æõÊõ¥Âø´ÁöÑÊï∞ÊçÆËÆøÈóÆÈÄüÂ∫¶„ÄÇ ‰∏ã‰∏ÄËäÇ‰ºöËØ¶ÁªÜËÆ≤Âà∞InnoDBÂíåMyISAMÁöÑÁ¥¢ÂºïÂÆûÁé∞ÊñπÂºèÔºå‰ªñ‰ª¨ÊúÄÂ§ßÁöÑÂå∫Âà´Â∞±ÊòØInnoDBÊòØËÅöÈõÜÁ¥¢ÂºïÔºåËÄåMyISAM‰∏çÊòØ„ÄÇ 7. Â±ÄÈÉ®ÊÄßÂéüÁêÜ‰∏éÁ£ÅÁõòÈ¢ÑËØª Áî±‰∫éÂ≠òÂÇ®‰ªãË¥®ÁöÑÁâπÊÄßÔºåÁ£ÅÁõòÊú¨Ë∫´Â≠òÂèñÂ∞±ÊØî‰∏ªÂ≠òÊÖ¢ÂæàÂ§öÔºåÂÜçÂä†‰∏äÊú∫Ê¢∞ËøêÂä®ËÄóË¥πÔºåÁ£ÅÁõòÁöÑÂ≠òÂèñÈÄüÂ∫¶ÂæÄÂæÄÊòØ‰∏ªÂ≠òÁöÑÂá†ÁôæÂàÜ‰πã‰∏ÄÔºåÂõ†Ê≠§‰∏∫‰∫ÜÊèêÈ´òÊïàÁéáÔºåË¶ÅÂ∞ΩÈáèÂáèÂ∞ëÁ£ÅÁõòI/O„ÄÇ‰∏∫‰∫ÜËææÂà∞Ëøô‰∏™ÁõÆÁöÑÔºåÁ£ÅÁõòÂæÄÂæÄ‰∏çÊòØ‰∏•Ê†ºÊåâÈúÄËØªÂèñÔºåËÄåÊòØÊØèÊ¨°ÈÉΩ‰ºöÈ¢ÑËØªÔºåÂç≥‰ΩøÂè™ÈúÄË¶Å‰∏Ä‰∏™Â≠óËäÇÔºåÁ£ÅÁõò‰πü‰ºö‰ªéËøô‰∏™‰ΩçÁΩÆÂºÄÂßãÔºåÈ°∫Â∫èÂêëÂêéËØªÂèñ‰∏ÄÂÆöÈïøÂ∫¶ÁöÑÊï∞ÊçÆÊîæÂÖ•ÂÜÖÂ≠ò„ÄÇËøôÊ†∑ÂÅöÁöÑÁêÜËÆ∫‰æùÊçÆÊòØËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏≠ËëóÂêçÁöÑÂ±ÄÈÉ®ÊÄßÂéüÁêÜÔºöÂΩì‰∏Ä‰∏™Êï∞ÊçÆË¢´Áî®Âà∞Êó∂ÔºåÂÖ∂ÈôÑËøëÁöÑÊï∞ÊçÆ‰πüÈÄöÂ∏∏‰ºöÈ©¨‰∏äË¢´‰ΩøÁî®„ÄÇÁ®ãÂ∫èËøêË°åÊúüÈó¥ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÈÄöÂ∏∏ÊØîËæÉÈõÜ‰∏≠„ÄÇ Áî±‰∫éÁ£ÅÁõòÈ°∫Â∫èËØªÂèñÁöÑÊïàÁéáÂæàÈ´òÔºà‰∏çÈúÄË¶ÅÂØªÈÅìÊó∂Èó¥ÔºåÂè™ÈúÄÂæàÂ∞ëÁöÑÊóãËΩ¨Êó∂Èó¥ÔºâÔºåÂõ†Ê≠§ÂØπ‰∫éÂÖ∑ÊúâÂ±ÄÈÉ®ÊÄßÁöÑÁ®ãÂ∫èÊù•ËØ¥ÔºåÈ¢ÑËØªÂèØ‰ª•ÊèêÈ´òI/OÊïàÁéá„ÄÇ È¢ÑËØªÁöÑÈïøÂ∫¶‰∏ÄËà¨‰∏∫È°µÔºàpageÔºâÁöÑÊï¥ÂÄçÊï∞„ÄÇÈ°µÊòØËÆ°ÁÆóÊú∫ÁÆ°ÁêÜÂ≠òÂÇ®Âô®ÁöÑÈÄªËæëÂùóÔºåÁ°¨‰ª∂ÂèäÊìç‰ΩúÁ≥ªÁªüÂæÄÂæÄÂ∞Ü‰∏ªÂ≠òÂíåÁ£ÅÁõòÂ≠òÂÇ®Âå∫ÂàÜÂâ≤‰∏∫ËøûÁª≠ÁöÑÂ§ßÂ∞èÁõ∏Á≠âÁöÑÂùóÔºåÊØè‰∏™Â≠òÂÇ®ÂùóÁß∞‰∏∫‰∏ÄÈ°µÔºàÂú®ËÆ∏Â§öÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÈ°µÂæóÂ§ßÂ∞èÈÄöÂ∏∏‰∏∫4kÔºâÔºå‰∏ªÂ≠òÂíåÁ£ÅÁõò‰ª•È°µ‰∏∫Âçï‰Ωç‰∫§Êç¢Êï∞ÊçÆ„ÄÇÂΩìÁ®ãÂ∫èË¶ÅËØªÂèñÁöÑÊï∞ÊçÆ‰∏çÂú®‰∏ªÂ≠ò‰∏≠Êó∂Ôºå‰ºöËß¶Âèë‰∏Ä‰∏™Áº∫È°µÂºÇÂ∏∏ÔºåÊ≠§Êó∂Á≥ªÁªü‰ºöÂêëÁ£ÅÁõòÂèëÂá∫ËØªÁõò‰ø°Âè∑ÔºåÁ£ÅÁõò‰ºöÊâæÂà∞Êï∞ÊçÆÁöÑËµ∑Âßã‰ΩçÁΩÆÂπ∂ÂêëÂêéËøûÁª≠ËØªÂèñ‰∏ÄÈ°µÊàñÂá†È°µËΩΩÂÖ•ÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÂºÇÂ∏∏ËøîÂõûÔºåÁ®ãÂ∫èÁªßÁª≠ËøêË°å„ÄÇ 8.BÊ†ë/B+Ê†ë ÊÉ≥Ë¶ÅÁêÜËß£Á¥¢ÂºïÂéüÁêÜÂøÖÈ°ªÊ∏ÖÊ•ö‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑ„ÄåÂπ≥Ë°°Ê†ë„Äç(Èùû‰∫åÂèâ)Ôºå‰πüÂ∞±ÊòØB treeÊàñËÄÖ B+ treeÔºåÈáçË¶ÅÁöÑ‰∫ãÊÉÖËØ¥‰∏âÈÅçÔºö‚ÄúÂπ≥Ë°°Ê†ëÔºåÂπ≥Ë°°Ê†ëÔºåÂπ≥Ë°°Ê†ë‚Äù„ÄÇÂΩìÁÑ∂Ôºå ÊúâÁöÑÊï∞ÊçÆÂ∫ì‰πü‰ΩøÁî®ÂìàÂ∏åÊ°∂‰ΩúÁî®Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑ Ôºå ÁÑ∂ËÄåÔºå ‰∏ªÊµÅÁöÑRDBMSÈÉΩÊòØÊääÂπ≥Ë°°Ê†ëÂΩìÂÅöÊï∞ÊçÆË°®ÈªòËÆ§ÁöÑÁ¥¢ÂºïÊï∞ÊçÆÁªìÊûÑÁöÑ„ÄÇ Êàë‰ª¨Âπ≥Êó∂Âª∫Ë°®ÁöÑÊó∂ÂÄôÈÉΩ‰ºö‰∏∫Ë°®Âä†‰∏ä‰∏ªÈîÆÔºå Âú®Êüê‰∫õÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠Ôºå Â¶ÇÊûúÂª∫Ë°®Êó∂‰∏çÊåáÂÆö‰∏ªÈîÆÔºåÊï∞ÊçÆÂ∫ì‰ºöÊãíÁªùÂª∫Ë°®ÁöÑËØ≠Âè•ÊâßË°å„ÄÇ ‰∫ãÂÆû‰∏äÔºå ‰∏Ä‰∏™Âä†‰∫Ü‰∏ªÈîÆÁöÑË°®ÔºåÂπ∂‰∏çËÉΩË¢´Áß∞‰πã‰∏∫„ÄåË°®„Äç„ÄÇ‰∏Ä‰∏™Ê≤°Âä†‰∏ªÈîÆÁöÑË°®ÔºåÂÆÉÁöÑÊï∞ÊçÆÊó†Â∫èÁöÑÊîæÁΩÆÂú®Á£ÅÁõòÂ≠òÂÇ®Âô®‰∏äÔºå‰∏ÄË°å‰∏ÄË°åÁöÑÊéíÂàóÁöÑÂæàÊï¥ÈΩêÔºå Ë∑üÊàëËÆ§Áü•‰∏≠ÁöÑ„ÄåË°®„ÄçÂæàÊé•Ëøë„ÄÇ Â¶ÇÊûúÁªôË°®‰∏ä‰∫Ü‰∏ªÈîÆÔºåÈÇ£‰πàË°®Âú®Á£ÅÁõò‰∏äÁöÑÂ≠òÂÇ®ÁªìÊûÑÂ∞±Áî±Êï¥ÈΩêÊéíÂàóÁöÑÁªìÊûÑËΩ¨ÂèòÊàê‰∫ÜÊ†ëÁä∂ÁªìÊûÑÔºå‰πüÂ∞±ÊòØ‰∏äÈù¢ËØ¥ÁöÑ„ÄåÂπ≥Ë°°Ê†ë„ÄçÁªìÊûÑÔºåÊç¢Âè•ËØùËØ¥ÔºåÂ∞±ÊòØÊï¥‰∏™Ë°®Â∞±ÂèòÊàê‰∫Ü‰∏Ä‰∏™Á¥¢Âºï„ÄÇÊ≤°ÈîôÔºå ÂÜçËØ¥‰∏ÄÈÅçÔºå Êï¥‰∏™Ë°®ÂèòÊàê‰∫Ü‰∏Ä‰∏™Á¥¢ÂºïÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑ„ÄåËÅöÈõÜÁ¥¢Âºï„Äç„ÄÇ ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πà‰∏Ä‰∏™Ë°®Âè™ËÉΩÊúâ‰∏Ä‰∏™‰∏ªÈîÆÔºå ‰∏Ä‰∏™Ë°®Âè™ËÉΩÊúâ‰∏Ä‰∏™„ÄåËÅöÈõÜÁ¥¢Âºï„ÄçÔºåÂõ†‰∏∫‰∏ªÈîÆÁöÑ‰ΩúÁî®Â∞±ÊòØÊää„ÄåË°®„ÄçÁöÑÊï∞ÊçÆÊ†ºÂºèËΩ¨Êç¢Êàê„ÄåÁ¥¢ÂºïÔºàÂπ≥Ë°°Ê†ëÔºâ„ÄçÁöÑÊ†ºÂºèÊîæÁΩÆ„ÄÇ ‰∏äÂõæÂ∞±ÊòØÂ∏¶Êúâ‰∏ªÈîÆÁöÑË°®ÔºàËÅöÈõÜÁ¥¢ÂºïÔºâÁöÑÁªìÊûÑÂõæ„ÄÇÂÖ∂‰∏≠Ê†ëÁöÑÊâÄÊúâÁªìÁÇπÔºàÂ∫ïÈÉ®Èô§Â§ñÔºâÁöÑÊï∞ÊçÆÈÉΩÊòØÁî±‰∏ªÈîÆÂ≠óÊÆµ‰∏≠ÁöÑÊï∞ÊçÆÊûÑÊàêÔºå‰πüÂ∞±ÊòØÈÄöÂ∏∏Êàë‰ª¨ÊåáÂÆö‰∏ªÈîÆÁöÑidÂ≠óÊÆµ„ÄÇÊúÄ‰∏ãÈù¢ÈÉ®ÂàÜÊòØÁúüÊ≠£Ë°®‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ ÂÅáÂ¶ÇÊàë‰ª¨ÊâßË°å‰∏Ä‰∏™SQLËØ≠Âè•Ôºö select * from table where id = 1256; È¶ñÂÖàÊ†πÊçÆÁ¥¢ÂºïÂÆö‰ΩçÂà∞1256Ëøô‰∏™ÂÄºÊâÄÂú®ÁöÑÂè∂ÁªìÁÇπÔºåÁÑ∂ÂêéÂÜçÈÄöËøáÂè∂ÁªìÁÇπÂèñÂà∞idÁ≠â‰∫é1256ÁöÑÊï∞ÊçÆË°å„ÄÇ ËøôÈáå‰∏çËÆ≤Ëß£Âπ≥Ë°°Ê†ëÁöÑËøêË°åÁªÜËäÇÔºå ‰ΩÜÊòØ‰ªé‰∏äÂõæËÉΩÁúãÂá∫ÔºåÊ†ë‰∏ÄÂÖ±Êúâ‰∏âÂ±ÇÔºå ‰ªéÊ†πËäÇÁÇπËá≥Âè∂ËäÇÁÇπÂè™ÈúÄË¶ÅÁªèËøá‰∏âÊ¨°Êü•ÊâæÂ∞±ËÉΩÂæóÂà∞ÁªìÊûú„ÄÇÂ¶Ç‰∏ãÂõæ Ëøô‰∏ÄËäÇÂÖàÂØπÁ¥¢ÂºïÂÖ•‰∏™Èó®ÔºåÂÖ≥‰∫éB+Ê†ë‰ª•ÂèäËÅöÈõÜÁ¥¢Âºï‰∏ãÁØáÊñáÁ´†Êù•ÂÖ∑‰ΩìÂàÜÊûê„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â¶Ç‰ΩïËÆæËÆ°‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì]]></title>
    <url>%2F2019%2F01%2F26%2Fmysql%2F%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%2F</url>
    <content type="text"><![CDATA[ËøôÊòØ‰∏Ä‰∏™ÊØîËæÉÁ©∫ÁöÑÈù¢ËØïÈ¢òÔºåËøôÈáåËØ¥‰∏Ä‰∏ãÂ¶Ç‰ΩïÂõûÁ≠î„ÄÇ Â¶Ç‰ΩïËÆæËÆ°‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì Êàë‰ª¨ËÄÉËôëÂºÄÂèë‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊúÄÈáçË¶ÅÁöÑÊ®°ÂùóÊòØ‰ªÄ‰πà„ÄÇÈ¶ñÂÖàÊï∞ÊçÆÂ≠òÂÇ®ÊòØÂÖ∂Ê†∏ÂøÉÂäüËÉΩ„ÄÇÂõ†Ê≠§‰ºöÊúâ‰∏Ä‰∏™Â≠òÂÇ®Ê®°ÂùóÊù•Â≠òÂÇ®Êï∞ÊçÆ„ÄÇ‰ªãË¥®‰∏ªË¶ÅÊòØÁ°¨Áõò„ÄÇ ÂèØÊòØÔºåÂÖâÊúâÂ≠òÂÇ®ÊòØ‰∏çË°åÁöÑ„ÄÇÊàë‰ª¨ÈúÄË¶ÅÊúâ‰ª•‰∏ãÁ®ãÂ∫èÊ®°ÂùóÂØπÊï∞ÊçÆËøõË°åÁªÑÁªá„ÄÇ Â≠òÂÇ®ÁÆ°ÁêÜ Êàë‰ª¨ÈúÄË¶ÅÂØπÊï∞ÊçÆÁöÑÊ†ºÂºèÂíåÊñá‰ª∂ÁöÑÂàÜÈöîËøõË°åÁªü‰∏ÄÁöÑÁÆ°ÁêÜÔºåÈÄöËøáÈÄªËæëÁöÑÂΩ¢ÂºèÊù•ÁªÑÂêàÂíåË°®Á§∫Âá∫Êù•„ÄÇ Êàë‰ª¨Áü•ÈÅìÁ®ãÂ∫èÂ§ÑÁêÜÔºåÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÂÖàÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÂéªÔºå‰∏çÂèØËÉΩÁõ¥Êé•Âú®Á°¨Áõò‰∏äËøõË°åÂ§ÑÁêÜ„ÄÇ Êàë‰ª¨ÈÄöËøáioËØªÂèñÁ£ÅÁõòÊï∞ÊçÆÔºåÁ£ÅÁõòÁöÑioÊòØÈùûÂ∏∏ËÄóÊó∂ÁöÑÔºåÊâÄ‰ª•Á°¨Áõò‰ª•È°µÁöÑÂΩ¢ÂºèÂ≠òÂÇ®Êï∞ÊçÆÔºåÊ†πÊçÆÂ±ÄÈÉ®ÊÄßÂéüÁêÜÔºåÂæÄÂæÄÁî®Êà∑Ë¶ÅÊü•ËØ¢ÁöÑÊï∞ÊçÆÂë®Âõ¥ÁöÑÊï∞ÊçÆ‰πü‰ºöË¢´Êü•ËØ¢Âà∞ÔºåÊâÄ‰ª•ÂèñÊï∞ÊçÆÈÉΩÊòØ‰ª•È°µ‰∏∫Âçï‰ΩçÊü•ÂèñÂ§ö‰∏™Êï∞ÊçÆÔºåÊèêÈ´òÊïàÁéá„ÄÇ ÁºìÂ≠òÊú∫Âà∂ ‰πüÂ∞±ÊòØ‰∏äÈù¢ÊèêÂà∞ÁöÑÔºå‰∏ÄÊ¨°IO‰∏ç‰ºöÂè™ÂèñÁî®Êà∑ÊâÄÈúÄË¶ÅÁöÑ‰∏ÄÁÇπÊï∞ÊçÆÔºåÊâÄ‰ª•‰ºöÊ∂âÂèäÂà∞ÁºìÂ≠òÔºåÁºìÂ≠òÂèØËÉΩ‰ºö‰∏çÂ§üÊîæÔºåÈÇ£Â∞±Ê∂âÂèä‰∏Ä‰∫õÁºìÂ≠òÊ∑òÊ±∞ÁöÑÁÆóÊ≥ïÔºåÊØîÂ¶ÇÊØîËæÉÂ∏∏Áî®ÁöÑÊòØLRUÁÆóÊ≥ï„ÄÇ SQLËß£Êûê Â∞ÜSQLËøõË°åÁºñËØëÊâßË°å„ÄÇÂ¶Ç‰ΩïÊèêÈ´òSQLËß£ÊûêÊïàÁéáÂë¢ÔºüÂèØËÉΩ‰πüÁî®ÁºìÂ≠òÔºåÁºìÂ≠òÂ•ΩSQLËß£ÊûêÂêéÁöÑÁªìÊûúÔºå‰∏ãÊ¨°ÂÜçÊâßË°å‰∏ÄÊ†∑ÁöÑSQLÂ∞±ÂèØ‰ª•ÂÖçÂéªËß£ÊûêÁöÑËøáÁ®ã„ÄÇ Êó•ÂøóÁÆ°ÁêÜ Ë¶ÅËÆ∞ÂΩïSQLÊìç‰ΩúÔºåÊñπ‰æø‰∏ª‰ªéÂêåÊ≠•„ÄÅÁÅæÈöæÊÅ¢Â§çÁ≠â„ÄÇËøôÈáåË¶Å‰∫ÜËß£‰∏Ä‰∏ãbinlog. ÊùÉÈôêÂàíÂàÜ Â∞±ÊòØÊùÉÈôê„ÄÇ ÂÆπÁÅæÊú∫Âà∂ Ë¶ÅÂØπÂºÇÂ∏∏ÊÉÖÂÜµÂÅöÂ•ΩÂáÜÂ§áÔºåÊØîÂ¶ÇÊï∞ÊçÆÂ∫ìÊåÇ‰∫ÜÊÄé‰πàÂäû„ÄÇ Á¥¢ÂºïÁÆ°ÁêÜ ‰ºòÂåñÊï∞ÊçÆÂ∫ìÊâßË°åÊïàÁéá„ÄÇ ÈîÅÊ®°Âùó ‰ΩøÂæóÊï∞ÊçÆÂ∫ìÊîØÊåÅÂπ∂ÂèëÊìç‰Ωú„ÄÇ ÊÄªÁªì ‰∫ÜËß£‰∫Ü‰∏äÈù¢ÁöÑÂÜÖÂÆπÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÂØπËøô‰∏™ÈóÆÈ¢òÂÅö‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊÄªÁªìÊÄßÂõûÁ≠î‰∫ÜÔºåÂ¶Ç‰ΩïËÆæËÆ°ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÂë¢ÔºüÈ¶ñÂÖàÊï∞ÊçÆÂ∫ìÊúâ‰∏Ä‰∏™Â≠òÂÇ®ÁöÑÂäüËÉΩÔºå‰ΩøÂæóÂÆÉËÉΩÂ≠òÂÇ®Âú®ÊØîÂ¶ÇÊú∫Ê¢∞Á°¨ÁõòÊàñËÄÖÂõ∫ÊÄÅÁ°¨Áõò‰∏äÈù¢„ÄÇÂÖ∂Ê¨°ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Â≠òÂÇ®ÁÆ°ÁêÜÊ®°ÂùóÊù•Êò†Â∞ÑÁ®ãÂ∫èÈÄªËæë‰∏éÁâ©ÁêÜÂú∞ÂùÄÔºåÂÆûÁé∞Â≠òÂÇ®ÁÆ°ÁêÜ„ÄÇËøòÈúÄË¶ÅÁºìÂ≠òÊú∫Âà∂ÔºåÂØπ‰∏Ä‰∫õÊï∞ÊçÆËøõË°åÁºìÂ≠òÊèêÈ´òÊïàÁéáÔºåÂπ∂‰∏îÁºìÂ≠ò‰∏çËÉΩÂ§™Â§ßÔºåÂøÖÈ°ªÈÖçÂ§áÁºìÂ≠òÊ∑òÊ±∞Êú∫Âà∂ÔºõÁÑ∂ÂêéÈúÄË¶Å‰∏Ä‰∏™SQLËß£ÊûêÊ®°ÂùóÔºåÊù•Ëß£ÊûêSQLÔºõÁÑ∂ÂêéÈúÄË¶ÅÊó•ÂøóÁÆ°ÁêÜÊù•Êèê‰æõ‰∏ª‰ªéËµãÂÄº„ÄÅ‰∏ª‰ªéÂêåÊ≠•Á≠âÂäüËÉΩÔºõËøòÈúÄË¶Å‰∏Ä‰∏™ÊùÉÈôêÂàíÂàÜÊ®°ÂùóÔºåÊù•Êèê‰æõÁªôÂ§öÁî®Êà∑‰ΩøÁî®Âú∫ÊôØÔºõËøòÈúÄË¶ÅÂÆπÁÅæÊú∫Âà∂Èù¢ÂØπÂºÇÂ∏∏ÊÉÖÂÜµÔºõÊúÄÂêéÔºå‰∏∫‰∫ÜÊèêÈ´òÊï∞ÊçÆÊü•ËØ¢ÊïàÁéáÈúÄË¶ÅÊúâÁ¥¢ÂºïÁÆ°ÁêÜÊ®°ÂùóÔºõ‰∏∫‰∫ÜÊîØÊåÅÂπ∂ÂèëÊìç‰ΩúÈúÄË¶ÅÊúâÈîÅÊ®°Âùó„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[deleteÂíåtruncate‰ª•ÂèädropÂå∫Âà´]]></title>
    <url>%2F2019%2F01%2F25%2Fmysql%2Fdelete%E5%92%8Ctruncate%E4%BB%A5%E5%8F%8Adrop%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[Ëøô‰∏™È¢òÁõÆÊàëËá™Â∑±‰πüË¢´ÈóÆËøáÔºåËøôÈáåÁÆÄÂçïÊï¥ÁêÜ‰∏Ä‰∏ã„ÄÇ ÂÖàÊù•‰∏™ÊÄªÁªìÔºö dropÁõ¥Êé•Âà†ÊéâË°®Ôºõ truncateÂà†Èô§ÁöÑÊòØË°®‰∏≠ÁöÑÊï∞ÊçÆÔºåÂÜçÊèíÂÖ•Êï∞ÊçÆÊó∂Ëá™Â¢ûÈïøÁöÑÊï∞ÊçÆidÂèàÈáçÊñ∞‰ªé1ÂºÄÂßãÔºõ deleteÂà†Èô§Ë°®‰∏≠Êï∞ÊçÆÔºåÂèØ‰ª•Âú®ÂêéÈù¢Ê∑ªÂä†whereÂ≠óÂè•„ÄÇ Êó•ÂøóÊòØÂê¶ËÆ∞ÂΩï DELETEËØ≠Âè•ÊâßË°åÂà†Èô§Êìç‰ΩúÁöÑËøáÁ®ãÊòØÊØèÊ¨°‰ªéË°®‰∏≠Âà†Èô§‰∏ÄË°åÔºåÂπ∂‰∏îÂêåÊó∂Â∞ÜËØ•Ë°åÁöÑÂà†Èô§Êìç‰Ωú‰Ωú‰∏∫‰∫ãÂä°ËÆ∞ÂΩïÂú®Êó•Âøó‰∏≠‰øùÂ≠ò‰ª•‰æøËøõË°åËøõË°åÂõûÊªöÊìç‰Ωú„ÄÇ TRUNCATE TABLE Âàô‰∏ÄÊ¨°ÊÄßÂú∞‰ªéË°®‰∏≠Âà†Èô§ÊâÄÊúâÁöÑÊï∞ÊçÆÂπ∂‰∏çÊääÂçïÁã¨ÁöÑÂà†Èô§Êìç‰ΩúËÆ∞ÂΩïËÆ∞ÂÖ•Êó•Âøó‰øùÂ≠òÔºåÂà†Èô§Ë°åÊòØ‰∏çËÉΩÊÅ¢Â§çÁöÑ„ÄÇÂπ∂‰∏îÂú®Âà†Èô§ÁöÑËøáÁ®ã‰∏≠‰∏ç‰ºöÊøÄÊ¥ª‰∏éË°®ÊúâÂÖ≥ÁöÑÂà†Èô§Ëß¶ÂèëÂô®„ÄÇÊâßË°åÈÄüÂ∫¶Âø´„ÄÇ ÊòØÂê¶ÂèØ‰ª•ÂõûÊªö delete Ëøô‰∏™Êìç‰Ωú‰ºöË¢´ÊîæÂà∞ rollback segment ‰∏≠,‰∫ãÂä°Êèê‰∫§ÂêéÊâçÁîüÊïà„ÄÇtruncate„ÄÅdropÊòØDLLÔºàdata define language),Êìç‰ΩúÁ´ãÂç≥ÁîüÊïàÔºåÂéüÊï∞ÊçÆ‰∏çÊîæÂà∞ rollback segment ‰∏≠Ôºå‰∏çËÉΩÂõûÊªö. ÊâÄ‰ª•Âú®Ê≤°ÊúâÂ§á‰ªΩÊÉÖÂÜµ‰∏ãÔºåË∞®ÊÖé‰ΩøÁî® drop ‰∏é truncate„ÄÇ Ë°®ÂíåÁ¥¢ÂºïÂç†ÁöÑÁ©∫Èó¥ ÂΩìË°®Ë¢´ TRUNCATE ÂêéÔºåËøô‰∏™Ë°®ÂíåÁ¥¢ÂºïÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥‰ºöÊÅ¢Â§çÂà∞ÂàùÂßãÂ§ßÂ∞è„ÄÇ ËÄå DELETE Êìç‰Ωú‰∏ç‰ºöÂáèÂ∞ëË°®ÊàñÁ¥¢ÂºïÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥„ÄÇ dropËØ≠Âè•Â∞ÜË°®ÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥ÂÖ®ÈáäÊîæÊéâ„ÄÇ TRUNCATE Âíå DELETE Âè™Âà†Èô§Êï∞ÊçÆÔºåËÄå DROP ÂàôÂà†Èô§Êï¥‰∏™Ë°®ÔºàÁªìÊûÑÂíåÊï∞ÊçÆÔºâ ÊâÄ‰ª•‰ªéÂπ≤ÂáÄÁ®ãÂ∫¶Ôºådrop &gt; truncate &gt; delete okÔºåÂ∑Æ‰∏çÂ§ö‰∫Ü„ÄÇ]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlÊúÄÂü∫Á°ÄÁü•ËØÜÂ∞èÁªì]]></title>
    <url>%2F2019%2F01%2F25%2Fmysql%2Fmysql%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰ªãÁªçÂÖ≥‰∫éÊï∞ÊçÆÂ∫ìÁöÑÊúÄÊúÄÊúÄÊúÄÂü∫Êú¨ÁöÑ‰∏Ä‰∫õËØ≠Ê≥ïÁü•ËØÜÔºåÂ¶ÇÊûúËøô‰∫õÈÉΩ‰∏çÁÜüÊÇâÔºåÂª∫ËÆÆÂ§öÂ§öÁªÉ‰π†ÔºåÂõ†‰∏∫ÂêéÁª≠ÁöÑÊñáÁ´†‰ºöÊØîËæÉÊ∑±ÂÖ•ÂéüÁêÜ„ÄÇ ‰∏Ä„ÄÅDDLËØ≠Âè• 1„ÄÅÂàõÂª∫Êï∞ÊçÆÂ∫ìÔºöcreate database dbname; 2„ÄÅÂà†Èô§Êï∞ÊçÆÂ∫ìÔºödrop database dbname; 3„ÄÅÂàõÂª∫Ë°®Ôºöcreate table tname; 4„ÄÅÂà†Èô§Ë°®Ôºödrop table tname; 5„ÄÅ‰øÆÊîπË°®ÔºöÁï•ÔºåÊáíÂæóÁúã ‰∫å„ÄÅDMLËØ≠Âè• ÊèíÂÖ•Ôºö 1insert into table(Â≠óÊÆµ1ÔºåÂ≠óÊÆµ2Ôºå...) values (value1,value2,...) , (value3,value4,..) Êõ¥Êñ∞Ôºö 1update table set Â≠óÊÆµ=value where ... Âà†Èô§Ôºö 1delete from table where ... ËøôÈáåË¶ÅÊ≥®ÊÑè‰∏ãdeleteÂíåtruncate‰ª•Âèädrop‰∏âËÄÖÁöÑÂå∫Âà´Ôºå‰∏ãÁØáÊñáÁ´†ËØ¶Ëß£„ÄÇ ÂçïË°®Êü•ËØ¢Ôºö 1select Â≠óÊÆµ from table ËøûË°®Êü•ËØ¢ÊñπÂºè1Ôºö 1select Âà´Âêç1.Â≠óÊÆµ,Âà´Âêç2.Â≠óÊÆµ from table1 Âà´Âêç1,table2 Âà´Âêç2 where ... ËøûË°®Êü•ËØ¢ÊñπÂºè2Ôºö 1select Âà´Âêç1.Â≠óÊÆµ,Âà´Âêç2.Â≠óÊÆµ from table1 Âà´Âêç1 join table2 Âà´Âêç2 on ... ËøôÊòØÂÖ®ËøûÊé•ÔºåËøôÈáåÂ∞±Ë¶Å‰∫ÜËß£‰∏Ä‰∏ãÁ¨õÂç°ÂÑøÁßØÔºåÁÆÄÂçïÊù•ËØ¥ÔºåÊúÄÂêéË°åÊï∞ÊòØÂ∑¶ËæπË°®ÁöÑÂáΩÊï∞‰πò‰ª•Âè≥ËæπË°®ÁöÑË°åÊï∞„ÄÇËØ¶ÁªÜÁöÑÂèØ‰ª•Ëá™Ë°ågoogle. Êü•ËØ¢‰∏çÈáçÂ§çÁöÑËÆ∞ÂΩïÔºö 1select distinct Â≠óÊÆµ from table ... ÊéíÂ∫èÔºöÈªòËÆ§ÊòØÂçáÂ∫è 1select Â≠óÊÆµ from table where ... order by ... asc/desc limitÔºö‰∏ªË¶ÅÁî®‰∫éÂàÜÈ°µ 1select * from table where ... order by ... asc/desc limit Ëµ∑ÂßãÂÅèÁßª‰ΩçÁΩÆÔºåÊòæÁ§∫Êù°Êï∞ ËÅöÂêàÔºö 1select count(*)/avg(..)/sum(...)/max(...)/min(...) from table group by ... having .... Ê≥®ÊÑèËøôÈáåÁöÑhavingÂíåwhereÁöÑÂå∫Âà´ÔºöwhereÊòØÂØπË°®ÁªìÊûúËøõË°åÁ≠õÈÄâÔºåhaving ÊòØÂØπÊü•ËØ¢ÁªìÊûúËøõË°åÁ≠õÈÄâÔºå‰∏égroup by ÂêàÁî® Â∑¶ËøûÊé•ÂíåÂè≥ËøûÊé• Â∑¶ËøûÊé•ÊÑèÊÄùÂ∞±ÊòØÂ∑¶Ë°®‰∏≠ÁöÑËÆ∞ÂΩïÈÉΩÂú®ÔºåÂè≥Ë°®Ê≤°ÊúâÂåπÈÖçÈ°πÂ∞±‰ª•nullÊòæÁ§∫„ÄÇËÆ∞ÂΩïÊï∞Á≠â‰∫éÂ∑¶Ë°®ÁöÑË°åÊï∞„ÄÇ Âè≥ËøûÊé•‰∏é‰πãÂêåÁêÜÔºåÂ∞ΩÈáèËΩ¨‰∏∫Â∑¶ËøûÊé•ÂÅö„ÄÇ Â≠êÊü•ËØ¢Ôºö 1select * from table where ... in (select ....) ÊâÄË∞ìÂ≠êÊü•ËØ¢Â∞±ÊòØÊ†πÊçÆÂè¶‰∏Ä‰∏™selectÁöÑÁªìÊûúÂÜçËøõË°åÁ≠õÈÄâÔºåÂ∏∏Áî®ÁöÑÊòØin,not in,=,!=,exits,not exits union ‰∏ªË¶ÅÁî®‰∫é‰∏§Âº†Ë°®‰∏≠ÁöÑÊï∞ÊçÆÁöÑÂêàÂπ∂Ôºö 1select Â≠óÊÆµ from table1 union all select Â≠óÊÆµ from table2 Ë¶ÅÊÉ≥‰∏çÈáçÂ§çÁî®union]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÈù¢ËØïÈ¢ò]]></title>
    <url>%2F2019%2F01%2F25%2Fnetwork%2F8.%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ÂØπËøô‰∏ÄÂùóÊï¥ÁêÜ‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÈù¢ËØïÈ¢ò„ÄÇ 1.TCP‰∏âÊ¨°Êè°Êâã„ÄÅÂõõÊ¨°Êå•Êâã ËøôÈÉ®ÂàÜÁï•„ÄÇÂâçÈù¢Â∑≤ÁªèËØ¥ÁöÑÂæàËØ¶ÁªÜÔºåÂåÖÊã¨Êè°Êâã‰∏∫‰ªÄ‰πà‰∏çÊòØ‰∏§Ê¨°„ÄÅ‰∏∫‰ªÄ‰πà‰∏çÊòØÂõõÊ¨°Ôºå‰∏∫‰ªÄ‰πàÊå•ÊâãË¶ÅÁ≠â2MSLÁöÑÊó∂Èó¥„ÄÇ 2.Â∏∏ËßÅÁöÑHTTPÁä∂ÊÄÅÁ†ÅÂèäÂÖ∂Âê´‰πâ 200 OKÔºöÊ≠£Â∏∏ËøîÂõû‰ø°ÊÅØ 400 Bad ReqestÔºöÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÊúâËØ≠Ê≥ïÈîôËØØÔºå‰∏çËÉΩË¢´ÊúçÂä°Âô®ÊâÄÁêÜËß£ 401 UnauthorizedÔºöËØ∑Ê±ÇÊú™ÁªèÊéàÊùÉÔºåËøô‰∏™Áä∂ÊÄÅÁ†ÅÂøÖÈ°ª‰∏éWWW-AuthenticateÊä•Â§¥Âüü‰∏ÄËµ∑‰ΩøÁî® 403 ForbiddenÔºöÊúçÂä°Âô®Êî∂Âà∞ËØ∑Ê±ÇÔºå‰ΩÜÊòØÊãíÁªùÊèê‰æõÊúçÂä° 404 Not FoundÔºöËØ∑Ê±ÇËµÑÊ∫ê‰∏çÂ≠òÂú® 500 Internal Server ErrorÔºöÊúçÂä°Âô®ÂèëÁîü‰∏çÂèØÈ¢ÑÊúüÁöÑÈîôËØØ 503 Server UnavilableÔºöÊúçÂä°Âô®ÂΩìÂâç‰∏çËÉΩÂ§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºå‰∏ÄÊÆµÊó∂Èó¥ÂêéÂèØËÉΩÊÅ¢Â§çÊ≠£Â∏∏ 3.GetËØ∑Ê±ÇÂíåPostËØ∑Ê±ÇÁöÑÂå∫Âà´ HttpÊä•ÊñáÂ±ÇÈù¢ÔºöGETÂ∞ÜËØ∑Ê±Ç‰ø°ÊÅØÊîæÂú®URLÔºåPOSTÂàôÊîæÂú®Êä•Êñá‰Ωì‰∏≠ Êï∞ÊçÆÂ∫ìÂ±ÇÈù¢ÔºöGETÁ¨¶ÂêàÂπÇÁ≠âÊÄßÂíåÂÆâÂÖ®ÊÄß(Êü•ËØ¢‰∏ç‰ºöÊîπÂèòÊï∞ÊçÆÂ∫ì)ÔºåPOST‰∏çÁ¨¶Âêà ÂÖ∂‰ªñÂ±ÇÈù¢ÔºöGETÂèØ‰ª•Ë¢´ÁºìÂ≠ò„ÄÅË¢´Â≠òÂÇ®‰∏∫‰π¶Á≠æÔºåËÄåPOST‰∏çË°å 4.CookieÂíåSessionÁöÑÂå∫Âà´ ÂØπ‰∫ésessionÔºåÂ≠óÈù¢‰∏äÁêÜËß£ÊòØ‰ºöËØùÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Áî®Êà∑‰∏éÊúçÂä°Á´Ø‰∏ÄÂØπ‰∏ÄÁöÑ‰∫§‰∫í„ÄÇÊòØ‰∏Ä‰∏™ÊØîËæÉÊäΩË±°ÁöÑÊ¶ÇÂøµ„ÄÇ ‰ΩÜÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑsessionÂÖ∂ÂÆûÊòØËøôÈáåÊäΩË±°Ê¶ÇÂøµÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÁΩ¢‰∫ÜÔºåÊàëËßâÂæóÊ≤°ÊúâÂøÖË¶ÅÂí¨ÊñáÂöºÂ≠óÔºå‰∏ãÈù¢Áõ¥Êé•‰ªéÈù¢ËØïËßíÂ∫¶Êù•ÂàÜÊûê‰∏Ä‰∏ã„ÄÇ Áî±‰∫éHTTPÂçèËÆÆÊòØÊó†Áä∂ÊÄÅÁöÑÂçèËÆÆÔºåÊâÄ‰ª•ÊúçÂä°Á´ØÈúÄË¶ÅËÆ∞ÂΩïÁî®Êà∑ÁöÑÁä∂ÊÄÅÊó∂ÔºåÂ∞±ÈúÄË¶ÅÁî®ÊüêÁßçÊú∫Âà∂Êù•ËØÜÂÖ∑‰ΩìÁöÑÁî®Êà∑ÔºåËøô‰∏™Êú∫Âà∂Â∞±ÊòØSession.ÂÖ∏ÂûãÁöÑÂú∫ÊôØÊØîÂ¶ÇË¥≠Áâ©ËΩ¶ÔºåÂΩì‰Ω†ÁÇπÂáª‰∏ãÂçïÊåâÈíÆÊó∂ÔºåÁî±‰∫éHTTPÂçèËÆÆÊó†Áä∂ÊÄÅÔºåÊâÄ‰ª•Âπ∂‰∏çÁü•ÈÅìÊòØÂì™‰∏™Áî®Êà∑Êìç‰ΩúÁöÑÔºåÊâÄ‰ª•ÊúçÂä°Á´ØË¶Å‰∏∫ÁâπÂÆöÁöÑÁî®Êà∑ÂàõÂª∫‰∫ÜÁâπÂÆöÁöÑSessionÔºåÁî®Áî®‰∫éÊ†áËØÜËøô‰∏™Áî®Êà∑ÔºåÂπ∂‰∏îË∑üË∏™Áî®Êà∑ÔºåËøôÊ†∑ÊâçÁü•ÈÅìË¥≠Áâ©ËΩ¶ÈáåÈù¢ÊúâÂá†Êú¨‰π¶„ÄÇ Ëøô‰∏™SessionÊòØ‰øùÂ≠òÂú®ÊúçÂä°Á´ØÁöÑÔºåÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÊ†áËØÜÔºåËøô‰∏™ÂîØ‰∏ÄÊ†áËØÜÂØπÂ∫î‰∏Ä‰∏™Áî®Êà∑„ÄÇÂú®ÊúçÂä°Á´Ø‰øùÂ≠òSessionÁöÑÊñπÊ≥ïÂæàÂ§öÔºåÂÜÖÂ≠ò„ÄÅÊï∞ÊçÆÂ∫ì„ÄÅÊñá‰ª∂ÈÉΩÊúâ„ÄÇ ÊúçÂä°Á´ØËß£ÂÜ≥‰∫ÜÁî®Êà∑Ê†áËØÜÈóÆÈ¢òÔºå‰ΩÜÊòØÊúçÂä°Á´ØÊÄé‰πàÁü•ÈÅìÊ≠§Êó∂Êìç‰ΩúÊµèËßàÂô®ÁöÑÁî®Êà∑ÊòØË∞ÅÂë¢Ôºü Ëøô‰∏™Êó∂ÂÄôCookieÂ∞±ÁôªÂú∫‰∫Ü„ÄÇÊØèÊ¨°HTTPËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÂÆ¢Êà∑Á´ØÈÉΩ‰ºöÂèëÈÄÅÁõ∏Â∫îÁöÑCookie‰ø°ÊÅØÂà∞ÊúçÂä°Á´Ø„ÄÇ ÂÆûÈôÖ‰∏äÂ§ßÂ§öÊï∞ÁöÑÂ∫îÁî®ÈÉΩÊòØÁî® Cookie Êù•ÂÆûÁé∞SessionË∑üË∏™ÁöÑÔºåÁ¨¨‰∏ÄÊ¨°ÂàõÂª∫SessionÁöÑÊó∂ÂÄôÔºåÊúçÂä°Á´Ø‰ºöÂú®HTTPÂçèËÆÆ‰∏≠ÂëäËØâÂÆ¢Êà∑Á´Ø(ÊîæÂú®ÂìçÂ∫îÂ§¥‰∏≠ËøîÂõû)ÔºåÈúÄË¶ÅÂú® Cookie ÈáåÈù¢ËÆ∞ÂΩï‰∏Ä‰∏™Session IDÔºå‰ª•ÂêéÊØèÊ¨°ËØ∑Ê±Ç(ËØ∑Ê±ÇÂ§¥)ÊääËøô‰∏™‰ºöËØùIDÂèëÈÄÅÂà∞ÊúçÂä°Âô®ÔºåÊàëÂ∞±Áü•ÈÅì‰Ω†ÊòØË∞Å‰∫Ü„ÄÇ Êúâ‰∫∫ÈóÆÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÁöÑÊµèËßàÂô®Á¶ÅÁî®‰∫Ü Cookie ÊÄé‰πàÂäûÔºü‰∏ÄËà¨ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ºö‰ΩøÁî®‰∏ÄÁßçÂè´ÂÅöURLÈáçÂÜôÁöÑÊäÄÊúØÊù•ËøõË°å‰ºöËØùË∑üË∏™ÔºåÂç≥ÊØèÊ¨°HTTP‰∫§‰∫íÔºåURLÂêéÈù¢ÈÉΩ‰ºöË¢´ÈôÑÂä†‰∏ä‰∏Ä‰∏™ËØ∏Â¶Ç sid=xxxxx ËøôÊ†∑ÁöÑÂèÇÊï∞ÔºåÊúçÂä°Á´ØÊçÆÊ≠§Êù•ËØÜÂà´Áî®Êà∑„ÄÇ CookieÂÖ∂ÂÆûËøòÂèØ‰ª•Áî®Âú®‰∏Ä‰∫õÊñπ‰æøÁî®Êà∑ÁöÑÂú∫ÊôØ‰∏ãÔºåËÆæÊÉ≥‰Ω†ÊüêÊ¨°ÁôªÈôÜËøá‰∏Ä‰∏™ÁΩëÁ´ôÔºå‰∏ãÊ¨°ÁôªÂΩïÁöÑÊó∂ÂÄô‰∏çÊÉ≥ÂÜçÊ¨°ËæìÂÖ•Ë¥¶Âè∑‰∫ÜÔºåÊÄé‰πàÂäûÔºüËøô‰∏™‰ø°ÊÅØÂèØ‰ª•ÂÜôÂà∞CookieÈáåÈù¢ÔºåËÆøÈóÆÁΩëÁ´ôÁöÑÊó∂ÂÄôÔºåÁΩëÁ´ôÈ°µÈù¢ÁöÑËÑöÊú¨ÂèØ‰ª•ËØªÂèñËøô‰∏™‰ø°ÊÅØÔºåÂ∞±Ëá™Âä®Â∏Æ‰Ω†ÊääÁî®Êà∑ÂêçÁªôÂ°´‰∫ÜÔºåËÉΩÂ§üÊñπ‰æø‰∏Ä‰∏ãÁî®Êà∑„ÄÇËøô‰πüÊòØCookieÂêçÁß∞ÁöÑÁî±Êù•ÔºåÁªôÁî®Êà∑ÁöÑ‰∏ÄÁÇπÁîúÂ§¥„ÄÇ ÊÄªÁªìÔºö SessionÊòØÂú®ÊúçÂä°Á´Ø‰øùÂ≠òÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÔºåÁî®Êù•Ë∑üË∏™Áî®Êà∑ÁöÑÁä∂ÊÄÅÔºåËøô‰∏™Êï∞ÊçÆÂèØ‰ª•‰øùÂ≠òÂú®ÈõÜÁæ§„ÄÅÊï∞ÊçÆÂ∫ì„ÄÅÊñá‰ª∂‰∏≠Ôºõ CookieÊòØÂÆ¢Êà∑Á´Ø‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØÁöÑ‰∏ÄÁßçÊú∫Âà∂ÔºåÁî®Êù•ËÆ∞ÂΩïÁî®Êà∑ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºå‰πüÊòØÂÆûÁé∞SessionÁöÑ‰∏ÄÁßçÊñπÂºè„ÄÇ ‰∏ãÈù¢ËØ¥‰∏Ä‰∏ãÂæàÂ∏∏ËßÅÁöÑ‰∏ÄÁßçÂÜôÊ≥ï„ÄÇÊØîÂ¶ÇÂú®Âçï‰ΩìÂ∫îÁî®‰∏≠ÔºåÊàëÊ≠§Êó∂ÁôªÈôÜ‰Ω†ÁöÑÁΩëÁ´ô‰∫ÜÔºå‰Ω†ÂèØ‰ª•Â∞ÜÊàëÁöÑ‰ø°ÊÅØ‰øùÂ≠òÂú®session‰∏≠Ôºö 12User currentUserInfo = userService.getUserByUsernameAndPasswd(username,password);session.setAttribute("currentUser",currentUserInfo); ‰∏ãÊ¨°ÔºåÊàëÂ∞±ÂèØ‰ª•Âú®Êàë‰ª¨‰πãÈó¥ÁöÑ‰ºöËØù‰∏≠ÈöèÊó∂Ëé∑ÂèñÊàëÁöÑ‰∏™‰∫∫‰ø°ÊÅØÔºö 1User currentUser = session.getAttribute("currentUser"); ÂÖ∂ÂÆûËøô‰∫õÂ∞±ÊòØÂà©Áî®Â≠òÊîæÂú®Cookie‰∏≠ÁöÑJSESSIONIDÊù•ÂÆûÁé∞ÁöÑ„ÄÇ 5.HTTPÂíåHRTTPSÁöÑÂÖ≥Á≥ª Êù•ËØ¥‰∏Ä‰∏ãSSL(Security Sockets LayerÔºåÂÆâÂÖ®Â•óÊé•Â±Ç) ‰∏∫ÁΩëÁªúÈÄö‰ø°Êèê‰æõÂÆâÂÖ®ÂèäÊï∞ÊçÆÂÆåÊï¥ÊÄßÁöÑ‰∏ÄÁßçÂÆâÂÖ®ÂçèËÆÆ ÊòØÊìç‰ΩúÁ≥ªÁªüÂØπÂ§ñÁöÑAPIÔºåSSL3.0‰πãÂêéÊõ¥Âêç‰∏∫TLS ÈááÁî®Ë∫´‰ªΩÈ™åËØÅÂíåÊï∞ÊçÆÂä†ÂØÜ‰øùËØÅÁΩëÁªúÈÄö‰ø°ÁöÑÂÆâÂÖ®ÂíåÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß HTTPSÊï∞ÊçÆ‰º†ËæìÊµÅÁ®ãÔºö ÊµèËßàÂô®Â∞ÜÊîØÊåÅÁöÑÂä†ÂØÜÁÆóÊ≥ï‰ø°ÊÅØÂèëÈÄÅÁªôÊúçÂä°Âô® ÊúçÂä°Âô®ÈÄâÊã©‰∏ÄÂ•óÊµèËßàÂô®ÊîØÊåÅÁöÑÂä†ÂØÜÁÆóÊ≥ïÔºå‰ª•ËØÅ‰π¶ÁöÑÂΩ¢ÂºèÂõûÂèëÊµèËßàÂô® ÊµèËßàÂô®È™åËØÅËØÅ‰π¶ÂêàÊ≥ïÊÄßÔºåÂπ∂ÁªìÂêàËØÅ‰π¶ÂÖ¨Èí•Âä†ÂØÜ‰ø°ÊÅØÂèëÁªôÊúçÂä°Âô® ÊúçÂä°Âô®‰ΩøÁî®ÁßÅÈí•Ëß£ÂØÜ‰ø°ÊÅØÔºåÈ™åËØÅÂìàÂ∏åÔºåÂä†ÂØÜÂìçÂ∫îÊ∂àÊÅØÂõûÂèëÊµèËßàÂô® ÊµèËßàÂô®Ëß£ÂØÜÂìçÂ∫îÊ∂àÊÅØÔºåÂπ∂ÂØπÊ∂àÊÅØËøõË°åÈ™åËØÅÔºå‰πãÂêéËøõË°åÂä†ÂØÜ‰∫§‰∫íÊï∞ÊçÆ Ëøô‰∏™‰πüÂ∞±‰∏çËµòËø∞‰∫ÜÔºå‰∏ãÈù¢Áõ¥Êé•ËØ¥ËØ¥Âå∫Âà´„ÄÇ HTTPSÈúÄË¶ÅÂà∞CAÁî≥ËØ∑ËØÅ‰π¶ÔºåHTTP‰∏çÈúÄË¶Å HTTPSÂØÜÊñá‰º†ËæìÔºåHTTPÊòéÊñá‰º†Ëæì ËøûÊé•ÊñπÂºè‰∏çÂêåÔºåHTTPSÈªòËÆ§‰ΩøÁî®443Á´ØÂè£ÔºåHTTP‰ΩøÁî®80Á´ØÂè£ HTTPS=HTTP+Âä†ÂØÜ+ËÆ§ËØÅ+ÂÆåÊï¥ÊÄß‰øùÊä§ÔºåÊõ¥ÂÆâÂÖ® ‰ΩÜÊòØ‰ªçÁÑ∂Â≠òÂú®‰∏ÄÂÆöÁöÑÈ£éÈô©Ôºö ÊµèËßàÂô®ÈªòËÆ§Â°´ÂÖÖhttp://ÔºåËØ∑Ê±ÇÈúÄË¶ÅËøõË°åË∑≥ËΩ¨ÔºåÊúâË¢´Âä´ÊåÅÁöÑÈ£éÈô© ÂèØ‰ª•‰ΩøÁî®HSTS(HTTP Strict Transport Security)‰ºòÂåñÔºàËøô‰∏™Ëøò‰∏çÊú™‰∏ªÊµÅÔºåÈù¢ËØïÈóÆÁöÑÂ∞ëÔºâ SocketÁÆÄ‰ªã Êàë‰ª¨Áü•ÈÅìÔºåËøõÁ®ã‰∏éËøõÁ®ãÁõ¥Êé•ÁöÑÈÄö‰ø°ÊúÄÂü∫Êú¨ÁöÑË¶ÅÊ±ÇÊòØÔºöÂèØ‰ª•ÂîØ‰∏ÄÁ°ÆÂÆöËøõÁ®ã„ÄÇ Âú®Êú¨Âú∞ËøõÁ®ãÈÄö‰ø°‰∏≠ÔºåÂèØ‰ª•Áî®PIDÊù•ÂîØ‰∏ÄÊ†áËØÜ‰∏Ä‰∏™ËøõÁ®ã„ÄÇ ‰ΩÜÊòØPIDÂè™Âú®Êú¨Âú∞ÂîØ‰∏ÄÔºåÁΩëÁªú‰∏≠PIDÂÜ≤Á™ÅÁöÑÂá†ÁéáËøòÊòØÂ≠òÂú®ÁöÑ„ÄÇ Êàë‰ª¨Áü•ÈÅìÔºåÂà∞IPÂ±ÇÂ∞±ÂèØ‰ª•ÂîØ‰∏ÄÂÆö‰ΩçÂà∞‰∏ÄÂè∞‰∏ªÊú∫‰∫ÜÔºåTCPÂ±Ç(tcpÂçèËÆÆ+Á´ØÂè£Âè∑)ÂèØ‰ª•ÂîØ‰∏ÄÂÆö‰Ωç‰∏ÄÂè∞‰∏ªÊú∫‰∏≠ÁöÑ‰∏Ä‰∏™ËøõÁ®ã„ÄÇ ËøôÊ†∑ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáipÂú∞ÂùÄ+ÂçèËÆÆ+Á´ØÂè£Âè∑ÂèØ‰ª•ÂîØ‰∏ÄÊ†áËØÜ‰∏ÄÂè∞‰∏ªÊú∫ÁöÑ‰∏Ä‰∏™ËøõÁ®ã„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•ÈÄöËøásocketËøõË°åÁΩëÁªúÈÄö‰ø°‰∫Ü„ÄÇ socketÊòØÂØπTCP/IPÂçèËÆÆÁöÑÊäΩË±°ÔºåÊòØÊìç‰ΩúÁ≥ªÁªüÂØπÂ§ñÂºÄÊîæÁöÑÊé•Âè£„ÄÇ socketËµ∑Ê∫ê‰∫éunixÔºåËÄåunixÊòØÈÅµ‰ªé‰∏ÄÂàáÁöÜÊñá‰ª∂ÁöÑÂì≤Â≠¶„ÄÇSocketÊòØ‰∏ÄÁßçÂü∫‰∫é‰ªéÊâìÂºÄ„ÄÅËØª/ÂÜô„ÄÅÂÖ≥Èó≠ÁöÑÊ®°ÂºèÂÆûÁé∞ÁöÑ„ÄÇÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂêÑËá™Áª¥Êä§‰∏Ä‰∏™Êñá‰ª∂ÔºåÂú®ËøûÊé•Âª∫Á´ãÂêéÔºåÂèØ‰ª•‰æõÂØπÊñπËØªÂèñÊàñËÄÖËØªÂèñÂØπÊñπÂÜÖÂÆπ„ÄÇ socketÁõ∏ÂÖ≥È¢òÁõÆ ÁºñÂÜô‰∏Ä‰∏™ÁΩëÁªúÁ®ãÂ∫èÔºåÊúâÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÔºåÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Á´ØÂèëÈÄÅ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÊúçÂä°Âô®Êî∂Âà∞Â≠óÁ¨¶‰∏≤‰πãÂêéÊâìÂç∞Âà∞ÂëΩ‰ª§Ë°å‰∏äÔºåÁÑ∂ÂêéÂêëÂÆ¢Êà∑Á´ØËøîÂõûËØ•Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÊúÄÂêéÔºåÂÆ¢Êà∑Á´ØËæìÂá∫ÊúçÂä°Á´ØËøîÂõûÁöÑËØ•Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÂàÜÂà´Áî®TCPÂíåUDP‰∏§ÁßçÊñπÂºèÂéªÂÆûÁé∞„ÄÇ ‰ª£Á†ÅÂú∞ÂùÄÔºöhttps://github.com/sunweiguo/TcpAndUdp/]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAÂü∫Á°ÄÊ†∏ÂøÉ-ÁêÜËß£Á±ª„ÄÅÂØπË±°„ÄÅÈù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÅÈù¢ÂêëÊé•Âè£ÁºñÁ®ã]]></title>
    <url>%2F2019%2F01%2F24%2Fjava-basic%2FJAVA%E5%9F%BA%E7%A1%80%E6%A0%B8%E5%BF%83-%E7%90%86%E8%A7%A3%E7%B1%BB%E3%80%81%E5%AF%B9%E8%B1%A1%E3%80%81%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E3%80%81%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØÁ±ªÔºå‰ªÄ‰πàÊòØÂØπË±°Ôºå‰ªÄ‰πàÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ãÔºå‰ªÄ‰πàÊòØÈù¢ÂêëÊé•Âè£ÁºñÁ®ã„ÄÇÂ≠¶‰π†Èù¢ÂêëÂØπË±°ÊÄùÊÉ≥ÁöÑËØ≠Ë®ÄÔºåÊØîÂ¶ÇjavaÔºåÁ¨¨‰∏ÄÂÖ≥ÂèØËÉΩÂ∞±ÊòØË¶ÅÁêÜËß£Ëøô‰∫õÊ¶ÇÂøµ„ÄÇ‰∏ãÈù¢Â∞±Êù•Â•ΩÂ•ΩÁê¢Á£®‰∏Ä‰∏ã„ÄÇ Á±ªÂíåÂØπË±°ÁöÑÊ¶ÇÂøµ È¶ñÂÖàÊÄªÁªì‰∏Ä‰∏ãÔºöÁ±ªÊòØ‰∏Ä‰∏™Ê®°ÊùøÔºåÂØπË±°Â∞±ÊòØÁî®Ëøô‰∏™Ê®°ÊùøÂàõÈÄ†Âá∫Êù•ÁöÑ‰∏úË•ø„ÄÇ ÊØîÂ¶ÇÔºåÁî∑Â≠©Ôºå‰ªñÂ∞±ÊòØ‰∏Ä‰∏™Ê®°ÊùøÔºåÁî∑ÁöÑÂ∞±Ë°åÔºåÈÇ£‰πàÂØπË±°ÊòØ‰ªÄ‰πàÂë¢ÔºüÂ∞±ÊòØÂÖ∑‰ΩìÊüê‰∏™Áî∑Â≠©ÔºåÊØîÂ¶ÇÁî∑Â≠©BOBÔºåÁî∑Â≠©fourColor. ËØ∑Áúã‰∏ãÈù¢‰∏ÄÂº†ÂõæÔºö Áî∑Â≠©Â•≥Â≠©ÊòØÊØîËæÉÊäΩË±°ÁöÑÊ¶ÇÂøµÔºåÊòØÊ®°ÊùøÔºåÂ∑¶Ëæπ‰∏ÄÊéíÂ∞±ÊòØÂÖ∂ÂÖ∑‰ΩìÁöÑ‰∏Ä‰∫õÂØπË±°„ÄÇ‰Ω†ÁúãÈïøÁöÑÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÊúâÁöÑÈªëÔºåÊúâÁöÑÁôΩÔºåÊúâÁöÑÈ´òÔºåÊúâÁöÑÁüÆÔºåÂõΩÂÆ∂Âú∞Âå∫‰πü‰∏ç‰∏ÄÊ†∑„ÄÇ‰ΩÜÊòØ‰ªñ‰ª¨ÈÉΩÂ±û‰∫éÁî∑Â≠©ÊàñËÄÖÂ•≥Â≠©„ÄÇ ÈÇ£‰πàÂêåÁêÜÔºå‰∫∫Â∞±ÊòØ‰∏Ä‰∏™Á±ªÔºåÁî∑Â≠©Â•≥Â≠©Â∞±ÊòØ‰∫∫ÁöÑÂ≠êÁ±ªÔºåÂõ†‰∏∫‰∫∫ÂèØËÉΩ‰∏ç‰ªÖÂåÖÊã¨Áî∑Â≠©Â•≥Â≠©ÔºåËøòÂåÖÊã¨Á¨¨‰∏âÊÄßÂà´Ëøô‰∏™Á±ª„ÄÇ ËøôÈáåËøòÂºïÂá∫‰∫ÜJAVAÁâπÊÄß‰∏≠ÁöÑÁªßÊâø„ÄÇÁªßÊâøÁÆÄÂçïÁêÜËß£Â∞±ÊòØÁà∂Á±ªÊúâÁöÑ‰∏úË•ø(ËÆøÈóÆÁ∫ßÂà´‰∏çËÉΩÊòØprivate)ÁöÑÔºåÈÇ£ÈÉΩÊòØ‰Ω†ÁöÑ„ÄÇÊØîÂ¶Ç‰Ω†ËÄÅÁà∏ÁöÑÊàøÂ≠êÔºåÂ∞±ÊòØÂ±û‰∫é‰Ω†ÁöÑÔºå‰Ω†Âá∫ÂÖ•Ëá™Áî±„ÄÇ ‰∫∫ËøòÂèØ‰ª•ÂàÜ‰∏∫ËÉñ‰∫∫ÂíåÁò¶‰∫∫Ëøô‰∏™Â≠êÁ±ª„ÄÇÊâÄ‰ª•Âè™Ë¶ÅÊòØÊäΩË±°ÁöÑÊ®°ÊùøÔºåÂ∞±ÊòØ‰∏Ä‰∏™Á±ª„ÄÇ ÂØπË±°ÔºöÂØπË±°ÊòØÁ±ªÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºàÂØπË±°‰∏çÊòØÊâæ‰∏™Â•≥ÊúãÂèãÔºâÔºåÊúâÁä∂ÊÄÅÂíåË°å‰∏∫„ÄÇ‰æãÂ¶ÇÔºå‰∏ÄÊù°ÁãóÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂÆÉÁöÑÁä∂ÊÄÅÊúâÔºöÈ¢úËâ≤„ÄÅÂêçÂ≠ó„ÄÅÂìÅÁßçÔºõË°å‰∏∫ÊúâÔºöÊëáÂ∞æÂ∑¥„ÄÅÂè´„ÄÅÂêÉÁ≠â„ÄÇ Á±ªÔºöÁ±ªÊòØ‰∏Ä‰∏™Ê®°ÊùøÔºåÂÆÉÊèèËø∞‰∏ÄÁ±ªÂØπË±°ÁöÑË°å‰∏∫ÂíåÁä∂ÊÄÅ„ÄÇ ‰∏ãÈù¢Â∞±ÊãøÁãóËøô‰∏™Á±ªÊù•ËØ¥‰∫ã„ÄÇÁãóÊòØÂä®Áâ©Ëøô‰∏™Á±ªÁöÑÂ≠êÁ±ª„ÄÇ Java‰∏≠ÂàõÂª∫Á±ª ÊûÑÈÄ†Âô®ÊñπÊ≥ïËØ¥Êòé ÈúÄË¶ÅÂàõÈÄ†‰∏Ä‰∏™Á±ªÂØπË±°Âá∫Êù•ÁöÑÊó∂ÂÄôÔºåË¶ÅÁî®Âà∞Ëøô‰∏™Á±ªÁöÑÊûÑÈÄ†Âô®ÊñπÊ≥ïÔºåÈÇ£‰πàÂï•ÊòØÊûÑÈÄ†Âô®ÊñπÊ≥ïÂë¢ÔºüÊûÑÈÄ†Âô®ÊñπÊ≥ïÂ∞±ÊòØÂàõÈÄ†Á±ªÊó∂ÁöÑÂàùÂßãÂåñÊñπÊ≥ïÔºåÂíåÁ±ªÂêåÂêçÁöÑÊñπÊ≥ïÔºå‰Ω†ÂèØ‰ª•Âú®ÈáåÈù¢ÂÜôËá™Â∑±ÁöÑ‰ª£Á†Å 1234567891011121314151617181920//Ê®°Áâàclass Á±ªÂêçÁß∞ &#123; ËÆøÈóÆÊùÉÈôê ÊûÑÈÄ†ÊñπÊ≥ïÂêçÁß∞()&#123; &#125;&#125;//‰æãÂ≠êpublic class Dog&#123; //ÊûÑÈÄ†ÊñπÊ≥ï‰∏Ä public Dog()&#123; System.out.println("nothing to do..."); &#125; //ÊûÑÈÄ†ÊñπÊ≥ï‰∫å public Dog(String name)&#123; //ËøôÈáåÂ∞±ÂèØ‰ª•ÁªôÊØèÊù°newÂá∫Êù•ÁöÑÂØπË±°(Áãó)ÂàùÂßãÂåñ‰∏Ä‰∏™ÂêçÂ≠ó System.out.println("hi,my name is "+name); &#125;&#125; ‰∏Ä‰∏™Áõ∏ÂØπÊØîËæÉÂÆåÊï¥ÁöÑÁ±ª 1234567891011121314151617181920212223242526272829//Ê®°Áâàclass Á±ªÂêçÁß∞ &#123; //ÊûÑÈÄ†Âô®ÊñπÊ≥ï //Â£∞ÊòéÊàêÂëòÂèòÈáè---Ëøô‰∏™ÂèòÈáèÂ±û‰∫éËøô‰∏™Á±ª //Â£∞ÊòéÊàêÂëòÊñπÊ≥ï //Âú®ÊñπÊ≥ïÈáåÈù¢ÂÆö‰πâÁöÑÂèòÈáèÊòØÂ±ÄÈÉ®ÂèòÈáèÔºåÂå∫Âà´‰∫éÊàêÂëòÂèòÈáè&#125;//‰æãÂ≠êpublic class Dog &#123; //ÊûÑÈÄ†ÊñπÊ≥ï‰∏Ä public Dog()&#123; System.out.println("nothing to do..."); &#125; //ÊûÑÈÄ†ÊñπÊ≥ï‰∫å public Dog(String name)&#123; //ËøôÈáåÂ∞±ÂèØ‰ª•ÁªôÊØèÊù°newÂá∫Êù•ÁöÑÂØπË±°(Áãó)ÂàùÂßãÂåñ‰∏Ä‰∏™ÂêçÂ≠ó System.out.println("hi,my name is "+name); &#125; //ÁãóÁöÑÈ¢úËâ≤--ÊàêÂëòÂ±ûÊÄß public String color;//‰∏ÄËà¨ÊòØprivateÔºåËµãÂÄºÁî®setÊñπÊ≥ïÔºåÂèñÂÄºÁî®getÊñπÊ≥ïÔºåËøôÈáåÂè™ÊòØÊºîÁ§∫ //ÁãóÁöÑË°å‰∏∫ÔºåÂÆÉ‰ºöÂè´---ÊàêÂëòÊñπÊ≥ï private void say()&#123; int i = 0;//Â±ÄÈÉ®ÂèòÈáè System.out.println("Êàë‰ºöÂè´ÔºöÊ±™Ê±™Ê±™~"); &#125;&#125; ÂàõÂª∫ÂØπË±° ËØ≠Ê≥ïÔºö Á±ªÂêç ÂØπË±°Âêç = new Á±ªÂêç() ; ‰∏æ‰æãÔºö 12Dog fourcolor ; // ÂÖàÂ£∞Êòé‰∏Ä‰∏™ Dog Á±ªÁöÑÂØπË±° fourcolorfourcolor = new Dog(&quot;fourcolor&quot;) ; // Áî® new ÂÖ≥ÈîÆÂ≠óÂÆû‰æãÂåñ Dog ÁöÑÂØπË±° fourcolor,Ê≠§Êó∂Ë∞ÉÁî®ÊûÑÈÄ†ÊñπÊ≥ï‰∫å ÈÄöËøáDogËøô‰∏™Á±ªÂèØ‰ª•ÂàõÈÄ†Âá∫fourcolorÂØπË±°.‰∏ãÈù¢ÊàëÊâçËÉΩÊìç‰ΩúËøô‰∏™ÂØπË±°Ôºö 1234//ËÆ©ÂÆÉÁöÑÈ¢úËâ≤‰∏∫ÈªëËâ≤fourcolor.color = &quot;black&quot;;//ËÆ©ÂÆÉÂè´fourcolor.say(); Èù¢ÂêëÂØπË±° Âú®ÁêÜËß£‰∫Ü‰ªÄ‰πàÊòØÁ±ªÔºå‰ªÄ‰πàÊòØÂØπË±°ÔºåÂ∞±ÂèØ‰ª•Êù•ËØ¥ËØ¥Èù¢ÂêëÂØπË±°Âà∞Â∫ïÊòØ‰ªÄ‰πà‰∫Ü„ÄÇ ÂÖàÊù•ËØ¥ËØ¥Èù¢ÂêëËøáÁ®ãÔºåÂ§ßÂÆ∂ÈÉΩÂ≠¶‰π†ËøáCËØ≠Ë®Ä„ÄÇCËØ≠Ë®ÄÂ∞±ÊòØÂÖ∏ÂûãÁöÑÈù¢ÂêëËøáÁ®ãÁöÑËØ≠Ë®Ä„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöË¶ÅÊääÂ§ßË±°Ë£ÖËøõÂÜ∞ÁÆ±ÈáåÔºåËøô‰ª∂‰∫ãÔºåÈù¢ÂêëËøáÁ®ãÁöÑÁ®ãÂ∫èÂëòÊòØËøôÊ†∑ÊÄùËÄÉÁöÑÔºö ÊääÂÜ∞ÁÆ±Èó®ÂÑøÊâìÂºÄ„ÄÇ ÊääÂ§ßË±°Ë£ÖËøõÂéª„ÄÇ ÊääÂÜ∞ÁÆ±Èó®ÂÑøÂÖ≥‰∏ä„ÄÇ ‰∏äÈù¢ÁöÑÊØè‰∏Ä‰ª∂‰∫ãÈÉΩÁî®‰∏Ä‰∏™ÂáΩÊï∞Êù•ÂÆûÁé∞„ÄÇÊäΩË±°‰∏∫‰∏ãÈù¢‰∏â‰∏™ÂáΩÊï∞Ôºö openTheDoor()Ôºõ pushElephant()Ôºõ closeTheDoor()Ôºõ ËøôÊ†∑‰∏çÊå∫Â•ΩÁöÑÂêóÔºü‰∏∫‰ªÄ‰πà‰∏çÁî®Èù¢ÂêëËøáÁ®ãÁöÑËøôÁßçÊÄùÁª¥Êù•ÁºñÁ®ãÂë¢ÔºåËøòË¶ÅÊêûÂá∫‰ªÄ‰πàÈù¢ÂêëÂØπË±°Êù•„ÄÇ ÈúÄÊ±ÇÂèàÊù•Âï¶Ôºö „ÄåÊàëË¶ÅÊääÂ§ßË±°Ë£ÖÂæÆÊ≥¢ÁÇâÈáå„Äç „ÄåÊàëË¶ÅÊääÁãÆÂ≠ê‰πüË£ÖÂÜ∞ÁÆ±Èáå„Äç „ÄåÊàëË¶ÅÊääÂ§ßË±°Ë£ÖÂÜ∞ÁÆ±Ôºå‰ΩÜÊòØÈó®Âà´ÂÖ≥ÔºåÊïûÁùÄÂ∞±Ë°å„Äç Ëøô‰∏™Êó∂ÂÄôÔºåÈù¢ÂêëËøáÁ®ãÁöÑÁ®ãÂ∫èÂëòÂ∞±ÊÇ≤Ââß‰∫ÜÔºåÊù•‰∏Ä‰∏™ÈúÄÊ±ÇÊàëÂ∞±ÂÜô‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊàëËøòËÉΩ‰∏ãÁè≠ÂêóÔºü Èù¢ÂêëÂØπË±°‰ªéÂè¶‰∏Ä‰∏™ËßíÂ∫¶Êù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇÂÆÉÊäõÂºÉ‰∫ÜÂáΩÊï∞ÔºåÊää„ÄåÂØπË±°„Äç‰Ωú‰∏∫Á®ãÂ∫èÁöÑÂü∫Êú¨ÂçïÂÖÉ„ÄÇ Èù¢ÂêëÂØπË±°ÁöÑ‰∏ñÁïåÈáåÔºåÂà∞Â§ÑÈÉΩÊòØÂØπË±°„ÄÇÂç≥Ôºö‰∏áÁâ©ÁöÜÂØπË±°„ÄÇ ÊØîÂ¶Ç‰∫∫Ëøô‰∏™Á±ªÔºåÊØè‰∏™ÂÖ∑‰ΩìÁöÑ‰∫∫(ÂØπË±°)ÈÉΩË¶ÅÊúâËøôÊ†∑ÁöÑÂ±ûÊÄßÔºöË∫´È´ò„ÄÅ‰ΩìÈáç„ÄÅÂπ¥ÈæÑ„ÄÇÊØè‰∏™‰∫∫ÈÉΩÊúâËøôÊ†∑ÁöÑË°å‰∏∫ÔºöÂêÉÈ•≠„ÄÅÁù°Ëßâ„ÄÅ‰∏äÂéïÊâÄ„ÄÇ ÈÇ£‰πàÔºåËøô‰∫õÈÄöÁî®ÁöÑÂ±ûÊÄß+ÊñπÊ≥ïÂèØ‰ª•ÊûÑÂª∫‰∏Ä‰∏™Ê®°ÊùøÔºö‰∫∫Ëøô‰∏™Á±ª„ÄÇÂõ†‰∏∫ÊØè‰∏™ÂÖ∑‰ΩìÁöÑ‰∫∫ÔºàÂØπË±°ÔºâÈÉΩÈúÄË¶ÅËøô‰∫õÂü∫Êú¨ÁöÑ‰∏úË•ø„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÊØè‰∏™‰∫∫ÂÖ∑‰Ωì‰ªÄ‰πàË∫´È´ò„ÄÅ‰ªÄ‰πà‰ΩìÈáç„ÄÅÂêÉ‰ªÄ‰πàÈÉΩÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª•ÊØè‰∏™ÂØπË±°‰∏ÄËà¨ÈÉΩÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ‰ΩÜÊòØÊ®°ÊùøÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÈÇ£‰πàÔºåÂõûÂà∞ÂàöÊâçÁöÑÈúÄÊ±ÇÔºåÈù¢ÂêëÂØπË±°ÊòØÂ¶Ç‰ΩïÊÄùËÄÉËøô‰ª∂‰∫ãÁöÑÂë¢Ôºü ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂºÄÈó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÂ§ßË±°‰∏ãËææ„ÄåËøõÂÜ∞ÁÆ±„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂÖ≥Èó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ Â∞±ÊòØËØ¥ÔºåÊàë‰∏çÁî®‰∫≤Ëá™ÁÆ°ÂºÄÈó®ÁöÑÁªÜËäÇÔºåÊàëÂè™Ë¶ÅÂè´‰ªñÂºÄÈó®Âç≥ÂèØ„ÄÇ Êàë‰ª¨ÂàõÂª∫ÁöÑÂØπË±°ÔºåÂ∫îËØ•ÊòØÂàöÂàöÂ•ΩËÉΩÂÅöÂÆåÂÆÉËÉΩÂÅöÁöÑ‰∫ãÊÉÖÔºå‰∏çÂ§öÂÅöÔºå‰∏çÂ∞ëÂÅö„ÄÇÂ§öÂÅö‰∫ÜÂÆπÊòìËÄ¶ÂêàÔºåÂêÑÁßçÂäüËÉΩÊùÇÁ≥ÖÂú®‰∏Ä‰∏™ÂØπË±°Èáå„ÄÇÊØîÂ¶ÇÊàëÊúâ‰∏Ä‰∏™ÂØπË±°Âè´„ÄåÊ±ΩËΩ¶„ÄçÔºåÂèØ‰ª•„ÄåË°åÈ©∂„ÄçÔºåÂèØ‰ª•„ÄåËΩΩ‰∫∫„ÄçÔºåÁé∞Âú®ÁöÑÈúÄÊ±ÇÊòØË¶ÅÂÆûÁé∞„ÄåËΩΩ‰∫∫È£ûË°å„ÄçÔºåÂ∞±‰∏çËÉΩÈáçÁî®Ëøô‰∏™ÂØπË±°ÔºåÂøÖÈ°ªÊñ∞ÂÆö‰πâ‰∏Ä‰∏™ÂØπË±°„ÄåÈ£ûÊú∫„ÄçÊù•ÂÅö„ÄÇÂ¶ÇÊûú‰Ω†Áªô„ÄåÊ±ΩËΩ¶„ÄçÊèí‰∏ä‰∫ÜÁøÖËÜÄÔºåËµã‰∫à‰∫ÜÂÆÉ„ÄåÈ£ûË°å„ÄçÁöÑËÉΩÂäõÔºåÈÇ£‰πàÊñ∞Êù•ÁöÑÂêåÂ≠¶Èù¢ÂØπ‰Ω†ÁöÑ‰ª£Á†ÅÂ∞±‰ºöËé´ÂêçÂÖ∂Â¶ôÔºåÊó†‰ªé‰∏ãÊâã„ÄÇ ‰ΩÜÊòØ‰∏çÁ¶ÅË¶ÅÈóÆÔºöÊÄé‰πàÂÆûÁé∞ËøôÁßç‰∏ãËææÂëΩ‰ª§Â∞±ÂèØ‰ª•Ëá™Âä®ÂéªÊâßË°åÁöÑÊïàÊûúÂë¢ÔºüÊàñËÄÖËØ¥ÔºåÊàëÊÄé‰πàÁü•ÈÅìÂÆÉÊúâËøô‰∏™ÂäüËÉΩÂïäÔºÅ Èù¢ÂêëÊé•Âè£ÁºñÁ®ã Áé∞Âú®Êàë‰ª¨Êää„ÄåÊï∞ÊçÆ„ÄçÂíå„ÄåË°å‰∏∫„ÄçÈÉΩÂ∞ÅË£ÖÂà∞‰∫ÜÂØπË±°ÈáåÔºåÁõ∏ÂΩì‰∫éÂØπË±°Êàê‰∫Ü‰∏Ä‰∏™ÈªëÂå£Â≠êÔºåÈÇ£Êàë‰ª¨ÊÄé‰πàÁü•ÈÅìÂØπË±°ÂÖ∑Êúâ‰ªÄ‰πàÊ†∑ÁöÑËÉΩÂäõÂë¢ÔºüËøô‰∏™ÈóÆÈ¢òÁöÑÂÖ≥ÈîÆÂ∞±ÊòØÊé•Âè£„ÄÇ Âõ†‰∏∫Êó†ËÆ∫ÊòØÊääÂ§ßË±°Ë£ÖËøõÊ¥óË°£Êú∫ËøòÊòØÂÜ∞ÁÆ±ÔºåÈÉΩË¶ÅÊ±ÇÊ¥óË°£Êú∫ÊàñËÄÖÂÜ∞ÁÆ±ÊúâÂºÄÈó®ÂíåÂÖ≥Èó®ÁöÑÂäüËÉΩ„ÄÇËøô‰∏™Êó∂ÂÄôÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÊäΩË±°Âá∫Êù•‰∏Ä‰∏™Êé•Âè£Ôºö„ÄêËá™Âä®Èó®„Äë„ÄÇËøô‰∏™Êé•Âè£ÈáåÈù¢ÂÆö‰πâ‰∏§‰∏™ËÉΩÂäõÔºö„ÄêÂºÄÈó®„ÄëÂíå„ÄêÂÖ≥Èó®„Äë„ÄÇ ËÆ©Ê¥óË°£Êú∫„ÄÅÂÜ∞ÁÆ±„ÄÅÂæÆÊ≥¢ÁÇâËøô‰∫õÂ∏¶Èó®ÁöÑ‰∏úË•øÂÖ®ÈÉ®ÂÆûÁé∞„ÄêËá™Âä®Èó®„ÄëÊé•Âè£„ÄÇ Ëøô‰∏™Êó∂ÂÄôÔºåÊØè‰∏™ÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂèØËÉΩÁï•Êúâ‰∏çÂêåÔºåÊØîÂ¶ÇÂÜ∞ÁÆ±ÂºÄÈó®ÊòØÂæÄÂ§ñÊãΩÔºå‰ΩÜÊòØÊ¥óË°£Êú∫ÂºÄÈó®ÂèØËÉΩÊòØÂæÄ‰∏äÁøªÁõñÂ≠ê„ÄÇ Ê≠§Êó∂ÔºåÊàëÊúâ‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÊääÂ§ßË±°ÊîæËøõÂÜ∞ÁÆ±„ÄÇÊàë‰∏ÄÁúãÔºåÂÜ∞ÁÆ±ÂÆûÁé∞‰∫Ü„ÄêËá™Âä®Èó®„ÄëËøô‰∏™Êé•Âè£ÔºåÈáåÈù¢Êúâ„ÄêÂºÄÈó®„ÄëÂíå„ÄêÂÖ≥Èó®„Äë‰∏§‰∏™ÊñπÊ≥ïÔºåokÔºåÊàëÁü•ÈÅìÂÜ∞ÁÆ±ÊòØÂèØ‰ª•ÂºÄÈó®ÂíåÂÖ≥Èó®‰∫ÜÔºåÈÇ£Â∞±Â•ΩÂäû‰∫Ü„ÄÇÊàëÁõ¥Êé•‰∏ãËææÂëΩ‰ª§Âç≥ÂèØ„ÄÇËøòÊòØË∑ü‰∏äÈù¢‰∏ÄÊ†∑ÁöÑÊ≠•È™§. ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂºÄÈó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÂ§ßË±°‰∏ãËææ„ÄåËøõÂÜ∞ÁÆ±„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂÖ≥Èó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ Ê≠§Êó∂ÔºåÈúÄË¶ÅÂ∞ÜÁãÆÂ≠ê‰πüË£ÖÂÜ∞ÁÆ±Èáå„ÄÇÈÇ£ËøòÊòØ‰∏ÄÊ†∑Ôºö ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂºÄÈó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÁãÆÂ≠ê‰∏ãËææ„ÄåËøõÂÜ∞ÁÆ±„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂÖ≥Èó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ Ê≠§Êó∂ÔºåÊàëË¶ÅÊääÂ§ßË±°Ë£ÖÂÜ∞ÁÆ±Ôºå‰ΩÜÊòØÈó®Âà´ÂÖ≥ÔºåÊïûÁùÄÂ∞±Ë°åÔºåÈÇ£Â∞±Ôºö ÂêëÂÜ∞ÁÆ±‰∏ãËææ„ÄåÂºÄÈó®„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÂêëÂ§ßË±°‰∏ãËææ„ÄåËøõÂÜ∞ÁÆ±„ÄçÁöÑÂëΩ‰ª§„ÄÇ ÊòØ‰∏çÊòØÂæàÊñπ‰æøÔºüÂÜ∞ÁÆ±‰πüÂèØ‰ª•Êç¢ÔºåÊàëÂèØ‰ª•Êç¢Êàê‰ªª‰Ωï‰∏úË•øÔºåÂè™Ë¶ÅÂÆûÁé∞‰∫ÜËøô‰∏™Êé•Âè£ÔºåËøô‰∫õ‰∏úË•øÂ∞±ÈÉΩÊúâËøô‰∫õËÉΩÂäõÔºåÈÇ£ÊàëÊâç‰∏çÁÆ°ÈáåÈù¢Âà∞Â∫ïÊÄé‰πàÂÆûÁé∞ÁöÑÂë¢ÔºåÁõ¥Êé•‰∏ãËææ„ÄêÂºÄÈó®„Äë„ÄêÂÖ≥Èó®„ÄëÂëΩ‰ª§Âç≥ÂèØ„ÄÇ Ëøô‰πüÂºïÂÖ•‰∫ÜJAVAÁâπÊÄß‰∏≠Âè¶‰∏Ä‰∏™ÁâπÊÄßÔºöÂ∞ÅË£Ö„ÄÇÂ§ñÁïå‰∏çÁü•ÈÅìÈáåÈù¢ÂÆûÁé∞ÁªÜËäÇÔºåÂè™ÈúÄË¶ÅÁü•ÈÅìÂÆÉÁöÑÂäüËÉΩÂíåÂÖ•ÂèÇÂç≥ÂèØ„ÄÇ ËøôÂ∞±ÊòØÈù¢ÂêëËøáÁ®ãÂíåÈù¢ÂêëÂØπË±°ÁºñÁ®ãÁöÑÂå∫Âà´Ôºå‰πüÈ°∫Â∏¶Âú∞ÁêÜËß£‰∫Ü‰ªÄ‰πàÊòØÈù¢ÂêëÊé•Âè£ÁºñÁ®ã„ÄÇËøôÊòØÂ≠¶‰π†JAVAÊúÄÂü∫Á°Ä‰πüÊòØÊúÄÊ†∏ÂøÉÁöÑÁÇπ„ÄÇ Êï¥ÁêÜËá™Ôºö https://tryenough.com/java05 http://www.woshipm.com/pmd/294180.html]]></content>
      <tags>
        <tag>javaÂü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÂ≠óÁ¨¶‰∏≤Ê†∏ÂøÉ‰∏ÄÁΩëÊâìÂ∞Ω]]></title>
    <url>%2F2019%2F01%2F23%2Fjava-basic%2Fjava%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%B8%E5%BF%83%E4%B8%80%E7%BD%91%E6%89%93%E5%B0%BD%2F</url>
    <content type="text"><![CDATA[ÂØπÂ≠óÁ¨¶‰∏≤‰∏≠ÊúÄÊ†∏ÂøÉÁöÑÁÇπÔºöÂØπË±°ÂàõÂª∫ÂíåÂä®ÊÄÅÂä†ÂÖ•Â∏∏ÈáèÊ±†Ëøô‰∫õÁÇπËøõË°åÊ∑±ÂÖ•ÂàÜÊûê„ÄÇ ÊØîÂ¶ÇÊúâ‰∏§‰∏™Èù¢ËØïÈ¢òÔºö Q1ÔºöString s = new String(&quot;abc&quot;); ÂÆö‰πâ‰∫ÜÂá†‰∏™ÂØπË±°„ÄÇ Q2ÔºöÂ¶Ç‰ΩïÁêÜËß£StringÁöÑinternÊñπÊ≥ïÔºü A1ÔºöÂØπ‰∫éÈÄöËøá new ‰∫ßÁîüÁöÑÂØπË±°Ôºå‰ºöÂÖàÂéªÂ∏∏ÈáèÊ±†Ê£ÄÊü•ÊúâÊ≤°Êúâ ‚Äúabc‚ÄùÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂÖàÂú®Â∏∏ÈáèÊ±†ÂàõÂª∫‰∏Ä‰∏™ ‚Äúabc‚Äù ÂØπË±°ÔºåÁÑ∂ÂêéÂú®Â†Ü‰∏≠ÂàõÂª∫‰∏Ä‰∏™Â∏∏ÈáèÊ±†‰∏≠Ê≠§ ‚Äúabc‚Äù ÂØπË±°ÁöÑÊã∑Ë¥ùÂØπË±°„ÄÇÊâÄ‰ª•Á≠îÊ°àÊòØÔºö‰∏Ä‰∏™Êàñ‰∏§‰∏™„ÄÇÂ¶ÇÊûúÂ∏∏ÈáèÊ±†‰∏≠ÂéüÊù•Ê≤°Êúâ ‚Äùabc‚Äù, Â∞±ÊòØ‰∏§‰∏™„ÄÇÂ¶ÇÊûúÂéüÊù•ÁöÑÂ∏∏ÈáèÊ±†‰∏≠Â≠òÂú®‚Äúabc‚ÄùÊó∂ÔºåÂ∞±ÊòØ‰∏Ä‰∏™„ÄÇ A2ÔºöÂΩì‰∏Ä‰∏™StringÂÆû‰æãË∞ÉÁî®intern()ÊñπÊ≥ïÊó∂ÔºåJVM‰ºöÊü•ÊâæÂ∏∏ÈáèÊ±†‰∏≠ÊòØÂê¶ÊúâÁõ∏ÂêåUnicodeÁöÑÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºåÂ¶ÇÊûúÊúâÔºåÂàôËøîÂõûÂÖ∂ÁöÑÂºïÁî®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂàôÂú®Â∏∏ÈáèÊ±†‰∏≠Â¢ûÂä†‰∏Ä‰∏™UnicodeÁ≠â‰∫éstrÁöÑÂ≠óÁ¨¶‰∏≤Âπ∂ËøîÂõûÂÆÉÁöÑÂºïÁî®Ôºõ Â≠óÈù¢ÈáèÂíåËøêË°åÊó∂Â∏∏ÈáèÊ±† JVM‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÂíåÂáèÂ∞ëÂÜÖÂ≠òÂºÄÈîÄÔºåÂú®ÂÆû‰æãÂåñÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÁöÑÊó∂ÂÄôËøõË°å‰∫Ü‰∏Ä‰∫õ‰ºòÂåñ„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëÂú®JVM‰∏≠ÂàõÂª∫ÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÊï∞ÈáèÔºåÂ≠óÁ¨¶‰∏≤Á±ªÁª¥Êä§‰∫Ü‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†„ÄÇ Âú®JVMËøêË°åÊó∂Âå∫ÂüüÁöÑÊñπÊ≥ïÂå∫‰∏≠ÔºåÊúâ‰∏ÄÂùóÂå∫ÂüüÊòØËøêË°åÊó∂Â∏∏ÈáèÊ±†Ôºå‰∏ªË¶ÅÁî®Êù•Â≠òÂÇ®ÁºñËØëÊúüÁîüÊàêÁöÑÂêÑÁßçÂ≠óÈù¢ÈáèÂíåÁ¨¶Âè∑ÂºïÁî®„ÄÇ ‰∫ÜËß£ËøáJVMÂ∞±‰ºöÁü•ÈÅìÔºåÂú®java‰ª£Á†ÅË¢´javacÁºñËØë‰πãÂêéÔºåÊñá‰ª∂ÁªìÊûÑ‰∏≠ÊòØÂåÖÂê´‰∏ÄÈÉ®ÂàÜConstant poolÁöÑ„ÄÇÊØîÂ¶Ç‰ª•‰∏ã‰ª£Á†ÅÔºö 123public static void main(String[] args) &#123; String s = "abc";&#125; ÁªèËøáÁºñËØëÂêéÔºåÂ∏∏ÈáèÊ±†ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1234567891011Constant pool: #1 = Methodref #4.#20 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = String #21 // abc #3 = Class #22 // StringDemo #4 = Class #23 // java/lang/Object ... #16 = Utf8 s .. #21 = Utf8 abc #22 = Utf8 StringDemo #23 = Utf8 java/lang/Object ‰∏äÈù¢ÁöÑClassÊñá‰ª∂‰∏≠ÁöÑÂ∏∏ÈáèÊ±†‰∏≠ÔºåÊØîËæÉÈáçË¶ÅÁöÑÂá†‰∏™ÂÜÖÂÆπÔºö 123#16 = Utf8 s#21 = Utf8 abc#22 = Utf8 StringDemo ‰∏äÈù¢Âá†‰∏™Â∏∏Èáè‰∏≠ÔºåsÂ∞±ÊòØÂâçÈù¢ÊèêÂà∞ÁöÑÁ¨¶Âè∑ÂºïÁî®ÔºåËÄåabcÂ∞±ÊòØÂâçÈù¢ÊèêÂà∞ÁöÑÂ≠óÈù¢Èáè„ÄÇËÄåClassÊñá‰ª∂‰∏≠ÁöÑÂ∏∏ÈáèÊ±†ÈÉ®ÂàÜÁöÑÂÜÖÂÆπÔºå‰ºöÂú®ËøêË°åÊúüË¢´ËøêË°åÊó∂Â∏∏ÈáèÊ±†Âä†ËΩΩËøõÂéª„ÄÇ new StringÂàõÂª∫‰∫ÜÂá†‰∏™ÂØπË±° ‰∏ãÈù¢ÔºåÊàë‰ª¨ÂèØ‰ª•Êù•ÂàÜÊûê‰∏ãString s = new String(&quot;abc&quot;);ÂàõÂª∫ÂØπË±°ÊÉÖÂÜµ‰∫Ü„ÄÇ ËøôÊÆµ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÁöÑÊòØÔºåÂú®ÁºñËØëÊúüÔºåÁ¨¶Âè∑ÂºïÁî®sÂíåÂ≠óÈù¢Èáèabc‰ºöË¢´Âä†ÂÖ•Âà∞ClassÊñá‰ª∂ÁöÑÂ∏∏ÈáèÊ±†‰∏≠„ÄÇÁî±‰∫éÊòØnewÁöÑÊñπÂºèÔºåÂú®Á±ªÂä†ËΩΩÊúüÈó¥ÔºåÂÖàÂéªÂ∏∏ÈáèÊ±†Ê£ÄÊü•ÊúâÊ≤°Êúâ ‚Äúabc‚ÄùÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂÖàÂú®Â∏∏ÈáèÊ±†ÂàõÂª∫‰∏Ä‰∏™ ‚Äúabc‚Äù ÂØπË±°„ÄÇ Âú®ËøêË°åÊúüÈó¥ÔºåÂú®Â†Ü‰∏≠ÂàõÂª∫‰∏Ä‰∏™Â∏∏ÈáèÊ±†‰∏≠Ê≠§ ‚Äúabc‚Äù ÂØπË±°ÁöÑÊã∑Ë¥ùÂØπË±°„ÄÇ ËøêË°åÊó∂Â∏∏ÈáèÊ±†ÁöÑÂä®ÊÄÅÊâ©Â±ï ÁºñËØëÊúüÁîüÊàêÁöÑÂêÑÁßçÂ≠óÈù¢ÈáèÂíåÁ¨¶Âè∑ÂºïÁî®ÊòØËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑ‰∏ÄÈÉ®ÂàÜÊù•Ê∫êÔºå‰ΩÜÊòØÂπ∂‰∏çÊòØÂÖ®ÈÉ®„ÄÇÈÇ£‰πàËøòÊúâ‰∏ÄÁßçÊÉÖÂÜµÔºåÂèØ‰ª•Âú®ËøêË°åÊúüÂÉèËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠Â¢ûÂä†Â∏∏Èáè„ÄÇÈÇ£Â∞±ÊòØStringÁöÑinternÊñπÊ≥ï„ÄÇ ÂΩì‰∏Ä‰∏™StringÂÆû‰æãË∞ÉÁî®intern()ÊñπÊ≥ïÊó∂ÔºåJVM‰ºöÊü•ÊâæÂ∏∏ÈáèÊ±†‰∏≠ÊòØÂê¶ÊúâÁõ∏ÂêåUnicodeÁöÑÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºåÂ¶ÇÊûúÊúâÔºåÂàôËøîÂõûÂÖ∂ÁöÑÂºïÁî®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂàôÂú®Â∏∏ÈáèÊ±†‰∏≠Â¢ûÂä†‰∏Ä‰∏™UnicodeÁ≠â‰∫éstrÁöÑÂ≠óÁ¨¶‰∏≤Âπ∂ËøîÂõûÂÆÉÁöÑÂºïÁî®Ôºõ intern()Êúâ‰∏§‰∏™‰ΩúÁî®ÔºåÁ¨¨‰∏Ä‰∏™ÊòØÂ∞ÜÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÈáèÊîæÂÖ•Â∏∏ÈáèÊ±†ÔºàÂ¶ÇÊûúÊ±†Ê≤°ÊúâÁöÑËØùÔºâÔºåÁ¨¨‰∫å‰∏™ÊòØËøîÂõûËøô‰∏™Â∏∏ÈáèÁöÑÂºïÁî®„ÄÇ ‰∏Ä‰∏™‰æãÂ≠êÔºö 123456789String s1 = "hello world";String s2 = new String("hello world");System.out.println("s==s1:"+(s==s1));String s3 = new String("hello world").intern();System.out.println("s==s2:"+(s==s2)); ËøêË°åÁªìÊûúÊòØÔºö 12s1==s2:falses2==s3:true ‰Ω†ÂèØ‰ª•ÁÆÄÂçïÁöÑÁêÜËß£‰∏∫String s1 = &quot;hello world&quot;;ÂíåString s3 = new String(&quot;hello world&quot;).intern();ÂÅöÁöÑ‰∫ãÊÉÖÊòØ‰∏ÄÊ†∑ÁöÑÔºà‰ΩÜÂÆûÈôÖÊúâ‰∫õÂå∫Âà´ÔºåËøôÈáåÊöÇ‰∏çÂ±ïÂºÄÔºâ„ÄÇÈÉΩÊòØÂÆö‰πâ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂØπË±°ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Â≠óÁ¨¶‰∏≤Â≠óÈù¢Èáè‰øùÂ≠òÂú®Â∏∏ÈáèÊ±†‰∏≠ÔºåÂπ∂ÊääËøô‰∏™Â≠óÈù¢ÈáèÁöÑÂºïÁî®ËøîÂõûÁªôÂÆö‰πâÂ•ΩÁöÑÂØπË±°ÂºïÁî®„ÄÇ ÂØπ‰∫éString s3 = new String(&quot;hello world&quot;).intern();ÔºåÂú®‰∏çË∞ÉinternÊÉÖÂÜµÔºås3ÊåáÂêëÁöÑÊòØJVMÂú®Â†Ü‰∏≠ÂàõÂª∫ÁöÑÈÇ£‰∏™ÂØπË±°ÁöÑÂºïÁî®ÁöÑÔºàÂ¶Çs2Ôºâ„ÄÇ‰ΩÜÊòØÂΩìÊâßË°å‰∫ÜinternÊñπÊ≥ïÊó∂Ôºås3Â∞ÜÊåáÂêëÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†‰∏≠ÁöÑÈÇ£‰∏™Â≠óÁ¨¶‰∏≤Â∏∏Èáè„ÄÇ Áî±‰∫és1Âíås3ÈÉΩÊòØÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†‰∏≠ÁöÑÂ≠óÈù¢ÈáèÁöÑÂºïÁî®ÔºåÊâÄ‰ª•s1==s3„ÄÇ‰ΩÜÊòØÔºås2ÁöÑÂºïÁî®ÊòØÂ†Ü‰∏≠ÁöÑÂØπË±°ÔºåÊâÄ‰ª•s2!=s1„ÄÇ internÁöÑÊ≠£Á°ÆÁî®Ê≥ï ‰∏çÁü•ÈÅìÔºå‰Ω†ÊúâÊ≤°ÊúâÂèëÁé∞ÔºåÂú®String s3 = new String(&quot;abc&quot;).intern();‰∏≠ÔºåÂÖ∂ÂÆûinternÊòØÂ§ö‰ΩôÁöÑÔºü Âõ†‰∏∫Â∞±ÁÆó‰∏çÁî®internÔºå‚Äúabc&quot;‰Ωú‰∏∫‰∏Ä‰∏™Â≠óÈù¢Èáè‰πü‰ºöË¢´Âä†ËΩΩÂà∞ClassÊñá‰ª∂ÁöÑÂ∏∏ÈáèÊ±†‚Äù&quot;ÔºåËøõËÄåÂä†ÂÖ•Âà∞ËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠Ôºå‰∏∫Âï•ËøòË¶ÅÂ§öÊ≠§‰∏Ä‰∏æÂë¢ÔºüÂà∞Â∫ï‰ªÄ‰πàÂú∫ÊôØ‰∏ãÊâç‰ºöÁî®Âà∞internÂë¢? Âú®Ëß£ÈáäËøô‰∏™‰πãÂâçÔºåÊàë‰ª¨ÂÖàÊù•Áúã‰∏ã‰ª•‰∏ã‰ª£Á†ÅÔºö 1234String s1 = "hello";String s2 = "world";String s3 = s1 + s2;String s4 = "hello" + "world"; Âú®ÁªèËøáÂèçÁºñËØëÂêéÔºåÂæóÂà∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234String s1 = "hello";String s2 = "world";String s3 = (new StringBuilder()).append(s1).append(s2).toString();String s4 = "helloworld"; ËøôÂ∞±ÊòØÈòøÈáåÂ∑¥Â∑¥ÊñáÊ°£Èáå‰∏∫‰ªÄ‰πàËßÑÂÆöÂæ™ÁéØÊãºÊé•Â≠óÁ¨¶‰∏≤‰∏çÂáÜ‰ΩøÁî®&quot;+&quot;ËÄåÂøÖÈ°ª‰ΩøÁî®StringBuilderÔºåÂõ†‰∏∫ÂèçÁºñËØëÂá∫ÁöÑÂ≠óËäÇÁ†ÅÊñá‰ª∂ÊòæÁ§∫ÊØèÊ¨°Âæ™ÁéØÈÉΩ‰ºö new Âá∫‰∏Ä‰∏™ StringBuilder ÂØπË±°ÔºåÁÑ∂ÂêéËøõË°åappend Êìç‰ΩúÔºåÊúÄÂêéÈÄöËøá toString ÊñπÊ≥ïËøîÂõû String ÂØπË±°ÔºåÈÄ†ÊàêÂÜÖÂ≠òËµÑÊ∫êÊµ™Ë¥π„ÄÇ ‰∏çÊÅ∞ÂΩìÁöÑÊñπÂºèÂΩ¢Â¶ÇÔºö 1234String str = "start";for (int i = 0; i &lt; 100; i++) &#123; str = str + "hello";&#125; Â•Ω‰∫ÜÔºåË®ÄÂΩíÊ≠£‰º†ÔºåÂèØ‰ª•ÂèëÁé∞ÔºåÂêåÊ†∑ÊòØÂ≠óÁ¨¶‰∏≤ÊãºÊé•Ôºås3Âíås4Âú®ÁªèËøáÁºñËØëÂô®ÁºñËØëÂêéÁöÑÂÆûÁé∞ÊñπÂºèÂπ∂‰∏ç‰∏ÄÊ†∑„ÄÇs3Ë¢´ËΩ¨ÂåñÊàêStringBuilderÂèäappendÔºåËÄås4Ë¢´Áõ¥Êé•ÊãºÊé•ÊàêÊñ∞ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ Â¶ÇÊûú‰Ω†ÊÑüÂÖ¥Ë∂£Ôºå‰Ω†ËøòËÉΩÂèëÁé∞ÔºåString s4 = s1 + s2; ÁªèËøáÁºñËØë‰πãÂêéÔºåÂ∏∏ÈáèÊ±†‰∏≠ÊòØÊúâ‰∏§‰∏™Â≠óÁ¨¶‰∏≤Â∏∏ÈáèÁöÑÂàÜÂà´ÊòØ hello„ÄÅworldÔºàÂÖ∂ÂÆûhelloÂíåworldÊòØString s1 = &quot;hello&quot;;ÂíåString s2 = &quot;world&quot;;ÂÆö‰πâÂá∫Êù•ÁöÑÔºâÔºåÊãºÊé•ÁªìÊûúhelloworldÂπ∂‰∏çÂú®Â∏∏ÈáèÊ±†‰∏≠„ÄÇ Â¶ÇÊûú‰ª£Á†ÅÂè™ÊúâString s4 = &quot;hello&quot; + &quot;world&quot;;ÔºåÈÇ£‰πàÂ∏∏ÈáèÊ±†‰∏≠Â∞ÜÂè™ÊúâhelloworldËÄåÊ≤°ÊúâhelloÂíå world„ÄÇ Á©∂ÂÖ∂ÂéüÂõ†ÔºåÊòØÂõ†‰∏∫Â∏∏ÈáèÊ±†Ë¶Å‰øùÂ≠òÁöÑÊòØÂ∑≤Á°ÆÂÆöÁöÑÂ≠óÈù¢ÈáèÂÄº„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂØπ‰∫éÂ≠óÁ¨¶‰∏≤ÁöÑÊãºÊé•ÔºåÁ∫ØÂ≠óÈù¢ÈáèÂíåÂ≠óÈù¢ÈáèÁöÑÊãºÊé•Ôºå‰ºöÊääÊãºÊé•ÁªìÊûú‰Ωú‰∏∫Â∏∏Èáè‰øùÂ≠òÂà∞Â≠óÁ¨¶‰∏≤„ÄÇ Â¶ÇÊûúÂú®Â≠óÁ¨¶‰∏≤ÊãºÊé•‰∏≠ÔºåÊúâ‰∏Ä‰∏™ÂèÇÊï∞ÊòØÈùûÂ≠óÈù¢ÈáèÔºåËÄåÊòØ‰∏Ä‰∏™ÂèòÈáèÁöÑËØùÔºåÊï¥‰∏™ÊãºÊé•Êìç‰Ωú‰ºöË¢´ÁºñËØëÊàêStringBuilder.appendÔºåËøôÁßçÊÉÖÂÜµÁºñËØëÂô®ÊòØÊó†Ê≥ïÁü•ÈÅìÂÖ∂Á°ÆÂÆöÂÄºÁöÑ„ÄÇÂè™ÊúâÂú®ËøêË°åÊúüÊâçËÉΩÁ°ÆÂÆö„ÄÇ ÈÇ£‰πàÔºåÊúâ‰∫ÜËøô‰∏™ÁâπÊÄß‰∫ÜÔºåinternÂ∞±ÊúâÁî®Ê≠¶‰πãÂú∞‰∫Ü„ÄÇÈÇ£Â∞±ÊòØÂæàÂ§öÊó∂ÂÄôÔºåÊàë‰ª¨Âú®Á®ãÂ∫è‰∏≠Áî®Âà∞ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØÂè™ÊúâÂú®ËøêË°åÊúüÊâçËÉΩÁ°ÆÂÆöÁöÑÔºåÂú®ÁºñËØëÊúüÊòØÊó†Ê≥ïÁ°ÆÂÆöÁöÑÔºåÈÇ£‰πà‰πüÂ∞±Ê≤°ÂäûÊ≥ïÂú®ÁºñËØëÊúüË¢´Âä†ÂÖ•Âà∞Â∏∏ÈáèÊ±†‰∏≠„ÄÇ ËøôÊó∂ÂÄôÔºåÂØπ‰∫éÈÇ£ÁßçÂèØËÉΩÁªèÂ∏∏‰ΩøÁî®ÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰ΩøÁî®internËøõË°åÂÆö‰πâÔºåÊØèÊ¨°JVMËøêË°åÂà∞ËøôÊÆµ‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÁõ¥Êé•ÊääÂ∏∏ÈáèÊ±†‰∏≠ËØ•Â≠óÈù¢ÂÄºÁöÑÂºïÁî®ËøîÂõûÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂáèÂ∞ëÂ§ßÈáèÂ≠óÁ¨¶‰∏≤ÂØπË±°ÁöÑÂàõÂª∫‰∫Ü„ÄÇ ÊÄªÁªì Á¨¨‰∏ÄÁßçÊÉÖÂÜµÔºö 12String str1 = "abc"; System.out.println(str1 == "abc"); Ê†à‰∏≠ÂºÄËæü‰∏ÄÂùóÁ©∫Èó¥Â≠òÊîæÂºïÁî®str1Ôºõ StringÊ±†‰∏≠ÂºÄËæü‰∏ÄÂùóÁ©∫Èó¥ÔºåÂ≠òÊîæStringÂ∏∏Èáè&quot;abc&quot;Ôºõ ÂºïÁî®str1ÊåáÂêëÊ±†‰∏≠StringÂ∏∏Èáè&quot;abc&quot;Ôºõ str1ÊâÄÊåá‰ª£ÁöÑÂú∞ÂùÄÂç≥Â∏∏Èáè&quot;abc&quot;ÊâÄÂú®Âú∞ÂùÄÔºåËæìÂá∫‰∏∫true Á¨¨‰∫åÁßçÊÉÖÂÜµÔºö 12String str2 = new String("abc"); System.out.println(str2 == "abc"); Ê†à‰∏≠ÂºÄËæü‰∏ÄÂùóÁ©∫Èó¥Â≠òÊîæÂºïÁî®str2Ôºõ Â†Ü‰∏≠ÂºÄËæü‰∏ÄÂùóÁ©∫Èó¥Â≠òÊîæ‰∏Ä‰∏™Êñ∞Âª∫ÁöÑStringÂØπË±°&quot;abc&quot;Ôºõ ÂºïÁî®str2ÊåáÂêëÂ†Ü‰∏≠ÁöÑÊñ∞Âª∫ÁöÑStringÂØπË±°&quot;abc&quot;Ôºõ str2ÊâÄÊåá‰ª£ÁöÑÂØπË±°Âú∞ÂùÄ‰∏∫Â†Ü‰∏≠Âú∞ÂùÄÔºåËÄåÂ∏∏Èáè&quot;abc&quot;Âú∞ÂùÄÂú®Ê±†‰∏≠ÔºåËæìÂá∫‰∏∫falseÔºõ Á¨¨‰∏â„ÄÅÂõõÁßçÊÉÖÂÜµ 1234567891011121314//Ôºà3ÔºâString str1 = "a"ÔºõString str2 = "b"ÔºõString str3 = str1 + "b"Ôºõ//str1 Âíå str2 ÊòØÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºåÊâÄ‰ª•Âú®ÁºñËØëÊúüÂ∞±Á°ÆÂÆö‰∫Ü„ÄÇ//str3 ‰∏≠Êúâ‰∏™ str1 ÊòØÂºïÁî®ÔºåÊâÄ‰ª•‰∏ç‰ºöÂú®ÁºñËØëÊúüÁ°ÆÂÆö„ÄÇ//ÂèàÂõ†‰∏∫StringÊòØ final Á±ªÂûãÁöÑÔºåÊâÄ‰ª•Âú® str1 + "b" ÁöÑÊó∂ÂÄôÂÆûÈôÖ‰∏äÊòØÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°ÔºåÂú®ÊääÊñ∞ÂØπË±°ÁöÑÂºïÁî®‰º†Áªôstr3„ÄÇ//Ôºà4Ôºâfinal String str1 = "a"ÔºõString str2 = "b"ÔºõString str3 = str1 + "b"Ôºõ//ËøôÈáåÂíå(3)ÁöÑ‰∏çÂêåÂ∞±ÊòØÁªô str1 Âä†‰∏ä‰∫Ü‰∏Ä‰∏™finalÔºåËøôÊ†∑str1Â∞±ÂèòÊàê‰∫Ü‰∏Ä‰∏™Â∏∏Èáè„ÄÇ//ËøôÊ†∑ str3 Â∞±ÂèØ‰ª•Âú®ÁºñËØëÊúü‰∏≠Â∞±Á°ÆÂÆö‰∫Ü ËøôÈáåÁöÑÁªÜËäÇÂú®‰∏äÈù¢Â∑≤ÁªèËØ¶ÁªÜËØ¥Êòé‰∫Ü„ÄÇ Á¨¨‰∫îÁßçÊÉÖÂÜµ 1234String str1 = "ab"ÔºõString str2 = new String("ab");System.out.println(str1== str2);//falseSystem.out.println(str2.intern() == str1);//true Êï¥ÁêÜËá™Ôºö ÊàëÁªà‰∫éÊêûÊ∏ÖÊ•ö‰∫ÜÂíåStringÊúâÂÖ≥ÁöÑÈÇ£ÁÇπ‰∫ãÂÑø https://www.jianshu.com/p/2624036c9daa]]></content>
      <tags>
        <tag>javaÂü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÂ≠óÁ¨¶‰∏≤]]></title>
    <url>%2F2019%2F01%2F23%2Fjava-basic%2Fjava%E5%AD%97%E7%AC%A6%E4%B8%B2%2F</url>
    <content type="text"><![CDATA[ÂÖ≥‰∫éjavaÂ≠óÁ¨¶‰∏≤‰∏çÂèØÂèòÁâπÊÄßÁöÑÊ∑±ÂÖ•ÁêÜËß£„ÄÇ ‰ªÄ‰πàÊòØ‰∏çÂèØÂèòÂØπË±°Ôºü ‰ºóÊâÄÂë®Áü•Ôºå Âú®Java‰∏≠Ôºå StringÁ±ªÊòØ‰∏çÂèØÂèòÁöÑ„ÄÇÈÇ£‰πàÂà∞Â∫ï‰ªÄ‰πàÊòØ‰∏çÂèØÂèòÁöÑÂØπË±°Âë¢Ôºü ÂèØ‰ª•ËøôÊ†∑ËÆ§‰∏∫ÔºöÂ¶ÇÊûú‰∏Ä‰∏™ÂØπË±°ÔºåÂú®ÂÆÉÂàõÂª∫ÂÆåÊàê‰πãÂêéÔºå‰∏çËÉΩÂÜçÊîπÂèòÂÆÉÁöÑÁä∂ÊÄÅÔºåÈÇ£‰πàËøô‰∏™ÂØπË±°Â∞±ÊòØ‰∏çÂèØÂèòÁöÑ„ÄÇ‰∏çËÉΩÊîπÂèòÁä∂ÊÄÅÁöÑÊÑèÊÄùÊòØÔºå‰∏çËÉΩÊîπÂèòÂØπË±°ÂÜÖÁöÑÊàêÂëòÂèòÈáèÔºåÂåÖÊã¨Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÂÄº‰∏çËÉΩÊîπÂèòÔºåÂºïÁî®Á±ªÂûãÁöÑÂèòÈáè‰∏çËÉΩÊåáÂêëÂÖ∂‰ªñÁöÑÂØπË±°ÔºåÂºïÁî®Á±ªÂûãÊåáÂêëÁöÑÂØπË±°ÁöÑÁä∂ÊÄÅ‰πü‰∏çËÉΩÊîπÂèò„ÄÇ Âå∫ÂàÜÂØπË±°ÂíåÂØπË±°ÁöÑÂºïÁî® ÂØπ‰∫éJavaÂàùÂ≠¶ËÄÖÔºå ÂØπ‰∫éStringÊòØ‰∏çÂèØÂèòÂØπË±°ÊÄªÊòØÂ≠òÊúâÁñëÊÉë„ÄÇÁúã‰∏ãÈù¢‰ª£Á†ÅÔºö 12345String s = "ABCabc"; System.out.println("s = " + s); s = "123456"; System.out.println("s = " + s); ÊâìÂç∞ÁªìÊûú: 12s = ABCabcs = 123456 È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™ String ÂØπË±° s ÔºåÁÑ∂ÂêéËÆ© s ÁöÑÂÄº‰∏∫ ABCabc Ôºå ÁÑ∂ÂêéÂèàËÆ© s ÁöÑÂÄº‰∏∫ 123456 „ÄÇ ‰ªéÊâìÂç∞ÁªìÊûúÂèØ‰ª•ÁúãÂá∫Ôºås ÁöÑÂÄºÁ°ÆÂÆûÊîπÂèò‰∫Ü„ÄÇÈÇ£‰πàÊÄé‰πàËøòËØ¥ String ÂØπË±°ÊòØ‰∏çÂèØÂèòÁöÑÂë¢Ôºü ÂÖ∂ÂÆûËøôÈáåÂ≠òÂú®‰∏Ä‰∏™ËØØÂå∫ÔºösÂè™ÊòØ‰∏Ä‰∏™StringÂØπË±°ÁöÑÂºïÁî®ÔºåÂπ∂‰∏çÊòØÂØπË±°Êú¨Ë∫´„ÄÇ ÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠ÊòØ‰∏ÄÂùóÂÜÖÂ≠òÂå∫ÔºåÊàêÂëòÂèòÈáèË∂äÂ§öÔºåËøôÂùóÂÜÖÂ≠òÂå∫Âç†ÁöÑÁ©∫Èó¥Ë∂äÂ§ß„ÄÇ ÂºïÁî®Âè™ÊòØ‰∏Ä‰∏™4Â≠óËäÇÁöÑÊï∞ÊçÆÔºåÈáåÈù¢Â≠òÊîæ‰∫ÜÂÆÉÊâÄÊåáÂêëÁöÑÂØπË±°ÁöÑÂú∞ÂùÄÔºåÈÄöËøáËøô‰∏™Âú∞ÂùÄÂèØ‰ª•ËÆøÈóÆÂØπË±°„ÄÇ ‰πüÂ∞±ÊòØËØ¥Ôºås Âè™ÊòØ‰∏Ä‰∏™ÂºïÁî®ÔºåÂÆÉÊåáÂêë‰∫Ü‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂØπË±°ÔºåÂΩì s=‚Äú123456‚Äù; ËøôÂè•‰ª£Á†ÅÊâßË°åËøá‰πãÂêéÔºåÂèàÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°‚Äú123456‚ÄùÔºå ËÄåÂºïÁî®sÈáçÊñ∞ÊåáÂêë‰∫ÜËøô‰∏™Êñ∞ÁöÑÂØπË±°ÔºåÂéüÊù•ÁöÑÂØπË±°‚ÄúABCabc‚ÄùËøòÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÂú®ÔºåÂπ∂Ê≤°ÊúâÊîπÂèò„ÄÇÂÜÖÂ≠òÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ‰∏∫‰ªÄ‰πàStringÂØπË±°ÊòØ‰∏çÂèØÂèòÁöÑÔºü Ë¶ÅÁêÜËß£ String ÁöÑ‰∏çÂèØÂèòÊÄßÔºåÈ¶ñÂÖàÁúã‰∏Ä‰∏ã String Á±ª‰∏≠ÈÉΩÊúâÂì™‰∫õÊàêÂëòÂèòÈáè„ÄÇ Âú®JDK1.6‰∏≠ÔºåString ÁöÑÊàêÂëòÂèòÈáèÊúâ‰ª•‰∏ãÂá†‰∏™Ôºö 1234567891011121314public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123; /** The value is used for character storage. */ private final char value[]; /** The offset is the first index of the storage that is used. */ private final int offset; /** The count is the number of characters in the String. */ private final int count; /** Cache the hash code for the string */ private int hash; // Default to 0 Âú®JDK1.7Âíå1.8‰∏≠ÔºåString Á±ªÂÅö‰∫Ü‰∏Ä‰∫õÊîπÂä®Ôºå‰∏ªË¶ÅÊòØÊîπÂèò‰∫ÜsubstringÊñπÊ≥ïÊâßË°åÊó∂ÁöÑË°å‰∏∫ÔºåËøôÂíåÊú¨ÊñáÁöÑ‰∏ªÈ¢ò‰∏çÁõ∏ÂÖ≥„ÄÇJDK1.7‰∏≠ String Á±ªÁöÑ‰∏ªË¶ÅÊàêÂëòÂèòÈáèÂ∞±Ââ©‰∏ã‰∫Ü‰∏§‰∏™Ôºö 1234567public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123; /** The value is used for character storage. */ private final char value[]; /** Cache the hash code for the string */ private int hash; // Default to 0 Áî±‰ª•‰∏äÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫Ôºå Âú®Java‰∏≠ String Á±ªÂÖ∂ÂÆûÂ∞±ÊòØÂØπÂ≠óÁ¨¶Êï∞ÁªÑÁöÑÂ∞ÅË£Ö„ÄÇ JDK6‰∏≠Ôºå valueÊòØStringÂ∞ÅË£ÖÁöÑÊï∞ÁªÑÔºåoffsetÊòØStringÂú®Ëøô‰∏™valueÊï∞ÁªÑ‰∏≠ÁöÑËµ∑Âßã‰ΩçÁΩÆÔºåcountÊòØStringÊâÄÂç†ÁöÑÂ≠óÁ¨¶ÁöÑ‰∏™Êï∞„ÄÇ Âú®JDK7‰∏≠ÔºåÂè™Êúâ‰∏Ä‰∏™valueÂèòÈáèÔºå‰πüÂ∞±ÊòØvalue‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶ÈÉΩÊòØÂ±û‰∫éStringËøô‰∏™ÂØπË±°ÁöÑ„ÄÇËøô‰∏™ÊîπÂèò‰∏çÂΩ±ÂìçÊú¨ÊñáÁöÑËÆ®ËÆ∫„ÄÇ Èô§Ê≠§‰πãÂ§ñËøòÊúâ‰∏Ä‰∏™hashÊàêÂëòÂèòÈáèÔºåÊòØËØ• String ÂØπË±°ÁöÑÂìàÂ∏åÂÄºÁöÑÁºìÂ≠òÔºåËøô‰∏™ÊàêÂëòÂèòÈáè‰πüÂíåÊú¨ÊñáÁöÑËÆ®ËÆ∫Êó†ÂÖ≥„ÄÇÂú®Java‰∏≠ÔºåÊï∞ÁªÑ‰πüÊòØÂØπË±°„ÄÇ ÊâÄ‰ª•value‰πüÂè™ÊòØ‰∏Ä‰∏™ÂºïÁî®ÔºåÂÆÉÊåáÂêë‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÊï∞ÁªÑÂØπË±°„ÄÇÂÖ∂ÂÆûÊâßË°å‰∫Ü 1String s = ‚ÄúABCabc"; ËøôÂè•‰ª£Á†Å‰πãÂêéÔºåÁúüÊ≠£ÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÂ∫îËØ•ÊòØËøôÊ†∑ÁöÑÔºö valueÔºåoffsetÂíåcountËøô‰∏â‰∏™ÂèòÈáèÈÉΩÊòØprivateÁöÑÔºåÂπ∂‰∏îÊ≤°ÊúâÊèê‰æõsetValueÔºå setOffsetÂíåsetCountÁ≠âÂÖ¨ÂÖ±ÊñπÊ≥ïÊù•‰øÆÊîπËøô‰∫õÂÄºÔºåÊâÄ‰ª•Âú®StringÁ±ªÁöÑÂ§ñÈÉ®Êó†Ê≥ï‰øÆÊîπString„ÄÇ‰πüÂ∞±ÊòØËØ¥‰∏ÄÊó¶ÂàùÂßãÂåñÂ∞±‰∏çËÉΩ‰øÆÊîπÔºå Âπ∂‰∏îÂú®StringÁ±ªÁöÑÂ§ñÈÉ®‰∏çËÉΩËÆøÈóÆËøô‰∏â‰∏™ÊàêÂëò„ÄÇ Ê≠§Â§ñÔºåvalueÔºåoffsetÂíåcountËøô‰∏â‰∏™ÂèòÈáèÈÉΩÊòØfinalÁöÑÔºå ‰πüÂ∞±ÊòØËØ¥Âú® String Á±ªÂÜÖÈÉ®Ôºå‰∏ÄÊó¶Ëøô‰∏â‰∏™ÂÄºÂàùÂßãÂåñ‰∫ÜÔºå ‰πü‰∏çËÉΩË¢´ÊîπÂèò„ÄÇÊâÄ‰ª•ÂèØ‰ª•ËÆ§‰∏∫ String ÂØπË±°ÊòØ‰∏çÂèØÂèòÁöÑ‰∫Ü„ÄÇ ÈÇ£‰πàÂú® String ‰∏≠ÔºåÊòéÊòéÂ≠òÂú®‰∏Ä‰∫õÊñπÊ≥ïÔºåË∞ÉÁî®‰ªñ‰ª¨ÂèØ‰ª•ÂæóÂà∞ÊîπÂèòÂêéÁöÑÂÄº„ÄÇËøô‰∫õÊñπÊ≥ïÂåÖÊã¨substringÔºå replaceÔºå replaceAllÔºå toLowerCaseÁ≠â„ÄÇ‰æãÂ¶ÇÂ¶Ç‰∏ã‰ª£Á†ÅÔºö 1234String a = "ABCabc"; System.out.println("a = " + a); //ABCabca = a.replace('A', 'a'); System.out.println("a = " + a); //aBCabc ÈÇ£‰πàaÁöÑÂÄºÁúã‰ººÊîπÂèò‰∫ÜÔºåÂÖ∂ÂÆû‰πüÊòØÂêåÊ†∑ÁöÑËØØÂå∫„ÄÇÂÜçÊ¨°ËØ¥ÊòéÔºå aÂè™ÊòØ‰∏Ä‰∏™ÂºïÁî®Ôºå ‰∏çÊòØÁúüÊ≠£ÁöÑÂ≠óÁ¨¶‰∏≤ÂØπË±°ÔºåÂú®Ë∞ÉÁî®a.replace('A', 'a')Êó∂Ôºå ÊñπÊ≥ïÂÜÖÈÉ®ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑStringÂØπË±°ÔºåÂπ∂ÊääËøô‰∏™ÂøÉÁöÑÂØπË±°ÈáçÊñ∞ËµãÁªô‰∫ÜÂºïÁî®a„ÄÇString‰∏≠replaceÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÂèØ‰ª•ËØ¥ÊòéÈóÆÈ¢òÔºö 1234567891011121314151617181920212223242526public String replace(char oldChar, char newChar) &#123; if (oldChar != newChar) &#123; int len = value.length; int i = -1; char[] val = value; /* avoid getfield opcode */ while (++i &lt; len) &#123; if (val[i] == oldChar) &#123; break; &#125; &#125; if (i &lt; len) &#123; char buf[] = new char[len]; for (int j = 0; j &lt; i; j++) &#123; buf[j] = val[j]; &#125; while (i &lt; len) &#123; char c = val[i]; buf[i] = (c == oldChar) ? newChar : c; i++; &#125; return new String(buf, true);//newÂá∫‰∫ÜÊñ∞ÁöÑStringÂØπË±° &#125; &#125; return this;&#125; StringÂØπË±°ÁúüÁöÑ‰∏çÂèØÂèòÂêóÔºü ‰ªé‰∏äÊñáÂèØÁü•StringÁöÑÊàêÂëòÂèòÈáèÊòØprivate final ÁöÑÔºå‰πüÂ∞±ÊòØÂàùÂßãÂåñ‰πãÂêé‰∏çÂèØÊîπÂèò„ÄÇÈÇ£‰πàÂú®ËøôÂá†‰∏™ÊàêÂëò‰∏≠Ôºå valueÊØîËæÉÁâπÊÆäÔºåÂõ†‰∏∫‰ªñÊòØ‰∏Ä‰∏™ÂºïÁî®ÂèòÈáèÔºåËÄå‰∏çÊòØÁúüÊ≠£ÁöÑÂØπË±°„ÄÇ valueÊòØfinal‰øÆÈ•∞ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥final‰∏çËÉΩÂÜçÊåáÂêëÂÖ∂‰ªñÊï∞ÁªÑÂØπË±°ÔºåÈÇ£‰πàÊàëËÉΩÊîπÂèòvalueÊåáÂêëÁöÑÊï∞ÁªÑÂêóÔºü ÊØîÂ¶ÇÂ∞ÜÊï∞ÁªÑ‰∏≠ÁöÑÊüê‰∏™‰ΩçÁΩÆ‰∏äÁöÑÂ≠óÁ¨¶Âèò‰∏∫‰∏ãÂàíÁ∫ø‚Äú_‚Äù„ÄÇ Ëá≥Â∞ëÂú®Êàë‰ª¨Ëá™Â∑±ÂÜôÁöÑÊôÆÈÄö‰ª£Á†Å‰∏≠‰∏çËÉΩÂ§üÂÅöÂà∞ÔºåÂõ†‰∏∫Êàë‰ª¨Ê†πÊú¨‰∏çËÉΩÂ§üËÆøÈóÆÂà∞Ëøô‰∏™valueÂºïÁî®ÔºåÊõ¥‰∏çËÉΩÈÄöËøáËøô‰∏™ÂºïÁî®Âéª‰øÆÊîπÊï∞ÁªÑ„ÄÇ ÈÇ£‰πàÁî®‰ªÄ‰πàÊñπÂºèÂèØ‰ª•ËÆøÈóÆÁßÅÊúâÊàêÂëòÂë¢Ôºü Ê≤°ÈîôÔºåÁî®ÂèçÂ∞ÑÔºå ÂèØ‰ª•ÂèçÂ∞ÑÂá∫StringÂØπË±°‰∏≠ÁöÑvalueÂ±ûÊÄßÔºå ËøõËÄåÊîπÂèòÈÄöËøáËé∑ÂæóÁöÑvalueÂºïÁî®ÊîπÂèòÊï∞ÁªÑÁöÑÁªìÊûÑ„ÄÇ‰∏ãÈù¢ÊòØÂÆû‰æã‰ª£Á†ÅÔºö 123456789101112131415161718192021public static void testReflection() throws Exception &#123; //ÂàõÂª∫Â≠óÁ¨¶‰∏≤"Hello World"Ôºå Âπ∂ËµãÁªôÂºïÁî®s String s = "Hello World"; System.out.println("s = " + s); //Hello World //Ëé∑ÂèñStringÁ±ª‰∏≠ÁöÑvalueÂ≠óÊÆµ Field valueFieldOfString = String.class.getDeclaredField("value"); //ÊîπÂèòvalueÂ±ûÊÄßÁöÑËÆøÈóÆÊùÉÈôê valueFieldOfString.setAccessible(true); //Ëé∑ÂèñsÂØπË±°‰∏äÁöÑvalueÂ±ûÊÄßÁöÑÂÄº char[] value = (char[]) valueFieldOfString.get(s); //ÊîπÂèòvalueÊâÄÂºïÁî®ÁöÑÊï∞ÁªÑ‰∏≠ÁöÑÁ¨¨5‰∏™Â≠óÁ¨¶ value[5] = '_'; System.out.println("s = " + s); //Hello_World &#125; Âú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåsÂßãÁªàÂºïÁî®ÁöÑÂêå‰∏Ä‰∏™ String ÂØπË±°Ôºå‰ΩÜÊòØÂÜçÂèçÂ∞ÑÂâçÂêéÔºåËøô‰∏™ String ÂØπË±°ÂèëÁîü‰∫ÜÂèòÂåñÔºå ‰πüÂ∞±ÊòØËØ¥ÔºåÈÄöËøáÂèçÂ∞ÑÊòØÂèØ‰ª•‰øÆÊîπÊâÄË∞ìÁöÑ‚Äú‰∏çÂèØÂèò‚ÄùÂØπË±°ÁöÑ„ÄÇ‰ΩÜÊòØ‰∏ÄËà¨Êàë‰ª¨‰∏çËøô‰πàÂÅö„ÄÇ Ëøô‰∏™ÂèçÂ∞ÑÁöÑÂÆû‰æãËøòÂèØ‰ª•ËØ¥Êòé‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂ¶ÇÊûú‰∏Ä‰∏™ÂØπË±°Ôºå‰ªñÁªÑÂêàÁöÑÂÖ∂‰ªñÂØπË±°ÁöÑÁä∂ÊÄÅÊòØÂèØ‰ª•ÊîπÂèòÁöÑÔºåÈÇ£‰πàËøô‰∏™ÂØπË±°ÂæàÂèØËÉΩ‰∏çÊòØ‰∏çÂèØÂèòÂØπË±°„ÄÇ‰æãÂ¶Ç‰∏Ä‰∏™CarÂØπË±°ÔºåÂÆÉÁªÑÂêà‰∫Ü‰∏Ä‰∏™WheelÂØπË±°ÔºåËôΩÁÑ∂Ëøô‰∏™WheelÂØπË±°Â£∞ÊòéÊàê‰∫Üprivate final ÁöÑÔºå‰ΩÜÊòØËøô‰∏™WheelÂØπË±°ÂÜÖÈÉ®ÁöÑÁä∂ÊÄÅÂèØ‰ª•ÊîπÂèòÔºå ÈÇ£‰πàÂ∞±‰∏çËÉΩÂæàÂ•ΩÁöÑ‰øùËØÅCarÂØπË±°‰∏çÂèØÂèò„ÄÇ ÂèÇËÄÉÔºö https://blog.csdn.net/zhangjg_blog/article/details/18319521]]></content>
      <tags>
        <tag>javaÂü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IntegerÊãÜÁÆ±ÂíåË£ÖÁÆ±]]></title>
    <url>%2F2019%2F01%2F23%2Fjava-basic%2FInteger%E6%8B%86%E7%AE%B1%E5%92%8C%E8%A3%85%E7%AE%B1%2F</url>
    <content type="text"><![CDATA[Áî±‰∫éÁ¨îËØïÁªèÂ∏∏ÈÅáÂà∞ÔºåÊâÄ‰ª•ËøôÈáåÊï¥ÁêÜ‰∏Ä‰∏ã„ÄÇÂ∞ÜIntegerËøô‰∏ÄÂùó‰∏ÄÁΩëÊâìÂ∞Ω„ÄÇ ÊãÜÁÆ±ÂíåË£ÖÁÆ± ËøôÈáå‰ª•Èù¢ËØïÁ¨îËØïÁªèÂ∏∏Âá∫Áé∞ÁöÑIntegerÁ±ªÂûã‰∏∫‰æãÔºåËØ∑Áúã‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public static void main(String[] args) &#123; /*Á¨¨‰∏ÄÁªÑ*/ Integer i = new Integer(128); Integer i2 = 128; System.out.println(i == i2); Integer i3 = new Integer(127); Integer i4 = 127; System.out.println(i3 == i4); /*Á¨¨‰∫åÁªÑ*/ Integer i5 = 128; Integer i6 = 128; System.out.println(i5 == i6); Integer i7 = 127; Integer i8 = 127; System.out.println(i7 == i8); /*Á¨¨‰∏âÁªÑ*/ Integer i9 = new Integer(128); int i10 = 128; System.out.println(i9 == i10); Integer i11 = new Integer(127); int i12 = 127; System.out.println(i11== i12); /*Á¨¨ÂõõÁªÑ*/ Integer i13 = new Integer(128); Integer i14 = Integer.valueOf(128); System.out.println(i13 == i14); Integer i15 = new Integer(127); Integer i16 = Integer.valueOf(127); System.out.println(i13 == i14); /*Á¨¨‰∫îÁªÑ*/ Integer i17 = Integer.valueOf(128); Integer i18 = 128; System.out.println(i17 == i18); Integer i19 = Integer.valueOf(127); Integer i20 = 127; System.out.println(i19 == i20);&#125; ÊâßË°åÁªìÊûú‰∏∫Ôºö 1234567891011121314falsefalsefalsetruetruetruefalsefalsefalsetrue ÁøªÂºÄÊ∫êÁ†Å(jdk8)ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™ÁßÅÊúâÁöÑÈùôÊÄÅÁ±ªÔºåÂè´ÂÅöÊï¥ÂΩ¢ÁºìÂ≠ò„ÄÇÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÁºìÂ≠òÊüê‰∫õÊï¥ÂûãÂÄºÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂÆÉÈªòËÆ§Â∞Ü-127-128‰πãÈó¥Êï∞Â≠óÂ∞ÅË£ÖÊàêÂØπË±°ÔºåÊîæËøõ‰∏Ä‰∏™Â∏∏ÈáèÊ±†‰∏≠Ôºå‰ª•ÂêéÂÆö‰πâÁ±ª‰ºº‰∫éInteger a = 1ÈáåÈù¢ÁöÑaÂ∞±ÂèØ‰ª•Áõ¥Êé•‰ªéËøô‰∏™Â∏∏ÈáèÊ±†‰∏≠ÂèñÂØπË±°Âç≥ÂèØÔºå‰∏çÈúÄË¶ÅÈáçÊñ∞new 123456789101112131415161718192021222324252627282930313233private static class IntegerCache &#123; static final int low = -128; static final int high; static final Integer cache[]; static &#123; // high value may be configured by property int h = 127; String integerCacheHighPropValue = sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high"); if (integerCacheHighPropValue != null) &#123; try &#123; int i = parseInt(integerCacheHighPropValue); i = Math.max(i, 127); // Maximum array size is Integer.MAX_VALUE h = Math.min(i, Integer.MAX_VALUE - (-low) -1); &#125; catch( NumberFormatException nfe) &#123; // If the property cannot be parsed into an int, ignore it. &#125; &#125; high = h; cache = new Integer[(high - low) + 1]; int j = low; for(int k = 0; k &lt; cache.length; k++) cache[k] = new Integer(j++); // range [-128, 127] must be interned (JLS7 5.1.7) assert IntegerCache.high &gt;= 127; &#125; private IntegerCache() &#123;&#125;&#125; ÂØπ‰∫éInteger.valueOf(): 12345public static Integer valueOf(int i) &#123; if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i);&#125; Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ôºå‰πüÊòØÂÖàÁúãÁúãÊòØ‰∏çÊòØÂú®-127Âà∞128‰πãÈó¥ÁöÑËåÉÂõ¥ÔºåÊòØÁöÑËØùÂ∞±‰ªé cache ‰∏≠ÂèñÂá∫Áõ∏Â∫îÁöÑ Integer ÂØπË±°Âç≥ÂèØ„ÄÇ Á¨¨‰∏ÄÁªÑ‰∏≠ Á¨¨‰∏ÄÁßçÊÉÖÂÜµÔºåi ÊòØÂàõÂª∫ÁöÑ‰∏Ä‰∏™IntegerÁöÑÂØπË±°ÔºåÂèñÂÄºÊòØ128„ÄÇi2 ÊòØËøõË°åËá™Âä®Ë£ÖÁÆ±ÁöÑÂÆû‰æãÔºåÂõ†‰∏∫ËøôÈáåË∂ÖÂá∫‰∫Ü-128Âà∞127ÁöÑËåÉÂõ¥ÔºåÊâÄ‰ª•ÊòØÂàõÂª∫‰∫ÜÊñ∞ÁöÑIntegerÂØπË±°„ÄÇÁî±‰∫é==ÊØîËæÉÁöÑÊòØÂú∞ÂùÄÔºåÊâÄ‰ª•‰∏§ËÄÖÂøÖÁÑ∂‰∏ç‰∏ÄÊ†∑„ÄÇ Á¨¨‰∫åÁßçÊÉÖÂÜµÂ∞±‰∏ç‰∏ÄÊ†∑‰∫ÜÔºåi4ÊòØ‰∏çÈúÄË¶ÅËá™Â∑±newÔºåËÄåÊòØÂèØ‰ª•Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠ÂèñÔºå‰ΩÜÊòØi3ÊòØnewÂá∫Êù•ÁöÑÔºåÂú∞ÂùÄËøòÊòØ‰∏ç‰∏ÄÊ†∑„ÄÇ Á¨¨‰∫åÁªÑ‰∏≠ Á¨¨‰∏ÄÁßçÊÉÖÂÜµÊòØÈÉΩË∂ÖÂá∫ËåÉÂõ¥‰∫ÜÔºåÊâÄ‰ª•ÈÉΩË¶ÅËá™Â∑±ÂàÜÂà´ÂéªnewÔºåÊâÄ‰ª•‰∏ç‰∏ÄÊ†∑ Á¨¨‰∫åÁßçÊÉÖÂÜµÊòØÂú®ËåÉÂõ¥ÂÜÖÔºåÈÉΩÂéªÁºìÂ≠ò‰∏≠ÂèñÔºåÂÆûÈôÖ‰∏äÈÉΩÊåáÂêëÂêå‰∏Ä‰∏™ÂØπË±°ÔºåÊâÄ‰ª•‰∏ÄÊ†∑ Á¨¨‰∏âÁªÑ‰∏≠ i10Âíåi12ÈÉΩÊòØintÂûãÔºåi9Âíåi11‰∏éÂÆÉ‰ª¨ÊØîËæÉÁöÑÊó∂ÂÄôÈÉΩË¶ÅËá™Âä®ÊãÜÁÆ±ÔºåÊâÄ‰ª•ÊØîËæÉÁöÑÊòØÊï∞ÂÄºÔºåÊâÄ‰ª•ÈÉΩ‰∏ÄÊ†∑ Á¨¨ÂõõÁªÑ‰∏≠ ‰∏éÁ¨¨‰∏ÄÁªÑÂéüÁêÜ‰∏ÄÊ†∑ Âõõ‰∫îÁªÑ‰∏≠ ‰∏éÁ¨¨‰∫åÁªÑÂéüÁêÜ‰∏ÄÊ†∑ ÊâÄ‰ª•ÂïäÔºånew Integer()ÊòØÊØèÊ¨°ÈÉΩÁõ¥Êé•newÂØπË±°Âá∫Êù•ÔºåËÄåInteger.valueOf()ÂèØËÉΩ‰ºöÁî®Âà∞ÁºìÂ≠òÔºåÊâÄ‰ª•ÂêéËÄÖÊïàÁéáÈ´ò‰∏ÄÁÇπ„ÄÇ ÊÄªÁªì int Âíå Integer Âú®ËøõË°åÊØîËæÉÁöÑÊó∂ÂÄôÔºå Integer ‰ºöËøõË°åÊãÜÁÆ±ÔºåËΩ¨‰∏∫ int ÂÄº‰∏éint` ËøõË°åÊØîËæÉ„ÄÇ Integer ‰∏é Integer ÊØîËæÉÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÁõ¥Êé•ËµãÂÄºÁöÑÊó∂ÂÄô‰ºöËøõË°åËá™Âä®ÁöÑË£ÖÁÆ±ÔºåÈÇ£‰πàËøôÈáåÂ∞±ÈúÄË¶ÅÊ≥®ÊÑè‰∏§‰∏™ÈóÆÈ¢òÔºå‰∏Ä‰∏™ÊòØ -128&lt;= x&lt;=127 ÁöÑÊï¥Êï∞ÔºåÂ∞Ü‰ºöÁõ¥Êé•ÁºìÂ≠òÂú® IntegerCache ‰∏≠ÔºåÈÇ£‰πàÂΩìËµãÂÄºÂú®Ëøô‰∏™Âå∫Èó¥ÁöÑÊó∂ÂÄôÔºå‰∏ç‰ºöÂàõÂª∫Êñ∞ÁöÑ Integer ÂØπË±°ÔºåËÄåÊòØ‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÂ∑≤ÁªèÂàõÂª∫Â•ΩÁöÑ Integer ÂØπË±°„ÄÇ‰∫åÔºöÂΩìÂ§ß‰∫éËøô‰∏™ËåÉÂõ¥ÁöÑÊó∂ÂÄôÔºåÁõ¥Êé• new Integer Êù•ÂàõÂª∫ Integer ÂØπË±°„ÄÇ new Integer(1) Âíå Integer a = 1 ‰∏çÂêåÔºåÂâçËÄÖ‰ºöÂàõÂª∫ÂØπË±°ÔºåÂ≠òÂÇ®Âú®Â†Ü‰∏≠ÔºåËÄåÂêéËÄÖÂõ†‰∏∫Âú®-128Âà∞127ÁöÑËåÉÂõ¥ÂÜÖÔºå‰∏ç‰ºöÂàõÂª∫Êñ∞ÁöÑÂØπË±°ÔºåËÄåÊòØ‰ªé IntegerCache ‰∏≠Ëé∑ÂèñÁöÑ„ÄÇÈÇ£‰πà Integer a = 128, Â§ß‰∫éËØ•ËåÉÂõ¥ÁöÑËØùÊâç‰ºöÁõ¥Êé•ÈÄöËøá new Integer(128)ÂàõÂª∫ÂØπË±°ÔºåËøõË°åË£ÖÁÆ±„ÄÇ]]></content>
      <tags>
        <tag>javaÂü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°àÊÄùËÄÉ]]></title>
    <url>%2F2019%2F01%2F23%2Fmiscellany%2F10%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%80%9D%E8%80%83%2F</url>
    <content type="text"><![CDATA[Âú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÔºåÊúÄÂ§¥ÁñºÁöÑÂ∞±ÊòØÂàÜÂ∏ÉÂºè‰∫ãÂä°ÈóÆÈ¢òÔºåÂ§ÑÁêÜËµ∑Êù•‰∏ÄÂÆöË¶ÅÂ∞èÂøÉÁøºÁøº„ÄÇÁî±‰∫éÊ≤°ÊúâÊ≠§ÊñπÈù¢ÂÆûÊàòÔºåÊú¨ÊñáÂ∞±‰ªéÁêÜËÆ∫‰∏äÁúãÁúãÊØîËæÉÂ•ΩÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°Â§ÑÁêÜÊñπÊ°à„ÄÇ ‰ªÄ‰πàÊòØÂàÜÂ∏ÉÂºè‰∫ãÂä° ‰ºóÊâÄÂë®Áü•ÔºåÊï∞ÊçÆÂ∫ìËÉΩÂÆûÁé∞Êú¨Âú∞‰∫ãÂä°Ôºå‰πüÂ∞±ÊòØÂú®Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠Ôºå‰Ω†ÂèØ‰ª•ÂÖÅËÆ∏‰∏ÄÁªÑÊìç‰ΩúË¶Å‰πàÂÖ®ÈÉΩÊ≠£Á°ÆÊâßË°åÔºåË¶Å‰πàÂÖ®ÈÉΩ‰∏çÊâßË°å„ÄÇËøôÈáåÁâπÂà´Âº∫Ë∞É‰∫ÜÊú¨Âú∞‰∫ãÂä°Ôºå‰πüÂ∞±ÊòØÁõÆÂâçÁöÑÊï∞ÊçÆÂ∫ìÂè™ËÉΩÊîØÊåÅÂêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∫ãÂä°„ÄÇ‰ΩÜÁé∞Âú®ÁöÑÁ≥ªÁªüÂæÄÂæÄÈááÁî®ÂæÆÊúçÂä°Êû∂ÊûÑÔºå‰∏öÂä°Á≥ªÁªüÊã•ÊúâÁã¨Á´ãÁöÑÊï∞ÊçÆÂ∫ìÔºåÂõ†Ê≠§Â∞±Âá∫Áé∞‰∫ÜË∑®Â§ö‰∏™Êï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°ÈúÄÊ±ÇÔºåËøôÁßç‰∫ãÂä°Âç≥‰∏∫‚ÄúÂàÜÂ∏ÉÂºè‰∫ãÂä°‚Äù„ÄÇÈÇ£‰πàÂú®ÁõÆÂâçÊï∞ÊçÆÂ∫ì‰∏çÊîØÊåÅË∑®Â∫ì‰∫ãÂä°ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨Â∫îËØ•Â¶Ç‰ΩïÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∫ãÂä°Âë¢Ôºü ÊØîÂ¶ÇÁî®Êà∑‰∏ãÂçïËøáÁ®ã„ÄÇÂΩìÊàë‰ª¨ÁöÑÁ≥ªÁªüÈááÁî®‰∫ÜÂæÆÊúçÂä°Êû∂ÊûÑÂêéÔºå‰∏Ä‰∏™ÁîµÂïÜÁ≥ªÁªüÂæÄÂæÄË¢´ÊãÜÂàÜÊàêÂ¶Ç‰∏ãÂá†‰∏™Â≠êÁ≥ªÁªüÔºöÂïÜÂìÅÁ≥ªÁªü„ÄÅËÆ¢ÂçïÁ≥ªÁªü„ÄÅÊîØ‰ªòÁ≥ªÁªü„ÄÅÁßØÂàÜÁ≥ªÁªüÁ≠â„ÄÇÊï¥‰∏™‰∏ãÂçïÁöÑËøáÁ®ãÂ¶Ç‰∏ãÔºö Áî®Êà∑ÈÄöËøáÂïÜÂìÅÁ≥ªÁªüÊµèËßàÂïÜÂìÅÔºå‰ªñÁúã‰∏≠‰∫ÜÊüê‰∏ÄÈ°πÂïÜÂìÅÔºå‰æøÁÇπÂáª‰∏ãÂçï Ê≠§Êó∂ËÆ¢ÂçïÁ≥ªÁªü‰ºöÁîüÊàê‰∏ÄÊù°ËÆ¢Âçï ËÆ¢ÂçïÂàõÂª∫ÊàêÂäüÂêéÔºåÊîØ‰ªòÁ≥ªÁªüÊèê‰æõÊîØ‰ªòÂäüËÉΩ ÂΩìÊîØ‰ªòÂÆåÊàêÂêéÔºåÁî±ÁßØÂàÜÁ≥ªÁªü‰∏∫ËØ•Áî®Êà∑Â¢ûÂä†ÁßØÂàÜ ‰∏äËø∞Ê≠•È™§2„ÄÅ3„ÄÅ4ÈúÄË¶ÅÂú®‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÂÆåÊàê„ÄÇÂØπ‰∫é‰º†ÁªüÂçï‰ΩìÂ∫îÁî®ËÄåË®ÄÔºåÂÆûÁé∞‰∫ãÂä°ÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™ÈúÄÂ∞ÜËøô‰∏â‰∏™Ê≠•È™§ÊîæÂú®‰∏Ä‰∏™ÊñπÊ≥ïA‰∏≠ÔºåÂÜçÁî®SpringÁöÑ@TransactionalÊ≥®Ëß£Ê†áËØÜËØ•ÊñπÊ≥ïÂç≥ÂèØ„ÄÇSpringÈÄöËøáÊï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°ÊîØÊåÅÔºå‰øùËØÅËøô‰∫õÊ≠•È™§Ë¶Å‰πàÂÖ®ÈÉΩÊâßË°åÂÆåÊàêÔºåË¶Å‰πàÂÖ®ÈÉΩ‰∏çÊâßË°å„ÄÇ‰ΩÜÂú®Ëøô‰∏™ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåËøô‰∏â‰∏™Ê≠•È™§Ê∂âÂèä‰∏â‰∏™Á≥ªÁªüÔºåÊ∂âÂèä‰∏â‰∏™Êï∞ÊçÆÂ∫ìÔºåÊ≠§Êó∂Êàë‰ª¨ÂøÖÈ°ªÂú®Êï∞ÊçÆÂ∫ìÂíåÂ∫îÁî®Á≥ªÁªü‰πãÈó¥ÔºåÈÄöËøáÊüêÈ°πÈªëÁßëÊäÄÔºåÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑÊîØÊåÅ„ÄÇ ÊñπÊ°à1ÔºöÂü∫‰∫éÂèØÈù†Ê∂àÊÅØÊúçÂä°ÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä° Âú®Á≥ªÁªüAÂ§ÑÁêÜ‰ªªÂä°AÂâçÔºåÈ¶ñÂÖàÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Êî∂Âà∞ÂêéÂ∞ÜËØ•Êù°Ê∂àÊÅØÊåÅ‰πÖÂåñÔºå‰ΩÜÂπ∂‰∏çÊäïÈÄí„ÄÇÊ≠§Êó∂‰∏ãÊ∏∏Á≥ªÁªüB‰ªçÁÑ∂‰∏çÁü•ÈÅìËØ•Êù°Ê∂àÊÅØÁöÑÂ≠òÂú®„ÄÇ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂ÊåÅ‰πÖÂåñÊàêÂäüÂêéÔºå‰æøÂêëÁ≥ªÁªüAËøîÂõû‰∏Ä‰∏™Á°ÆËÆ§Â∫îÁ≠îÔºõ Á≥ªÁªüAÊî∂Âà∞Á°ÆËÆ§Â∫îÁ≠îÂêéÔºåÂàôÂèØ‰ª•ÂºÄÂßãÂ§ÑÁêÜ‰ªªÂä°AÔºõ ‰ªªÂä°AÂ§ÑÁêÜÂÆåÊàêÂêéÔºåÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèëÈÄÅCommitËØ∑Ê±Ç„ÄÇËØ•ËØ∑Ê±ÇÂèëÈÄÅÂÆåÊàêÂêéÔºåÂØπÁ≥ªÁªüAËÄåË®ÄÔºåËØ•‰∫ãÂä°ÁöÑÂ§ÑÁêÜËøáÁ®ãÂ∞±ÁªìÊùü‰∫ÜÔºåÊ≠§Êó∂ÂÆÉÂèØ‰ª•Â§ÑÁêÜÂà´ÁöÑ‰ªªÂä°‰∫Ü„ÄÇ ‰ΩÜcommitÊ∂àÊÅØÂèØËÉΩ‰ºöÂú®‰º†ËæìÈÄî‰∏≠‰∏¢Â§±Ôºå‰ªéËÄåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Âπ∂‰∏ç‰ºöÂêëÁ≥ªÁªüBÊäïÈÄíËøôÊù°Ê∂àÊÅØÔºå‰ªéËÄåÁ≥ªÁªüÂ∞±‰ºöÂá∫Áé∞‰∏ç‰∏ÄËá¥ÊÄß„ÄÇËøô‰∏™ÈóÆÈ¢òÁî±Ê∂àÊÅØ‰∏≠Èó¥‰ª∂ÁöÑ‰∫ãÂä°ÂõûÊü•Êú∫Âà∂ÂÆåÊàêÔºå‰∏ãÊñá‰ºö‰ªãÁªç„ÄÇ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Êî∂Âà∞CommitÊåá‰ª§ÂêéÔºå‰æøÂêëÁ≥ªÁªüBÊäïÈÄíËØ•Ê∂àÊÅØÔºå‰ªéËÄåËß¶Âèë‰ªªÂä°BÁöÑÊâßË°åÔºõ ÂΩì‰ªªÂä°BÊâßË°åÂÆåÊàêÂêéÔºåÁ≥ªÁªüBÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ËøîÂõû‰∏Ä‰∏™Á°ÆËÆ§Â∫îÁ≠îÔºåÂëäËØâÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ËØ•Ê∂àÊÅØÂ∑≤ÁªèÊàêÂäüÊ∂àË¥πÔºåÊ≠§Êó∂ÔºåËøô‰∏™ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÂÆåÊàê„ÄÇ ‰∏äËø∞ËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûú‰ªªÂä°AÂ§ÑÁêÜÂ§±Ë¥•ÔºåÈÇ£‰πàÈúÄË¶ÅËøõÂÖ•ÂõûÊªöÊµÅÁ®ã: Ëã•Á≥ªÁªüAÂú®Â§ÑÁêÜ‰ªªÂä°AÊó∂Â§±Ë¥•ÔºåÈÇ£‰πàÂ∞±‰ºöÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèëÈÄÅRollbackËØ∑Ê±Ç„ÄÇÂíåÂèëÈÄÅCommitËØ∑Ê±Ç‰∏ÄÊ†∑ÔºåÁ≥ªÁªüAÂèëÂÆå‰πãÂêé‰æøÂèØ‰ª•ËÆ§‰∏∫ÂõûÊªöÂ∑≤ÁªèÂÆåÊàêÔºåÂÆÉ‰æøÂèØ‰ª•ÂéªÂÅöÂÖ∂‰ªñÁöÑ‰∫ãÊÉÖ„ÄÇ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Êî∂Âà∞ÂõûÊªöËØ∑Ê±ÇÂêéÔºåÁõ¥Êé•Â∞ÜËØ•Ê∂àÊÅØ‰∏¢ÂºÉÔºåËÄå‰∏çÊäïÈÄíÁªôÁ≥ªÁªüBÔºå‰ªéËÄå‰∏ç‰ºöËß¶ÂèëÁ≥ªÁªüBÁöÑ‰ªªÂä°B„ÄÇ ‰∏äÈù¢ÊâÄ‰ªãÁªçÁöÑCommitÂíåRollbackÈÉΩÂ±û‰∫éÁêÜÊÉ≥ÊÉÖÂÜµÔºå‰ΩÜÂú®ÂÆûÈôÖÁ≥ªÁªü‰∏≠ÔºåCommitÂíåRollbackÊåá‰ª§ÈÉΩÊúâÂèØËÉΩÂú®‰º†ËæìÈÄî‰∏≠‰∏¢Â§±„ÄÇÈÇ£‰πàÂΩìÂá∫Áé∞ËøôÁßçÊÉÖÂÜµÁöÑÊó∂ÂÄôÔºåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÊòØÂ¶Ç‰Ωï‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÂë¢Ôºü‚Äî‚ÄîÁ≠îÊ°àÂ∞±ÊòØË∂ÖÊó∂ËØ¢ÈóÆÊú∫Âà∂„ÄÇ Á≥ªÁªüAÈô§‰∫ÜÂÆûÁé∞Ê≠£Â∏∏ÁöÑ‰∏öÂä°ÊµÅÁ®ãÂ§ñÔºåËøòÈúÄÊèê‰æõ‰∏Ä‰∏™‰∫ãÂä°ËØ¢ÈóÆÁöÑÊé•Âè£Ôºå‰æõÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Ë∞ÉÁî®„ÄÇÂΩìÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Êî∂Âà∞‰∏ÄÊù°‰∫ãÂä°ÂûãÊ∂àÊÅØÂêé‰æøÂºÄÂßãËÆ°Êó∂ÔºåÂ¶ÇÊûúÂà∞‰∫ÜË∂ÖÊó∂Êó∂Èó¥‰πüÊ≤°Êî∂Âà∞Á≥ªÁªüAÂèëÊù•ÁöÑCommitÊàñRollbackÊåá‰ª§ÁöÑËØùÔºåÂ∞±‰ºö‰∏ªÂä®Ë∞ÉÁî®Á≥ªÁªüAÊèê‰æõÁöÑ‰∫ãÂä°ËØ¢ÈóÆÊé•Âè£ËØ¢ÈóÆËØ•Á≥ªÁªüÁõÆÂâçÁöÑÁä∂ÊÄÅ„ÄÇËØ•Êé•Âè£‰ºöËøîÂõû‰∏âÁßçÁªìÊûúÔºö Êèê‰∫§ Ëã•Ëé∑ÂæóÁöÑÁä∂ÊÄÅÊòØ‚ÄúÊèê‰∫§‚ÄùÔºåÂàôÂ∞ÜËØ•Ê∂àÊÅØÊäïÈÄíÁªôÁ≥ªÁªüB„ÄÇ ÂõûÊªö Ëã•Ëé∑ÂæóÁöÑÁä∂ÊÄÅÊòØ‚ÄúÂõûÊªö‚ÄùÔºåÂàôÁõ¥Êé•Â∞ÜÊù°Ê∂àÊÅØ‰∏¢ÂºÉ„ÄÇ Â§ÑÁêÜ‰∏≠ Ëã•Ëé∑ÂæóÁöÑÁä∂ÊÄÅÊòØ‚ÄúÂ§ÑÁêÜ‰∏≠‚ÄùÔºåÂàôÁªßÁª≠Á≠âÂæÖ„ÄÇ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Âêë‰∏ãÊ∏∏Á≥ªÁªüÊäïÈÄíÂÆåÊ∂àÊÅØÂêé‰æøËøõÂÖ•ÈòªÂ°ûÁ≠âÂæÖÁä∂ÊÄÅÔºå‰∏ãÊ∏∏Á≥ªÁªü‰æøÁ´ãÂç≥ËøõË°å‰ªªÂä°ÁöÑÂ§ÑÁêÜÔºå‰ªªÂä°Â§ÑÁêÜÂÆåÊàêÂêé‰æøÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ËøîÂõûÂ∫îÁ≠î„ÄÇÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Êî∂Âà∞Á°ÆËÆ§Â∫îÁ≠îÂêé‰æøËÆ§‰∏∫ËØ•‰∫ãÂä°Â§ÑÁêÜÂÆåÊØïÔºÅ Â¶ÇÊûúÊ∂àÊÅØÂú®ÊäïÈÄíËøáÁ®ã‰∏≠‰∏¢Â§±ÔºåÊàñÊ∂àÊÅØÁöÑÁ°ÆËÆ§Â∫îÁ≠îÂú®ËøîÂõûÈÄî‰∏≠‰∏¢Â§±ÔºåÈÇ£‰πàÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Âú®Á≠âÂæÖÁ°ÆËÆ§Â∫îÁ≠îË∂ÖÊó∂‰πãÂêéÂ∞±‰ºöÈáçÊñ∞ÊäïÈÄíÔºåÁõ¥Âà∞‰∏ãÊ∏∏Ê∂àË¥πËÄÖËøîÂõûÊ∂àË¥πÊàêÂäüÂìçÂ∫î‰∏∫Ê≠¢„ÄÇÂΩìÁÑ∂Ôºå‰∏ÄËà¨Ê∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèØ‰ª•ËÆæÁΩÆÊ∂àÊÅØÈáçËØïÁöÑÊ¨°Êï∞ÂíåÊó∂Èó¥Èó¥ÈöîÔºåÊØîÂ¶ÇÔºöÂΩìÁ¨¨‰∏ÄÊ¨°ÊäïÈÄíÂ§±Ë¥•ÂêéÔºåÊØèÈöî‰∫îÂàÜÈíüÈáçËØï‰∏ÄÊ¨°Ôºå‰∏ÄÂÖ±ÈáçËØï3Ê¨°„ÄÇÂ¶ÇÊûúÈáçËØï3Ê¨°‰πãÂêé‰ªçÁÑ∂ÊäïÈÄíÂ§±Ë¥•ÔºåÈÇ£‰πàËøôÊù°Ê∂àÊÅØÂ∞±ÈúÄË¶Å‰∫∫Â∑•Âπ≤È¢Ñ„ÄÇ Ê≥®ÊÑèÔºåËøô‰∏™ÊñπÊ°àÈúÄË¶ÅÊ∂àÊÅØÈòüÂàóÂÖ∑Êúâ‰∫ãÂä°Ê∂àÊÅØÁöÑËÉΩÂäõÔºåÈòøÈáåÁöÑRocketMQÂèØ‰ª•ÂÆûÁé∞Ëøô‰∏™ÁõÆÊ†á„ÄÇÂÖ∂‰ªñÁöÑMQËøò‰∏çË°å„ÄÇ ÊñπÊ°à2ÔºöÊúÄÂ§ßÂä™ÂäõÈÄöÁü•ÔºàÂÆöÊúüÊ†°ÂØπÔºâ ‰∏äÊ∏∏Á≥ªÁªüÂú®ÂÆåÊàê‰ªªÂä°ÂêéÔºåÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂêåÊ≠•Âú∞ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÔºåÁ°Æ‰øùÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÊàêÂäüÊåÅ‰πÖÂåñËøôÊù°Ê∂àÊÅØÔºåÁÑ∂Âêé‰∏äÊ∏∏Á≥ªÁªüÂèØ‰ª•ÂéªÂÅöÂà´ÁöÑ‰∫ãÊÉÖ‰∫ÜÔºõ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Êî∂Âà∞Ê∂àÊÅØÂêéË¥üË¥£Â∞ÜËØ•Ê∂àÊÅØÂêåÊ≠•ÊäïÈÄíÁªôÁõ∏Â∫îÁöÑ‰∏ãÊ∏∏Á≥ªÁªüÔºåÂπ∂Ëß¶Âèë‰∏ãÊ∏∏Á≥ªÁªüÁöÑ‰ªªÂä°ÊâßË°åÔºõ ÂΩì‰∏ãÊ∏∏Á≥ªÁªüÂ§ÑÁêÜÊàêÂäüÂêéÔºåÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèçÈ¶àÁ°ÆËÆ§Â∫îÁ≠îÔºåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂‰æøÂèØ‰ª•Â∞ÜËØ•Êù°Ê∂àÊÅØÂà†Èô§Ôºå‰ªéËÄåËØ•‰∫ãÂä°ÂÆåÊàê„ÄÇ ‰∏äÈù¢ÊòØ‰∏Ä‰∏™ÁêÜÊÉ≥ÂåñÁöÑËøáÁ®ãÔºå‰ΩÜÂú®ÂÆûÈôÖÂú∫ÊôØ‰∏≠ÔºåÂæÄÂæÄ‰ºöÂá∫Áé∞Â¶Ç‰∏ãÂá†ÁßçÊÑèÂ§ñÊÉÖÂÜµÔºö Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Âêë‰∏ãÊ∏∏Á≥ªÁªüÊäïÈÄíÊ∂àÊÅØÂ§±Ë¥• ‰∏äÊ∏∏Á≥ªÁªüÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèëÈÄÅÊ∂àÊÅØÂ§±Ë¥• ÂØπ‰∫éÁ¨¨‰∏ÄÁßçÊÉÖÂÜµÔºåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂÖ∑ÊúâÈáçËØïÊú∫Âà∂ÔºåÊàë‰ª¨ÂèØ‰ª•Âú®Ê∂àÊÅØ‰∏≠Èó¥‰ª∂‰∏≠ËÆæÁΩÆÊ∂àÊÅØÁöÑÈáçËØïÊ¨°Êï∞ÂíåÈáçËØïÊó∂Èó¥Èó¥ÈöîÔºåÂØπ‰∫éÁΩëÁªú‰∏çÁ®≥ÂÆöÂØºËá¥ÁöÑÊ∂àÊÅØÊäïÈÄíÂ§±Ë¥•ÁöÑÊÉÖÂÜµÔºåÂæÄÂæÄÈáçËØïÂá†Ê¨°ÂêéÊ∂àÊÅØ‰æøÂèØ‰ª•ÊàêÂäüÊäïÈÄíÔºåÂ¶ÇÊûúË∂ÖËøá‰∫ÜÈáçËØïÁöÑ‰∏äÈôê‰ªçÁÑ∂ÊäïÈÄíÂ§±Ë¥•ÔºåÈÇ£‰πàÊ∂àÊÅØ‰∏≠Èó¥‰ª∂‰∏çÂÜçÊäïÈÄíËØ•Ê∂àÊÅØÔºåËÄåÊòØËÆ∞ÂΩïÂú®Â§±Ë¥•Ê∂àÊÅØË°®‰∏≠ÔºåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÈúÄË¶ÅÊèê‰æõÂ§±Ë¥•Ê∂àÊÅØÁöÑÊü•ËØ¢Êé•Âè£Ôºå‰∏ãÊ∏∏Á≥ªÁªü‰ºöÂÆöÊúüÊü•ËØ¢Â§±Ë¥•Ê∂àÊÅØÔºåÂπ∂Â∞ÜÂÖ∂Ê∂àË¥πÔºåËøôÂ∞±ÊòØÊâÄË∞ìÁöÑ‚ÄúÂÆöÊúüÊ†°ÂØπ‚Äù„ÄÇ Â¶ÇÊûúÈáçÂ§çÊäïÈÄíÂíåÂÆöÊúüÊ†°ÂØπÈÉΩ‰∏çËÉΩËß£ÂÜ≥ÈóÆÈ¢òÔºåÂæÄÂæÄÊòØÂõ†‰∏∫‰∏ãÊ∏∏Á≥ªÁªüÂá∫Áé∞‰∫Ü‰∏•ÈáçÁöÑÈîôËØØÔºåÊ≠§Êó∂Â∞±ÈúÄË¶Å‰∫∫Â∑•Âπ≤È¢Ñ„ÄÇ ÂØπ‰∫éÁ¨¨‰∫åÁßçÊÉÖÂÜµÔºåÈúÄË¶ÅÂú®‰∏äÊ∏∏Á≥ªÁªü‰∏≠Âª∫Á´ãÊ∂àÊÅØÈáçÂèëÊú∫Âà∂„ÄÇÂèØ‰ª•Âú®‰∏äÊ∏∏Á≥ªÁªüÂª∫Á´ã‰∏ÄÂº†Êú¨Âú∞Ê∂àÊÅØË°®ÔºåÂπ∂Â∞Ü ‰ªªÂä°Â§ÑÁêÜËøáÁ®ã Âíå ÂêëÊú¨Âú∞Ê∂àÊÅØË°®‰∏≠ÊèíÂÖ•Ê∂àÊÅØ Ëøô‰∏§‰∏™Ê≠•È™§ÊîæÂú®‰∏Ä‰∏™Êú¨Âú∞‰∫ãÂä°‰∏≠ÂÆåÊàê„ÄÇÂ¶ÇÊûúÂêëÊú¨Âú∞Ê∂àÊÅØË°®ÊèíÂÖ•Ê∂àÊÅØÂ§±Ë¥•ÔºåÈÇ£‰πàÂ∞±‰ºöËß¶ÂèëÂõûÊªöÔºå‰πãÂâçÁöÑ‰ªªÂä°Â§ÑÁêÜÁªìÊûúÂ∞±‰ºöË¢´ÂèñÊ∂à„ÄÇ Â¶ÇÊûúËøô‰∏§Ê≠•ÈÉΩÊâßË°åÊàêÂäüÔºåÈÇ£‰πàËØ•Êú¨Âú∞‰∫ãÂä°Â∞±ÂÆåÊàê‰∫Ü„ÄÇÊé•‰∏ãÊù•‰ºöÊúâ‰∏Ä‰∏™‰∏ìÈó®ÁöÑÊ∂àÊÅØÂèëÈÄÅËÄÖ‰∏çÊñ≠Âú∞ÂèëÈÄÅÊú¨Âú∞Ê∂àÊÅØË°®‰∏≠ÁöÑÊ∂àÊÅØÔºåÂ¶ÇÊûúÂèëÈÄÅÂ§±Ë¥•ÂÆÉ‰ºöËøîÂõûÈáçËØï„ÄÇÂΩìÁÑ∂Ôºå‰πüË¶ÅÁªôÊ∂àÊÅØÂèëÈÄÅËÄÖËÆæÁΩÆÈáçËØïÁöÑ‰∏äÈôêÔºå‰∏ÄËà¨ËÄåË®ÄÔºåËææÂà∞ÈáçËØï‰∏äÈôê‰ªçÁÑ∂ÂèëÈÄÅÂ§±Ë¥•ÔºåÈÇ£Â∞±ÊÑèÂë≥ÁùÄÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Âá∫Áé∞‰∏•ÈáçÁöÑÈóÆÈ¢òÔºåÊ≠§Êó∂‰πüÂè™Êúâ‰∫∫Â∑•Âπ≤È¢ÑÊâçËÉΩËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇ ÂØπ‰∫é‰∏çÊîØÊåÅ‰∫ãÂä°ÂûãÊ∂àÊÅØÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåÂ¶ÇÊûúË¶ÅÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑËØùÔºåÂ∞±ÂèØ‰ª•ÈááÁî®ËøôÁßçÊñπÂºè„ÄÇÂÆÉËÉΩÂ§üÈÄöËøáÈáçËØïÊú∫Âà∂+ÂÆöÊúüÊ†°ÂØπÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ôºå‰ΩÜÁõ∏ÊØî‰∫éÁ¨¨‰∏ÄÁßçÊñπÊ°àÔºåÂÆÉËææÂà∞Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÁöÑÂë®ÊúüËæÉÈïøÔºåËÄå‰∏îËøòÈúÄË¶ÅÂú®‰∏äÊ∏∏Á≥ªÁªü‰∏≠ÂÆûÁé∞Ê∂àÊÅØÈáçËØïÂèëÂ∏ÉÊú∫Âà∂Ôºå‰ª•Á°Æ‰øùÊ∂àÊÅØÊàêÂäüÂèëÂ∏ÉÁªôÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåËøôÊó†ÁñëÂ¢ûÂä†‰∫Ü‰∏öÂä°Á≥ªÁªüÁöÑÂºÄÂèëÊàêÊú¨Ôºå‰ΩøÂæó‰∏öÂä°Á≥ªÁªü‰∏çÂ§üÁ∫ØÁ≤πÔºåÂπ∂‰∏îËøô‰∫õÈ¢ùÂ§ñÁöÑ‰∏öÂä°ÈÄªËæëÊó†Áñë‰ºöÂç†Áî®‰∏öÂä°Á≥ªÁªüÁöÑÁ°¨‰ª∂ËµÑÊ∫êÔºå‰ªéËÄåÂΩ±ÂìçÊÄßËÉΩ„ÄÇ Âõ†Ê≠§ÔºåÂ∞ΩÈáèÈÄâÊã©ÊîØÊåÅ‰∫ãÂä°ÂûãÊ∂àÊÅØÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Êù•ÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåÂ¶ÇRocketMQ„ÄÇËøòÊúâÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õËß£ÂÜ≥ÊÄùË∑ØÔºåËøôÈáåÂ∞±ÊöÇÊó∂Âè™ÊèèËø∞Ëøô‰∫õ„ÄÇÂêéÁª≠ÂÜçÂ≠¶‰π†„ÄÇ ÂèÇËÄÉËá™Ôºöhttps://juejin.im/post/5aa3c7736fb9a028bb189bca]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∫ìÂ≠òÊâ£ÂáèÈóÆÈ¢ò]]></title>
    <url>%2F2019%2F01%2F23%2Fmiscellany%2F09%E5%BA%93%E5%AD%98%E6%89%A3%E5%87%8F%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Â∫ìÂ≠òÊâ£ÂáèÈóÆÈ¢ò‰∏ÄÁõ¥ÊòØÁßíÊùÄ‰∏≠ÊúÄÂÖ≥ÈîÆÁöÑ‰∏Ä‰∏™ÁÇπ„ÄÇÂ¶ÇÊûúÊääÊéß‰∏çÂ•ΩÔºåÊâ£ÊàêË¥üÊï∞ÔºåÈÇ£ÂèØÂ∞±È∫ªÁÉ¶‰∫ÜÔºåÂ¶Ç‰πàÂ¶Ç‰Ωï‰øùËØÅ‰∏ç‰ºöÂá∫Áé∞Ë∂ÖÂçñËøòËÉΩ‰øùËØÅÊÄßËÉΩÂë¢Ôºü ‰∏Ä„ÄÅÊâ£ÂáèÂ∫ìÂ≠òÈóÆÈ¢òÂàÜÊûê Âú®Êèê‰∫§ËÆ¢ÂçïÁöÑÊó∂ÂÄôÔºåË¶ÅÊâ£ÂáèÂ∫ìÂ≠òÔºåÂØπ‰∫ésqlÔºåÊòØËøô‰πàÂÜôÁöÑÔºö 1update t_stcok set stock = stock-2 where sku_id = 1 È¶ñÂÖàËøôÊù°sqlÂ≠òÂú®Ë∂ÖÂçñÈóÆÈ¢òÔºåÂæàÊúâÂèØËÉΩ‰ºöÂáèÊàêË¥üÊï∞„ÄÇÂèØËÉΩ‰ºöÊîπÊàêÂ¶Ç‰∏ãÔºö 1update t_stcok set stock = stock-2 where sku_id = 1 and stock &gt; 2 ËøôÊ†∑Â•ΩÂÉèËß£ÂÜ≥‰∫ÜË∂ÖÂçñÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÂºïÂÖ•‰∫ÜÊñ∞ÁöÑÈóÆÈ¢ò„ÄÇÁî±‰∫éÂ∫ìÂ≠òÁâµÊ∂âËøõË¥ß„ÄÅË°•Ë¥ßÁ≠âÁ≥ªÁªüÔºåÊâÄ‰ª•ÊòØ‰∏™Áã¨Á´ãÁöÑÊúçÂä°„ÄÇ Âπ∂‰∏îÔºåÊØîÂ¶ÇÊàëÊòØÈÄöËøáMQÂéªÈÄöÁü•Â∫ìÂ≠òËøõË°åÊâ£ÂáèÂ∫ìÂ≠òÔºå‰ΩÜÊòØÁî±‰∫éÁΩëÁªúÊäñÂä®ÔºåËØ∑Ê±ÇÊâ£ÂáèÂ∫ìÂ≠òÊ≤°ÊúâÁªìÊûúÔºåËøô‰∏™Êó∂ÂÄôÂèØËÉΩÈúÄË¶ÅËøõË°åÈáçËØï„ÄÇÈáçËØï‰πãÂêéÔºåÂèØËÉΩÊàêÂäü‰∫ÜÔºåËøô‰∏™Êó∂ÂÄôÔºåÊúâÂèØËÉΩËøô‰∏§Ê¨°ÈÉΩÊàêÂäü‰∫Ü„ÄÇÈÇ£‰πàÔºå‰∏Ä‰∏™Áî®Êà∑‰π∞‰∏ÄÊ†∑‰∏úË•øÔºå‰ΩÜÊòØÂ∫ìÂ≠òÊâ£‰∫Ü‰∏§ÈÅç„ÄÇËøôÂ∞±ÊòØÂπÇÁ≠â„ÄÇÂ¶ÇÊûú‰∏çÂÅöÂπÇÁ≠âÂ§ÑÁêÜÔºåÈáçËØï‰ºöÂá∫Áé∞‰∏äËø∞ËøôÁßçËá¥ÂëΩÈóÆÈ¢ò„ÄÇ ÈÇ£‰πàÂ¶Ç‰ΩïÂÅöÂà∞ÂπÇÁ≠âÂë¢Ôºü ÂÆûÈôÖ‰∏äÂ∞±ÊòØËøΩÊ±ÇÊï∞ÊçÆ‰∏ÄËá¥ÊÄß„ÄÇÈÇ£‰πàÂ∞±ÂèØ‰ª•ËÄÉËôëÈîÅÊù•‰øùËØÅÔºåÊØîÂ¶ÇÊàëËøôÈáåÁî®‰πêËßÇÈîÅÊù•ÂÆûÁé∞Ôºö 123select stock,version from t_stock;if(stock &gt; Áî®Êà∑Ë¥≠‰π∞Êï∞Èáè) update t_stcok set stock = stock-2 where sku_id = 1 and version = last_version ‰ΩÜÊòØÔºå‰∏ÄÊó¶Âá∫Áé∞Âπ∂ÂèëÔºåÈÇ£‰πàÂèØËÉΩËøô‰∏™Áî®Êà∑ÊòØÊâßË°åupdateÂ§±Ë¥•ÁöÑÔºåÊâÄ‰ª•ËøòÈúÄË¶ÅÂéªÈáçËØï(guava retryÊàñËÄÖspring retryÈÉΩÂèØ‰ª•‰ºòÈõÖÂú∞ÂÆûÁé∞ÈáçËØï)ÔºåÁõ¥Âà∞ÊàêÂäüÊàñËÄÖÂ∫ìÂ≠òÂ∑≤Áªè‰∏çË∂≥„ÄÇ ÈÇ£‰πàÔºåÂú®Â∞ëÈáèÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ËÄÉËôë‰πêËßÇÈîÅÔºåË¶Å‰∏çÁÑ∂‰ºöÂ§ßÈáèÂ§±Ë¥•ÔºåÊ≠§Êó∂ÈúÄË¶ÅÁî®ÊÇ≤ËßÇÈîÅÔºö 12select * from t_stock for update;‰∏ãÈù¢ÊâßË°åupdateÊìç‰Ωú„ÄÇ„ÄÇ„ÄÇ Âú®‰∏Ä‰∏™‰∫ãÂä°ÂÜÖÔºåÁ¨¨‰∏ÄÂè•‰∏∫select for updateÔºåÈÇ£‰πàËøô‰∏ÄË°åÊï∞ÊçÆÂ∞±‰ºöË¢´Êú¨Á∫øÁ®ãÈîÅ‰ΩèÔºåÊï¥‰∏™‰∫ãÂä°ÊâßË°åÂÆåÊâçËÉΩÂÖÅËÆ∏ÂÖ∂‰ªñÁ∫øÁ®ãËøõÊù•„ÄÇ Â≠òÂú®ÁöÑÈóÆÈ¢òÔºö‰∏Ä‰∏™Á∫øÁ®ãÈîÅ‰ΩèËøôË°åÊï∞ÊçÆÔºåÈÇ£‰πàÂÖ∂‰ªñÁ∫øÁ®ãÈÉΩË¶ÅÁ≠âÂæÖÔºåÊïàÁéáÂæà‰Ωé„ÄÇ ÈÇ£‰πàÔºåÂ¶Ç‰Ωï‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåËøòÂèØ‰ª•ÊèêÈ´òÊïàÁéáÂë¢Ôºü ÂØπ‰∫éÊâ£ÂáèÂ∫ìÂ≠òÔºåÂæÄÂæÄÊòØÂÖàÂú®redis‰∏≠ËøõË°åÊâ£ÂáèÂ∫ìÂ≠ò„ÄÇredisÊòØÂçïÁ∫øÁ®ãÔºåÊòØÈ´òÈÄü‰∏≤Ë°åÊâßË°åÔºå‰∏çÂ≠òÂú®Âπ∂ÂèëÈóÆÈ¢ò„ÄÇ Â¶ÇÊûúÊòØÂçïÊú∫redisÔºåÂèØ‰ª•Âú®Âêå‰∏Ä‰∏™‰∫ãÂä°‰∏≠‰øùËØÅ‰∏ÄÊ¨°ÊÄßÊâßË°å: 12345watch stockmultiif stock &gt; count stock = stock - count;exec ‰ΩÜÊòØ‰∏çËÉΩÂú®ÈõÜÁæ§‰∏≠Áî®ÔºàÂàÜÂ∏ÉÂú®‰∏çÂêåËäÇÁÇπ‰∏äÊó∂ÔºâÔºåÊâÄ‰ª•Áî®watch‰∏çÈÄöÁî®„ÄÇ redisÈÉΩÊòØÂéüÂ≠êÊìç‰ΩúÔºåÊØîÂ¶ÇËá™Â¢û:incrbyÔºåÁî®Ëøô‰∏™Â∞±ÂèØ‰ª•Âà§Êñ≠Â∫ìÂ≠òÊòØÂê¶Â§ü„ÄÇÂ∞±ÊòØÊâÄË∞ìÁöÑredisÈ¢ÑÂáèÂ∫ìÂ≠ò„ÄÇ ‰ΩÜÊòØÂú®ÂÆûÈôÖ‰∏≠ÔºåÂ∫ìÂ≠òË°®ÈáåÊúâ‰∏§‰∏™Â≠óÊÆµÔºöÂ∫ìÂ≠òÂíåÈîÅÂÆöÂ∫ìÂ≠ò„ÄÇ ÈîÅÂÆöÂ∫ìÂ≠òÊòØË°®Á§∫Â§öÂ∞ëÁî®Êà∑ÁúüÊ≠£‰∏ãÂçï‰∫ÜÔºå‰ΩÜÊòØËøòÊ≤°ÊúâÊîØ‰ªò„ÄÇÈîÅÂÆöÂ∫ìÂ≠ò+Â∫ìÂ≠ò=ÊÄªÂ∫ìÂ≠òÔºåÁ≠âÁî®Êà∑ÁúüÊ≠£ÊîØ‰ªò‰πãÂêéÔºåÂ∞±ÂèØ‰ª•Â∞ÜÈîÅÂÆöÂ∫ìÂ≠òÂáèÊéâ„ÄÇÈÇ£‰πàÔºåÊ≠§Êó∂Ôºåredis‰∏≠ÈúÄË¶ÅÂ≠òÂ∫ìÂ≠òÂíåÈîÅÂÆöÂ∫ìÂ≠òËøô‰∏§‰∏™ÂÄºÔºå‰∏äÈù¢Âçï‰∏ÄÁöÑÂéüÂ≠êÊìç‰ΩúÂ∞±‰∏çË°å‰∫Ü„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÔºöredis+lua ‰∏∫‰ªÄ‰πàË¶ÅÁî®luaÂë¢ÔºüÂèØ‰ª•Áî®luaÂ∞Ü‰∏ÄÁ≥ªÂàóÊìç‰ΩúÂ∞ÅË£ÖËµ∑Êù•ÊâßË°åÔºåËæìÂÖ•Ëá™Â∑±ÁöÑÂèÇÊï∞Âç≥ÂèØ„ÄÇluaËÑöÊú¨Âú®redis‰∏≠ÊâßË°åÊòØ‰∏≤Ë°åÁöÑ„ÄÅÂéüÂ≠êÊÄßÁöÑ„ÄÇ OKÔºå‰∏ãÈù¢Â∞±ÂÆûÊàò‰∏ÄÊ≥¢ÔºöÊ†πÊçÆskuIdÊü•ËØ¢ÁºìÂ≠ò‰∏≠ÁöÑÂ∫ìÂ≠òÂÄº„ÄÇ ‰∫å„ÄÅÊü•ËØ¢Â∫ìÂ≠òÔºàËÆæÁΩÆÂ∫ìÂ≠òÔºâ È¶ñÂÖàÔºåÊàë‰ª¨Ë¶ÅÊòéÁ°Æ‰∏ÄÁÇπÔºåredis‰∏≠ÁöÑÂ∫ìÂ≠òÂàùÂßãÂÄºÊòØÁî±ÂêéÂè∞ÁöÑÁ≥ªÁªü‰∫∫Â∑•ÊèêÂâçÈÖçÁΩÆÂ•ΩÁöÑÔºåÂú®ËøõË°åÂïÜÂìÅÈîÄÂîÆÊó∂ÔºàÁî®Êà∑‰∏ãÂçïÊó∂ÔºâÔºåÁõ¥Êé•‰ªéredis‰∏≠ÂÖàËøõË°åÂ∫ìÂ≠òÁöÑÊâ£Âáè„ÄÇ ËøôÈáåÂë¢ÔºåÊàë‰ª¨Ê≤°ÊúâËøõË°åÂàùÂßãÂåñÔºåËÄåÊòØÂú®Á®ãÂ∫è‰∏≠ËøõË°åÂà§Êñ≠ÔºöÂ¶ÇÊûúredisÂ∑≤ÁªèÊúâ‰∫ÜËøô‰∏™Â∫ìÂ≠òÂÄºÔºåÂ∞±Â∞Ü‰ªñÊü•ËØ¢Âá∫Êù•ËøîÂõûÔºõÂê¶ÂàôÔºåÂ∞±ÂéªÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÔºåÁÑ∂ÂêéÂØπredisËøõË°åÂàùÂßãÂåñ„ÄÇ ËøôÈáåÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÔºöÂ¶ÇÊûúÂ≠òÂú®Âπ∂ÂèëÈóÆÈ¢òÔºå‰ΩÜÊòØÊàë‰ª¨ÂàùÂßãÂåñ‰∏§‰∏™ÂÄºÔºàÂ∫ìÂ≠òÂÄºÂíåÂ∫ìÂ≠òÈîÅÂÆöÂÄºÔºâÔºåËøôÈáåÈááÁî®luaËÑöÊú¨ÔºåÂú®luaËÑöÊú¨‰∏≠ÂÆåÊàêÂàùÂßãÂåñÔºåÂπ∂‰∏îÂØπ‰∫é‰∏§‰∏™Áî®Êà∑ÂêåÊó∂ËøõË°åÂàùÂßãÂåñÂ∫ìÂ≠òÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•Âú®lua‰∏≠ËøõË°åÂà§Êñ≠,Âõ†‰∏∫redisÊòØÂçïÁ∫øÁ®ãÔºålua‰πüÊòØÂçïÁ∫øÁ®ãÔºå‰∏çÁî®ÊãÖÂøÉ‰ºöÂêåÊó∂ÂàùÂßãÂåñ‰∏§Ê¨°„ÄÇ ‰∏ãÈù¢È¶ñÂÖàÂÜô‰∏Ä‰∏™Êé•Âè£ÔºåÊ†πÊçÆskuidÊü•ËØ¢Â∫ìÂ≠ò(Â∫ìÂ≠òÂíåÈîÅÂÆöÂ∫ìÂ≠ò)Ôºö 123456789101112@RequestMapping("/query/&#123;skuId&#125;")public ApiResult&lt;Stock&gt; queryStock(@PathVariable long skuId)&#123; ApiResult&lt;Stock&gt; result = new ApiResult(Constants.RESP_STATUS_OK,"Â∫ìÂ≠òÊü•ËØ¢ÊàêÂäü"); Stock stock = new Stock(); stock.setSkuId(skuId); int stockCount = stockService.queryStock(skuId); stock.setStock(stockCount); result.setData(stock); return result;&#125; serviceÂ±ÇÔºö 123456789101112131415161718192021222324252627282930@Overridepublic int queryStock(long skuId) &#123; //ÂÖàÊü•redis Stock stock ; String stockKey = Constants.CACHE_PRODUCT_STOCK+":"+skuId; String stockLockKey = Constants.CACHE_PRODUCT_STOCK_LOCK+":"+skuId; //Âè™ÈúÄË¶ÅÊü•ËØ¢‰∏Ä‰∏™Âç≥ÂèØÔºåÊØîÂ¶ÇÊàëËøôÈáåÂè™Êü•ËØ¢Â∫ìÂ≠òÂ∞±Ë°å Object stockObj = redisTemplate.opsForValue().get(stockKey); Integer stockInRedis = null ; if(stockObj!=null)&#123; stockInRedis = Integer.valueOf(stockObj.toString()); &#125; //Ê≤°ÊúâÔºåÈÇ£‰πàÊàëÂ∞±ÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÂàùÂßãÂåñÂà∞redis‰∏≠ if(stockInRedis==null)&#123; //ÂéªÊï∞ÊçÆÂ∫ìÊü•ËØ¢ ÁÑ∂ÂêéÂØπredisËøõË°åÂàùÂßãÂåñ stock = stockMapper.selectBySkuId(skuId); //‰∏§‰∏™keyÂíå‰∏§‰∏™Â∫ìÂ≠òÂÄºÈÄöËøáluaËÑöÊú¨Â°ûÂà∞redis‰∏≠ //ËøôÈáåÂ¶ÇÊûúÂèëÁîü‰∏§‰∏™Áî®Êà∑Âπ∂ÂèëÂàùÂßãÂåñredisÔºåËÑöÊú¨‰∏≠‰ºöËøõË°åÂà§Êñ≠ÔºåÂ¶ÇÊûúÂ∑≤ÁªèÂàùÂßãÂåñ‰∫ÜÔºåËÑöÊú¨Â∞±‰ºöÂÅúÊ≠¢ÊâßË°å // ËÆæÁΩÆÂ∫ìÂ≠ò‰∏çÂ∫îËØ•Âú®ËøôÈÖçÁΩÆÔºåÂ∫îËØ•ÊòØÂêéÂè∞ÁÆ°ÁêÜÁ≥ªÁªüËøõË°åËÆæÁΩÆÔºåÊâÄ‰ª•Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåËøôÈáåredis‰∏≠Â∫îËØ•ÊòØÂøÖÁÑ∂Â≠òÂú®ÁöÑ //Â¶ÇÊûúÊòØÂú®ÂêéÂè∞ÈÖçÁΩÆÔºåÂ∞±Ê≤°ÊúâÂøÖË¶ÅËøô‰πàÂ§çÊùÇ‰∫Ü redisUtils.skuStockInit(stockKey,stockLockKey,stock.getStock().toString(),stock.getLockStock().toString()); &#125;else&#123; return stockInRedis;//ÁºìÂ≠ò‰∏≠ÊúâÂ∞±Áõ¥Êé•ËøîÂõû &#125; //ÁºìÂ≠òÁªìÊûúÂèØËÉΩ‰ºöËøîÂõûËÆæÁΩÆ‰∏çÊàêÂäüÔºåÊâÄ‰ª•ËøòÊòØËøîÂõûÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÁªìÊûú return stock.getStock();&#125; ÈÇ£‰πàËøô‰∏™Â∑•ÂÖ∑Á±ª‰∏∫Ôºö 123456789101112131415161718192021222324252627282930313233/** * Êü•ÁúãredisÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñÂ•ΩÂ∫ìÂ≠òÂàùÂßãÂÄºÔºåÊ≤°ÊúâÂ∞±ÂàùÂßãÂåñ */public static final String STOCK_CACHE_LUA = "local stock = KEYS[1] " + "local stock_lock = KEYS[2] " + "local stock_val = tonumber(ARGV[1]) " + "local stock_lock_val = tonumber(ARGV[2]) " + "local is_exists = redis.call(\"EXISTS\", stock) " + "if is_exists == 1 then " + " return 0 " + "else " + " redis.call(\"SET\", stock, stock_val) " + " redis.call(\"SET\", stock_lock, stock_lock_val) " + " return 1 " + "end"; /** * @Description ÁºìÂ≠òskuÂ∫ìÂ≠ò ‰ª•ÂèäÈîÅÂÆöÂ∫ìÂ≠ò */public boolean skuStockInit(String stockKey,String stockLockKey,String stock,String stockLock)&#123; //Áî®jedisÂéªÊâßË°åluaËÑöÊú¨ ËæìÂÖ•ÁöÑÂèÇÊï∞Ë¶ÅÊ≥®ÊÑèÈ°∫Â∫è ÈÉΩÊòØÂÜôÊ≠ªÁöÑ Á¨¨‰∏ÄÁªÑÊòØkeyÔºåÁ¨¨‰∫åÁªÑÊòØstock Object result = redisTemplate.execute((RedisCallback&lt;Object&gt;) redisConnection -&gt; &#123; Jedis jedis = (Jedis)redisConnection.getNativeConnection(); return jedis.eval(STOCK_CACHE_LUA, Collections.unmodifiableList(Arrays.asList(stockKey,stockLockKey)) ,Collections.unmodifiableList(Arrays.asList(stock, stockLock))); &#125;); if (EXCUTE_SUCCESS.equals(result)) &#123; return true; &#125; return false;&#125; ÂØπ‰∫éluaËÑöÊú¨ËøõË°åÁ®çÂæÆÁöÑËß£Èáä‰∏Ä‰∏ãÔºö 12345678910111213141516171819202122//Á¨¨‰∏ÄÁªÑÊï∞ÊçÆÊòØkeyÊï∞ÁªÑÔºõÁ¨¨‰∫åÁªÑÊï∞ÊçÆÊòØargsÊï∞ÁªÑÔºåÊòØ‰∏ékeyÊï∞ÁªÑÂØπÂ∫îÁöÑÂÄºÔºåÂ∞±ÊòØÂ∫ìÂ≠ò//Êàë‰ª¨ËøôÈáåÁ¨¨‰∏ÄÁªÑ‰∏∫[stockKey,stockLockKey],Â∞±ÊòØÂ≠òÂú®redis‰∏≠ÁöÑÂêçÂ≠óÔºåËøôÈáåÊòØÂú®serviceÂ±Ç‰∏≠ÂÆö‰πâÂ•Ω‰∫Ü//Á¨¨‰∫åÁªÑ‰∏∫[50,0]ÔºåËøô‰∏™ÂÄºÂ∞±ÊòØÂèØ‰ª•‰ªéÊï∞ÊçÆÂ∫ìË°®t_stock‰∏≠Êü•ËØ¢Âá∫Êù•ÁöÑ//Âõ†‰∏∫ÊâßË°åËøôÊÆµluaËÑöÊú¨ÁöÑËØùÔºåËØ¥Êòéredis‰∏≠Ê≤°ÊúâÁºìÂ≠òÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÖàÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºåÁÑ∂ÂêéÂ∞ÜÁºìÂ≠òËÆæÁΩÆÂ•Ω//lua‰∏≠ÂÆö‰πâÂèòÈáèÁî®locallocal stock = KEYS[1]local stock_lock = KEYS[2]local stock_val = tonumber(ARGV[1])local stock_lock_val = tonumber(ARGV[2])//ÂÜçÊü•ËØ¢‰∏ÄÈÅçÁºìÂ≠òÊòØÂê¶Â≠òÂú®ÔºåÈò≤Ê≠¢‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂ËøõÊù•ËÆæÁΩÆÁºìÂ≠ò//Â≠òÂú®Â∞±‰∏çÁî®ËÆæÁΩÆÁºìÂ≠ò‰∫ÜÔºåÂê¶ÂàôÂ∞±ËÆæÁΩÆÁºìÂ≠òlocal is_exists = redis.call("EXISTS", stock)if is_exists == 1 then return 0else redis.call("SET", stock, stock_val) redis.call("SET", stock_lock, stock_lock_val) return 1end ÈÇ£‰πàÔºåÂêØÂä®Â∑•Á®ãmama-buy-stockÔºöÂÅáÂ¶ÇÊàëÂéªÊü•ËØ¢skuId=1ÁöÑÂïÜÂìÅÔºö Á¨¨‰∏ÄÊ¨°Â∫ìÂ≠ò‰∏çÂ≠òÂú®ÔºåÈÇ£‰πàÂ∞±‰ºöÂéªÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºö Êàë‰ª¨ÂÜçÊù•ÁúãÁúãredis‰∏≠ÁöÑÊï∞ÊçÆÔºö ‰∏â„ÄÅÊâ£ÂáèÂ∫ìÂ≠ò ‰∏ãÈù¢Êù•ÁúãÁúãÊâ£ÂáèÂ∫ìÂ≠òÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ„ÄÇÂõ†‰∏∫Êèê‰∫§ËÆ¢ÂçïÂêéÔºåÂæÄÂæÄÊòØ‰∏çÊ≠¢‰∏Ä‰ª∂ÂïÜÂìÅÁöÑÔºåÂæÄÂæÄË¥≠Áâ©ËΩ¶ÂÜÖÊúâÂæàÂ§ö‰ª∂ÂïÜÂìÅÔºåÂêåÊó∂ËøáÊù•ÔºåÂÅáËÆæÊúâ‰∫î‰ª∂ÂïÜÂìÅÔºå‰ΩÜÊòØÂÖ∂‰∏≠Âè™Êúâ‰∏Ä‰ª∂ÊöÇÊó∂Ê≤°ÊúâÂ∫ìÂ≠ò‰∫ÜÔºåÈÇ£‰πàÊàëËøòÊòØÂ∏åÊúõÂÖ∂‰ªñÁöÑÂõõ‰ª∂ÂïÜÂìÅËÉΩÂ§üÂçñÂá∫ÂéªÔºåÂè™ÊòØÊ≤°ÊúâÂ∫ìÂ≠òÁöÑÂïÜÂìÅÂ∞±‰∏çÁÆóÈí±‰∫Ü„ÄÇÊâÄ‰ª•Êâ£ÂáèÂ∫ìÂ≠òÁî®‰∏Ä‰∏™mapÊù•Ë£ÖÔºåÂç≥Map&lt;skuId,count&gt; controllerÂ±ÇÔºö 1234567@RequestMapping("/reduce")public ApiResult&lt;Map&lt;Long,Integer&gt;&gt; reduceStock(@RequestBody List&lt;StockReduce&gt; stockReduceList)&#123; ApiResult result = new ApiResult(Constants.RESP_STATUS_OK,"Â∫ìÂ≠òÊâ£ÂáèÊàêÂäü"); Map&lt;Long,Integer&gt; resultMap = stockService.reduceStock(stockReduceList); result.setData(resultMap); return result;&#125; serviceÂ±ÇÔºö 1234567891011121314151617181920212223242526272829303132333435@Override@Transactionalpublic Map&lt;Long, Integer&gt; reduceStock(List&lt;StockReduce&gt; stockReduceList) &#123; Map&lt;Long, Integer&gt; resultMap = new HashMap&lt;&gt;(); //ÈÅçÂéÜÂéªÂáèredis‰∏≠Â∫ìÂ≠òÔºåÂ¢ûÂä†ÈîÅÂÆöÂ∫ìÂ≠ò stockReduceList.stream().forEach(param -&gt; &#123; String stockKey = Constants.CACHE_PRODUCT_STOCK+":"+param.getSkuId(); String stockLockKey = Constants.CACHE_PRODUCT_STOCK_LOCK+":"+param.getSkuId(); Object result = redisUtils.reduceStock(stockKey, stockLockKey, param.getReduceCount().toString(),//incrby‰∏Ä‰∏™Ë¥üÊï∞ÔºåÂ∞±ÊòØÂáè String.valueOf(Math.abs(param.getReduceCount())));//incrby‰∏Ä‰∏™Ê≠£Êï∞ÔºåÂ∞±ÊòØÂä† if(result instanceof Long)&#123; //Â∫ìÂ≠ò‰∏çÂ≠òÂú®ÊàñËÄÖ‰∏çË∂≥ Êâ£ÂáèÂ§±Ë¥• sku‰∏ãÂçïÂ§±Ë¥• ËÆ∞ÂΩï‰∏ãÊù• resultMap.put(param.getSkuId(),-1); &#125;else if (result instanceof List)&#123; //Êâ£ÂáèÊàêÂäü ËÆ∞ÂΩïÊâ£ÂáèÊµÅÊ∞¥ List resultList = ((List) result); int stockAftChange = ((Long)resultList.get(0)).intValue(); int stockLockAftChange = ((Long) resultList.get(1)).intValue(); StockFlow stockFlow = new StockFlow(); stockFlow.setOrderNo(param.getOrderNo()); stockFlow.setSkuId(param.getSkuId()); stockFlow.setLockStockAfter(stockLockAftChange); stockFlow.setLockStockBefore(stockLockAftChange+param.getReduceCount()); stockFlow.setLockStockChange(Math.abs(param.getReduceCount())); stockFlow.setStockAfter(stockAftChange); stockFlow.setStockBefore(stockAftChange+Math.abs(param.getReduceCount())); stockFlow.setStockChange(param.getReduceCount()); stockFlowMapper.insertSelective(stockFlow); resultMap.put(param.getSkuId(),1); &#125; &#125;); return resultMap;&#125; ÂØπ‰∫éredisÁöÑÊìç‰ΩúÔºåÂü∫Êú¨‰∏é‰∏ä‰∏ÄËá¥Ôºö 12345678910111213141516171819202122232425262728293031323334/** * @Description Êâ£ÂáèÂ∫ìÂ≠òluaËÑöÊú¨ * @Return 0 key‰∏çÂ≠òÂú® ÈîôËØØ -1 Â∫ìÂ≠ò‰∏çË∂≥ ËøîÂõûlist Êâ£ÂáèÊàêÂäü */public static final String STOCK_REDUCE_LUA= "local stock = KEYS[1]\n" + "local stock_lock = KEYS[2]\n" + "local stock_change = tonumber(ARGV[1])\n" + "local stock_lock_change = tonumber(ARGV[2])\n" + "local is_exists = redis.call(\"EXISTS\", stock)\n" + "if is_exists == 1 then\n" + " local stockAftChange = redis.call(\"INCRBY\", stock,stock_change)\n" + " if(stockAftChange&lt;0) then\n" + " redis.call(\"DECRBY\", stock,stock_change)\n" + " return -1\n" + " else \n" + " local stockLockAftChange = redis.call(\"INCRBY\", stock_lock,stock_lock_change)\n" + " return &#123;stockAftChange,stockLockAftChange&#125;\n" + " end " + "else \n" + " return 0\n" + "end"; public Object reduceStock(String stockKey,String stockLockKey,String stockChange,String stockLockChange)&#123; Object result = redisTemplate.execute((RedisCallback&lt;Object&gt;) redisConnection -&gt; &#123; Jedis jedis = (Jedis)redisConnection.getNativeConnection(); return jedis.eval(STOCK_REDUCE_LUA, Collections.unmodifiableList(Arrays.asList(stockKey,stockLockKey)) ,Collections.unmodifiableList(Arrays.asList(stockChange, stockLockChange))); &#125;); return result;&#125; Ê≠§Êó∂Ôºå‰∏ÄÊó¶Êï∞ÊçÆÂ∫ìÂèëÁîüÂºÇÂ∏∏ÔºåÈÇ£‰πàÂ∞±‰ºöÂõûÊªöÔºå‰ΩÜÊòØredis‰∏≠ÊòØÊó†Ê≥ïÂõûÊªöÁöÑ„ÄÇËøô‰∏™ÈóÆÈ¢ò‰∏çÁî®ÊãÖÂøÉÔºåÂõ†‰∏∫Êï∞ÊçÆÂ∫ìÂèëÁîüÂºÇÂ∏∏ÊòØÂèäÂÖ∂‰∏•ÈáçÁöÑÈóÆÈ¢òÔºåÊòØÂæàÂ∞ë‰ºöÂèëÁîüÁöÑÔºå‰∏ÄÊó¶ÂèëÁîüÔºåÂè™ÈúÄË¶ÅÂéªËøô‰∏™ÊµÅÊ∞¥ÁöÑË°®‰∏≠ÂéªÊü•ÁúãÊÉÖÂÜµÔºåÁÑ∂ÂêéÂéªÊâßË°åËÑöÊú¨ÂéªÂàùÂßãÂåñËøô‰∏™redisÂç≥ÂèØ„ÄÇÊâÄ‰ª•ÊòØÂèØ‰ª•Ë°•ÊïëÁöÑ„ÄÇ ‰ΩÜÊòØÊé•Âè£ÁöÑÂπÇÁ≠âÊÄßËøòÊ≤°ÊúâÂÅö„ÄÇÈáçÂ§çÂ∞ùËØïË∞ÉÁî®Ëøô‰∏™Êé•Âè£ÔºàÈÄöÂ∏∏ÊòØÂèëÁîüÂú®MQÁöÑÂ§±Ë¥•Èáç‰º†Êú∫Âà∂ÔºåÂÆ¢Êà∑Á´ØÁöÑËøûÁª≠ÁÇπÂáª‰∏ÄËà¨ÊòØÂèØ‰ª•ÈÅøÂÖçÁöÑÔºâÔºåÂèØËÉΩ‰ºöÈáçÂ§çÂáèredisÂ∫ìÂ≠òÂπ∂‰∏îÈáçÂ§çÂú∞ÂéªÊèíÂÖ•ÊµÅÊ∞¥ËÆ∞ÂΩï„ÄÇËøô‰∏™ÈóÆÈ¢òËØ•Â¶Ç‰ΩïËß£ÂÜ≥Âë¢Ôºü Âõõ„ÄÅredisÂàÜÂ∏ÉÂºèÈîÅÊù•ÂÆûÁé∞ÂπÇÁ≠âÊÄß ‰∏ªÊµÅÁöÑÊñπÊ°àÔºåÊØîÂ¶ÇÊúâÁî®‰∏ÄÂº†Ë°®Êù•ÊéßÂà∂ÔºåÊØîÂ¶Ç‰ª•Ëøô‰∏™orderID‰∏∫ÂîØ‰∏Ä‰∏ªÈîÆÔºå‰∏ÄÊó¶ÊèíÂÖ•ÊàêÂäüÔºåÂ∞±ÂèØ‰ª•Ê†πÊçÆËøô‰∏™ÂîØ‰∏Ä‰∏ªÈîÆÁöÑÂ≠òÂú®‰∏éÂê¶Âà§Êñ≠ÊòØÂê¶‰∏∫ÈáçÂ§çËØ∑Ê±ÇÔºà‰πüÂ∞±ÊòØËØ¥ÔºåËøôÈáåÁöÑÊâ£ÂáèÂ∫ìÂ≠òÂíåÊèíÂÖ•ÂéªÈáçË°®ÊîæÂú®‰∏Ä‰∏™‰∫ãÂä°ÈáåÔºåÂéªÈáçË°®‰∏≠Êúâ‰∏Ä‰∏™Â≠óÊÆµ‰∏∫orderIdÔºåÂÖ®Â±ÄÂîØ‰∏Ä‰∏çÈáçÂ§çÔºåÁî®ÂîØ‰∏ÄÁ¥¢ÂºïËøõË°åÁ∫¶ÊùüÔºåÈÇ£‰πàÊèíÂÖ•ÁöÑÊó∂ÂÄôÂà§Êñ≠Ëøô‰∏™ÂéªÈáçË°®ÊòØÂê¶ÂèØ‰ª•ÊèíÂÖ•ÊàêÂäüÔºåÂ¶ÇÊûú‰∏çÊàêÂäüÔºåÈÇ£‰πàÊï∞ÊçÆÂ∫ìÊìç‰ΩúÂÖ®ÈÉ®ÂõûÊªöÔºâ„ÄÇ ÂèØ‰ª•Áî®redisÂàÜÂ∏ÉÂºèÈîÅÁªôËøô‰∏™ËÆ¢Âçï‰∏äÈîÅ„ÄÇ‰ª•ËÆ¢Âçïid‰∏∫ÈîÅÔºå‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñÁ∫øÁ®ãÊù•Êâ£ÂáèÂ∫ìÂ≠òÔºåÊâÄ‰ª•‰∏çÂΩ±ÂìçÊÄßËÉΩ„ÄÇ ÈíàÂØπËøô‰∏™ËÆ¢ÂçïÔºåÁ¨¨‰∏ÄÊ¨°ËÇØÂÆöÊòØÂèØ‰ª•ÂéªÊâ£ÂáèÂ∫ìÂ≠òÁöÑÔºå‰ΩÜÊòØÁ¨¨‰∫åÊ¨°ÂÜçÊé•Êî∂Âà∞Ëøô‰∏™ËØ∑Ê±ÇÔºåÈÇ£‰πàÂ∞±Ë¶ÅËøîÂõûÂ∑≤ÁªèÊàêÂäü‰∫ÜÔºå‰∏çË¶ÅÂÜçÈáçÂ§çÊâ£Âáè„ÄÇ ÂØπ‰∫éreduceStock()Ëøô‰∏™ÊñπÊ≥ïÊúÄÂâçÈù¢Â¢ûÂä†ÈîÅÔºö 123456789//Èò≤Ê≠¢Êâ£ÂáèÂ∫ìÂ≠òÊó∂MQÊ≠£Â∏∏ÈáçËØïÊó∂ÁöÑ‰∏çÂπÇÁ≠â//‰ª•ËÆ¢ÂçïID Âä†‰∏™ÁºìÂ≠òÈîÅ Èò≤Ê≠¢Á®ãÂ∫èÁü≠Êó∂Èó¥ÈáçËØï ÈáçÂ§çÊâ£ÂáèÂ∫ìÂ≠ò ‰∏çÁî®Ëß£ÈîÅ Ëá™Â∑±Ë∂ÖÊó∂Long orderNo = stockReduceList.get(0).getOrderNo();boolean lockResult = redisUtils.distributeLock(Constants.ORDER_RETRY_LOCK+orderNo.toString(),orderNo.toString(),300000);if(!lockResult)&#123; //ÈîÅÂÆöÂ§±Ë¥• ÈáçÂ§çÊèê‰∫§ ËøîÂõû‰∏Ä‰∏™Á©∫map return Collections.EMPTY_MAP;&#125;... 123456789101112131415161718192021222324252627282930313233343536373839404142private static final String LOCK_SUCCESS = "OK";private static final String SET_IF_NOT_EXIST = "NX";private static final String SET_WITH_EXPIRE_TIME = "PX";private static final Long EXCUTE_SUCCESS = 1L;/**luaËÑöÊú¨ Âú®redis‰∏≠ luaËÑöÊú¨ÊâßË°åÊòØ‰∏≤Ë°åÁöÑ ÂéüÂ≠êÁöÑ */private static final String UNLOCK_LUA= "if redis.call('get', KEYS[1]) == ARGV[1] then " + " return redis.call('del', KEYS[1]) " + "else " + " return 0 " + "end";/** * @Description Ëé∑ÂèñÂàÜÂ∏ÉÂºèÈîÅ * @Return boolean */public boolean distributeLock(String lockKey, String requestId, int expireTime)&#123; String result = redisTemplate.execute((RedisCallback&lt;String&gt;) redisConnection -&gt; &#123; JedisCommands commands = (JedisCommands)redisConnection.getNativeConnection(); return commands.set(lockKey,requestId,SET_IF_NOT_EXIST,SET_WITH_EXPIRE_TIME,expireTime);//‰∏ÄÊù°ÂëΩ‰ª§ÂÆûÁé∞setnxÂíåsetexpireËøô‰∫õÊìç‰ΩúÔºåÂéüÂ≠êÊÄß &#125;); if (LOCK_SUCCESS.equals(result)) &#123; return true; &#125; return false;&#125;/** * @Description ÈáäÊîæÂàÜÂ∏ÉÂºèÈîÅ * @Return boolean */public boolean releaseDistributelock(String lockKey, String requestId)&#123; Object result = redisTemplate.execute((RedisCallback&lt;Object&gt;) redisConnection -&gt; &#123; Jedis jedis = (Jedis)redisConnection.getNativeConnection(); return jedis.eval(UNLOCK_LUA, Collections.singletonList(lockKey), Collections.singletonList(requestId));//luaËÑöÊú¨‰∏≠ÂéüÂ≠êÊÄßÂÆûÁé∞ÔºögetÊü•ËØ¢ÂíådeleteÂà†Èô§Ëøô‰∏§‰∏™Êìç‰Ωú &#125;); if (EXCUTE_SUCCESS.equals(result)) &#123; return true; &#125; return false;&#125; Ê≥®ÊÑèÔºåËøôÈáå‰∏çÈúÄË¶ÅÊàë‰ª¨‰∏ªÂä®ÂéªÈáäÊîæÂàÜÂ∏ÉÂºèÈîÅÔºåÂè™Ë¶ÅËÆæÁΩÆ‰∏Ä‰∏™Â§ß‰∫éÈáçËØïÊó∂Èó¥ÁöÑËøáÊúüÊó∂Èó¥Âç≥ÂèØ„ÄÇËÆ©ÂÆÉËá™Â∑±Âà†Èô§„ÄÇ Ê≥®ÊÑèredisÂú®ÈõÜÁæ§‰∏ãÂÅöÂàÜÂ∏ÉÂºèÈîÅÔºåÊúÄÂ•ΩË¶ÅÁî®Redission„ÄÇËøôÈáåÂ¶ÇÊûúÁî®‰∫éÈõÜÁæ§ÔºåÂ¶Ç‰ΩïluaËÑöÊú¨Âú®‰∏Ä‰∏™‰∫ãÂä°ÈáåÂêåÊó∂Êìç‰ΩúÂ§ö‰∏™keyÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúË¶Å‰øùËØÅËøô‰∏™‰∫ãÂä°ÁîüÊïàÔºåÂ∞±ÈúÄË¶Å‰øùËØÅËøôÂá†‰∏™keyÈÉΩË¶ÅÂú®Âêå‰∏Ä‰∏™ËäÇÁÇπ‰∏ä„ÄÇ‰ΩÜÊòØÔºåÊØîÂ¶ÇÊàë‰ª¨ËøôÈáåÁöÑ‰∏§‰∏™keyÔºö 12public static final String CACHE_PRODUCT_STOCK = "product:stock";public static final String CACHE_PRODUCT_STOCK_LOCK = "product:stock:lock"; Âõ†‰∏∫Êàë‰ª¨ËøôÈáåË¶ÅÂêåÊó∂ÂØπÂ∫ìÂ≠òÂíåÈîÅÂÆöÂ∫ìÂ≠òËøô‰∏§‰∏™keyËøõË°åÊìç‰ΩúÔºåÈúÄË¶ÅÊîæÂú®‰∏Ä‰∏™‰∫ãÂä°ÂÜÖÊâßË°åÔºå‰∏çÂ§ÑÁêÜÁöÑËØùÔºå‰∏ÄÊó¶‰ªñ‰ª¨‰∏çÂú®‰∏Ä‰∏™ËäÇÁÇπÔºåÈÇ£‰πà‰∫ãÂä°Â∞±‰∏ç‰ºöÁîüÊïàÔºåËß£ÂÜ≥ÊñπÊ°àÔºö 12public static final String CACHE_PRODUCT_STOCK = "&#123;product:stock&#125;";public static final String CACHE_PRODUCT_STOCK_LOCK = "&#123;product:stock&#125;:lock"; Â¶ÇÊûúÂä†‰∏äËä±Êã¨Âè∑ÔºåÈÇ£‰πàÂú®ËøõË°åËÆ°ÁÆóhashÂÄºÁöÑÊó∂ÂÄôÔºå‰ªñ‰ª¨‰∏§Â∞±‰ºöÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ºöË¢´ÊäïÊîæÂà∞Âêå‰∏Ä‰∏™slot‰∏≠ÔºåËá™ÁÑ∂Â∞±‰øùËØÅ‰∫ÜÂú®Âêå‰∏Ä‰∏™ËäÇÁÇπ‰∏ä„ÄÇ ‰∫î„ÄÅÊµãËØï‰∏Ä‰∏ã]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ELKÂπ≥Âè∞Êê≠Âª∫]]></title>
    <url>%2F2019%2F01%2F23%2Fmiscellany%2F08ELK%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[Âõ†‰∏∫Ë¶ÅÂÆåÊàê‰∫ßÂìÅÁöÑÂÖ®ÊñáÊêúÁ¥¢Ëøô‰∏™ÂäüËÉΩÔºåÊâÄ‰ª•ÈúÄË¶ÅÂáÜÂ§á‰∏Ä‰∏ãESÁöÑÁéØÂ¢É„ÄÇÊú¨ËäÇÂÆâË£ÖELK„ÄÇ ELKÁî±Elasticsearch„ÄÅLogstashÂíåKibana‰∏âÈÉ®ÂàÜÁªÑ‰ª∂ÁªÑÊàê„ÄÇ ÂâçË®Ä ElasticsearchÊòØ‰∏™ÂºÄÊ∫êÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìéÔºåÂÆÉÁöÑÁâπÁÇπÊúâÔºöÂàÜÂ∏ÉÂºèÔºåÈõ∂ÈÖçÁΩÆÔºåËá™Âä®ÂèëÁé∞ÔºåÁ¥¢ÂºïËá™Âä®ÂàÜÁâáÔºåÁ¥¢ÂºïÂâØÊú¨Êú∫Âà∂ÔºårestfulÈ£éÊ†ºÊé•Âè£ÔºåÂ§öÊï∞ÊçÆÊ∫êÔºåËá™Âä®ÊêúÁ¥¢Ë¥üËΩΩÁ≠â„ÄÇ ÁÆÄÂçïÊù•ËØ¥Ôºå‰ªñÊòØ‰∏™ÂÖ®ÊñáÊêúÁ¥¢ÂºïÊìéÔºåÂèØ‰ª•Âø´ÈÄüÂú∞ÂÇ®Â≠ò„ÄÅÊêúÁ¥¢ÂíåÂàÜÊûêÊµ∑ÈáèÊï∞ÊçÆ„ÄÇ LogstashÊòØ‰∏Ä‰∏™ÂÆåÂÖ®ÂºÄÊ∫êÁöÑÂ∑•ÂÖ∑ÔºåÂÆÉÂèØ‰ª•ÊääÂàÜÊï£ÁöÑ„ÄÅÂ§öÊ†∑ÂåñÁöÑÊó•ÂøóÊó•ÂøóÔºåÊàñËÄÖÊòØÂÖ∂‰ªñÊï∞ÊçÆÊ∫êÁöÑÊï∞ÊçÆ‰ø°ÊÅØËøõË°åÊî∂ÈõÜ„ÄÅÂàÜÊûê„ÄÅÂ§ÑÁêÜÔºåÂπ∂Â∞ÜÂÖ∂Â≠òÂÇ®‰æõ‰ª•Âêé‰ΩøÁî®„ÄÇ KibanaÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÂàÜÊûêÂíåÂèØËßÜÂåñÂπ≥Âè∞ÔºåËÆæËÆ°Áî®‰∫éÂíåElasticsearch‰∏ÄËµ∑Â∑•‰Ωú„ÄÇ ‰Ω†Áî®KibanaÊù•ÊêúÁ¥¢ÔºåÊü•ÁúãÔºåÂπ∂ÂíåÂ≠òÂÇ®Âú®ElasticsearchÁ¥¢Âºï‰∏≠ÁöÑÊï∞ÊçÆËøõË°å‰∫§‰∫í„ÄÇ ‰Ω†ÂèØ‰ª•ËΩªÊùæÂú∞ÊâßË°åÈ´òÁ∫ßÊï∞ÊçÆÂàÜÊûêÔºåÂπ∂‰∏î‰ª•ÂêÑÁßçÂõæÊ†á„ÄÅË°®Ê†ºÂíåÂú∞ÂõæÁöÑÂΩ¢ÂºèÂèØËßÜÂåñÊï∞ÊçÆ„ÄÇ Kibana‰ΩøÂæóÁêÜËß£Â§ßÈáèÊï∞ÊçÆÂèòÂæóÂæàÂÆπÊòì„ÄÇÂÆÉÁÆÄÂçïÁöÑ„ÄÅÂü∫‰∫éÊµèËßàÂô®ÁöÑÁïåÈù¢‰Ωø‰Ω†ËÉΩÂ§üÂø´ÈÄüÂàõÂª∫ÂíåÂÖ±‰∫´Âä®ÊÄÅ‰ª™Ë°®ÊùøÔºåÂÆûÊó∂ÊòæÁ§∫ElasticsearchÊü•ËØ¢ÁöÑÂèòÂåñ„ÄÇ ‰∏Ä„ÄÅÂÆâË£ÖES 1.1 È¶ñÂÖàÊòØÂÆâË£ÖJDKÔºö 12345cd /opt/wget --no-cookies --no-check-certificate --header &quot;Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie&quot; &quot;http://download.oracle.com/otn-pub/java/jdk/8u141-b15/336fa29ff2bb4ef291e347e091f7f4a7/jdk-8u141-linux-x64.tar.gz&quot;tar xzf jdk-8u141-linux-x64.tar.gz 1.2 Ê∑ªÂä†ÁéØÂ¢ÉÂèòÈáèÔºö 123456789101112vim /etc/profileJAVA_HOME=/opt/jdk1.8.0_141JAVA_JRE=$JAVA_HOME/jreCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/libPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/binexport JAVA_HOME JRE_HOME CLASS_PATH PATHsource /etc/profilejava -version 1.3 ‰∏ãËΩΩ6.2.4ÁâàÊú¨Ôºö 123456wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.tar.gztar -xzvf elasticsearch-6.2.4.tar.gztar -zxvf elasticsearch-6.2.4.tar.gzmv elasticsearch-6.2.4 elasticsearch 1.4 ÈÖçÁΩÆsysctl.conf 1234567891011#‰øÆÊîπsysctlÈÖçÁΩÆvim /etc/sysctl.conf #Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆvm.max_map_count=262144 #ËÆ©ÈÖçÁΩÆÁîüÊïàsysctl -p #Êü•ÁúãÈÖçÁΩÆÁöÑÊï∞ÁõÆsysctl -a|grep vm.max_map_count 1.5 elasticsearch‰ªé5.0ÁâàÊú¨‰πãÂêé‰∏çÂÖÅËÆ∏rootË¥¶Êà∑ÂêØÂä® 1234567891011121314151617181920#Ê∑ªÂä†Áî®Êà∑adduser dev #ËÆæÂÆöÂØÜÁ†Åpasswd dev #Ê∑ªÂä†ÊùÉÈôêchown -R dev /opt/elasticsearch #ÂàáÊç¢Áî®Êà∑su dev #Êü•ÁúãÂΩìÂâçÁî®Êà∑who am i #ÂêØÂä®./elasticsearch/bin/elasticsearch #ÂêéÂè∞ÂêØÂä®./elasticsearch/bin/elasticsearch -d 1.6 ÈÖçÁΩÆlimits.conf 123456789101112131415vim /etc/security/limits.conf Êää* soft nofile 65535* hard nofile 65535 Êîπ‰∏∫* soft nofile 65536* hard nofile 65536 #ÂàáÊç¢Áî®Êà∑su dev #Êü•ÁúãÈÖçÁΩÆÊòØÂê¶ÁîüÊïàulimit -Hn 1.7 ÈÖçÁΩÆÊâÄÊúâÁî®Êà∑ËÆøÈóÆ 1vim /opt/elasticsearch/config/elasticsearch.yml 1.8 Ê∑ªÂä†‰∏Ä‰∏ãÂÜÖÂÆπ 1network.host: 0.0.0.0 1.9 ÈáçÂêØ 12ps -ef | grep elastickill -9 xxxx 1.10 ÊµãËØïÔºö 1curl http://localhost:9200/ ÊòæÁ§∫Ôºö 123456789101112131415&#123; &quot;name&quot; : &quot;MmiaBfA&quot;, &quot;cluster_name&quot; : &quot;elasticsearch&quot;, &quot;cluster_uuid&quot; : &quot;zjX-q5PDRLyrWMy5TiBDkw&quot;, &quot;version&quot; : &#123; &quot;number&quot; : &quot;6.2.4&quot;, &quot;build_hash&quot; : &quot;ccec39f&quot;, &quot;build_date&quot; : &quot;2018-04-12T20:37:28.497551Z&quot;, &quot;build_snapshot&quot; : false, &quot;lucene_version&quot; : &quot;7.2.1&quot;, &quot;minimum_wire_compatibility_version&quot; : &quot;5.6.0&quot;, &quot;minimum_index_compatibility_version&quot; : &quot;5.0.0&quot; &#125;, &quot;tagline&quot; : &quot;You Know, for Search&quot;&#125; Â∞±ËØ¥ÊòéÊàêÂäü‰∫Ü„ÄÇ ‰∫å„ÄÅÂÆâË£ÖKibana 6.2.4 1234567wget https://artifacts.elastic.co/downloads/kibana/kibana-6.2.4-linux-x86_64.tar.gztar -zxvf kibana-6.2.4-linux-x86_64.tar.gzmv kibana-6.2.4-linux-x86_64 kibanavim /opt/kibana/config/kibana.yml 2.1 Ê∑ªÂä†‰ª•‰∏ãÂÜÖÂÆπÔºö 123server.port: 5601server.host: &quot;0.0.0.0&quot;elasticsearch.url: &quot;http://127.0.0.1:9200&quot; 2.2 ÂàáÊç¢Âà∞binÁõÆÂΩï‰∏ãÔºåÂêØÂä®Âç≥ÂèØ„ÄÇ 12345#‰∏çËÉΩÂÖ≥Èó≠ÁªàÁ´Ø./kibana #ÂèØÂÖ≥Èó≠ÁªàÁ´Ønohup ./kibana &amp; 2.3 ÂºÄÊîæÈò≤ÁÅ´Â¢ôÂíåÂÆâÂÖ®ÁªÑÂØπÂ∫îÁöÑËøô‰∏™Á´ØÂè£ ÊµèËßàÂô®ËÆøÈóÆÔºöhttp://106.14.163.235:5601 ÁúãÂà∞‰∏Ä‰∏™ÊéßÂà∂Âè∞È°µÈù¢Â∞±ÊàêÂäüÂï¶„ÄÇ 2.4 ÂÖ≥Èó≠Ëøô‰∏™ËøõÁ®ã 1234567891011121314ps -ef|grep kibana ps -ef|grep 5601 ÈÉΩÊâæ‰∏çÂà∞ Â∞ùËØï ‰ΩøÁî® fuser -n tcp 5601 kill -9 Á´ØÂè£ ÂêØÂä®Âç≥ÂèØ ./kibanaÊàñËÄÖÂéªËøô‰∏™ÁõÆÂΩï‰∏ãÁöÑ.outÊó•Âøó‰∏≠ÂèØ‰ª•ÁúãÂà∞ÁúãÂà∞ÂÆÉÂç†Áî®ÁöÑpid ‰∏â„ÄÅlogstash 1234567891011# ‰∏ãËΩΩwget https://artifacts.elastic.co/downloads/logstash/logstash-6.2.4.tar.gz# Ëß£Âéãtar -zxvf logstash-6.2.4.tar.gz# ÈáçÂëΩÂêçmv logstash-6.2.4.tar.gz logstash# ËøõÂÖ•cd logstash 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061# Êñ∞Âª∫‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂ ÊàëËøôÈáåÊòØmysqltones.confinput &#123; stdin &#123; &#125; jdbc &#123; jdbc_connection_string =&gt; &quot;jdbc:mysql://127.0.0.1:3306/mama-buy-trade&quot; jdbc_user =&gt; &quot;root&quot; jdbc_password =&gt; &quot;root&quot; jdbc_driver_library =&gt; &quot;/opt/logstash/mysql-connector-java-5.1.46-bin.jar&quot; # the name of the driver class for mysql jdbc_driver_class =&gt; &quot;com.mysql.jdbc.Driver&quot; jdbc_paging_enabled =&gt; &quot;true&quot; jdbc_page_size =&gt; &quot;50000&quot; # mysqlÊñá‰ª∂, ‰πüÂèØ‰ª•Áõ¥Êé•ÂÜôSQLËØ≠Âè•Âú®Ê≠§Â§ÑÔºåÂ¶Ç‰∏ãÔºö statement =&gt; &quot;SELECT * from t_product&quot; # statement_filepath =&gt; &quot;/opt/logstash/conf/jdbc.sql&quot; # ËøôÈáåÁ±ª‰ººcrontab,ÂèØ‰ª•ÂÆöÂà∂ÂÆöÊó∂Êìç‰ΩúÔºåÊØîÂ¶ÇÊØè10ÂàÜÈíüÊâßË°å‰∏ÄÊ¨°ÂêåÊ≠•(ÂàÜ Êó∂ Â§© Êúà Âπ¥) schedule =&gt; &quot;*/10 * * * *&quot; type =&gt; &quot;jdbc&quot; # ÊòØÂê¶ËÆ∞ÂΩï‰∏äÊ¨°ÊâßË°åÁªìÊûú, Â¶ÇÊûú‰∏∫Áúü,Â∞Ü‰ºöÊää‰∏äÊ¨°ÊâßË°åÂà∞ÁöÑ tracking_column Â≠óÊÆµÁöÑÂÄºËÆ∞ÂΩï‰∏ãÊù•,‰øùÂ≠òÂà∞ last_run_metadata_path ÊåáÂÆöÁöÑÊñá‰ª∂‰∏≠ record_last_run =&gt; &quot;true&quot; # ÊòØÂê¶ÈúÄË¶ÅËÆ∞ÂΩïÊüê‰∏™column ÁöÑÂÄº,Â¶ÇÊûúrecord_last_run‰∏∫Áúü,ÂèØ‰ª•Ëá™ÂÆö‰πâÊàë‰ª¨ÈúÄË¶Å track ÁöÑ column ÂêçÁß∞ÔºåÊ≠§Êó∂ËØ•ÂèÇÊï∞Â∞±Ë¶Å‰∏∫ true. Âê¶ÂàôÈªòËÆ§ track ÁöÑÊòØ timestamp ÁöÑÂÄº. use_column_value =&gt; &quot;true&quot; # Â¶ÇÊûú use_column_value ‰∏∫Áúü,ÈúÄÈÖçÁΩÆÊ≠§ÂèÇÊï∞. track ÁöÑÊï∞ÊçÆÂ∫ì column Âêç,ËØ• column ÂøÖÈ°ªÊòØÈÄíÂ¢ûÁöÑ. ‰∏ÄËà¨ÊòØmysql‰∏ªÈîÆ tracking_column =&gt; &quot;id&quot; last_run_metadata_path =&gt; &quot;/opt/logstash/conf/last_id&quot; # ÊòØÂê¶Ê∏ÖÈô§ last_run_metadata_path ÁöÑËÆ∞ÂΩï,Â¶ÇÊûú‰∏∫ÁúüÈÇ£‰πàÊØèÊ¨°ÈÉΩÁõ∏ÂΩì‰∫é‰ªéÂ§¥ÂºÄÂßãÊü•ËØ¢ÊâÄÊúâÁöÑÊï∞ÊçÆÂ∫ìËÆ∞ÂΩï clean_run =&gt; &quot;false&quot; # ÊòØÂê¶Â∞Ü Â≠óÊÆµ(column) ÂêçÁß∞ËΩ¨Â∞èÂÜô lowercase_column_names =&gt; &quot;false&quot; &#125;&#125;# Ê≠§Â§ÑÊàë‰∏çÂÅöËøáÊª§Â§ÑÁêÜfilter &#123;&#125;output &#123; # ËæìÂá∫Âà∞elasticsearchÁöÑÈÖçÁΩÆ elasticsearch &#123; hosts =&gt; [&quot;127.0.0.1:9200&quot;] index =&gt; &quot;jdbc&quot; # Â∞Ü&quot;_id&quot;ÁöÑÂÄºËÆæ‰∏∫mysqlÁöÑautoidÂ≠óÊÆµ document_id =&gt; &quot;%&#123;id&#125;&quot; template_overwrite =&gt; true &#125; # ËøôÈáåËæìÂá∫Ë∞ÉËØïÔºåÊ≠£ÂºèËøêË°åÊó∂ÂèØ‰ª•Ê≥®ÈáäÊéâ stdout &#123; codec =&gt; json_lines &#125;&#125; 12# ÂêØÂä®./bin/logstash -f ./mysqltones.conf ÁúãÂà∞Ëøô‰∏™Â∞±ËØ¥ÊòéÊàêÂäü‰∫ÜÔºö ÂÆâË£ÖmysqlÊï∞ÊçÆÂ∫ì Ëøô‰∏ÄÊ≠•Ë¶ÅÂú®ÊâßË°ålogstash‰πãÂâçÊêûÂÆöÔºåÊàëÁöÑÊòØÈòøÈáå‰∫ëcentos7.3ÁâàÊú¨ÔºåmysqlÁâàÊú¨ÊòØ5.7ÔºåÂÆâË£ÖËøáÁ®ãÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839# ‰∏ãËΩΩMySQLÊ∫êÂÆâË£ÖÂåÖ: wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm# ÂÆâË£ÖMySQLÊ∫êÔºöyum localinstall mysql57-community-release-el7-8.noarch.rpm # Ê£ÄÊü•MySQLÊ∫êÂÆâË£ÖÊÉÖÂÜµÔºö yum repolist enabled | grep &quot;mysql.*-community.*&quot;# ÂÆâË£ÖMySQL: yum install mysql-community-server# ÂêØÂä®MySQL: systemctl start mysqld# Êü•ÁúãMySQLÁä∂ÊÄÅ: systemctl status mysqld# ËÆæÁΩÆÂºÄÊú∫ÂêØÂä®MySQLÔºösystemctl enable mysqld systemctl daemon-reload# Êü•ÊâæÂπ∂‰øÆÊîπMySQLÈªòËÆ§ÂØÜÁ†ÅÔºàÊ≥®ÊÑèÂØÜÁ†ÅË¶ÅÁ¨¶ÂêàËßÑËåÉÔºåÂê¶Âàô‰ºöÂ§±Ë¥•ÔºâÔºögrep &apos;temporary password&apos; /var/log/mysqld.log mysql -uroot -p alter user root@localhost identified by &apos;‰Ω†ÁöÑÊñ∞ÂØÜÁ†Å&apos;;# ËøúÁ®ãËøûÊé•ÊµãËØïÊ∑ªÂä†ËøúÁ®ãË¥¶Êà∑ÔºöGRANT ALL PRIVILEGES ON *.* TO &apos;Áî®Êà∑&apos;@&apos;%&apos; IDENTIFIED BY &apos;ÂØÜÁ†Å&apos; WITH GRANT OPTION;# Á´ãÂç≥ÁîüÊïàÔºöflush privileges;# ÈÄÄÂá∫MySQLÔºöexit# ÊúÄÂêéËøúÁ®ãÂ∞ÜÊï∞ÊçÆÁªôÂØºÂÖ•Êï∞ÊçÆÂ∫ì ÂÆâË£ÖÂàÜËØçÂô® ik_max_wordÊòØÂàÜËØçÊØîËæÉÁªÜËÖªÁöÑ‰∏ÄÊ¨æÔºåÊàë‰ª¨Â∞±Áî®ÂÆÉÊù•ÂÅöÂàÜËØçÔºåÈ¶ñÂÖàÈúÄË¶ÅÂÆâË£Ö‰∏Ä‰∏ãÔºö 12345678# Áõ¥Êé•ÂÆâË£Ö./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.2.4/elasticsearch-analysis-ik-6.2.4.zip # ÈáçÊñ∞ÂêØÂä®ESps -ef | grep elastickill -9 xxxxsu dev./bin/elasticsearch -d ÂØπËøô‰∏™ÂàÜËØçÂô®Âú®kibana‰∏≠ËøõË°åÊµãËØïÔºö ‰∏ãÈù¢ÁªìÂêàÊï∞ÊçÆÂ∫ìÊ®°Êãü‰∏Ä‰∏ãÔºö]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Curator]]></title>
    <url>%2F2019%2F01%2F23%2Fmiscellany%2F07Curator%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%2F</url>
    <content type="text"><![CDATA[‰ªéÊäÄÊúØËßíÂ∫¶Âá∫ÂèëÔºåÊ≥®ÂÜå‰∏Ä‰∏™ÁΩëÁ´ôÔºåÂÜçÈ´òÂπ∂ÂèëÁöÑÊó∂ÂÄôÔºåÊúâÂèØËÉΩÂá∫Áé∞Áî®Êà∑ÂêçÈáçÂ§çËøôÊ†∑ÁöÑÈóÆÈ¢òÔºàËôΩÁÑ∂‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÈóÆÈ¢òÔºâÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Âë¢Ôºü ‰ªéÊï∞ÊçÆÂ∫ìËßíÂ∫¶ÔºåÂØπ‰∫éÂçïË°®ÔºåÊàëÂèØ‰ª•Áî®select .. for updateÊÇ≤ËßÇÈîÅÂÆûÁé∞ÔºåÊàñËÄÖÁî®versionËøôÁßç‰πêËßÇÈîÅÁöÑÊÄùÊÉ≥„ÄÇ Êõ¥Â•ΩÁöÑÊñπÊ≥ïÊòØÂ∞ÜËøô‰∏™Â≠óÊÆµÊ∑ªÂä†ÂîØ‰∏ÄÁ¥¢ÂºïÔºåÁî®Êï∞ÊçÆÂ∫ìÊù•‰øùËØÅ‰∏ç‰ºöÈáçÂ§ç„ÄÇ‰∏ÄÊó¶ÊèíÂÖ•ÈáçÂ§çÔºåÈÇ£‰πàÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÁ®ãÂ∫èÂ∞±ÂèØ‰ª•ÊçïËé∑Âà∞„ÄÇ ‰ΩÜÊòØÔºåÂÅáÂ¶ÇÊàë‰ª¨ËøôÈáåÂàÜË°®‰∫ÜÔºå‰ª•‰∏äÈÉΩÊòØÈíàÂØπÂçïË°®ÔºåÁ¨¨‰∏ÄÁßçÊñπÊ°àÊòØÈîÅË°®Ôºå‰∏çË°åÔºåËÆæÁΩÆÂîØ‰∏ÄÁ¥¢ÂºïÊòØÊ≤°ÊúâÁî®„ÄÇÊÄé‰πàÂäûÂë¢Ôºü Ëß£ÂÜ≥ÊñπÊ°àÔºöÁî®ZKÂÅö‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÈîÅ„ÄÇ È¶ñÂÖàÂáÜÂ§á‰∏Ä‰∏™ZKÂÆ¢Êà∑Á´ØÔºåÁî®ÁöÑÊòØCuratorÊù•ËøûÊé•Êàë‰ª¨ÁöÑZKÔºö 1234567891011121314151617181920@Componentpublic class ZkClient &#123; @Autowired private Parameters parameters; @Bean public CuratorFramework getZkClient()&#123; CuratorFrameworkFactory.Builder builder= CuratorFrameworkFactory.builder() .connectString(parameters.getZkHost()) .connectionTimeoutMs(3000) .retryPolicy(new RetryNTimes(5, 10)); CuratorFramework framework = builder.build(); framework.start(); return framework; &#125;&#125; Ê≥®ÂÜåÁî®‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÈîÅÊù•ÊéßÂà∂Ôºö 1234567891011121314151617181920212223242526272829303132333435@Overridepublic void registerUser(User user) throws Exception &#123; InterProcessLock lock = null; try&#123; lock = new InterProcessMutex(zkClient, Constants.USER_REGISTER_DISTRIBUTE_LOCK_PATH); boolean retry = true; do&#123; if (lock.acquire(3000, TimeUnit.MILLISECONDS))&#123; //Êü•ËØ¢ÈáçÂ§çÁî®Êà∑ User repeatedUser = userMapper.selectByEmail(user.getEmail()); if(repeatedUser!=null)&#123; throw new MamaBuyException("Áî®Êà∑ÈÇÆÁÆ±ÈáçÂ§ç"); &#125; user.setPassword(passwordEncoder.encode(user.getPassword())); user.setNickname("Á†ÅÁ†ÅË¥≠Áî®Êà∑"+user.getEmail()); userMapper.insertSelective(user); //Ë∑≥Âá∫Âæ™ÁéØ retry = false; &#125; //ÂèØ‰ª•ÈÄÇÂΩì‰ºëÊÅØ‰∏Ä‰ºö...‰πüÂèØ‰ª•ËÆæÁΩÆÈáçÂ§çÊ¨°Êï∞Ôºå‰∏çË¶ÅÊó†ÈôêÂæ™ÁéØ &#125;while (retry); &#125;catch (Exception e)&#123; log.error("Áî®Êà∑Ê≥®ÂÜåÂºÇÂ∏∏",e); throw e; &#125;finally &#123; if(lock != null)&#123; try &#123; lock.release(); log.info(user.getEmail()+Thread.currentThread().getName()+"ÈáäÊîæÈîÅ"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; ÊÄùË∑ØÈùûÂ∏∏ÁÆÄÂçïÔºåÂ∞±ÊòØÂÖàÂ∞ùËØï‰∏äÈîÅÔºåÂç≥acquireÔºå‰ΩÜÊòØÊúâÂèØËÉΩÂ§±Ë¥•ÔºåÊâÄ‰ª•ËøôÈáåÁî®‰∏Ä‰∏™Ë∂ÖÊó∂Êó∂Èó¥ÔºåÂç≥3000ms‰πãÂÜÖ‰∏ä‰∏ç‰∫ÜÈîÅÂ∞±Â§±Ë¥•ÔºåËøõÂÖ•‰∏ã‰∏ÄÊ¨°Âæ™ÁéØ„ÄÇÊúÄÂêéÈáäÊîæÈîÅÂç≥ÂèØ„ÄÇ okÔºåËøôÈáåË¶ÅÊù•ËØ¥ËØ¥ZKÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ‰∫Ü„ÄÇËøôÈáåÁî®‰∫ÜÂºÄÊ∫êÂÆ¢Êà∑Á´ØCuratorÔºå‰ªñÂØπ‰∫éÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅËøõË°å‰∫ÜÂ∞ÅË£ÖÔºå‰ΩÜÊòØÔºåÊàëËøòÊòØÊÉ≥‰∫ÜËß£‰∏Ä‰∏ãÂÆÉÁöÑÂÆûÁé∞ÂéüÁêÜÔºö ÊØè‰∏™ÂÆ¢Êà∑Á´ØÂØπÊüê‰∏™ÊñπÊ≥ïÂä†ÈîÅÊó∂ÔºåÂú®zookeeper‰∏äÁöÑ‰∏éËØ•ÊñπÊ≥ïÂØπÂ∫îÁöÑÊåáÂÆöËäÇÁÇπÁöÑÁõÆÂΩï‰∏ãÔºåÁîüÊàê‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÁû¨Êó∂ÊúâÂ∫èËäÇÁÇπ„ÄÇ Âà§Êñ≠ÊòØÂê¶Ëé∑ÂèñÈîÅÁöÑÊñπÂºèÂæàÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÂà§Êñ≠ÊúâÂ∫èËäÇÁÇπ‰∏≠Â∫èÂè∑ÊúÄÂ∞èÁöÑ‰∏Ä‰∏™„ÄÇ ÂΩìÈáäÊîæÈîÅÁöÑÊó∂ÂÄôÔºåÂè™ÈúÄÂ∞ÜËøô‰∏™Áû¨Êó∂ËäÇÁÇπÂà†Èô§Âç≥ÂèØ„ÄÇÂêåÊó∂ÔºåÂÖ∂ÂèØ‰ª•ÈÅøÂÖçÊúçÂä°ÂÆïÊú∫ÂØºËá¥ÁöÑÈîÅÊó†Ê≥ïÈáäÊîæÔºåËÄå‰∫ßÁîüÁöÑÊ≠ªÈîÅÈóÆÈ¢ò„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÊúÄÂ∞èÁöÑÈÇ£‰∏™ËäÇÁÇπÂ∞±ÊòØLeaderÔºåËøõÊù•Âà§Êñ≠ÊòØ‰∏çÊòØ‰∏∫ÈÇ£‰∏™ËäÇÁÇπÔºåÊòØÁöÑËØùÂ∞±ÂèØ‰ª•Ëé∑ÂèñÂà∞ÈîÅÔºåÂèç‰πã‰∏çË°å„ÄÇ ‰∏∫‰ªÄ‰πà‰∏çËÉΩÈÄöËøáÂ§ßÂÆ∂‰∏ÄËµ∑ÂàõÂª∫ËäÇÁÇπÔºåÂ¶ÇÊûúË∞ÅÊàêÂäü‰∫ÜÂ∞±ÁÆóËé∑ÂèñÂà∞‰∫ÜÈîÅ„ÄÇ Â§ö‰∏™clientÂàõÂª∫‰∏Ä‰∏™ÂêåÂêçÁöÑËäÇÁÇπÔºåÂ¶ÇÊûúËäÇÁÇπË∞ÅÂàõÂª∫ÊàêÂäüÈÇ£‰πàË°®Á§∫Ëé∑ÂèñÂà∞‰∫ÜÈîÅÔºåÂàõÂª∫Â§±Ë¥•Ë°®Á§∫Ê≤°ÊúâËé∑ÂèñÂà∞ÈîÅ„ÄÇ Á≠îÔºö‰ΩøÁî®‰∏¥Êó∂È°∫Â∫èËäÇÁÇπÂèØ‰ª•‰øùËØÅËé∑ÂæóÈîÅÁöÑÂÖ¨Âπ≥ÊÄßÔºåÂèäË∞ÅÂÖàÊù•Ë∞ÅÂ∞±ÂÖàÂæóÂà∞ÈîÅÔºåËøôÁßçÊñπÂºèÊòØÈöèÊú∫Ëé∑ÂèñÈîÅÔºå‰ºöÈÄ†ÊàêÊó†Â∫èÂíåÈ••È•ø„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Session]]></title>
    <url>%2F2019%2F01%2F23%2Fmiscellany%2F06Spring%20Session%2F</url>
    <content type="text"><![CDATA[Âú®Âçï‰ΩìÂ∫îÁî®‰∏≠ÔºåÊàë‰ª¨ÁªèÂ∏∏Áî®http sessionÂéªÁÆ°ÁêÜÁî®Êà∑‰ø°ÊÅØÔºå‰ΩÜÊòØÂà∞‰∫ÜÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºåÊòæÁÑ∂ÊòØ‰∏çË°åÁöÑÔºåÂõ†‰∏∫sessionÂØπ‰∫é‰∏çÂêåÁöÑÊú∫Âô®ÊòØÈöîÁ¶ªÁöÑÔºåËÄåhttpÊú¨Ë∫´ÊòØÊó†Áä∂ÊÄÅÁöÑÔºåÈÇ£‰πàÂ∞±Êó†Ê≥ïÂà§Êñ≠Âá∫Áî®Êà∑Âú®Âì™‰∏Ä‰∏™ÊúçÂä°Âô®‰∏äÁôªÈôÜÁöÑ„ÄÇËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÊúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑÂú∞ÊñπÂ≠òÂÇ®Áî®Êà∑session„ÄÇspring sessionÂèØ‰ª•ÂÅöÂà∞Êó†‰ª£Á†Å‰æµÂÖ•ÁöÑÊñπÂºèÂÆûÁé∞ÂàÜÂ∏ÉÂºèsessionÂ≠òÂÇ®„ÄÇ Âú®spring bootÂºÄÂèë‰∏≠ÔºåÊàë‰ª¨ÂÖàÊ≥®ÂÜåÁõ∏Â∫îbeanÂπ∂‰∏îÊâìÂºÄÁõ∏Â∫îÁöÑÊ≥®Ëß£Ôºö 1234567891011121314151617181920212223242526272829@Configuration@EnableRedisHttpSession //(maxInactiveIntervalInSeconds = 604800)//sessionË∂ÖÊó∂public class HttpSessionConfig &#123; @Autowired private Parameters parameters; @Bean public HttpSessionStrategy httpSessionStrategy()&#123; return new HeaderHttpSessionStrategy(); &#125; @Bean public JedisConnectionFactory connectionFactory()&#123; JedisConnectionFactory connectionFactory = new JedisConnectionFactory(); String redisHost = parameters.getRedisNode().split(":")[0]; int redisPort = Integer.valueOf(parameters.getRedisNode().split(":")[1]); connectionFactory.setTimeout(2000); connectionFactory.setHostName(redisHost); connectionFactory.setPort(redisPort);// connectionFactory.setPassword(parameters.getRedisAuth()); return connectionFactory; &#125;&#125; okÔºåËøôÊ†∑Â≠êÂÖ∂ÂÆûÂ∞±ÈÖçÁΩÆÂ•Ω‰∫ÜÔºå‰∏ÄÂºÄÂßãÊàë‰πü‰∫ëÈáåÈõæÈáåÁöÑÔºåËøôÊòØÂï•Áé©ÊÑèÔºü ÂÖ∂ÂÆûÂÆòÁΩëÁöÑÊñáÊ°£‰∏≠ËÆ≤ÁöÑÊòØÊúÄÂáÜÁ°ÆÁöÑ„ÄÇÊâÄ‰ª•ËøòÊòØÂÆòÁΩëÁúãÁúãÂêßÔºÅ okÔºåÊù•spring sessionÁöÑÂÆòÁΩë(https://spring.io/projects/spring-session)Êù•ÁúãÁúãÊääÔºåÊàë‰ª¨Êù•ÁúãÁúã1.3.4GAÁâàÊú¨ÁöÑÊñáÊ°£(https://docs.spring.io/spring-session/docs/1.3.4.RELEASE/reference/html5/#httpsession-rest). spring sessionÂèØ‰ª•Â≠òÂú®ÂæàÂ§ö‰ªãË¥®‰∏≠ÔºåÊØîÂ¶ÇÊàë‰ª¨ÁöÑÊï∞ÊçÆÊ∫êÔºåÊØîÂ¶ÇredisÔºåÁîöËá≥ÊòØmongodbÁ≠â„ÄÇ‰ΩÜÊòØÊàë‰ª¨Â∏∏Áî®ÁöÑÊòØÂ≠òÂú®redis‰∏≠ÔºåÁªìÂêàredisÁöÑËøáÊúüÊú∫Âà∂Êù•ÂÅö„ÄÇ ÊâÄ‰ª•ÂÖ∂ÂÆûÊàë‰ª¨Âè™Ë¶ÅÂÖ≥ÂøÉÂ¶Ç‰ΩïË∑üredisÊï¥ÂêàÔºå‰ª•ÂèärestfulÊé•Âè£„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞‰∏ÄÂºÄÂßãÊñáÊ°£Â∞±ÂëäËØâÊàë‰ª¨Ë¶ÅÈÖçÁΩÆ‰∏Ä‰∏ãHttpSessionStrategyÂíåÂ≠òÂÇ®‰ªãË¥®„ÄÇ‰ªéHttpSessionStrategyËØ≠‰πâÂ∞±ËÉΩÂ§ßËá¥ÁúãÂá∫ÈÖçÁΩÆÁöÑÊòØÂÆÉÁöÑÁ≠ñÁï•ÔºåÊòØÂü∫‰∫éheaderÁöÑÁ≠ñÁï•„ÄÇËøô‰∏™ÊòØ‰ªÄ‰πàÊÑèÊÄùÔºå‰∏ãÈù¢‰ºöÊèêÂà∞„ÄÇ ÈÇ£‰πàÊàë‰ª¨Â∞±Êù•ÁúãÁúãÊñáÊ°£ÂêßÔºÅ Â•Ω‰∫ÜÔºåÊàë‰ª¨Áü•ÈÅì‰∫ÜÂÆÉÁöÑÂü∫Êú¨ÂéüÁêÜÔºå‰∏ãÈù¢Êù•ÁúãÁúãÊòØÂ¶Ç‰ΩïÂú®restfulÊé•Âè£‰∏≠ÂÆûÁé∞Áî®Êà∑sessionÁöÑÁÆ°ÁêÜÁöÑÔºö ‰πüÂ∞±ÊòØËØ¥Ë¶ÅÊÉ≥Âú®restfulÊé•Âè£Â∫îÁî®‰∏≠Áî®ËøôÁßçÊñπÂºèÔºåÁõ¥Êé•ÂëäËØâspring session:return new HeaderHttpSessionStrategy();Âç≥ÂèØ„ÄÇËøõÂÖ•Ê∫êÁ†ÅÊàë‰ª¨Â∞±‰ºöÁü•ÈÅìÔºåÂÆÉÈªòËÆ§ÁªôËøô‰∏™headerÈáåÈù¢ÊîæÁΩÆÁöÑ‰∏ÄÊù°Á±ª‰ºº‰∫étokenÁöÑÂêçÂ≠óÊòØprivate String headerName = &quot;x-auth-token&quot;;„ÄÇ ÈÇ£‰πàÂú®Áî®Êà∑ÁôªÈôÜÊàêÂäü‰πãÂêéÔºåÂà∞Â∫ïÂ≠òÂà∞ÊòØ‰ªÄ‰πàÂë¢ÔºåÂÖàÊù•ÁúãÁúãÂìçÂ∫îÊï∞ÊçÆÁöÑheaderÈáåÈù¢ÊòØ‰ªÄ‰πàÔºö Ëøô‰∏Ä‰∏≤Êï∞Â≠óÊ≠£Â•ΩÂèØ‰ª•Ë∑üredis‰∏≠ÂØπÂ∫î‰∏äÔºåÊàë‰ª¨ÂèØ‰ª•ÂÖàÊù•redis‰∏≠ÁúãÁúãÂà∞Â∫ïÂú®ÈáåÈù¢Â≠òÂÇ®‰∫ÜÂï•Áé©ÊÑèÔºö Êàë‰ª¨Â∑≤ÁªèÁúãÂà∞‰∫ÜÊÉ≥Ë¶ÅÁúãÂà∞ÁöÑ‰∏Ä‰∏≤Â≠óÁ¨¶‰∏≤ÔºåËøôÈáåËß£Èáä‰∏Ä‰∏ãredis‰∏≠Â≠òÂÇ®ÁöÑ‰∏úË•øÔºö spring:sessionÊòØÈªòËÆ§ÁöÑRedis HttpSessionÂâçÁºÄÔºàredis‰∏≠ÔºåÊàë‰ª¨Â∏∏Áî®‚Äô:‚Äô‰Ωú‰∏∫ÂàÜÂâ≤Á¨¶Ôºâ ÊØè‰∏Ä‰∏™sessionÈÉΩ‰ºöÊúâ‰∏â‰∏™Áõ∏ÂÖ≥ÁöÑkeyÔºåÁ¨¨‰∏Ä‰∏™key(spring:session:sessions:37...)ÊúÄ‰∏∫ÈáçË¶ÅÔºåÂÆÉÊòØ‰∏Ä‰∏™HASHÊï∞ÊçÆÁªìÊûÑÔºåÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑsession‰ø°ÊÅØÂ∫èÂàóÂåñÂà∞‰∫Üredis‰∏≠„ÄÇÂ¶ÇÊú¨È°πÁõÆ‰∏≠Áî®Êà∑‰ø°ÊÅØ,ËøòÊúâ‰∏Ä‰∫õmeta‰ø°ÊÅØÔºåÂ¶ÇÂàõÂª∫Êó∂Èó¥ÔºåÊúÄÂêéËÆøÈóÆÊó∂Èó¥Á≠â„ÄÇ Âè¶Â§ñ‰∏§‰∏™keyÔºå‰∏Ä‰∏™ÊòØspring:session:expirationÔºåËøòÊúâ‰∏Ä‰∏™ÊòØspring:session:sessions:expiresÔºåÂâçËÄÖÊòØ‰∏Ä‰∏™SETÁ±ªÂûãÔºåÂêéËÄÖÊòØ‰∏Ä‰∏™STRINGÁ±ªÂûãÔºåÂèØËÉΩ‰ºöÊúâËØªËÄÖÂèëÂá∫ËøôÊ†∑ÁöÑÁñëÈóÆÔºåredisËá™Ë∫´Â∞±ÊúâËøáÊúüÊó∂Èó¥ÁöÑËÆæÁΩÆÊñπÂºèTTLÔºå‰∏∫‰ªÄ‰πàË¶ÅÈ¢ùÂ§ñÊ∑ªÂä†‰∏§‰∏™keyÊù•Áª¥ÊåÅsessionËøáÊúüÁöÑÁâπÊÄßÂë¢ÔºüredisÊ∏ÖÈô§ËøáÊúükeyÁöÑË°å‰∏∫ÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Ë°å‰∏∫‰∏îÊòØ‰∏Ä‰∏™‰Ωé‰ºòÂÖàÁ∫ßÁöÑË°å‰∏∫ÔºåÁî®ÊñáÊ°£‰∏≠ÁöÑÂéüËØùÊù•ËØ¥‰æøÊòØÔºåÂèØËÉΩ‰ºöÂØºËá¥session‰∏çË¢´Ê∏ÖÈô§„ÄÇ‰∫éÊòØÂºïÂÖ•‰∫Ü‰∏ìÈó®ÁöÑexpiresKeyÔºåÊù•‰∏ìÈó®Ë¥üË¥£sessionÁöÑÊ∏ÖÈô§ÔºåÂåÖÊã¨Êàë‰ª¨Ëá™Â∑±Âú®‰ΩøÁî®redisÊó∂‰πüÈúÄË¶ÅÂÖ≥Ê≥®Ëøô‰∏ÄÁÇπ„ÄÇ ËøôÊ†∑Â≠êÔºåÂ∞±ÂèØ‰ª•Áî®Áã¨Á´ãÁöÑredisÊù•Â≠òÂÇ®Áî®Êà∑ÁöÑ‰ø°ÊÅØÔºåÈÄöËøáÂâçÁ´Ø‰º†Êù•ÁöÑheaderÈáåÈù¢ÁöÑtokenÔºåÂ∞±ÂèØ‰ª•Âà∞redisÊãøÂá∫ÂΩìÂâçÁôªÈôÜÁî®Êà∑ÁöÑ‰ø°ÊÅØ‰∫Ü„ÄÇ OKÔºåÂú®Ëß£ÂÜ≥‰∫Üspring sessionÁöÑÈóÆÈ¢ò‰πãÂêéÔºå‰∏ãÈù¢Â∞±ÂèØ‰ª•Êù•ÂÆûÁé∞ÁôªÈôÜÂï¶Ôºö controller: 1234567891011121314@RequestMapping("login")public ApiResult login(@RequestBody @Valid User user, HttpSession session)&#123; ApiResult&lt;UserElement&gt; result = new ApiResult&lt;&gt;(Constants.RESP_STATUS_OK,"ÁôªÂΩïÊàêÂäü"); UserElement ue= userService.login(user); if(ue != null)&#123; if(session.getAttribute(Constants.REQUEST_USER_SESSION) == null)&#123; session.setAttribute(Constants.REQUEST_USER_SESSION,ue); &#125; result.setData(ue); &#125; return result;&#125; Â∞±Ë∑ü‰ª•Ââç‰∏ÄÊ†∑ÔºåÂ∞ÜsessionÁõ¥Êé•Â≠òËøõÂéªÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ 12345678910111213141516171819202122@Overridepublic UserElement login(User user) &#123; UserElement ue = null; User userExist = userMapper.selectByEmail(user.getEmail()); if(userExist != null)&#123; //ÂØπÂØÜÁ†Å‰∏éÊï∞ÊçÆÂ∫ìÂØÜÁ†ÅËøõË°åÊ†°È™å boolean result = passwordEncoder.matches(user.getPassword(),userExist.getPassword()); if(!result)&#123; throw new MamaBuyException("ÂØÜÁ†ÅÈîôËØØ"); &#125;else&#123; //Ê†°È™åÂÖ®ÈÉ®ÈÄöËøáÔºåÁôªÈôÜÈÄöËøá ue = new UserElement(); ue.setUserId(userExist.getId()); ue.setEmail(userExist.getEmail()); ue.setNickname(userExist.getNickname()); ue.setUuid(userExist.getUuid()); &#125; &#125;else &#123; throw new MamaBuyException("Áî®Êà∑‰∏çÂ≠òÂú®"); &#125; return ue;&#125;]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèIDÁîüÊàêÁ≠ñÁï•]]></title>
    <url>%2F2019%2F01%2F23%2Fmiscellany%2F05%E5%88%86%E5%B8%83%E5%BC%8FID%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5%2F</url>
    <content type="text"><![CDATA[ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÂ¶Ç‰Ωï‰øùËØÅIDÁöÑ‰∏çÈáçÂ§çÂë¢Ôºü‰∏ÄËà¨Êàë‰ª¨ÂèØËÉΩ‰ºöÊÉ≥Âà∞Áî®UUIDÊù•ÂÆûÁé∞Âòõ„ÄÇ‰ΩÜÊòØUUID‰∏ÄËà¨ÂèØ‰ª•Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥ÁöÑÊØ´ÁßíÊï∞ÂÜçÂä†ÁÇπÈöèÊú∫Êï∞Ôºå‰ΩÜÊòØÂú®È´òÂπ∂Âèë‰∏ã‰ªçÁÑ∂ÂèØËÉΩÈáçÂ§ç„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºåÂ¶ÇÊûúÊàëË¶ÅÁî®ËøôÁßçUUIDÊù•ÁîüÊàêÂàÜË°®ÁöÑÂîØ‰∏ÄIDÁöÑËØùÔºåÈáçÂ§ç‰∏çË∞àÔºåËøôÁßçÈöèÊú∫ÁöÑÂ≠óÁ¨¶‰∏≤ÂØπ‰∫éÊàë‰ª¨ÁöÑinnodbÂ≠òÂÇ®ÂºïÊìéÁöÑÊèíÂÖ•ÊïàÁéáÊòØÂæà‰ΩéÁöÑ„ÄÇÊâÄ‰ª•Êàë‰ª¨ÁîüÊàêÁöÑIDÂ¶ÇÊûú‰Ωú‰∏∫‰∏ªÈîÆÔºåÊúÄÂ•ΩÊúâ‰∏§ÁßçÁâπÊÄßÔºöÂàÜÂ∏ÉÂºèÂîØ‰∏ÄÂíåÊúâÂ∫è„ÄÇ ÂîØ‰∏ÄÊÄßÂ∞±‰∏çÁî®ËØ¥‰∫ÜÔºåÊúâÂ∫è‰øùËØÅ‰∫ÜÂØπÁ¥¢ÂºïÂ≠óÊÆµÁöÑÊèíÂÖ•ÁöÑÈ´òÊïàÊÄß„ÄÇÊàë‰ª¨Êù•ÂÖ∑‰ΩìÁúãÁúãShardingJDBCÁöÑÂàÜÂ∏ÉÂºèIDÁîüÊàêÁ≠ñÁï•ÊòØÂ¶Ç‰Ωï‰øùËØÅ„ÄÇ snowflakeÁÆóÊ≥ï sharding-jdbcÁöÑÂàÜÂ∏ÉÂºèIDÈááÁî®twitterÂºÄÊ∫êÁöÑsnowflakeÁÆóÊ≥ïÔºå‰∏çÈúÄË¶Å‰æùËµñ‰ªª‰ΩïÁ¨¨‰∏âÊñπÁªÑ‰ª∂ÔºåËøôÊ†∑ÂÖ∂Êâ©Â±ïÊÄßÂíåÁª¥Êä§ÊÄßÂæóÂà∞ÊúÄÂ§ßÁöÑÁÆÄÂåñÔºõ‰ΩÜÊòØsnowflakeÁÆóÊ≥ïÁöÑÁº∫Èô∑ÔºàÂº∫‰æùËµñÊó∂Èó¥ÔºåÂ¶ÇÊûúÊó∂ÈíüÂõûÊã®ÔºåÂ∞±‰ºöÁîüÊàêÈáçÂ§çÁöÑIDÔºâ„ÄÇ Èõ™Ëä±ÁÆóÊ≥ïÊòØÁî±TwitterÂÖ¨Â∏ÉÁöÑÂàÜÂ∏ÉÂºè‰∏ªÈîÆÁîüÊàêÁÆóÊ≥ïÔºåÂÆÉËÉΩÂ§ü‰øùËØÅ‰∏çÂêåËøõÁ®ã‰∏ªÈîÆÁöÑ‰∏çÈáçÂ§çÊÄßÔºå‰ª•ÂèäÁõ∏ÂêåËøõÁ®ã‰∏ªÈîÆÁöÑÊúâÂ∫èÊÄß„ÄÇ Âú®Âêå‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÔºåÂÆÉÈ¶ñÂÖàÊòØÈÄöËøáÊó∂Èó¥‰Ωç‰øùËØÅ‰∏çÈáçÂ§çÔºåÂ¶ÇÊûúÊó∂Èó¥Áõ∏ÂêåÂàôÊòØÈÄöËøáÂ∫èÂàó‰Ωç‰øùËØÅ„ÄÇ ÂêåÊó∂Áî±‰∫éÊó∂Èó¥‰ΩçÊòØÂçïË∞ÉÈÄíÂ¢ûÁöÑÔºå‰∏îÂêÑ‰∏™ÊúçÂä°Âô®Â¶ÇÊûúÂ§ß‰ΩìÂÅö‰∫ÜÊó∂Èó¥ÂêåÊ≠•ÔºåÈÇ£‰πàÁîüÊàêÁöÑ‰∏ªÈîÆÂú®ÂàÜÂ∏ÉÂºèÁéØÂ¢ÉÂèØ‰ª•ËÆ§‰∏∫ÊòØÊÄª‰ΩìÊúâÂ∫èÁöÑÔºåËøôÂ∞±‰øùËØÅ‰∫ÜÂØπÁ¥¢ÂºïÂ≠óÊÆµÁöÑÊèíÂÖ•ÁöÑÈ´òÊïàÊÄß„ÄÇ‰æãÂ¶ÇMySQLÁöÑInnodbÂ≠òÂÇ®ÂºïÊìéÁöÑ‰∏ªÈîÆ„ÄÇ ‰ΩøÁî®Èõ™Ëä±ÁÆóÊ≥ïÁîüÊàêÁöÑ‰∏ªÈîÆÔºå‰∫åËøõÂà∂Ë°®Á§∫ÂΩ¢ÂºèÂåÖÂê´4ÈÉ®ÂàÜÔºå‰ªéÈ´ò‰ΩçÂà∞‰Ωé‰ΩçÂàÜË°®‰∏∫Ôºö1bitÁ¨¶Âè∑‰Ωç„ÄÅ41bitÊó∂Èó¥Êà≥‰Ωç„ÄÅ10bitÂ∑•‰ΩúËøõÁ®ã‰Ωç‰ª•Âèä12bitÂ∫èÂàóÂè∑‰Ωç„ÄÇ Èõ™Ëä±ÁÆóÊ≥ï‰∏ªÈîÆÁöÑËØ¶ÁªÜÁªìÊûÑËßÅ‰∏ãÂõæ„ÄÇ Á¨¶Âè∑‰Ωç(1bit) È¢ÑÁïôÁöÑÁ¨¶Âè∑‰ΩçÔºåÊÅí‰∏∫Èõ∂„ÄÇ Êó∂Èó¥Êà≥‰Ωç(41bit) 41‰ΩçÁöÑÊó∂Èó¥Êà≥ÂèØ‰ª•ÂÆπÁ∫≥ÁöÑÊØ´ÁßíÊï∞ÊòØ2ÁöÑ41Ê¨°ÂπÇÔºå‰∏ÄÂπ¥ÊâÄ‰ΩøÁî®ÁöÑÊØ´ÁßíÊï∞ÊòØÔºö365 * 24 * 60 * 60 * 1000„ÄÇÈÄöËøáËÆ°ÁÆóÂèØÁü•Ôºö 1Math.pow(2, 41) / (365 * 24 * 60 * 60 * 1000L); ÁªìÊûúÁ∫¶Á≠â‰∫é69.73Âπ¥„ÄÇShardingSphereÁöÑÈõ™Ëä±ÁÆóÊ≥ïÁöÑÊó∂Èó¥Á∫™ÂÖÉ‰ªé2016Âπ¥11Êúà1Êó•Èõ∂ÁÇπÂºÄÂßãÔºåÂèØ‰ª•‰ΩøÁî®Âà∞2086Âπ¥ÔºåÁõ∏‰ø°ËÉΩÊª°Ë∂≥ÁªùÂ§ßÈÉ®ÂàÜÁ≥ªÁªüÁöÑË¶ÅÊ±Ç„ÄÇ Â∑•‰ΩúËøõÁ®ã‰Ωç(10bit) ËØ•Ê†áÂøóÂú®JavaËøõÁ®ãÂÜÖÊòØÂîØ‰∏ÄÁöÑÔºåÂ¶ÇÊûúÊòØÂàÜÂ∏ÉÂºèÂ∫îÁî®ÈÉ®ÁΩ≤Â∫î‰øùËØÅÊØè‰∏™Â∑•‰ΩúËøõÁ®ãÁöÑidÊòØ‰∏çÂêåÁöÑ„ÄÇËØ•ÂÄºÈªòËÆ§‰∏∫0ÔºåÂèØÈÄöËøáË∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïDefaultKeyGenerator.setWorkerId()ËÆæÁΩÆ„ÄÇ Â∫èÂàóÂè∑‰Ωç(12bit) ËØ•Â∫èÂàóÊòØÁî®Êù•Âú®Âêå‰∏Ä‰∏™ÊØ´ÁßíÂÜÖÁîüÊàê‰∏çÂêåÁöÑID„ÄÇÂ¶ÇÊûúÂú®Ëøô‰∏™ÊØ´ÁßíÂÜÖÁîüÊàêÁöÑÊï∞ÈáèË∂ÖËøá4096(2ÁöÑ12Ê¨°ÂπÇ)ÔºåÈÇ£‰πàÁîüÊàêÂô®‰ºöÁ≠âÂæÖÂà∞‰∏ã‰∏™ÊØ´ÁßíÁªßÁª≠ÁîüÊàê„ÄÇ Êó∂ÈíüÂõûÊã® ÊúçÂä°Âô®Êó∂ÈíüÂõûÊã®‰ºöÂØºËá¥‰∫ßÁîüÈáçÂ§çÂ∫èÂàóÔºåÂõ†Ê≠§ÈªòËÆ§ÂàÜÂ∏ÉÂºè‰∏ªÈîÆÁîüÊàêÂô®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÊúÄÂ§ßÂÆπÂøçÁöÑÊó∂ÈíüÂõûÊã®ÊØ´ÁßíÊï∞„ÄÇ Â¶ÇÊûúÊó∂ÈíüÂõûÊã®ÁöÑÊó∂Èó¥Ë∂ÖËøáÊúÄÂ§ßÂÆπÂøçÁöÑÊØ´ÁßíÊï∞ÈòàÂÄºÔºåÂàôÁ®ãÂ∫èÊä•ÈîôÔºõÂ¶ÇÊûúÂú®ÂèØÂÆπÂøçÁöÑËåÉÂõ¥ÂÜÖÔºåÈªòËÆ§ÂàÜÂ∏ÉÂºè‰∏ªÈîÆÁîüÊàêÂô®‰ºöÁ≠âÂæÖÊó∂ÈíüÂêåÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ¨°‰∏ªÈîÆÁîüÊàêÁöÑÊó∂Èó¥ÂêéÂÜçÁªßÁª≠Â∑•‰Ωú„ÄÇ ÊúÄÂ§ßÂÆπÂøçÁöÑÊó∂ÈíüÂõûÊã®ÊØ´ÁßíÊï∞ÁöÑÈªòËÆ§ÂÄº‰∏∫0ÔºåÂèØÈÄöËøáË∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïDefaultKeyGenerator.setMaxTolerateTimeDifferenceMilliseconds()ËÆæÁΩÆ„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[springMVCÂÖ®Â±ÄÂºÇÂ∏∏+springÂåÖÊâ´ÊèèÂåÖÈöîÁ¶ª+spring‰∫ãÂä°‰º†Êí≠]]></title>
    <url>%2F2019%2F01%2F22%2Fmiscellany%2F04springMVC%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%2Bspring%E5%8C%85%E6%89%AB%E6%8F%8F%E5%8C%85%E9%9A%94%E7%A6%BB%2Bspring%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%2F</url>
    <content type="text"><![CDATA[Âú®ÂºÄÂèë‰∏≠ÔºåspringMVCÂÖ®Â±ÄÂºÇÂ∏∏+springÂåÖÊâ´ÊèèÂåÖÈöîÁ¶ª+spring‰∫ãÂä°‰º†Êí≠Ëøô‰∏â‰∏™‰∏çÂèØËÉΩ‰∏ç‰ºöÈÅáÂà∞„ÄÇ‰∏ãÈù¢Êù•Â•ΩÂ•ΩËØ¥ËØ¥‰ªñ‰ª¨Âêß„ÄÇ 1„ÄÅÂÖ®Â±ÄÂºÇÂ∏∏ÂºïÂÖ•ÂéüÂõ† ÂÅáËÆæÂú®Êàë‰ª¨ÁöÑlogin.doÁöÑcontrollerÊñπÊ≥ï‰∏≠Á¨¨‰∏ÄË°åÂ¢ûÂä†‰∏ÄÂè•Ôºö 1int i = 1/0; ÈáçÊñ∞ÂêØÂä®ÊúçÂä°Âô®ËøõË°åÁî®Êà∑ÁôªÂΩïÊìç‰ΩúÔºåÈÇ£‰πàÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏Ôºö 123java.lang.ArithmeticException: / by zero com.swg.controller.portal.UserController.login(UserController.java:37) ...ÂÖ∂‰ªñÁöÑÂ†ÜÊ†à‰ø°ÊÅØ Ëøô‰∫õ‰ø°ÊÅØ‰ºöÁõ¥Êé•ÊòæÁ§∫Âú®ÁΩëÈ°µ‰∏äÔºåÂ¶ÇÊûúÊòØÂÖ≥‰∫éÊï∞ÊçÆÂ∫ìÁöÑÈîôËØØÔºåÂêåÊ†∑Ôºå‰ºöËØ¶ÁªÜÂú∞Â∞ÜÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂ≠óÊÆµÈÉΩÊòæÁ§∫Âú®È°µÈù¢‰∏äÔºåËøôÂØπ‰∫éÊàë‰ª¨ÁöÑÈ°πÁõÆÊù•ËØ¥ÊòØÂ≠òÂú®ÂæàÂ§ßÁöÑÂÆâÂÖ®ÈöêÊÇ£ÁöÑ„ÄÇËøô‰∏™Êó∂ÂÄôÔºåÈúÄË¶ÅÁî®ÂÖ®Â±ÄÂºÇÂ∏∏Êù•Â§ÑÁêÜÔºåÂ¶ÇÊûúÂèëÁîüÂºÇÂ∏∏ÔºåÊàë‰ª¨Â∞±ÂØπÂÖ∂ËøõË°åÊã¶Êà™ÔºåÂπ∂‰∏îÂú®È°µÈù¢‰∏äÊòæÁ§∫Êàë‰ª¨ÁªôÂá∫ÁöÑÊèêÁ§∫‰ø°ÊÅØ„ÄÇ ÂØπ‰∫éSpringBootÔºå‰∏ÄËà¨ÂÖ®Â±ÄÂºÇÂ∏∏ÊòØ: 1234567891011121314151617@ControllerAdvice@ResponseBody@Slf4jpublic class ExceptionHandlerAdvice &#123; @ExceptionHandler(Exception.class) public ServerResponse handleException(Exception e)&#123; log.error(e.getMessage(),e); return ServerResponse.createByErrorCodeMessage(Constants.RESP_STATUS_INTERNAL_ERROR,"Á≥ªÁªüÂºÇÂ∏∏ÔºåËØ∑Á®çÂêéÂÜçËØï"); &#125; @ExceptionHandler(SnailmallException.class) public ServerResponse handleException(SnailmallException e)&#123; log.error(e.getMessage(),e); return ServerResponse.createByErrorCodeMessage(e.getExceptionStatus(),e.getMessage()); &#125;&#125; 2„ÄÅÂºïÂÖ•ÂÖ®Â±ÄÂºÇÂ∏∏ 12345678910111213@Slf4j@Componentpublic class ExceptionResolver implements HandlerExceptionResolver&#123; @Override public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) &#123; log.error("exception:&#123;&#125;",httpServletRequest.getRequestURI(),e); ModelAndView mv = new ModelAndView(new MappingJacksonJsonView()); mv.addObject("status",ResponseEnum.ERROR.getCode()); mv.addObject("msg","Êé•Âè£ÂºÇÂ∏∏ÔºåËØ¶ÊÉÖËØ∑Êü•ÁúãÊó•Âøó‰∏≠ÁöÑÂºÇÂ∏∏‰ø°ÊÅØ"); mv.addObject("data",e.toString()); return mv; &#125;&#125; ÈÇ£‰πàÔºåÂÜçÊâßË°åÁôªÈôÜÊìç‰Ωú‰πãÂêéÔºåÂ∞±‰∏ç‰ºöÂú®È°µÈù¢‰∏äÁõ¥Êé•ÊòæÁ§∫ÂºÇÂ∏∏‰ø°ÊÅØ‰∫Ü„ÄÇÊúâÊïàÂú∞Â±èËîΩ‰∫ÜÂÖ≥ÈîÆ‰ø°ÊÅØ„ÄÇ 3„ÄÅspringÂíåspringmvcÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ºòÂåñ 3.1 ÂåÖÈöîÁ¶ª‰ºòÂåñ Âú®ÁºñÂÜôÂÖ®Â±ÄÂºÇÂ∏∏‰πãÂâçÔºåÂÖàËøõË°å‰∫ÜÂåÖÈöîÁ¶ªÂíå‰ºòÂåñÔºå‰∏ÄÊúü‰∏≠ÁöÑÊâ´ÊèèÂåÖÁöÑÂÜôÊ≥ïÊòØÔºö 12345&lt;!--spring:--&gt;&lt;context:component-scan base-package="com.swg" annotation-config="true"/&gt;&lt;!--springmvc:--&gt;&lt;context:component-scan base-package="com.swg" annotation-config="true"/&gt; Âç≥springÂíåspringmvcÊâ´ÊèèÂåÖ‰∏ãÈù¢ÁöÑÊâÄÊúâÁöÑbeanÂíåcontroller.‰ºòÂåñÂêéÁöÑ‰ª£Á†ÅÈÖçÁΩÆÔºö 1234567891011#spring&lt;context:component-scan base-package="com.swg" annotation-config="true"&gt;&lt;!--Â∞ÜcontrollerÁöÑÊâ´ÊèèÊéíÈô§Êéâ--&gt; &lt;context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/&gt;&lt;/context:component-scan&gt;#springmvc&lt;context:component-scan base-package="com.swg.controller" annotation-config="true" use-default-filters="false"&gt;&lt;!--Ê∑ªÂä†ÁôΩÂêçÂçïÔºåÂè™Êâ´ÊèècontrollerÔºåÊÄª‰πãË¶ÅÂ∞ÜserviceÁªôÊéíÈô§ÊéâÂç≥ÂèØ--&gt; &lt;context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/&gt;&lt;/context:component-scan&gt; ËøôÊ†∑ÂÅöÁöÑÂéüÂõ†ÊòØÔºöSpringÂíåSpringMVCÊòØÊúâÁà∂Â≠êÂÆπÂô®ÂÖ≥Á≥ªÁöÑÔºåËÄå‰∏îÊ≠£ÊòØÂõ†‰∏∫Ëøô‰∏™ÊâçÂæÄÂæÄ‰ºöÂá∫Áé∞ÂåÖÊâ´ÊèèÁöÑÈóÆÈ¢ò„ÄÇ ÈíàÂØπÂåÖÊâ´ÊèèÂè™Ë¶ÅËÆ∞‰Ωè‰ª•‰∏ãÂá†ÁÇπÂç≥ÂèØÔºö springÊòØÁà∂ÂÆπÂô®ÔºåspringmvcÊòØÂ≠êÂÆπÂô®ÔºåÂ≠êÂÆπÂô®ÂèØ‰ª•ËÆøÈóÆÁà∂ÂÆπÂô®ÁöÑbean,Áà∂ÂÆπÂô®‰∏çËÉΩËÆøÈóÆÂ≠êÂÆπÂô®ÁöÑbean„ÄÇ Âè™ÊúâÈ°∂Á∫ßÂÆπÂô®ÔºàspringÔºâÊâçÊúâÂä†Âº∫ÁöÑ‰∫ãÂä°ËÉΩÂäõÔºåËÄåspringmvcÂÆπÂô®ÁöÑserviceÊòØÊ≤°ÊúâÁöÑ„ÄÇ Â¶ÇÊûúspringmvc‰∏çÈÖçÁΩÆÂåÖÊâ´ÊèèÁöÑËØùÔºåÈ°µÈù¢404. 3.2 ‰∫ãÂä°ÁöÑ‰º†Êí≠Êú∫Âà∂ ÈíàÂØπ‰∫ãÂä°Ôºå‰∏çÂæó‰∏çÂ±ïÂºÄËØ¥Êòéspring‰∫ãÂä°ÁöÑÂá†Áßç‰º†Êí≠Êú∫Âà∂‰∫Ü„ÄÇÂú® spring ÁöÑ TransactionDefinition Êé•Âè£‰∏≠‰∏ÄÂÖ±ÂÆö‰πâ‰∫Ü‰∏ÉÁßç‰∫ãÂä°‰º†Êí≠Â±ûÊÄßÔºö PROPAGATION_REQUIRED ‚Äì ÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±Êñ∞Âª∫‰∏Ä‰∏™‰∫ãÂä°„ÄÇËøôÊòØÊúÄÂ∏∏ËßÅÁöÑÈÄâÊã©ÔºàÈªòËÆ§Ôºâ„ÄÇ PROPAGATION_SUPPORTS ‚Äì ÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°å„ÄÇ PROPAGATION_MANDATORY ‚Äì ÊîØÊåÅÂΩìÂâç‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂ∞±ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ PROPAGATION_REQUIRES_NEW ‚Äì Êñ∞Âª∫‰∫ãÂä°ÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÊääÂΩìÂâç‰∫ãÂä°ÊåÇËµ∑„ÄÇ PROPAGATION_NOT_SUPPORTED ‚Äì ‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°åÊìç‰ΩúÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂ∞±ÊääÂΩìÂâç‰∫ãÂä°ÊåÇËµ∑„ÄÇ PROPAGATION_NEVER ‚Äì ‰ª•Èùû‰∫ãÂä°ÊñπÂºèÊâßË°åÔºåÂ¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏„ÄÇ PROPAGATION_NESTED ‚Äì Â¶ÇÊûúÂΩìÂâçÂ≠òÂú®‰∫ãÂä°ÔºåÂàôÂú®ÂµåÂ•ó‰∫ãÂä°ÂÜÖÊâßË°å„ÄÇÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰∫ãÂä°ÔºåÂàôËøõË°å‰∏éPROPAGATION_REQUIREDÁ±ª‰ººÁöÑÊìç‰Ωú„ÄÇ 4„ÄÅË°•ÂÖÖ SpringÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰ºöÂØπËøêË°åÊúü‰æãÂ§ñ(RunTimeException)ÔºåÂç≥uncheckÂºÇÂ∏∏ÔºåËøõË°å‰∫ãÂä°ÂõûÊªö„ÄÇÂ¶ÇÊûúÈÅáÂà∞checkedÂºÇÂ∏∏Â∞±‰∏çÂõûÊªö„ÄÇÂ¶Ç‰ΩïÊîπÂèòÈªòËÆ§ËßÑÂàôÔºö ËÆ©checked‰æãÂ§ñ‰πüÂõûÊªöÔºöÂú®Êï¥‰∏™ÊñπÊ≥ïÂâçÂä†‰∏ä @Transactional(rollbackFor=Exception.class) ËÆ©unchecked‰æãÂ§ñ‰∏çÂõûÊªöÔºö @Transactional(notRollbackFor=RunTimeException.class) ‰∏çÈúÄË¶Å‰∫ãÂä°ÁÆ°ÁêÜÁöÑ(Âè™Êü•ËØ¢ÁöÑ)ÊñπÊ≥ïÔºö@Transactional(propagation=Propagation.NOT_SUPPORTED) 5„ÄÅÈÇ£‰πà‰ªÄ‰πàÊòØÂµåÂ•ó‰∫ãÂä°Âë¢Ôºü ÂµåÂ•óÊòØÂ≠ê‰∫ãÂä°Â•óÂú®Áà∂‰∫ãÂä°‰∏≠ÊâßË°åÔºåÂ≠ê‰∫ãÂä°ÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂú®ËøõÂÖ•Â≠ê‰∫ãÂä°‰πãÂâçÔºåÁà∂‰∫ãÂä°Âª∫Á´ã‰∏Ä‰∏™ÂõûÊªöÁÇπÔºåÂè´ÂÅösave pointÔºåÁÑ∂ÂêéÊâßË°åÂ≠ê‰∫ãÂä°ÔºåËøô‰∏™Â≠ê‰∫ãÂä°ÁöÑÊâßË°å‰πüÁÆóÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁÑ∂ÂêéÂ≠ê‰∫ãÂä°ÊâßË°åÁªìÊùüÔºåÁà∂‰∫ãÂä°ÁªßÁª≠ÊâßË°å„ÄÇÈáçÁÇπÂú®‰∫éÈÇ£‰∏™save pointÔºåÁúã‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö ÈóÆÈ¢ò1ÔºöÂ¶ÇÊûúÂ≠ê‰∫ãÂä°ÂõûÊªöÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºü Áà∂‰∫ãÂä°‰ºöÂõûÂà∞ËøõÂÖ•Â≠ê‰∫ãÂä°ÂâçÂª∫Á´ãÁöÑsave pointÔºåÁÑ∂ÂêéÂ∞ùËØïÂÖ∂‰ªñÁöÑ‰∫ãÂä°ÊàñËÄÖÂÖ∂‰ªñÁöÑ‰∏öÂä°ÈÄªËæëÔºåÁà∂‰∫ãÂä°‰πãÂâçÁöÑÊìç‰Ωú‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÔºåÊõ¥‰∏ç‰ºöËá™Âä®ÂõûÊªö„ÄÇ ÈóÆÈ¢ò2ÔºöÂ¶ÇÊûúÁà∂‰∫ãÂä°ÂõûÊªöÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºü Áà∂‰∫ãÂä°ÂõûÊªöÔºåÂ≠ê‰∫ãÂä°‰πü‰ºöË∑üÁùÄÂõûÊªöÔºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂõ†‰∏∫Áà∂‰∫ãÂä°ÁªìÊùü‰πãÂâçÔºåÂ≠ê‰∫ãÂä°ÊòØ‰∏ç‰ºöÊèê‰∫§ÁöÑÔºåÊàë‰ª¨ËØ¥Â≠ê‰∫ãÂä°ÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊ≠£ÊòØËøô‰∏™ÈÅìÁêÜ/ ÈóÆÈ¢ò3ÔºöÁà∂‰∫ãÂä°ÂÖàÊèê‰∫§ÔºåÁÑ∂ÂêéÂ≠ê‰∫ãÂä°ÂÜçÊèê‰∫§ÔºõËøòÊòØÂ≠ê‰∫ãÂä°ÂÖàÊèê‰∫§ÔºåÁÑ∂ÂêéÁà∂‰∫ãÂä°ÂÜçÊèê‰∫§Âë¢Ôºü Á≠îÊ°àÊòØÁ¨¨‰∫åÁßçÊÉÖÂÜµÔºåÂ≠ê‰∫ãÂä°ÊòØÁà∂‰∫ãÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁî±Áà∂‰∫ãÂä°ÂêåÊÑèÊèê‰∫§„ÄÇ 6„ÄÅspringÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰∏Ä‰∫õÁêÜËß£Ôºö ÂÆπÂô® Âú®SpringÊï¥‰ΩìÊ°ÜÊû∂ÁöÑÊ†∏ÂøÉÊ¶ÇÂøµ‰∏≠ÔºåÂÆπÂô®ÊòØÊ†∏ÂøÉÊÄùÊÉ≥ÔºåÂ∞±ÊòØÁî®Êù•ÁÆ°ÁêÜBeanÁöÑÊï¥‰∏™ÁîüÂëΩÂë®ÊúüÁöÑÔºåËÄåÂú®‰∏Ä‰∏™È°πÁõÆ‰∏≠ÔºåÂÆπÂô®‰∏ç‰∏ÄÂÆöÂè™Êúâ‰∏Ä‰∏™ÔºåSpring‰∏≠ÂèØ‰ª•ÂåÖÊã¨Â§ö‰∏™ÂÆπÂô®ÔºåËÄå‰∏îÂÆπÂô®Êúâ‰∏ä‰∏ãÂ±ÇÂÖ≥Á≥ªÔºåÁõÆÂâçÊúÄÂ∏∏ËßÅÁöÑ‰∏ÄÁßçÂú∫ÊôØÂ∞±ÊòØÂú®‰∏Ä‰∏™È°πÁõÆ‰∏≠ÂºïÂÖ•SpringÂíåSpringMVCËøô‰∏§‰∏™Ê°ÜÊû∂ÔºåÈÇ£‰πàÂÆÉÂÖ∂ÂÆûÂ∞±ÊòØ‰∏§‰∏™ÂÆπÂô®ÔºåSpringÊòØÁà∂ÂÆπÂô®ÔºåSpringMVCÊòØÂÖ∂Â≠êÂÆπÂô®ÔºåÂπ∂‰∏îÂú®SpringÁà∂ÂÆπÂô®‰∏≠Ê≥®ÂÜåÁöÑBeanÂØπ‰∫éSpringMVCÂÆπÂô®‰∏≠ÊòØÂèØËßÅÁöÑÔºåËÄåÂú®SpringMVCÂÆπÂô®‰∏≠Ê≥®ÂÜåÁöÑBeanÂØπ‰∫éSpringÁà∂ÂÆπÂô®‰∏≠ÊòØ‰∏çÂèØËßÅÁöÑÔºå‰πüÂ∞±ÊòØÂ≠êÂÆπÂô®ÂèØ‰ª•ÁúãËßÅÁà∂ÂÆπÂô®‰∏≠ÁöÑÊ≥®ÂÜåÁöÑBeanÔºåÂèç‰πãÂ∞±‰∏çË°å„ÄÇ 1&lt;context:component-scan base-package="com.springmvc.test" /&gt; Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Áªü‰∏ÄÁöÑÂ¶Ç‰∏ãÊ≥®Ëß£ÈÖçÁΩÆÊù•ÂØπBeanËøõË°åÊâπÈáèÊ≥®ÂÜåÔºåËÄå‰∏çÈúÄË¶ÅÂÜçÁªôÊØè‰∏™BeanÂçïÁã¨‰ΩøÁî®xmlÁöÑÊñπÂºèËøõË°åÈÖçÁΩÆ„ÄÇ ‰ªéSpringÊèê‰æõÁöÑÂèÇËÄÉÊâãÂÜå‰∏≠Êàë‰ª¨ÂæóÁü•ËØ•ÈÖçÁΩÆÁöÑÂäüËÉΩÊòØÊâ´ÊèèÈÖçÁΩÆÁöÑbase-packageÂåÖ‰∏ãÁöÑÊâÄÊúâ‰ΩøÁî®‰∫Ü@ComponentÊ≥®Ëß£ÁöÑÁ±ªÔºåÂπ∂‰∏îÂ∞ÜÂÆÉ‰ª¨Ëá™Âä®Ê≥®ÂÜåÂà∞ÂÆπÂô®‰∏≠ÔºåÂêåÊó∂‰πüÊâ´Êèè@ControllerÔºå@ServiceÔºå@RespositoryËøô‰∏â‰∏™Ê≥®Ëß£ÔºåÂõ†‰∏∫‰ªñ‰ª¨ÊòØÁªßÊâøËá™@Component„ÄÇ 1&lt;context:annotation-config/&gt; ÂÖ∂ÂÆûÊúâ‰∫Ü‰∏äÈù¢ÁöÑÈÖçÁΩÆÔºåËøô‰∏™ÊòØÂèØ‰ª•ÁúÅÁï•ÊéâÁöÑÔºåÂõ†‰∏∫‰∏äÈù¢ÁöÑÈÖçÁΩÆ‰ºöÈªòËÆ§ÊâìÂºÄ‰ª•‰∏ãÈÖçÁΩÆ„ÄÇ‰ª•‰∏ãÈÖçÁΩÆ‰ºöÈªòËÆ§Â£∞Êòé‰∫Ü@Required„ÄÅ@Autowired„ÄÅ @PostConstruct„ÄÅ@PersistenceContext„ÄÅ@Resource„ÄÅ@PreDestroyÁ≠âÊ≥®Ëß£„ÄÇ 1&lt;mvc:annotation-driven /&gt; Ëøô‰∏™ÊòØSpringMVCÂøÖÈ°ªË¶ÅÈÖçÁΩÆÁöÑÔºåÂõ†‰∏∫ÂÆÉÂ£∞Êòé‰∫Ü@RequestMapping„ÄÅ@RequestBody„ÄÅ@ResponseBodyÁ≠â„ÄÇÂπ∂‰∏îÔºåËØ•ÈÖçÁΩÆÈªòËÆ§Âä†ËΩΩÂæàÂ§öÁöÑÂèÇÊï∞ÁªëÂÆöÊñπÊ≥ïÔºåÊØîÂ¶ÇjsonËΩ¨Êç¢Ëß£ÊûêÂô®Á≠â„ÄÇ 7„ÄÅÊÄªÁªì Âú®ÂÆûÈôÖÂ∑•Á®ã‰∏≠‰ºöÂåÖÊã¨ÂæàÂ§öÈÖçÁΩÆÔºåÊàë‰ª¨ÊåâÁÖßÂÆòÊñπÊé®ËçêÊ†πÊçÆ‰∏çÂêåÁöÑ‰∏öÂä°Ê®°ÂùóÊù•ÂàíÂàÜ‰∏çÂêåÂÆπÂô®‰∏≠Ê≥®ÂÜå‰∏çÂêåÁ±ªÂûãÁöÑBeanÔºöSpringÁà∂ÂÆπÂô®Ë¥üË¥£ÊâÄÊúâÂÖ∂‰ªñÈùû@ControllerÊ≥®Ëß£ÁöÑBeanÁöÑÊ≥®ÂÜåÔºåËÄåSpringMVCÂè™Ë¥üË¥£@ControllerÊ≥®Ëß£ÁöÑBeanÁöÑÊ≥®ÂÜåÔºå‰ΩøÂæó‰ªñ‰ª¨ÂêÑË¥üÂÖ∂Ë¥£„ÄÅÊòéÁ°ÆËæπÁïå„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redisÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ]]></title>
    <url>%2F2019%2F01%2F22%2Fmiscellany%2F03redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%2F</url>
    <content type="text"><![CDATA[‰∏∫‰∫ÜËÆ≤Ëß£redisÂàÜÂ∏ÉÂºèÈîÅÔºåÊàëÂ∞ÜÂºïÂÖ•‰∏Ä‰∏™Âú∫ÊôØÔºöÂÆöÊó∂ÂÖ≥Âçï„ÄÇÂõ†‰∏∫ÂæÄÂæÄËÆ¢ÂçïÊúçÂä°ÊòØ‰∏Ä‰∏™ÈõÜÁæ§ÔºåÈÇ£‰πàÂÆöÊó∂Âô®‰ºöÂêåÊó∂Ëß¶ÂèëËøô‰∫õÈõÜÁæ§ÂéªÂèñÊ∂àËÆ¢ÂçïÔºåÊòæÁÑ∂ÊòØÊµ™Ë¥πÊú∫Âô®ËµÑÊ∫êÁöÑÔºåÊâÄ‰ª•ÁõÆÁöÑÊòØÔºöÂè™ËÆ©ÂÖ∂‰∏≠‰∏ÄÂè∞Êú∫Âô®ÂéªÊâßË°åÂèñÊ∂àËÆ¢ÂçïÂç≥ÂèØ„ÄÇËøôÈáåÂèØ‰ª•Áî®ÂàÜÂ∏ÉÂºèÈîÅÊù•ÂÆûÁé∞„ÄÇ È°πÁõÆÊòØ‰ªéÁªÉÊâãÈ°πÁõÆ‰∏≠Êà™ÂèñÂá∫Êù•ÁöÑÔºåÊ°ÜÊû∂ÊòØÂü∫‰∫éSSMÁöÑXMLÂΩ¢ÂºèÊûÑÊàêÔºåÊâÄ‰ª•‰∏ãÈù¢ËøòÊ∂âÂèä‰∏ÄÁÇπXMlÂØπ‰∫éÂÆöÊó∂Âô®spring scheduleÁöÑÈÖçÁΩÆÂÜÖÂÆπ„ÄÇ 1„ÄÅÂºïÂÖ•ÁõÆÊ†á ÂÆöÊó∂Ëá™Âä®ÂØπË∂ÖËøá‰∏§‰∏™Â∞èÊó∂ËøòÊú™ÊîØ‰ªòÁöÑËÆ¢ÂçïÂØπÂÖ∂ËøõË°åÂèñÊ∂àÔºåÂπ∂‰∏îÈáçÁΩÆÂ∫ìÂ≠ò„ÄÇ 2„ÄÅÈÖçÁΩÆ È¶ñÂÖàÊòØspringÈÖçÁΩÆÊñá‰ª∂ÂºïÂÖ•spring-schedule 123456xmlns:task="http://www.springframework.org/schema/task"...http://www.springframework.org/schema/taskhttp://www.springframework.org/schema/task/spring-task.xsd...&lt;task:annotation-driven/&gt; Ë°•ÂÖÖÔºöÈíàÂØπapplicationContext-datasource.xml‰∏≠ÁöÑdataSourceËØªÂèñÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ø°ÊÅØÊó†Ê≥ïÂ±ïÁé∞ÁöÑÈóÆÈ¢òÔºåÂú®springÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Â¢ûÂä†‰∏ÄÊù°ÈÖçÁΩÆÔºö 1&lt;context:property-placeholder location="classpath:datasource.properties"/&gt; 3„ÄÅÂÆöÊó∂Ë∞ÉÂ∫¶‰ª£Á†Å Ê≠§‰ª£Á†ÅÁöÑ‰∏ªË¶ÅÂäüËÉΩÊòØÔºöÂÆöÊó∂Ë∞ÉÁî®ÂèñÊ∂àËÆ¢ÂçïÊúçÂä°„ÄÇ 1234567891011121314@Component@Slf4jpublic class CloseOrderTask &#123; @Autowired private OrderService orderService; @Scheduled(cron = "0 */1 * * * ?")//ÊØèÈöî‰∏ÄÂàÜÈíüÊâßË°åÔºå‰∏ÄÂàÜÈíüÁöÑÊï¥Êï∞ÂÄçÁöÑÊó∂ÂÄôÊâßË°å public void closeOrderTaskV1()&#123; log.info("ÂÖ≥Èó≠ËÆ¢ÂçïÂÆöÊó∂‰ªªÂä°ÂêØÂä®"); int hour = Integer.parseInt(PropertiesUtil.getProperty("close.order.task.time.hour","2")); orderService.closeOrder(hour); log.info("ÂÖ≥Èó≠ËÆ¢ÂçïÂÆöÊó∂‰ªªÂä°ÁªìÊùü"); &#125;&#125; @Component‰∏ÄÂÆöË¶ÅÂä†ÔºåÂê¶ÂàôspringÊâ´Êèè‰∏çÂà∞„ÄÇ close.order.task.time.hour ‰πüÊòØÈÖçÁΩÆÂú®snailmall.properties‰∏≠ÁöÑÔºåËøôÈáåÈÖçÁΩÆÁöÑÊòØÈªòËÆ§ÁöÑ2ÔºåÂç≥‰∏§‰∏™Â∞èÊó∂Ôºå‰∏ãËÆ¢ÂçïË∂ÖËøá‰∏§‰∏™Â∞èÊó∂‰ªçÁÑ∂‰∏çÊîØ‰ªòÔºåÂ∞±ÂèñÊ∂àËØ•ËÆ¢Âçï„ÄÇ ÂØπ‰∫éorderServiceÈáåÈù¢ÁöÑÂÖ∑‰ΩìÊñπÊ≥ïÔºö ËøôÈáåÊòØÂÖ≥ÂçïÁöÑÂÖ∑‰ΩìÈÄªËæëÔºåÁªÜËäÇÊòØË°åÈîÅ„ÄÇËøôÊÆµ‰ª£Á†ÅÂè™Ë¶ÅÁü•ÈÅì‰ªñÊòØÂÖ∑‰ΩìÂÖ≥ÂçïÁöÑÈÄªËæëÂç≥ÂèØÔºå‰∏çÈúÄË¶Å‰ªîÁªÜ‰∫ÜËß£‰ª£Á†Å„ÄÇ 1234567891011121314151617181920212223242526@Overridepublic void closeOrder(int hour) &#123; Date closeDateTime = DateUtils.addHours(new Date(),-hour); //ÊâæÂà∞Áä∂ÊÄÅ‰∏∫Êú™ÊîØ‰ªòÂπ∂‰∏î‰∏ãÂçïÊó∂Èó¥ÊòØÊó©‰∫éÂΩìÂâçÊ£ÄÊµãÊó∂Èó¥ÁöÑ‰∏§‰∏™Â∞èÊó∂ÁöÑÊó∂Èó¥,Â∞±Â∞ÜÂÖ∂ÁΩÆ‰∏∫ÂèñÊ∂à //SELECT &lt;include refid="Base_Column_List"/&gt; from mmall_order WHERE status = #&#123;status&#125; &lt;![CDATA[ and create_time &lt;= #&#123;date&#125; ]]&gt; order by create_time desc List&lt;Order&gt; orderList = orderMapper.selectOrderStatusByCreateTime(Const.OrderStatusEnum.NO_PAY.getCode(),DateTimeUtil.dateToStr(closeDateTime)); for(Order order:orderList)&#123; List&lt;OrderItem&gt; orderItemList = orderItemMapper.getByOrderNo(order.getOrderNo()); for(OrderItem orderItem:orderItemList)&#123; //‰∏ÄÂÆöË¶ÅÁî®‰∏ªÈîÆwhereÊù°‰ª∂ÔºåÈò≤Ê≠¢ÈîÅË°®„ÄÇÂêåÊó∂ÂøÖÈ°ªÊòØÊîØÊåÅMySQLÁöÑInnoDB. Integer stock = productMapper.selectStockByProductId(orderItem.getProductId()); if(stock == null)&#123; continue; &#125; //Êõ¥Êñ∞‰∫ßÂìÅÂ∫ìÂ≠ò Product product = new Product(); product.setId(orderItem.getProductId()); product.setStock(stock+orderItem.getQuantity()); productMapper.updateByPrimaryKeySelective(product); &#125; //ÂÖ≥Èó≠order //UPDATE mmall_order set status = 0 where id = #&#123;id&#125; orderMapper.closeOrderByOrderId(order.getId()); log.info("ÂÖ≥Èó≠ËÆ¢ÂçïOrderNo:&#123;&#125;",order.getOrderNo()); &#125;&#125; ËøôÊ†∑ÔºådebugÂêØÂä®È°πÁõÆÔºå‰∏ÄÂàÜÈíüÂêéÂ∞±‰ºöËá™Âä®ÊâßË°åcloseOrderTaskV1ÊñπÊ≥ï‰∫Ü„ÄÇÊâæ‰∏Ä‰∏™Êú™ÊîØ‰ªòÁöÑËÆ¢ÂçïÔºåËøõË°åÁõ∏Â∫îÊµãËØï„ÄÇ 4„ÄÅÂ≠òÂú®ÁöÑÈóÆÈ¢ò ÁªèËøáÂÆûÈ™åÂèëÁé∞ÔºåÂêåÊó∂ÈÉ®ÁΩ≤‰∏§Âè∞tomcatÊúçÂä°Âô®ÔºåÊâßË°åÂÆöÊó∂‰ªªÂä°ÁöÑÊó∂ÂÄôÊòØ‰∏§Âè∞ÈÉΩÂêåÊó∂ÊâßË°åÁöÑÔºåÊòæÁÑ∂‰∏çÁ¨¶ÂêàÊàë‰ª¨ÈõÜÁæ§ÁöÑÁõÆÊ†áÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂú®Âêå‰∏ÄÊó∂Èó¥Âè™Êúâ‰∏ÄÂè∞ÊúçÂä°Âô®ÊâßË°åËøô‰∏™ÂÆöÊó∂‰ªªÂä°Âç≥ÂèØ„ÄÇÈÇ£‰πàËß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÂºïÂÖ•redisÂàÜÂ∏ÉÂºèÈîÅ„ÄÇ redisÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅÔºåÊ†∏ÂøÉÂëΩ‰ª§ÂºèsetnxÂëΩ‰ª§„ÄÇÊâÄ‰ª•ÈòÖËØª‰∏ãÈù¢ÔºåÊÇ®ÈúÄË¶ÅÂØπredisÂàÜÂ∏ÉÂºèÈîÅÁöÑÂü∫Êú¨ÂÆûÁé∞ÂéüÁêÜÂøÖÈ°ªË¶ÅÂÖàÊúâ‰∏ÄÂÆöÁöÑËÆ§ËØÜÊâçË°å„ÄÇ 5„ÄÅÁ¨¨‰∏ÄÁßçÊñπÊ°à Á¨¨‰∏ÄÊ≠•ÔºösetnxËøõÂéªÔºåÂ¶ÇÊûúÊàêÂäüÔºåËØ¥ÊòéÂ°ûÂÖ•redisÊàêÂäüÔºåÊä¢Âç†Âà∞ÈîÅ Á¨¨‰∫åÊ≠•ÔºöÊä¢Âà∞ÈîÅ‰πãÂêéÔºåÂÖàËÆæÁΩÆ‰∏Ä‰∏ãËøáÊúüÊó∂Èó¥ÔºåÂç≥ÂêéÈù¢Â¶ÇÊûúÊâßË°å‰∏çÂà∞deleteÔºå‰πü‰ºöÂ∞ÜËøô‰∏™ÈîÅËá™Âä®ÈáäÊîæÊéâÔºåÈò≤Ê≠¢Ê≠ªÈîÅ Á¨¨‰∏âÊ≠•ÔºöÂÖ≥Èó≠ËÆ¢ÂçïÔºåÂà†Èô§redisÈîÅ Â≠òÂú®ÁöÑÈóÆÈ¢òÔºöÂ¶ÇÊûúÂõ†‰∏∫tomcatÂÖ≥Èó≠ÊàñtomcatËøõÁ®ãÂú®ÊâßË°åcloseOrder()ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåÂç≥ËøòÊ≤°Êù•ÂæóÂèäËÆæÁΩÆÈîÅÁöÑËøáÊúüÊó∂Èó¥ÁöÑÊó∂ÂÄôÔºåËøô‰∏™Êó∂ÂÄô‰ºöÈÄ†ÊàêÊ≠ªÈîÅ„ÄÇÈúÄË¶ÅÊîπËøõ„ÄÇ 123456789101112131415161718192021222324252627//Á¨¨‰∏Ä‰∏™ÁâàÊú¨ÔºåÂú®Á™ÅÁÑ∂ÂÖ≥Èó≠tomcatÁöÑÊó∂ÂÄôÊúâÂèØËÉΩÂá∫Áé∞Ê≠ªÈîÅ@Scheduled(cron = "0 */1 * * * ?")//ÊØèÈöî‰∏ÄÂàÜÈíüÊâßË°åÔºå‰∏ÄÂàÜÈíüÁöÑÊï¥Êï∞ÂÄçpublic void closeOrderTaskV2()&#123; log.info("ÂÖ≥Èó≠ËÆ¢ÂçïÂÆöÊó∂‰ªªÂä°ÂêØÂä®"); //ËÆæÁΩÆÈîÅÔºåvalueÊòØÁî®ÂΩìÂâçÊó∂Èó¥+timeoutËøõË°åËÆæÁΩÆÁöÑ long timeout = Long.parseLong(PropertiesUtil.getProperty("lock.timeout")); Long setnxResult = RedisShardPoolUtil.setnx(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK,String.valueOf(System.currentTimeMillis()+timeout)); if(setnxResult != null &amp;&amp; setnxResult.intValue() ==1)&#123; //ËØ¥ÊòéË¢´ÂΩìÂâçÁöÑtomcatËøõÁ®ãÊä¢Âà∞ÈîÅÔºå‰∏ãÈù¢Â∞±ÂèØ‰ª•ÂÖ≥Èó≠ËÆ¢Âçï closeOrder(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); &#125;else &#123; log.info("Ê≤°ÊúâËé∑ÂèñÂàÜÂ∏ÉÂºèÈîÅÔºö&#123;&#125;",Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); &#125; log.info("ÂÖ≥Èó≠ËÆ¢ÂçïÂÆöÊó∂‰ªªÂä°ÁªìÊùü");&#125;private void closeOrder(String lockName) &#123; //ÁªôÈîÅ‰∏Ä‰∏™ËøáÊúüÊó∂Èó¥ÔºåÂ¶ÇÊûúÂõ†‰∏∫Êüê‰∏™ÂéüÂõ†ÂØºËá¥‰∏ãÈù¢ÁöÑÈîÅÊ≤°ÊúâË¢´Âà†Èô§ÔºåÈÄ†ÊàêÊ≠ªÈîÅ RedisShardPoolUtil.expire(lockName,50); log.info("Ëé∑Âèñ&#123;&#125;ÔºåThreadName:&#123;&#125;",Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK,Thread.currentThread().getName()); int hour = Integer.parseInt(PropertiesUtil.getProperty("close.order.task.time.hour","2")); orderService.closeOrder(hour); //ÂÖ≥Èó≠ËÆ¢Âçï‰πãÂêéÂ∞±Á´ãÂç≥Âà†Èô§Ëøô‰∏™ÈîÅ RedisShardPoolUtil.del(lockName); log.info("ÈáäÊîæ&#123;&#125;ÔºåThreadName:&#123;&#125;",Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK,Thread.currentThread().getName()); System.out.println("=============================================");&#125; 6„ÄÅÊîπËøõ ÂõæÁúã‰∏çÊ∏ÖÔºåÂèØ‰ª•ÈáçÊñ∞ÊâìÂºÄ‰∏Ä‰∏™Á™óÂè£Áúã„ÄÇÂÖ∑‰ΩìÁöÑÈÄªËæë‰ª£Á†ÅÔºö 12345678910111213141516171819202122232425262728@Scheduled(cron = "0 */1 * * * ?")//ÊØèÈöî‰∏ÄÂàÜÈíüÊâßË°åÔºå‰∏ÄÂàÜÈíüÁöÑÊï¥Êï∞ÂÄçpublic void closeOrderTaskV3()&#123; log.info("ÂÖ≥Èó≠ËÆ¢ÂçïÂÆöÊó∂‰ªªÂä°ÂêØÂä®"); //ËÆæÁΩÆÈîÅÔºåvalueÊòØÁî®ÂΩìÂâçÊó∂Èó¥+timeoutËøõË°åËÆæÁΩÆÁöÑ long timeout = Long.parseLong(PropertiesUtil.getProperty("lock.timeout")); Long setnxResult = RedisShardPoolUtil.setnx(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK,String.valueOf(System.currentTimeMillis()+timeout)); if(setnxResult != null &amp;&amp; setnxResult.intValue() ==1)&#123; //ËØ¥ÊòéË¢´ÂΩìÂâçÁöÑtomcatËøõÁ®ãÊä¢Âà∞ÈîÅÔºå‰∏ãÈù¢Â∞±ÂèØ‰ª•ÂÖ≥Èó≠ËÆ¢Âçï closeOrder(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); &#125;else &#123; //Âú®Ê≤°ÊúâÊãøÂà∞ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºå‰πüË¶ÅËøõË°åÁõ∏Â∫îÁöÑÂà§Êñ≠ÔºåÁ°Æ‰øù‰∏çÊ≠ªÈîÅ String lockValueStr = RedisShardPoolUtil.get(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); //Â¶ÇÊûúÂà§Êñ≠ÈîÅÊòØÂ≠òÂú®ÁöÑÂπ∂‰∏îÁé∞Âú®Â∑≤ÁªèË∂ÖÊó∂‰∫ÜÔºåÈÇ£‰πàÊàë‰ª¨Ëøô‰∏™ËøõÁ®ãÂ∞±ÊúâÊú∫‰ºöÂéªÂç†ÊúâËøôÊääÈîÅ if(lockValueStr != null &amp;&amp; System.currentTimeMillis() &gt; Long.parseLong(lockValueStr))&#123; //ÂΩìÂâçËøõÁ®ãËøõË°åget setÊìç‰ΩúÔºåÊãøÂà∞ËÄÅÁöÑkeyÔºåÂÜçÂ°ûËøõÊñ∞ÁöÑË∂ÖÊó∂Êó∂Èó¥ String getSetResult = RedisShardPoolUtil.getset(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK,String.valueOf(System.currentTimeMillis()+timeout)); //Â¶ÇÊûúÊãøÂà∞ÁöÑÊòØÁ©∫ÁöÑÔºåËØ¥ÊòéËÄÅÁöÑÈîÅÂ∑≤ÁªèÈáäÊîæÔºåÈÇ£‰πàÂΩìÂâçËøõÁ®ãÊúâÊùÉÂç†ÊúâËøôÊääÈîÅËøõË°åÊìç‰ΩúÔºõ //Â¶ÇÊûúÊãøÂà∞ÁöÑ‰∏çÊòØÁ©∫ÁöÑÔºåËØ¥ÊòéËÄÅÁöÑÈîÅ‰ªçÁÑ∂Âç†ÊúâÔºåÂπ∂‰∏îËøôÊ¨°getsetÊãøÂà∞ÁöÑkey‰∏é‰∏äÈù¢Êü•ËØ¢getÂæóÂà∞ÁöÑkey‰∏ÄÊ†∑ÁöÑËØùÔºåËØ¥ÊòéÊ≤°ÊúâË¢´ÂÖ∂‰ªñËøõÁ®ãÂà∑Êñ∞ÔºåÈÇ£‰πàÊú¨ËøõÁ®ãËøòÊòØÊúâÊùÉÂç†ÊúâËøôÊääÈîÅËøõË°åÊìç‰Ωú if(getSetResult == null || (getSetResult != null &amp;&amp; StringUtils.equals(lockValueStr,getSetResult)))&#123; closeOrder(Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); &#125;else &#123; log.info("Ê≤°ÊúâËé∑ÂèñÂàÜÂ∏ÉÂºèÈîÅÔºö&#123;&#125;",Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); &#125; &#125;else &#123; log.info("Ê≤°ÊúâËé∑ÂèñÂàÜÂ∏ÉÂºèÈîÅÔºö&#123;&#125;",Const.REDIS_LOCK.CLOSE_ORDER_TASK_LOCK); &#125; &#125; log.info("ÂÖ≥Èó≠ËÆ¢ÂçïÂÆöÊó∂‰ªªÂä°ÁªìÊùü");&#125; ËøôÊ†∑‰∏§Ê¨°ÁöÑÈò≤Ê≠ªÈîÅÊé™ÊñΩÔºå‰∏ç‰ªÖÂèØ‰ª•Èò≤Ê≠¢Ê≠ªÈîÅÔºåËøòÂèØ‰ª•ÊèêÈ´òÊïàÁéá„ÄÇ 7„ÄÅÊâ©Â±ï mysqlÂõõÁßç‰∫ãÂä°ÈöîÁ¶ªÊú∫Âà∂ read uncommitted:ËØªÂèñÊú™Êèê‰∫§ÂÜÖÂÆπ ‰∏§‰∏™Á∫øÁ®ãÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å‰∫ÜÊõ¥Êñ∞Êìç‰ΩúÔºå‰ΩÜÊòØÊ≤°ÊúâÊèê‰∫§ÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂú®‰∫ãÂä°ÂÜÖÂ∞±‰ºöËØªÂà∞ËØ•Á∫øÁ®ãÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆ„ÄÇ read committed:ËØªÂèñÊèê‰∫§ÂÜÖÂÆπÔºà‰∏çÂèØÈáçÂ§çËØªÔºâ ÈíàÂØπÁ¨¨‰∏ÄÁßçÊÉÖÂÜµÔºå‰∏Ä‰∏™Á∫øÁ®ãÂú®‰∏Ä‰∏™‰∫ãÂä°ÂÜÖ‰∏ç‰ºöËØªÂèñÂè¶‰∏Ä‰∏™Á∫øÁ®ãÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆ‰∫Ü„ÄÇ‰ΩÜÊòØÔºåËØªÂà∞‰∫ÜÂè¶‰∏Ä‰∏™Á∫øÁ®ãÊõ¥Êñ∞ÂêéÊèê‰∫§ÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØËØ¥ÈáçÂ§çËØªË°®ÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆ‰ºö‰∏ç‰∏ÄËá¥„ÄÇÊòæÁÑ∂ËøôÁßçÊÉÖÂÜµ‰πüÊòØ‰∏çÂêàÁêÜÁöÑÔºåÊâÄ‰ª•Âè´‰∏çÂèØÈáçÂ§çËØª„ÄÇ repeatable read:ÂèØÈáçÂ§çËØªÔºàÈªòËÆ§Ôºâ ÂèØÈáçÂ§çËØªÔºåÊòæÁÑ∂Ëß£ÂÜ≥2‰∏≠ÁöÑÈóÆÈ¢òÔºåÂç≥‰∏Ä‰∏™Á∫øÁ®ãÂú®‰∏Ä‰∏™‰∫ãÂä°ÂÜÖ‰∏ç‰ºöÂÜçËØªÂèñÂà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãÊèê‰∫§ÁöÑÊï∞ÊçÆÔºå‰øùËØÅ‰∫ÜËØ•Á∫øÁ®ãÂú®Ëøô‰∏™‰∫ãÂä°ÂÜÖÁöÑÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ ÂØπ‰∫éÊüê‰∫õÊÉÖÂÜµÔºåËøôÁßçÊñπÊ°à‰ºöÂá∫Áé∞ÂπªÂΩ±ËØªÔºå‰ªñÂØπ‰∫éÊõ¥Êñ∞Êìç‰ΩúÊòØÊ≤°Êúâ‰ªª‰ΩïÈóÆÈ¢òÁöÑ‰∫ÜÔºå‰ΩÜÊòØÂØπ‰∫éÊèíÂÖ•Êìç‰ΩúÔºåÊúâÂèØËÉΩÂú®‰∏Ä‰∏™‰∫ãÂä°ÂÜÖËØªÂà∞Êñ∞ÊèíÂÖ•ÁöÑÊï∞ÊçÆÔºà‰ΩÜÊòØMySQL‰∏≠Áî®Â§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂Êú∫Âà∂Ëß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºâÔºåÊâÄ‰ª•ÈªòËÆ§‰ΩøÁî®ÁöÑÂ∞±ÊòØËøô‰∏™Êú∫Âà∂ÔºåÊ≤°Êúâ‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ serializable:Â∫èÂàóÂåñ Áï•„ÄÇ Â≠òÂÇ®ÂºïÊìé MySQLÈªòËÆ§‰ΩøÁî®ÁöÑÊòØInnoDBÔºåÊîØÊåÅ‰∫ãÂä°„ÄÇËøòÊúâ‰æãÂ¶ÇMyISAM,ËøôÁßçÂ≠òÂÇ®ÂºïÊìé‰∏çÊîØÊåÅ‰∫ãÂä°ÔºåÂè™ÊîØÊåÅÂè™ËØªÊìç‰ΩúÔºåÂú®Áî®Âà∞Êï∞ÊçÆÁöÑ‰øÆÊîπÁöÑÂú∞ÊñπÔºå‰∏ÄËà¨ÈÉΩÊòØÁî®ÈªòËÆ§ÁöÑInnoDBÂ≠òÂÇ®ÂºïÊìé„ÄÇ Á¥¢ÂºïÁöÑ‰∏Ä‰∏™Ê≥®ÊÑèÁÇπ ‰∏ÄËà¨Á±ªÂûã‰∏∫normalÂíåuniqueÔºåÁî®btreeÂÆûÁé∞ÔºåÂØπ‰∫éËÅîÂêàÁ¥¢Âºï(Â≠óÊÆµ1ÂíåÂ≠óÊÆµ2)ÔºåÂú®ÊâßË°åÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºå‰æãÂ¶Ç 1select * from xxx where Â≠óÊÆµ1="xxx" ... ÊòØÂèØ‰ª•Âà©Áî®Âà∞Á¥¢ÂºïÁöÑÈ´òÊÄßËÉΩÊü•ËØ¢ÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûúÊòØ 1select * from xxx where Â≠óÊÆµ2="xxx" ... ÊïàÁéáË∑üÊôÆÈÄöÁöÑÊü•ËØ¢Êó∂‰∏ÄÊ†∑ÁöÑÔºåÂõ†‰∏∫Áî®Á¥¢ÂºïËøõË°åÊü•ËØ¢ÔºåÊúÄÂ∑¶ËæπÁöÑÈÇ£‰∏™Â≠óÊÆµÂøÖÈ°ªË¶ÅÊúâÔºåÂê¶ÂàôÊó†Êïà„ÄÇ Êâ©Â±ïÁöÑÂÜÖÂÆπÁü•ËØÜÈ°∫‰æøÊèê‰∏Ä‰∏ãÔºåÂú®Êï∞ÊçÆÂ∫ìËøô‰∏ÄÂùóÔºå‰ºöËØ¶ÁªÜ‰ªãÁªç‰∏Ä‰∏ã„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedissonÂÆûÁé∞RedisÂàÜÂ∏ÉÂºèÈîÅÂéüÁêÜ]]></title>
    <url>%2F2019%2F01%2F22%2Fmiscellany%2F02Redisson%E5%AE%9E%E7%8E%B0Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%2F</url>
    <content type="text"><![CDATA[Êàë‰ª¨ÂèØ‰ª•Ëá™Â∑±Êù•ÂÆûÁé∞‰∏Ä‰∏™redisÂàÜÂ∏ÉÂºèÈîÅÔºå‰ΩÜÊòØÂ¶Ç‰ΩïÁî®Redisson‰ºòÈõÖÂú∞ÂÆûÁé∞Âë¢ÔºüÊú¨ÊñáÊé¢ËÆ®‰∏Ä‰∏ãÂÆÉÁöÑÂéüÁêÜ„ÄÇ Áî®RedissonÊù•ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅÂºÇÂ∏∏Âú∞ÁÆÄÂçïÔºåÂΩ¢Â¶ÇÔºö ËøòÊîØÊåÅredisÂçïÂÆû‰æã„ÄÅredisÂì®ÂÖµ„ÄÅredis cluster„ÄÅredis master-slaveÁ≠âÂêÑÁßçÈÉ®ÁΩ≤Êû∂ÊûÑÔºåÈÉΩÂèØ‰ª•Áªô‰Ω†ÂÆåÁæéÂÆûÁé∞„ÄÇ Âä†ÈîÅ ÂéüÁêÜÂõæÔºö Áé∞Âú®Êüê‰∏™ÂÆ¢Êà∑Á´ØË¶ÅÂä†ÈîÅ„ÄÇÂ¶ÇÊûúËØ•ÂÆ¢Êà∑Á´ØÈù¢ÂØπÁöÑÊòØ‰∏Ä‰∏™redis clusterÈõÜÁæ§Ôºå‰ªñÈ¶ñÂÖà‰ºöÊ†πÊçÆhashËäÇÁÇπÈÄâÊã©‰∏ÄÂè∞Êú∫Âô®„ÄÇÁ¥ßÊé•ÁùÄÔºåÂ∞±‰ºöÂèëÈÄÅ‰∏ÄÊÆµluaËÑöÊú¨Âà∞redis‰∏äÔºåÈÇ£ÊÆµluaËÑöÊú¨Â¶Ç‰∏ãÊâÄÁ§∫Ôºö ‰∏∫Âï•Ë¶ÅÁî®luaËÑöÊú¨Âë¢ÔºüÂõ†‰∏∫‰∏ÄÂ§ßÂù®Â§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæëÔºåÂèØ‰ª•ÈÄöËøáÂ∞ÅË£ÖÂú®luaËÑöÊú¨‰∏≠ÂèëÈÄÅÁªôredisÔºå‰øùËØÅËøôÊÆµÂ§çÊùÇ‰∏öÂä°ÈÄªËæëÊâßË°åÁöÑÂéüÂ≠êÊÄß„ÄÇ Ëß£Èáä‰∏Ä‰∏ãËøôÊÆµËÑöÊú¨ÁöÑÊÑèÊÄù„ÄÇ ËøôÈáåÁöÑKEYS[1]‰ª£Ë°®ÁöÑÊòØ‰Ω†Âä†ÈîÅÁöÑÈÇ£‰∏™keyÁöÑÂêçÂ≠ó„ÄÇËøô‰∏™keyÂ∞±ÊòØÊàë‰ª¨Â∏∏ÁúãÂà∞ÁöÑÔºö 1RLock lock = redisson.getLock("myLock"); ‰∏≠ÁöÑmyLockÔºåÊàëÂ∞±ÊòØÂØπËøô‰∏™keyËøõË°åÂä†ÈîÅ„ÄÇ ËøôÈáåÁöÑARGV[1]‰ª£Ë°®ÁöÑÂ∞±ÊòØÈîÅkeyÁöÑÈªòËÆ§ÁîüÂ≠òÊó∂Èó¥ÔºåÈªòËÆ§30Áßí„ÄÇARGV[2]‰ª£Ë°®ÁöÑÊòØÂä†ÈîÅÁöÑÂÆ¢Êà∑Á´ØÁöÑID:ÊØîÂ¶Ç8743c9c0-0795-4907-87fd-6c719a6b4586:1 Á¨¨‰∏ÄÊÆµifÂà§Êñ≠ËØ≠Âè•ÔºåÂ∞±ÊòØÁõ∏ÂΩì‰∫éÁî®exists myLockÂëΩ‰ª§Âà§Êñ≠‰∏Ä‰∏ãÔºåÂ¶ÇÊûú‰Ω†Ë¶ÅÂä†ÈîÅÁöÑÈÇ£‰∏™ÈîÅkey‰∏çÂ≠òÂú®ÁöÑËØùÔºå‰Ω†Â∞±ËøõË°åÂä†ÈîÅ„ÄÇÂ¶Ç‰ΩïÂä†ÈîÅÂë¢ÔºüÂæàÁÆÄÂçïÔºåÁî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ôºöhset myLock„ÄÇ ÊâßË°åÂÆåhest‰πãÂêéÔºåËÆæÁΩÆ‰∫Ü‰∏Ä‰∏™hashÊï∞ÊçÆÁªìÊûÑÔºö8743c9c0-0795-4907-87fd-6c719a6b4586:1 1ÔºåËøôË°åÂëΩ‰ª§ÊâßË°åÂêéÔºå‰ºöÂá∫Áé∞‰∏Ä‰∏™Á±ª‰ºº‰∏ãÈù¢ÁöÑÊï∞ÊçÆÁªìÊûÑÔºö Á¥ßÊé•ÁùÄ‰ºöÊâßË°åpexpire myLock 30000ÂëΩ‰ª§ÔºåËÆæÁΩÆmyLockËøô‰∏™ÈîÅkeyÁöÑÁîüÂ≠òÊó∂Èó¥ÊòØ30Áßí„ÄÇÂ•Ω‰∫ÜÔºåÂà∞Ê≠§‰∏∫Ê≠¢ÔºåokÔºåÂä†ÈîÅÂÆåÊàê‰∫Ü„ÄÇ ÈîÅ‰∫íÊñ• ÈÇ£‰πàÂú®Ëøô‰∏™Êó∂ÂÄôÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´Ø2Êù•Â∞ùËØïÂä†ÈîÅÔºåÊâßË°å‰∫ÜÂêåÊ†∑ÁöÑ‰∏ÄÊÆµluaËÑöÊú¨Ôºå‰ºöÂíãÊ†∑Âë¢ÔºüÂæàÁÆÄÂçïÔºåÁ¨¨‰∏Ä‰∏™ifÂà§Êñ≠‰ºöÊâßË°åexists myLockÔºåÂèëÁé∞myLockËøô‰∏™ÈîÅkeyÂ∑≤ÁªèÂ≠òÂú®‰∫Ü„ÄÇÊé•ÁùÄÁ¨¨‰∫å‰∏™ifÂà§Êñ≠ÔºåÂà§Êñ≠‰∏Ä‰∏ãÔºåmyLockÈîÅkeyÁöÑhashÊï∞ÊçÆÁªìÊûÑ‰∏≠ÔºåÊòØÂê¶ÂåÖÂê´ÂÆ¢Êà∑Á´Ø2ÁöÑIDÔºå‰ΩÜÊòØÊòéÊòæ‰∏çÊòØÁöÑÔºåÂõ†‰∏∫ÈÇ£ÈáåÂåÖÂê´ÁöÑÊòØÂÆ¢Êà∑Á´Ø1ÁöÑID„ÄÇ ÊâÄ‰ª•Ëøô‰∏™ÂÆ¢Êà∑Á´Ø2‰∏§‰∏™ifÈÉΩ‰∏çËÉΩËøõÂÖ•ÔºåÂè™ËÉΩÊâßË°åÊúÄÂêéÁöÑpttl myLockÔºåËøîÂõûÂÄº‰ª£Ë°®‰∫ÜmyLockËøô‰∏™ÈîÅkeyÁöÑÂâ©‰ΩôÁîüÂ≠òÊó∂Èó¥„ÄÇÊØîÂ¶ÇËøòÂâ©15000ÊØ´ÁßíÁöÑÁîüÂ≠òÊó∂Èó¥„ÄÇÊ≠§Êó∂ÂÆ¢Êà∑Á´Ø2‰ºöËøõÂÖ•‰∏Ä‰∏™whileÂæ™ÁéØÔºå‰∏çÂÅúÁöÑÂ∞ùËØïÂä†ÈîÅ„ÄÇ watch dogËá™Âä®Âª∂ÊúüÊú∫Âà∂ ÂÆ¢Êà∑Á´Ø1Âä†ÈîÅÁöÑÈîÅkeyÈªòËÆ§ÁîüÂ≠òÊó∂Èó¥Êâç30ÁßíÔºåÂ¶ÇÊûúË∂ÖËøá‰∫Ü30ÁßíÔºåÂÆ¢Êà∑Á´Ø1ËøòÊÉ≥‰∏ÄÁõ¥ÊåÅÊúâËøôÊääÈîÅÔºåÊÄé‰πàÂäûÂë¢Ôºü ÁÆÄÂçïÔºÅÂè™Ë¶ÅÂÆ¢Êà∑Á´Ø1‰∏ÄÊó¶Âä†ÈîÅÊàêÂäüÔºåÂ∞±‰ºöÂêØÂä®‰∏Ä‰∏™watch dogÁúãÈó®ÁãóÔºå‰ªñÊòØ‰∏Ä‰∏™ÂêéÂè∞Á∫øÁ®ãÔºå‰ºöÊØèÈöî10ÁßíÊ£ÄÊü•‰∏Ä‰∏ãÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´Ø1ËøòÊåÅÊúâÈîÅkeyÔºåÈÇ£‰πàÂ∞±‰ºö‰∏çÊñ≠ÁöÑÂª∂ÈïøÈîÅkeyÁöÑÁîüÂ≠òÊó∂Èó¥„ÄÇ ÂèØÈáçÂÖ•Âä†ÈîÅÊú∫Âà∂ Áúã‰∏Ä‰∏ã‰ª£Á†ÅÔºåÁõ∏ÂêåÁöÑÂÆ¢Êà∑ËøõÊù•Ôºå‰ºöËøõÂÖ•Á¨¨‰∫å‰∏™ifÔºå‰ºöÊâßË°åhincrbyÔºåÂç≥Â¢û1ÔºåÈÇ£‰πàËøô‰∏™hashÁªìÊûÑÂ∞±‰ºöÂèòÊàêÔºö ÈáäÊîæÈîÅ Â¶ÇÊûúÊâßË°ålock.unlock()ÔºåÂ∞±ÂèØ‰ª•ÈáäÊîæÂàÜÂ∏ÉÂºèÈîÅÔºåÊ≠§Êó∂ÁöÑ‰∏öÂä°ÈÄªËæë‰πüÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑ„ÄÇÂÖ∂ÂÆûËØ¥ÁôΩ‰∫ÜÔºåÂ∞±ÊòØÊØèÊ¨°ÈÉΩÂØπmyLockÊï∞ÊçÆÁªìÊûÑ‰∏≠ÁöÑÈÇ£‰∏™Âä†ÈîÅÊ¨°Êï∞Âáè1„ÄÇÂ¶ÇÊûúÂèëÁé∞Âä†ÈîÅÊ¨°Êï∞ÊòØ0‰∫ÜÔºåËØ¥ÊòéËøô‰∏™ÂÆ¢Êà∑Á´ØÂ∑≤Áªè‰∏çÂÜçÊåÅÊúâÈîÅ‰∫ÜÔºåÊ≠§Êó∂Â∞±‰ºöÁî®Ôºödel myLockÂëΩ‰ª§Ôºå‰ªéredisÈáåÂà†Èô§Ëøô‰∏™key„ÄÇÁÑ∂ÂêéÂë¢ÔºåÂè¶Â§ñÁöÑÂÆ¢Êà∑Á´Ø2Â∞±ÂèØ‰ª•Â∞ùËØïÂÆåÊàêÂä†ÈîÅ‰∫Ü„ÄÇ ËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÂàÜÂ∏ÉÂºèÈîÅÁöÑÂºÄÊ∫êRedissonÊ°ÜÊû∂ÁöÑÂÆûÁé∞Êú∫Âà∂„ÄÇ Â≠òÂú®ÁöÑÈóÆÈ¢ò ÂÖ∂ÂÆû‰∏äÈù¢ÈÇ£ÁßçÊñπÊ°àÊúÄÂ§ßÁöÑÈóÆÈ¢òÔºåÂ∞±ÊòØÂ¶ÇÊûú‰Ω†ÂØπÊüê‰∏™redis masterÂÆû‰æãÔºåÂÜôÂÖ•‰∫ÜmyLockËøôÁßçÈîÅkeyÁöÑvalueÔºåÊ≠§Êó∂‰ºöÂºÇÊ≠•Â§çÂà∂ÁªôÂØπÂ∫îÁöÑmaster slaveÂÆû‰æã„ÄÇ ‰ΩÜÊòØÂ§çÂà∂ÁöÑËøô‰∏™ËøáÁ®ã‰∏≠‰∏ÄÊó¶ÂèëÁîüredis masterÂÆïÊú∫Ôºå‰∏ªÂ§áÂàáÊç¢Ôºåredis slaveÂèò‰∏∫‰∫Üredis master„ÄÇ ÂÅáËÆæÂÆ¢Êà∑Á´Ø1Âú®redis master‰∏äËé∑ÂæóÈîÅÔºåÁÑ∂Âêé‰∏ªÊú∫ÂÆïÊú∫Ôºåredis slaveÊàê‰∏∫Êñ∞ÁöÑredis masterÔºå‰ΩÜÊòØËøòÊú™ÂêåÊ≠•Âà∞redis slave‰∏äÔºå‰ΩÜÊòØÂÆ¢Êà∑Á´Ø1Â∑≤ÁªèËßâÂæóËá™Â∑±Ëé∑ÂèñÂà∞‰∫ÜÈîÅ„ÄÇ Ê≠§Êó∂ÔºåÂÆ¢Êà∑Á´Ø2Êù•Â∞ùËØïÂä†ÈîÅÁöÑÊó∂ÂÄôÔºåÂú®Êñ∞ÁöÑredis master‰∏äÂÆåÊàê‰∫ÜÂä†ÈîÅÔºåÊ≠§Êó∂Â∞±‰ºöÂèëÁîüÂ§ö‰∏™ÂÆ¢Êà∑Á´ØÂÆåÊàêÂØπ‰∏Ä‰∏™keyÁöÑÂä†ÈîÅ„ÄÇËøôÊó∂Á≥ªÁªüÂú®‰∏öÂä°ËØ≠‰πâ‰∏ä‰∏ÄÂÆö‰ºöÂá∫Áé∞ÈóÆÈ¢òÔºåÂØºËá¥ÂêÑÁßçËÑèÊï∞ÊçÆÁöÑ‰∫ßÁîü„ÄÇ ÊâÄ‰ª•Ëøô‰∏™Â∞±ÊòØredis clusterÔºåÊàñËÄÖÊòØredis master-slaveÊû∂ÊûÑÁöÑ‰∏ª‰ªéÂºÇÊ≠•Â§çÂà∂ÂØºËá¥ÁöÑredisÂàÜÂ∏ÉÂºèÈîÅÁöÑÊúÄÂ§ßÁº∫Èô∑ÔºöÂú®redis masterÂÆû‰æãÂÆïÊú∫ÁöÑÊó∂ÂÄôÔºåÂèØËÉΩÂØºËá¥Â§ö‰∏™ÂÆ¢Êà∑Á´ØÂêåÊó∂ÂÆåÊàêÂä†ÈîÅ„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[spring‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫]]></title>
    <url>%2F2019%2F01%2F22%2Fmiscellany%2F01%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%2F</url>
    <content type="text"><![CDATA[ÁªèÂ∏∏Âê¨Âà∞Âà´‰∫∫ËØ¥‰∫ãÂä°‰º†Êí≠Ë°å‰∏∫ÔºåÈÇ£Âà∞Â∫ï‰ªÄ‰πàÊòØ‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫Âë¢Ôºü 1.‰ªÄ‰πàÊòØ‰∫ãÂä°Ôºü Âú®Êï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏≠Ôºå‰∏Ä‰∏™‰∫ãÂä°ÊòØÊåáÔºöÁî±‰∏ÄÁ≥ªÂàóÊï∞ÊçÆÂ∫ìÊìç‰ΩúÁªÑÊàêÁöÑ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÈÄªËæëËøáÁ®ã„ÄÇ‰æãÂ¶ÇÈì∂Ë°åËΩ¨Â∏êÔºå‰ªéÂéüË¥¶Êà∑Êâ£Èô§ÈáëÈ¢ùÔºå‰ª•ÂèäÂêëÁõÆÊ†áË¥¶Êà∑Ê∑ªÂä†ÈáëÈ¢ùÔºåËøô‰∏§‰∏™Êï∞ÊçÆÂ∫ìÊìç‰ΩúÁöÑÊÄªÂíåÔºåÊûÑÊàê‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÈÄªËæëËøáÁ®ãÔºå‰∏çÂèØÊãÜÂàÜ„ÄÇËøô‰∏™ËøáÁ®ãË¢´Áß∞‰∏∫‰∏Ä‰∏™‰∫ãÂä°ÔºåÂÖ∑ÊúâACIDÁâπÊÄß„ÄÇ ËøôÈáåÊ≥®ÊÑèÔºåÂÖ∂ÂÆû‰∫ãÂä°Â∞±ÊòØÊï∞ÊçÆÂ∫ìÊâçËÉΩ‰øùËØÅÁöÑÔºåÊâÄ‰ª•ÊäõÂºÄÊï∞ÊçÆÂ∫ìÂ±ÇÈù¢Êù•Ë∞à‰∫ãÂä°Êú¨Ë∫´Â∞±ÊòØ‰∏çÂ≠òÂú®ÁöÑÔºåÊâÄ‰ª•‰∫ãÂä°ÁöÑÊ¶ÇÂøµÂ∞±ÊòØÊï∞ÊçÆÂ∫ì‰∏ÄÁ≥ªÂàóÊìç‰ΩúÁöÑ‰∏Ä‰∏™ÂÆåÊï¥ÂçïÂÖÉ„ÄÇ 2.‰ªÄ‰πàÊòØACIDÔºü ACIDÊòØÊåáÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÂú®ÂÜôÂÖ•ÊàñÊõ¥Êñ∞ËµÑÊñôÁöÑËøáÁ®ã‰∏≠Ôºå‰∏∫‰øùËØÅ‰∫ãÂä°ÊòØÊ≠£Á°ÆÂèØÈù†ÁöÑÔºåÊâÄÂøÖÈ°ªÂÖ∑Â§áÁöÑÂõõ‰∏™ÁâπÊÄßÔºöÂéüÂ≠êÊÄß„ÄÅ‰∏ÄËá¥ÊÄß„ÄÅÈöîÁ¶ªÊÄß„ÄÅÊåÅ‰πÖÊÄß„ÄÇ AtomicityÔºö‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúÔºåÊàñËÄÖÂÖ®ÈÉ®ÂÆåÊàêÔºåÊàñËÄÖÂÖ®ÈÉ®‰∏çÂÆåÊàêÔºå‰∏ç‰ºöÁªìÊùüÂú®‰∏≠Èó¥Êüê‰∏™ÁéØËäÇ„ÄÇ‰∫ãÂä°Âú®ÊâßË°åËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØÔºå‰ºöË¢´ÂõûÊªöÂà∞‰∫ãÂä°ÂºÄÂßãÂâçÁöÑÁä∂ÊÄÅÔºåÂ∞±ÂÉèËøô‰∏™‰∫ãÂä°‰ªéÊù•Ê≤°ÊúâÊâßË°åËøá‰∏ÄÊ†∑„ÄÇ ConsistencyÔºöÂú®‰∫ãÂä°ÂºÄÂßã‰πãÂâçÂíå‰∫ãÂä°ÁªìÊùü‰ª•ÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇËøôË°®Á§∫ÂÜôÂÖ•ÁöÑËµÑÊñôÂøÖÈ°ªÂÆåÂÖ®Á¨¶ÂêàÊâÄÊúâÁöÑÈ¢ÑËÆæÁ∫¶Êùü„ÄÅËß¶ÂèëÂô®„ÄÅÁ∫ßËÅîÂõûÊªöÁ≠â„ÄÇ IsolationÔºöÊï∞ÊçÆÂ∫ìÂÖÅËÆ∏Â§ö‰∏™Âπ∂Âèë‰∫ãÂä°ÂêåÊó∂ÂØπÂÖ∂Êï∞ÊçÆËøõË°åËØªÂÜôÂíå‰øÆÊîπÁöÑËÉΩÂäõÔºåÈöîÁ¶ªÊÄßÂèØ‰ª•Èò≤Ê≠¢Â§ö‰∏™‰∫ãÂä°Âπ∂ÂèëÊâßË°åÊó∂Áî±‰∫é‰∫§ÂèâÊâßË°åËÄåÂØºËá¥Êï∞ÊçÆÁöÑ‰∏ç‰∏ÄËá¥„ÄÇ‰∫ãÂä°Èöî Á¶ªÂàÜ‰∏∫‰∏çÂêåÁ∫ßÂà´ÔºåÂåÖÊã¨ËØªÊú™Êèê‰∫§(Read uncommitted)„ÄÅËØªÊèê‰∫§(read committed)„ÄÅÂèØÈáçÂ§çËØª(repeatable read)Âíå‰∏≤Ë°åÂåñ(Serializable)„ÄÇ DurabilityÔºö‰∫ãÂä°Â§ÑÁêÜÁªìÊùüÂêéÔºåÂØπÊï∞ÊçÆÁöÑ‰øÆÊîπÂ∞±ÊòØÊ∞∏‰πÖÁöÑÔºåÂç≥‰æøÁ≥ªÁªüÊïÖÈöú‰πü‰∏ç‰ºö‰∏¢Â§±„ÄÇ 3.spring‰∫ãÂä°‰º†Êí≠Ë°å‰∏∫ Âú®Êàë‰ª¨Áî®SSMÂºÄÂèëÈ°πÁõÆÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰∏ÄËà¨ÈÉΩÊòØÂ∞Ü‰∫ãÂä°ËÆæÁΩÆÂú®ServiceÂ±Ç ÈÇ£‰πàÂΩìÊàë‰ª¨Ë∞ÉÁî®ServiceÂ±ÇÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÊó∂ÂÄôÂÆÉËÉΩÂ§ü‰øùËØÅÊàë‰ª¨ÁöÑËøô‰∏™ÊñπÊ≥ï‰∏≠ÊâßË°åÁöÑÊâÄÊúâÁöÑÂØπÊï∞ÊçÆÂ∫ìÁöÑÊõ¥Êñ∞Êìç‰Ωú‰øùÊåÅÂú®‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÔºåÂú®‰∫ãÂä°Â±ÇÈáåÈù¢Ë∞ÉÁî®ÁöÑËøô‰∫õÊñπÊ≥ïË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•„ÄÇÈÇ£‰πà‰∫ãÂä°ÁöÑ‰º†Êí≠ÁâπÊÄß‰πüÊòØ‰ªéËøôÈáåËØ¥Ëµ∑ÁöÑ„ÄÇ Â¶ÇÊûú‰Ω†Âú®‰Ω†ÁöÑ`Service`Â±ÇÁöÑËøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåÈô§‰∫ÜË∞ÉÁî®‰∫Ü`Dao`Â±ÇÁöÑÊñπÊ≥ï‰πãÂ§ñÔºåËøòË∞ÉÁî®‰∫ÜÊú¨Á±ªÁöÑÂÖ∂‰ªñÁöÑ`Service`ÊñπÊ≥ïÔºåÈÇ£‰πàÂú®Ë∞ÉÁî®ÂÖ∂‰ªñÁöÑ`Service`ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåËøô‰∏™‰∫ãÂä°ÊòØÊÄé‰πàËßÑÂÆöÁöÑÂë¢ÔºåÊàëÂøÖÈ°ª‰øùËØÅÊàëÂú®ÊàëÊñπÊ≥ïÈáåË∞ÉÁî®ÁöÑËøô‰∏™ÊñπÊ≥ï‰∏éÊàëÊú¨Ë∫´ÁöÑÊñπÊ≥ïÂ§ÑÂú®Âêå‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÔºåÂê¶ÂàôÂ¶ÇÊûú‰øùËØÅ‰∫ãÁâ©ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ‰∫ãÂä°ÁöÑ‰º†Êí≠ÁâπÊÄßÂ∞±ÊòØËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑ. Âú®Spring‰∏≠ÊúâÈíàÂØπ‰º†Êí≠ÁâπÊÄßÁöÑÂ§öÁßçÈÖçÁΩÆÊàë‰ª¨Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÂè™Áî®ÂÖ∂‰∏≠ÁöÑ‰∏ÄÁßç:PROPGATION_REQUIREDÔºöËøô‰∏™ÈÖçÁΩÆÈ°πÁöÑÊÑèÊÄùÊòØËØ¥ÂΩìÊàëË∞ÉÁî®serviceÂ±ÇÁöÑÊñπÊ≥ïÁöÑÊó∂ÂÄôÂºÄÂêØ‰∏Ä‰∏™‰∫ãÂä°(ÂÖ∑‰ΩìË∞ÉÁî®ÈÇ£‰∏ÄÂ±ÇÁöÑÊñπÊ≥ïÂºÄÂßãÂàõÂª∫‰∫ãÂä°ÔºåË¶ÅÁúã‰Ω†ÁöÑaopÁöÑÈÖçÁΩÆ),ÈÇ£‰πàÂú®Ë∞ÉÁî®Ëøô‰∏™serviceÂ±ÇÈáåÈù¢ÁöÑÂÖ∂‰ªñÁöÑÊñπÊ≥ïÁöÑÊó∂ÂÄô,Â¶ÇÊûúÂΩìÂâçÊñπÊ≥ï‰∫ßÁîü‰∫Ü‰∫ãÂä°Â∞±Áî®ÂΩìÂâçÊñπÊ≥ï‰∫ßÁîüÁöÑ‰∫ãÂä°ÔºåÂê¶ÂàôÂ∞±ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ‰∫ãÂä°„ÄÇËøô‰∏™Â∑•‰Ωú‰ΩøÁî±SpringÊù•Â∏ÆÂä©Êàë‰ª¨ÂÆåÊàêÁöÑ„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂΩìÂèëÁîü`RuntimeException`ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∫ãÂä°Êâç‰ºöÂõûÊªöÔºåÊâÄ‰ª•Ë¶ÅÊ≥®ÊÑè‰∏Ä‰∏ãÔºöÂ¶ÇÊûú‰Ω†Âú®Á®ãÂ∫èÂèëÁîüÈîôËØØÁöÑÊÉÖÂÜµ‰∏ãÔºåÊúâËá™Â∑±ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂ÂÆö‰πâËá™Â∑±ÁöÑ`Exception`ÔºåÂøÖÈ°ª‰ªé`RuntimeException`Á±ªÁªßÊâøÔºåËøôÊ†∑‰∫ãÂä°Êâç‰ºöÂõûÊªöÔºÅ 4.‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ 1„ÄÅSerializableÔºöÊúÄ‰∏•Ê†ºÁöÑÁ∫ßÂà´Ôºå‰∫ãÂä°‰∏≤Ë°åÊâßË°åÔºåËµÑÊ∫êÊ∂àËÄóÊúÄÂ§ßÔºõ 2„ÄÅREPEATABLE READÔºö‰øùËØÅ‰∫Ü‰∏Ä‰∏™‰∫ãÂä°‰∏ç‰ºö‰øÆÊîπÂ∑≤ÁªèÁî±Âè¶‰∏Ä‰∏™‰∫ãÂä°ËØªÂèñ‰ΩÜÊú™Êèê‰∫§ÔºàÂõûÊªöÔºâÁöÑÊï∞ÊçÆ„ÄÇÈÅøÂÖç‰∫Ü‚ÄúËÑèËØªÂèñ‚ÄùÂíå‚Äú‰∏çÂèØÈáçÂ§çËØªÂèñ‚ÄùÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØÂ∏¶Êù•‰∫ÜÊõ¥Â§öÁöÑÊÄßËÉΩÊçüÂ§±„ÄÇ 3„ÄÅREAD COMMITTED:Â§ßÂ§öÊï∞‰∏ªÊµÅÊï∞ÊçÆÂ∫ìÁöÑÈªòËÆ§‰∫ãÂä°Á≠âÁ∫ßÔºå‰øùËØÅ‰∫Ü‰∏Ä‰∏™‰∫ãÂä°‰∏ç‰ºöËØªÂà∞Âè¶‰∏Ä‰∏™Âπ∂Ë°å‰∫ãÂä°Â∑≤‰øÆÊîπ‰ΩÜÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆÔºåÈÅøÂÖç‰∫Ü‚ÄúËÑèËØªÂèñ‚Äù„ÄÇËØ•Á∫ßÂà´ÈÄÇÁî®‰∫éÂ§ßÂ§öÊï∞Á≥ªÁªü„ÄÇ 4„ÄÅRead UncommittedÔºö‰øùËØÅ‰∫ÜËØªÂèñËøáÁ®ã‰∏≠‰∏ç‰ºöËØªÂèñÂà∞ÈùûÊ≥ïÊï∞ÊçÆ„ÄÇ 5.ÊÄªÁªì Êú¨ÊñáÁöÑÈáçÁÇπÊòØÂú®‰∫éÁêÜËß£‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫Ëøô‰∏™Ê¶ÇÂøµÔºå‰ªé‰∫ãÂä°ÁöÑÊ¶ÇÂøµÔºåÂà∞‰∫ãÂä°ÁöÑACID‰ªãÁªçÔºåÂºïÂá∫‰∫ãÂä°‰º†Êí≠‰º†Êí≠Ë°å‰∏∫ÂíåÈöîÁ¶ªÁ∫ßÂà´Ëøô‰∏§‰∏™Ê¶ÇÂøµÂä†‰ª•ÁêÜËß£„ÄÇ]]></content>
      <tags>
        <tag>miscellany</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ConcurrentHashMap]]></title>
    <url>%2F2019%2F01%2F22%2Fjava-collection%2F12.ConcurrentHashMap%2F</url>
    <content type="text"><![CDATA[ÂØπ‰∫éÂπ∂ÂèëÂú∫ÊôØ‰∏ãÔºåÊé®Ëçê‰ΩøÁî®Á∫øÁ®ãÂÆâÂÖ®ÁöÑ concurrentHashMap ÔºåËÄå‰∏çÊòØ HashMap ÊàñËÄÖÊòØ HashTable .concurrentHashMapÂú®JDK7ÂíåJDK8‰∏≠ÁöÑÂÆûÁé∞ÂéüÁêÜÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇÊú¨ÊñáÂàÜÂà´ÂØπÂÖ∂Ê†∏ÂøÉÊÄùÊÉ≥ÂíåÊñπÊ≥ïËøõË°åÈòêËø∞„ÄÇ ‰∏Ä„ÄÅJDK7ÂÆûÁé∞ ConcurrentHashMap ÁöÑÂÜÖÈÉ®ÁªÜÂàÜ‰∫ÜËã•Âπ≤‰∏™Â∞èÁöÑ HashMap ÔºåÁß∞‰πã‰∏∫ÊÆµÔºà SEGMENT Ôºâ„ÄÇ ConcurrentHashMap ÊòØ‰∏Ä‰∏™ Segment Êï∞ÁªÑÔºåSegment ÈÄöËøáÁªßÊâø ReentrantLock Êù•ËøõË°åÂä†ÈîÅÔºåÊâÄ‰ª•ÊØèÊ¨°ÈúÄË¶ÅÂä†ÈîÅÁöÑÊìç‰ΩúÈîÅ‰ΩèÁöÑÊòØ‰∏Ä‰∏™ segment ÔºåËøôÊ†∑Âè™Ë¶Å‰øùËØÅÊØè‰∏™ Segment ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰πüÂ∞±ÂÆûÁé∞‰∫ÜÂÖ®Â±ÄÁöÑÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ Â¶ÇÂõæÊâÄÁ§∫ÔºåÊòØÁî± Segment Êï∞ÁªÑ„ÄÅHashEntry Êï∞ÁªÑÁªÑÊàêÔºåÂíå HashMap ‰∏ÄÊ†∑Ôºå‰ªçÁÑ∂ÊòØÊï∞ÁªÑÂä†ÈìæË°®ÁªÑÊàê„ÄÇ ConcurrentHashMap ÈááÁî®‰∫ÜÂàÜÊÆµÈîÅÊäÄÊúØÔºåÂÖ∂‰∏≠ Segment ÁªßÊâø‰∫é ReentrantLock„ÄÇ‰∏ç‰ºöÂÉè HashTable ÈÇ£Ê†∑‰∏çÁÆ°ÊòØ put ËøòÊòØ get Êìç‰ΩúÈÉΩÈúÄË¶ÅÂÅöÂêåÊ≠•Â§ÑÁêÜÔºåÁêÜËÆ∫‰∏ä ConcurrentHashMap ÊîØÊåÅ CurrencyLevel ( Segment Êï∞ÁªÑÊï∞Èáè)ÁöÑÁ∫øÁ®ãÂπ∂Âèë„ÄÇÊØèÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂç†Áî®ÈîÅËÆøÈóÆ‰∏Ä‰∏™ Segment Êó∂Ôºå‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂÖ∂‰ªñÁöÑ Segment„ÄÇ 1.1 getÊñπÊ≥ï ConcurrentHashMap ÁöÑ get ÊñπÊ≥ïÊòØÈùûÂ∏∏È´òÊïàÁöÑÔºåÂõ†‰∏∫Êï¥‰∏™ËøáÁ®ãÈÉΩ‰∏çÈúÄË¶ÅÂä†ÈîÅ„ÄÇ Âè™ÈúÄË¶ÅÂ∞Ü Key ÈÄöËøá Hash ‰πãÂêéÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÁöÑ Segment ÔºåÂÜçÈÄöËøá‰∏ÄÊ¨° Hash ÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÁöÑÂÖÉÁ¥†‰∏ä„ÄÇÁî±‰∫é HashEntry ‰∏≠ÁöÑ value Â±ûÊÄßÊòØÁî® volatile ÂÖ≥ÈîÆËØç‰øÆÈ•∞ÁöÑÔºå‰øùËØÅ‰∫ÜÂÜÖÂ≠òÂèØËßÅÊÄßÔºåÊâÄ‰ª•ÊØèÊ¨°Ëé∑ÂèñÊó∂ÈÉΩÊòØÊúÄÊñ∞ÂÄº. ÂÜÖÈÉ® HashEntry Á±ª Ôºö 12345678910111213static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; volatile HashEntry&lt;K,V&gt; next; HashEntry(int hash, K key, V value, HashEntry&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125;&#125; 1.2 putÊñπÊ≥ï ËôΩÁÑ∂ HashEntry ‰∏≠ÁöÑ value ÊòØÁî® volatile ÂÖ≥ÈîÆËØç‰øÆÈ•∞ÁöÑÔºå‰ΩÜÊòØÂπ∂‰∏çËÉΩ‰øùËØÅÂπ∂ÂèëÁöÑÂéüÂ≠êÊÄßÔºåÊâÄ‰ª• put Êìç‰ΩúÊó∂‰ªçÁÑ∂ÈúÄË¶ÅÂä†ÈîÅÂ§ÑÁêÜ„ÄÇ È¶ñÂÖà‰πüÊòØÈÄöËøá Key ÁöÑ Hash ÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÁöÑ SegmentÔºåÂú® put ‰πãÂâç‰ºöËøõË°å‰∏ÄÊ¨°Êâ©ÂÆπÊ†°È™å„ÄÇËøôÈáåÊØî HashMap Ë¶ÅÂ•ΩÁöÑ‰∏ÄÁÇπÊòØÔºöHashMap ÊòØÊèíÂÖ•ÂÖÉÁ¥†‰πãÂêéÂÜçÁúãÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÔºåÊúâÂèØËÉΩÊâ©ÂÆπ‰πãÂêéÂêéÁª≠Â∞±Ê≤°ÊúâÊèíÂÖ•Â∞±Êµ™Ë¥π‰∫ÜÊú¨Ê¨°Êâ©ÂÆπ(Êâ©ÂÆπÈùûÂ∏∏Ê∂àËÄóÊÄßËÉΩ)„ÄÇ ËÄå ConcurrentHashMap ‰∏ç‰∏ÄÊ†∑ÔºåÂÆÉÊòØÂú®Â∞ÜÊï∞ÊçÆÊèíÂÖ•‰πãÂâçÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÔºå‰πãÂêéÂÜçÂÅöÊèíÂÖ•Êìç‰Ωú„ÄÇ 1.3 sizeÊñπÊ≥ï ÊØè‰∏™ Segment ÈÉΩÊúâ‰∏Ä‰∏™ volatile ‰øÆÈ•∞ÁöÑÂÖ®Â±ÄÂèòÈáè count ,Ê±ÇÊï¥‰∏™ ConcurrentHashMap ÁöÑ size Êó∂ÂæàÊòéÊòæÂ∞±ÊòØÂ∞ÜÊâÄÊúâÁöÑ count Á¥ØÂä†Âç≥ÂèØ„ÄÇ‰ΩÜÊòØ volatile ‰øÆÈ•∞ÁöÑÂèòÈáèÂç¥‰∏çËÉΩ‰øùËØÅÂ§öÁ∫øÁ®ãÁöÑÂéüÂ≠êÊÄßÔºåÊâÄÊúâÁõ¥Êé•Á¥ØÂä†ÂæàÂÆπÊòìÂá∫Áé∞Âπ∂ÂèëÈóÆÈ¢ò„ÄÇ ‰ΩÜÂ¶ÇÊûúÊØèÊ¨°Ë∞ÉÁî® size ÊñπÊ≥ïÂ∞ÜÂÖ∂‰ΩôÁöÑ‰øÆÊîπÊìç‰ΩúÂä†ÈîÅÊïàÁéá‰πüÂæà‰Ωé„ÄÇÊâÄ‰ª•ÂÅöÊ≥ïÊòØÂÖàÂ∞ùËØï‰∏§Ê¨°Â∞Ü count Á¥ØÂä†ÔºåÂ¶ÇÊûúÂÆπÂô®ÁöÑ count ÂèëÁîü‰∫ÜÂèòÂåñÂÜçÂä†ÈîÅÊù•ÁªüËÆ° size„ÄÇ Âú® JDK7 ‰∏≠ÔºåÁ¨¨‰∏ÄÁßçÊñπÊ°à‰ªñ‰ºö‰ΩøÁî®‰∏çÂä†ÈîÅÁöÑÊ®°ÂºèÂéªÂ∞ùËØïÂ§öÊ¨°ËÆ°ÁÆó ConcurrentHashMap ÁöÑ sizeÔºåÊúÄÂ§ö‰∏âÊ¨°ÔºåÊØîËæÉÂâçÂêé‰∏§Ê¨°ËÆ°ÁÆóÁöÑÁªìÊûúÔºåÁªìÊûú‰∏ÄËá¥Â∞±ËÆ§‰∏∫ÂΩìÂâçÊ≤°ÊúâÂÖÉÁ¥†Âä†ÂÖ•ÔºåËÆ°ÁÆóÁöÑÁªìÊûúÊòØÂáÜÁ°ÆÁöÑ„ÄÇ Á¨¨‰∫åÁßçÊñπÊ°àÊòØÂ¶ÇÊûúÁ¨¨‰∏ÄÁßçÊñπÊ°à‰∏çÁ¨¶ÂêàÔºå‰ªñÂ∞±‰ºöÁªôÊØè‰∏™ Segment Âä†‰∏äÈîÅÔºåÁÑ∂ÂêéËÆ°ÁÆó ConcurrentHashMap ÁöÑ size ËøîÂõû„ÄÇÂÖ∂Ê∫êÁ†ÅÂÆûÁé∞: 12345678910111213141516171819202122232425262728293031323334353637public int size() &#123; final Segment&lt;K,V&gt;[] segments = this.segments; int size; boolean overflow; // true if size overflows 32 bits long sum; // sum of modCounts long last = 0L; // previous sum int retries = -1; // first iteration isn't retry try &#123; for (;;) &#123; if (retries++ == RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) ensureSegment(j).lock(); // force creation &#125; sum = 0L; size = 0; overflow = false; for (int j = 0; j &lt; segments.length; ++j) &#123; Segment&lt;K,V&gt; seg = segmentAt(segments, j); if (seg != null) &#123; sum += seg.modCount; int c = seg.count; if (c &lt; 0 || (size += c) &lt; 0) overflow = true; &#125; &#125; if (sum == last) break; last = sum; &#125; &#125; finally &#123; if (retries &gt; RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) segmentAt(segments, j).unlock(); &#125; &#125; return overflow ? Integer.MAX_VALUE : size;&#125; ÂÖ∂‰∏≠ 12// ÈîÅ‰πãÂâçÈáçËØïÊ¨°Êï∞static final int RETRIES_BEFORE_LOCK = 2; ‰∫å„ÄÅJDK8ÂÆûÁé∞ jdk8 ‰∏≠ÁöÑ ConcurrentHashMap Êï∞ÊçÆÁªìÊûÑÂíåÂÆûÁé∞‰∏é jdk7 ËøòÊòØÊúâÁùÄÊòéÊòæÁöÑÂ∑ÆÂºÇ„ÄÇ ÂÖ∂‰∏≠ÊäõÂºÉ‰∫ÜÂéüÊúâÁöÑ Segment ÂàÜÊÆµÈîÅÔºåËÄåÈááÁî®‰∫Ü CAS + synchronized Êù•‰øùËØÅÂπ∂ÂèëÂÆâÂÖ®ÊÄß„ÄÇ ‰πüÂ∞Ü jdk7 ‰∏≠Â≠òÊîæÊï∞ÊçÆÁöÑ HashEntry Êîπ‰∏∫ NodeÔºå‰ΩÜ‰ΩúÁî®ÈÉΩÊòØÁõ∏ÂêåÁöÑ„ÄÇ ÂÖ∂‰∏≠ÁöÑ val next ÈÉΩÁî®‰∫Ü volatile ‰øÆÈ•∞Ôºå‰øùËØÅ‰∫ÜÂèØËßÅÊÄß„ÄÇ 2.1 putÊñπÊ≥ï ÈáçÁÇπÊù•ÁúãÁúã put ÂáΩÊï∞Ôºö Ê†πÊçÆ key ËÆ°ÁÆóÂá∫ hashcode „ÄÇ Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅËøõË°åÂàùÂßãÂåñ„ÄÇ f Âç≥‰∏∫ÂΩìÂâç key ÂÆö‰ΩçÂá∫ÁöÑ NodeÔºåÂ¶ÇÊûú‰∏∫Á©∫Ë°®Á§∫ÂΩìÂâç‰ΩçÁΩÆÂèØ‰ª•ÂÜôÂÖ•Êï∞ÊçÆÔºåÂà©Áî® CAS Â∞ùËØïÂÜôÂÖ•ÔºåÂ§±Ë¥•ÂàôËá™Êóã‰øùËØÅÊàêÂäü„ÄÇ Â¶ÇÊûúÂΩìÂâç‰ΩçÁΩÆÁöÑ hashcode == MOVED == -1,ÂàôÈúÄË¶ÅËøõË°åÊâ©ÂÆπ„ÄÇ Â¶ÇÊûúÈÉΩ‰∏çÊª°Ë∂≥(‰∏çÈúÄË¶ÅÂàùÂßãÂåñ„ÄÅNode‰∏ç‰∏∫Á©∫„ÄÅ‰∏çÈúÄË¶ÅÊâ©ÂÆπ)ÔºåÂàôÂà©Áî® synchronized ÈîÅÂÜôÂÖ•Êï∞ÊçÆ„ÄÇ Â¶ÇÊûúÊï∞ÈáèÂ§ß‰∫é TREEIFY_THRESHOLD ÂàôË¶ÅËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë„ÄÇ 2.2 getÊñπÊ≥ï Ê†πÊçÆËÆ°ÁÆóÂá∫Êù•ÁöÑ hashcode ÂØªÂùÄÔºåÂ¶ÇÊûúÂ∞±Âú®Ê°∂‰∏äÈÇ£‰πàÁõ¥Êé•ËøîÂõûÂÄº„ÄÇ Â¶ÇÊûúÊòØÁ∫¢ÈªëÊ†ëÈÇ£Â∞±ÊåâÁÖßÊ†ëÁöÑÊñπÂºèËé∑ÂèñÂÄº„ÄÇ ÈÉΩ‰∏çÊª°Ë∂≥ÈÇ£Â∞±ÊåâÁÖßÈìæË°®ÁöÑÊñπÂºèÈÅçÂéÜËé∑ÂèñÂÄº„ÄÇ 2.3 sizeÊñπÊ≥ï JDK8 ÂÆûÁé∞Áõ∏ÊØî JDK7 ÁÆÄÂçïÂæàÂ§öÔºåÂè™Êúâ‰∏ÄÁßçÊñπÊ°àÔºåÊàë‰ª¨Áõ¥Êé•Áúã size() ‰ª£Á†ÅÔºö 123456789101112131415161718192021public int size() &#123; long n = sumCount(); return ((n &lt; 0L) ? 0 : (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE : (int)n); &#125;final long sumCount() &#123; CounterCell[] as = counterCells; CounterCell a; //Ëé∑ÂèñbaseCountÂÄº long sum = baseCount; //ÈÅçÂéÜCounterCellÊï∞ÁªÑÂÖ®ÈÉ®Âä†Âà∞baseCount‰∏äÔºåÂÆÉ‰ª¨ÁöÑÂíåÂ∞±ÊòØsize if (as != null) &#123; for (int i = 0; i &lt; as.length; ++i) &#123; if ((a = as[i]) != null) sum += a.value; &#125; &#125; return sum; &#125; ÂèØËÉΩ‰Ω†‰ºöÊúâÊâÄÁñëÈóÆÔºåConcurrentHashMap ‰∏≠ÁöÑ baseCount Â±ûÊÄß‰∏çÂ∞±ÊòØËÆ∞ÂΩïÁöÑÊâÄÊúâÈîÆÂÄºÂØπÁöÑÊÄªÊï∞ÂêóÔºüÁõ¥Êé•ËøîÂõûÂÆÉ‰∏çÂ∞±Ë°å‰∫ÜÂêóÔºü ‰πãÊâÄ‰ª•Ê≤°ÊúâËøô‰πàÂÅöÔºåÊòØÂõ†‰∏∫Êàë‰ª¨ÁöÑ addCount ÊñπÊ≥ïÁî®‰∫é CAS Êõ¥Êñ∞ baseCountÔºå‰ΩÜÂæàÊúâÂèØËÉΩÂú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÊõ¥Êñ∞Â§±Ë¥•ÔºåÈÇ£‰πàËøô‰∫õËäÇÁÇπËôΩÁÑ∂Â∑≤ÁªèË¢´Ê∑ªÂä†Âà∞ÂìàÂ∏åË°®‰∏≠‰∫ÜÔºå‰ΩÜÊòØÊï∞ÈáèÂç¥Ê≤°ÊúâË¢´ÁªüËÆ°„ÄÇ ËøòÂ•ΩÔºåaddCount ÊñπÊ≥ïÂú®Êõ¥Êñ∞ baseCount Â§±Ë¥•ÁöÑÊó∂ÂÄôÔºå‰ºöË∞ÉÁî® fullAddCount Â∞ÜËøô‰∫õÂ§±Ë¥•ÁöÑÁªìÁÇπÂåÖË£ÖÊàê‰∏Ä‰∏™ CounterCell ÂØπË±°Ôºå‰øùÂ≠òÂú® CounterCell Êï∞ÁªÑ‰∏≠„ÄÇÈÇ£‰πàÊï¥Âº†Ë°®ÂÆûÈôÖÁöÑ size ÂÖ∂ÂÆûÊòØ baseCount Âä†‰∏ä CounterCellÊï∞ÁªÑ‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞„ÄÇ ‰∏â„ÄÅÊÄªÁªì Âπ∂ÂèëÊÉÖÂÜµ‰∏ãËØ∑‰ΩøÁî®concurrentHashMap Âú®jdk7‰∏≠ÔºåÁî®ÁöÑÊòØÂàÜÊÆµÈîÅÔºåÈªòËÆ§ÊòØ12ÊÆµÔºåÈÇ£‰πàÂπ∂ÂèëÈáèÊúÄÂ§ö‰πüÂ∞±12. get‰∏çÂä†ÈîÅÔºåÁ¨¨‰∏ÄÊ¨°hashÂÆö‰ΩçÂà∞segmentÔºåÁ¨¨‰∫åÊ¨°hashÂÆö‰ΩçÂà∞ÂÖÉÁ¥†ÔºåÂÖÉÁ¥†ÂÄºÊòØÁî®volatile‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄß putÈúÄË¶ÅÂä†ÈîÅÔºåhashÂÆö‰ΩçÂà∞segmentÂêéÔºåÂÖàÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÂÜçÊèíÂÖ•„ÄÇ sizeÂÖà‰ΩøÁî®‰∏çÂä†ÈîÅÁöÑÊ®°ÂºèÂéªÂ∞ùËØïÂ§öÊ¨°ËÆ°ÁÆósizeÔºåÊúÄÂ§ö‰∏âÊ¨°ÔºåÊØîËæÉÂâçÂêé‰∏§Ê¨°ËÆ°ÁÆóÁöÑÁªìÊûúÔºåÁªìÊûú‰∏ÄËá¥Â∞±ËÆ§‰∏∫ÂΩìÂâçÊ≤°ÊúâÂÖÉÁ¥†Âä†ÂÖ•ÔºõÂ¶ÇÊûú‰∏ç‰∏ÄËá¥ÔºåÁªôÊØè‰∏™ Segment Âä†‰∏äÈîÅÂÜç‰æùÊ¨°ÂéªËÆ°ÁÆó‰∏™Êï∞ Âú®jdk8‰∏≠ÔºåÈááÁî®‰∫Ü CAS + synchronized Êù•‰øùËØÅÂπ∂ÂèëÂÆâÂÖ®ÊÄß putÁöÑËøáÁ®ãÊØîËæÉÂ§çÊùÇÔºåÁÆÄÂçïÊù•ËØ¥ÊòØÔºöÂÖàËÆ°ÁÆóhashÂÆö‰ΩçÂà∞node‚Äî„ÄãÂà§Êñ≠ÊòØÂê¶ÂàùÂßãÂåñ‚Äî„ÄãÂ¶ÇÊûúnode‰∏∫Á©∫ÂàôË°®Á§∫ÂèØ‰ª•ÊèíÂÖ•ÔºåÁî®casÊèíÂÖ•‚Äî„ÄãÂà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπ‚Äî„ÄãÂ¶ÇÊûú‰∏çÈúÄË¶ÅÂàùÂßãÂåñ„ÄÅNode‰∏ç‰∏∫Á©∫„ÄÅ‰∏çÈúÄË¶ÅÊâ©ÂÆπÔºåÂàôÂà©Áî® synchronized ÈîÅÂÜôÂÖ•Êï∞ÊçÆ‚Äî„ÄãÂà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë getÂ∞±ÊØîËæÉÁÆÄÂçïÔºåÁõ¥Êé•Ê†πÊçÆhashÂÆö‰ΩçÂà∞nodeÔºåÁÑ∂Âêé‰ª•ÈìæË°®ÊàñËÄÖÁ∫¢ÈªëÊ†ëÁöÑÊñπÂºèÊãøÂà∞ sizeÊñπÊ≥ïÂ∞±‰∏ÄÁßçÊñπÊ°àÔºöbaseCount+CounterCell[]‰∏≠ÊâÄÊúâÂÖÉÁ¥† Êï¥ÁêÜËá™Ôºö https://crossoverjie.top/JCSprout/#/thread/ConcurrentHashMap?id=size-ÊñπÊ≥ï https://www.jianshu.com/p/e99e3fcface4]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapÊ≠ªÂæ™ÁéØÈóÆÈ¢ò]]></title>
    <url>%2F2019%2F01%2F21%2Fjava-collection%2F11.HashMap%E6%AD%BB%E5%BE%AA%E7%8E%AF%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[JDK1.7ÊàñËÄÖÊõ¥ËÄÅÁöÑÁâàÊú¨‰∏≠Âú®Â§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ãÊòØ‰ºöÂ≠òÂú®Ê≠ªÂæ™ÁéØÈóÆÈ¢òÔºåÁ©∂ÂÖ∂ÂéüÂõ†ÊòØputËøáÁ®ã‰∏≠ÁöÑresizeÊñπÊ≥ïÂú®Ë∞ÉÁî®transferÊñπÊ≥ïÁöÑÊó∂ÂÄôÂØºËá¥ÁöÑÊ≠ªÈîÅ„ÄÇËøôÊ¨°Êàë‰ª¨Êù•ÁúãÁúãÂà∞Â∫ïÊòØÂì™ÈáåÂá∫‰∫ÜÈóÆÈ¢òÔºÅ Ê†∏ÂøÉÊ∫êÁ†Å Âú®JDK8‰∏≠ÔºåÂÜÖÈÉ®Â∑≤ÁªèË∞ÉÊï¥ÔºåËß£ÂÜ≥‰∫ÜÊ≠ªÂæ™ÁéØÈóÆÈ¢òÔºåÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÁöÑÂë¢ÔºüÂ∞ÜJDK7‰∏≠Â§¥ÊèíÂÖ•Ê≥ïÊîπ‰∏∫Êú´Á´ØÊèíÂÖ•„ÄÇÂ∞±ÊòØËøô‰πàÁÆÄÂçï„ÄÇÂÖ≥‰∫éËøô‰∏™ÔºåÂèØ‰ª•Êü•Áúãjdk8Ê∫êÁ†Å‰∏≠ÁöÑresizeÊñπÊ≥ï„ÄÇ ‰∏äÈù¢ÊèêÂà∞ÊòØÁî±‰∫éputÊó∂Âá∫Áé∞ÈóÆÈ¢òÔºåÈÇ£‰πàÂÖàÊù•Âà∞put()‰∏≠ÁúãÁúãÔºö Êàë‰ª¨ÁúãÂà∞Ôºåput‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÊñ∞ÂÖÉÁ¥†ÔºåÂøÖÁÑ∂Â¢ûÂä†‰∏Ä‰∏™ËäÇÁÇπÔºåÊàë‰ª¨ËøõÂÖ•Ëøô‰∏™Â¢ûÂä†ËäÇÁÇπÁöÑÊñπÊ≥ïÔºö Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÔºåÈúÄË¶ÅÁöÑËØùÂ∞±resize: ‰∏ãÈù¢Â∞±ÊòØÂØπÈìæË°®Êï∞ÊçÆËøõË°åËøÅÁßªÔºö Ê†∏ÂøÉÁöÑ‰ª£Á†ÅÂ∞±ÊòØËøô‰πàÂ§öÔºåÈ¶ñÂÖàË¶ÅÂº∫Ë∞É‰∏Ä‰∏ãÔºö‰∏§‰∏™Á∫øÁ®ãËøõÊù•ÔºåÊòØÂàÜÂà´Âª∫Á´ã‰∫Ü‰∏§‰∏™Áã¨Á´ãÁöÑÊâ©ÂÆπÂêéÁöÑÊï∞ÁªÑÔºåÊØîÂ¶ÇËøôÈáåÊòØ‰∏§‰∏™ÈïøÂ∫¶‰∏∫4ÁöÑÊï∞ÁªÑ„ÄÇËÄÅÁöÑÊï∞ÁªÑ‰∏∫2‰∏™Êï∞Â∞±ÊòØÂîØ‰∏ÄÁöÑ„ÄÇÊâÄ‰ª•Âú®Á¨¨‰∏ÄÊ≠•ÔºåÁ∫øÁ®ã2ËøêË°åÁªìÊùüÊó∂ÔºåËÄÅÁöÑÊï∞ÁªÑÂÖÉÁ¥†Â∑≤ÁªèÁ©∫‰∫Ü„ÄÇ ‰∏ãÈù¢ÂÖàÊºîÁ§∫‰∏Ä‰∏ãÊ≠£Â∏∏ÁöÑrehashËøáÁ®ã„ÄÇ Ê≠£Â∏∏ÊÉÖÂÜµ ÂÅáËÆæ‰∫ÜÊàë‰ª¨ÁöÑhashÁÆóÊ≥ïÂ∞±ÊòØÁÆÄÂçïÁöÑÁî® key mod ‰∏Ä‰∏ãÊï∞ÁªÑ(hashË°®)ÁöÑÂ§ßÂ∞è ÊúÄ‰∏äÈù¢ÁöÑÊòØold hash Ë°®ÔºåÂÖ∂‰∏≠ÁöÑHashË°®ÁöÑsize=2, ÊâÄ‰ª•key = 3, 7, 5ÔºåÂú®mod 2‰ª•ÂêéÈÉΩÂÜ≤Á™ÅÂú®table[1]ËøôÈáå‰∫Ü„ÄÇ Êé•‰∏ãÊù•ÁöÑ‰∏â‰∏™Ê≠•È™§ÊòØHashË°® resize Êàê4ÔºåÁÑ∂ÂêéÊâÄÊúâÁöÑ &lt;key,value&gt; ÈáçÊñ∞ rehash ÁöÑËøáÁ®ã Ê≥®ÊÑèÂà∞ÔºåÂú®JDK7‰∏≠ÔºåÊòØÊåâÁÖßÂ§¥ÊèíÂÖ•Ê≥ï‰æùÊ¨°ÊèíÂÖ•ÁöÑ„ÄÇÊâÄ‰ª•7ÊèíÂà∞‰∫Ü3ÂâçÈù¢„ÄÇ Âπ∂ÂèëÊÉÖÂÜµ 1.ÂàùÂßãÊÉÖÂÜµ ÂÅáËÆæÊàë‰ª¨Êúâ‰∏§‰∏™Á∫øÁ®ã„ÄÇÊàëÁî®Á∫¢Ëâ≤ÂíåÊµÖËìùËâ≤Ê†áÊ≥®‰∫Ü‰∏Ä‰∏ã„ÄÇ ÂØπ‰∫éÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÂÖàÊâßË°åÂÆåËøô‰∏ÄË°åÔºåÁÑ∂ÂêéÊåÇËµ∑ÔºåÊ≠§Êó∂ e Âíå next ÈÉΩÈôÑÂ•ΩÂÄº‰∫ÜÔºö ËÄåËÆ©Á∫øÁ®ã‰∫åÊâßË°åÂÆåÊàê„ÄÇ‰∫éÊòØÊàë‰ª¨Êúâ‰∏ãÈù¢ÁöÑËøô‰∏™Ê†∑Â≠êÔºö Âõ†‰∏∫Thread1ÁöÑ e ÊåáÂêë‰∫Ü key(3) ÔºåËÄå next ÊåáÂêë‰∫Ü key(7) ÔºåÂÖ∂Âú® Thread2 rehashÂêéÔºåÊåáÂêë‰∫Ü Thread2 ÈáçÁªÑÂêéÁöÑÈìæË°®„ÄÇ 2.Thread1Ë¢´Ë∞ÉÂ∫¶ÂõûÊù•ÊâßË°å ÂÖàÊòØÊâßË°å newTalbe[i] = e ÔºöÊ≠§Êó∂Á∫øÁ®ã1ÁöÑÁ¨¨‰∏â‰∏™‰ΩçÁΩÆÂ∞±ÊòØÊåáÂêëÂÖÉÁ¥†3; ÁÑ∂ÂêéÊòØ e = nextÔºåÂØºËá¥‰∫Ü e ÊåáÂêë‰∫Ü key(7) ; ËÄå‰∏ã‰∏ÄÊ¨°Âæ™ÁéØÁöÑ next = e.next ÂØºËá¥‰∫Ü next ÊåáÂêë‰∫Ü key(3) ; 3.‰∏ÄÂàáÂÆâÂ•Ω Á∫øÁ®ã‰∏ÄÊé•ÁùÄÂ∑•‰Ωú„ÄÇÊää key(7) Êëò‰∏ãÊù•ÔºåÊîæÂà∞ newTable[i] ÁöÑÁ¨¨‰∏Ä‰∏™ÔºåÁÑ∂ÂêéÊää e Âíå next ÂæÄ‰∏ãÁßª„ÄÇ 4.ÁéØÂΩ¢ÈìæÊé•Âá∫Áé∞ e.next = newTable[i] ÂØºËá¥ key(3).next ÊåáÂêë‰∫Ü key(7) Ê≥®ÊÑèÔºöÊ≠§Êó∂ÁöÑ key(7).next Â∑≤ÁªèÊåáÂêë‰∫Ü key(3)Ôºå ÁéØÂΩ¢ÈìæË°®Â∞±ËøôÊ†∑Âá∫Áé∞‰∫Ü„ÄÇ Ëá™Â∑±ÁöÑÁÆÄÂçïÊï¥ÁêÜ ËøôÈáåËøòÊòØÊØîËæÉÁªïÁöÑÔºåÁêÜËß£ÁöÑÊúÄÂ•ΩÊñπÂºèÂ∑¶ËæπÊîæÊ∫êÁ†ÅÔºåÂè≥ËæπÊîæÂõæÔºå‰∏≠Èó¥Áî®ËçâÁ®øÁ∫∏Áîª‰∏ÄÁîª„ÄÇ ÈÇ£‰πàÔºåËøôÈáåÊàëÂú®ÂØπÂÖ∂ËøáÁ®ãÂ∞ΩÂèØËÉΩÂú∞ËÆ≤ÊòéÁôΩ‰∏ÄÁÇπ„ÄÇÊàë‰ª¨ÂÖàÁ°ÆÂÆö7Âíå3‰ºöÂÖ®ÈÉ®ËêΩÂà∞Êâ©ÂÆπÂêéÁöÑ‰∏ãÊ†á‰∏∫3ÁöÑ‰ΩçÁΩÆ(3%4=3,7%4=3)„ÄÇ ËßÑÂÆöÁ∫øÁ®ã1ÂºÄËæüÁöÑÊï∞ÁªÑ‰∏∫ arr1 ÔºåÁ∫øÁ®ã2ÂºÄËæüÁöÑÊï∞ÁªÑ‰∏∫ arr2; 1. ÂàùÂßãÁä∂ÊÄÅ Á∫øÁ®ã‰∏ÄÔºö e -&gt; key3 , next -&gt; key7 Á∫øÁ®ã‰∫åÔºö Êï∞ÁªÑ3Âè∑‰ΩçÁΩÆ arr2[3] -&gt; key7 -&gt; key3 Ê≥®ÊÑèÊ≠§Êó∂ key7 ÊåáÂêë key3 . Êàë‰ª¨Ë¶ÅÊòéÁ°Æ‰∏Ä‰∏ãÔºåÂèëÁîüÊ≠ªÂæ™ÁéØÔºåÊòØÊåáÂú®putÊìç‰ΩúÂÆåÊØï‰πãÂêéÔºåÊúÄÁªàÁîüÊàêÁöÑÊï∞ÁªÑ‰∏≠ÊúâÊ≠ªÂæ™ÁéØÂºïÁî®ÊâçË°åÔºåÂçÉ‰∏á‰∏çË¶Å‰∏ÄÂºÄÂßãÁúãÁ∫øÁ®ã‰∏ÄÁßçkey3ÊåáÂêëkey7ÔºåÁÑ∂ÂêéÁ∫øÁ®ã‰∫åÁßçkey7ÊåáÂêëkey3Â∞±ÊòØÊ≠ªÂæ™ÁéØ‰∫Ü„ÄÇ„ÄÇ„ÄÇ 2. Á∫øÁ®ã‰∏ÄÁªßÁª≠ÊâßË°å i = 3 e.next = key7,Ê≠§Êó∂ e=key3 ,ÊâÄ‰ª•ÊòØ key3.next = key7ÔºàËøôÊòØÁ∫øÁ®ã1ÁöÑÂàùÂßãÁä∂ÊÄÅÂÜ≥ÂÆöÁöÑÔºâ arr1[3] ÊåáÂêë key3 e ‰∏∫ key7 3.Áî±‰∫ée‰∏ç‰∏∫Á©∫ÔºåÊâÄ‰ª•Ëøò‰ºöÂæ™ÁéØÔºö ‰∏ä‰∏ÄÊ≠• e ‰∏∫ key7ÔºåÊâÄ‰ª• next = key7.next ÔºåÂà∞Á∫øÁ®ã2‰∏≠‰∏ÄÁúãÊòØ key3 ÔºåÊâÄ‰ª• next = key3ÔºàÁ∫øÁ®ã2‰∏≠key7.nextÂ∞±ÊòØkey3Ôºâ i = 3 e.next = key3------Ê≥®ÊÑèÔºåËøôÈáåÂ∞±ÊòØKey7ÊåáÂêë‰∫Ükey3,key7ÁöÑnextÂºïÁî®‰∏ãÈù¢Ê≤°ÊúâÂèòËøáÔºåÊâÄ‰ª•ËøôÈáåÂÅö‰∏Ä‰∏ãËÆ∞ÂΩïÔºåÂç≥key7ÊåáÂêëkey3 newTable[3] = key7 e = key3 4.Áî±‰∫ée‰∏ç‰∏∫Á©∫ÔºåÊâÄ‰ª•Ëøò‰ºöÂæ™ÁéØÔºö ‰∏ä‰∏ÄÊ≠• e=key3 , next=null i=3 key3.next = key7ÔºåÊ≥®ÊÑè,Áî±‰∫ékey7Â∑≤ÁªèÊåáÂêë‰∫Ükey3ÔºåÊ≠§Êó∂key3ÂèàÊåáÂêëkey7,ÂèëÁîüÊ≠ªÂæ™ÁéØ newTable[3] = key3 e = null 5.e‰∏∫nullÔºåË∑≥Âá∫Âæ™ÁéØ„ÄÇ Ê≠§Êó∂ÂèëÁé∞key3ÂèàÊåáÂêë‰∫Ükey7„ÄÇÂèëÁîüÊ≠ªÂæ™ÁéØ„ÄÇ Êï¥ÁêÜËá™:https://coolshell.cn/articles/9606.html/comment-page-2#comments]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxÈáçË¶ÅÁöÑ‰∏Ä‰∫õÂëΩ‰ª§]]></title>
    <url>%2F2019%2F01%2F21%2Flinux%E9%87%8D%E8%A6%81%E7%9A%84%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[ÂæàÂ§öÂëΩ‰ª§‰πãÊâÄ‰ª•ÈáçË¶ÅÔºåÊòØÂõ†‰∏∫Áî®ÂÆÉ‰ª¨‰ºöÂ§ßÂπÖÊèêÈ´òÂ∑•‰ΩúÊïàÁéá„ÄÇÊâÄ‰ª•ÔºåÁÜüÊÇâÂÆÉ‰ª¨ÊòØÊàë‰ª¨ÂøÖÈ°ªË¶ÅÂÅöÁöÑ‰∏Ä‰ª∂‰∫ãÊÉÖ„ÄÇ‰∏ãÈù¢ÁùÄÈáçÊèêÂèñ‰∫Üfind„ÄÅgrep„ÄÅÁÆ°ÈÅì„ÄÅwc„ÄÅawk‰ª•ÂèäsedÁ≠âÂá†‰∏™ÂëΩ‰ª§Êù•ÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî®„ÄÇ ‰∏Ä„ÄÅLinux‰ΩìÁ≥ªÁªìÊûÑ ÂØπËøôÂπÖÂõæËøõË°åËØ¶ÁªÜËØ¥Êòé‰∏Ä‰∏ã„ÄÇ ‰ΩìÁ≥ªÁªìÊûÑ‰∏ªË¶ÅÂàÜ‰∏∫Áî®Êà∑ÊÄÅ(Áî®Êà∑‰∏äÂ±ÇÊ¥ªÂä®)ÂíåÂÜÖÊ†∏ÊÄÅ ÂÜÖÊ†∏ÔºöÊú¨Ë¥®ÊòØ‰∏ÄÊÆµÁÆ°ÁêÜËÆ°ÁÆóÊú∫Á°¨‰ª∂ËÆæÂ§áÁöÑÁ®ãÂ∫èÔºåËøô‰∏™Á®ãÂ∫èÁõ¥Êé•ÁÆ°ÁêÜÁ°¨‰ª∂ÔºöÂåÖÊã¨CPU„ÄÅÂÜÖÂ≠òÁ©∫Èó¥„ÄÅÁ°¨ÁõòÊé•Âè£„ÄÅÁΩëÁªúÊé•Âè£Á≠â„ÄÇÊâÄÊúâÁöÑËÆ°ÁÆóÊú∫Êìç‰ΩúÈÉΩË¶ÅÈÄöËøáÂÜÖÊ†∏Êù•Êìç‰Ωú„ÄÇ Á≥ªÁªüË∞ÉÁî®ÔºöÂÜÖÊ†∏ÁöÑËÆøÈóÆÊé•Âè£ÔºåÊòØ‰∏ÄÁßç‰∏çËÉΩÂÜçÁÆÄÂåñÁöÑÊìç‰Ωú(ÂèØ‰ª•ËÆ§‰∏∫Á≥ªÁªüË∞ÉÁî®Â∑≤ÁªèÊòØÊúÄÂ∞èÁöÑÂéüÂ≠êÊìç‰ΩúÔºå‰∏äÂ±ÇÂÆåÊàê‰∏Ä‰∏™ÂäüËÉΩË¶Å‰æùÊâò‰∫éËã•Âπ≤Á≥ªÁªüË∞ÉÁî®ÊâçËÉΩÂÆåÊàê) Áî±‰∫éÁ≥ªÁªüË∞ÉÁî®ÊØîËæÉÂü∫Á°ÄÔºåË¶ÅÂÆåÊàê‰∏Ä‰∏™ÂäüËÉΩÈúÄË¶ÅÂæàÂ§öÁ≥ªÁªüË∞ÉÁî®ÁªÑÂêàÊâçËÉΩÂÆûÁé∞ÔºåÂØπ‰∫éÁ®ãÂ∫èÂëòÊù•ËØ¥ÊØîËæÉÂ§çÊùÇ„ÄÇËøô‰∏™Êó∂ÂÄôÊÄé‰πàÂäûÂë¢ÔºüÊàë‰ª¨ÂèØ‰ª•Ë∞ÉÁî®ÂÖ¨ÂÖ±ÂáΩÊï∞Â∫ìÔºöÁ≥ªÁªüË∞ÉÁî®ÁöÑÁªÑÂêàÊã≥„ÄÇÁÆÄÂåñÁ®ãÂ∫èÂëòÊìç‰Ωú„ÄÇ Shell‰πüÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÊòØ‰∏Ä‰∏™ÂëΩ‰ª§Ëß£ÈáäÂô®ÔºåÂèØ‰ª•ÁºñÁ®ã„ÄÇ Shell‰∏ãÈÄöÁ≥ªÁªüË∞ÉÁî®Ôºå‰∏äÈÄöÂêÑÁßçÂ∫îÁî®ÔºåÊòØ‰∏äÂ±ÇÂíå‰∏ãÂ±Ç‰πãÈó¥Á≤òÂêàÁöÑËÉ∂Ê∞¥ÔºåËÆ©‰∏çÂêåÁ®ãÂ∫èÂèØ‰ª•ÂÅïÂêåÂ∑•‰Ωú„ÄÇ Âú®Ê≤°ÊúâÂõæÂΩ¢ÁïåÈù¢‰πãÂâçÔºåÁî®Êà∑ÈÄöËøáshellÂëΩ‰ª§Ë°åÊàñËÄÖÂèØÁºñÁ®ãÁöÑshellËÑöÊú¨ÂèØ‰ª•ÂÆåÊàêÂæàÂ§ö‰∫ãÊÉÖ„ÄÇ ‰∫å„ÄÅÂ¶Ç‰ΩïÊ†πÊçÆÊñá‰ª∂ÂêçÊ£ÄÁ¥¢Êñá‰ª∂ find Âú®ÊåáÂÆöÁõÆÂΩï‰∏ãÊü•ÊâæÊñá‰ª∂ ËØ≠Ê≥ï find path [options] params 2.1 Á≤æÁ°ÆÊü•ÊâæÊñá‰ª∂ ÊØîÂ¶ÇÊàëÂú®ÂΩìÂâçÁõÆÂΩï(ÂèØËÉΩÂú®Â≠êÁõÆÂΩï‰∏ã)‰∏ãÊâæ‰∏Ä‰∏™Êñá‰ª∂Âè´ÂÅötest.javaÔºö 1find -name "test.java" Ëøô‰∏™Êåá‰ª§Â∞±ÂèØ‰ª•Âú®Êú¨ÁõÆÂΩï‰ª•ÂèäÂ≠êÁõÆÂΩï‰∏ãÈÄíÂΩíÊü•ÊâæËøô‰∏™Êñá‰ª∂‰∫Ü„ÄÇ ÂÆû‰æãÔºöÁ≤æÁ°ÆÊü•ËØ¢ÂêçÂ≠óÂè´snailmall-api-gateway-8080.jarËøô‰∏™Êñá‰ª∂Ôºö 2.2 ÂÖ®Â±ÄÊêúÁ¥¢ Â¶ÇÊûúÊòØÂÖ®Â±ÄÊü•ÊâæÔºå‰πüÂæàÁÆÄÂçïÔºåÊó†ÈùûÊòØ‰ªéÊ†πÁõÆÂΩïÂºÄÂßãÈÄíÂΩíÊü•Êâæ„ÄÇ 1find / -name "test.java" ÂÆû‰æãÔºöÊàëÂØπËøôÂè∞ÊúçÂä°Âô®ÂÖ®Â±ÄÊü•ÊâæÊñá‰ª∂Âêç‰ª•snailmallÂºÄÂ§¥ÁöÑÊâÄÊúâÊñá‰ª∂Ôºö 2.3 Ê®°Á≥äÊü•ËØ¢ Â¶ÇÊûúÊâæ‰ª•testÊâìÂ§¥ÁöÑÊñá‰ª∂Ôºö 1find -name "test*" Âç≥Áî® * ÈÄöÈÖçÁ¨¶Â∞±ÂèØ‰ª•Ê®°Á≥äÊü•ËØ¢Âà∞‰ª• test ÊâìÂ§¥ÁöÑÊñá‰ª∂„ÄÇ ÂÆû‰æãÔºåÊàëÁöÑËøôÂè∞ÊúçÂä°Âô®‰∏äÈÉ®ÁΩ≤‰∫ÜÂá†‰∏™ÂÖ≥‰∫éÂïÜÂüéÁöÑÊúçÂä°ÔºåËøô‰∏™ÁõÆÂΩï‰∏ãÊàëÊîæ‰∫ÜjarÂåÖÂíåÁõ∏Â∫îÁöÑÂêØÂä®‰ø°ÊÅØÊñá‰ª∂„ÄÇÊàëÂØπÂÖ∂ËøõË°åÊ®°Á≥äÊü•ËØ¢Ôºö 2.4 ÂøΩÁï•Â§ßÂ∞èÂÜô 1find -iname "test*" ‰∏â„ÄÅÂ¶Ç‰ΩïÊ†πÊçÆÊñá‰ª∂ÂÜÖÁöÑÂÜÖÂÆπËøõË°åÊ£ÄÁ¥¢ 3.1 grepÂëΩ‰ª§ grep Êü•ÊâæÊñá‰ª∂ÈáåÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂ≠óÁ¨¶‰∏≤ ËØ≠Ê≥ïÔºögrep [options] pattern file ÊØîÂ¶Ç test.java ‰∏≠Êúâ‰∏ÄÂè•ËØùÊòØÔºö 1System.out.println("i love java"); ÈÇ£‰πàÂ¶Ç‰ΩïÊü•Êâæ test.java ‰∏≠ÁöÑ java Âë¢Ôºü 1grep "java" test* ËøôÂè•ËØùÊÑèÊÄùÂ∞±ÊòØÊü•Êâæ‰ª• test ÊâìÂ§¥ÁöÑÊñá‰ª∂‰∏≠ÁöÑÂåÖÂê´ java Â≠óÁ¨¶‰∏≤ÊâÄÂú®ÁöÑË°å„ÄÇ Áõ¥Êé•ËæìÂÖ•Ôºö 1grep "hello" ‰ºöÁ≠âÂæÖÁî®Êà∑ËæìÂÖ•ÊñáÊú¨„ÄÇÁÑ∂ÂêéÂÜçÂØπËæìÂÖ•ÁöÑÂÜÖÂÆπËøõË°åÊ£ÄÁ¥¢„ÄÇ 3.2 ÁÆ°ÈÅìÊìç‰ΩúÁ¨¶ | ÂèØÂ∞ÜÊåá‰ª§ËøûÊé•Ëµ∑Êù•ÔºåÂâç‰∏Ä‰∏™Êåá‰ª§ÁöÑËæìÂá∫‰Ωú‰∏∫Âêé‰∏Ä‰∏™Êåá‰ª§ÁöÑËæìÂÖ•„ÄÇ 1find / | grep "test" ‰ΩúÁî®ÂêåÔºö 1find / -name "test" Ê≥®ÊÑèÔºö Âè™ÊúâÂâç‰∏Ä‰∏™Êåá‰ª§Ê≠£Á°ÆÊâç‰ºöÂÜçÂ§ÑÁêÜ„ÄÇ ÁÆ°ÈÅìÂè≥ËæπÂëΩ‰ª§ÂøÖÈ°ªËÉΩÊé•Êî∂Ê†áÂáÜËæìÂÖ•ÊµÅÔºåÂê¶Âàô‰º†ÈÄíËøáÁ®ã‰∏≠Êï∞ÊçÆ‰ºöË¢´ÊäõÂºÉ 3.3 grepÁªìÂêàÁÆ°ÈÅì 1grep 'xxx' hello.info ÂèØ‰ª•Â∞Ü xxx ÊâÄÂú®ÁöÑË°åÂÖ®ÈÉ®Á≠õÈÄâÂá∫Êù•Ôºå‰ΩÜÊòØËøòÊòØÁâπÂà´Â§öÔºåÊàëÊØîÂ¶ÇÂÖ≥ÂøÉËøôÊØè‰∏ÄË°å‰∏≠Êüê‰∏™Â≠óÊÆµÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇÊòØ param[xx12]ËøôÁßç‰ø°ÊÅØ„ÄÇÂ¶Ç‰ΩïÂÆûÁé∞Á≠õÈÄâÂë¢Ôºü 1grep 'xxx' hello.info | grep -o 'param\[[0-9a-z]*\]' ËøôÊ†∑Â∞±Âè™ÊääÁ±ª‰ºº‰∫é param[xx12] ËøôÊ†∑ÁöÑ‰ø°ÊÅØÊ∏ÖÊô∞Âú∞Â±ïÁé∞Âá∫Êù•„ÄÇ Â¶Ç‰ΩïËøáÊª§Êéâ‰∏çË¶ÅÁöÑ‰ø°ÊÅØÂë¢ÔºüÂèØ‰ª•Áî®Ôºö 1grep -v ÊØîÂ¶ÇÊàë‰ª¨Êü•ËØ¢ tomcat ËøõÁ®ã‰ø°ÊÅØÔºö 1ps -ef | grep tomcat Êàë‰ª¨‰ºöÂèëÁé∞Ôºå‰∏ç‰ªÖ tomcat ÁöÑ‰ø°ÊÅØÂ±ïÁé∞Âá∫Êù•‰∫ÜÔºåÊâßË°å grep ÂëΩ‰ª§Êú¨Ë∫´ÁöÑËøõÁ®ã‰ø°ÊÅØ‰πüÂ±ïÁ§∫Âá∫Êù•‰∫Ü„ÄÇÊàë‰ª¨Ë¶ÅÂ∞ÜËøô‰∏™ grep ÂëΩ‰ª§ËøáÊª§ÊéâÔºåÂè™Â±ïÁé∞ tomcat ËøõÁ®ã‰ø°ÊÅØÔºåÂèØ‰ª•Ôºö 1ps -ef | grep tomcat | grep -v "grep" ËøôÊ†∑Â∞±Êää grep ËøõÁ®ã‰ø°ÊÅØËøáÊª§Êéâ‰∫Ü„ÄÇ Âõõ„ÄÅÂ¶Ç‰ΩïÂØπÊñá‰ª∂ÂÜÖÂÆπÂÅöÁªüËÆ° awk ‰∏ÄÊ¨°ËØªÂèñ‰∏ÄË°åÊñáÊú¨ÔºåÊåâËæìÂÖ•ÂàÜÈöîÁ¨¶ËøõË°åÂàáÁâáÔºåÂàáÊàêÂ§ö‰∏™ÁªÑÊàêÈÉ®ÂàÜ Â∞ÜÂàáÁâáÁõ¥Êé•‰øùÂ≠òÂÜçÂÜÖÂª∫ÁöÑÂèòÈáè‰∏≠Ôºå$1$2‚Ä¶($0Ë°®Á§∫Ë°åÁöÑÂÖ®ÈÉ®) ÊîØÊåÅÂØπÂçï‰∏™ÂàáÁâáÁöÑÂà§Êñ≠ÔºåÊîØÊåÅÂæ™ÁéØÂà§Êñ≠ÔºåÈªòËÆ§ÂàÜÈöîÁ¨¶‰∏∫Á©∫Ê†º ËØ≠Ê≥ïÔºöawk [options] ‚Äòcmd‚Äô file ÊúâËøôÊ†∑‰∏Ä‰∏™Êñá‰ª∂text1.txtÔºö 123456789proto Recv-Q Send-Q Local Address Foreign Address statetcp 0 48 111.34.134.2:ssh 124.213.2.12:12565 ESTABLISHEDtcp 0 48 localhost:mysql 124.213.2.12:12565 ESTABLISHEDudp 0 48 111.34.13.2:s0 124.213.2.12:12565 ESTABLISHEDtcp 0 48 localhost:mysql 124.213.2.12:12565 ESTABLISHEDudp 1 48 localhots:webcac 124.213.2.12:12565 ESTABLISHEDtcp 1 48 111.34.134.2:s1 124.213.2.12:12565 ESTABLISHEDudp 1 48 111.34.134.2:s2 124.213.2.12:12565 ESTABLISHEDudp 0 48 111.34.134.2:s3 124.213.2.12:12565 ESTABLISHED ÂàóÂá∫ÂàáÂàÜÂá∫Êù•ÁöÑÁ¨¨‰∏ÄÂàóÂíåÁ¨¨‰∫åÂàóÔºö 1awk '&#123;print $1,$2&#125;' test1.txt ÁªìÊûúÔºö Á≠õÈÄâÂá∫Á¨¨‰∏ÄÂàó‰∏∫tcpÂíåÁ¨¨‰∫åÂàó‰∏∫1ÁöÑÊâÄÂú®Ë°åÔºåÂ∞ÜËøô‰∫õË°åÊï∞ÊçÆÂÖ®ÈÉ®ÊâìÂç∞Âá∫Êù•Ôºö 1awk '$1="tcp" &amp;&amp; $2==1&#123;print $0&#125;' test1.txt ÁªìÊûúÔºö ÊâìÂç∞Â∏¶ÊúâË°®Â§¥ÁöÑÊï∞ÊçÆÔºö 1awk '($1="tcp" &amp;&amp; $2==1) || NR==1 &#123;print $0&#125;' test1.txt ÈªòËÆ§ÊòØ‰ª•Á©∫Ê†ºÂàÜÈöîÔºåÈÇ£‰πà‰ª•ÈÄóÂè∑ÊàñËÄÖÂÖ∂‰ªñÁ¨¶Âè∑ÂèØ‰ª•ÂêóÔºüÁ≠îÊ°àÂΩìÁÑ∂ÊòØÂèØ‰ª•„ÄÇÂØπ‰∫éËøôÊ†∑ÁöÑÊñá‰ª∂text2.txtÔºö 12345adas,123wqe,54412321,dddfsdaasd,1235465547,fjigj 1awk -F "," '&#123;print $2&#125;' text2.txt ‰∫î„ÄÅWCÁªüËÆ° Êúâ‰∏Ä‰∏™Êñá‰ª∂test2.txtÔºåÈáåÈù¢ÁöÑÂÜÖÂÆπÊòØÔºö 123swg123eh shwfshsfswg7 121 32n dswg17328 123swg1 2h1jhwjqbsjwqbsh ddddh wg ehdedhd dhsjh ÂÖ≠„ÄÅsedÂëΩ‰ª§ sedÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊñá‰ª∂Â§ÑÁêÜÂ∑•ÂÖ∑ÔºåÊú¨Ë∫´ÊòØ‰∏Ä‰∏™ÁÆ°ÈÅìÂëΩ‰ª§Ôºå‰∏ªË¶ÅÊòØ‰ª•Ë°å‰∏∫Âçï‰ΩçËøõË°åÂ§ÑÁêÜÔºåÂèØ‰ª•Â∞ÜÊï∞ÊçÆË°åËøõË°åÊõøÊç¢„ÄÅÂà†Èô§„ÄÅÊñ∞Â¢û„ÄÅÈÄâÂèñÁ≠âÁâπÂÆöÂ∑•‰Ωú sed [-n/e/f/r/i] ‚Äòcommand‚Äô ËæìÂÖ•ÊñáÊú¨ Â∏∏Áî®ÈÄâÈ°πÔºö -n‚à∂‰ΩøÁî®ÂÆâÈùô(silent)Ê®°Âºè„ÄÇÂú®‰∏ÄËà¨ sed ÁöÑÁî®Ê≥ï‰∏≠ÔºåÊâÄÊúâÊù•Ëá™ STDINÁöÑËµÑÊñô‰∏ÄËà¨ÈÉΩ‰ºöË¢´ÂàóÂá∫Âà∞Ëê§Âπï‰∏ä„ÄÇ‰ΩÜÂ¶ÇÊûúÂä†‰∏ä -n ÂèÇÊï∞ÂêéÔºåÂàôÂè™ÊúâÁªèËøásed ÁâπÊÆäÂ§ÑÁêÜÁöÑÈÇ£‰∏ÄË°å(ÊàñËÄÖÂä®‰Ωú)Êâç‰ºöË¢´ÂàóÂá∫Êù•„ÄÇ -e‚à∂Áõ¥Êé•Âú®Êåá‰ª§ÂàóÊ®°Âºè‰∏äËøõË°å sed ÁöÑÂä®‰ΩúÁºñËæëÔºõ -f‚à∂Áõ¥Êé•Â∞Ü sed ÁöÑÂä®‰ΩúÂÜôÂú®‰∏Ä‰∏™Ê°£Ê°àÂÜÖÔºå -f filename ÂàôÂèØ‰ª•ÊâßË°å filename ÂÜÖÁöÑsed Âä®‰ΩúÔºõ -r‚à∂sed ÁöÑÂä®‰ΩúÊîØÊè¥ÁöÑÊòØÂª∂‰º∏ÂûãÊ≠£ËßÑË°®Á§∫Ê≥ïÁöÑËØ≠Ê≥ï„ÄÇ(È¢ÑËÆæÊòØÂü∫Á°ÄÊ≠£ËßÑË°®Á§∫Ê≥ïËØ≠Ê≥ï) -i‚à∂Áõ¥Êé•‰øÆÊîπËØªÂèñÁöÑÊ°£Ê°àÂÜÖÂÆπÔºåËÄå‰∏çÊòØÁî±Ëê§ÂπïËæìÂá∫„ÄÇ Â∏∏Áî®ÂëΩ‰ª§Ôºö a ‚à∂Êñ∞Â¢ûÔºå a ÁöÑÂêéÈù¢ÂèØ‰ª•Êé•Â≠ó‰∏≤ÔºåËÄåËøô‰∫õÂ≠ó‰∏≤‰ºöÂú®Êñ∞ÁöÑ‰∏ÄË°åÂá∫Áé∞(ÁõÆÂâçÁöÑ‰∏ã‰∏ÄË°å)ÔΩû c ‚à∂Âèñ‰ª£Ôºå c ÁöÑÂêéÈù¢ÂèØ‰ª•Êé•Â≠ó‰∏≤ÔºåËøô‰∫õÂ≠ó‰∏≤ÂèØ‰ª•Âèñ‰ª£ n1,n2 ‰πãÈó¥ÁöÑË°åÔºÅ d ‚à∂Âà†Èô§ÔºåÂõ†‰∏∫ÊòØÂà†Èô§ÂïäÔºåÊâÄ‰ª• d ÂêéÈù¢ÈÄöÂ∏∏‰∏çÊé•‰ªª‰ΩïÂíöÂíöÔºõ i ‚à∂ÊèíÂÖ•Ôºå i ÁöÑÂêéÈù¢ÂèØ‰ª•Êé•Â≠ó‰∏≤ÔºåËÄåËøô‰∫õÂ≠ó‰∏≤‰ºöÂú®Êñ∞ÁöÑ‰∏ÄË°åÂá∫Áé∞(ÁõÆÂâçÁöÑ‰∏ä‰∏ÄË°å)Ôºõ p ‚à∂ÂàóÂç∞Ôºå‰∫¶Âç≥Â∞ÜÊüê‰∏™ÈÄâÊã©ÁöÑËµÑÊñôÂç∞Âá∫„ÄÇÈÄöÂ∏∏ p ‰ºö‰∏éÂèÇÊï∞ sed -n ‰∏ÄËµ∑Ëøê‰ΩúÔΩû s ‚à∂Âèñ‰ª£ÔºåÂèØ‰ª•Áõ¥Êé•ËøõË°åÂèñ‰ª£ÁöÑÂ∑•‰ΩúÂì©ÔºÅÈÄöÂ∏∏Ëøô‰∏™ s ÁöÑÂä®‰ΩúÂèØ‰ª•Êê≠ÈÖçÊ≠£ËßÑË°®Á§∫Ê≥ïÔºÅ‰æãÂ¶Ç 1,20s/old/new/g Â∞±ÊòØÂï¶ÔºÅ ËøôÈáåÊàëÂ∞±‰∏ªË¶ÅÁúã‰∏Ä‰∏ãÊâπÈáèÊõøÊç¢Ëøô‰∏™ÂäüËÉΩ„ÄÇ Â¶ÇÊûúÂè™ÊòØÁªô‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÁöÑËã•Âπ≤Â≠óÁ¨¶‰∏≤ÊâπÈáèÊõøÊç¢ÔºåÂè™ÈúÄË¶ÅÔºö 1sed -i "s/oldstring/newstring/g" filename Â¶ÇÊûúÊòØÂØπÊüê‰∏ÄË∑ØÂæÑ‰∏ãÂæàÂ§öÁöÑÊñá‰ª∂ÊâπÈáèÊõøÊç¢Ôºö 1sed -i &quot;s/oldstring/newstring/g&quot; `grep oldstring -rl path` ÂÖ∂‰∏≠ÔºåoldstringÊòØÂæÖË¢´ÊõøÊç¢ÁöÑÂ≠óÁ¨¶‰∏≤ÔºånewstringÊòØÂæÖÊõøÊç¢oldstringÁöÑÊñ∞Â≠óÁ¨¶‰∏≤ÔºågrepÊìç‰Ωú‰∏ªË¶ÅÊòØÊåâÁÖßÊâÄÁªôÁöÑË∑ØÂæÑÊü•ÊâæoldstringÔºåpathÊòØÊâÄÊõøÊç¢Êñá‰ª∂ÁöÑË∑ØÂæÑÔºõ -iÈÄâÈ°πÊòØÁõ¥Êé•Âú®Êñá‰ª∂‰∏≠ÊõøÊç¢Ôºå‰∏çÂú®ÁªàÁ´ØËæìÂá∫Ôºõ -rÈÄâÈ°πÊòØÊâÄÁªôÁöÑpath‰∏≠ÁöÑÁõÆÂΩïÈÄíÂΩíÊü•ÊâæÔºõ -lÈÄâÈ°πÊòØËæìÂá∫ÊâÄÊúâÂåπÈÖçÂà∞oldstringÁöÑÊñá‰ª∂Ôºõ ËøôÈáåÂè™ÊòØÊ®°Êãü‰∏Ä‰∏ãÔºåÂ∞ÜÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂ËøõË°åÊâπÈáè‰øÆÊîπÔºö]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Á´ôÁÇπÊñáÁ´†Ê±áÊÄª]]></title>
    <url>%2F2019%2F01%2F21%2F%E7%AB%99%E7%82%B9%E6%96%87%E7%AB%A0%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[‚òùÔ∏è‚òùÔ∏è‚òùÔ∏èüîùüîùüîùÊú¨Êñá‰∏∫ÁΩÆÈ°∂ÊñáÁ´†Ôºå‰∏∫‰∫ÜÊñπ‰æøÁÆ°ÁêÜÂíåÊü•ÈòÖÔºåÂú®ËøôÈáåËØ¶ÁªÜÂ±ïÁ§∫ÁõÆÂΩïÁ¥¢ÂºïÔºåÁúãÂÆåÁ¥¢ÂºïÔºå‰Ω†Â∞±Áü•ÈÅìÊú¨Á´ôÁöÑÂ§ß‰ΩìÂÜÖÂÆπÂï¶ÔºÅÊàëÁõ∏‰ø°‰∏ÄÂÆö‰ºöÁªôÂ∞è‰ºô‰º¥‰ª¨‰∏Ä‰∫õÊî∂Ëé∑ÔºÅ ËÆ°ÁÆóÊú∫ÁΩëÁªúüê≠üê≠üê≠ Ëøô‰∏ÄÈÉ®ÂàÜ‰∏ªË¶ÅÊòØÂÖ≥‰∫éHTTPÂíåTCPÁöÑÂøÖÂ§áÁü•ËØÜ„ÄÇ „ÄäËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥Á≥ªÂàó„ÄãÔºö „Ää‰ªé‰∏ãÂà∞‰∏äÁúã‰∫îÂ±ÇÊ®°Âûã„Äã „Ää‰ªé‰∏äÂà∞‰∏ãÁúã‰∫îÂ±ÇÊ®°Âûã„Äã „ÄäHTTPÁöÑÂâç‰∏ñ‰ªäÁîü„Äã „ÄäTCPÂçèËÆÆÂÖ•Èó®„Äã „ÄäTCP‰∏âÊ¨°Êè°ÊâãÂíåÂõõÊ¨°Êå•Êâã„Äã „ÄäHTTPÂü∫Á°ÄÁü•ËØÜÊèêÁÇº„Äã „Ää‰∏ÄÊ≠•‰∏ÄÊ≠•ÁêÜËß£HTTPS„Äã „Ää‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÈù¢ËØïÈ¢ò„Äã JAVAÂÆπÂô®üê±üê±üê± Ëøô‰∏ÄÈÉ®ÂàÜÊòØJAVAÂÆπÂô®‰∏ÄÁ≥ªÂàóÊñáÁ´†Ôºå‰∏ªË¶ÅËÆ≤‰∫ÜÂ∏∏Áî®JAVAÂÆπÂô®ÁöÑÊ∫êÁ†ÅÂíå‰∏Ä‰∫õÁâπÊÄßÔºåÈù¢ËØïÂøÖÈóÆÁÇπ„ÄÇ „ÄäJAVAÂÆπÂô®„ÄãÔºö „ÄäArrayList/Vector„Äã „ÄäLinkedList„Äã „ÄäCopyOnWriteArrayList„Äã „ÄäHashCode/Equals„Äã „ÄäHashMap„Äã „ÄäHashSet„Äã „ÄäLinkedHashMap„Äã „ÄäHashMapÂíåLinkedHashMapÈÅçÂéÜÊú∫Âà∂„Äã „ÄäHashTable„Äã „ÄäLinkedHashSet„Äã „ÄäJDK7‰∏≠HashMapÊ≠ªÂæ™ÁéØÂéüÂõ†ÂâñÊûê„Äã „ÄäConcurrentHashMap„Äã Linux&amp;Êìç‰ΩúÁ≥ªÁªüüê∂üê∂üê∂ ‰∏Ä‰∫õÂøÖÂ§áÁöÑLiunxÁõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÊï¥ÁêÜ„ÄÇ „ÄäLinux„ÄãÔºö „ÄäLinuxÈù¢ËØïÈáçË¶ÅÂëΩ‰ª§„Äã „ÄäÊìç‰ΩúÁ≥ªÁªüÁõ∏ÂÖ≥„ÄãÔºö „ÄäÈù¢ËØï-ËøõÁ®ã‰∏éÁ∫øÁ®ã„Äã JAVAËôöÊãüÊú∫Áõ∏ÂÖ≥üêπüêπüêπ ‰∏ªË¶ÅÊòØ‰ªãÁªçJVMÁõ∏ÂÖ≥Áü•ËØÜ„ÄÇËΩªÊùæ‰ª•Â∫î‰ªòÈù¢ËØï„ÄÇ „ÄäJVM„ÄãÔºö „ÄäJavaÂ¶Ç‰ΩïÊâßË°å‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁ®ãÂ∫è„Äã „ÄäÊµÖË∞àClassLoader„Äã „ÄäÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã„Äã „ÄäÁªÜË∞àloadClass„Äã JAVAÊ†∏ÂøÉÂü∫Á°ÄÁü•ËØÜüê∫üê∫üê∫ ‰∏ªË¶ÅÊòØ‰ªãÁªçÊØîËæÉÊ†∏ÂøÉÁöÑJAVAÂü∫Á°ÄÁü•ËØÜÔºåÂ±û‰∫éJAVAÂü∫Á°ÄËøõÈò∂„ÄÇ „ÄäIntegerÊãÜÁÆ±ÂíåË£ÖÁÆ±„Äã „ÄäString‰∏∫‰ªÄ‰πà‰∏çÂèØÂèò„Äã „ÄäjavaÂ≠óÁ¨¶‰∏≤Ê†∏ÂøÉ‰∏ÄÁΩëÊâìÂ∞Ω„Äã „ÄäJAVAÂü∫Á°ÄÊ†∏ÂøÉ-ÁêÜËß£Á±ª„ÄÅÂØπË±°„ÄÅÈù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÅÈù¢ÂêëÊé•Âè£ÁºñÁ®ã„Äã „ÄäË°•Á†ÅÁöÑÂâç‰∏ñ‰ªäÁîü„Äã „ÄäÊï∞ÂÄºËÆ°ÁÆóÁ≤æÂ∫¶‰∏¢Â§±ÈóÆÈ¢ò„Äã „ÄäÂΩªÂ∫ïÁêÜËß£javaÂèçÂ∞ÑÊú∫Âà∂„Äã JAVAÂ§öÁ∫øÁ®ãüê∏üê∏üê∏ Â§öÁ∫øÁ®ãËøô‰∏ÄÂùóÊØîËæÉÊ£òÊâãÔºå‰∏îÂ≠¶‰∏î‰øùÈáç„ÄÇ RedisüêØüêØüêØ Á≥ªÁªüÂ≠¶‰π†redisÁöÑÁ¨îËÆ∞Êï¥ÁêÜ„ÄÇ „ÄäRedis„ÄãÔºö „ÄäÂàùÊ≠•ËÆ§ËØÜRedis„Äã „ÄäRedisÂü∫Êú¨Êï∞ÊçÆÁªìÊûÑÂíåÊìç‰Ωú„Äã „ÄäRedisÂÖ∂‰ªñÁöÑÂäüËÉΩ‰ªãÁªç„Äã „ÄäRedis‰∏∫‰ªÄ‰πàÂø´„Äã „ÄäRedisÊåÅ‰πÖÂåñ„Äã „ÄäRedis‰∏ª‰ªéÂ§çÂà∂„Äã „ÄäRedis-SentinelÂÆûÁé∞È´òÂèØÁî®ËØªÂÜôÂàÜÁ¶ª„Äã „ÄäRedis-ClusterÁêÜËÆ∫ËØ¶Ëß£„Äã „ÄäRedisÁºìÂ≠òËÆæËÆ°‰∏é‰ºòÂåñ„Äã „ÄäRedisÁºìÂ≠òÊõ¥Êñ∞ÈóÆÈ¢ò„Äã „ÄäRedis‰∫ãÂä°„Äã „ÄäÂá†Áßç‰∏ªÊµÅÁºìÂ≠òÊ°ÜÊû∂‰ªãÁªç„Äã „ÄäÂÖ≥‰∫éRedis‰∏Ä‰∫õÈáçË¶ÅÁöÑÈù¢ËØïÁÇπ„Äã MySQLÊï∞ÊçÆÂ∫ìüê®üê®üê® ‰Ωú‰∏∫ÂøÖÂ§áÊäÄËÉΩÔºåÁî®Ê≥ïÂíåÂéüÁêÜÈÉΩË¶Å‰ºö„ÄÇ „ÄäMySQL„ÄãÔºö „ÄämysqlÊúÄÂü∫Á°ÄÁü•ËØÜÂ∞èÁªì„Äã „ÄäSQLÂøÖÁü•ÂøÖ‰ºöÁü•ËØÜÁÇπÊèêÁÇº„Äã „ÄäÂ§çÊùÇÊü•ËØ¢ËÆ≠ÁªÉ„Äã „ÄädeleteÂíåtruncate‰ª•ÂèädropÂå∫Âà´„Äã „ÄäÂ¶Ç‰ΩïËÆæËÆ°‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì„Äã „ÄäÊï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂÖ•Èó®„Äã „ÄäMySQLÁ¥¢ÂºïÂÖ®Èù¢Ëß£ËØª„Äã „ÄäMySQLË∞É‰ºò„Äã „ÄäÂÖ≥‰∫éÁ¥¢ÂºïÂ§±ÊïàÂíåËÅîÂêàÁ¥¢Âºï„Äã „ÄäÈîÅÊ®°Âùó„Äã „ÄäÊï∞ÊçÆÂ∫ì‰∫ãÂä°Ê†∏ÂøÉÈóÆÈ¢ò„Äã „ÄämysqlÈù¢ËØïÈ´òÈ¢ëÁêÜËÆ∫Áü•ËØÜ„Äã ÁÆóÊ≥ïüêªüêªüêª ÁÆóÊ≥ïËøô‰∏ÄÂùó‰πüÊòØÈù¢ËØïÁóõÁÇπÂíåÈöæÁÇπÔºåÂ§¥ÂèëË∂äÊù•Ë∂äÂ∞ë‰∫ÜÂë¢ÔºÅ Springüê∑üê∑üê∑ Â§ßÂéÇÂøÖÈóÆÂïäÂïäÂïäÂïäÔºåÊ∫êÁ†ÅÁªàÁ©∂ËøòÊòØË¶ÅËØªÁöÑ~ Spring CloudÁõ∏ÂÖ≥üêÆüêÆüêÆ Ëøô‰∏ÄÂùóÂ∞±ÊØîËæÉÂÅèÂÆûË∑µ‰∫Ü„ÄÇÂàÜÂ∏ÉÂºè„ÄÇ„ÄÇ„ÄÇË∑ØÊº´Êº´„ÄÇ„ÄÇ„ÄÇ Zookeeperüêóüêóüêó ‰Ωú‰∏∫ÂΩì‰ªäÂàÜÂ∏ÉÂºèÂçèË∞É‰∏≠ÂøÉÔºåÊ†∏ÂøÉÁöÑPaxosÁÆóÊ≥ï‰Ω†‰∏çÊÉ≥‰∫ÜËß£‰∏Ä‰∏ãÂêóÔºü ÊùÇËÆ∞üêµüêµüêµ Âú®Ëøô‰∏™ÊùøÂùóÔºå‰∏çÂàíÂàÜÁ±ªÂà´ÔºåÊñáÁ´†Â∞ΩÂèØËÉΩÂú∞ÁÆÄÁü≠Ôºå‰πüÂèØË∞ì‰πãËÆ∞ÂøÜÁ¢éÁâá„ÄÇ „ÄäÊäÄÊúØÁü≠ÊñáÊùÇËÆ∞„ÄãÔºö „Ääspring‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫„Äã „ÄäRedissonÂÆûÁé∞RedisÂàÜÂ∏ÉÂºèÈîÅÂéüÁêÜ„Äã „ÄäredisÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ„Äã „ÄäspringMVCÂÖ®Â±ÄÂºÇÂ∏∏+springÂåÖÊâ´ÊèèÂåÖÈöîÁ¶ª+spring‰∫ãÂä°‰º†Êí≠„Äã „ÄäÂàÜÂ∏ÉÂºèIDÁîüÊàêÁ≠ñÁï•„Äã „ÄäSpring Session„Äã „ÄäCurator„Äã „ÄäELKÂπ≥Âè∞Êê≠Âª∫„Äã „ÄäÂ∫ìÂ≠òÊâ£ÂáèÈóÆÈ¢ò„Äã „ÄäÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°àÊÄùËÄÉ„Äã „ÄäSpringBoot‰ΩøÁî®logbackÂÆûÁé∞Êó•ÂøóÊåâÂ§©ÊªöÂä®„Äã „ÄäÂú∞ÁêÜ‰ΩçÁΩÆÈôÑËøëÊü•ËØ¢ÁöÑGEOHASHËß£ÂÜ≥ÊñπÊ°à„Äã „ÄäÊ∑±ÂÖ•Êé¢Á©∂NginxÂéüÁêÜ„Äã „ÄäÁÆÄÊòéÁêÜËß£‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ï„Äã ÈöèÁ¨îüêñüêñüêñ „ÄäÈöèÁ¨î„ÄãÔºö „Ää2019Âπ¥Â±ïÊúõ„Äã ÂÆûÊàò‰ΩúÂìÅüê∞üê∞üê∞ ËÆ∞ÂΩï‰∏Ä‰∫õÂÆûÊàò‰ΩúÂìÅÔºå‰ª£Á†Å‰∏ªË¶ÅÂ≠òÊîæÂú®github‰∏ä„ÄÇ „ÄäÊàëÁöÑÂÆûÊàò„ÄãÔºö „ÄäÂø´‰πêËúóÁâõÂïÜÂüé‰ª£Á†Å„Äã „ÄäÁ†ÅÁ†ÅË¥≠ÂàÜÂ∏ÉÂºèÁîµÂïÜÂÆûÊàò‰ª£Á†Å„Äã]]></content>
      <tags>
        <tag>Ê±áÊÄª</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedHashSet]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F10.LinkedHashSet%2F</url>
    <content type="text"><![CDATA[HashSet Âíå LinkedHashSet ÁöÑÂÖ≥Á≥ªÁ±ª‰ºº‰∫é HashMap Âíå LinkedHashMap ÁöÑÂÖ≥Á≥ªÔºåÂç≥ÂêéËÄÖÁª¥Êä§ÂèåÂêëÈìæË°®ÔºåÂÆûÁé∞Ëø≠‰ª£È°∫Â∫èÂèØ‰∏∫ÊèíÂÖ•È°∫Â∫èÊàñÊòØËÆøÈóÆÈ°∫Â∫è„ÄÇÊâÄ‰ª•‰πüÂ∞±ËΩªÊùæÂä†ÊÑâÂø´Âø´ÈÄü‰∫ÜËß£‰∏Ä‰∏ãÂç≥ÂèØ„ÄÇ ‰ªéÊ∫êÁ†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞ÂÖ∂Á©∫ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏∫Ôºö 123public LinkedHashSet() &#123; super(16, .75f, true);&#125; Ëøô‰∏™superÂç≥Áà∂Á±ªÊòØHashSetÔºå‰ªéÂÆÉÁöÑÁªßÊâøÂÖ≥Á≥ªÂ∞±ÂèØ‰ª•ÊòæÁÑ∂ÁúãÂà∞Ôºö 123public class LinkedHashSet&lt;E&gt; extends HashSet&lt;E&gt; implements Set&lt;E&gt;, Cloneable, java.io.Serializable ÈÇ£‰πàHashSetÂÜÖÈÉ®ÁöÑÊï∞ÊçÆÁªìÊûÑÂ∞±ÊòØ‰∏Ä‰∏™ HashMapÔºåÂÖ∂ÊñπÊ≥ïÁöÑÂÜÖÈÉ®Âá†‰πéÂ∞±ÊòØÂú®Ë∞ÉÁî® HashMap ÁöÑÊñπÊ≥ï„ÄÇ LinkedHashSet È¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìÁöÑÊòØÂÆÉÊòØ‰∏Ä‰∏™ Set ÁöÑÂÆûÁé∞ÔºåÊâÄ‰ª•ÂÆÉÂÖ∂‰∏≠Â≠òÁöÑËÇØÂÆö‰∏çÊòØÈîÆÂÄºÂØπÔºåËÄåÊòØÂÄº„ÄÇÊ≠§ÂÆûÁé∞‰∏é HashSet ÁöÑ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÔºåLinkedHashSet Áª¥Êä§ÁùÄ‰∏Ä‰∏™ËøêË°å‰∫éÊâÄÊúâÊù°ÁõÆÁöÑÂèåÂêëÂæ™ÁéØÈìæË°®„ÄÇ Ëøô‰∏ÄÂàáÈÉΩ‰∏éLinkedHashMapÁ±ª‰ºº„ÄÇ LinkedHashSet ÂÜÖÈÉ®Êúâ‰∏™Â±ûÊÄß accessOrder ÊéßÂà∂ÁùÄÈÅçÂéÜÊ¨°Â∫è„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãËØ•ÂÄº‰∏∫ false ,Âç≥ÊåâÊèíÂÖ•ÊéíÂ∫èËÆøÈóÆ„ÄÇÂ¶ÇÊûúÂ∞ÜËØ•ÂÄºËÆæÁΩÆ‰∏∫ true ÁöÑËØùÔºåÂàôÊåâËÆøÈóÆÊ¨°Â∫èÊéíÂ∫è(Âç≥ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁÆóÊ≥ïÔºåÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊîæÂú®ÈìæË°®Â§¥ÈÉ®ÔºåÊúÄËøëËÆøÈóÆÁöÑÂàôÂú®ÈìæË°®Â∞æÈÉ®)„ÄÇ ‰∏Ä„ÄÅ Á§∫‰æã HashSetÁöÑÈÅçÂéÜÔºö 123456789101112public static void main(String[] args) &#123; Set&lt;String&gt; linkedHashSet = new HashSet&lt;&gt;(); linkedHashSet.add("aaa"); linkedHashSet.add("eee"); linkedHashSet.add("ccc"); linkedHashSet.add("bbb"); Iterator&lt;String&gt; it = linkedHashSet.iterator(); while(it.hasNext())&#123; System.out.println(it.next()); &#125;&#125; ËæìÂá∫ÁªìÊûúÊòØÔºö aaa ccc bbb eee LinkedHashSetÁöÑÈÅçÂéÜÔºö 1234567891011121314public static void main(String[] args) &#123; Set&lt;String&gt; linkedHashSet = new LinkedHashSet&lt;&gt;(); linkedHashSet.add("aaa"); linkedHashSet.add("eee"); linkedHashSet.add("ccc"); linkedHashSet.add("bbb"); linkedHashSet.add(null); Iterator&lt;String&gt; it = linkedHashSet.iterator(); while(it.hasNext())&#123; System.out.println(it.next()); &#125; &#125; ËæìÂá∫ÁªìÊûúÊòØÔºö aaa eee ccc bbb null ÂèØ‰ª•ÁúãÂà∞‰∏éËæìÂÖ•È°∫Â∫èÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hashtable]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F9.HashTable%2F</url>
    <content type="text"><![CDATA[Hashtable ÊòØ‰∏™ËøáÊó∂ÁöÑÈõÜÂêàÁ±ªÔºå‰∏çÂª∫ËÆÆÂú®Êñ∞‰ª£Á†Å‰∏≠‰ΩøÁî®Ôºå‰∏çÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂú∫ÂêàÂèØ‰ª•Áî® HashMap ÊõøÊç¢ÔºåÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂú∫ÂêàÂèØ‰ª•Áî® ConcurrentHashMap ÊõøÊç¢„ÄÇ‰ΩÜËøôÂπ∂‰∏çÊòØÊàë‰ª¨‰∏çÂéª‰∫ÜËß£ÂÆÉÁöÑÁêÜÁî±„ÄÇÊúÄËµ∑Á†Å Hashtable Âíå HashMap ÁöÑÈù¢ËØïÈ¢òÂú®Èù¢ËØï‰∏≠ÁªèÂ∏∏Ë¢´ÈóÆÂà∞„ÄÇ ‰∏Ä„ÄÅÂâçË®Ä HashtableÂíåHashMapÔºå‰ªéÂ≠òÂÇ®ÁªìÊûÑÂíåÂÆûÁé∞Êù•ËÆ≤Âü∫Êú¨‰∏äÈÉΩÊòØÁõ∏ÂêåÁöÑ„ÄÇ ÂÆÉÂíåHashMapÁöÑÊúÄÂ§ßÁöÑ‰∏çÂêåÊòØÂÆÉÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂè¶Â§ñÂÆÉ‰∏çÂÖÅËÆ∏keyÂíåvalue‰∏∫null„ÄÇ ‰∏∫‰∫ÜËÉΩÂú®ÂìàÂ∏åË°®‰∏≠ÊàêÂäüÂú∞‰øùÂ≠òÂíåÂèñÂá∫ÂØπË±°ÔºåÁî®‰ΩúkeyÁöÑÂØπË±°ÂøÖÈ°ªÂÆûÁé∞hashCodeÊñπÊ≥ïÂíåequalsÊñπÊ≥ï„ÄÇ ‰∫å„ÄÅfail-fastÊú∫Âà∂ iteratorÊñπÊ≥ïËøîÂõûÁöÑËø≠‰ª£Âô®ÊòØfail-fastÁöÑ„ÄÇÂ¶ÇÊûúÂú®Ëø≠‰ª£Âô®Ë¢´ÂàõÂª∫ÂêéhashtableË¢´ÁªìÊûÑÂûãÂú∞‰øÆÊîπ‰∫ÜÔºåÈô§‰∫ÜËø≠‰ª£Âô®Ëá™Â∑±ÁöÑremoveÊñπÊ≥ïÔºåËø≠‰ª£Âô®‰ºöÊäõÂá∫‰∏Ä‰∏™ConcurrentModificationExceptionÂºÇÂ∏∏„ÄÇ Âõ†Ê≠§ÔºåÈù¢ÂØπÂú®Âπ∂ÂèëÁöÑ‰øÆÊîπÔºåËø≠‰ª£Âô®Âπ≤ËÑÜÂà©ËêΩÁöÑÂ§±Ë¥•ÔºåËÄå‰∏çÊòØÂÜíÈô©ÁöÑÁªßÁª≠„ÄÇ ÂÖ≥‰∫éËøô‰∏™ÁöÑÁêÜËß£ÔºåÂÖ∂ÂÆûÂú®‰∏ä‰∏ÄÁ´†ËÆ≤LinkedHashMap‰∏≠ÁöÑÁ¨¨ÂÖ´ÁÇπÊèêÂà∞Ôºö ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåafterNodeAccess() ÂáΩÊï∞‰∏≠Ôºå‰ºö‰øÆÊîπmodCount,Âõ†Ê≠§ÂΩì‰Ω†Ê≠£Âú®accessOrder=trueÁöÑÊ®°Âºè‰∏ã,Ëø≠‰ª£LinkedHashMapÊó∂ÔºåÂ¶ÇÊûúÂêåÊó∂Êü•ËØ¢ËÆøÈóÆÊï∞ÊçÆÔºå‰πü‰ºöÂØºËá¥fail-fastÔºåÂõ†‰∏∫Ëø≠‰ª£ÁöÑÈ°∫Â∫èÂ∑≤ÁªèÊîπÂèò„ÄÇ ÁÆÄÂçïËØ¥ÔºåÂ∞±ÊòØ‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂ÂàÜÂà´ËøõË°å‰øÆÊîπÂíåÈÅçÂéÜÊó∂Ôºå‰ºöÊäõÂá∫Ëøô‰∏™ÂºÇÂ∏∏„ÄÇ Èù¢ËØïÈ¢òÔºöÈõÜÂêàÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠ÊòØÂê¶ÂèØ‰ª•Âà†Èô§ÂÖÉÁ¥†Ôºå‰∏∫‰ªÄ‰πàËø≠‰ª£Âô®Â∞±ÂèØ‰ª•ÂÆâÂÖ®Âà†Èô§ÂÖÉÁ¥†Ôºü ÈõÜÂêàÂú®‰ΩøÁî® for Âæ™ÁéØËø≠‰ª£ÁöÑËøáÁ®ã‰∏≠‰∏çÂÖÅËÆ∏‰ΩøÁî®ÔºåÈõÜÂêàÊú¨Ë∫´ÁöÑ remove ÊñπÊ≥ïÂà†Èô§ÂÖÉÁ¥†ÔºåÂ¶ÇÊûúËøõË°åÈîôËØØÊìç‰ΩúÂ∞Ü‰ºöÂØºËá¥ ConcurrentModificationException ÂºÇÂ∏∏ÁöÑÂèëÁîü Iterator ÂèØ‰ª•Âà†Èô§ËÆøÈóÆÁöÑÂΩìÂâçÂÖÉÁ¥†(current)Ôºå‰∏ÄÊó¶Âà†Èô§ÁöÑÂÖÉÁ¥†ÊòØIterator ÂØπË±°‰∏≠ next ÊâÄÊ≠£Âú®ÂºïÁî®ÁöÑÔºåÂú® Iterator Âà†Èô§ÂÖÉÁ¥†ÈÄöËøá ‰øÆÊîπ modCount ‰∏é expectedModCount ÁöÑÂÄºÔºåÂèØ‰ª•‰Ωø‰∏ãÊ¨°Âú®Ë∞ÉÁî® remove ÁöÑÊñπÊ≥ïÊó∂ÂÄô‰∏§ËÄÖ‰ªçÁÑ∂Áõ∏ÂêåÂõ†Ê≠§‰∏ç‰ºöÊúâÂºÇÂ∏∏‰∫ßÁîü„ÄÇ Ëø≠‰ª£Âô®ÁöÑfail-fastÊú∫Âà∂Âπ∂‰∏çËÉΩÂæóÂà∞‰øùËØÅÔºåÂÆÉ‰∏çËÉΩÂ§ü‰øùËØÅ‰∏ÄÂÆöÂá∫Áé∞ËØ•ÈîôËØØ„ÄÇ‰∏ÄËà¨Êù•ËØ¥Ôºåfail-fast‰ºöÂ∞ΩÊúÄÂ§ßÂä™ÂäõÊäõÂá∫ConcurrentModificationExceptionÂºÇÂ∏∏„ÄÇÂõ†Ê≠§Ôºå‰∏∫ÊèêÈ´òÊ≠§Á±ªÊìç‰ΩúÁöÑÊ≠£Á°ÆÊÄßËÄåÁºñÂÜô‰∏Ä‰∏™‰æùËµñ‰∫éÊ≠§ÂºÇÂ∏∏ÁöÑÁ®ãÂ∫èÊòØÈîôËØØÁöÑÂÅöÊ≥ïÔºåÊ≠£Á°ÆÂÅöÊ≥ïÊòØÔºöConcurrentModificationException Â∫îËØ•‰ªÖÁî®‰∫éÊ£ÄÊµã bug„ÄÇ HashtableÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÂ¶ÇÊûú‰∏çÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÊòØ‰∏çÈúÄË¶ÅÁöÑÔºåÊé®Ëçê‰ΩøÁî®HashMap‰ª£ÊõøHashtable„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÔºåÊé®Ëçê‰ΩøÁî®java.util.concurrent.ConcurrentHashMap‰ª£ÊõøHashtable„ÄÇ ‰∫å„ÄÅÁªßÊâøÂÖ≥Á≥ª 123public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, java.io.Serializable&#123;&#125; extends Dictionary&lt;K,V&gt;ÔºöDictionaryÁ±ªÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÁî®Êù•Â≠òÂÇ®ÈîÆ/ÂÄºÂØπÔºå‰ΩúÁî®ÂíåMapÁ±ªÁõ∏‰ºº„ÄÇ implements Map&lt;K,V&gt;ÔºöÂÆûÁé∞‰∫ÜMapÔºåÂÆûÁé∞‰∫ÜMap‰∏≠Â£∞ÊòéÁöÑÊìç‰ΩúÂíådefaultÊñπÊ≥ï„ÄÇ hashMap‰ª•ÂèäTreeMapÁöÑÊ∫êÁ†ÅÔºåÈÉΩÊ≤°ÊúâÁªßÊâø‰∫éËøô‰∏™Á±ª„ÄÇ‰∏çËøáÂΩìÊàëÁúãÂà∞Ê≥®Èáä‰∏≠ÁöÑËß£Èáä‰πüÂ∞±ÊòéÁôΩ‰∫ÜÔºåÂÖ∂ Dictionary Ê∫êÁ†ÅÊ≥®ÈáäÊòØËøôÊ†∑ÁöÑÔºöNOTE: This class is obsolete. New implementations should implement the Map interface, rather than extending this class. ËØ•ËØùÊåáÂá∫ Dictionary Ëøô‰∏™Á±ªËøáÊó∂‰∫ÜÔºåÊñ∞ÁöÑÂÆûÁé∞Á±ªÂ∫îËØ•ÂÆûÁé∞MapÊé•Âè£„ÄÇ ‰∏â„ÄÅÂ±ûÊÄß 1234567891011121314//ÂìàÂ∏åË°®private transient Entry&lt;?,?&gt;[] table;//ËÆ∞ÂΩïÂìàÂ∏åË°®‰∏≠ÈîÆÂÄºÂØπÁöÑ‰∏™Êï∞private transient int count;//Êâ©ÂÆπÁöÑÈòàÂÄºprivate int threshold;//Ë¥üËΩΩÂõ†Â≠êprivate float loadFactor;//hashtableË¢´ÁªìÊûÑÂûã‰øÆÊîπÁöÑÊ¨°Êï∞„ÄÇprivate transient int modCount = 0; HashTableÂπ∂Ê≤°ÊúâÂÉèHashMapÈÇ£Ê†∑ÂÆö‰πâ‰∫ÜÂæàÂ§öÁöÑÂ∏∏ÈáèÔºåËÄåÊòØÁõ¥Êé•ÂÜôÊ≠ªÂú®‰∫ÜÊñπÊ≥ïÈáå„ÄÇ Hashtable‰∏çË¶ÅÊ±ÇÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÂÆπÈáè‰∏ÄÂÆöË¶Å‰∏∫2ÁöÑÊï¥Êï∞Ê¨°ÂπÇÔºåËÄåHashMapÂàôË¶ÅÊ±Ç‰∏ÄÂÆö‰∏∫2ÁöÑÊï¥Êï∞Ê¨°ÂπÇ„ÄÇ Âõõ„ÄÅÊûÑÈÄ†ÂáΩÊï∞ 12345678/** * ‰ΩøÁî®ÈªòËÆ§ÂàùÂßãÂåñÂÆπÈáèÔºà11ÔºâÂíåÈªòËÆ§Ë¥üËΩΩÂõ†Â≠êÔºà0.75ÔºâÊù•ÊûÑÈÄ†‰∏Ä‰∏™Á©∫ÁöÑhashtable. * * ËøôÈáåÂèØ‰ª•ÁúãÂà∞ÔºåHashtableÈªòËÆ§ÂàùÂßãÂåñÂÆπÈáè‰∏∫16ÔºåËÄåHashMapÁöÑÈªòËÆ§ÂàùÂßãÂåñÂÆπÈáè‰∏∫11„ÄÇ */public Hashtable() &#123; this(11, 0.75f);&#125; Êàë‰ª¨ÂèØ‰ª•Ëé∑ÂèñÂà∞Ëøô‰∫õ‰ø°ÊÅØÔºöHashTableÈªòËÆ§ÁöÑÂàùÂßãÂåñÂÆπÈáè‰∏∫11Ôºà‰∏éHashMap‰∏çÂêåÔºâÔºåË¥üËΩΩÂõ†Â≠êÈªòËÆ§‰∏∫0.75Ôºà‰∏éHashMapÁõ∏ÂêåÔºâ„ÄÇËÄåÊ≠£Âõ†‰∏∫ÈªòËÆ§ÂàùÂßãÂåñÂÆπÈáèÁöÑ‰∏çÂêåÔºåÂêåÊó∂‰πüÊ≤°ÊúâÂØπÂÆπÈáèÂÅöË∞ÉÊï¥ÁöÑÁ≠ñÁï•ÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÖàÊé®Êñ≠Âá∫ÔºåHashTable‰ΩøÁî®ÁöÑÂìàÂ∏åÂáΩÊï∞Ë∑üHashMapÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºà‰∫ãÂÆû‰πüÁ°ÆÂÆûÂ¶ÇÊ≠§Ôºâ„ÄÇ ‰∫î„ÄÅÈáçË¶ÅÊñπÊ≥ï 5.1 getÊñπÊ≥ï 12345678910111213public synchronized V get(Object key) &#123; Entry&lt;?,?&gt; tab[] = table; int hash = key.hashCode(); //ÈÄöËøáÂìàÂ∏åÂáΩÊï∞ÔºåËÆ°ÁÆóÂá∫keyÂØπÂ∫îÁöÑÊ°∂ÁöÑ‰ΩçÁΩÆ int index = (hash &amp; 0x7FFFFFFF) % tab.length; //ÈÅçÂéÜËØ•Ê°∂ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÂØªÊâæËØ•key for (Entry&lt;?,?&gt; e = tab[index] ; e != null ; e = e.next) &#123; if ((e.hash == hash) &amp;&amp; e.key.equals(key)) &#123; return (V)e.value; &#125; &#125; return null;&#125; ËøôÈáåÂèØ‰ª•ÁúãÂà∞ÔºåHashtableÂíåHashMapÁ°ÆËÆ§keyÂú®Êï∞ÁªÑ‰∏≠ÁöÑÁ¥¢ÂºïÁöÑÊñπÊ≥ï‰∏çÂêå„ÄÇ HashtableÈÄöËøáindex = (hash &amp; 0x7FFFFFFF) % tab.length;Êù•Á°ÆËÆ§ HashMapÈÄöËøái = (n - 1) &amp; hash;Êù•Á°ÆËÆ§ Ë∑üHashMapÁõ∏ÊØîÔºåHashTableÁöÑgetÊñπÊ≥ïÈùûÂ∏∏ÁÆÄÂçï„ÄÇÊàë‰ª¨È¶ñÂÖàÂèØ‰ª•ÁúãËßÅgetÊñπÊ≥ï‰ΩøÁî®‰∫ÜsynchronizedÊù•‰øÆÈ•∞ÔºåÊâÄ‰ª•ÂÆÉËÉΩ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇÂπ∂‰∏îÂÆÉÊòØÈÄöËøáÈìæË°®ÁöÑÊñπÂºèÊù•Â§ÑÁêÜÂÜ≤Á™ÅÁöÑ„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÁúãËßÅHashTableÂπ∂Ê≤°ÊúâÂÉèHashMapÈÇ£Ê†∑Â∞ÅË£Ö‰∏Ä‰∏™ÂìàÂ∏åÂáΩÊï∞ÔºåËÄåÊòØÁõ¥Êé•ÊääÂìàÂ∏åÂáΩÊï∞ÂÜôÂú®‰∫ÜÊñπÊ≥ï‰∏≠„ÄÇËÄåÂìàÂ∏åÂáΩÊï∞‰πüÊòØÊØîËæÉÁÆÄÂçïÁöÑÔºåÂÆÉ‰ªÖÂØπÂìàÂ∏åË°®ÁöÑÈïøÂ∫¶ËøõË°å‰∫ÜÂèñÊ®°„ÄÇ 5.2 putÊñπÊ≥ï 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public synchronized V put(K key, V value) &#123; // Á°ÆËÆ§value‰∏ç‰∏∫null if (value == null) &#123; throw new NullPointerException(); &#125; Entry&lt;?,?&gt; tab[] = table; int hash = key.hashCode(); //ÊâæÂà∞keyÂú®table‰∏≠ÁöÑÁ¥¢Âºï int index = (hash &amp; 0x7FFFFFFF) % tab.length; @SuppressWarnings("unchecked") //Ëé∑ÂèñkeyÊâÄÂú®Á¥¢ÂºïÁöÑentry Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index]; //ÈÅçÂéÜentryÔºåÂà§Êñ≠keyÊòØÂê¶Â∑≤ÁªèÂ≠òÂú® for(; entry != null ; entry = entry.next) &#123; //Â¶ÇÊûúkeyÂ∑≤ÁªèÂ≠òÂú® if ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123; //‰øùÂ≠òÊóßÁöÑvalue V old = entry.value; //ÊõøÊç¢value entry.value = value; //ËøîÂõûÊóßÁöÑvalue return old; &#125; &#125; //Â¶ÇÊûúkeyÂú®hashtable‰∏çÊòØÂ∑≤ÁªèÂ≠òÂú®ÔºåÂ∞±Áõ¥Êé•Â∞ÜÈîÆÂÄºÂØπÊ∑ªÂä†Âà∞table‰∏≠ÔºåËøîÂõûnull addEntry(hash, key, value, index); return null;&#125;private void addEntry(int hash, K key, V value, int index) &#123; modCount++; Entry&lt;?,?&gt; tab[] = table; //ÂìàÂ∏åË°®ÁöÑÈîÆÂÄºÂØπ‰∏™Êï∞ËææÂà∞‰∫ÜÈòàÂÄºÔºåÂàôËøõË°åÊâ©ÂÆπ if (count &gt;= threshold) &#123; // Rehash the table if the threshold is exceeded rehash(); tab = table; hash = key.hashCode(); index = (hash &amp; 0x7FFFFFFF) % tab.length; &#125; // Creates the new entry. @SuppressWarnings("unchecked") Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) tab[index]; //ÊääÊñ∞ËäÇÁÇπÊèíÂÖ•Ê°∂‰∏≠ÔºàÂ§¥ÊèíÊ≥ïÔºâ tab[index] = new Entry&lt;&gt;(hash, key, value, e); count++;&#125; ‰ªé‰ª£Á†Å‰∏≠ÂèØ‰ª•ÊÄªÁªìÂá∫HashtableÁöÑputÊñπÊ≥ïÁöÑÊÄª‰ΩìÊÄùË∑ØÔºö Á°ÆËÆ§value‰∏ç‰∏∫null„ÄÇÂ¶ÇÊûú‰∏∫nullÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ ÊâæÂà∞keyÂú®table‰∏≠ÁöÑÁ¥¢ÂºïÔºåËé∑ÂèñkeyÊâÄÂú®‰ΩçÁΩÆÁöÑentry ÈÅçÂéÜentryÔºåÂà§Êñ≠keyÊòØÂê¶Â∑≤ÁªèÂ≠òÂú® Â¶ÇÊûúkeyÂ∑≤ÁªèÂ≠òÂú®ÔºåÊõøÊç¢valueÔºåËøîÂõûÊóßÁöÑvalue Â¶ÇÊûúkeyÂú®hashtable‰∏çÊòØÂ∑≤ÁªèÂ≠òÂú®ÔºåÂ∞±Áõ¥Êé•Ê∑ªÂä†ÔºåÂê¶ÂàôÁõ¥Êé•Â∞ÜÈîÆÂÄºÂØπÊ∑ªÂä†Âà∞table‰∏≠ÔºåËøîÂõûnull Âú®ÊñπÊ≥ï‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®ÈÅçÂéÜÊ°∂‰∏≠ÂÖÉÁ¥†Êó∂ÔºåÊòØÊåâÁÖßÈìæË°®ÁöÑÊñπÂºèÈÅçÂéÜÁöÑ„ÄÇÂèØ‰ª•Âç∞ËØÅÔºåHashMapÁöÑÊ°∂‰∏≠ÂèØËÉΩ‰∏∫ÈìæË°®ÊàñËÄÖÊ†ë„ÄÇ‰ΩÜHashtableÁöÑÊ°∂‰∏≠Âè™ÂèØËÉΩÊòØÈìæË°®„ÄÇ 5.3 removeÊñπÊ≥ï 12345678910111213141516171819202122232425public synchronized V remove(Object key) &#123; Entry&lt;?,?&gt; tab[] = table; int hash = key.hashCode(); //ËÆ°ÁÆókeyÂú®hashtable‰∏≠ÁöÑÁ¥¢Âºï int index = (hash &amp; 0x7FFFFFFF) % tab.length; @SuppressWarnings("unchecked") Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)tab[index]; //ÈÅçÂéÜentryÔºåÂ¶ÇÊûúentry‰∏≠Â≠òÂú®key‰∏∫ÂèÇÊï∞keyÁöÑÈîÆÂÄºÂØπÔºåÂ∞±Âà†Èô§ÈîÆÂÄºÂØπÔºåÂπ∂ËøîÂõûÈîÆÂÄºÂØπÁöÑvalue for(Entry&lt;K,V&gt; prev = null ; e != null ; prev = e, e = e.next) &#123; if ((e.hash == hash) &amp;&amp; e.key.equals(key)) &#123; modCount++; if (prev != null) &#123; prev.next = e.next; &#125; else &#123; tab[index] = e.next; &#125; count--; V oldValue = e.value; e.value = null; return oldValue; &#125; &#125; //Â¶ÇÊûú‰∏çÂ≠òÂú®key‰∏∫ÂèÇÊï∞keyÁöÑÈîÆÂÄºÂØπÔºåËøîÂõûvalue return null;&#125; ‰ªé‰ª£Á†Å‰∏≠ÂèØ‰ª•ÊÄªÁªìÂá∫HashtableÁöÑremoveÊñπÊ≥ïÁöÑÊÄª‰ΩìÊÄùË∑ØÔºö ÊâæÂà∞keyÂú®table‰∏≠ÁöÑÁ¥¢ÂºïÔºåËé∑ÂèñkeyÊâÄÂú®‰ΩçÁΩÆÁöÑentry ÈÅçÂéÜentryÔºåÂà§Êñ≠keyÊòØÂê¶Â∑≤ÁªèÂ≠òÂú® Â¶ÇÊûúkeyÂ≠òÂú®ÔºåÂà†Èô§keyÊò†Â∞ÑÁöÑÈîÆÂÄºÂØπÔºåËøîÂõûÊóßÁöÑvalue Â¶ÇÊûúkeyÂú®hashtable‰∏çÂ≠òÂú®ÔºåËøîÂõûnull 5.4 rehashÊñπÊ≥ï 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * Â¢ûÂä†hashtableÁöÑÂÆπÈáèÔºå‰∏∫‰∫ÜÊõ¥ÊúâÊïàÂú∞Â≠òÊîæÂíåÊâæÂà∞ÂÆÉÁöÑentry„ÄÇ * ÂΩìÈîÆÂÄºÂØπÁöÑÊï∞ÈáèË∂ÖËøá‰∫Ü‰∏¥ÁïåÂÄºÔºàcapacity*load factorÔºâËøô‰∏™ÊñπÊ≥ïËá™Âä®Ë∞ÉÁî® * ÈïøÂ∫¶Âèò‰∏∫ÂéüÊù•ÁöÑ2ÂÄç+1 * */@SuppressWarnings("unchecked")protected void rehash() &#123; //ËÆ∞ÂΩïÊóßÂÆπÈáè int oldCapacity = table.length; //ËÆ∞ÂΩïÊóßÊ°∂ÁöÑÊï∞ÁªÑ Entry&lt;?,?&gt;[] oldMap = table; // overflow-conscious code //Êñ∞ÁöÑÂÆπÈáè‰∏∫ÊóßÁöÑÂÆπÈáèÁöÑ2ÂÄç+1 int newCapacity = (oldCapacity &lt;&lt; 1) + 1; //Â¶ÇÊûúÊñ∞ÁöÑÂÆπÈáèÂ§ß‰∫éÂÆπÈáèÁöÑÊúÄÂ§ßÂÄºMAX_ARRAY_SIZE if (newCapacity - MAX_ARRAY_SIZE &gt; 0) &#123; //Â¶ÇÊûúÊóßÂÆπÈáè‰∏∫MAX_ARRAY_SIZEÔºåÂÆπÈáè‰∏çÂèòÔºå‰∏≠Êñ≠ÊñπÊ≥ïÁöÑÊâßË°å if (oldCapacity == MAX_ARRAY_SIZE) // Keep running with MAX_ARRAY_SIZE buckets return; //Â¶ÇÊûúÊóßÂÆπÈáè‰∏ç‰∏∫MAX_ARRAY_SIZEÔºåÊñ∞ÂÆπÈáèÂèò‰∏∫MAX_ARRAY_SIZE newCapacity = MAX_ARRAY_SIZE; &#125; //ÂàõÂª∫Êñ∞ÁöÑÊï∞ÁªÑÔºåÂÆπÈáè‰∏∫Êñ∞ÂÆπÈáè Entry&lt;?,?&gt;[] newMap = new Entry&lt;?,?&gt;[newCapacity]; //ÁªìÊûÑÊÄß‰øÆÊîπÊ¨°Êï∞+1 modCount++; //ËÆ°ÁÆóÊâ©ÂÆπÁöÑ‰∏¥ÁïåÂÄº threshold = (int)Math.min(newCapacity * loadFactor, MAX_ARRAY_SIZE + 1); table = newMap; //Â∞ÜÊóßÁöÑÊï∞ÁªÑ‰∏≠ÁöÑÈîÆÂÄºÂØπËΩ¨ÁßªÂà∞Êñ∞Êï∞ÁªÑ‰∏≠ for (int i = oldCapacity ; i-- &gt; 0 ;) &#123; for (Entry&lt;K,V&gt; old = (Entry&lt;K,V&gt;)oldMap[i] ; old != null ; ) &#123; Entry&lt;K,V&gt; e = old; old = old.next; int index = (e.hash &amp; 0x7FFFFFFF) % newCapacity; e.next = (Entry&lt;K,V&gt;)newMap[index]; newMap[index] = e; &#125; &#125;&#125; ÁúãÂÆå‰ª£Á†ÅÔºåÊàë‰ª¨ÂèØ‰ª•ÊÄªÁªìÂá∫rehashÁöÑÊÄª‰ΩìÊÄùË∑Ø‰∏∫Ôºö Êñ∞Âª∫ÂèòÈáèÊñ∞ÁöÑÂÆπÈáèÔºåÂÄº‰∏∫ÊóßÁöÑÂÆπÈáèÁöÑ2ÂÄç+1 Â¶ÇÊûúÊñ∞ÁöÑÂÆπÈáèÂ§ß‰∫éÂÆπÈáèÁöÑÊúÄÂ§ßÂÄºMAX_ARRAY_SIZE Â¶ÇÊûúÊóßÂÆπÈáè‰∏∫MAX_ARRAY_SIZEÔºåÂÆπÈáè‰∏çÂèòÔºå‰∏≠Êñ≠ÊñπÊ≥ïÁöÑÊâßË°å Â¶ÇÊûúÊóßÂÆπÈáè‰∏ç‰∏∫MAX_ARRAY_SIZEÔºåÊñ∞ÂÆπÈáèÂèò‰∏∫MAX_ARRAY_SIZE ÂàõÂª∫Êñ∞ÁöÑÊï∞ÁªÑÔºåÂÆπÈáè‰∏∫Êñ∞ÂÆπÈáè Â∞ÜÊóßÁöÑÊï∞ÁªÑ‰∏≠ÁöÑÈîÆÂÄºÂØπËΩ¨ÁßªÂà∞Êñ∞Êï∞ÁªÑ‰∏≠ ËøôÈáåÂèØ‰ª•ÁúãÂà∞Ôºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåHashMapÊâ©ÂÆπÂêéÂÆπÈáèÂèò‰∏∫ÂéüÊù•ÁöÑ‰∏§ÂÄçÔºåËÄåHashtableÊâ©ÂÆπÂêéÂÆπÈáèÂèò‰∏∫ÂéüÊù•ÁöÑ‰∏§ÂÄçÂä†‰∏Ä„ÄÇ HashTableÁöÑrehashÊñπÊ≥ïÁõ∏ÂΩì‰∫éHashMapÁöÑresizeÊñπÊ≥ï„ÄÇË∑üHashMapÈÇ£ÁßçÂ∑ßÂ¶ôÁöÑrehashÊñπÂºèÁõ∏ÊØîÔºåHashTableÁöÑrehashËøáÁ®ãÈúÄË¶ÅÂØπÊØè‰∏™ÈîÆÂÄºÂØπÈÉΩÈáçÊñ∞ËÆ°ÁÆóÂìàÂ∏åÂÄºÔºåËÄåÊØîËµ∑ÂºÇÊàñÂíå‰∏éÊìç‰ΩúÔºåÂèñÊ®°ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ËÄóÊó∂ÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•Ëøô‰πüÊòØÂØºËá¥ÊïàÁéáËæÉ‰ΩéÁöÑÂéüÂõ†‰πã‰∏Ä„ÄÇ ÂÖ≠„ÄÅÈÅçÂéÜ ÂèØ‰ª•‰ΩøÁî®‰∏éHashMap‰∏ÄÊ†∑ÁöÑÈÅçÂéÜÊñπÂºèÔºå‰ΩÜÊòØÁî±‰∫éÂéÜÂè≤ÂéüÂõ†ÔºåÂ§ö‰∫ÜEnumerationÁöÑÊñπÂºè„ÄÇ ÈíàÂØπEnumerationÔºåËøôÈáå‰∏éiteratorËøõË°åÂØπÊØî‰∏Ä‰∏ã„ÄÇ Áõ∏ÂêåÁÇπ IteratorÂíåEnumerationÈÉΩÂèØ‰ª•ÂØπÊüê‰∫õÂÆπÂô®ËøõË°åÈÅçÂéÜ„ÄÇ IteratorÂíåEnumerationÈÉΩÊòØÊé•Âè£„ÄÇ ‰∏çÂêåÁÇπ IteratorÊúâÂØπÂÆπÂô®ËøõË°å‰øÆÊîπÁöÑÊñπÊ≥ï„ÄÇËÄåEnumerationÂè™ËÉΩÈÅçÂéÜ„ÄÇ IteratorÊîØÊåÅfail-fastÔºåËÄåEnumeration‰∏çÊîØÊåÅ„ÄÇ IteratorÊØîEnumerationË¶ÜÁõñËåÉÂõ¥ÂπøÔºåÂü∫Êú¨ÊâÄÊúâÂÆπÂô®‰∏≠ÈÉΩÊúâIteratorËø≠‰ª£Âô®ÔºåËÄåÂè™ÊúâVector„ÄÅHashtableÊúâEnumeration„ÄÇ EnumerationÂú®JDK 1.0Â∞±Â∑≤ÁªèÂ≠òÂú®‰∫ÜÔºåËÄåIteratorÊòØJDK2.0Êñ∞Âä†ÁöÑÊé•Âè£„ÄÇ ‰∏É„ÄÅHashtable‰∏éHashMapÂØπÊØî HashTableÁöÑÂ∫îÁî®ÈùûÂ∏∏ÂπøÊ≥õÔºåHashMapÊòØÊñ∞Ê°ÜÊû∂‰∏≠Áî®Êù•‰ª£ÊõøHashTableÁöÑÁ±ªÔºå‰πüÂ∞±ÊòØËØ¥Âª∫ËÆÆ‰ΩøÁî®HashMap„ÄÇ ‰∏ãÈù¢ÁùÄÈáçÊØîËæÉ‰∏Ä‰∏ã‰∫åËÄÖÁöÑÂå∫Âà´Ôºö 1.ÁªßÊâø‰∏çÂêå HashtableÊòØÂü∫‰∫éÈôàÊóßÁöÑDictionaryÁ±ªÁöÑÔºåHashMapÊòØjava1.2ÂºïËøõÁöÑMapÊé•Âè£ÁöÑ‰∏Ä‰∏™ÂÆûÁé∞„ÄÇ 2.ÂêåÊ≠• Hashtable ‰∏≠ÁöÑÊñπÊ≥ïÊòØÂêåÊ≠•ÁöÑÔºå‰øùËØÅ‰∫ÜHashtable‰∏≠ÁöÑÂØπË±°ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ HashMap‰∏≠ÁöÑÊñπÊ≥ïÂú®Áº∫ÁúÅÊÉÖÂÜµ‰∏ãÊòØÈùûÂêåÊ≠•ÁöÑ,HashMap‰∏≠ÁöÑÂØπË±°Âπ∂‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÂú®Â§öÁ∫øÁ®ãÂπ∂ÂèëÁöÑÁéØÂ¢É‰∏ãÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®HashtableÔºå‰ΩÜÊòØË¶Å‰ΩøÁî®HashMapÁöÑËØùÂ∞±Ë¶ÅËá™Â∑±Â¢ûÂä†ÂêåÊ≠•Â§ÑÁêÜ‰∫Ü„ÄÇ 3.ÊïàÁéá ÂçïÁ∫øÁ®ã‰∏≠, HashMapÁöÑÊïàÁéáÂ§ß‰∫éHashtable„ÄÇÂõ†‰∏∫ÂêåÊ≠•ÁöÑË¶ÅÊ±Ç‰ºöÂΩ±ÂìçÊâßË°åÁöÑÊïàÁéáÔºåÊâÄ‰ª•Â¶ÇÊûú‰Ω†‰∏çÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÔºåHashMapÊòØHashtableÁöÑËΩªÈáèÁ∫ßÂÆûÁé∞ÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÁî±‰∫éÂêåÊ≠•Â∏¶Êù•ÁöÑ‰∏çÂøÖË¶ÅÁöÑÊÄßËÉΩÂºÄÈîÄÔºå‰ªéËÄåÊèêÈ´òÊïàÁéá„ÄÇ 4.nullÂÄº Hashtable‰∏≠ÔºåkeyÂíåvalueÈÉΩ‰∏çÂÖÅËÆ∏Âá∫Áé∞nullÂÄºÔºåÂê¶ÂàôÂá∫Áé∞NullPointerException„ÄÇ Âú®HashMap‰∏≠ÔºånullÂèØ‰ª•‰Ωú‰∏∫ÈîÆÔºåËøôÊ†∑ÁöÑÈîÆÂè™Êúâ‰∏Ä‰∏™ÔºõÂèØ‰ª•Êúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÈîÆÊâÄÂØπÂ∫îÁöÑÂÄº‰∏∫null„ÄÇÂΩìget()ÊñπÊ≥ïËøîÂõûnullÂÄºÊó∂ÔºåÂç≥ÂèØ‰ª•Ë°®Á§∫ HashMap‰∏≠Ê≤°ÊúâËØ•ÈîÆÔºå‰πüÂèØ‰ª•Ë°®Á§∫ËØ•ÈîÆÊâÄÂØπÂ∫îÁöÑÂÄº‰∏∫null„ÄÇÂõ†Ê≠§ÔºåÂú®HashMap‰∏≠‰∏çËÉΩÁî±get()ÊñπÊ≥ïÊù•Âà§Êñ≠HashMap‰∏≠ÊòØÂê¶Â≠òÂú®Êüê‰∏™ÈîÆÔºåËÄåÂ∫îËØ•Áî®containsKey()ÊñπÊ≥ïÊù•Âà§Êñ≠„ÄÇ 5.ÈÅçÂéÜÊñπÂºè Hashtable„ÄÅHashMapÈÉΩ‰ΩøÁî®‰∫Ü Iterator„ÄÇËÄåÁî±‰∫éÂéÜÂè≤ÂéüÂõ†ÔºåHashtableÂèØ‰ª•‰ΩøÁî®EnumerationÁöÑÊñπÂºè„ÄÇ 6.ÂÆπÈáè HashtableÂíåHashMapÂÆÉ‰ª¨‰∏§‰∏™ÂÜÖÈÉ®ÂÆûÁé∞ÊñπÂºèÁöÑÊï∞ÁªÑÁöÑÂàùÂßãÂ§ßÂ∞èÂíåÊâ©ÂÆπÁöÑÊñπÂºè„ÄÇ HashTable‰∏≠hashÊï∞ÁªÑÈªòËÆ§Â§ßÂ∞èÊòØ11ÔºåÂ¢ûÂä†ÁöÑÊñπÂºèÊòØ old*2+1„ÄÇ HashMap‰∏≠hashÊï∞ÁªÑÁöÑÈªòËÆ§Â§ßÂ∞èÊòØ16ÔºåËÄå‰∏î‰∏ÄÂÆöÊòØ2ÁöÑÊåáÊï∞„ÄÇ ÂÖ´„ÄÅÊÄªÁªì Êó†ËÆ∫‰ªÄ‰πàÊó∂ÂÄôÊúâÂ§ö‰∏™Á∫øÁ®ãËÆøÈóÆÁõ∏ÂêåÂÆû‰æãÁöÑÂèØËÉΩÊó∂ÔºåÂ∞±Â∫îËØ•‰ΩøÁî®HashtableÔºåÂèç‰πã‰ΩøÁî®HashMap„ÄÇÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊï∞ÊçÆÁªìÊûÑËÉΩÂ∏¶Êù•Êõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇ Â¶ÇÊûúÂú®Â∞ÜÊù•Êúâ‰∏ÄÁßçÂèØËÉΩ‚Äî‰Ω†ÈúÄË¶ÅÊåâÈ°∫Â∫èËé∑ÂæóÈîÆÂÄºÂØπÁöÑÊñπÊ°àÊó∂ÔºåHashMapÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈÄâÊã©ÔºåÂõ†‰∏∫ÊúâHashMapÁöÑ‰∏Ä‰∏™Â≠êÁ±ª LinkedHashMap„ÄÇ ÊâÄ‰ª•Â¶ÇÊûú‰Ω†ÊÉ≥ÂèØÈ¢ÑÊµãÁöÑÊåâÈ°∫Â∫èËø≠‰ª£ÔºàÈªòËÆ§ÊåâÊèíÂÖ•ÁöÑÈ°∫Â∫èÔºâÔºå‰Ω†ÂèØ‰ª•ÂæàÊñπ‰æøÁî®LinkedHashMapÊõøÊç¢HashMap„ÄÇÂèçËßÇË¶ÅÊòØ‰ΩøÁî®ÁöÑHashtableÂ∞±Ê≤°ÈÇ£‰πàÁÆÄÂçï‰∫Ü„ÄÇ Â¶ÇÊûúÊúâÂ§ö‰∏™Á∫øÁ®ãËÆøÈóÆHashMapÔºåCollections.synchronizedMapÔºàÔºâÂèØ‰ª•‰ª£ÊõøÔºåÊÄªÁöÑÊù•ËØ¥HashMapÊõ¥ÁÅµÊ¥ªÔºåÊàñËÄÖÁõ¥Êé•Áî®Âπ∂ÂèëÂÆπÂô®ConcurrentHashMap„ÄÇ Êï¥ÁêÜËá™Ôºö http://blog.csdn.net/panweiwei1994/article/details/77428710 http://blog.csdn.net/u013124587/article/details/52655042]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapÂíåLinkedHashMapÈÅçÂéÜÊú∫Âà∂]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F8.HashMap%E5%92%8CLinkedHashMap%E9%81%8D%E5%8E%86%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[Êú¨ÁØáÂçïÁã¨ËÆ≤‰∏Ä‰∏ãHashMapÂíåLinkedHashMapÈÅçÂéÜÊñπÂºè„ÄÇ ‰∏Ä„ÄÅÂØπHashMapÂíåLinkedHashMapÈÅçÂéÜÁöÑÂá†ÁßçÊñπÊ≥ï ËøôÈáå‰ª•HashMap‰∏∫‰æãÔºåLinkedHashMap‰∏ÄÊ†∑ÁöÑÊñπÂºè„ÄÇ 12345Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; entryIterator = map.entrySet().iterator();while (entryIterator.hasNext()) &#123; Map.Entry&lt;String, Integer&gt; next = entryIterator.next(); System.out.println("key=" + next.getKey() + " value=" + next.getValue());&#125; 123456Iterator&lt;String&gt; iterator = map.keySet().iterator();while (iterator.hasNext())&#123; String key = iterator.next(); System.out.println("key=" + key + " value=" + map.get(key));&#125; 123map.forEach((key,value)-&gt;&#123; System.out.println("key=" + key + " value=" + value);&#125;); Âº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî®Á¨¨‰∏ÄÁßç EntrySet ËøõË°åÈÅçÂéÜ„ÄÇ Á¨¨‰∏ÄÁßçÂèØ‰ª•Êää key value ÂêåÊó∂ÂèñÂá∫ÔºåÁ¨¨‰∫åÁßçËøòÂæóÈúÄË¶ÅÈÄöËøá key Âèñ‰∏ÄÊ¨° valueÔºåÊïàÁéáËæÉ‰Ωé, Á¨¨‰∏âÁßçÈúÄË¶Å JDK1.8 ‰ª•‰∏äÔºåÈÄöËøáÂ§ñÂ±ÇÈÅçÂéÜ tableÔºåÂÜÖÂ±ÇÈÅçÂéÜÈìæË°®ÊàñÁ∫¢ÈªëÊ†ë„ÄÇ Êàë‰ª¨Áü•ÈÅìÔºåHashMapÁöÑËæìÂá∫È°∫Â∫è‰∏éÂÖÉÁ¥†ÁöÑËæìÂÖ•È°∫Â∫èÊó†ÂÖ≥ÔºåLinkedHashMapÂèØ‰ª•ÊåâÁÖßËæìÂÖ•È°∫Â∫èËæìÂá∫Ôºå‰πüÂèØ‰ª•Ê†πÊçÆËØªÂèñÂÖÉÁ¥†ÁöÑÈ°∫Â∫èËæìÂá∫„ÄÇËøô‰∏ÄÁé∞Ë±°ÔºåÂ∑≤ÁªèÂú®‰∏ä‰∏ÄÁØá‰∏≠Â±ïÁ§∫Âá∫Êù•‰∫Ü„ÄÇ ‰∫å„ÄÅHashMapÁöÑÈÅçÂéÜÊú∫Âà∂ HashMap Êèê‰æõ‰∫Ü‰∏§‰∏™ÈÅçÂéÜËÆøÈóÆÂÖ∂ÂÜÖÈÉ®ÂÖÉÁ¥†Entry&lt;k,v&gt;ÁöÑÊé•Âè£Ôºö Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()-------&gt;ËøîÂõûÊ≠§Êò†Â∞ÑÊâÄÂåÖÂê´ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÁöÑ Set ËßÜÂõæ„ÄÇ Set&lt;K&gt; keySet()--------&gt;ËøîÂõûÊ≠§Êò†Â∞Ñ‰∏≠ÊâÄÂåÖÂê´ÁöÑÈîÆÁöÑ Set ËßÜÂõæ„ÄÇ ÂÆûÈôÖ‰∏äÔºåÁ¨¨‰∫å‰∏™Êé•Âè£Ë°®Á§∫ÁöÑKeyÁöÑÈ°∫Â∫èÔºåÂíåÁ¨¨‰∏Ä‰∏™Êé•Âè£ËøîÂõûÁöÑEntryÈ°∫Â∫èÊòØÂØπÂ∫îÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºöËøô‰∏§ÁßçÊé•Âè£ÂØπHashMapÁöÑÂÖÉÁ¥†ÈÅçÂéÜÁöÑÈ°∫Â∫èÁõ∏Áõ∏ÂêåÁöÑ„ÄÇ ÈÇ£‰πàÔºåHashMapÈÅçÂéÜÂÜÖÈÉ®Entry&lt;K,V&gt; ÁöÑÈ°∫Â∫èÊòØ‰ªÄ‰πàÂë¢Ôºü ÊêûÊ∏ÖÊ•öËøô‰∏™ÈóÆÈ¢òÔºåÂÖàË¶ÅÁü•ÈÅìÂÖ∂ÂÜÖÈÉ®ÁªìÊûÑÊòØÊÄéÊ†∑ÁöÑ„ÄÇ HashMapÂú®Â≠òÂÇ®EntryÂØπË±°ÁöÑÊó∂ÂÄôÔºåÊòØÊ†πÊçÆKeyÁöÑhashÂÄºÂà§ÂÆöÂ≠òÂÇ®Âà∞Entry[] tableÊï∞ÁªÑÁöÑÂì™‰∏Ä‰∏™Á¥¢ÂºïÂÄºË°®Á§∫ÁöÑÈìæË°®‰∏ä„ÄÇ ÂØπHashMapÈÅçÂéÜEntryÂØπË±°ÁöÑÈ°∫Â∫èÂíåEntryÂØπË±°ÁöÑÂ≠òÂÇ®È°∫Â∫è‰πãÈó¥Ê≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ª„ÄÇ HashMapÊï£ÂàóÂõæ„ÄÅHashtableÊï£ÂàóË°®ÊòØÊåâ‚ÄúÊúâÂà©‰∫éÈöèÊú∫Êü•ÊâæÁöÑÊï£Âàó(hash)ÁöÑÈ°∫Â∫è‚Äù„ÄÇÂπ∂ÈùûÊåâËæìÂÖ•È°∫Â∫è„ÄÇÈÅçÂéÜÊó∂Âè™ËÉΩÂÖ®ÈÉ®ËæìÂá∫ÔºåËÄåÊ≤°ÊúâÈ°∫Â∫è„ÄÇÁîöËá≥ÂèØ‰ª•rehash()ÈáçÊñ∞Êï£ÂàóÔºåÊù•Ëé∑ÂæóÊõ¥Âà©‰∫éÈöèÊú∫Â≠òÂèñÁöÑÂÜÖÈÉ®È°∫Â∫è„ÄÇ ÊâÄ‰ª•ÂØπHashMapÁöÑÈÅçÂéÜÔºåÁî±ÂÜÖÈÉ®ÁöÑÊú∫Âà∂ÂÜ≥ÂÆöÁöÑÔºåËøô‰∏™Êú∫Âà∂ÊòØÂè™ËÄÉËôëÂà©‰∫éÂø´ÈÄüÂ≠òÂèñÔºå‰∏çËÄÉËôëËæìÂÖ•Á≠âÈ°∫Â∫è„ÄÇ ‰∏â„ÄÅLinkedHashMap ÁöÑÈÅçÂéÜÊú∫Âà∂ LinkedHashMap ÊòØHashMapÁöÑÂ≠êÁ±ªÔºåÂÆÉÂèØ‰ª•ÂÆûÁé∞ÂØπÂÆπÂô®ÂÜÖEntryÁöÑÂ≠òÂÇ®È°∫Â∫èÂíåÂØπEntryÁöÑÈÅçÂéÜÈ°∫Â∫è‰øùÊåÅ‰∏ÄËá¥„ÄÇ ‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩÔºåLinkedHashMapÂÜÖÈÉ®‰ΩøÁî®‰∫Ü‰∏Ä‰∏™EntryÁ±ªÂûãÁöÑÂèåÂêëÈìæË°®ÔºåÁî®Ëøô‰∏™ÂèåÂêëÈìæË°®ËÆ∞ÂΩïEntryÁöÑÂ≠òÂÇ®È°∫Â∫è„ÄÇÂΩìÈúÄË¶ÅÂØπËØ•MapËøõË°åÈÅçÂéÜÁöÑÊó∂ÂÄôÔºåÂÆûÈôÖ‰∏äÊòØÈÅçÂéÜÁöÑÊòØËøô‰∏™ÂèåÂêëÈìæË°®„ÄÇ LinkedHashMapÂÜÖÈÉ®‰ΩøÁî®ÁöÑLinkedHashMap.EntryÁ±ªÁªßÊâøËá™Map.EntryÁ±ªÔºåÂú®ÂÖ∂Âü∫Á°Ä‰∏äÂ¢ûÂä†‰∫ÜLinkedHashMap.EntryÁ±ªÂûãÁöÑ‰∏§‰∏™Â≠óÊÆµÔºåÁî®Êù•ÂºïÁî®ËØ•EntryÂú®ÂèåÂêëÈìæË°®‰∏≠ÁöÑÂâçÈù¢ÁöÑEntryÂØπË±°ÂíåÂêéÈù¢ÁöÑEntryÂØπË±°„ÄÇ ÂÆÉÁöÑÂÜÖÈÉ®‰ºöÂú®Map.EntryÁ±ªÁöÑÂü∫Á°Ä‰∏äÔºåÂ¢ûÂä†‰∏§‰∏™EntryÁ±ªÂûãÁöÑÂºïÁî®ÔºöbeforeÔºåafter„ÄÇLinkedHashMap‰ΩøÁî®‰∏Ä‰∏™ÂèåÂêëËøûË°®ÔºåÂ∞ÜÂÖ∂ÂÜÖÈÉ®ÊâÄÊúâÁöÑEntry‰∏≤Ëµ∑Êù•„ÄÇ 1234LinkedHashMap linkedHashMap = new LinkedHashMap(); linkedHashMap.put("name","louis"); linkedHashMap.put("age","24"); linkedHashMap.put("sex","male"); ÂØπLinkedHashMapËøõË°åÈÅçÂéÜÁöÑÁ≠ñÁï•Ôºö ‰ªé header.after ÊåáÂêëÁöÑEntryÂØπË±°ÂºÄÂßãÔºåÁÑ∂Âêé‰∏ÄÁõ¥Ê≤øÁùÄÊ≠§ÈìæË°®ÈÅçÂéÜ‰∏ãÂéªÔºåÁõ¥Âà∞Êüê‰∏™entry.after == header ‰∏∫Ê≠¢ÔºåÂÆåÊàêÈÅçÂéÜ„ÄÇ Ê†πÊçÆEntry&lt;K,V&gt;ÊèíÂÖ•LinkedHashMapÁöÑÈ°∫Â∫èËøõË°åÈÅçÂéÜÁöÑÊñπÂºèÂè´ÂÅöÔºöÊåâÊèíÂÖ•È°∫Â∫èÈÅçÂéÜ„ÄÇ Âè¶Â§ñÔºåLinkedHashMapËøòÊîØÊåÅ‰∏ÄÁßçÈÅçÂéÜÈ°∫Â∫èÔºåÂè´ÂÅöÔºöGetËØªÂèñÈ°∫Â∫è„ÄÇ Â¶ÇÊûúLinkedHashMapÁöÑËøô‰∏™GetËØªÂèñÈÅçÂéÜÈ°∫Â∫èÂºÄÂêØÔºåÈÇ£‰πàÔºåÂΩìÊàë‰ª¨Âú®LinkedHashMap‰∏äË∞ÉÁî®get(key) ÊñπÊ≥ïÊó∂Ôºå‰ºöÂØºËá¥ÂÜÖÈÉ®keyÂØπÂ∫îÁöÑEntryÂú®ÂèåÂêëÈìæË°®‰∏≠ÁöÑ‰ΩçÁΩÆÁßªÂä®Âà∞ÂèåÂêëÈìæË°®ÁöÑÊúÄÂêé„ÄÇ Âõõ„ÄÅÈÅçÂéÜÊú∫Âà∂ÁöÑÊÄªÁªì HashMapÂØπÂÖÉÁ¥†ÁöÑÈÅçÂéÜÈ°∫Â∫èË∑üEntryÊèíÂÖ•ÁöÑÈ°∫Â∫èÊó†ÂÖ≥ÔºåËÄåLinkedHashMapÂØπÂÖÉÁ¥†ÁöÑÈÅçÂéÜÈ°∫Â∫èÂèØ‰ª•Ë∑üEntry&lt;K,V&gt;ÊèíÂÖ•ÁöÑÈ°∫Â∫è‰øùÊåÅ‰∏ÄËá¥Ôºö‰ªéÂèåÂêë„ÄÇ ÂΩìLinkedHashMapÂ§Ñ‰∫éGetËé∑ÂèñÈ°∫Â∫èÈÅçÂéÜÊ®°Âºè‰∏ãÔºåÂΩìÊâßË°åget() Êìç‰ΩúÊó∂Ôºå‰ºöÂ∞ÜÂØπÂ∫îÁöÑEntry&lt;k,v&gt;ÁßªÂà∞ÈÅçÂéÜÁöÑÊúÄÂêé‰ΩçÁΩÆ„ÄÇ LinkedHashMapÂ§Ñ‰∫éÊåâÊèíÂÖ•È°∫Â∫èÈÅçÂéÜÁöÑÊ®°Âºè‰∏ãÔºåÂ¶ÇÊûúÊñ∞ÊèíÂÖ•ÁöÑ&lt;key,value&gt; ÂØπÂ∫îÁöÑkeyÂ∑≤ÁªèÂ≠òÂú®ÔºåÂØπÂ∫îÁöÑEntryÂú®ÈÅçÂéÜÈ°∫Â∫è‰∏≠ÁöÑ‰ΩçÁΩÆÂπ∂‰∏ç‰ºöÊîπÂèò„ÄÇ Èô§‰∫ÜÈÅçÂéÜÈ°∫Â∫èÂ§ñÔºåÂÖ∂‰ªñÁâπÊÄßHashMapÂíåLinkedHashMapÂü∫Êú¨Áõ∏Âêå„ÄÇ]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedHashMap]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F7.LinkedHashMap%2F</url>
    <content type="text"><![CDATA[Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÂè™Ë¶Å‰∏çÊ∂âÂèäÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºå Map Âü∫Êú¨ÈÉΩÂèØ‰ª•‰ΩøÁî® HashMap Ôºå‰∏çËøá HashMap Êúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØËø≠‰ª£ HashMap ÁöÑÈ°∫Â∫èÂπ∂‰∏çÊòØ HashMap ÊîæÁΩÆÁöÑÈ°∫Â∫èÔºå‰πüÂ∞±ÊòØÊó†Â∫è„ÄÇ HashMap ÁöÑËøô‰∏ÄÁº∫ÁÇπÂæÄÂæÄ‰ºöÂ∏¶Êù•Âõ∞Êâ∞ÔºåÂõ†‰∏∫Êúâ‰∫õÂú∫ÊôØÔºåÊàë‰ª¨ÊúüÂæÖ‰∏Ä‰∏™ÊúâÂ∫èÁöÑ Map„ÄÇ ÁØáÂπÖÊúâÁÇπÈïøÔºå‰ΩÜÊòØÂú®ÁêÜËß£‰∫ÜHashMap‰πãÂêéÂ∞±ÊØîËæÉÁÆÄÂçï‰∫Ü„ÄÇ Ëøô‰∏™Êó∂ÂÄôÔºåLinkedHashMapÂ∞±Èó™‰∫ÆÁôªÂú∫‰∫ÜÔºåÂÆÉËôΩÁÑ∂Â¢ûÂä†‰∫ÜÊó∂Èó¥ÂíåÁ©∫Èó¥‰∏äÁöÑÂºÄÈîÄÔºå‰ΩÜÊòØÂèØ‰ª•Ëß£ÂÜ≥ÊúâÊéíÂ∫èÈúÄÊ±ÇÁöÑÂú∫ÊôØ„ÄÇ ÂÆÉÁöÑÂ∫ïÂ±ÇÊòØÁªßÊâø‰∫é HashMap ÂÆûÁé∞ÁöÑÔºåÁî±‰∏Ä‰∏™ÂèåÂêëÂæ™ÁéØÈìæË°®ÊâÄÊûÑÊàê„ÄÇ LinkedHashMap ÁöÑÊéíÂ∫èÊñπÂºèÊúâ‰∏§ÁßçÔºö Ê†πÊçÆÂÜôÂÖ•È°∫Â∫èÊéíÂ∫è„ÄÇ Ê†πÊçÆËÆøÈóÆÈ°∫Â∫èÊéíÂ∫è„ÄÇ ÂÖ∂‰∏≠Ê†πÊçÆËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÊó∂ÔºåÊØèÊ¨° get ÈÉΩ‰ºöÂ∞ÜËÆøÈóÆÁöÑÂÄºÁßªÂä®Âà∞ÈìæË°®Êú´Â∞æÔºåËøôÊ†∑ÈáçÂ§çÊìç‰ΩúÂ∞±ËÉΩÂæóÂà∞‰∏Ä‰∏™ÊåâÁÖßËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÁöÑÈìæË°®„ÄÇ ‰∏Ä„ÄÅLinkedHashMapÊï∞ÊçÆÁªìÊûÑ LinkedHashMapÊòØÈÄöËøáÂìàÂ∏åË°®ÂíåÂèåÂêëÂæ™ÁéØÈìæË°®ÂÆûÁé∞ÁöÑÔºåÂÆÉÈÄöËøáÁª¥Êä§‰∏Ä‰∏™ÂèåÂêëÂæ™ÁéØÈìæË°®Êù•‰øùËØÅÂØπÂìàÂ∏åË°®Ëø≠‰ª£Êó∂ÁöÑÊúâÂ∫èÊÄßÔºåËÄåËøô‰∏™ÊúâÂ∫èÊòØÊåáÈîÆÂÄºÂØπÊèíÂÖ•ÁöÑÈ°∫Â∫è„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÈÅçÂéÜÊâÄÊúâÂÖÉÁ¥†Âè™ÈúÄË¶Å‰ªéheaderÂºÄÂßãÈÅçÂéÜÂç≥ÂèØÔºå‰∏ÄÁõ¥ÈÅçÂéÜÂà∞‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØheaderÁªìÊùü„ÄÇ Âè¶Â§ñÔºåÂΩìÂêëÂìàÂ∏åË°®‰∏≠ÈáçÂ§çÊèíÂÖ•Êüê‰∏™ÈîÆÁöÑÊó∂ÂÄôÔºå‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂéüÊù•ÁöÑÊúâÂ∫èÊÄß„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂÅáËÆæ‰Ω†ÊèíÂÖ•ÁöÑÈîÆÁöÑÈ°∫Â∫è‰∏∫1„ÄÅ2„ÄÅ3„ÄÅ4ÔºåÂêéÊù•ÂÜçÊ¨°ÊèíÂÖ•2ÔºåËø≠‰ª£Êó∂ÁöÑÈ°∫Â∫èËøòÊòØ1„ÄÅ2„ÄÅ3„ÄÅ4ÔºåËÄå‰∏ç‰ºöÂõ†‰∏∫ÂêéÊù•ÊèíÂÖ•ÁöÑ2ÂèòÊàê1„ÄÅ3„ÄÅ4„ÄÅ2„ÄÇÔºà‰ΩÜÂÖ∂ÂÆûÊàë‰ª¨ÂèØ‰ª•ÊîπÂèòÂÆÉÁöÑËßÑÂàôÔºå‰ΩøÂÆÉÂèòÊàê1„ÄÅ3„ÄÅ4„ÄÅ2Ôºâ LinkedHashMapÁöÑÂÆûÁé∞‰∏ªË¶ÅÂàÜ‰∏§ÈÉ®ÂàÜÔºå‰∏ÄÈÉ®ÂàÜÊòØÂìàÂ∏åË°®ÔºåÂè¶Â§ñ‰∏ÄÈÉ®ÂàÜÊòØÈìæË°®„ÄÇÂìàÂ∏åË°®ÈÉ®ÂàÜÁªßÊâø‰∫ÜHashMapÔºåÊã•Êúâ‰∫ÜHashMapÈÇ£‰∏ÄÂ•óÈ´òÊïàÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•Êàë‰ª¨Ë¶ÅÁúãÁöÑÂ∞±ÊòØLinkedHashMap‰∏≠ÈìæË°®ÁöÑÈÉ®ÂàÜÔºå‰∫ÜËß£ÂÆÉÊòØÂ¶Ç‰ΩïÊù•Áª¥Êä§ÊúâÂ∫èÊÄßÁöÑ„ÄÇ ‰∫å„ÄÅdemoÁ§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869public static void main(String[] args) &#123; /** * HashMapÊèíÂÖ•Êï∞ÊçÆÔºåÈÅçÂéÜËæìÂá∫Êó†Â∫è */ System.out.println("----------HashMapÊèíÂÖ•Êï∞ÊçÆ--------"); Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); map.put("apple", "a"); map.put("watermelon", "b"); map.put("banana", "c"); map.put("peach", "d"); Iterator iter = map.entrySet().iterator(); while (iter.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter.next(); System.out.println(entry.getKey() + "=" + entry.getValue()); &#125; /** * LinkedHashMapÊèíÂÖ•Êï∞ÊçÆÔºåÈÅçÂéÜÔºåÈªòËÆ§‰ª•ÊèíÂÖ•È°∫Â∫è‰∏∫Â∫è */ System.out.println("----------LinkedHashMapÊèíÂÖ•Êï∞ÊçÆ,ÊåâÁÖßÊèíÂÖ•È°∫Â∫èËøõË°åÊéíÂ∫è--------"); Map&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;(); linkedHashMap.put("apple", "a"); linkedHashMap.put("watermelon", "b"); linkedHashMap.put("banana", "c"); linkedHashMap.put("peach", "d"); Iterator&lt;Map.Entry&lt;String, String&gt;&gt; iterator = linkedHashMap.entrySet().iterator(); while (iterator.hasNext()) &#123; System.out.println(iterator.next()); &#125; /** * LinkedHashMapÊèíÂÖ•Êï∞ÊçÆÔºåËÆæÁΩÆaccessOrder=trueÂÆûÁé∞‰ΩøÂæóÂÖ∂ÈÅçÂéÜÈ°∫Â∫èÊåâÁÖßËÆøÈóÆÁöÑÈ°∫Â∫èËæìÂá∫ÔºåËøôÈáåÂÖàÁî®getÊñπÊ≥ïÊù•ÊºîÁ§∫ */ System.out.println("----------LinkedHashMapÊèíÂÖ•Êï∞ÊçÆ,accessOrder=true:ÊåâÁÖßËÆøÈóÆÈ°∫Â∫èËøõË°åÊéíÂ∫è--------"); Map&lt;String, String&gt; linkedHashMap2 = new LinkedHashMap&lt;String, String&gt;(16,0.75f,true); linkedHashMap2.put("apple", "aa"); linkedHashMap2.put("watermelon", "bb"); linkedHashMap2.put("banana", "cc"); linkedHashMap2.put("peach", "dd"); linkedHashMap2.get("banana");//bananaÁßªÂä®Âà∞‰∫ÜÂÜÖÈÉ®ÁöÑÈìæË°®Êú´Â∞æ linkedHashMap2.get("apple");//appleÁßªÂä®Âà∞‰∫ÜÂÜÖÈÉ®ÁöÑÈìæË°®Êú´Â∞æ Iterator iter2 = linkedHashMap2.entrySet().iterator(); while (iter2.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter2.next(); System.out.println(entry.getKey() + "=" + entry.getValue()); &#125; /** * LinkedHashMapÁöÑputÊñπÊ≥ïÂú®accessOrder=trueÁöÑÊÉÖÂÜµ‰∏ã */ System.out.println("-----------"); linkedHashMap2.put("watermelon", "bb");//watermelonÁßªÂä®Âà∞‰∫ÜÂÜÖÈÉ®ÁöÑÈìæË°®Êú´Â∞æ linkedHashMap2.put("stawbarrey", "ee");//Êú´Â∞æÊèíÂÖ•Êñ∞ÂÖÉÁ¥†stawbarrey linkedHashMap2.put(null, null);//ÊèíÂÖ•Êñ∞ÁöÑËäÇÁÇπ null Iterator iter3 = linkedHashMap2.entrySet().iterator(); while (iter3.hasNext()) &#123; Map.Entry entry = (Map.Entry) iter3.next(); System.out.println(entry.getKey() + "=" + entry.getValue()); &#125; &#125; ËæìÂá∫ÁªìÊûúÊòØ: 12345678910111213141516171819202122----------HashMapÊèíÂÖ•Êï∞ÊçÆ--------banana=capple=apeach=dwatermelon=b----------LinkedHashMapÊèíÂÖ•Êï∞ÊçÆ,ÊåâÁÖßÊèíÂÖ•È°∫Â∫èËøõË°åÊéíÂ∫è--------apple=awatermelon=bbanana=cpeach=d----------LinkedHashMapÊèíÂÖ•Êï∞ÊçÆ,ÊåâÁÖßËÆøÈóÆÈ°∫Â∫èËøõË°åÊéíÂ∫è--------watermelon=bbpeach=ddbanana=cc//bananaÂà∞‰∫ÜÊú´Â∞æapple=aa//appleÂà∞‰∫ÜÊú´Â∞æ-----------peach=ddbanana=ccapple=aawatermelon=bb//watermelonÂà∞‰∫ÜÈìæË°®Êú´Â∞æstawbarrey=ee//Êñ∞ÊèíÂÖ•ÁöÑÊîæÂú®Êú´Â∞ænull=null//Êñ∞ÊèíÂÖ•ÁöÑÊîæÂú®Êú´Â∞æ ‰∏â„ÄÅÂ±ûÊÄß LinkedHashMapÂèØ‰ª•ËÆ§‰∏∫ÊòØHashMap+LinkedListÔºåÂç≥ÂÆÉÊó¢‰ΩøÁî®HashMapÊìç‰ΩúÊï∞ÊçÆÁªìÊûÑÔºåÂèà‰ΩøÁî®LinkedListÁª¥Êä§ÊèíÂÖ•ÂÖÉÁ¥†ÁöÑÂÖàÂêéÈ°∫Â∫è 3.1 ÁªßÊâøÂÖ≥Á≥ª 123public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; LinkedHashMapÊòØHashMapÁöÑÂ≠êÁ±ªÔºåËá™ÁÑ∂LinkedHashMap‰πüÂ∞±ÁªßÊâø‰∫ÜHashMap‰∏≠ÊâÄÊúâÈùûprivateÁöÑÊñπÊ≥ï„ÄÇÊâÄ‰ª•ÂÆÉÂ∑≤Áªè‰ªé HashMap ÈÇ£ÈáåÁªßÊâø‰∫Ü‰∏éÂìàÂ∏åË°®Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú‰∫ÜÔºåÈÇ£‰πàÂú®LinkedHashMap‰∏≠ÔºåÂÆÉÂèØ‰ª•‰∏ìÊ≥®‰∫éÈìæË°®ÂÆûÁé∞ÁöÑÈÇ£ÈÉ®ÂàÜÔºåÊâÄ‰ª•‰∏éÈìæË°®ÂÆûÁé∞Áõ∏ÂÖ≥ÁöÑÂ±ûÊÄßÂ¶Ç‰∏ã„ÄÇ 3.2 Â±ûÊÄß‰ªãÁªç 1234567891011121314151617//LinkedHashMapÁöÑÈìæË°®ËäÇÁÇπÁªßÊâø‰∫ÜHashMapÁöÑËäÇÁÇπÔºåËÄå‰∏îÊØè‰∏™ËäÇÁÇπÈÉΩÂåÖÂê´‰∫ÜÂâçÊåáÈíàÂíåÂêéÊåáÈíàÔºåÊâÄ‰ª•ËøôÈáåÂèØ‰ª•ÁúãÂá∫ÂÆÉÊòØ‰∏Ä‰∏™ÂèåÂêëÈìæË°®static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123; Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; super(hash, key, value, next); &#125;&#125;//Â§¥ÊåáÈíàtransient LinkedHashMap.Entry&lt;K,V&gt; head;//Â∞æÊåáÈíàtransient LinkedHashMap.Entry&lt;K,V&gt; tail;//ÈªòËÆ§‰∏∫false„ÄÇÂΩì‰∏∫trueÊó∂ÔºåË°®Á§∫ÈìæË°®‰∏≠ÈîÆÂÄºÂØπÁöÑÈ°∫Â∫è‰∏éÊØè‰∏™ÈîÆÁöÑÊèíÂÖ•È°∫Â∫è‰∏ÄËá¥Ôºå‰πüÂ∞±ÊòØËØ¥ÈáçÂ§çÊèíÂÖ•ÈîÆÔºå‰πü‰ºöÊõ¥Êñ∞È°∫Â∫è//ÁÆÄÂçïÊù•ËØ¥Ôºå‰∏∫falseÊó∂ÔºåÂ∞±ÊòØ‰∏äÈù¢ÊâÄÊåáÁöÑ1„ÄÅ2„ÄÅ3„ÄÅ4ÁöÑÊÉÖÂÜµÔºõ‰∏∫trueÊó∂ÔºåÂ∞±ÊòØ1„ÄÅ3„ÄÅ4„ÄÅ2ÁöÑÊÉÖÂÜµfinal boolean accessOrder; ‰∫î„ÄÅÊûÑÈÄ†ÊñπÊ≥ï 1234public LinkedHashMap() &#123; super(); accessOrder = false;&#125; ÂÖ∂ÂÆûÂ∞±ÊòØË∞ÉÁî®ÁöÑ HashMap ÁöÑÊûÑÈÄ†ÊñπÊ≥ï: HashMap ÂÆûÁé∞Ôºö 123456789101112131415public HashMap(int initialCapacity, float loadFactor) &#123; if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); this.loadFactor = loadFactor; threshold = initialCapacity; //HashMap Âè™ÊòØÂÆö‰πâ‰∫ÜÊîπÊñπÊ≥ïÔºåÂÖ∑‰ΩìÂÆûÁé∞‰∫§Áªô‰∫Ü LinkedHashMap init();&#125; ÂèØ‰ª•ÁúãÂà∞ÈáåÈù¢Êúâ‰∏Ä‰∏™Á©∫ÁöÑ init()ÔºåÂÖ∑‰ΩìÊòØÁî± LinkedHashMap Êù•ÂÆûÁé∞ÁöÑÔºö 12345@Overridevoid init() &#123; header = new Entry&lt;&gt;(-1, null, null, null); header.before = header.after = header;&#125; ÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂØπ header ËøõË°å‰∫ÜÂàùÂßãÂåñ„ÄÇ ÂÖ≠„ÄÅÊ∑ªÂä†ÂÖÉÁ¥† LinkedHashMapÂπ∂Ê≤°ÊúâÈáçÂÜô‰ªª‰ΩïputÊñπÊ≥ï„ÄÇ‰ΩÜÊòØÂÖ∂ÈáçÂÜô‰∫ÜÊûÑÂª∫Êñ∞ËäÇÁÇπÁöÑnewNode()ÊñπÊ≥ï. newNode() ‰ºöÂú®HashMapÁöÑputVal() ÊñπÊ≥ïÈáåË¢´Ë∞ÉÁî®ÔºåputVal() ÊñπÊ≥ï‰ºöÂú®ÊâπÈáèÊèíÂÖ•Êï∞ÊçÆputMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) ÊàñËÄÖÊèíÂÖ•Âçï‰∏™Êï∞ÊçÆpublic V put(K key, V value)Êó∂Ë¢´Ë∞ÉÁî®„ÄÇ LinkedHashMapÈáçÂÜô‰∫ÜnewNode(),Âú®ÊØèÊ¨°ÊûÑÂª∫Êñ∞ËäÇÁÇπÊó∂ÔºåÈÄöËøálinkNodeLast(p);Â∞ÜÊñ∞ËäÇÁÇπÈìæÊé•Âú®ÂÜÖÈÉ®ÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ®„ÄÇ 12345678910111213141516171819//Âú®ÊûÑÂª∫Êñ∞ËäÇÁÇπÊó∂ÔºåÊûÑÂª∫ÁöÑÊòØ`LinkedHashMap.Entry` ‰∏çÂÜçÊòØ`Node`.Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) &#123; LinkedHashMap.Entry&lt;K,V&gt; p = new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e); linkNodeLast(p); return p;&#125;//Â∞ÜÊñ∞Â¢ûÁöÑËäÇÁÇπÔºåËøûÊé•Âú®ÈìæË°®ÁöÑÂ∞æÈÉ®private void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) &#123; LinkedHashMap.Entry&lt;K,V&gt; last = tail; tail = p; //ÈõÜÂêà‰πãÂâçÊòØÁ©∫ÁöÑ if (last == null) head = p; else &#123;//Â∞ÜÊñ∞ËäÇÁÇπËøûÊé•Âú®ÈìæË°®ÁöÑÂ∞æÈÉ® p.before = last; last.after = p; &#125;&#125; ‰ª•ÂèäHashMap‰∏ìÈó®È¢ÑÁïôÁªôLinkedHashMapÁöÑafterNodeAccess() „ÄÅafterNodeInsertion() „ÄÅafterNodeRemoval() ÊñπÊ≥ï„ÄÇ 1234// Callbacks to allow LinkedHashMap post-actionsvoid afterNodeAccess(Node&lt;K,V&gt; p) &#123; &#125;void afterNodeInsertion(boolean evict) &#123; &#125;void afterNodeRemoval(Node&lt;K,V&gt; p) &#123; &#125; Â¶ÇÊûú‰Ω†Ê≤°ÊúâÊ≥®ÊÑèÂà∞Ê≥®ÈáäÁöÑËß£ÈáäÁöÑËØùÔºå‰Ω†ÂèØËÉΩ‰ºöÂæàÂ•áÊÄ™‰∏∫‰ªÄ‰πà‰ºöÊúâ‰∏â‰∏™Á©∫ÊñπÊ≥ïÔºåËÄå‰∏îÊúâ‰∏çÂ∞ëÂú∞ÊñπËøòË∞ÉÁî®ËøáÂÆÉ‰ª¨„ÄÇÂÖ∂ÂÆûËøô‰∏â‰∏™ÊñπÊ≥ïË°®Á§∫ÁöÑÊòØÂú®ËÆøÈóÆ„ÄÅÊèíÂÖ•„ÄÅÂà†Èô§Êüê‰∏™ËäÇÁÇπ‰πãÂêéÔºåËøõË°å‰∏Ä‰∫õÂ§ÑÁêÜÔºåÂÆÉ‰ª¨Âú®LinkedHashMapÊúâÂêÑËá™ÁöÑÂÆûÁé∞„ÄÇLinkedHashMapÊ≠£ÊòØÈÄöËøáÈáçÂÜôËøô‰∏â‰∏™ÊñπÊ≥ïÊù•‰øùËØÅÈìæË°®ÁöÑÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÊúâÂ∫èÊÄß„ÄÇ 123456789101112131415161718//ÂõûË∞ÉÂáΩÊï∞ÔºåÊñ∞ËäÇÁÇπÊèíÂÖ•‰πãÂêéÂõûË∞É,Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÂà†Èô§ÊúÄËÄÅÊèíÂÖ•ÁöÑËäÇÁÇπ„ÄÇ//Â¶ÇÊûúÂÆûÁé∞LruCache‰ºöÁî®Âà∞Ëøô‰∏™ÊñπÊ≥ï„ÄÇvoid afterNodeInsertion(boolean evict) &#123; // possibly remove eldest LinkedHashMap.Entry&lt;K,V&gt; first; //LinkedHashMap ÈªòËÆ§ËøîÂõûfalse Âàô‰∏çÂà†Èô§ËäÇÁÇπ if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) &#123; K key = first.key; removeNode(hash(key), key, null, false, true); &#125;&#125;//LinkedHashMap ÈªòËÆ§ËøîÂõûfalse Âàô‰∏çÂà†Èô§ËäÇÁÇπ„ÄÇ //ËøîÂõûtrue ‰ª£Ë°®Ë¶ÅÂà†Èô§ÊúÄÊó©ÁöÑËäÇÁÇπ„ÄÇ//ÈÄöÂ∏∏ÊûÑÂª∫‰∏Ä‰∏™LruCache‰ºöÂú®ËææÂà∞CacheÁöÑ‰∏äÈôêÊòØËøîÂõûtrueprotected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123; return false;&#125; void afterNodeInsertion(boolean evict)‰ª•Âèäboolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) ÊòØÊûÑÂª∫LruCacheÈúÄË¶ÅÁöÑÂõûË∞ÉÔºåÂú®ËøôÂèØ‰ª•ÂøΩÁï•ÂÆÉ‰ª¨„ÄÇ ‰∏É„ÄÅÂà†Èô§ÂÖÉÁ¥† LinkedHashMap‰πüÊ≤°ÊúâÈáçÂÜôremove() ÊñπÊ≥ïÔºåÂõ†‰∏∫ÂÆÉÁöÑÂà†Èô§ÈÄªËæëÂíåHashMapÂπ∂Êó†Âå∫Âà´„ÄÇ ‰ΩÜÂÆÉÈáçÂÜô‰∫ÜafterNodeRemoval() Ëøô‰∏™ÂõûË∞ÉÊñπÊ≥ï„ÄÇËØ•ÊñπÊ≥ï‰ºöÂú®Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) ÊñπÊ≥ï‰∏≠ÂõûË∞ÉÔºåremoveNode() ‰ºöÂú®ÊâÄÊúâÊ∂âÂèäÂà∞Âà†Èô§ËäÇÁÇπÁöÑÊñπÊ≥ï‰∏≠Ë¢´Ë∞ÉÁî®Ôºå‰∏äÊñáÂàÜÊûêËøáÔºåÊòØÂà†Èô§ËäÇÁÇπÊìç‰ΩúÁöÑÁúüÊ≠£ÊâßË°åËÄÖ„ÄÇ 1234567891011121314151617//Âú®Âà†Èô§ËäÇÁÇπeÊó∂ÔºåÂêåÊ≠•Â∞Üe‰ªéÂèåÂêëÈìæË°®‰∏äÂà†Èô§void afterNodeRemoval(Node&lt;K,V&gt; e) &#123; // unlink LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; //ÂæÖÂà†Èô§ËäÇÁÇπ p ÁöÑÂâçÁΩÆÂêéÁΩÆËäÇÁÇπÈÉΩÁΩÆÁ©∫ p.before = p.after = null; //Â¶ÇÊûúÂâçÁΩÆËäÇÁÇπÊòØnullÔºåÂàôÁé∞Âú®ÁöÑÂ§¥ÁªìÁÇπÂ∫îËØ•ÊòØÂêéÁΩÆËäÇÁÇπa if (b == null) head = a; else//Âê¶ÂàôÂ∞ÜÂâçÁΩÆËäÇÁÇπbÁöÑÂêéÁΩÆËäÇÁÇπÊåáÂêëa b.after = a; //ÂêåÁêÜÂ¶ÇÊûúÂêéÁΩÆËäÇÁÇπÊó∂null ÔºåÂàôÂ∞æËäÇÁÇπÂ∫îÊòØb if (a == null) tail = b; else//Âê¶ÂàôÊõ¥Êñ∞ÂêéÁΩÆËäÇÁÇπaÁöÑÂâçÁΩÆËäÇÁÇπ‰∏∫b a.before = b;&#125; ÂÖ´„ÄÅÊü•ËØ¢ÂÖÉÁ¥† LinkedHashMapÈáçÂÜô‰∫Üget()ÂíågetOrDefault() ÊñπÊ≥ïÔºö 12345678910111213141516public V get(Object key) &#123; Node&lt;K,V&gt; e; if ((e = getNode(hash(key), key)) == null) return null; if (accessOrder) afterNodeAccess(e); return e.value;&#125;public V getOrDefault(Object key, V defaultValue) &#123; Node&lt;K,V&gt; e; if ((e = getNode(hash(key), key)) == null) return defaultValue; if (accessOrder) afterNodeAccess(e); return e.value;&#125; ÂØπÊØîHashMap‰∏≠ÁöÑÂÆûÁé∞,LinkedHashMapÂè™ÊòØÂ¢ûÂä†‰∫ÜÂú®ÊàêÂëòÂèòÈáè(ÊûÑÈÄ†ÂáΩÊï∞Êó∂ËµãÂÄº)accessOrder‰∏∫trueÁöÑÊÉÖÂÜµ‰∏ãÔºåË¶ÅÂéªÂõûË∞Évoid afterNodeAccess(Node&lt;K,V&gt; e) ÂáΩÊï∞„ÄÇ 1234public V get(Object key) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value;&#125; Âú®afterNodeAccess() ÂáΩÊï∞‰∏≠Ôºå‰ºöÂ∞ÜÂΩìÂâçË¢´ËÆøÈóÆÂà∞ÁöÑËäÇÁÇπeÔºåÁßªÂä®Ëá≥ÂÜÖÈÉ®ÁöÑÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ®„ÄÇ 12345678910111213141516171819202122232425262728293031void afterNodeAccess(Node&lt;K,V&gt; e) &#123; // move node to last LinkedHashMap.Entry&lt;K,V&gt; last;//ÂéüÂ∞æËäÇÁÇπ //Â¶ÇÊûúaccessOrder ÊòØtrue Ôºå‰∏îÂéüÂ∞æËäÇÁÇπ‰∏çÁ≠â‰∫ée if (accessOrder &amp;&amp; (last = tail) != e) &#123; //ËäÇÁÇπeÂº∫ËΩ¨ÊàêÂèåÂêëÈìæË°®ËäÇÁÇπp LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; //pÁé∞Âú®ÊòØÂ∞æËäÇÁÇπÔºå ÂêéÁΩÆËäÇÁÇπ‰∏ÄÂÆöÊòØnull p.after = null; //Â¶ÇÊûúpÁöÑÂâçÁΩÆËäÇÁÇπÊòØnullÔºåÂàôp‰ª•ÂâçÊòØÂ§¥ÁªìÁÇπÔºåÊâÄ‰ª•Êõ¥Êñ∞Áé∞Âú®ÁöÑÂ§¥ÁªìÁÇπÊòØpÁöÑÂêéÁΩÆËäÇÁÇπa if (b == null) head = a; else//Âê¶ÂàôÊõ¥Êñ∞pÁöÑÂâçÁõ¥Êé•ÁÇπbÁöÑÂêéÁΩÆËäÇÁÇπ‰∏∫ a b.after = a; //Â¶ÇÊûúpÁöÑÂêéÁΩÆËäÇÁÇπ‰∏çÊòØnullÔºåÂàôÊõ¥Êñ∞ÂêéÁΩÆËäÇÁÇπaÁöÑÂâçÁΩÆËäÇÁÇπ‰∏∫b if (a != null) a.before = b; else//Â¶ÇÊûúÂéüÊú¨pÁöÑÂêéÁΩÆËäÇÁÇπÊòØnullÔºåÂàôpÂ∞±ÊòØÂ∞æËäÇÁÇπ„ÄÇ Ê≠§Êó∂ Êõ¥Êñ∞lastÁöÑÂºïÁî®‰∏∫ pÁöÑÂâçÁΩÆËäÇÁÇπb last = b; if (last == null) //ÂéüÊú¨Â∞æËäÇÁÇπÊòØnull ÂàôÔºåÈìæË°®‰∏≠Â∞±‰∏Ä‰∏™ËäÇÁÇπ head = p; else &#123;//Âê¶Âàô Êõ¥Êñ∞ ÂΩìÂâçËäÇÁÇπpÁöÑÂâçÁΩÆËäÇÁÇπ‰∏∫ ÂéüÂ∞æËäÇÁÇπlastÔºå lastÁöÑÂêéÁΩÆËäÇÁÇπÊòØp p.before = last; last.after = p; &#125; //Â∞æËäÇÁÇπÁöÑÂºïÁî®ËµãÂÄºÊàêp tail = p; //‰øÆÊîπmodCount„ÄÇ ++modCount; &#125;&#125; ÂõæÁ§∫(Ê≥®ÊÑèËøô‰∏™ÂõæÔºå1Âíå6‰πüÂ∫îËØ•ÊòØËøûÂú®‰∏ÄËµ∑ÁöÑÔºåÂõ†‰∏∫ÊòØÂèåÂêëÂæ™ÁéØÈìæË°®ÔºåÊâÄ‰ª•ËßÜ‰∏∫‰∏Ä‰∏™Â∞èÈîôËØØ)Ôºö ËØ¥ÊòéÔºö‰ªéÂõæ‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÁªìÁÇπ3ÈìæÊé•Âà∞‰∫ÜÂ∞æÁªìÁÇπÂêéÈù¢„ÄÇ ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåafterNodeAccess() ÂáΩÊï∞‰∏≠Ôºå‰ºö‰øÆÊîπmodCount,Âõ†Ê≠§ÂΩì‰Ω†Ê≠£Âú®accessOrder=trueÁöÑÊ®°Âºè‰∏ã,Ëø≠‰ª£LinkedHashMapÊó∂ÔºåÂ¶ÇÊûúÂêåÊó∂Êü•ËØ¢ËÆøÈóÆÊï∞ÊçÆÔºå‰πü‰ºöÂØºËá¥fail-fastÔºåÂõ†‰∏∫Ëø≠‰ª£ÁöÑÈ°∫Â∫èÂ∑≤ÁªèÊîπÂèò„ÄÇ ‰πù„ÄÅÂà§Êñ≠ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú® ÂÆÉÈáçÂÜô‰∫ÜËØ•ÊñπÊ≥ïÔºåÁõ∏ÊØîHashMapÁöÑÂÆûÁé∞ÔºåÊõ¥‰∏∫È´òÊïà„ÄÇ 123456789public boolean containsValue(Object value) &#123; //ÈÅçÂéÜ‰∏ÄÈÅçÈìæË°®ÔºåÂéªÊØîËæÉÊúâÊ≤°ÊúâvalueÁõ∏Á≠âÁöÑËäÇÁÇπÔºåÂπ∂ËøîÂõû for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after) &#123; V v = e.value; if (v == value || (value != null &amp;&amp; value.equals(v))) return true; &#125; return false;&#125; ÂØπÊØîHashMapÔºåÊòØÁî®‰∏§‰∏™forÂæ™ÁéØÈÅçÂéÜÔºåÁõ∏ÂØπ‰ΩéÊïà„ÄÇ 12345678910111213public boolean containsValue(Object value) &#123; Node&lt;K,V&gt;[] tab; V v; if ((tab = table) != null &amp;&amp; size &gt; 0) &#123; for (int i = 0; i &lt; tab.length; ++i) &#123; for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) &#123; if ((v = e.value) == value || (value != null &amp;&amp; value.equals(v))) return true; &#125; &#125; &#125; return false;&#125; ÂçÅ„ÄÅÊõøÊç¢Êüê‰∏™ÂÖÉÁ¥† 1234567891011121314// Áî®dstÊõøÊç¢srcprivate void transferLinks(LinkedHashMap.Entry&lt;K,V&gt; src, LinkedHashMap.Entry&lt;K,V&gt; dst) &#123; LinkedHashMap.Entry&lt;K,V&gt; b = dst.before = src.before; LinkedHashMap.Entry&lt;K,V&gt; a = dst.after = src.after; if (b == null) head = dst; else b.after = dst; if (a == null) tail = dst; else a.before = dst;&#125; ÂçÅ‰∫å„ÄÅÊÄªÁªì LinkedHashMapÁõ∏ÂØπ‰∫éHashMapÁöÑÊ∫êÁ†ÅÊØîÔºåÊòØÂæàÁÆÄÂçïÁöÑ„ÄÇÂõ†‰∏∫Â§ßÊ†ëÂ∫ï‰∏ãÂ•Ω‰πòÂáâ„ÄÇÂÆÉÁªßÊâø‰∫ÜHashMapÔºå‰ªÖÈáçÂÜô‰∫ÜÂá†‰∏™ÊñπÊ≥ïÔºå‰ª•ÊîπÂèòÂÆÉËø≠‰ª£ÈÅçÂéÜÊó∂ÁöÑÈ°∫Â∫è„ÄÇËøô‰πüÊòØÂÖ∂‰∏éHashMapÁõ∏ÊØîÊúÄÂ§ßÁöÑ‰∏çÂêå„ÄÇ Âú®ÊØèÊ¨°ÊèíÂÖ•Êï∞ÊçÆÔºåÊàñËÄÖËÆøÈóÆ„ÄÅ‰øÆÊîπÊï∞ÊçÆÊó∂Ôºå‰ºöÂ¢ûÂä†ËäÇÁÇπ„ÄÅÊàñË∞ÉÊï¥ÈìæË°®ÁöÑËäÇÁÇπÈ°∫Â∫è„ÄÇ‰ª•ÂÜ≥ÂÆöËø≠‰ª£Êó∂ËæìÂá∫ÁöÑÈ°∫Â∫è„ÄÇ accessOrderÈªòËÆ§ÊòØfalseÔºåÂàôËø≠‰ª£Êó∂ËæìÂá∫ÁöÑÈ°∫Â∫èÊòØÊèíÂÖ•ËäÇÁÇπÁöÑÈ°∫Â∫è„ÄÇËã•‰∏∫trueÔºåÂàôËæìÂá∫ÁöÑÈ°∫Â∫èÊòØÊåâÁÖßËÆøÈóÆËäÇÁÇπÁöÑÈ°∫Â∫è„ÄÇ‰∏∫trueÊó∂ÔºåÂèØ‰ª•Âú®ËøôÂü∫Á°Ä‰πã‰∏äÊûÑÂª∫‰∏Ä‰∏™LruCache. LinkedHashMapÂπ∂Ê≤°ÊúâÈáçÂÜô‰ªª‰ΩïputÊñπÊ≥ï„ÄÇ‰ΩÜÊòØÂÖ∂ÈáçÂÜô‰∫ÜÊûÑÂª∫Êñ∞ËäÇÁÇπÁöÑnewNode()ÊñπÊ≥ï.Âú®ÊØèÊ¨°ÊûÑÂª∫Êñ∞ËäÇÁÇπÊó∂ÔºåÂ∞ÜÊñ∞ËäÇÁÇπÈìæÊé•Âú®ÂÜÖÈÉ®ÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ® accessOrder=trueÁöÑÊ®°Âºè‰∏ã,Âú®afterNodeAccess()ÂáΩÊï∞‰∏≠Ôºå‰ºöÂ∞ÜÂΩìÂâçË¢´ËÆøÈóÆÂà∞ÁöÑËäÇÁÇπeÔºåÁßªÂä®Ëá≥ÂÜÖÈÉ®ÁöÑÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ®„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåafterNodeAccess()ÂáΩÊï∞‰∏≠Ôºå‰ºö‰øÆÊîπmodCount,Âõ†Ê≠§ÂΩì‰Ω†Ê≠£Âú®accessOrder=trueÁöÑÊ®°Âºè‰∏ã,Ëø≠‰ª£LinkedHashMapÊó∂ÔºåÂ¶ÇÊûúÂêåÊó∂Êü•ËØ¢ËÆøÈóÆÊï∞ÊçÆÔºå‰πü‰ºöÂØºËá¥fail-fastÔºåÂõ†‰∏∫Ëø≠‰ª£ÁöÑÈ°∫Â∫èÂ∑≤ÁªèÊîπÂèò„ÄÇ nextNode() Â∞±ÊòØËø≠‰ª£Âô®ÈáåÁöÑnext()ÊñπÊ≥ï „ÄÇËØ•ÊñπÊ≥ïÁöÑÂÆûÁé∞ÂèØ‰ª•ÁúãÂá∫ÔºåËø≠‰ª£LinkedHashMapÔºåÂ∞±ÊòØ‰ªéÂÜÖÈÉ®Áª¥Êä§ÁöÑÂèåÈìæË°®ÁöÑË°®Â§¥ÂºÄÂßãÂæ™ÁéØËæìÂá∫„ÄÇ ËÄåÂèåÈìæË°®ËäÇÁÇπÁöÑÈ°∫Â∫èÂú®LinkedHashMapÁöÑÂ¢û„ÄÅÂà†„ÄÅÊîπ„ÄÅÊü•Êó∂ÈÉΩ‰ºöÊõ¥Êñ∞„ÄÇ‰ª•Êª°Ë∂≥ÊåâÁÖßÊèíÂÖ•È°∫Â∫èËæìÂá∫ÔºåËøòÊòØËÆøÈóÆÈ°∫Â∫èËæìÂá∫„ÄÇ ÂÆÉ‰∏éHashMapÊØîÔºåËøòÊúâ‰∏Ä‰∏™Â∞èÂ∞èÁöÑ‰ºòÂåñÔºåÈáçÂÜô‰∫ÜcontainsValue()ÊñπÊ≥ïÔºåÁõ¥Êé•ÈÅçÂéÜÂÜÖÈÉ®ÈìæË°®ÂéªÊØîÂØπvalueÂÄºÊòØÂê¶Áõ∏Á≠â„ÄÇ Êï¥ÁêÜËá™Ôºö http://blog.csdn.net/zxt0601/article/details/77429150 http://wiki.jikexueyuan.com/project/java-collection/linkedhashmap.html http://blog.csdn.net/u013124587/article/details/52659741 http://www.cnblogs.com/leesf456/p/5248868.html]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashSet]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F6.HashSet%2F</url>
    <content type="text"><![CDATA[HashSet ÊòØ‰∏Ä‰∏™‰∏çÂÖÅËÆ∏Â≠òÂÇ®ÈáçÂ§çÂÖÉÁ¥†ÁöÑÈõÜÂêàÔºåÂÆÉÊòØÂü∫‰∫é HashMap ÂÆûÁé∞ÁöÑÔºå HashSet Â∫ïÂ±Ç‰ΩøÁî® HashMap Êù•‰øùÂ≠òÊâÄÊúâÂÖÉÁ¥†ÔºåÂõ†Ê≠§ HashSet ÁöÑÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºåÁõ∏ÂÖ≥ HashSet ÁöÑÊìç‰ΩúÔºåÂü∫Êú¨‰∏äÈÉΩÊòØÁõ¥Êé•Ë∞ÉÁî®Â∫ïÂ±Ç HashMap ÁöÑÁõ∏ÂÖ≥ÊñπÊ≥ïÊù•ÂÆåÊàê„ÄÇÊâÄ‰ª•Âè™Ë¶ÅÁêÜËß£‰∫Ü HashMapÔºåHashSet Â∞±Ê∞¥Âà∞Ê∏†Êàê‰∫Ü„ÄÇ ÊàêÂëòÂèòÈáè È¶ñÂÖà‰∫ÜËß£‰∏ãHashSetÁöÑÊàêÂëòÂèòÈáè: 1234private transient HashMap&lt;E,Object&gt; map;// Dummy value to associate with an Object in the backing Mapprivate static final Object PRESENT = new Object(); ÂèëÁé∞‰∏ªË¶ÅÂ∞±‰∏§‰∏™ÂèòÈáè: map ÔºöÁî®‰∫éÂ≠òÊîæÊúÄÁªàÊï∞ÊçÆÁöÑ„ÄÇ PRESENT ÔºöÊòØÊâÄÊúâÂÜôÂÖ•mapÁöÑvalueÂÄº„ÄÇ ÊûÑÈÄ†ÊñπÊ≥ï 1234567public HashSet() &#123; map = new HashMap&lt;&gt;();&#125;public HashSet(int initialCapacity, float loadFactor) &#123; map = new HashMap&lt;&gt;(initialCapacity, loadFactor);&#125; ÊûÑÈÄ†ÂáΩÊï∞ÂæàÁÆÄÂçïÔºåÂà©Áî®‰∫ÜHashMapÂàùÂßãÂåñ‰∫Ümap„ÄÇ add 123public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; ÊØîËæÉÂÖ≥ÈîÆÁöÑÂ∞±ÊòØËøô‰∏™ add() ÊñπÊ≥ï„ÄÇ ÂèØ‰ª•ÁúãÂá∫ÂÆÉÊòØÂ∞ÜÂ≠òÊîæÁöÑÂØπË±°ÂΩìÂÅö‰∫Ü HashMap ÁöÑÂÅ•Ôºåvalue ÈÉΩÊòØÁõ∏ÂêåÁöÑ PRESENT „ÄÇÁî±‰∫é HashMap ÁöÑ key ÊòØ‰∏çËÉΩÈáçÂ§çÁöÑÔºåÊâÄ‰ª•ÊØèÂΩìÊúâÈáçÂ§çÁöÑÂÄºÂÜôÂÖ•Âà∞ HashSet Êó∂Ôºåvalue ‰ºöË¢´Ë¶ÜÁõñÔºå‰ΩÜ key ‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÔºåËøôÊ†∑Â∞±‰øùËØÅ‰∫Ü HashSet ‰∏≠Âè™ËÉΩÂ≠òÊîæ‰∏çÈáçÂ§çÁöÑÂÖÉÁ¥†„ÄÇ ËØ•ÊñπÊ≥ïÂ¶ÇÊûúÊ∑ªÂä†ÁöÑÊòØÂú® HashSet ‰∏≠‰∏çÂ≠òÂú®ÁöÑÔºåÂàôËøîÂõû trueÔºõÂ¶ÇÊûúÊ∑ªÂä†ÁöÑÂÖÉÁ¥†Â∑≤ÁªèÂ≠òÂú®ÔºåËøîÂõû false„ÄÇÂÖ∂ÂéüÂõ†Âú®‰∫éÊàë‰ª¨‰πãÂâçÊèêÂà∞ÁöÑÂÖ≥‰∫é HashMap ÁöÑ put ÊñπÊ≥ï„ÄÇËØ•ÊñπÊ≥ïÂú®Ê∑ªÂä† key ‰∏çÈáçÂ§çÁöÑÈîÆÂÄºÂØπÁöÑÊó∂ÂÄôÔºå‰ºöËøîÂõû null„ÄÇ ÊÄªÁªì HashSet ÁöÑÂéüÁêÜÊØîËæÉÁÆÄÂçïÔºåÂá†‰πéÂÖ®ÈÉ®ÂÄüÂä©‰∫é HashMap Êù•ÂÆûÁé∞ÁöÑ„ÄÇ ÊâÄ‰ª• HashMap ‰ºöÂá∫Áé∞ÁöÑÈóÆÈ¢ò HashSet ‰æùÁÑ∂‰∏çËÉΩÈÅøÂÖç„ÄÇ ÂØπ‰∫é HashSet ‰∏≠‰øùÂ≠òÁöÑÂØπË±°ÔºåËØ∑Ê≥®ÊÑèÊ≠£Á°ÆÈáçÂÜôÂÖ∂ equals Âíå hashCode ÊñπÊ≥ïÔºå‰ª•‰øùËØÅÊîæÂÖ•ÁöÑÂØπË±°ÁöÑÂîØ‰∏ÄÊÄß„ÄÇËøô‰∏§‰∏™ÊñπÊ≥ïÊòØÊØîËæÉÈáçË¶ÅÁöÑ„ÄÇ]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMap]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F5.HashMap%2F</url>
    <content type="text"><![CDATA[HashMapÂü∫Êú¨ÊòØÈù¢ËØïÂøÖÈóÆÁöÑÁÇπÔºåÂõ†‰∏∫Ëøô‰∏™Êï∞ÊçÆÁªìÊûÑÁî®ÁöÑÂ§™È¢ëÁπÅ‰∫ÜÔºåjdk1.8‰∏≠ÁöÑ‰ºòÂåñ‰πüÊòØÊØîËæÉÂ∑ßÂ¶ô„ÄÇÊúâÂøÖË¶ÅÂéªÊ∑±ÂÖ•Êé¢ËÆ®‰∏Ä‰∏ã„ÄÇ‰ΩÜÊòØÊ∂âÂèäÁöÑÂÜÖÂÆπÊØîËæÉÂ§öÔºåËøôÈáåÂè™ÂÖàÊé¢ËÆ®jdk8‰∏≠HashMapÁöÑÂÆûÁé∞ÔºåËá≥‰∫éjdk7‰∏≠HashMapÁöÑÊ≠ªÂæ™ÁéØÈóÆÈ¢ò„ÄÅÁ∫¢ÈªëÊ†ëÁöÑÂéüÁêÜÁ≠âÈÉΩ‰∏ç‰ºöÂú®Êú¨ÁØáÊñáÁ´†Êâ©Â±ïÂà∞„ÄÇÂÖ∂‰ªñÁöÑÊñáÁ´†Â∞Ü‰ºöÂÜçÂéªÊé¢ËÆ®Êï¥ÁêÜ„ÄÇ Êú¨ÁØáÊñáÁ´†ËæÉÈïøÔºåÈ´òËÉΩÈ¢ÑË≠¶„ÄÇ ‰∏Ä„ÄÅÂâçË®Ä ‰πãÂâçÁöÑListÔºåËÆ≤‰∫ÜArrayList„ÄÅLinkedListÔºåÊúÄÂêéËÆ≤Âà∞‰∫ÜCopyOnWriteArrayListÔºåÂ∞±Ââç‰∏§ËÄÖËÄåË®ÄÔºåÂèçÊò†ÁöÑÊòØ‰∏§ÁßçÊÄùÊÉ≥Ôºö Ôºà1ÔºâArrayList‰ª•Êï∞ÁªÑÂΩ¢ÂºèÂÆûÁé∞ÔºåÈ°∫Â∫èÊèíÂÖ•„ÄÅÊü•ÊâæÂø´ÔºåÊèíÂÖ•„ÄÅÂà†Èô§ËæÉÊÖ¢ Ôºà2ÔºâLinkedList‰ª•ÈìæË°®ÂΩ¢ÂºèÂÆûÁé∞ÔºåÈ°∫Â∫èÊèíÂÖ•„ÄÅÊü•ÊâæËæÉÊÖ¢ÔºåÊèíÂÖ•„ÄÅÂà†Èô§Êñπ‰æø ÈÇ£‰πàÊòØÂê¶Êúâ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑËÉΩÂ§üÁªìÂêà‰∏äÈù¢‰∏§ÁßçÁöÑ‰ºòÁÇπÂë¢ÔºüÊúâÔºåÁ≠îÊ°àÂ∞±ÊòØHashMap„ÄÇ HashMapÊòØ‰∏ÄÁßçÈùûÂ∏∏Â∏∏ËßÅ„ÄÅÊñπ‰æøÂíåÊúâÁî®ÁöÑÈõÜÂêàÔºåÊòØ‰∏ÄÁßçÈîÆÂÄºÂØπÔºàK-VÔºâÂΩ¢ÂºèÁöÑÂ≠òÂÇ®ÁªìÊûÑÔºåÂú®Êúâ‰∫ÜHashCodeÁöÑÂü∫Á°ÄÂêéÔºå‰∏ãÈù¢Â∞ÜËøòÊòØÁî®ÂõæÁ§∫ÁöÑÊñπÂºèËß£ËØªHashMapÁöÑÂÆûÁé∞ÂéüÁêÜ„ÄÇ Java‰∏∫Êï∞ÊçÆÁªìÊûÑ‰∏≠ÁöÑÊò†Â∞ÑÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êé•Âè£java.util.MapÔºåÊ≠§Êé•Âè£‰∏ªË¶ÅÊúâÂõõ‰∏™Â∏∏Áî®ÁöÑÂÆûÁé∞Á±ªÔºåÂàÜÂà´ÊòØHashMap„ÄÅHashtable„ÄÅLinkedHashMapÂíåTreeMapÔºåÁ±ªÁªßÊâøÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö (1) HashMapÔºöÂÆÉÊ†πÊçÆÈîÆÁöÑhashCodeÂÄºÂ≠òÂÇ®Êï∞ÊçÆÔºåÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÂèØ‰ª•Áõ¥Êé•ÂÆö‰ΩçÂà∞ÂÆÉÁöÑÂÄºÔºåÂõ†ËÄåÂÖ∑ÊúâÂæàÂø´ÁöÑËÆøÈóÆÈÄüÂ∫¶Ôºå‰ΩÜÈÅçÂéÜÈ°∫Â∫èÂç¥ÊòØ‰∏çÁ°ÆÂÆöÁöÑ„ÄÇ HashMapÊúÄÂ§öÂè™ÂÖÅËÆ∏‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÈîÆ‰∏∫nullÔºåÂÖÅËÆ∏Â§öÊù°ËÆ∞ÂΩïÁöÑÂÄº‰∏∫null„ÄÇHashMapÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂç≥‰ªª‰∏ÄÊó∂ÂàªÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂÜôHashMapÔºåÂèØËÉΩ‰ºöÂØºËá¥Êï∞ÊçÆÁöÑ‰∏ç‰∏ÄËá¥„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊª°Ë∂≥Á∫øÁ®ãÂÆâÂÖ®ÔºåÂèØ‰ª•Áî® CollectionsÁöÑsynchronizedMapÊñπÊ≥ï‰ΩøHashMapÂÖ∑ÊúâÁ∫øÁ®ãÂÆâÂÖ®ÁöÑËÉΩÂäõÔºåÊàñËÄÖ‰ΩøÁî®ConcurrentHashMap„ÄÇ (2) HashtableÔºöHashtableÊòØÈÅóÁïôÁ±ªÔºåÂæàÂ§öÊò†Â∞ÑÁöÑÂ∏∏Áî®ÂäüËÉΩ‰∏éHashMapÁ±ª‰ººÔºå‰∏çÂêåÁöÑÊòØÂÆÉÊâøËá™DictionaryÁ±ªÔºåÂπ∂‰∏îÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ªª‰∏ÄÊó∂Èó¥Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂÜôHashtableÔºåÂπ∂ÂèëÊÄß‰∏çÂ¶ÇConcurrentHashMapÔºåÂõ†‰∏∫ConcurrentHashMapÂºïÂÖ•‰∫ÜÂàÜÊÆµÈîÅ„ÄÇHashtable‰∏çÂª∫ËÆÆÂú®Êñ∞‰ª£Á†Å‰∏≠‰ΩøÁî®Ôºå‰∏çÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂú∫ÂêàÂèØ‰ª•Áî®HashMapÊõøÊç¢ÔºåÈúÄË¶ÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂú∫ÂêàÂèØ‰ª•Áî®ConcurrentHashMapÊõøÊç¢„ÄÇ (3) LinkedHashMapÔºöLinkedHashMapÊòØHashMapÁöÑ‰∏Ä‰∏™Â≠êÁ±ªÔºå‰øùÂ≠ò‰∫ÜËÆ∞ÂΩïÁöÑÊèíÂÖ•È°∫Â∫èÔºåÂú®Áî®IteratorÈÅçÂéÜLinkedHashMapÊó∂ÔºåÂÖàÂæóÂà∞ÁöÑËÆ∞ÂΩïËÇØÂÆöÊòØÂÖàÊèíÂÖ•ÁöÑÔºå‰πüÂèØ‰ª•Âú®ÊûÑÈÄ†Êó∂Â∏¶ÂèÇÊï∞ÔºåÊåâÁÖßËÆøÈóÆÊ¨°Â∫èÊéíÂ∫è„ÄÇ (4) TreeMapÔºöTreeMapÂÆûÁé∞SortedMapÊé•Âè£ÔºåËÉΩÂ§üÊääÂÆÉ‰øùÂ≠òÁöÑËÆ∞ÂΩïÊ†πÊçÆÈîÆÊéíÂ∫èÔºåÈªòËÆ§ÊòØÊåâÈîÆÂÄºÁöÑÂçáÂ∫èÊéíÂ∫èÔºå‰πüÂèØ‰ª•ÊåáÂÆöÊéíÂ∫èÁöÑÊØîËæÉÂô®ÔºåÂΩìÁî®IteratorÈÅçÂéÜTreeMapÊó∂ÔºåÂæóÂà∞ÁöÑËÆ∞ÂΩïÊòØÊéíËøáÂ∫èÁöÑ„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÊéíÂ∫èÁöÑÊò†Â∞ÑÔºåÂª∫ËÆÆ‰ΩøÁî®TreeMap„ÄÇÂú®‰ΩøÁî®TreeMapÊó∂ÔºåkeyÂøÖÈ°ªÂÆûÁé∞ComparableÊé•Âè£ÊàñËÄÖÂú®ÊûÑÈÄ†TreeMap‰º†ÂÖ•Ëá™ÂÆö‰πâÁöÑComparatorÔºåÂê¶Âàô‰ºöÂú®ËøêË°åÊó∂ÊäõÂá∫java.lang.ClassCastExceptionÁ±ªÂûãÁöÑÂºÇÂ∏∏„ÄÇ ÂØπ‰∫é‰∏äËø∞ÂõõÁßçMapÁ±ªÂûãÁöÑÁ±ªÔºåË¶ÅÊ±ÇÊò†Â∞Ñ‰∏≠ÁöÑkeyÊòØ‰∏çÂèØÂèòÂØπË±°„ÄÇ‰∏çÂèØÂèòÂØπË±°ÊòØËØ•ÂØπË±°Âú®ÂàõÂª∫ÂêéÂÆÉÁöÑÂìàÂ∏åÂÄº‰∏ç‰ºöË¢´ÊîπÂèò„ÄÇÂ¶ÇÊûúÂØπË±°ÁöÑÂìàÂ∏åÂÄºÂèëÁîüÂèòÂåñÔºåMapÂØπË±°ÂæàÂèØËÉΩÂ∞±ÂÆö‰Ωç‰∏çÂà∞Êò†Â∞ÑÁöÑ‰ΩçÁΩÆ‰∫Ü„ÄÇ ‰∫å„ÄÅHashMapÁöÑÁªìÊûÑ ÂÖ∂‰∏≠ÂìàÂ∏åË°®ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÊàë‰ª¨ÁªèÂ∏∏ÊääÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™ËäÇÁÇπÁß∞‰∏∫‰∏Ä‰∏™Ê°∂ÔºåÂìàÂ∏åË°®‰∏≠ÁöÑÊØè‰∏™ËäÇÁÇπÈÉΩÁî®Êù•Â≠òÂÇ®‰∏Ä‰∏™ÈîÆÂÄºÂØπ„ÄÇ Âú®ÊèíÂÖ•ÂÖÉÁ¥†Êó∂ÔºåÂ¶ÇÊûúÂèëÁîüÂÜ≤Á™ÅÔºàÂç≥Â§ö‰∏™ÈîÆÂÄºÂØπÊò†Â∞ÑÂà∞Âêå‰∏Ä‰∏™Ê°∂‰∏äÔºâÁöÑËØùÔºåÂ∞±‰ºöÈÄöËøáÈìæË°®ÁöÑÂΩ¢ÂºèÊù•Ëß£ÂÜ≥ÂÜ≤Á™Å„ÄÇ Âõ†‰∏∫‰∏Ä‰∏™Ê°∂‰∏äÂèØËÉΩÂ≠òÂú®Â§ö‰∏™ÈîÆÂÄºÂØπÔºåÊâÄ‰ª•Âú®Êü•ÊâæÁöÑÊó∂ÂÄôÔºå‰ºöÂÖàÈÄöËøákeyÁöÑÂìàÂ∏åÂÄºÂÖàÂÆö‰ΩçÂà∞Ê°∂ÔºåÂÜçÈÅçÂéÜÊ°∂‰∏äÁöÑÊâÄÊúâÈîÆÂÄºÂØπÔºåÊâæÂá∫keyÁõ∏Á≠âÁöÑÈîÆÂÄºÂØπÔºå‰ªéËÄåÊù•Ëé∑Âèñvalue„ÄÇ Â¶ÇÂõæÊâÄÁ§∫ÔºåHashMap Â∫ïÂ±ÇÊòØÂü∫‰∫éÊï∞ÁªÑÂíåÈìæË°®ÂÆûÁé∞ÁöÑ„ÄÇÂÖ∂‰∏≠Êúâ‰∏§‰∏™ÈáçË¶ÅÁöÑÂèÇÊï∞Ôºö ÂÆπÈáè Ë¥üËΩΩÂõ†Â≠ê ÂÆπÈáèÁöÑÈªòËÆ§Â§ßÂ∞èÊòØ 16ÔºåË¥üËΩΩÂõ†Â≠êÊòØ 0.75ÔºåÂΩì HashMap ÁöÑ size &gt; 16*0.75 Êó∂Â∞±‰ºöÂèëÁîüÊâ©ÂÆπ(ÂÆπÈáèÂíåË¥üËΩΩÂõ†Â≠êÈÉΩÂèØ‰ª•Ëá™Áî±Ë∞ÉÊï¥)„ÄÇ ‰∏â„ÄÅÁªßÊâøÂÖ≥Á≥ª 12public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable ËØ¥ÊòéÔºö HashMapÁªßÊâøËá™AbstractMapÔºåAbstractMapÊòØMapÊé•Âè£ÁöÑÈ™®Âπ≤ÂÆûÁé∞ÔºåAbstractMap‰∏≠ÂÆûÁé∞‰∫ÜMap‰∏≠ÊúÄÈáçË¶ÅÊúÄÂ∏∏Áî®ÂíåÊñπÊ≥ïÔºåËøôÊ†∑HashMapÁªßÊâøAbstractMapÂ∞±‰∏çÈúÄË¶ÅÂÆûÁé∞MapÁöÑÊâÄÊúâÊñπÊ≥ïÔºåËÆ©HashMapÂáèÂ∞ë‰∫ÜÂ§ßÈáèÁöÑÂ∑•‰Ωú„ÄÇ Âõõ„ÄÅÂ±ûÊÄß 123456789101112131415161718192021222324252627//ÈªòËÆ§ÁöÑÂàùÂßãÂÆπÈáè‰∏∫16static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16//ÊúÄÂ§ßÁöÑÂÆπÈáè‰∏äÈôê‰∏∫2^30static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;//ÈªòËÆ§ÁöÑË¥üËΩΩÂõ†Â≠ê‰∏∫0.75static final float DEFAULT_LOAD_FACTOR = 0.75f;//ÂèòÊàêÊ†ëÂûãÁªìÊûÑÁöÑ‰∏¥ÁïåÂÄº‰∏∫8static final int TREEIFY_THRESHOLD = 8;//ÊÅ¢Â§çÈìæÂºèÁªìÊûÑÁöÑ‰∏¥ÁïåÂÄº‰∏∫6static final int UNTREEIFY_THRESHOLD = 6;/** * ÂìàÂ∏åË°®ÁöÑÊúÄÂ∞èÊ†ëÂΩ¢ÂåñÂÆπÈáè * ÂΩìÂìàÂ∏åË°®‰∏≠ÁöÑÂÆπÈáèÂ§ß‰∫éËøô‰∏™ÂÄºÊó∂ÔºåË°®‰∏≠ÁöÑÊ°∂ÊâçËÉΩËøõË°åÊ†ëÂΩ¢Âåñ * Âê¶ÂàôÊ°∂ÂÜÖÂÖÉÁ¥†Â§™Â§öÊó∂‰ºöÊâ©ÂÆπÔºåËÄå‰∏çÊòØÊ†ëÂΩ¢Âåñ * ‰∏∫‰∫ÜÈÅøÂÖçËøõË°åÊâ©ÂÆπ„ÄÅÊ†ëÂΩ¢ÂåñÈÄâÊã©ÁöÑÂÜ≤Á™ÅÔºåËøô‰∏™ÂÄº‰∏çËÉΩÂ∞è‰∫é 4 * TREEIFY_THRESHOLD */static final int MIN_TREEIFY_CAPACITY = 64;//ÂìàÂ∏åË°®transient Node&lt;K,V&gt;[] table;//ÂìàÂ∏åË°®‰∏≠ÈîÆÂÄºÂØπÁöÑ‰∏™Êï∞transient int size;//ÂìàÂ∏åË°®Ë¢´‰øÆÊîπÁöÑÊ¨°Êï∞transient int modCount;//ÂÆÉÊòØÈÄöËøácapacity*load factorËÆ°ÁÆóÂá∫Êù•ÁöÑÔºåÂΩìsizeÂà∞ËææËøô‰∏™ÂÄºÊó∂ÔºåÂ∞±‰ºöËøõË°åÊâ©ÂÆπÊìç‰Ωúint threshold;//Ë¥üËΩΩÂõ†Â≠êfinal float loadFactor; 4.1 Âá†‰∏™Â±ûÊÄßÁöÑËØ¶ÁªÜËØ¥Êòé 1234int threshold; // ÊâÄËÉΩÂÆπÁ∫≥ÁöÑkey-valueÂØπÊûÅÈôê final float loadFactor; // Ë¥üËΩΩÂõ†Â≠êint modCount; int size; È¶ñÂÖàÔºåNode[] tableÁöÑÂàùÂßãÂåñÈïøÂ∫¶length(ÈªòËÆ§ÂÄºÊòØ16)ÔºåLoad factor‰∏∫Ë¥üËΩΩÂõ†Â≠ê(ÈªòËÆ§ÂÄºÊòØ0.75)ÔºåthresholdÊòØHashMapÊâÄËÉΩÂÆπÁ∫≥ÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáèÁöÑNode(ÈîÆÂÄºÂØπ)‰∏™Êï∞„ÄÇthreshold = length * Load factor„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂú®Êï∞ÁªÑÂÆö‰πâÂ•ΩÈïøÂ∫¶‰πãÂêéÔºåË¥üËΩΩÂõ†Â≠êË∂äÂ§ßÔºåÊâÄËÉΩÂÆπÁ∫≥ÁöÑÈîÆÂÄºÂØπ‰∏™Êï∞Ë∂äÂ§ö„ÄÇ ÁªìÂêàË¥üËΩΩÂõ†Â≠êÁöÑÂÆö‰πâÂÖ¨ÂºèÂèØÁü•ÔºåthresholdÂ∞±ÊòØÂú®Ê≠§Load factorÂíålength(Êï∞ÁªÑÈïøÂ∫¶)ÂØπÂ∫î‰∏ãÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÖÉÁ¥†Êï∞ÁõÆÔºåË∂ÖËøáËøô‰∏™Êï∞ÁõÆÂ∞±ÈáçÊñ∞resize(Êâ©ÂÆπ)ÔºåÊâ©ÂÆπÂêéÁöÑHashMapÂÆπÈáèÊòØ‰πãÂâçÂÆπÈáèÁöÑ‰∏§ÂÄçÔºà‰∏∫‰ªÄ‰πàÊòØ‰∏§ÂÄç‰∏ãÊñá‰ºöËØ¥ÊòéÔºâ„ÄÇ ÈªòËÆ§ÁöÑË¥üËΩΩÂõ†Â≠ê0.75ÊòØÂØπÁ©∫Èó¥ÂíåÊó∂Èó¥ÊïàÁéáÁöÑ‰∏Ä‰∏™Âπ≥Ë°°ÈÄâÊã©ÔºåÂª∫ËÆÆÂ§ßÂÆ∂‰∏çË¶Å‰øÆÊîπÔºåÈô§ÈùûÂú®Êó∂Èó¥ÂíåÁ©∫Èó¥ÊØîËæÉÁâπÊÆäÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÂÜÖÂ≠òÁ©∫Èó¥ÂæàÂ§öËÄåÂèàÂØπÊó∂Èó¥ÊïàÁéáË¶ÅÊ±ÇÂæàÈ´òÔºåÂèØ‰ª•Èôç‰ΩéË¥üËΩΩÂõ†Â≠ê`Load factor`ÁöÑÂÄºÔºõÁõ∏ÂèçÔºåÂ¶ÇÊûúÂÜÖÂ≠òÁ©∫Èó¥Á¥ßÂº†ËÄåÂØπÊó∂Èó¥ÊïàÁéáË¶ÅÊ±Ç‰∏çÈ´òÔºåÂèØ‰ª•Â¢ûÂä†Ë¥üËΩΩÂõ†Â≠ê`loadFactor`ÁöÑÂÄºÔºåËøô‰∏™ÂÄºÂèØ‰ª•Â§ß‰∫é1„ÄÇ sizeËøô‰∏™Â≠óÊÆµÂÖ∂ÂÆûÂæàÂ•ΩÁêÜËß£ÔºåÂ∞±ÊòØHashMap‰∏≠ÂÆûÈôÖÂ≠òÂú®ÁöÑÈîÆÂÄºÂØπÊï∞Èáè„ÄÇÊ≥®ÊÑèsizeÂíåtableÁöÑÈïøÂ∫¶length„ÄÅÂÆπÁ∫≥ÊúÄÂ§ßÈîÆÂÄºÂØπÊï∞ÈáèthresholdÁöÑÂå∫Âà´„ÄÇ ËÄåmodCountÂ≠óÊÆµ‰∏ªË¶ÅÁî®Êù•ËÆ∞ÂΩïHashMapÂÜÖÈÉ®ÁªìÊûÑÂèëÁîüÂèòÂåñÁöÑÊ¨°Êï∞Ôºå‰∏ªË¶ÅÁî®‰∫éËø≠‰ª£ÁöÑÂø´ÈÄüÂ§±Ë¥•„ÄÇÂº∫Ë∞É‰∏ÄÁÇπÔºåÂÜÖÈÉ®ÁªìÊûÑÂèëÁîüÂèòÂåñÊåáÁöÑÊòØÁªìÊûÑÂèëÁîüÂèòÂåñÔºå‰æãÂ¶ÇputÊñ∞ÈîÆÂÄºÂØπÔºå‰ΩÜÊòØÊüê‰∏™keyÂØπÂ∫îÁöÑvalueÂÄºË¢´Ë¶ÜÁõñ‰∏çÂ±û‰∫éÁªìÊûÑÂèòÂåñ„ÄÇ Âú®HashMap‰∏≠ÔºåÂìàÂ∏åÊ°∂Êï∞ÁªÑtableÁöÑÈïøÂ∫¶lengthÂ§ßÂ∞èÂøÖÈ°ª‰∏∫2ÁöÑnÊ¨°Êñπ(‰∏ÄÂÆöÊòØÂêàÊï∞)ÔºåËøôÊòØ‰∏ÄÁßçÈùûÂ∏∏ËßÑÁöÑËÆæËÆ°ÔºåÂõ†‰∏∫Â∏∏ËßÑÁöÑËÆæËÆ°ÊòØÊääÊ°∂ÁöÑÂ§ßÂ∞èËÆæËÆ°‰∏∫Á¥†Êï∞„ÄÇÁõ∏ÂØπÊù•ËØ¥Á¥†Êï∞ÂØºËá¥ÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáË¶ÅÂ∞è‰∫éÂêàÊï∞ÔºåÂÖ∑‰ΩìËØÅÊòéÂèØ‰ª•ÂèÇËÄÉ http://blog.csdn.net/liuqiyao_01/article/details/14475159 ÔºåHashtableÂàùÂßãÂåñÊ°∂Â§ßÂ∞è‰∏∫11ÔºåÂ∞±ÊòØÊ°∂Â§ßÂ∞èËÆæËÆ°‰∏∫Á¥†Êï∞ÁöÑÂ∫îÁî®ÔºàHashtableÊâ©ÂÆπÂêé‰∏çËÉΩ‰øùËØÅËøòÊòØÁ¥†Êï∞Ôºâ„ÄÇHashMapÈááÁî®ËøôÁßçÈùûÂ∏∏ËßÑËÆæËÆ°Ôºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂú®ÂèñÊ®°ÂíåÊâ©ÂÆπÊó∂ÂÅö‰ºòÂåñÔºåÂêåÊó∂‰∏∫‰∫ÜÂáèÂ∞ëÂÜ≤Á™ÅÔºåHashMapÂÆö‰ΩçÂìàÂ∏åÊ°∂Á¥¢Âºï‰ΩçÁΩÆÊó∂Ôºå‰πüÂä†ÂÖ•‰∫ÜÈ´ò‰ΩçÂèÇ‰∏éËøêÁÆóÁöÑËøáÁ®ã„ÄÇ‰∏ãÊñá‰ºöËØ¥Êòé„ÄÇ ËøôÈáåÂ≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂç≥‰ΩøË¥üËΩΩÂõ†Â≠êÂíåHashÁÆóÊ≥ïËÆæËÆ°ÁöÑÂÜçÂêàÁêÜÔºå‰πüÂÖç‰∏ç‰∫Ü‰ºöÂá∫Áé∞ÊãâÈìæËøáÈïøÁöÑÊÉÖÂÜµÔºå‰∏ÄÊó¶Âá∫Áé∞ÊãâÈìæËøáÈïøÔºåÂàô‰ºö‰∏•ÈáçÂΩ±ÂìçHashMapÁöÑÊÄßËÉΩ„ÄÇ‰∫éÊòØÔºåÂú®JDK1.8ÁâàÊú¨‰∏≠ÔºåÂØπÊï∞ÊçÆÁªìÊûÑÂÅö‰∫ÜËøõ‰∏ÄÊ≠•ÁöÑ‰ºòÂåñÔºåÂºïÂÖ•‰∫ÜÁ∫¢ÈªëÊ†ë„ÄÇËÄåÂΩìÈìæË°®ÈïøÂ∫¶Â§™ÈïøÔºàÈªòËÆ§Ë∂ÖËøá8ÔºâÊó∂ÔºåÂπ∂‰∏îÈìæË°®ÁöÑÈïøÂ∫¶Ë∂ÖËøá64Êó∂ÔºåÈìæË°®Â∞±ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëÔºåÂà©Áî®Á∫¢ÈªëÊ†ëÂø´ÈÄüÂ¢ûÂà†ÊîπÊü•ÁöÑÁâπÁÇπÊèêÈ´òHashMapÁöÑÊÄßËÉΩÔºåÂÖ∂‰∏≠‰ºöÁî®Âà∞Á∫¢ÈªëÊ†ëÁöÑÊèíÂÖ•„ÄÅÂà†Èô§„ÄÅÊü•ÊâæÁ≠âÁÆóÊ≥ï„ÄÇ ËøôÈáåÁùÄÈáçÊèê‰∏Ä‰∏ãMIN_TREEIFY_CAPACITYÂ≠óÊÆµÔºåÂÆπÊòì‰∏éTREEIFY_THRESHOLDÊâìÊû∂ÔºåTREEIFY_THRESHOLDÊòØÊåáÊ°∂‰∏≠ÂÖÉÁ¥†ËææÂà∞8‰∏™ÔºåÂ∞±Â∞ÜÂÖ∂Êú¨Êù•ÁöÑÈìæË°®ÁªìÊûÑÊîπ‰∏∫Á∫¢ÈªëÊ†ëÔºåÊèêÈ´òÊü•ËØ¢ÁöÑÊïàÁéá„ÄÇMIN_TREEIFY_CAPACITYÊòØÊåáÊúÄÂ∞èÊ†ëÂåñÁöÑÂìàÂ∏åË°®ÂÖÉÁ¥†‰∏™Êï∞Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂ∞è‰∫éËøô‰∏™ÂÄºÔºåÂ∞±ÁÆó‰Ω†(Êï∞ÁªÑ)Ê°∂ÈáåÁöÑÂÖÉÁ¥†Êï∞ÈáèÂ§ß‰∫é8‰∫ÜÔºåËøòÊòØË¶ÅÁî®ÈìæË°®Â≠òÂÇ®ÔºåÂè™ÊúâÂêåÊó∂Êª°Ë∂≥ÔºöË°®‰∏≠Êï∞ÊçÆÂÆπÈáèÂ∑≤ÁªèÊâ©ÂÆπÂà∞MIN_TREEIFY_CAPACITYËøô‰∏™ÈïøÂ∫¶ÔºåÂπ∂‰∏îÊ°∂ÈáåÁöÑÊï∞ÊçÆ‰∏™Êï∞ËææÂà∞8‰∏™ÁöÑÊó∂ÂÄôÔºåÊâç‰ºöÂ∞ÜËØ•Ê°∂ÈáåÁöÑÁªìÊûÑËøõË°åÊ†ëÂåñ„ÄÇÊ≥®ÊÑèÊâ©ÂÆπÊòØÊï∞ÁªÑÁöÑÂ§çÂà∂„ÄÇ 4.2 NodeÁªìÊûÑ 1234567891011121314static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; //Áî®Êù•ÂÆö‰ΩçÊï∞ÁªÑÁ¥¢Âºï‰ΩçÁΩÆ final K key; V value; Node&lt;K,V&gt; next; //ÈìæË°®ÁöÑ‰∏ã‰∏Ä‰∏™node Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; ... &#125; public final K getKey()&#123; ... &#125; public final V getValue() &#123; ... &#125; public final String toString() &#123; ... &#125; public final int hashCode() &#123; ... &#125; public final V setValue(V newValue) &#123; ... &#125; public final boolean equals(Object o) &#123; ... &#125;&#125; NodeÊòØHashMapÁöÑ‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªÔºåÂÆûÁé∞‰∫ÜMap.EntryÊé•Âè£ÔºåÊú¨Ë¥®ÊòØÂ∞±ÊòØ‰∏Ä‰∏™Êò†Â∞Ñ(ÈîÆÂÄºÂØπ)„ÄÇ‰∏äÂõæ‰∏≠ÁöÑÊØè‰∏™ÈªëËâ≤ÂúÜÁÇπÂ∞±ÊòØ‰∏Ä‰∏™NodeÂØπË±°„ÄÇ ‰æãÂ¶ÇÁ®ãÂ∫èÊâßË°å‰∏ãÈù¢‰ª£Á†ÅÔºö 1map.put("ÁæéÂõ¢","Â∞èÁæé"); Á≥ªÁªüÂ∞ÜË∞ÉÁî®&quot;ÁæéÂõ¢&quot;Ëøô‰∏™keyÁöÑhashCode()ÊñπÊ≥ïÂæóÂà∞ÂÖ∂hashCodeÂÄºÔºàËØ•ÊñπÊ≥ïÈÄÇÁî®‰∫éÊØè‰∏™JavaÂØπË±°Ôºâ„ÄÇ ÁÑ∂ÂêéÂÜçÈÄöËøáHashÁÆóÊ≥ïÊù•ÂÆö‰ΩçËØ•ÈîÆÂÄºÂØπÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºåÊúâÊó∂‰∏§‰∏™key‰ºöÂÆö‰ΩçÂà∞Áõ∏ÂêåÁöÑ‰ΩçÁΩÆÔºåË°®Á§∫ÂèëÁîü‰∫ÜHashÁ¢∞Êíû„ÄÇ ÂΩìÁÑ∂HashÁÆóÊ≥ïËÆ°ÁÆóÁªìÊûúË∂äÂàÜÊï£ÂùáÂåÄÔºåHashÁ¢∞ÊíûÁöÑÊ¶ÇÁéáÂ∞±Ë∂äÂ∞èÔºåmapÁöÑÂ≠òÂèñÊïàÁéáÂ∞±‰ºöË∂äÈ´ò„ÄÇ Â¶ÇÊûúÂìàÂ∏åÊ°∂Êï∞ÁªÑÂæàÂ§ßÔºåÂç≥‰ΩøËæÉÂ∑ÆÁöÑHashÁÆóÊ≥ï‰πü‰ºöÊØîËæÉÂàÜÊï£ÔºåÂ¶ÇÊûúÂìàÂ∏åÊ°∂Êï∞ÁªÑÊï∞ÁªÑÂæàÂ∞èÔºåÂç≥‰ΩøÂ•ΩÁöÑHashÁÆóÊ≥ï‰πü‰ºöÂá∫Áé∞ËæÉÂ§öÁ¢∞ÊíûÔºåÊâÄ‰ª•Â∞±ÈúÄË¶ÅÂú®Á©∫Èó¥ÊàêÊú¨ÂíåÊó∂Èó¥ÊàêÊú¨‰πãÈó¥ÊùÉË°°ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂú®Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÁ°ÆÂÆöÂìàÂ∏åÊ°∂Êï∞ÁªÑÁöÑÂ§ßÂ∞èÔºåÂπ∂Âú®Ê≠§Âü∫Á°Ä‰∏äËÆæËÆ°Â•ΩÁöÑhashÁÆóÊ≥ïÂáèÂ∞ëHashÁ¢∞Êíû„ÄÇ ÈÇ£‰πàÈÄöËøá‰ªÄ‰πàÊñπÂºèÊù•ÊéßÂà∂map‰ΩøÂæóHashÁ¢∞ÊíûÁöÑÊ¶ÇÁéáÂèàÂ∞èÔºåÂìàÂ∏åÊ°∂Êï∞ÁªÑÔºàNode[] tableÔºâÂç†Áî®Á©∫Èó¥ÂèàÂ∞ëÂë¢ÔºüÁ≠îÊ°àÂ∞±ÊòØÂ•ΩÁöÑHashÁÆóÊ≥ï(5.4ËäÇ)ÂíåÊâ©ÂÆπÊú∫Âà∂(5.5ËäÇ)„ÄÇ‰∏ãÊñá‰ºöËÆ≤Âà∞„ÄÇ ‰∫î„ÄÅÊñπÊ≥ï 5.1 getÊñπÊ≥ï 123456789101112131415161718192021222324252627282930//getÊñπÊ≥ï‰∏ªË¶ÅË∞ÉÁî®ÁöÑÊòØgetNodeÊñπÊ≥ïÔºåÊâÄ‰ª•ÈáçÁÇπË¶ÅÁúãgetNodeÊñπÊ≥ïÁöÑÂÆûÁé∞public V get(Object key) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value;&#125;final Node&lt;K,V&gt; getNode(int hash, Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; //Â¶ÇÊûúÂìàÂ∏åË°®‰∏ç‰∏∫Á©∫ &amp;&amp; keyÂØπÂ∫îÁöÑÊ°∂‰∏ä‰∏ç‰∏∫Á©∫ if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) &#123; //ÊòØÂê¶Áõ¥Êé•ÂëΩ‰∏≠ if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; //Âà§Êñ≠ÊòØÂê¶ÊúâÂêéÁª≠ËäÇÁÇπ if ((e = first.next) != null) &#123; //Â¶ÇÊûúÂΩìÂâçÁöÑÊ°∂ÊòØÈááÁî®Á∫¢ÈªëÊ†ëÂ§ÑÁêÜÂÜ≤Á™ÅÔºåÂàôË∞ÉÁî®Á∫¢ÈªëÊ†ëÁöÑgetÊñπÊ≥ïÂéªËé∑ÂèñËäÇÁÇπ if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); //‰∏çÊòØÁ∫¢ÈªëÊ†ëÁöÑËØùÔºåÈÇ£Â∞±ÊòØ‰º†ÁªüÁöÑÈìæÂºèÁªìÊûÑ‰∫ÜÔºåÈÄöËøáÂæ™ÁéØÁöÑÊñπÊ≥ïÂà§Êñ≠Èìæ‰∏≠ÊòØÂê¶Â≠òÂú®ËØ•key do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; while ((e = e.next) != null); &#125; &#125; return null;&#125; ÂÆûÁé∞Ê≠•È™§Â§ßËá¥Â¶Ç‰∏ãÔºö ÈÄöËøáhashÂÄºËé∑ÂèñËØ•keyÊò†Â∞ÑÂà∞ÁöÑÊ°∂„ÄÇ Ê°∂‰∏äÁöÑkeyÂ∞±ÊòØË¶ÅÊü•ÊâæÁöÑkeyÔºåÂàôÁõ¥Êé•ÂëΩ‰∏≠„ÄÇ Ê°∂‰∏äÁöÑkey‰∏çÊòØË¶ÅÊü•ÊâæÁöÑkeyÔºåÂàôÊü•ÁúãÂêéÁª≠ËäÇÁÇπÔºö Â¶ÇÊûúÂêéÁª≠ËäÇÁÇπÊòØÊ†ëËäÇÁÇπÔºåÈÄöËøáË∞ÉÁî®Ê†ëÁöÑÊñπÊ≥ïÊü•ÊâæËØ•key„ÄÇ Â¶ÇÊûúÂêéÁª≠ËäÇÁÇπÊòØÈìæÂºèËäÇÁÇπÔºåÂàôÈÄöËøáÂæ™ÁéØÈÅçÂéÜÈìæÊü•ÊâæËØ•key„ÄÇ 5.2 putÊñπÊ≥ï 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//putÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞‰πüÊòØÂú®putValÊñπÊ≥ï‰∏≠ÔºåÊâÄ‰ª•Êàë‰ª¨ÈáçÁÇπÁúã‰∏ãÈù¢ÁöÑputValÊñπÊ≥ïpublic V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125;final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //Â¶ÇÊûúÂìàÂ∏åË°®‰∏∫Á©∫ÔºåÂàôÂÖàÂàõÂª∫‰∏Ä‰∏™ÂìàÂ∏åË°® if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; //Â¶ÇÊûúÂΩìÂâçÊ°∂Ê≤°ÊúâÁ¢∞ÊíûÂÜ≤Á™ÅÔºåÂàôÁõ¥Êé•ÊääÈîÆÂÄºÂØπÊèíÂÖ•ÔºåÂÆå‰∫ã if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123; Node&lt;K,V&gt; e; K k; //Â¶ÇÊûúÊ°∂‰∏äËäÇÁÇπÁöÑkey‰∏éÂΩìÂâçkeyÈáçÂ§çÔºåÈÇ£‰Ω†Â∞±ÊòØÊàëË¶ÅÊâæÁöÑËäÇÁÇπ‰∫Ü if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; //Â¶ÇÊûúÊòØÈááÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÂºèÂ§ÑÁêÜÂÜ≤Á™ÅÔºåÂàôÈÄöËøáÁ∫¢ÈªëÊ†ëÁöÑputTreeValÊñπÊ≥ïÂéªÊèíÂÖ•Ëøô‰∏™ÈîÆÂÄºÂØπ else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); //Âê¶ÂàôÂ∞±ÊòØ‰º†ÁªüÁöÑÈìæÂºèÁªìÊûÑ else &#123; //ÈááÁî®Âæ™ÁéØÈÅçÂéÜÁöÑÊñπÂºèÔºåÂà§Êñ≠Èìæ‰∏≠ÊòØÂê¶ÊúâÈáçÂ§çÁöÑkey for (int binCount = 0; ; ++binCount) &#123; //Âà∞‰∫ÜÈìæÂ∞æËøòÊ≤°ÊâæÂà∞ÈáçÂ§çÁöÑkeyÔºåÂàôËØ¥ÊòéHashMapÊ≤°ÊúâÂåÖÂê´ËØ•ÈîÆ if ((e = p.next) == null) &#123; //ÂàõÂª∫‰∏Ä‰∏™Êñ∞ËäÇÁÇπÊèíÂÖ•Âà∞Â∞æÈÉ® p.next = newNode(hash, key, value, null); //Â¶ÇÊûúÈìæÁöÑÈïøÂ∫¶Â§ß‰∫éTREEIFY_THRESHOLDËøô‰∏™‰∏¥ÁïåÂÄºÔºåÂàôÊääÈìæÂèò‰∏∫Á∫¢ÈªëÊ†ë if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; &#125; //ÊâæÂà∞‰∫ÜÈáçÂ§çÁöÑkey if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; //ËøôÈáåË°®Á§∫Âú®‰∏äÈù¢ÁöÑÊìç‰Ωú‰∏≠ÊâæÂà∞‰∫ÜÈáçÂ§çÁöÑÈîÆÔºåÊâÄ‰ª•ËøôÈáåÊääËØ•ÈîÆÁöÑÂÄºÊõøÊç¢‰∏∫Êñ∞ÂÄº if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; ++modCount; //Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅËøõË°åÊâ©ÂÆπ if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null;&#125; 1234567891011121314151617181920final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123; int n, index; Node&lt;K,V&gt; e; if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) resize(); else if ((e = tab[index = (n - 1) &amp; hash]) != null) &#123; TreeNode&lt;K,V&gt; hd = null, tl = null; do &#123; TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null); if (tl == null) hd = p; else &#123; p.prev = tl; tl.next = p; &#125; tl = p; &#125; while ((e = e.next) != null); if ((tab[index] = hd) != null) hd.treeify(tab); &#125;&#125; putÊñπÊ≥ïÊØîËæÉÂ§çÊùÇÔºåÂÆûÁé∞Ê≠•È™§Â§ßËá¥Â¶Ç‰∏ãÔºö ÂÖàÈÄöËøáhashÂÄºËÆ°ÁÆóÂá∫keyÊò†Â∞ÑÂà∞Âì™‰∏™Ê°∂„ÄÇ Â¶ÇÊûúÊ°∂‰∏äÊ≤°ÊúâÁ¢∞ÊíûÂÜ≤Á™ÅÔºåÂàôÁõ¥Êé•ÊèíÂÖ•„ÄÇ Â¶ÇÊûúÂá∫Áé∞Á¢∞ÊíûÂÜ≤Á™Å‰∫ÜÔºåÂàôÈúÄË¶ÅÂ§ÑÁêÜÂÜ≤Á™ÅÔºö Â¶ÇÊûúËØ•Ê°∂‰ΩøÁî®Á∫¢ÈªëÊ†ëÂ§ÑÁêÜÂÜ≤Á™ÅÔºåÂàôË∞ÉÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÊ≥ïÊèíÂÖ•„ÄÇ Âê¶ÂàôÈááÁî®‰º†ÁªüÁöÑÈìæÂºèÊñπÊ≥ïÊèíÂÖ•„ÄÇÂ¶ÇÊûúÈìæÁöÑÈïøÂ∫¶Âà∞Ëææ‰∏¥ÁïåÂÄºÔºåÂàôÊääÈìæËΩ¨Âèò‰∏∫Á∫¢ÈªëÊ†ë„ÄÇ Â¶ÇÊûúÊ°∂‰∏≠Â≠òÂú®ÈáçÂ§çÁöÑÈîÆÔºåÂàô‰∏∫ËØ•ÈîÆÊõøÊç¢Êñ∞ÂÄº„ÄÇ Â¶ÇÊûúsizeÂ§ß‰∫éÈòàÂÄºÔºåÂàôËøõË°åÊâ©ÂÆπ„ÄÇ 5.3 removeÊñπÊ≥ï 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//removeÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞Âú®removeNodeÊñπÊ≥ï‰∏≠ÔºåÊâÄ‰ª•Êàë‰ª¨ÈáçÁÇπÁúã‰∏ãÈù¢ÁöÑremoveNodeÊñπÊ≥ïpublic V remove(Object key) &#123; Node&lt;K,V&gt; e; return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value;&#125;final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; //Â¶ÇÊûúÂΩìÂâçkeyÊò†Â∞ÑÂà∞ÁöÑÊ°∂‰∏ç‰∏∫Á©∫ if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) &#123; Node&lt;K,V&gt; node = null, e; K k; V v; //Â¶ÇÊûúÊ°∂‰∏äÁöÑËäÇÁÇπÂ∞±ÊòØË¶ÅÊâæÁöÑkeyÔºåÂàôÁõ¥Êé•ÂëΩ‰∏≠ if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) &#123; //Â¶ÇÊûúÊòØ‰ª•Á∫¢ÈªëÊ†ëÂ§ÑÁêÜÂÜ≤Á™ÅÔºåÂàôÊûÑÂª∫‰∏Ä‰∏™Ê†ëËäÇÁÇπ if (p instanceof TreeNode) node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key); //Â¶ÇÊûúÊòØ‰ª•ÈìæÂºèÁöÑÊñπÂºèÂ§ÑÁêÜÂÜ≤Á™ÅÔºåÂàôÈÄöËøáÈÅçÂéÜÈìæË°®Êù•ÂØªÊâæËäÇÁÇπ else &#123; do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; node = e; break; &#125; p = e; &#125; while ((e = e.next) != null); &#125; &#125; //ÊØîÂØπÊâæÂà∞ÁöÑkeyÁöÑvalueË∑üË¶ÅÂà†Èô§ÁöÑÊòØÂê¶ÂåπÈÖç if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) &#123; //ÈÄöËøáË∞ÉÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÊ≥ïÊù•Âà†Èô§ËäÇÁÇπ if (node instanceof TreeNode) ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable); //‰ΩøÁî®ÈìæË°®ÁöÑÊìç‰ΩúÊù•Âà†Èô§ËäÇÁÇπ else if (node == p) tab[index] = node.next; else p.next = node.next; ++modCount; --size; afterNodeRemoval(node); return node; &#125; &#125; return null;&#125; 5.4 hashÊñπÊ≥ï(Á°ÆÂÆöÂìàÂ∏åÊ°∂Êï∞ÁªÑÁ¥¢Âºï‰ΩçÁΩÆ) ‰∏çÁÆ°Â¢ûÂä†„ÄÅÂà†Èô§„ÄÅÊü•ÊâæÈîÆÂÄºÂØπÔºåÂÆö‰ΩçÂà∞ÂìàÂ∏åÊ°∂Êï∞ÁªÑÁöÑ‰ΩçÁΩÆÈÉΩÊòØÂæàÂÖ≥ÈîÆÁöÑÁ¨¨‰∏ÄÊ≠•„ÄÇÂâçÈù¢ËØ¥ËøáHashMapÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÊï∞ÁªÑÂíåÈìæË°®ÁöÑÁªìÂêàÔºåÊâÄ‰ª•Êàë‰ª¨ÂΩìÁÑ∂Â∏åÊúõËøô‰∏™HashMapÈáåÈù¢ÁöÑÂÖÉÁ¥†‰ΩçÁΩÆÂ∞ΩÈáèÂàÜÂ∏ÉÂùáÂåÄ‰∫õÔºåÂ∞ΩÈáè‰ΩøÂæóÊØè‰∏™‰ΩçÁΩÆ‰∏äÁöÑÂÖÉÁ¥†Êï∞ÈáèÂè™Êúâ‰∏Ä‰∏™ÔºåÈÇ£‰πàÂΩìÊàë‰ª¨Áî®hashÁÆóÊ≥ïÊ±ÇÂæóËøô‰∏™‰ΩçÁΩÆÁöÑÊó∂ÂÄôÔºåÈ©¨‰∏äÂ∞±ÂèØ‰ª•Áü•ÈÅìÂØπÂ∫î‰ΩçÁΩÆÁöÑÂÖÉÁ¥†Â∞±ÊòØÊàë‰ª¨Ë¶ÅÁöÑÔºå‰∏çÁî®ÈÅçÂéÜÈìæË°®ÔºåÂ§ßÂ§ß‰ºòÂåñ‰∫ÜÊü•ËØ¢ÁöÑÊïàÁéá„ÄÇHashMapÂÆö‰ΩçÊï∞ÁªÑÁ¥¢Âºï‰ΩçÁΩÆÔºåÁõ¥Êé•ÂÜ≥ÂÆö‰∫ÜhashÊñπÊ≥ïÁöÑÁ¶ªÊï£ÊÄßËÉΩ„ÄÇ Ê≥®ÊÑègetÊñπÊ≥ïÂíåputÊñπÊ≥ïÊ∫êÁ†Å‰∏≠ÈÉΩÈúÄË¶ÅÂÖàËÆ°ÁÆókeyÊò†Â∞ÑÂà∞Âì™‰∏™Ê°∂‰∏äÔºåÁÑ∂ÂêéÊâçËøõË°å‰πãÂêéÁöÑÊìç‰ΩúÔºåËÆ°ÁÆóÁöÑ‰∏ªË¶Å‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1(n - 1) &amp; hash ‰∏äÈù¢‰ª£Á†Å‰∏≠ÁöÑnÊåáÁöÑÊòØÂìàÂ∏åË°®ÁöÑÂ§ßÂ∞èÔºåhashÊåáÁöÑÊòØkeyÁöÑÂìàÂ∏åÂÄºÔºåhashÊòØÈÄöËøá‰∏ãÈù¢Ëøô‰∏™ÊñπÊ≥ïËÆ°ÁÆóÂá∫Êù•ÁöÑÔºåÈááÁî®‰∫Ü‰∫åÊ¨°ÂìàÂ∏åÁöÑÊñπÂºèÔºåÂÖ∂‰∏≠keyÁöÑhashCodeÊñπÊ≥ïÊòØ‰∏Ä‰∏™nativeÊñπÊ≥ïÔºö 123456static final int hash(Object key) &#123; //jdk1.8 &amp; jdk1.7 int h; // h = key.hashCode() ‰∏∫Á¨¨‰∏ÄÊ≠• ÂèñhashCodeÂÄº // h ^ (h &gt;&gt;&gt; 16) ‰∏∫Á¨¨‰∫åÊ≠• È´ò‰ΩçÂèÇ‰∏éËøêÁÆó return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125; ÂØπ‰∫é‰ªªÊÑèÁªôÂÆöÁöÑÂØπË±°ÔºåÂè™Ë¶ÅÂÆÉÁöÑhashCode()ËøîÂõûÂÄºÁõ∏ÂêåÔºåÈÇ£‰πàÁ®ãÂ∫èË∞ÉÁî®ÊñπÊ≥ï‰∏ÄÊâÄËÆ°ÁÆóÂæóÂà∞ÁöÑHashÁ†ÅÂÄºÊÄªÊòØÁõ∏ÂêåÁöÑ„ÄÇÊàë‰ª¨È¶ñÂÖàÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÊäähashÂÄºÂØπÊï∞ÁªÑÈïøÂ∫¶ÂèñÊ®°ËøêÁÆóÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÂÖÉÁ¥†ÁöÑÂàÜÂ∏ÉÁõ∏ÂØπÊù•ËØ¥ÊòØÊØîËæÉÂùáÂåÄÁöÑ„ÄÇ‰ΩÜÊòØÔºåÊ®°ËøêÁÆóÁöÑÊ∂àËÄóËøòÊòØÊØîËæÉÂ§ßÁöÑÔºåÂú®HashMap‰∏≠ÊòØËøôÊ†∑ÂÅöÁöÑÔºöË∞ÉÁî®ÊñπÊ≥ï‰∫åÊù•ËÆ°ÁÆóËØ•ÂØπË±°Â∫îËØ•‰øùÂ≠òÂú®tableÊï∞ÁªÑÁöÑÂì™‰∏™Á¥¢ÂºïÂ§Ñ„ÄÇ Ëøô‰∏™ÊñπÊ≥ïÈùûÂ∏∏Â∑ßÂ¶ôÔºåÂÆÉÈÄöËøáh &amp; (table.length -1)Êù•ÂæóÂà∞ËØ•ÂØπË±°ÁöÑ‰øùÂ≠ò‰ΩçÔºåËÄåHashMapÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊÄªÊòØ2ÁöÑnÊ¨°ÊñπÔºåËøôÊòØHashMapÂú®ÈÄüÂ∫¶‰∏äÁöÑ‰ºòÂåñ„ÄÇÂΩìlengthÊÄªÊòØ2ÁöÑnÊ¨°ÊñπÊó∂Ôºåh&amp; (length-1)ËøêÁÆóÁ≠â‰ª∑‰∫éÂØπlengthÂèñÊ®°Ôºå‰πüÂ∞±ÊòØh%lengthÔºå‰ΩÜÊòØ&amp;ÊØî%ÂÖ∑ÊúâÊõ¥È´òÁöÑÊïàÁéá„ÄÇ Âú®JDK1.8ÁöÑÂÆûÁé∞‰∏≠Ôºå‰ºòÂåñ‰∫ÜÈ´ò‰ΩçËøêÁÆóÁöÑÁÆóÊ≥ïÔºåÈÄöËøáhashCode()ÁöÑÈ´ò16‰ΩçÂºÇÊàñ‰Ωé16‰ΩçÂÆûÁé∞ÁöÑÔºö(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)Ôºå‰∏ªË¶ÅÊòØ‰ªéÈÄüÂ∫¶„ÄÅÂäüÊïà„ÄÅË¥®ÈáèÊù•ËÄÉËôëÁöÑÔºåËøô‰πàÂÅöÂèØ‰ª•Âú®Êï∞ÁªÑtableÁöÑlengthÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºå‰πüËÉΩ‰øùËØÅËÄÉËôëÂà∞È´ò‰ΩéBitÈÉΩÂèÇ‰∏éÂà∞HashÁöÑËÆ°ÁÆó‰∏≠ÔºåÂêåÊó∂‰∏ç‰ºöÊúâÂ§™Â§ßÁöÑÂºÄÈîÄ„ÄÇ ÊÄªÁªìÂ∞±ÊòØÔºöÁî±‰∫éÂú®ËÆ°ÁÆó‰∏≠‰ΩçËøêÁÆóÊØîÂèñÊ®°ËøêÁÆóÊïàÁéáÈ´òÁöÑÂ§öÔºåÊâÄ‰ª• HashMap ËßÑÂÆöÊï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫ 2^n „ÄÇËøôÊ†∑Áî® 2^n - 1 ÂÅö‰ΩçËøêÁÆó‰∏éÂèñÊ®°ÊïàÊûú‰∏ÄËá¥ÔºåÂπ∂‰∏îÊïàÁéáËøòË¶ÅÈ´òÂá∫ËÆ∏Â§ö„ÄÇËøôÊ†∑ÂõûÁ≠î‰∫Ü‰∏äÊñá‰∏≠ÔºöÂ•ΩÁöÑHashÁÆóÊ≥ïÂà∞Â∫ïÊòØ‰ªÄ‰πà„ÄÇ 5.5 resizeÊñπÊ≥ï 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283final Node&lt;K,V&gt;[] resize() &#123; Node&lt;K,V&gt;[] oldTab = table; int oldCap = (oldTab == null) ? 0 : oldTab.length; int oldThr = threshold; int newCap, newThr = 0; //ËÆ°ÁÆóÊâ©ÂÆπÂêéÁöÑÂ§ßÂ∞è if (oldCap &gt; 0) &#123; //Â¶ÇÊûúÂΩìÂâçÂÆπÈáèË∂ÖËøáÊúÄÂ§ßÂÆπÈáèÔºåÂàôÊó†Ê≥ïËøõË°åÊâ©ÂÆπ if (oldCap &gt;= MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE; return oldTab; &#125; //Ê≤°Ë∂ÖËøáÊúÄÂ§ßÂÄºÂàôÊâ©‰∏∫ÂéüÊù•ÁöÑ‰∏§ÂÄç else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold &#125; else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; else &#123; // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); &#125; if (newThr == 0) &#123; float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; //Êñ∞ÁöÑresizeÈòàÂÄº threshold = newThr; //ÂàõÂª∫Êñ∞ÁöÑÂìàÂ∏åË°® @SuppressWarnings(&#123;"rawtypes","unchecked"&#125;) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; if (oldTab != null) &#123; //ÈÅçÂéÜÊóßÂìàÂ∏åË°®ÁöÑÊØè‰∏™Ê°∂ÔºåÈáçÊñ∞ËÆ°ÁÆóÊ°∂ÈáåÂÖÉÁ¥†ÁöÑÊñ∞‰ΩçÁΩÆ for (int j = 0; j &lt; oldCap; ++j) &#123; Node&lt;K,V&gt; e; if ((e = oldTab[j]) != null) &#123; oldTab[j] = null; //Â¶ÇÊûúÊ°∂‰∏äÂè™Êúâ‰∏Ä‰∏™ÈîÆÂÄºÂØπÔºåÂàôÁõ¥Êé•ÊèíÂÖ• if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; //Â¶ÇÊûúÊòØÈÄöËøáÁ∫¢ÈªëÊ†ëÊù•Â§ÑÁêÜÂÜ≤Á™ÅÁöÑÔºåÂàôË∞ÉÁî®Áõ∏ÂÖ≥ÊñπÊ≥ïÊääÊ†ëÂàÜÁ¶ªÂºÄ else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); //Â¶ÇÊûúÈááÁî®ÈìæÂºèÂ§ÑÁêÜÂÜ≤Á™Å else &#123; // preserve order Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; //ÈÄöËøá‰∏äÈù¢ËÆ≤ÁöÑÊñπÊ≥ïÊù•ËÆ°ÁÆóËäÇÁÇπÁöÑÊñ∞‰ΩçÁΩÆ do &#123; next = e.next; if ((e.hash &amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125; &#125; while ((e = next) != null); if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead; &#125; if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead; &#125; &#125; &#125; &#125; &#125; return newTab;&#125; HashMapÂú®ËøõË°åÊâ©ÂÆπÊó∂Ôºå‰ΩøÁî®ÁöÑrehashÊñπÂºèÈùûÂ∏∏Â∑ßÂ¶ôÔºåÂõ†‰∏∫ÊØèÊ¨°Êâ©ÂÆπÈÉΩÊòØÁøªÂÄçÔºå‰∏éÂéüÊù•ËÆ°ÁÆóÔºàn-1Ôºâ&amp;hashÁöÑÁªìÊûúÁõ∏ÊØîÔºåÂè™ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™bit‰ΩçÔºåÊâÄ‰ª•ËäÇÁÇπË¶Å‰πàÂ∞±Âú®ÂéüÊù•ÁöÑ‰ΩçÁΩÆÔºåË¶Å‰πàÂ∞±Ë¢´ÂàÜÈÖçÂà∞‚ÄúÂéü‰ΩçÁΩÆ+ÊóßÂÆπÈáè‚ÄùËøô‰∏™‰ΩçÁΩÆ„ÄÇ ‰æãÂ¶ÇÔºåÂéüÊù•ÁöÑÂÆπÈáè‰∏∫32ÔºåÈÇ£‰πàÂ∫îËØ•ÊãøhashË∑ü31Ôºà0x11111ÔºâÂÅö‰∏éÊìç‰ΩúÔºõÂú®Êâ©ÂÆπÊâ©Âà∞‰∫Ü64ÁöÑÂÆπÈáè‰πãÂêéÔºåÂ∫îËØ•ÊãøhashË∑ü63Ôºà0x111111ÔºâÂÅö‰∏éÊìç‰Ωú„ÄÇÊñ∞ÂÆπÈáèË∑üÂéüÊù•Áõ∏ÊØîÂè™ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™bit‰ΩçÔºåÂÅáËÆæÂéüÊù•ÁöÑ‰ΩçÁΩÆÂú®23ÔºåÈÇ£‰πàÂΩìÊñ∞Â¢ûÁöÑÈÇ£‰∏™bit‰ΩçÁöÑËÆ°ÁÆóÁªìÊûú‰∏∫0Êó∂ÔºåÈÇ£‰πàËØ•ËäÇÁÇπËøòÊòØÂú®23ÔºõÁõ∏ÂèçÔºåËÆ°ÁÆóÁªìÊûú‰∏∫1Êó∂ÔºåÂàôËØ•ËäÇÁÇπ‰ºöË¢´ÂàÜÈÖçÂà∞23+31ÁöÑÊ°∂‰∏ä„ÄÇ ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÔºöÊ≠£ÊòØÂõ†‰∏∫ËøôÊ†∑Â∑ßÂ¶ôÁöÑrehashÊñπÂºèÔºå‰øùËØÅ‰∫Ürehash‰πãÂêéÊØè‰∏™Ê°∂‰∏äÁöÑËäÇÁÇπÊï∞ÂøÖÂÆöÂ∞è‰∫éÁ≠â‰∫éÂéüÊù•Ê°∂‰∏äÁöÑËäÇÁÇπÊï∞ÔºåÂç≥‰øùËØÅ‰∫Ürehash‰πãÂêé‰∏ç‰ºöÂá∫Áé∞Êõ¥‰∏•ÈáçÁöÑÂÜ≤Á™Å„ÄÇÂõûÁ≠î‰∫Ü‰∏äÊñá‰∏≠Â•ΩÁöÑÊâ©ÂÆπÊú∫Âà∂„ÄÇ ÂÖ≠„ÄÅÊÄªÁªì HashMapÁöÑÁªìÊûÑÂ∫ïÂ±ÇÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÊØè‰∏™Êï∞ÁªÑÂÖÉÁ¥†ÊòØ‰∏Ä‰∏™Ê°∂ÔºåÂêéÈù¢ÂèØËÉΩ‰ºöËøûÁùÄ‰∏Ä‰∏≤Âõ†‰∏∫Á¢∞ÊíûËÄåËÅöÂú®‰∏ÄËµ∑ÁöÑ(key,value)ËäÇÁÇπÔºå‰ª•ÈìæË°®ÁöÑÂΩ¢ÂºèÊàñËÄÖÊ†ëÁöÑÂΩ¢ÂºèÊåÇÁùÄ ÊåâÁÖßÂéüÊù•ÁöÑÊãâÈìæÊ≥ïÊù•Ëß£ÂÜ≥ÂÜ≤Á™ÅÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ê°∂‰∏äÁöÑÂÜ≤Á™ÅÂæà‰∏•ÈáçÁöÑËØùÔºåÊòØ‰ºöÂØºËá¥ÂìàÂ∏åË°®ÁöÑÊïàÁéáÈôç‰ΩéËá≥OÔºànÔºâÔºåËÄåÈÄöËøáÁ∫¢ÈªëÊ†ëÁöÑÊñπÂºèÔºåÂèØ‰ª•ÊääÊïàÁéáÊîπËøõËá≥OÔºàlognÔºâ„ÄÇÁõ∏ÊØîÈìæÂºèÁªìÊûÑÁöÑËäÇÁÇπÔºåÊ†ëÂûãÁªìÊûÑÁöÑËäÇÁÇπ‰ºöÂç†Áî®ÊØîËæÉÂ§öÁöÑÁ©∫Èó¥ÔºåÊâÄ‰ª•ËøôÊòØ‰∏ÄÁßç‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÊîπËøõÊñπÂºè„ÄÇ thresholdÊòØÊï∞ÁªÑÈïøÂ∫¶Êâ©ÂÆπÁöÑ‰∏¥ÁïåÂÄº modCountÂ≠óÊÆµ‰∏ªË¶ÅÁî®Êù•ËÆ∞ÂΩïHashMapÂÜÖÈÉ®ÁªìÊûÑÂèëÁîüÂèòÂåñÁöÑÊ¨°Êï∞ÔºåËøôÈáåÁªìÊûÑÂèòÂåñÂøÖÈ°ªÊòØÊñ∞ÁöÑÂÄºÂ°ûËøõÊù•ÊàñËÄÖÊüê‰∏™ÂÄºÂà†Èô§ËøôÁßçÁ±ªÂûãÔºåËÄå‰∏çÊòØ‰ªÖ‰ªÖÊòØË¶ÜÁõñ Âè™ÊúâÂêåÊó∂Êª°Ë∂≥ÔºöË°®‰∏≠Êï∞ÊçÆÂÆπÈáèÂ∑≤ÁªèÊâ©ÂÆπÂà∞MIN_TREEIFY_CAPACITYËøô‰∏™ÈïøÂ∫¶ÔºåÂπ∂‰∏îÊ°∂ÈáåÁöÑÊï∞ÊçÆ‰∏™Êï∞ËææÂà∞8‰∏™ÁöÑÊó∂ÂÄôÔºåÊâç‰ºöÂ∞ÜËØ•Ê°∂ÈáåÁöÑÁªìÊûÑËøõË°åÊ†ëÂåñ„ÄÇ Â•ΩÁöÑhashÁÆóÊ≥ïÔºöÁî±‰∫éÂú®ËÆ°ÁÆó‰∏≠‰ΩçËøêÁÆóÊØîÂèñÊ®°ËøêÁÆóÊïàÁéáÈ´òÁöÑÂ§öÔºåÊâÄ‰ª•HashMapËßÑÂÆöÊï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫ 2^n „ÄÇËøôÊ†∑Áî® 2^n - 1 ‰∏é hash ÂÅö‰ΩçËøêÁÆó‰∏éÂèñÊ®°ÊïàÊûú‰∏ÄËá¥ÔºåÂπ∂‰∏îÊïàÁéáËøòË¶ÅÈ´òÂá∫ËÆ∏Â§ö„ÄÇ Â•ΩÁöÑÊâ©ÂÆπÊú∫Âà∂ÔºöÂõ†‰∏∫ÊØèÊ¨°Êâ©ÂÆπÈÉΩÊòØÁøªÂÄçÔºå‰∏éÂéüÊù•ËÆ°ÁÆóÔºàn-1Ôºâ&amp;hashÁöÑÁªìÊûúÁõ∏ÊØîÔºåÂè™ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™bit‰ΩçÔºåÊâÄ‰ª•ËäÇÁÇπË¶Å‰πàÂ∞±Âú®ÂéüÊù•ÁöÑ‰ΩçÁΩÆÔºåË¶Å‰πàÂ∞±Ë¢´ÂàÜÈÖçÂà∞‚ÄúÂéü‰ΩçÁΩÆ+ÊóßÂÆπÈáè‚ÄùËøô‰∏™‰ΩçÁΩÆ„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÔºöÊ≠£ÊòØÂõ†‰∏∫ËøôÊ†∑Â∑ßÂ¶ôÁöÑrehashÊñπÂºèÔºå‰øùËØÅ‰∫Ürehash‰πãÂêéÊØè‰∏™Ê°∂‰∏äÁöÑËäÇÁÇπÊï∞ÂøÖÂÆöÂ∞è‰∫éÁ≠â‰∫éÂéüÊù•Ê°∂‰∏äÁöÑËäÇÁÇπÊï∞ÔºåÂç≥‰øùËØÅ‰∫Ürehash‰πãÂêé‰∏ç‰ºöÂá∫Áé∞Êõ¥‰∏•ÈáçÁöÑÂÜ≤Á™Å„ÄÇ ËøòÊúâÂ∞±ÊòØË¶ÅËÆ∞‰ΩèputÁöÑËøáÁ®ã„ÄÇ Êï¥ÁêÜËá™Ôºö https://zhuanlan.zhihu.com/p/21673805 http://blog.csdn.net/u013124587/article/details/52649867]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hashcode/Equals]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F4.hashcode%E5%92%8Cequals%2F</url>
    <content type="text"><![CDATA[hashcodeÊ∂âÂèäÂà∞ÈõÜÂêàHashMapÁ≠âÈõÜÂêàÔºåÊ≠§ÁØá‰æßÈáç‰∫é‰∫ÜËß£hashcodeÂíåequalsÊñπÊ≥ïÁöÑ‰ΩúÁî®ÁöÑÂéüÁêÜ„ÄÇÊúâÂä©‰∫é‰∏ã‰∏ÄÁØáHashMapÁöÑÁêÜËß£„ÄÇ ‰∏Ä„ÄÅHashÊòØ‰ªÄ‰πà HashÊòØÊï£ÂàóÁöÑÊÑèÊÄùÔºåÂ∞±ÊòØÊää‰ªªÊÑèÈïøÂ∫¶ÁöÑËæìÂÖ•ÔºåÈÄöËøáÊï£ÂàóÁÆóÊ≥ïÂèòÊç¢ÊàêÂõ∫ÂÆöÈïøÂ∫¶ÁöÑËæìÂá∫ÔºåËØ•ËæìÂá∫Â∞±ÊòØÊï£ÂàóÂÄº„ÄÇËøô‰∏™Áé©ÊÑèËøòÂèØ‰ª•ÂÅöÂä†ÂØÜ„ÄÇ ‰∏çÂêåÂÖ≥ÈîÆÂ≠óÁªèËøáÊï£ÂàóÁÆóÊ≥ïÂèòÊç¢ÂêéÂèØËÉΩÂæóÂà∞Âêå‰∏Ä‰∏™Êï£ÂàóÂú∞ÂùÄÔºåËøôÁßçÁé∞Ë±°Áß∞‰∏∫Á¢∞Êíû„ÄÇ Â¶ÇÊûú‰∏§‰∏™HashÂÄº‰∏çÂêåÔºàÂâçÊèêÊòØÂêå‰∏ÄHashÁÆóÊ≥ïÔºâÔºåÈÇ£‰πàËøô‰∏§‰∏™HashÂÄºÂØπÂ∫îÁöÑÂéüÂßãËæìÂÖ•ÂøÖÂÆö‰∏çÂêå ‰∫å„ÄÅ‰ªÄ‰πàÊòØhashcode HashCodeÁöÑÂ≠òÂú®‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÊü•ÊâæÁöÑÂø´Êç∑ÊÄßÔºåHashCodeÊòØÁî®Êù•Âú®Êï£ÂàóÂ≠òÂÇ®ÁªìÊûÑ‰∏≠Á°ÆÂÆöÂØπË±°ÁöÑÂ≠òÂÇ®Âú∞ÂùÄÁöÑ„ÄÇ Â¶ÇÊûú‰∏§‰∏™ÂØπË±°ÁöÑHashCodeÁõ∏ÂêåÔºå‰∏ç‰ª£Ë°®‰∏§‰∏™ÂØπË±°Â∞±Áõ∏ÂêåÔºåÂè™ËÉΩËØ¥ÊòéËøô‰∏§‰∏™ÂØπË±°Âú®Êï£ÂàóÂ≠òÂÇ®ÁªìÊûÑ‰∏≠ÔºåÂ≠òÊîæ‰∫éÂêå‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ Â¶ÇÊûúÂØπË±°ÁöÑequalsÊñπÊ≥ïË¢´ÈáçÂÜôÔºåÈÇ£‰πàÂØπË±°ÁöÑHashCodeÊñπÊ≥ï‰πüÂ∞ΩÈáèÈáçÂÜô„ÄÇ‰∏∫‰ªÄ‰πàÂë¢Ôºü‰∏ãÊñá‰ºöËØ¥„ÄÇ ‰∏â„ÄÅHashCodeÊúâ‰ªÄ‰πàÁî® ÊØîÊñπËØ¥SetÈáåÈù¢Â∑≤ÁªèÊúâ1000‰∏™ÂÖÉÁ¥†‰∫ÜÔºåÈÇ£‰πàÁ¨¨1001‰∏™ÂÖÉÁ¥†ËøõÊù•ÁöÑÊó∂ÂÄôÔºåÊúÄÂ§öÂèØËÉΩË∞ÉÁî®1000Ê¨°equalsÊñπÊ≥ïÔºåÂ¶ÇÊûúequalsÊñπÊ≥ïÂÜôÂæóÂ§çÊùÇÔºåÂØπÊØîÁöÑ‰∏úË•øÁâπÂà´Â§öÔºåÈÇ£‰πàÊïàÁéá‰ºöÂ§ßÂ§ßÈôç‰Ωé„ÄÇ ‰ΩøÁî®HashCodeÂ∞±‰∏ç‰∏ÄÊ†∑‰∫ÜÔºåÊØîÊñπËØ¥HashSetÔºåÂ∫ïÂ±ÇÊòØÂü∫‰∫éHashMapÂÆûÁé∞ÁöÑÔºåÂÖàÈÄöËøáHashCodeÂèñ‰∏Ä‰∏™Ê®°ÔºåËøôÊ†∑‰∏Ä‰∏ãÂ≠êÂ∞±Âõ∫ÂÆöÂà∞Êüê‰∏™‰ΩçÁΩÆ‰∫ÜÔºåÂ¶ÇÊûúËøô‰∏™‰ΩçÁΩÆ‰∏äÊ≤°ÊúâÂÖÉÁ¥†ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ËÇØÂÆöHashSet‰∏≠ÂøÖÂÆöÊ≤°ÊúâÂíåÊñ∞Ê∑ªÂä†ÁöÑÂÖÉÁ¥†equalsÁöÑÂÖÉÁ¥†ÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•Â≠òÊîæ‰∫ÜÔºåÈÉΩ‰∏çÈúÄË¶ÅÊØîËæÉÔºõ Â¶ÇÊûúËøô‰∏™‰ΩçÁΩÆ‰∏äÊúâÂÖÉÁ¥†‰∫ÜÔºåÈÄê‰∏ÄÊØîËæÉÔºåÊØîËæÉÁöÑÊó∂ÂÄôÂÖàÊØîËæÉHashCodeÔºåHashCodeÈÉΩ‰∏çÂêåÊé•‰∏ãÂéªÈÉΩ‰∏çÁî®ÊØî‰∫ÜÔºåËÇØÂÆö‰∏ç‰∏ÄÊ†∑ÔºåHashCodeÁõ∏Á≠âÔºåÂÜçequalsÊØîËæÉÔºåÊ≤°ÊúâÁõ∏ÂêåÁöÑÂÖÉÁ¥†Â∞±Â≠òÔºåÊúâÁõ∏ÂêåÁöÑÂÖÉÁ¥†Â∞±‰∏çÂ≠ò„ÄÇ Â¶ÇÊûúÂéüÊù•ÁöÑSetÈáåÈù¢ÊúâÁõ∏ÂêåÁöÑÂÖÉÁ¥†ÔºåÂè™Ë¶ÅHashCodeÁöÑÁîüÊàêÊñπÂºèÂÆö‰πâÂæóÂ•ΩÔºà‰∏çÈáçÂ§çÔºâÔºå‰∏çÁÆ°SetÈáåÈù¢ÂéüÊù•ÊúâÂ§öÂ∞ëÂÖÉÁ¥†ÔºåÂè™ÈúÄË¶ÅÊâßË°å‰∏ÄÊ¨°ÁöÑequalsÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÂÆûÈôÖË∞ÉÁî®equalsÊñπÊ≥ïÁöÑÊ¨°Êï∞Â§ßÂ§ßÈôç‰ΩéÔºåÊèêÈ´ò‰∫ÜÊïàÁéá„ÄÇ ÂΩì‰ø©‰∏™ÂØπË±°ÁöÑ`hashCode`ÂÄºÁõ∏ÂêåÁöÑÊó∂ÂÄôÔºå`Hashset`‰ºöÂ∞ÜÂØπË±°‰øùÂ≠òÂú®Âêå‰∏Ä‰∏™‰ΩçÁΩÆÔºå‰ΩÜÊòØ‰ªñ‰ª¨`equals`ËøîÂõû`false`ÔºåÊâÄ‰ª•ÂÆûÈôÖ‰∏äËøô‰∏™‰ΩçÁΩÆÈááÁî®ÈìæÂºèÁªìÊûÑÊù•‰øùÂ≠òÂ§ö‰∏™ÂØπË±°„ÄÇ Âõõ„ÄÅ‰∏∫‰ªÄ‰πàÈáçÂÜôObjectÁöÑequals()ÊñπÊ≥ïÂ∞ΩÈáèË¶ÅÈáçÂÜôObjectÁöÑhashCode()ÊñπÊ≥ï Èù¢‰∏¥ÈóÆÈ¢òÔºöËã•‰∏§‰∏™ÂØπË±°equalsÁõ∏Á≠âÔºå‰ΩÜÁî±‰∫é‰∏çÂú®‰∏Ä‰∏™Âå∫Èó¥ÔºåÂõ†‰∏∫hashCodeÁöÑÂÄºÂú®ÈáçÂÜô‰πãÂâçÊòØÂØπÂÜÖÂ≠òÂú∞ÂùÄËÆ°ÁÆóÂæóÂá∫ÔºåÊâÄ‰ª•Ê†πÊú¨Ê≤°ÊúâÊú∫‰ºöËøõË°åÊØîËæÉÔºå‰ºöË¢´ËÆ§‰∏∫ÊòØ‰∏çÂêåÁöÑÂØπË±°(ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàËøòË¶ÅÈáçÂÜôhashcodeÊñπÊ≥ï‰∫Ü)„ÄÇÊâÄ‰ª•JavaÂØπ‰∫éeqaulsÊñπÊ≥ïÂíåhashCodeÊñπÊ≥ïÊòØËøôÊ†∑ËßÑÂÆöÁöÑÔºö 1 Â¶ÇÊûú‰∏§‰∏™ÂØπË±°Áõ∏Âêå(equals‰∏∫true)ÔºåÈÇ£‰πàÂÆÉ‰ª¨ÁöÑhashCodeÂÄº‰∏ÄÂÆöË¶ÅÁõ∏Âêå„ÄÇ‰πüÂëäËØâÊàë‰ª¨ÈáçÂÜôequalsÊñπÊ≥ïÔºå‰∏ÄÂÆöË¶ÅÈáçÂÜôhashCodeÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØËØ¥hashCodeÂÄºË¶ÅÂíåÁ±ª‰∏≠ÁöÑÊàêÂëòÂèòÈáèÊåÇ‰∏äÈí©ÔºåÂØπË±°Áõ∏Âêå‚Äì&gt;ÊàêÂëòÂèòÈáèÁõ∏Âêå‚Äî-&gt;hashCodeÂÄº‰∏ÄÂÆöÁõ∏Âêå„ÄÇ 2 Â¶ÇÊûú‰∏§‰∏™ÂØπË±°ÁöÑhashCodeÁõ∏Âêå(Âè™ÊòØÊò†Â∞ÑÂà∞Âêå‰∏Ä‰∏™‰ΩçÁΩÆËÄåÂ∑≤)ÔºåÂÆÉ‰ª¨Âπ∂‰∏ç‰∏ÄÂÆöÁõ∏ÂêåÔºåËøôÈáåÁöÑÂØπË±°Áõ∏ÂêåÊåáÁöÑÊòØÁî®eqaulsÊñπÊ≥ïÊØîËæÉ„ÄÇ ÁÆÄÂçïÊù•ËØ¥ÔºåÂ¶ÇÊûúÂè™ÈáçÂÜôequalsÊñπÊ≥ïËÄå‰∏çÈáçÂÜôhashcodeÊñπÊ≥ïÔºå‰ºöÂØºËá¥ÈáçÂ§çÂÖÉÁ¥†ÁöÑ‰∫ßÁîü„ÄÇÂÖ∑‰ΩìÈÄöËøá‰∏ãÈù¢ÁöÑ‰æãÂ≠êËøõË°åËØ¥Êòé„ÄÇ ‰∫î„ÄÅ‰∏æ‰æã 6.1 StudentÁ±ª ÂæàÁÆÄÂçïÔºåÂÆö‰πâ‰∫ÜidÂíåname‰∏§‰∏™Â≠óÊÆµÔºåÊó†ÂèÇÂíåÊúâÂèÇÊûÑÈÄ†ÂáΩÊï∞ÔºåtoStringÊñπÊ≥ï„ÄÇ 1234567891011121314151617181920public class Student &#123; private int id; private String name; get(),set()Áï•... public Student()&#123;&#125; public Student(int id, String name) &#123; super(); this.id = id; this.name = name; &#125; @Override public String toString() &#123; return "Student [id=" + id + ", name=" + name + "]"; &#125;&#125; 6.2 mainÊñπÊ≥ï 1234567891011121314151617181920public static void main(String[] args) &#123; Student student1 = new Student(1,"hh"); Student student2 = new Student(1,"hh"); Student student3 = new Student(2,"gg"); HashSet&lt;Student&gt; set = new HashSet&lt;Student&gt;(); set.add(student1); set.add(student2); set.add(student3); set.add(student1);//ÈáçÂ§çÊ∑ªÂä†‰∫Üstudent1 System.out.println("setÈõÜÂêàÂÆπÈáè‰∏∫: "+set.size()); Iterator&lt;Student&gt; iterator = set.iterator(); while (iterator.hasNext()) &#123; Student student = iterator.next(); System.out.println(student+"---"+student.hashCode()); &#125; &#125; ÊâßË°åÁªìÊûúÔºö 1234setÈõÜÂêàÂÆπÈáè‰∏∫: 3Student [id=1, name=hh]---1735600054Student [id=1, name=hh]---356573597Student [id=2, name=gg]---21685669 Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂè™Ë¶ÅÊòØnewÁöÑÂØπË±°Ôºå‰ªñ‰ª¨ÁöÑhashcodeÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇÊâÄ‰ª•ÔºåÂ∞±‰ºöËÆ§‰∏∫‰ªñ‰ª¨ÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÂØπË±°„ÄÇÊâÄ‰ª•ÔºåÈõÜÂêàÈáåÈù¢Êï∞Èáè‰∏∫3. 6.3 Âè™ÈáçÂÜôequals()ÊñπÊ≥ïÔºåËÄå‰∏çÈáçÂÜôHashCode()ÊñπÊ≥ï ËæìÂá∫Ôºö 1234setÈõÜÂêàÂÆπÈáè‰∏∫: 3Student [id=2, name=gg]---2018699554Student [id=1, name=hh]---366712642Student [id=1, name=hh]---1829164700 ÁªìËÆ∫ÔºöË¶ÜÁõñequalsÔºàObject objÔºâ‰ΩÜ‰∏çË¶ÜÁõñhashCode(),ÂØºËá¥Êï∞ÊçÆ‰∏çÂîØ‰∏ÄÊÄß„ÄÇ Âú®ËøôÈáåÔºåÂÖ∂ÂÆûÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ôºåstudent1Âíåstudent2ÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ÂØπË±°Ôºå‰ΩÜÊòØÁî±‰∫éÈÉΩÊòØnewÂπ∂‰∏îÊ≤°ÊúâÈáçÂÜôhashcodeÂØºËá¥‰ªñ‰ª¨ÂèòÊàê‰∫Ü‰∏§‰∏™‰∏ç‰∏ÄÊ†∑ÁöÑÂØπË±°„ÄÇ ÂàÜÊûêÔºö Ôºà1ÔºâÂΩìÊâßË°åset.add(student1)Êó∂ÔºåÈõÜÂêà‰∏∫Á©∫ÔºåÁõ¥Êé•Â≠òÂÖ•ÈõÜÂêàÔºõ Ôºà2ÔºâÂΩìÊâßË°åset.add(student2)Êó∂ÔºåÈ¶ñÂÖàÂà§Êñ≠ËØ•ÂØπË±°Ôºàstudent2ÔºâÁöÑhashCodeÂÄºÊâÄÂú®ÁöÑÂ≠òÂÇ®Âå∫ÂüüÊòØÂê¶ÊúâÁõ∏ÂêåÁöÑhashCodeÔºåÂõ†‰∏∫Ê≤°ÊúâË¶ÜÁõñhashCodeÊñπÊ≥ïÔºåÊâÄ‰ª•jdk‰ΩøÁî®ÈªòËÆ§ObjectÁöÑhashCodeÊñπÊ≥ïÔºåËøîÂõûÂÜÖÂ≠òÂú∞ÂùÄËΩ¨Êç¢ÂêéÁöÑÊï¥Êï∞ÔºåÂõ†‰∏∫‰∏çÂêåÂØπË±°ÁöÑÂú∞ÂùÄÂÄº‰∏çÂêåÔºåÊâÄ‰ª•ËøôÈáå‰∏çÂ≠òÂú®‰∏éstudent2Áõ∏ÂêåhashCodeÂÄºÁöÑÂØπË±°ÔºåÂõ†Ê≠§jdkÈªòËÆ§‰∏çÂêåhashCodeÂÄºÔºåequals‰∏ÄÂÆöËøîÂõûfalseÔºåÊâÄ‰ª•Áõ¥Êé•Â≠òÂÖ•ÈõÜÂêà„ÄÇ Ôºà3ÔºâÂΩìÊâßË°åset.add(student3)Êó∂,‰∏é2ÂêåÁêÜ„ÄÇ Ôºà4ÔºâÂΩìÊúÄÂêéÊâßË°åset.add(student1)Êó∂ÔºåÂõ†‰∏∫student1Â∑≤ÁªèÂ≠òÂÖ•ÈõÜÂêàÔºåÂêå‰∏ÄÂØπË±°ËøîÂõûÁöÑhashCodeÂÄºÊòØ‰∏ÄÊ†∑ÁöÑÔºåÁªßÁª≠Âà§Êñ≠equalsÊòØÂê¶ËøîÂõûtrueÔºåÂõ†‰∏∫ÊòØÂêå‰∏ÄÂØπË±°ÊâÄ‰ª•ËøîÂõûtrue„ÄÇÊ≠§Êó∂jdkËÆ§‰∏∫ËØ•ÂØπË±°Â∑≤ÁªèÂ≠òÂú®‰∫éÈõÜÂêà‰∏≠ÔºåÊâÄ‰ª•ËàçÂºÉ„ÄÇ 6.4 Âè™ÈáçÂÜôHashCode()ÊñπÊ≥ïÔºåequals()ÊñπÊ≥ïÁõ¥Êé•ËøîÂõûfalse 1234setÈõÜÂêàÂÆπÈáè‰∏∫: 3Student [id=1, name=hh]---4320Student [id=1, name=hh]---4320Student [id=2, name=gg]---4319 ÊåâÁÖß‰∏äÈù¢ÁöÑÂàÜÊûêÔºåÂèØËÉΩ‰ºöËßâÂæóÈáåÈù¢Â∫îËØ•Ë£Ö4‰∏™ÔºåÂõ†‰∏∫‰∏§Ê¨°addÁöÑstudent1ÔºåËôΩÁÑ∂‰ªñ‰ª¨ÁöÑhashcode‰∏ÄÊ†∑Ôºå‰ΩÜÊòØequalsÁõ¥Êé•ËøîÂõûfalseÔºåÈÇ£‰πàÂ∫îËØ•Âà§ÂÆö‰∏∫‰∏§‰∏™‰∏çÂêåÁöÑÂØπË±°„ÄÇ‰ΩÜÊòØÁªìÊûúÁ°ÆË∑üÊàë‰ª¨È¢ÑÊÉ≥ÁöÑ‰∏ç‰∏ÄÊ†∑„ÄÇ ÂàÜÊûêÔºö È¶ñÂÖàstudent1Âíåstudent2ÁöÑÂØπË±°ÊØîËæÉhashCodeÔºåÂõ†‰∏∫ÈáçÂÜô‰∫ÜHashCodeÊñπÊ≥ïÔºåÊâÄ‰ª•hashcodeÁõ∏Á≠â,ÁÑ∂ÂêéÊØîËæÉ‰ªñ‰ª¨‰∏§ÁöÑequalsÊñπÊ≥ïÔºåÂõ†‰∏∫equalsÊñπÊ≥ïÂßãÁªàËøîÂõûfalse,ÊâÄ‰ª•student1Âíåstudent2‰πüÊòØ‰∏çÁõ∏Á≠âÁöÑÔºåÊâÄ‰ª•student2‰πüË¢´ÊîæËøõ‰∫Üset È¶ñÂÖàstudent1(student2)Âíåstudent3ÁöÑÂØπË±°ÊØîËæÉhashCodeÔºå‰∏çÁõ∏Á≠âÔºåÊâÄ‰ª•student3ÊîæËøõset‰∏≠ ÊúÄÂêéÂÜçÁúãÊúÄÂêéÈáçÂ§çÊ∑ªÂä†ÁöÑstudent1,‰∏éÁ¨¨‰∏Ä‰∏™student1ÁöÑhashCodeÊòØÁõ∏Á≠âÁöÑÔºåÂú®ÊØîËæÉequalsÊñπÊ≥ïÔºåÂõ†‰∏∫equalsËøîÂõûfalse,ÊâÄ‰ª•student1Âíåstudent4‰∏çÁõ∏Á≠â;ÂêåÊ†∑Ôºåstudent2Âíåstudent4‰πüÊòØ‰∏çÁõ∏Á≠âÁöÑ;student3Âíåstudent4ÁöÑhashcodeÈÉΩ‰∏çÁõ∏Á≠âÔºåÊâÄ‰ª•ËÇØÂÆö‰∏çÁõ∏Á≠âÁöÑÔºåÊâÄ‰ª•ÊúÄÂêé‰∏Ä‰∏™ÈáçÂ§çÁöÑstudent1Â∫îËØ•ÂèØ‰ª•ÊîæÂà∞setÈõÜÂêà‰∏≠ÔºåÈÇ£‰πàÁªìÊûúÂ∫îËØ•ÊòØsize:4,ÈÇ£‰∏∫‰ªÄ‰πà‰ºöÊòØ3Âë¢Ôºü ËøôÊó∂ÂÄôÊàë‰ª¨Â∞±ÈúÄË¶ÅÊü•ÁúãHashSetÁöÑÊ∫êÁ†Å‰∫ÜÔºå‰∏ãÈù¢ÊòØHashSet‰∏≠ÁöÑaddÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÔºö 123public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; ËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÂÖ∂ÂÆûHashSetÊòØÂü∫‰∫éHashMapÂÆûÁé∞ÁöÑÔºåÊàë‰ª¨Âú®ÁÇπÂáªHashMapÁöÑputÊñπÊ≥ïÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123; Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else &#123; for (int binCount = 0; ; ++binCount) &#123; if ((e = p.next) == null) &#123; p.next = newNode(hash, key, value, null); if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; &#125; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; ++modCount; if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null;&#125; È¶ñÂÖàÊòØÂà§Êñ≠hashCodeÊòØÂê¶Áõ∏Á≠âÔºå‰∏çÁõ∏Á≠âÁöÑËØùÔºåÁõ¥Êé•Ë∑≥ËøáÔºåÁõ∏Á≠âÁöÑËØùÔºåÁÑ∂ÂêéÂÜçÊù•ÊØîËæÉËøô‰∏§‰∏™ÂØπË±°ÊòØÂê¶Áõ∏Á≠âÊàñËÄÖËøô‰∏§‰∏™ÂØπË±°ÁöÑequalsÊñπÊ≥ïÔºåÂõ†‰∏∫ÊòØËøõË°åÁöÑÊàñÊìç‰ΩúÔºåÊâÄ‰ª•Âè™Ë¶ÅÊúâ‰∏Ä‰∏™ÊàêÁ´ãÂç≥ÂèØÔºåÈÇ£ËøôÈáåÊàë‰ª¨Â∞±ÂèØ‰ª•Ëß£Èáä‰∫ÜÔºåÂÖ∂ÂÆû‰∏äÈù¢ÁöÑÈÇ£‰∏™ÈõÜÂêàÁöÑÂ§ßÂ∞èÊòØ3,Âõ†‰∏∫ÊúÄÂêéÁöÑ‰∏Ä‰∏™r1Ê≤°ÊúâÊîæËøõÂéªÔºå‰ª•‰∏∫r1==r1ËøîÂõûtrueÁöÑÔºåÊâÄ‰ª•Ê≤°ÊúâÊîæËøõÂéª‰∫Ü„ÄÇÊâÄ‰ª•ÈõÜÂêàÁöÑÂ§ßÂ∞èÊòØ3ÔºåÂ¶ÇÊûúÊàë‰ª¨Â∞ÜhashCodeÊñπÊ≥ïËÆæÁΩÆÊàêÂßãÁªàËøîÂõûfalseÁöÑËØùÔºåËøô‰∏™ÈõÜÂêàÂ∞±ÊòØ4‰∫Ü„ÄÇ 6.5 ÂêåÊó∂ÈáçÂÜô ÊàëÁöÑÂÜôÊ≥ïÊòØÔºö 12345678910111213141516171819@Overridepublic int hashCode() &#123; int result = 17; result = result * 31 + name.hashCode(); result = result * 31 + id; return result;&#125;@Overridepublic boolean equals(Object obj) &#123; if(obj == this) return true; if(!(obj instanceof Student)) return false; Student o = (Student)obj; return o.name.equals(name) &amp;&amp; o.id == id;&#125; ÁªìÊûúÔºö 123setÈõÜÂêàÂÆπÈáè‰∏∫: 2Student [id=2, name=gg]---118515Student [id=1, name=hh]---119506 ËææÂà∞Êàë‰ª¨È¢ÑÊúüÁöÑÊïàÊûú„ÄÇ ÂÖ≠„ÄÅÂÜÖÂ≠òÊ≥ÑÈú≤ Êàë‰ª¨‰∏äÈù¢ÂÆûÈ™å‰∫ÜÈáçÂÜôequalsÂíåhashcodeÊñπÊ≥ïÔºåÊâßË°åmainÔºåÊâßË°åÁªìÊûúÊòØÔºö 123setÈõÜÂêàÂÆπÈáè‰∏∫: 2Student [id=1, name=hh]---4320Student [id=2, name=gg]---4319 Â∞ÜmainÊñπÊ≥ïÊîπ‰∏∫Ôºö 1234567891011121314151617181920212223242526272829public static void main(String[] args) &#123; Student student1 = new Student(1,"hh"); Student student2 = new Student(1,"hh"); Student student3 = new Student(2,"gg"); HashSet&lt;Student&gt; set = new HashSet&lt;Student&gt;(); set.add(student1); set.add(student2); set.add(student3); set.add(student1);//ÈáçÂ§çÊ∑ªÂä†‰∫Üstudent1 System.out.println("setÈõÜÂêàÂÆπÈáè‰∏∫: "+set.size()); //------Êñ∞Â¢ûÁöÑÂºÄÂßã------- student3.setId(11); set.remove(student3); System.out.println("setÈõÜÂêàÂÆπÈáè‰∏∫: "+set.size()); //------Êñ∞Â¢ûÁöÑÁªìÊùü------- Iterator&lt;Student&gt; iterator = set.iterator(); while (iterator.hasNext()) &#123; Student student = iterator.next(); System.out.println(student+"---"+student.hashCode()); &#125; &#125; ËøêË°åÁªìÊûúÊòØÔºö 1234setÈõÜÂêàÂÆπÈáè‰∏∫: 2setÈõÜÂêàÂÆπÈáè‰∏∫: 2Student [id=1, name=hh]---4320Student [id=11, name=gg]---4598 Êàë‰ª¨Ë∞ÉÁî®‰∫ÜremoveÂà†Èô§student3ÂØπË±°Ôºå‰ª•‰∏∫Âà†Èô§‰∫Üstudent3,‰ΩÜ‰∫ãÂÆû‰∏äÂπ∂Ê≤°ÊúâÂà†Èô§ÔºåËøôÂ∞±Âè´ÂÅöÂÜÖÂ≠òÊ≥ÑÈú≤ÔºåÂ∞±ÊòØ‰∏çÁî®ÁöÑÂØπË±°‰ΩÜÊòØ‰ªñËøòÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇÊâÄ‰ª•Êàë‰ª¨Â§öÊ¨°ËøôÊ†∑Êìç‰Ωú‰πãÂêéÔºåÂÜÖÂ≠òÂ∞±ÁàÜ‰∫Ü„ÄÇ ÂéüÂõ†Ôºö Âú®Ë∞ÉÁî®removeÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºå‰ºöÂÖà‰ΩøÁî®ÂØπË±°ÁöÑhashCodeÂÄºÂéªÊâæÂà∞Ëøô‰∏™ÂØπË±°ÔºåÁÑ∂ÂêéËøõË°åÂà†Èô§ÔºåËøôÁßçÈóÆÈ¢òÂ∞±ÊòØÂõ†‰∏∫Êàë‰ª¨Âú®‰øÆÊîπ‰∫ÜÂØπË±°student3ÁöÑidÂ±ûÊÄßÁöÑÂÄºÔºåÂèàÂõ†‰∏∫RectObjectÂØπË±°ÁöÑhashCodeÊñπÊ≥ï‰∏≠ÊúâidÂÄºÂèÇ‰∏éËøêÁÆó,ÊâÄ‰ª•student3ÂØπË±°ÁöÑhashCodeÂ∞±ÂèëÁîüÊîπÂèò‰∫ÜÔºåÊâÄ‰ª•removeÊñπÊ≥ï‰∏≠Âπ∂Ê≤°ÊúâÊâæÂà∞student3‰∫ÜÔºåÊâÄ‰ª•Âà†Èô§Â§±Ë¥•„ÄÇÂç≥student3ÁöÑhashCodeÂèò‰∫ÜÔºå‰ΩÜÊòØ‰ªñÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆÊ≤°ÊúâÊõ¥Êñ∞Ôºå‰ªçÁÑ∂Âú®ÂéüÊù•ÁöÑ‰ΩçÁΩÆ‰∏äÔºåÊâÄ‰ª•ÂΩìÊàë‰ª¨Áî®‰ªñÁöÑÊñ∞ÁöÑhashCodeÂéªÊâæËÇØÂÆöÊòØÊâæ‰∏çÂà∞‰∫Ü„ÄÇ ÊÄªÁªìÔºö ‰∏äÈù¢ÁöÑËøô‰∏™ÂÜÖÂ≠òÊ≥ÑÈú≤ÂëäËØâÊàë‰∏Ä‰∏™‰ø°ÊÅØÔºöÂ¶ÇÊûúÊàë‰ª¨Â∞ÜÂØπË±°ÁöÑÂ±ûÊÄßÂÄºÂèÇ‰∏é‰∫ÜhashCodeÁöÑËøêÁÆó‰∏≠ÔºåÂú®ËøõË°åÂà†Èô§ÁöÑÊó∂ÂÄôÔºåÂ∞±‰∏çËÉΩÂØπÂÖ∂Â±ûÊÄßÂÄºËøõË°å‰øÆÊîπÔºåÂê¶Âàô‰ºöÂá∫Áé∞‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇ ‰∏É„ÄÅÊÄªÁªì hashCodeÊòØ‰∏∫‰∫ÜÊèêÈ´òÂú®Êï£ÂàóÁªìÊûÑÂ≠òÂÇ®‰∏≠Êü•ÊâæÁöÑÊïàÁéáÔºåÂú®Á∫øÊÄßË°®‰∏≠Ê≤°Êúâ‰ΩúÁî®„ÄÇ equalsÂíåhashCodeÈúÄË¶ÅÂêåÊó∂Ë¶ÜÁõñ„ÄÇ Ëã•‰∏§‰∏™ÂØπË±°equalsËøîÂõûtrueÔºåÂàôhashCodeÊúâÂøÖË¶Å‰πüËøîÂõûÁõ∏ÂêåÁöÑintÊï∞„ÄÇ Ëã•‰∏§‰∏™ÂØπË±°equalsËøîÂõûfalseÔºåÂàôhashCode‰∏ç‰∏ÄÂÆöËøîÂõû‰∏çÂêåÁöÑintÊï∞,‰ΩÜ‰∏∫‰∏çÁõ∏Á≠âÁöÑÂØπË±°ÁîüÊàê‰∏çÂêåhashCodeÂÄºÂèØ‰ª•ÊèêÈ´òÂìàÂ∏åË°®ÁöÑÊÄßËÉΩ„ÄÇ Ëã•‰∏§‰∏™ÂØπË±°hashCodeËøîÂõûÁõ∏ÂêåintÊï∞ÔºåÂàôequals‰∏ç‰∏ÄÂÆöËøîÂõûtrue„ÄÇ Âêå‰∏ÄÂØπË±°Âú®ÊâßË°åÊúüÈó¥Ëã•Â∑≤ÁªèÂ≠òÂÇ®Âú®ÈõÜÂêà‰∏≠ÔºåÂàô‰∏çËÉΩ‰øÆÊîπÂΩ±ÂìçhashCodeÂÄºÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÂê¶Âàô‰ºöÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢ò„ÄÇ Êï¥ÁêÜËá™Ôºö http://blog.csdn.net/haobaworenle/article/details/53819838 http://www.cnblogs.com/xrq730/p/4842028.html http://blog.csdn.net/qq_21688757/article/details/53067814 http://blog.csdn.net/fyxxq/article/details/42066843]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CopyOnWriteArrayList]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F3.CopyOnWriteArrayList%2F</url>
    <content type="text"><![CDATA[CopyOnWriteArrayListÊòØArrayListÁöÑ‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑÂèò‰ΩìÔºåÂÖ∂‰∏≠ÊâÄÊúâÂèØÂèòÊìç‰ΩúÔºàadd„ÄÅset Á≠âÁ≠âÔºâÈÉΩÊòØÈÄöËøáÂØπÂ∫ïÂ±ÇÊï∞ÁªÑËøõË°å‰∏ÄÊ¨°Êñ∞ÁöÑÂ§çÂà∂Êù•ÂÆûÁé∞ÁöÑ„ÄÇ CopyOnWriteArrayListÊòØ‰∏Ä‰∏™ÂÜôÊó∂Â§çÂà∂ÁöÑÂÆπÂô®ÔºåÈááÁî®‰∫ÜËØªÂÜôÂàÜÁ¶ªÁöÑÊÄùÊÉ≥„ÄÇÈÄö‰øóÁÇπÊù•ËÆ≤ÔºåÂú®ÂØπÂÆπÂô®ËøõË°åÂÜôÊìç‰ΩúÊó∂Ôºå‰∏çÁõ¥Êé•‰øÆÊîπÂΩìÂâçÂÆπÂô®ÔºåËÄåÊòØÂÖàÂØπÂΩìÂâçÂÆπÂô®ËøõË°åÊã∑Ë¥ùÂæóÂà∞‰∏Ä‰∏™ÂâØÊú¨ÔºåÁÑ∂ÂêéÂØπÂâØÊú¨ËøõË°åÂÜôÊìç‰ΩúÔºåÊúÄÂêéÂÜçÂ∞ÜÂéüÂÆπÂô®ÁöÑÂºïÁî®ÊåáÂêëÊã∑Ë¥ùÂá∫Êù•ÁöÑÂâØÊú¨„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÂèØ‰ª•ÂØπÂÆπÂô®ËøõË°åÂπ∂ÂèëËØªËÄå‰∏çÁî®ËøõË°åÂä†ÈîÅ„ÄÇ ‰∏Ä„ÄÅÁ±ªÁöÑÁªßÊâøÂÖ≥Á≥ª 12public class CopyOnWriteArrayList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable Âê´‰πâ‰∏çÈúÄË¶ÅÂÜçËµòËø∞‰∫Ü„ÄÇ ‰∫å„ÄÅÁ±ªÁöÑÂ±ûÊÄß 12345678910111213141516171819202122/** Áî®‰∫éÂú®ÂØπÊï∞ÁªÑ‰∫ßÁîüÂÜôÊìç‰ΩúÁöÑÊñπÊ≥ïÂä†ÈîÅ. */final transient ReentrantLock lock = new ReentrantLock();/** Â∫ïÂ±ÇÁöÑÂ≠òÂÇ®ÁªìÊûÑ. */private transient volatile Object[] array;/** ÂèçÂ∞ÑÊú∫Âà∂. */private static final sun.misc.Unsafe UNSAFE;/** lockÂüüÁöÑÂÜÖÂ≠òÂÅèÁßªÈáè.ÊòØÈÄöËøáÂèçÂ∞ÑÊãøÂà∞ÁöÑ */private static final long lockOffset;static &#123; try &#123; UNSAFE = sun.misc.Unsafe.getUnsafe(); Class&lt;?&gt; k = CopyOnWriteArrayList.class; lockOffset = UNSAFE.objectFieldOffset (k.getDeclaredField("lock")); &#125; catch (Exception e) &#123; throw new Error(e); &#125;&#125; ‰∏â„ÄÅÊï∞ÁªÑÊú´Â∞æÊ∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥† 12345678910111213141516171819202122public boolean add(E e) &#123; // ÂèØÈáçÂÖ•ÈîÅ final ReentrantLock lock = this.lock; // Ëé∑ÂèñÈîÅ lock.lock(); try &#123; // ÂÖÉÁ¥†Êï∞ÁªÑ Object[] elements = getArray(); // Êï∞ÁªÑÈïøÂ∫¶ int len = elements.length; // Â§çÂà∂Êï∞ÁªÑ Object[] newElements = Arrays.copyOf(elements, len + 1); // Â∞ÜË¶ÅÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÊîæÂà∞ÂâØÊú¨Êï∞ÁªÑÁöÑÊú´Â∞æÂéª newElements[len] = e; // ËÆæÁΩÆÊï∞ÁªÑ setArray(newElements); return true; &#125; finally &#123; // ÈáäÊîæÈîÅ lock.unlock(); &#125;&#125; Âü∫Êú¨ÂéüÁêÜÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂØπÂΩìÂâçÊï∞ÁªÑÂä†ÈîÅÔºåÂÜÖÈÉ®Â§çÂà∂‰∏Ä‰∏™Êñ∞Êï∞ÁªÑÔºåÂ§ÑÁêÜÂÆåÊØïÔºå‰øÆÊîπÂºïÁî®Âç≥ÂèØÔºåËææÂà∞ÊúÄÁªà‰∏ÄËá¥ÁöÑÊïàÊûú„ÄÇ Âõõ„ÄÅÂ¶ÇÊûúÊ≤°ÊúâËøô‰∏™ÂÖÉÁ¥†ÂàôÊ∑ªÂä† 12345public boolean addIfAbsent(E e) &#123; Object[] snapshot = getArray(); return indexOf(e, snapshot, 0, snapshot.length) &gt;= 0 ? false : addIfAbsent(e, snapshot);&#125; ËØ•ÂáΩÊï∞Áî®‰∫éÊ∑ªÂä†ÂÖÉÁ¥†ÔºàÂ¶ÇÊûúÊï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®ÔºåÂàôÊ∑ªÂä†ÔºõÂê¶ÂàôÔºå‰∏çÊ∑ªÂä†ÔºåÁõ¥Êé•ËøîÂõûÔºâ„ÄÇÂ¶Ç‰ΩïÂèØ‰ª•‰øùËØÅÂ§öÁ∫øÁ®ãÁéØÂ¢É‰∏ã‰∏ç‰ºöÈáçÂ§çÊ∑ªÂä†ÂÖÉÁ¥†Ôºü Á≠îÊ°àÔºöÈÄöËøáÂø´ÁÖßÊï∞ÁªÑÂíåÂΩìÂâçÊï∞ÁªÑËøõË°åÂØπÊØîÊù•Á°ÆÂÆöÊòØÂê¶‰∏ÄËá¥ÔºåÁ°Æ‰øùÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÂÆâÂÖ® 12345678910111213141516171819202122232425262728293031323334private boolean addIfAbsent(E e, Object[] snapshot) &#123; // ÈáçÂÖ•ÈîÅ final ReentrantLock lock = this.lock; // Ëé∑ÂèñÈîÅ lock.lock(); try &#123; // Ëé∑ÂèñÊï∞ÁªÑ Object[] current = getArray(); // Êï∞ÁªÑÈïøÂ∫¶ int len = current.length; if (snapshot != current) &#123; // Âø´ÁÖß‰∏çÁ≠â‰∫éÂΩìÂâçÊï∞ÁªÑÔºåÂØπÊï∞ÁªÑËøõË°å‰∫Ü‰øÆÊîπ // ÂèñËæÉÂ∞èËÄÖ int common = Math.min(snapshot.length, len); for (int i = 0; i &lt; common; i++) // ÈÅçÂéÜ if (current[i] != snapshot[i] &amp;&amp; eq(e, current[i])) // ÂΩìÂâçÊï∞ÁªÑÁöÑÂÖÉÁ¥†‰∏éÂø´ÁÖßÁöÑÂÖÉÁ¥†‰∏çÁõ∏Á≠âÂπ∂‰∏îe‰∏éÂΩìÂâçÂÖÉÁ¥†Áõ∏Á≠â // Ë°®Á§∫Âú®snapshot‰∏écurrent‰πãÈó¥‰øÆÊîπ‰∫ÜÊï∞ÁªÑÔºåÂπ∂‰∏îËÆæÁΩÆ‰∫ÜÊï∞ÁªÑÊüê‰∏ÄÂÖÉÁ¥†‰∏∫eÔºåÂ∑≤ÁªèÂ≠òÂú® // ËøîÂõûfalse return false; if (indexOf(e, current, common, len) &gt;= 0) // Âú®ÂΩìÂâçÊï∞ÁªÑ‰∏≠ÊâæÂà∞eÂÖÉÁ¥† // ËøîÂõûfalse return false; &#125; // Â§çÂà∂Êï∞ÁªÑ Object[] newElements = Arrays.copyOf(current, len + 1); // ÂØπÊï∞ÁªÑlenÁ¥¢ÂºïÁöÑÂÖÉÁ¥†ËµãÂÄº‰∏∫e newElements[len] = e; // ËÆæÁΩÆÊï∞ÁªÑ setArray(newElements); return true; &#125; finally &#123; // ÈáäÊîæÈîÅ lock.unlock(); &#125;&#125; ËØ•ÂáΩÊï∞ÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºö Ëé∑ÂèñÈîÅÔºåËé∑ÂèñÂΩìÂâçÊï∞ÁªÑ‰∏∫currentÔºåcurrentÈïøÂ∫¶‰∏∫lenÔºåÂà§Êñ≠Êï∞ÁªÑ‰πãÂâçÁöÑÂø´ÁÖßsnapshotÊòØÂê¶Á≠â‰∫éÂΩìÂâçÊï∞ÁªÑcurrentÔºåËã•‰∏çÁõ∏Á≠âÔºåÂàôËøõÂÖ•Ê≠•È™§2ÔºõÂê¶ÂàôÔºåËøõÂÖ•Ê≠•È™§3 ‰∏çÁõ∏Á≠âÔºåË°®Á§∫Âú®snapshot‰∏écurrent‰πãÈó¥ÔºåÂØπÊï∞ÁªÑËøõË°å‰∫Ü‰øÆÊîπÔºåÁõ¥Êé•ËøîÂõûfalseÁªìÊùü; ËØ¥ÊòéÂΩìÂâçÊï∞ÁªÑÁ≠â‰∫éÂø´ÁÖßÊï∞ÁªÑÔºåËØ¥ÊòéÊï∞ÁªÑÊ≤°ÊúâË¢´ÊîπÂèò„ÄÇÂú®ÂΩìÂâçÊï∞ÁªÑ‰∏≠Á¥¢ÂºïÊåáÂÆöÂÖÉÁ¥†ÔºåËã•ËÉΩÂ§üÊâæÂà∞ÔºåËØ¥ÊòéÂ∑≤ÁªèÂ≠òÂú®Ê≠§ÂÖÉÁ¥†ÔºåÁõ¥Êé•ËøîÂõûfalseÁªìÊùüÔºõÂê¶ÂàôËøõÂÖ•4 ËØ¥ÊòéÊ≤°ÊúâÂΩìÂâçË¶ÅÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÔºåÈÄöËøáÊï∞ÁªÑÂ§çÂà∂ÁöÑÊñπÂºèÊ∑ªÂä†Âà∞Êú´Â∞æ Êó†ËÆ∫Â¶Ç‰ΩïÔºåÈÉΩË¶ÅÈáäÊîæÈîÅ ‰∫î„ÄÅËé∑ÂèñÊåáÂÆöÁ¥¢ÂºïÁöÑÂÖÉÁ¥† 1234567public E get(int index) &#123; return get(getArray(), index);&#125;private E get(Object[] a, int index) &#123; return (E) a[index];&#125; ÈÄöËøáÂÜôÊó∂Â§çÂà∂ÁöÑÊñπÂºèÔºåCopyOnWriteArrayList ÁöÑ get ÊñπÊ≥ï‰∏çÁî®Âä†ÈîÅ‰πüÂèØ‰ª•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÊâÄ‰ª• CopyOnWriteArrayList Âπ∂ÂèëËØªÁöÑÊïàÁéáÊòØÈùûÂ∏∏È´òÁöÑÔºåÂÆÉÊòØÁõ¥Êé•ÈÄöËøáÊï∞ÁªÑ‰∏ãÊ†áËé∑ÂèñÂÖÉÁ¥†ÁöÑ„ÄÇ ÂÖ≠„ÄÅÊÄªÁªì ÁÆÄÂçïËÄåË®ÄË¶ÅËÆ∞‰ΩèÂÆÉÁöÑ‰∏â‰∏™ÁâπÁÇπÔºö CopyOnWriteArrayList ÊòØ‰∏Ä‰∏™Âπ∂ÂèëÁöÑÊï∞ÁªÑÂÆπÂô®ÔºåÂÆÉÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ÊòØÊï∞ÁªÑ„ÄÇ CopyOnWriteArrayList ÈááÁî®ÂÜôÊó∂Â§çÂà∂ÁöÑÊñπÂºèÊù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ ÈÄöËøáÂÜôÊó∂Â§çÂà∂ÁöÑÊñπÂºèÔºåÂèØ‰ª•È´òÊïàÁöÑËøõË°åÂπ∂ÂèëËØªÔºå‰ΩÜÊòØÂØπ‰∫éÂÜôÊìç‰ΩúÔºåÊØèÊ¨°ÈÉΩË¶ÅËøõË°åÂä†ÈîÅ‰ª•ÂèäÊã∑Ë¥ùÂâØÊú¨ÔºåÊïàÁéáÈùûÂ∏∏‰ΩéÔºåÊâÄ‰ª• CopyOnWriteArrayList ‰ªÖÈÄÇÂêàËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÊôØ„ÄÇ VectorËôΩÁÑ∂ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩÜÊòØÂè™ÊòØ‰∏ÄÁßçÁõ∏ÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ®ËÄå‰∏çÊòØÁªùÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂÆÉÂè™ËÉΩÂ§ü‰øùËØÅÂ¢û„ÄÅÂà†„ÄÅÊîπ„ÄÅÊü•ÁöÑÂçï‰∏™Êìç‰Ωú‰∏ÄÂÆöÊòØÂéüÂ≠êÁöÑÔºå‰∏ç‰ºöË¢´ÊâìÊñ≠Ôºå‰ΩÜÊòØÂ¶ÇÊûúÁªÑÂêàËµ∑Êù•Áî®ÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÊÄß„ÄÇ CopyOnWriteArrayListÂú®Âπ∂Âèë‰∏ã‰∏ç‰ºö‰∫ßÁîü‰ªª‰ΩïÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØÁªùÂØπÁöÑÁ∫øÁ®ãÂÆâÂÖ® Âè¶Â§ñÔºåÊúâ‰∏§ÁÇπÂøÖÈ°ªËÆ≤‰∏Ä‰∏ã„ÄÇ ÊàëËÆ§‰∏∫CopyOnWriteArrayListËøô‰∏™Âπ∂ÂèëÁªÑ‰ª∂ÔºåÂÖ∂ÂÆûÂèçÊò†ÁöÑÊòØ‰∏§‰∏™ÂçÅÂàÜÈáçË¶ÅÁöÑÂàÜÂ∏ÉÂºèÁêÜÂøµÔºö Ôºà1ÔºâËØªÂÜôÂàÜÁ¶ª Êàë‰ª¨ËØªÂèñCopyOnWriteArrayListÁöÑÊó∂ÂÄôËØªÂèñÁöÑÊòØCopyOnWriteArrayList‰∏≠ÁöÑObject[] arrayÔºå‰ΩÜÊòØ‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÊìç‰ΩúÁöÑÊòØ‰∏Ä‰∏™Êñ∞ÁöÑObject[] arrayÔºåËØªÂíåÂÜôÊìç‰ΩúÁöÑ‰∏çÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÔºåËøôÂ∞±ÊòØËØªÂÜôÂàÜÁ¶ª„ÄÇËøôÁßçÊäÄÊúØÊï∞ÊçÆÂ∫ìÁî®ÁöÑÈùûÂ∏∏Â§öÔºåÂú®È´òÂπ∂Âèë‰∏ã‰∏∫‰∫ÜÁºìËß£Êï∞ÊçÆÂ∫ìÁöÑÂéãÂäõÔºåÂç≥‰ΩøÂÅö‰∫ÜÁºìÂ≠ò‰πüË¶ÅÂØπÊï∞ÊçÆÂ∫ìÂÅöËØªÂÜôÂàÜÁ¶ªÔºåËØªÁöÑÊó∂ÂÄô‰ΩøÁî®ËØªÂ∫ìÔºåÂÜôÁöÑÊó∂ÂÄô‰ΩøÁî®ÂÜôÂ∫ìÔºåÁÑ∂ÂêéËØªÂ∫ì„ÄÅÂÜôÂ∫ì‰πãÈó¥ËøõË°å‰∏ÄÂÆöÁöÑÂêåÊ≠•ÔºåËøôÊ†∑Â∞±ÈÅøÂÖçÂêå‰∏Ä‰∏™Â∫ì‰∏äËØª„ÄÅÂÜôÁöÑIOÊìç‰ΩúÂ§™Â§ö Ôºà2ÔºâÊúÄÁªà‰∏ÄËá¥ ÂØπCopyOnWriteArrayListÊù•ËØ¥ÔºåÁ∫øÁ®ã1ËØªÂèñÈõÜÂêàÈáåÈù¢ÁöÑÊï∞ÊçÆÔºåÊú™ÂøÖÊòØÊúÄÊñ∞ÁöÑÊï∞ÊçÆ„ÄÇÂõ†‰∏∫Á∫øÁ®ã2„ÄÅÁ∫øÁ®ã3„ÄÅÁ∫øÁ®ã4Âõõ‰∏™Á∫øÁ®ãÈÉΩ‰øÆÊîπ‰∫ÜCopyOnWriteArrayListÈáåÈù¢ÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÁ∫øÁ®ã1ÊãøÂà∞ÁöÑËøòÊòØÊúÄËÄÅÁöÑÈÇ£‰∏™Object[] arrayÔºåÊñ∞Ê∑ªÂä†ËøõÂéªÁöÑÊï∞ÊçÆÂπ∂Ê≤°ÊúâÔºåÊâÄ‰ª•Á∫øÁ®ã1ËØªÂèñÁöÑÂÜÖÂÆπÊú™ÂøÖÂáÜÁ°Æ„ÄÇ‰∏çËøáËøô‰∫õÊï∞ÊçÆËôΩÁÑ∂ÂØπ‰∫éÁ∫øÁ®ã1ÊòØ‰∏ç‰∏ÄËá¥ÁöÑÔºå‰ΩÜÊòØÂØπ‰∫é‰πãÂêéÁöÑÁ∫øÁ®ã‰∏ÄÂÆöÊòØ‰∏ÄËá¥ÁöÑÔºåÂÆÉ‰ª¨ÊãøÂà∞ÁöÑObject[] array‰∏ÄÂÆöÊòØ‰∏â‰∏™Á∫øÁ®ãÈÉΩÊìç‰ΩúÂÆåÊØï‰πãÂêéÁöÑObject array[]ÔºåËøôÂ∞±ÊòØÊúÄÁªà‰∏ÄËá¥„ÄÇÊúÄÁªà‰∏ÄËá¥ÂØπ‰∫éÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰πüÈùûÂ∏∏ÈáçË¶ÅÔºåÂÆÉÈÄöËøáÂÆπÂøç‰∏ÄÂÆöÊó∂Èó¥ÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÔºåÊèêÂçáÊï¥‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß‰∏éÂàÜÂå∫ÂÆπÈîôÊÄß„ÄÇÂΩìÁÑ∂ÔºåÊúÄÁªà‰∏ÄËá¥Âπ∂‰∏çÊòØ‰ªª‰ΩïÂú∫ÊôØÈÉΩÈÄÇÁî®ÁöÑÔºåÂÉèÁÅ´ËΩ¶Á´ôÂîÆÁ•®ËøôÁßçÁ≥ªÁªüÁî®Êà∑ÂØπ‰∫éÊï∞ÊçÆÁöÑÂÆûÊó∂ÊÄßË¶ÅÊ±ÇÈùûÂ∏∏ÈùûÂ∏∏È´òÔºåÂ∞±ÂøÖÈ°ªÂÅöÊàêÂº∫‰∏ÄËá¥ÊÄßÁöÑ„ÄÇ ÊúÄÂêéÊÄªÁªì‰∏ÄÁÇπÔºåÈöèÁùÄCopyOnWriteArrayList‰∏≠ÂÖÉÁ¥†ÁöÑÂ¢ûÂä†ÔºåCopyOnWriteArrayListÁöÑ‰øÆÊîπ‰ª£‰ª∑Â∞ÜË∂äÊù•Ë∂äÊòÇË¥µÔºåÂõ†Ê≠§ÔºåCopyOnWriteArrayListÈÄÇÁî®‰∫éËØªÊìç‰ΩúËøúÂ§ö‰∫é‰øÆÊîπÊìç‰ΩúÁöÑÂπ∂ÂèëÂú∫ÊôØ‰∏≠„ÄÇ ÊÑüË∞¢ http://www.cnblogs.com/xrq730/p/5020760.html http://blog.csdn.net/u013124587/article/details/52863533 https://www.cnblogs.com/leesf456/p/5547853.html]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedList]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F2.LinkedList%2F</url>
    <content type="text"><![CDATA[ÊèêÂà∞ArrayListÔºåÂ∞±‰ºöÊØîËæÉ‰∏éLinkedListÁöÑÂå∫Âà´„ÄÇÊú¨ÊñáÊù•ÁúãÁúãLinkedListÁöÑÊ†∏ÂøÉÂéüÁêÜ„ÄÇ Â¶ÇÂõæÊâÄÁ§∫ LinkedList Â∫ïÂ±ÇÊòØÂü∫‰∫éÂèåÂêëÈìæË°®ÂÆûÁé∞ÁöÑÔºå‰πüÊòØÂÆûÁé∞‰∫Ü List Êé•Âè£ÔºåÊâÄ‰ª•‰πüÊã•Êúâ List ÁöÑ‰∏Ä‰∫õÁâπÁÇπ(JDK1.7/8 ‰πãÂêéÂèñÊ∂à‰∫ÜÂæ™ÁéØÔºå‰øÆÊîπ‰∏∫ÂèåÂêëÈìæË°®)„ÄÇ ‰∏Ä„ÄÅLinkedListÂ±ûÊÄß 123456//ÈìæË°®ÁöÑËäÇÁÇπ‰∏™Êï∞.transient int size = 0;//Pointer to first node.transient Node&lt;E&gt; first;//Pointer to last node.transient Node&lt;E&gt; last; ‰∫å„ÄÅNodeÁöÑÁªìÊûÑ 1234567891011private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next;//ÂêéÁΩÆÊåáÈíà Node&lt;E&gt; prev;//ÂâçÁΩÆÊåáÈíà Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; this.item = element; this.next = next; this.prev = prev; &#125;&#125; ‰∏â„ÄÅÊ∑ªÂä†ÂÖÉÁ¥† 3.1 LinkedListË°®Â§¥Ê∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥† ÂΩìÂêëË°®Â§¥ÊèíÂÖ•‰∏Ä‰∏™ËäÇÁÇπÊó∂ÔºåÂæàÊòæÁÑ∂ÂΩìÂâçËäÇÁÇπÁöÑÂâçÈ©±‰∏ÄÂÆö‰∏∫ nullÔºåËÄåÂêéÁªßÁªìÁÇπÊòØ first ÊåáÈíàÊåáÂêëÁöÑËäÇÁÇπÔºåÂΩìÁÑ∂ËøòË¶Å‰øÆÊîπ first ÊåáÈíàÊåáÂêëÊñ∞ÁöÑÂ§¥ËäÇÁÇπ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂéüÊù•ÁöÑÂ§¥ËäÇÁÇπÂèòÊàê‰∫ÜÁ¨¨‰∫å‰∏™ËäÇÁÇπÔºåÊâÄ‰ª•ËøòË¶Å‰øÆÊîπÂéüÊù•Â§¥ËäÇÁÇπÁöÑÂâçÈ©±ÊåáÈíàÔºå‰ΩøÂÆÉÊåáÂêëË°®Â§¥ËäÇÁÇπÔºåÊ∫êÁ†ÅÁöÑÂÆûÁé∞Â¶Ç‰∏ãÔºö 1234567891011121314151617public void addFirst(E e) &#123; linkFirst(e);&#125;private void linkFirst(E e) &#123; final Node&lt;E&gt; f = first; //Êñ∞ËäÇÁÇπÂâçÁΩÆÊåáÈíàÊåáÂêëÁ©∫ÔºåÂêéÁΩÆÊåáÈíàÊåáÂêëfirstËäÇÁÇπ final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f); //Êñ∞ËäÇÁÇπ‰Ωú‰∏∫Êñ∞ÁöÑfirstËäÇÁÇπ first = newNode; if (f == null) last = newNode;//ÂàùÂßãÂ∞±ÊòØ‰∏™Á©∫LinkedListÁöÑËØùÔºålastÊåáÂêëÂΩìÂâçÊñ∞ËäÇÁÇπ else f.prev = newNode;//ÂàùÂßãÂÄº‰∏ç‰∏∫Á©∫ÔºåÂ∞ÜÂÖ∂ÂâçÁΩÆÊåáÈíàÊåáÂêëÊñ∞ËäÇÁÇπ size++; modCount++;&#125; 3.2 LinkedListË°®Â∞æÊ∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥† ÂΩìÂêëË°®Â∞æÊèíÂÖ•‰∏Ä‰∏™ËäÇÁÇπÊó∂ÔºåÂæàÊòæÁÑ∂ÂΩìÂâçËäÇÁÇπÁöÑÂêéÁªß‰∏ÄÂÆö‰∏∫ nullÔºåËÄåÂâçÈ©±ÁªìÁÇπÊòØ last ÊåáÈíàÊåáÂêëÁöÑËäÇÁÇπÔºåÁÑ∂ÂêéËøòË¶Å‰øÆÊîπ last ÊåáÈíàÊåáÂêëÊñ∞ÁöÑÂ∞æËäÇÁÇπ„ÄÇÊ≠§Â§ñÔºåËøòË¶Å‰øÆÊîπÂéüÊù•Â∞æËäÇÁÇπÁöÑÂêéÁªßÊåáÈíàÔºå‰ΩøÂÆÉÊåáÂêëÊñ∞ÁöÑÂ∞æËäÇÁÇπÔºåÊ∫êÁ†ÅÁöÑÂÆûÁé∞Â¶Ç‰∏ãÔºö 123456789101112131415161718public void addLast(E e) &#123; linkLast(e);&#125;void linkLast(E e) &#123; final Node&lt;E&gt; l = last; //Êñ∞ËäÇÁÇπÂâçÁΩÆÊåáÈíàÊåáÂêëÁ©∫ÔºåÂêéÁΩÆÊåáÈíàÊåáÂêëfirstËäÇÁÇπ final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); //Êñ∞ËäÇÁÇπ‰Ωú‰∏∫Êñ∞ÁöÑlastËäÇÁÇπ last = newNode; //Â¶ÇÊûúÂéüÊù•ÊúâÂ∞æËäÇÁÇπÔºåÂàôÊõ¥Êñ∞ÂéüÊù•ËäÇÁÇπÁöÑÂêéÁªßÊåáÈíàÔºåÂê¶ÂàôÊõ¥Êñ∞Â§¥ÊåáÈíà if (l == null) first = newNode; else l.next = newNode; size++; modCount++;&#125; 3.3 LinkedListÂú®ÊåáÂÆöËäÇÁÇπÂâçÊ∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥† 12345678910111213141516171819202122232425262728293031323334public void add(int index, E element) &#123; //Âà§Êñ≠Êï∞ÁªÑÊòØÂê¶Ë∂äÁïå checkPositionIndex(index); if (index == size) linkLast(element);//Áõ¥Êé•ÊèíÂú®ÊúÄÂêé‰∏Ä‰∏™ else linkBefore(element, node(index));//Âú®indexËäÇÁÇπ‰πãÂâçÊèíÂÖ•&#125;private void checkPositionIndex(int index) &#123; if (!isPositionIndex(index)) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;private boolean isPositionIndex(int index) &#123; return index &gt;= 0 &amp;&amp; index &lt;= size;&#125;void linkBefore(E e, Node&lt;E&gt; succ) &#123; // assert succ != null; //ÊâæÂà∞Á¥¢Âºï‰ΩçÁΩÆÁöÑÂâçÈù¢‰∏Ä‰∏™ÂÖÉÁ¥†pred final Node&lt;E&gt; pred = succ.prev; //Êñ∞ËäÇÁÇπÔºåÂâçÁΩÆÊåáÈíàÊåáÂêëpred,ÂêéÁΩÆÊåáÈíàÊåáÂêëÁ¥¢ÂºïÂ§ÑÂÖÉÁ¥† final Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, succ); //‰øÆÊîπÁ¥¢ÂºïÂá∫ÂÖÉÁ¥†ÁöÑÂâçÁΩÆÊåáÈíà‰∏∫Êñ∞ËäÇÁÇπ succ.prev = newNode; if (pred == null) first = newNode;//ËØ¥ÊòéÊòØÊèíÂú®Ë°®Â§¥ else pred.next = newNode;//ËØ¥ÊòéÊòØÊèíÂú®ÈùûË°®Â§¥‰ΩçÁΩÆÔºå‰øÆÊîπpredÂêéÁΩÆÊåáÈíà‰∏∫Êñ∞ÊåáÈíà size++; modCount++;&#125; ÂèØËßÅÊØèÊ¨°ÊèíÂÖ•ÈÉΩÊòØÁßªÂä®ÊåáÈíàÔºåÂíå ArrayList ÁöÑÊã∑Ë¥ùÊï∞ÁªÑÊù•ËØ¥ÊïàÁéáË¶ÅÈ´ò‰∏ä‰∏çÂ∞ë„ÄÇ Âõõ„ÄÅÂà†Èô§ÂÖÉÁ¥† Âà†Èô§Êìç‰Ωú‰∏éÊ∑ªÂä†Êìç‰ΩúÂ§ßÂêåÂ∞èÂºÇÔºå‰æãÂ¶ÇÂà†Èô§ÊåáÂÆöËäÇÁÇπÁöÑËøáÁ®ãÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÈúÄË¶ÅÊääÂΩìÂâçËäÇÁÇπÁöÑÂâçÈ©±ËäÇÁÇπÁöÑÂêéÁªß‰øÆÊîπ‰∏∫ÂΩìÂâçËäÇÁÇπÁöÑÂêéÁªßÔºå‰ª•ÂèäÂΩìÂâçËäÇÁÇπÁöÑÂêéÁªßÁªìÁÇπÁöÑÂâçÈ©±‰øÆÊîπ‰∏∫ÂΩìÂâçËäÇÁÇπÁöÑÂâçÈ©±„ÄÇ Â∞±‰∏çËµòËø∞‰∫Ü„ÄÇ ‰∫î„ÄÅËé∑ÂèñÂÖÉÁ¥† 12345678910111213141516171819202122//Ëé∑ÂèñÊåáÂÆöÁ¥¢ÂºïÂØπÂ∫îÁöÑÂÖÉÁ¥†public E get(int index) &#123; checkElementIndex(index); return node(index).item;&#125;//ÂØªÊâæÂÖÉÁ¥†ÁöÑÊñπÂêëÊòØÊ†πÊçÆindexÂú®Ë°®‰∏≠ÁöÑ‰ΩçÁΩÆÂÜ≥ÂÆöÁöÑNode&lt;E&gt; node(int index) &#123; // assert isElementIndex(index); if (index &lt; (size &gt;&gt; 1)) &#123;//Á¥¢ÂºïÂ∞è‰∫éË°®ÈïøÁöÑ‰∏ÄÂçäÔºå‰ªéË°®Â§¥ÂºÄÂßãÂæÄÂêéÊâæ Node&lt;E&gt; x = first; for (int i = 0; i &lt; index; i++) x = x.next; return x; &#125; else &#123;//Á¥¢ÂºïÂ§ß‰∫éË°®ÈïøÁöÑ‰∏ÄÂçäÔºå‰ªéË°®Â∞æÂæÄÂâçÂºÄÂßãÊâæ Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x; &#125;&#125; ‰∏äËø∞‰ª£Á†ÅÔºåÂà©Áî®‰∫ÜÂèåÂêëÈìæË°®ÁöÑÁâπÊÄßÔºåÂ¶ÇÊûúindexÁ¶ªÈìæË°®Â§¥ÊØîËæÉËøëÔºåÂ∞±‰ªéËäÇÁÇπÂ§¥ÈÉ®ÈÅçÂéÜ„ÄÇÂê¶ÂàôÂ∞±‰ªéËäÇÁÇπÂ∞æÈÉ®ÂºÄÂßãÈÅçÂéÜ„ÄÇ‰ΩøÁî®Á©∫Èó¥ÔºàÂèåÂêëÈìæË°®ÔºâÊù•Êç¢ÂèñÊó∂Èó¥„ÄÇ node()‰ºö‰ª•O(n/2)ÁöÑÊÄßËÉΩÂéªËé∑Âèñ‰∏Ä‰∏™ÁªìÁÇπ Â¶ÇÊûúÁ¥¢ÂºïÂÄºÂ§ß‰∫éÈìæË°®Â§ßÂ∞èÁöÑ‰∏ÄÂçäÔºåÈÇ£‰πàÂ∞Ü‰ªéÂ∞æÁªìÁÇπÂºÄÂßãÈÅçÂéÜ ËøôÊ†∑ÁöÑÊïàÁéáÊòØÈùûÂ∏∏‰ΩéÁöÑÔºåÁâπÂà´ÊòØÂΩì index Ë∂äÊé•Ëøë size ÁöÑ‰∏≠Èó¥ÂÄºÊó∂„ÄÇ ÊÄªÁªì 1„ÄÅÁêÜËÆ∫‰∏äÊó†ÂÆπÈáèÈôêÂà∂ÔºåÂè™ÂèóËôöÊãüÊú∫Ëá™Ë∫´ÈôêÂà∂ÂΩ±ÂìçÔºåÊâÄ‰ª•Ê≤°ÊúâÊâ©ÂÆπÊñπÊ≥ï„ÄÇ 2„ÄÅÂíåArrayList‰∏ÄÊ†∑ÔºåLinkedList‰πüÊòØÊòØÊú™ÂêåÊ≠•ÁöÑÔºåÂ§öÁ∫øÁ®ãÂπ∂ÂèëËØªÂÜôÊó∂ÈúÄË¶ÅÂ§ñÈÉ®ÂêåÊ≠•ÔºåÂ¶ÇÊûú‰∏çÂ§ñÈÉ®ÂêåÊ≠•ÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®Collections.synchronizedListÊñπÊ≥ïÂØπLinkedListÁöÑÂÆû‰æãËøõË°å‰∏ÄÊ¨°Â∞ÅË£Ö„ÄÇ 3„ÄÅÂíåArrayList‰∏ÄÊ†∑ÔºåLinkedList‰πüÂØπÂ≠òÂÇ®ÁöÑÂÖÉÁ¥†Êó†ÈôêÂà∂ÔºåÂÖÅËÆ∏nullÂÖÉÁ¥†„ÄÇ 4„ÄÅÈ°∫Â∫èÊèíÂÖ•ÈÄüÂ∫¶ArrayList‰ºöÊØîËæÉÂø´ÔºåÂõ†‰∏∫ArrayListÊòØÂü∫‰∫éÊï∞ÁªÑÂÆûÁé∞ÁöÑÔºåÊï∞ÁªÑÊòØ‰∫ãÂÖànewÂ•ΩÁöÑÔºåÂè™Ë¶ÅÂæÄÊåáÂÆö‰ΩçÁΩÆÂ°û‰∏Ä‰∏™Êï∞ÊçÆÂ∞±Â•Ω‰∫ÜÔºõLinkedListÂàô‰∏çÂêåÔºåÊØèÊ¨°È°∫Â∫èÊèíÂÖ•ÁöÑÊó∂ÂÄôLinkedListÂ∞Ünew‰∏Ä‰∏™ÂØπË±°Âá∫Êù•ÔºåÂ¶ÇÊûúÂØπË±°ÊØîËæÉÂ§ßÔºåÈÇ£‰πànewÁöÑÊó∂Èó¥ÂäøÂøÖ‰ºöÈïø‰∏ÄÁÇπÔºåÂÜçÂä†‰∏ä‰∏Ä‰∫õÂºïÁî®ËµãÂÄºÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•È°∫Â∫èÊèíÂÖ•LinkedListÂøÖÁÑ∂ÊÖ¢‰∫éArrayList 5„ÄÅÂü∫‰∫é‰∏ä‰∏ÄÁÇπÔºåÂõ†‰∏∫LinkedListÈáåÈù¢‰∏ç‰ªÖÁª¥Êä§‰∫ÜÂæÖÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÔºåËøòÁª¥Êä§‰∫ÜEntryÁöÑÂâçÁΩÆEntryÂíåÂêéÁªßEntryÔºåÂ¶ÇÊûú‰∏Ä‰∏™LinkedList‰∏≠ÁöÑEntryÈùûÂ∏∏Â§öÔºåÈÇ£‰πàLinkedListÂ∞ÜÊØîArrayListÊõ¥ËÄóË¥π‰∏Ä‰∫õÂÜÖÂ≠ò 6„ÄÅÊï∞ÊçÆÈÅçÂéÜÁöÑÈÄüÂ∫¶ÔºåÁúãÊúÄÂêé‰∏ÄÈÉ®ÂàÜÔºåËøôÈáåÂ∞±‰∏çÁªÜËÆ≤‰∫ÜÔºåÁªìËÆ∫ÊòØÔºö‰ΩøÁî®ÂêÑËá™ÈÅçÂéÜÊïàÁéáÊúÄÈ´òÁöÑÊñπÂºèÔºåArrayListÁöÑÈÅçÂéÜÊïàÁéá‰ºöÊØîLinkedListÁöÑÈÅçÂéÜÊïàÁéáÈ´ò‰∏Ä‰∫õ 7„ÄÅÊúâ‰∫õËØ¥Ê≥ïËÆ§‰∏∫LinkedListÂÅöÊèíÂÖ•ÂíåÂà†Èô§Êõ¥Âø´ÔºåËøôÁßçËØ¥Ê≥ïÂÖ∂ÂÆûÊòØ‰∏çÂáÜÁ°ÆÁöÑÔºö LinkedListÂÅöÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÊó∂ÂÄôÔºåÊÖ¢Âú®ÂØªÂùÄÔºåÂø´Âú®Âè™ÈúÄË¶ÅÊîπÂèòÂâçÂêéEntryÁöÑÂºïÁî®Âú∞ÂùÄ ArrayListÂÅöÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÊó∂ÂÄôÔºåÊÖ¢Âú®Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÊâπÈáècopyÔºåÂø´Âú®ÂØªÂùÄ ÊâÄ‰ª•ÔºåÂ¶ÇÊûúÂæÖÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÂÖÉÁ¥†ÊòØÂú®Êï∞ÊçÆÁªìÊûÑÁöÑÂâçÂçäÊÆµÂ∞§ÂÖ∂ÊòØÈùûÂ∏∏Èù†ÂâçÁöÑ‰ΩçÁΩÆÁöÑÊó∂ÂÄôÔºåLinkedListÁöÑÊïàÁéáÂ∞ÜÂ§ßÂ§ßÂø´ËøáArrayListÔºåÂõ†‰∏∫ArrayListÂ∞ÜÊâπÈáècopyÂ§ßÈáèÁöÑÂÖÉÁ¥†ÔºõË∂äÂæÄÂêéÔºåÂØπ‰∫éLinkedListÊù•ËØ¥ÔºåÂõ†‰∏∫ÂÆÉÊòØÂèåÂêëÈìæË°®ÔºåÊâÄ‰ª•Âú®Á¨¨2‰∏™ÂÖÉÁ¥†ÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™Êï∞ÊçÆÂíåÂú®ÂÄíÊï∞Á¨¨2‰∏™ÂÖÉÁ¥†ÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†Âú®ÊïàÁéá‰∏äÂü∫Êú¨Ê≤°ÊúâÂ∑ÆÂà´Ôºå‰ΩÜÊòØArrayListÁî±‰∫éË¶ÅÊâπÈáècopyÁöÑÂÖÉÁ¥†Ë∂äÊù•Ë∂äÂ∞ëÔºåÊìç‰ΩúÈÄüÂ∫¶ÂøÖÁÑ∂ËøΩ‰∏ä‰πÉËá≥Ë∂ÖËøáLinkedList„ÄÇ ‰ªéËøô‰∏™ÂàÜÊûêÁúãÂá∫ÔºåÂ¶ÇÊûú‰Ω†ÂçÅÂàÜÁ°ÆÂÆö‰Ω†ÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÂÖÉÁ¥†ÊòØÂú®ÂâçÂçäÊÆµÔºåÈÇ£‰πàÂ∞±‰ΩøÁî®LinkedListÔºõÂ¶ÇÊûú‰Ω†ÂçÅÂàÜÁ°ÆÂÆö‰Ω†Âà†Èô§„ÄÅÂà†Èô§ÁöÑÂÖÉÁ¥†Âú®ÊØîËæÉÈù†ÂêéÁöÑ‰ΩçÁΩÆÔºåÈÇ£‰πàÂèØ‰ª•ËÄÉËôë‰ΩøÁî®ArrayList„ÄÇÂ¶ÇÊûú‰Ω†‰∏çËÉΩÁ°ÆÂÆö‰Ω†Ë¶ÅÂÅöÁöÑÊèíÂÖ•„ÄÅÂà†Èô§ÊòØÂú®Âì™ÂÑøÂë¢ÔºüÈÇ£ËøòÊòØÂª∫ËÆÆ‰Ω†‰ΩøÁî®LinkedListÂêßÔºåÂõ†‰∏∫‰∏ÄÊù•LinkedListÊï¥‰ΩìÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÊâßË°åÊïàÁéáÊØîËæÉÁ®≥ÂÆöÔºåÊ≤°ÊúâArrayListËøôÁßçË∂äÂæÄÂêéË∂äÂø´ÁöÑÊÉÖÂÜµÔºõ‰∫åÊù•ÊèíÂÖ•ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºåÂºÑÂæó‰∏çÂ•ΩArrayListÂ∞±Ë¶ÅËøõË°å‰∏ÄÊ¨°Êâ©ÂÆπÔºåËÆ∞‰ΩèÔºåArrayListÂ∫ïÂ±ÇÊï∞ÁªÑÊâ©ÂÆπÊòØ‰∏Ä‰∏™Êó¢Ê∂àËÄóÊó∂Èó¥ÂèàÊ∂àËÄóÁ©∫Èó¥ÁöÑÊìç‰Ωú. 8„ÄÅArrayList‰ΩøÁî®ÊúÄÊôÆÈÄöÁöÑforÂæ™ÁéØÈÅçÂéÜÔºåLinkedList‰ΩøÁî®foreachÂæ™ÁéØÊØîËæÉÂø´.Ê≥®ÊÑèÂà∞ArrayListÊòØÂÆûÁé∞‰∫ÜRandomAccessÊé•Âè£ËÄåLinkedListÂàôÊ≤°ÊúâÂÆûÁé∞Ëøô‰∏™Êé•Âè£.ÂÖ≥‰∫éRandomAccessËøô‰∏™Êé•Âè£ÁöÑ‰ΩúÁî®ÔºåÁúã‰∏Ä‰∏ãJDK API‰∏äÁöÑËØ¥Ê≥ïÔºö 9„ÄÅÂ¶ÇÊûú‰ΩøÁî®ÊôÆÈÄöforÂæ™ÁéØÈÅçÂéÜLinkedListÔºåÂú®Â§ßÊï∞ÊçÆÈáèÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÖ∂ÈÅçÂéÜÈÄüÂ∫¶Â∞ÜÊÖ¢Âæó‰ª§‰∫∫ÂèëÊåá Êï¥ÁêÜËá™Ôºö 1„ÄÅhttp://www.cnblogs.com/xrq730/p/5005347.html 2„ÄÅhttp://blog.csdn.net/u013124587/article/details/52837848 3„ÄÅhttp://blog.csdn.net/u011392897/article/details/57115818 4„ÄÅhttp://blog.csdn.net/fighterandknight/article/details/61476335]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ArrayList/Vector]]></title>
    <url>%2F2019%2F01%2F20%2Fjava-collection%2F1.ArrayList%E5%92%8CVector%2F</url>
    <content type="text"><![CDATA[Èù¢ËØï‰∏≠ÔºåÂÖ≥‰∫éjavaÁöÑ‰∏Ä‰∫õÂÆπÂô®ÔºåArrayListÊòØÊúÄÁÆÄÂçï‰πüÊòØÊúÄÂ∏∏ÈóÆÁöÑÔºåÂ∞§ÂÖ∂ÊòØÈáåÈù¢ÁöÑÊâ©ÂÆπÊú∫Âà∂„ÄÇ ArrayList 12public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable ArrayList ÂÆûÁé∞‰∫é List„ÄÅRandomAccess Êé•Âè£„ÄÇÂèØ‰ª•ÊèíÂÖ•Á©∫Êï∞ÊçÆÔºå‰πüÊîØÊåÅÈöèÊú∫ËÆøÈóÆ„ÄÇ ÊûÑÈÄ†ÂáΩÊï∞‰∏∫Ôºö 123456789101112131415161718//Áî®ÂàùÂßãÂÆπÈáè‰Ωú‰∏∫ÂèÇÊï∞ÁöÑÊûÑÈÄ†ÊñπÊ≥ïpublic ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123; //ÂàùÂßãÂÆπÈáèÂ§ß‰∫é0ÔºåÂÆû‰æãÂåñÊï∞ÁªÑ this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; //ÂàùÂßãÂÆπÈáèÁ≠â‰∫é0ÔºåËµã‰∫àÁ©∫Êï∞ÁªÑ this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException("Illegal Capacity: "+ initialCapacity); &#125;&#125;//Êó†ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ïpublic ArrayList() &#123; this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;&#125; ‰ªéÊûÑÈÄ†ÊñπÊ≥ï‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãËßÅÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåelementDataÊòØ‰∏Ä‰∏™Â§ßÂ∞è‰∏∫0ÁöÑÁ©∫Êï∞ÁªÑÔºåÂΩìÊàë‰ª¨ÊåáÂÆö‰∫ÜÂàùÂßãÂ§ßÂ∞èÁöÑÊó∂ÂÄôÔºåelementDataÁöÑÂàùÂßãÂ§ßÂ∞èÂ∞±ÂèòÊàê‰∫ÜÊàë‰ª¨ÊâÄÊåáÂÆöÁöÑÂàùÂßãÂ§ßÂ∞è‰∫Ü„ÄÇ ArrayListÁõ∏ÂΩì‰∫éÂä®ÊÄÅÊï∞ÊçÆÔºåÂÖ∂‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏§‰∏™Â±ûÊÄßÂàÜÂà´ÊòØ: elementData Êï∞ÁªÑÔºå‰ª•Âèä size Â§ßÂ∞è„ÄÇ Âú®Ë∞ÉÁî® add() ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºö 12345public boolean add(E e) &#123; ensureCapacityInternal(size + 1); // Increments modCount!! elementData[size++] = e; return true;&#125; È¶ñÂÖàËøõË°åÊâ©ÂÆπÊ†°È™å„ÄÇ Â∞ÜÊèíÂÖ•ÁöÑÂÄºÊîæÂà∞Â∞æÈÉ®ÔºåÂπ∂Â∞Ü size + 1 „ÄÇ Â¶ÇÊûúÊòØË∞ÉÁî® add(index,e) Âú®ÊåáÂÆö‰ΩçÁΩÆÊ∑ªÂä†ÁöÑËØùÔºö 12345678910public void add(int index, E element) &#123; rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! //Â§çÂà∂ÔºåÂêëÂêéÁßªÂä® System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++;&#125; ‰πüÊòØÈ¶ñÂÖàÊâ©ÂÆπÊ†°È™å„ÄÇ Êé•ÁùÄÂØπÊï∞ÊçÆËøõË°åÂ§çÂà∂ÔºåÁõÆÁöÑÊòØÊää index ‰ΩçÁΩÆÁ©∫Âá∫Êù•ÊîæÊú¨Ê¨°ÊèíÂÖ•ÁöÑÊï∞ÊçÆÔºåÂπ∂Â∞ÜÂêéÈù¢ÁöÑÊï∞ÊçÆÂêëÂêéÁßªÂä®‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ ÂÖ∂ÂÆûÊâ©ÂÆπÊúÄÁªàË∞ÉÁî®ÁöÑ‰ª£Á†Å: 1234567891011private void grow(int minCapacity) &#123; // overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity);&#125; ‰πüÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂ§çÂà∂ÁöÑËøáÁ®ãÔºåArrayListÊØèÊ¨°Êâ©ÂÆπÈÉΩÊòØÊâ©1.5ÂÄçÔºåÁÑ∂ÂêéË∞ÉÁî®ArraysÁ±ªÁöÑcopyOfÊñπÊ≥ïÔºåÊääÂÖÉÁ¥†ÈáçÊñ∞Êã∑Ë¥ùÂà∞‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑ‰∏≠Âéª„ÄÇ Áî±Ê≠§ÂèØËßÅ ArrayList ÁöÑ‰∏ªË¶ÅÊ∂àËÄóÊòØÊï∞ÁªÑÊâ©ÂÆπ‰ª•ÂèäÂú®ÊåáÂÆö‰ΩçÁΩÆÊ∑ªÂä†Êï∞ÊçÆÔºåÂú®Êó•Â∏∏‰ΩøÁî®Êó∂ÊúÄÂ•ΩÊòØÊåáÂÆöÂ§ßÂ∞èÔºåÂ∞ΩÈáèÂáèÂ∞ëÊâ©ÂÆπ„ÄÇÊõ¥Ë¶ÅÂáèÂ∞ëÂú®ÊåáÂÆö‰ΩçÁΩÆÊèíÂÖ•Êï∞ÊçÆÁöÑÊìç‰Ωú„ÄÇ Â∫èÂàóÂåñ Áî±‰∫é ArrayList ÊòØÂü∫‰∫éÂä®ÊÄÅÊï∞ÁªÑÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•Âπ∂‰∏çÊòØÊâÄÊúâÁöÑÁ©∫Èó¥ÈÉΩË¢´‰ΩøÁî®„ÄÇÂõ†Ê≠§‰ΩøÁî®‰∫Ü transient ‰øÆÈ•∞ÔºåÂèØ‰ª•Èò≤Ê≠¢Ë¢´Ëá™Âä®Â∫èÂàóÂåñ„ÄÇ 1transient Object[] elementData; Âõ†Ê≠§ ArrayList Ëá™ÂÆö‰πâ‰∫ÜÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException&#123; // Write out element count, and any hidden stuff int expectedModCount = modCount; s.defaultWriteObject(); // Write out size as capacity for behavioural compatibility with clone() s.writeInt(size); // Write out all elements in the proper order. //Âè™Â∫èÂàóÂåñ‰∫ÜË¢´‰ΩøÁî®ÁöÑÊï∞ÊçÆ for (int i=0; i&lt;size; i++) &#123; s.writeObject(elementData[i]); &#125; if (modCount != expectedModCount) &#123; throw new ConcurrentModificationException(); &#125;&#125;private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException &#123; elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff s.defaultReadObject(); // Read in capacity s.readInt(); // ignored if (size &gt; 0) &#123; // be like clone(), allocate array based upon size not capacity ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. for (int i=0; i&lt;size; i++) &#123; a[i] = s.readObject(); &#125; &#125;&#125; ÂΩìÂØπË±°‰∏≠Ëá™ÂÆö‰πâ‰∫Ü writeObject Âíå readObject ÊñπÊ≥ïÊó∂ÔºåJVM ‰ºöË∞ÉÁî®Ëøô‰∏§‰∏™Ëá™ÂÆö‰πâÊñπÊ≥ïÊù•ÂÆûÁé∞Â∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ„ÄÇ ‰ªéÂÆûÁé∞‰∏≠ÂèØ‰ª•ÁúãÂá∫ ArrayList Âè™Â∫èÂàóÂåñ‰∫ÜË¢´‰ΩøÁî®ÁöÑÊï∞ÊçÆ„ÄÇ Vector Vector ‰πüÊòØÂÆûÁé∞‰∫é List Êé•Âè£ÔºåÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÂíå ArrayList Á±ª‰ºº,‰πüÊòØ‰∏Ä‰∏™Âä®ÊÄÅÊï∞ÁªÑÂ≠òÊîæÊï∞ÊçÆ„ÄÇ‰∏çËøáÊòØÂú® add() ÊñπÊ≥ïÁöÑÊó∂ÂÄô‰ΩøÁî® synchronized ËøõË°åÂêåÊ≠•ÂÜôÊï∞ÊçÆÔºå‰ΩÜÊòØÂºÄÈîÄËæÉÂ§ßÔºåÊâÄ‰ª• Vector ÊòØ‰∏Ä‰∏™ÂêåÊ≠•ÂÆπÂô®Âπ∂‰∏çÊòØ‰∏Ä‰∏™Âπ∂ÂèëÂÆπÂô®„ÄÇ VectorÊØîArrayListÂ§ö‰∫Ü‰∏Ä‰∏™Â±ûÊÄßÔºö 1protected int capacityIncrement; Ëøô‰∏™Â±ûÊÄßÊòØÂú®Êâ©ÂÆπÁöÑÊó∂ÂÄôÁî®Âà∞ÁöÑÔºåÂÆÉË°®Á§∫ÊØèÊ¨°Êâ©ÂÆπÂè™Êâ©capacityIncrement‰∏™Á©∫Èó¥Â∞±Ë∂≥Â§ü‰∫Ü„ÄÇËØ•Â±ûÊÄßÂèØ‰ª•ÈÄöËøáÊûÑÈÄ†ÊñπÊ≥ïÁªôÂÆÉËµãÂÄº„ÄÇÂÖàÊù•Áúã‰∏Ä‰∏ãÊûÑÈÄ†ÊñπÊ≥ïÔºö 123456789101112131415public Vector(int initialCapacity, int capacityIncrement) &#123; super(); if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal Capacity: "+initialCapacity); this.elementData = new Object[initialCapacity]; this.capacityIncrement = capacityIncrement;&#125;public Vector(int initialCapacity) &#123; this(initialCapacity, 0);&#125;public Vector() &#123; this(10);&#125; ‰ªéÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫VectorÁöÑÈªòËÆ§Â§ßÂ∞è‰πüÊòØ10ÔºåËÄå‰∏îÂÆÉÂú®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂ∞±Â∑≤ÁªèÂàõÂª∫‰∫ÜÊï∞ÁªÑ‰∫ÜÔºåËøôÁÇπË∑üArrayList‰∏ç‰∏ÄÊ†∑„ÄÇÂÜçÊù•Áúã‰∏Ä‰∏ãgrowÊñπÊ≥ïÔºö 12345678910private void grow(int minCapacity) &#123; // overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); elementData = Arrays.copyOf(elementData, newCapacity);&#125; ‰ªégrowÊñπÊ≥ï‰∏≠Êàë‰ª¨ÂèØ‰ª•ÂèëÁé∞ÔºånewCapacityÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊòØ‰∏§ÂÄçÁöÑoldCapacityÔºåËÄåÂΩìÊåáÂÆö‰∫ÜcapacityIncrementÁöÑÂÄº‰πãÂêéÔºånewCapacityÂèòÊàê‰∫ÜoldCapacity+capacityIncrement„ÄÇ ‰ª•‰∏ãÊòØ add() ÊñπÊ≥ïÔºö 123456public synchronized boolean add(E e) &#123; modCount++; ensureCapacityHelper(elementCount + 1); elementData[elementCount++] = e; return true;&#125; ‰ª•ÂèäÊåáÂÆö‰ΩçÁΩÆÊèíÂÖ•Êï∞ÊçÆ: 12345678910111213public void add(int index, E element) &#123; insertElementAt(element, index);&#125;public synchronized void insertElementAt(E obj, int index) &#123; modCount++; if (index &gt; elementCount) &#123; throw new ArrayIndexOutOfBoundsException(index + " &gt; " + elementCount); &#125; ensureCapacityHelper(elementCount + 1); System.arraycopy(elementData, index, elementData, index + 1, elementCount - index); elementData[index] = obj; elementCount++;&#125;]]></content>
      <tags>
        <tag>javaÂÆπÂô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018Âπ¥ÁöÑÊúÄÂêé‰∏ÄÂ§©ÔºåÂØπÂïÜÂüéÈ°πÁõÆÁöÑÊû∂ÊûÑÂÅö‰∏™ÊîπÈÄ†]]></title>
    <url>%2F2019%2F01%2F20%2F2018%E5%B9%B4%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9%EF%BC%8C%E5%AF%B9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%B6%E6%9E%84%E5%81%9A%E4%B8%AA%E6%94%B9%E9%80%A0%2F</url>
    <content type="text"><![CDATA[‰∏ÄÁõ¥‰ª•Êù•ÈÉΩÊòØÂ≠¶‰π†ÊÖïËØæÁöÑÂÆûÊàòËßÜÈ¢ëÔºåËôΩÁÑ∂‰πüË∑üÁùÄÂÅöÂá∫‰∫Ü‰∏Ä‰∫õ‰∏úË•øÔºå‰ΩÜÊòØÊÄùË∑ØÈÉΩÊòØÂà´‰∫∫Êèê‰æõÂ•ΩÁöÑÔºåËÑ±Á¶ª‰∫ÜËÄÅÂ∏àÔºåÊàë‰∏ÄÁõ¥Âú®ÈóÆËá™Â∑±‰∏Ä‰∏™ÈóÆÈ¢òÔºöËÉΩ‰∏çËÉΩÁã¨Á´ãÂú∞ÊåâÁÖßËá™Â∑±ÁöÑÊÄùË∑ØÂÅöÂá∫‰∏Ä‰∫õ‰∏úË•øÊù•Ôºü ÂâçÊñπÂõæÁâáÈ´òËÉΩ‚Ä¶Êõ¥ÊúâÂá†ÂçÅÂÖÜgifÊºîÁ§∫Âä®ÁîªÔºåÂõæÁâáÂÖ®ÈÉ®Â≠òÊîæ‰∫é‰∏ÉÁâõ‰∫ë‰∏ä„ÄÇ Âú®ÂéªÂπ¥ÔºåÂç≥2017Âπ¥Âπ¥Â∫ïÔºåÊàëÂú®ÊÖïËØæ‰∏äÂ≠¶‰π†‰∫ÜËøô‰∏§Èó®ËØæÁ®ãÔºö Á¨¨‰∏ÄÊúüÈ°πÁõÆÂÆûÁé∞‰∫ÜÊØîËæÉÁÆÄÂçïÁöÑÁîµÂïÜ‰∏öÂä°ÔºåÊï¥ÂêàSSMÔºåÂπ∂‰∏îÈÉ®ÁΩ≤Âà∞‰∫ëÁ´Ø„ÄÇ Á¨¨‰∫åÊúüÂÆûÁé∞‰∫ÜtomcatÈõÜÁæ§ÔºåÈÖçÂêàredisÂÆûÁé∞ÂàÜÂ∏ÉÂºèsessionÔºåËøòÊúâ‰∏Ä‰∫õÂÆöÊó∂‰ªªÂä°„ÄÅredisÂàÜÂ∏ÉÂºèÈîÅ„ÄÅmavenÁéØÂ¢ÉÈöîÁ¶ªÁöÑ‰∏Ä‰∫õ‰∏úË•øÔºåËøòÊ∂âÂèäÂæàÂ§öspringÂíåspringmvcÁöÑÊúâÁî®ÁöÑÊú∫Â∑ß„ÄÇ Êï¥‰ΩìÊÑüËßâÊòØÔºö‰∏ÄÊúüÂÆûÁé∞‰∏öÂä°Ôºå‰∫åÊúüÂØπ‰∫é‰∏ÄÊúüÁöÑÊèêÈ´ò‰∏çÊòØÂ§™Â§ßÔºåË∑üÂàÜÂ∏ÉÂºèÊó†Â§™Â§ßÂÖ≥Á≥ªÔºå‰ªÖ‰ªÖÂÆûÁé∞‰∫ÜÂçïÁÇπÁôªÈôÜÂíåÂàÜÂ∏ÉÂºèsessionÂ≠òÂÇ®ËÄåÂ∑≤„ÄÇ ‰∏™‰∫∫ÊÑüËßâ‰∏ã‰∏ÄÊúüÁöÑËØæÁ®ãÂ∫îËØ•ÊòØspringCloudÁöÑÂàÜÂ∏ÉÂºèÊîπÈÄ†ÔºåËøõË°åÊúçÂä°ÊãÜÂàÜÂíåÊ≤ªÁêÜ„ÄÇÊâÄ‰ª•ÔºåÂú®Êï¥ÂêàËøô‰∏§‰∏™ËØæÁ®ãÁöÑÂü∫Á°Ä‰∏äÁî®springCloudËøõË°åÂæÆÊúçÂä°Ê≤ªÁêÜ„ÄÇ È°πÁõÆËØ¶ÁªÜÊèèËø∞ È°πÁõÆÊ∫êÁ†ÅÂú∞ÂùÄÔºöhttps://github.com/sunweiguo/MMall Êï¥‰ΩìÊïàÊûúÊºîÁ§∫Ôºö ‰∏ãÈù¢Ë¥¥‰∏™Â∞è‰∏ÄÁÇπÁöÑgif: ÈÉ®ÂàÜÈ°µÈù¢Êà™ÂõæÔºö ÁªèËøá‰∏ÄÈÅçÈÅçÊµãËØïÔºåÂïÜÂüéËøòÊòØÂ≠òÂú®‰∏Ä‰∫õÊó†‰º§Â§ßÈõÖÁöÑbugÔºå‰ΩÜÊòØ‰∏ªË¶ÅËøòÊòØÈîªÁÇºËá™Â∑±ÁöÑËÉΩÂäõÂòõÔºÅ ‰∏ãËÆ¢ÂçïÁöÑÊó∂ÂÄôÔºåÊä•ÈîôÔºöÂïÜÂìÅ‰∏çÂ≠òÂú®ÊàñÂ∫ìÂ≠ò‰∏çË∂≥ÔºåÊòØÂõ†‰∏∫ÊàëÊ®°ÊãüÁöÑÁßíÊùÄÔºåÊâÄ‰ª•ÂïÜÂìÅÁöÑÂ∫ìÂ≠òË¶ÅÊèêÂâçÈ¢ÑÁΩÆ‰∫éredis‰∏≠ÔºåÂêéÁ´ØÁÆ°ÁêÜÁ≥ªÁªüÁöÑÂïÜÂìÅÁÆ°ÁêÜÈ°µÈù¢ÊúâÈ¢ÑÁΩÆÂ∫ìÂ≠òÁöÑÊåâÈíÆ„ÄÇ Êñ∞Â¢ûÂïÜÂìÅÁöÑÊó∂ÂÄôÔºåÂØπ‰∫é‰∏ä‰º†ÂõæÁâáÔºåÈúÄË¶ÅËÄêÂøÉÁ≠âÂæÖ‰∏Ä‰ºöÔºåÈúÄË¶ÅÁ≠âÂæÖFTPÊúçÂä°Âô®‰∏ä‰º†ÂÆåÊØïÔºåÁªô‰∏Ä‰∏™ËøîÂõû‰ø°ÊÅØ(MapÔºåÊòØÂõæÁâáÁöÑÊñá‰ª∂Âêç)ÊâçËÉΩÁúüÊ≠£ÊòæÁ§∫ÔºàÂØπ‰∫éÂØåÊñáÊú¨‰∏≠ÁöÑÂõæÁâá‰∏ä‰º†ÔºåÂú®‰∏ä‰º†‰πãÂêéÈúÄË¶ÅÁ≠âÂæÖ‰∏Ä‰ºöÔºåÊó∂Èó¥‰∏éÂ∞èÂõæ‰∏ä‰º†Â∑Æ‰∏çÂ§öÔºåÂê¶ÂàôÁõ¥Êé•‰øùÂ≠ò‰∏çÊä•ÈîôÔºå‰ΩÜÊòØÂâçÁ´ØÁúã‰∏çÂà∞ÂõæÔºåÂõ†‰∏∫ËøòÊ≤°‰∏ä‰º†ÂÆåÊØï,urlËøòÊ≤°Âõû‰º†ÂõûÊù•Ôºâ ÊôÆÈÄöÊ≥®ÂÜåÁöÑË¥¶Âè∑ÔºåÊ≤°ÊúâÁÆ°ÁêÜÂëòÊùÉÈôêÔºåÊâÄ‰ª•‰∏çËÉΩÁôªÈôÜÂêéÂè∞ÁÆ°ÁêÜÁ≥ªÁªü„ÄÇ ÂêéÊù•ÂÅö‰∫ÜeurekaÈõÜÁæ§Ôºå‰ΩÜÊòØÈÖçÁΩÆÊñá‰ª∂ËøòÊòØÂè™ÊåáÂêëÂÖ∂‰∏≠‰∏Ä‰∏™eureka Âú®Â≠¶‰π†ÁöÑËßÜÈ¢ë‰∏≠Ôºå‰∏ÄÊúüÂè™ÊòØÂÆûÁé∞‰∏öÂä°ÂäüËÉΩÔºåÂçï‰ΩìÊû∂ÊûÑÔºå‰∏Ä‰∏™tomcat„ÄÇ‰∫åÊúüÂØπÂÖ∂ÂÅö‰∫ÜÈõÜÁæ§ÔºåÂπ∂‰∏îËß£ÂÜ≥‰∫ÜÈõÜÁæ§Ê®°Âºè‰∏ãsessionÂ≠òÂÇ®ÈóÆÈ¢òÔºåÂÆûÁé∞‰∫ÜÊØîËæÉÁÆÄÂçïÁöÑÂçïÁÇπÁôªÈôÜÂäüËÉΩ„ÄÇÊû∂ÊûÑÂ¶Ç‰∏ãÔºö ÂØπ‰∫é‰∏äÈù¢ÁöÑÊû∂ÊûÑÊù•ËØ¥ÔºåÂè™ÊòØÂÅö‰∫Ü‰∏Ä‰∫õÈõÜÁæ§ËøõË°å‰ºòÂåñÔºåÈöèÁùÄ‰∏öÂä°ÁöÑÂèëÂ±ïÔºåÁî®Êà∑Ë∂äÊù•Ë∂äÂ§öÔºåÁî®Êà∑ÊúçÂä°Á≠âÂÖ∂‰ªñÊúçÂä°ÂøÖÁÑ∂Ë¶ÅÊãÜÂàÜÂá∫Êù•Áã¨Á´ãÊàê‰∏∫‰∏Ä‰∏™ÊúçÂä°ÔºåËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÔºå‰∏ÄÊñπÈù¢‰∏Ä‰∏™Âõ¢ÈòüË¥üË¥£‰∏Ä‰∏™ÊúçÂä°ÂèØ‰ª•ÊèêÈ´òÂºÄÂèëÊïàÁéáÔºåÂè¶Â§ñÔºåÂØπ‰∫éÊâ©Â±ïÊÄß‰πüÊòØÈùûÂ∏∏ÊúâÂà©ÁöÑÔºå‰ΩÜÊòØ‰πüÊòØÊúâÁº∫ÁÇπÁöÑÔºå‰ºöÂ∏¶Êù•ÂæàÂ§öÁöÑÂ§çÊùÇÊÄßÔºåÂ∞§ÂÖ∂ÊòØÂºïÂÖ•‰∫ÜÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåÊâÄ‰ª•‰∏çËÉΩ‰∏∫‰∫ÜÂàÜÂ∏ÉÂºèËÄåÂàÜÂ∏ÉÂºèÔºåËÄåÊòØÈíàÂØπ‰∏çÂêåÁöÑ‰∏öÂä°Âú∫ÊôØËÄåÈááÁî®ÂêàÈÄÇÁöÑÊû∂ÊûÑ„ÄÇ ÂæÆÊúçÂä°ÁöÑÂÆûÁé∞Ôºå‰∏ªË¶ÅÊúâ‰∏§ÁßçÔºåÂõΩÂÜÖÊòØÈòøÈáåÁ≥ªÁöÑ‰ª•dubbo+zookeeper‰∏∫Ê†∏ÂøÉÁöÑ‰∏ÄÂ•óÊúçÂä°Ê≤ªÁêÜÂíåÂèëÁé∞ÁîüÊÄÅ„ÄÇÂè¶‰∏Ä‰∏™ÂàôÊòØÂ§ßÂêçÈºéÈºéÁöÑspring cloudÊ†à„ÄÇ spring cloudÂπ∂‰∏çÊòØÂÉèspringÊòØ‰∏Ä‰∏™Ê°ÜÊû∂Ôºå‰ªñÊòØËß£ÂÜ≥ÂæÆÊúçÂä°ÁöÑ‰∏ÄÁßçÊñπÊ°àÔºåÊòØÁî±ÂêÑÁßç‰ºòÁßÄÂºÄÊ∫êÁªÑ‰ª∂ÂÖ±ÂêåÈÖçÂêàËÄåÂÆûÁé∞ÁöÑÂæÆÊúçÂä°Ê≤ªÁêÜÊû∂ÊûÑ„ÄÇ‰∏ãÈù¢ÁöÑÂõæÊòØÊàëÊûÑÊÄùÁöÑÈ°πÁõÆÁªìÊûÑÂõæÔºö ÊúÄÂâçÈù¢ÊòØNginxÔºåËøôÈáåÂ∞±‰Ωú‰∏∫‰∏Ä‰∏™ÈùôÊÄÅËµÑÊ∫êÊò†Â∞ÑÂíåË¥üËΩΩÂùáË°°Ôºånginx‰∏≠ÊúâÂá†‰∏™ÈÖçÁΩÆÊñá‰ª∂ÔºåÂàÜÂà´‰∏∫www.oursnail.cn.confÔºåËøô‰∏™‰∏ªË¶ÅÊòØÂØπzuulÁΩëÂÖ≥Âú∞ÂùÄÂÅö‰∏Ä‰∏™Ë¥üËΩΩÂùáË°°ÔºåÊåáÂêëÁΩëÂÖ≥ÊâÄÂú®ÁöÑÊúçÂä°Âô®ÔºåÂπ∂‰∏îÊâæÂà∞ÂâçÂè∞È°µÈù¢ÊâÄÂú®‰ΩçÁΩÆÂØπÈ°µÈù¢ËøõË°åÊ∏≤Êüì„ÄÇadmin.oursnail.cn.confÔºåËøô‰∏™‰∏ªË¶ÅÊòØÈÖçÁΩÆÂêéÁ´Ø‰ª•ÂèäÂêéÁ´ØÁöÑÈ°µÈù¢Êñá‰ª∂Ôºõimg.oursnail.cn.confÊòØÂØπÂõæÁâáÊúçÂä°Âô®Âú∞ÂùÄËøõË°åÊò†Â∞Ñ„ÄÇ ÁÑ∂ÂêéÊòØzuulÁΩëÂÖ≥ÔºåËøôÈáå‰∏ªË¶ÅÊòØÁî®Êù•ÈôêÊµÅ„ÄÅÈâ¥ÊùÉ‰ª•ÂèäË∑ØÁî±ËΩ¨Âèë„ÄÇ ÂÜçÂêéÈù¢Â∞±ÊòØÊàë‰ª¨ÁöÑÂ∫îÁî®ÊúçÂä°Âô®Âï¶„ÄÇÂØπÊúçÂä°Âô®ËøõË°å‰∫ÜÊúçÂä°ËøΩË∏™(sleuth)ÔºåÂÆûÁé∞‰∫ÜÂä®ÊÄÅÂà∑Êñ∞ÈÖçÁΩÆ(spring cloud config+bus)Á≠âÂäüËÉΩ„ÄÇ‰ª•http restfulÁöÑÊñπÂºèËøõË°åÈÄö‰ø°(openFeign),ÊûÑÂª∫Ëµ∑‰ª•eureka‰∏∫Ê≥®ÂÜå‰∏≠ÂøÉÁöÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑ„ÄÇ ÊØè‰∏™ÊúçÂä°ÈÉΩÊòØÂü∫‰∫éspringbootÊâìÈÄ†ÔºåÁªìÂêàmybatisÊåÅ‰πÖÂ±ÇÊìç‰ΩúÁöÑÊ°ÜÊû∂ÔºåÂÆåÊàêÂü∫Êú¨ÁöÑ‰∏öÂä°ÈúÄÊ±Ç„ÄÇspringbootÂü∫‰∫éspringÔºåÁâπÁÇπÊòØÂø´ÈÄüÂêØÂä®„ÄÅÂÜÖÁΩÆtomcat‰ª•ÂèäÊó†xmlÈÖçÁΩÆ„ÄÇÂ∞ÜÂæàÂ§ö‰∏úË•øÂ∞ÅË£ÖËµ∑Êù•ÔºåÂºïÂÖ•pomÂ∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÔºåÊØîÂ¶ÇspringMVCÂ∞±Âü∫Êú¨‰∏äÂºïÂÖ•starter-webÂç≥ÂèØ„ÄÇ Áî±‰∫éËµÑÊ∫êÁöÑÂéüÂõ†ÔºåÂè™Êúâ‰∏âÂè∞ÊúÄ‰ΩéÈÖçÁöÑÊúçÂä°Âô®ÔºåÊâÄ‰ª•Êú¨Êù•ÊÉ≥ÂÅöÁöÑÂü∫‰∫éESÁöÑÂÖ®ÊñáÊ£ÄÁ¥¢ÊúçÂä°Ê≤°ÊúâÂÅöÔºå‰πüÊ≤°ÊúâÂàÜÂ∫ìÂàÜË°®„ÄÇ Ëá≥‰∫éÂÆöÊó∂‰ªªÂä°‰ª•ÂèäHystrixÊúçÂä°ÁÜîÊñ≠ÂíåÈôçÁ∫ßÔºåÊØîËæÉÁÆÄÂçïÔºåÂ∞±‰∏çÂÅö‰∫Ü„ÄÇ È°πÁõÆÁöÑÊé•Âè£ÊñáÊ°£ËØ¶ËßÅwikiÔºöhttps://github.com/sunweiguo/spring-cloud-for-snailmall/wiki È°πÁõÆÁöÑÊï∞ÊçÆÂ∫ìË°®ËÆæËÆ°Ôºösnailmall.sql ‰∏ãÈù¢ËØ¶ÁªÜ‰ªãÁªçÊØè‰∏™Ê®°ÂùóÂÆûÁé∞ÁöÑÂ§ß‰ΩìÊÄùË∑ØÔºà‰ªÖ‰æõÂèÇËÄÉÔºåÊØïÁ´üÂ∫îÂ±äÁîüÔºåÁúüÂÆûÈ°πÁõÆÊ≤°ÂÅöËøáÔºâÔºö Áî®Êà∑Ê®°Âùó ÂÖ≥‰∫éÁî®Êà∑Ê®°ÂùóÔºåÊ†∏ÂøÉÁöÑÂäüËÉΩÊòØÁôªÈôÜ„ÄÇÂÜçÊ†∏ÂøÉÊòØÂ¶Ç‰ΩïÈ™åËØÅ‰ª•ÂèäÂ¶Ç‰ΩïÂ≠òÂÇ®Áî®Êà∑‰ø°ÊÅØ„ÄÇËøôÈáåÈááÂèñÁöÑÊñπÊ°à‰∏∫Ôºö ÂØπ‰∫éÁî®Êà∑Ê≥®ÂÜåÔºåÊàëËøôÈáåÂ∞±ÊòØÁî®Êà∑ÂêçÔºàÊòµÁß∞ÔºâÔºåÈÇ£‰πàÂ¶Ç‰Ωï‰øùËØÅ‰∏çÈáçÂ§çÂë¢ÔºàÈ´òÂπ∂ÂèëÔºâÔºüËøôÈáåËøòÊòØÁî®‰∫ÜÂàÜÂ∏ÉÂºèÈîÅÊù•‰øùËØÅÁöÑ„ÄÇ ÂØπ‰∫éÊú™ÁôªÈôÜÁ´†Âè∞‰∏ãÁî®Êà∑‰øÆÊîπÂØÜÁ†ÅÔºåÈÄªËæë‰∏∫Ôºö Ë¥≠Áâ©ËΩ¶Ê®°Âùó ËÆ¢ÂçïÊ®°Âùó ÈíàÂØπËøô‰∫õÈóÆÈ¢òÔºåÊàëÊÉ≥ËØ¥‰∏Ä‰∏ãÊàëÁöÑÊÄùË∑Ø„ÄÇ ÂØπ‰∫éÂπÇÁ≠âÊÄßÔºåËøôÈáå‰∫ßÁîüÂπÇÁ≠âÊÄßÁöÑ‰∏ªË¶ÅÂéüÂõ†Âú®‰∫éMQÁöÑÈáç‰º†Êú∫Âà∂ÔºåÂèØËÉΩÁ¨¨‰∏Ä‰∏™Ê∂àÊÅØ‰πÖ‰πÖÊ≤°ÊúâÂèëÂá∫ÂéªÔºåÁÑ∂ÂêéÈáçÊñ∞ÂèëÈÄÅ‰∏ÄÊù°ÔºåÁªìÊûúÁ¨¨‰∏ÄÊù°Ê∂àÊÅØÁ™ÅÁÑ∂ÂèàÂ•Ω‰∫ÜÔºåÈÇ£‰πàÂ∞±‰ºöÈáçÂ§çÂèë‰∏§Ë∑≥ÔºåÂØπ‰∫éÁî®Êà∑Êù•ËØ¥ÔºåÂè™‰∏ã‰∏ÄÊ¨°ÂçïÔºå‰ΩÜÊòØÊúçÂä°Âô®‰∏ã‰∫ÜÂ§öÊ¨°ËÆ¢Âçï„ÄÇÁΩë‰∏äËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑÊÄùË∑ØÊòØÂàõÂª∫‰∏ÄÂº†Ë°®ÔºåÂ¶ÇÊûúÊòØÈáçÂ§çÁöÑËÆ¢ÂçïÂè∑ÔºåÂ∞±‰∏çÂèØËÉΩÂàõÂª∫Â§öÊ¨°‰∫Ü„ÄÇËøòÊúâ‰∏ÄÁßçÂèØËÉΩÊñπÊ°àÊòØÁî®ÂàÜÂ∏ÉÂºèÈîÅÂØπËØ•ËÆ¢ÂçïÂè∑ÈîÅ‰Ωè‰∏ÄÊÆµÊó∂Èó¥ÔºåÁî±‰∫éÂè™ÊòØÈîÅ‰ΩèËÆ¢ÂçïÂè∑ÔºåÊâÄ‰ª•‰∏çÂΩ±ÂìçÊÄßËÉΩÔºåÂú®Ëøô‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÊòØ‰∏çÂèØ‰ª•ÂÜçÊîæÂêå‰∏Ä‰∏™ËÆ¢ÂçïÂè∑ÁöÑËØ∑Ê±ÇËøõÊù•„ÄÇ ÂØπ‰∫éMQÊ∂àÊÅØ‰∏ç‰∏¢Â§±ÔºåÂè™ËÉΩÊòØËÆ¢ÈòÖÊ®°Âºè‰∫Ü„ÄÇÊ∂àÊÅØÂèëÂá∫Âéª‰πãÂêéÔºåÊ∂àË¥πÁ´ØÁªôMQÂõûÂ§ç‰∏Ä‰∏™Êé•Êî∂Âà∞ÁöÑ‰ø°ÊÅØÔºåMQÊú¨Ê¨°Ê∂àË¥πÊàêÂäüÔºåÁªôËÆ¢ÈòÖËÄÖ‰∏Ä‰∏™ÂõûÂ§ç„ÄÇ ÂØπ‰∫éÂÖ®Â±ÄÂîØ‰∏ÄIDÁîüÊàêÔºåËøôÈáåÁî®ÁöÑÊòØÈõ™Ëä±ÁÆóÊ≥ïÔºåÂÖ∑‰Ωì‰ªãÁªçÂèØ‰ª•ÁúãÊàëÁöÑÁ¨îËÆ∞ ÂØπ‰∫éÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåÊØîËæÉÂ§çÊùÇÔºåËøôÈáåÂÖ∂ÂÆûÂπ∂Ê≤°ÊúâÁúüÊ≠£Â§ÑÁêÜÔºåÂØπ‰∫éÊï∞ÊçÆÂ∫ìÊâ£ÂáèÂ∫ìÂ≠òÂíåÊï∞ÊçÆÂ∫ìÊèíÂÖ•ËÆ¢ÂçïÔºå‰ªñ‰ª¨Âú®‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÔºåÂªñÂ∏àÂÖÑÊØîËæÉÂÄæÂêëÁöÑÊñπÂºèÊòØÔºö Ëøô‰∏ÄÂàáÁöÑÂü∫Á°ÄËøòÊòØÈúÄË¶ÅÊúâ‰∏Ä‰∏™ÂèØÈù†ÁöÑÊ∂àÊÅØÊúçÂä°ÔºåÁ°Æ‰øùÊ∂àÊÅØË¶ÅËÉΩÈÄÅËææ„ÄÇ ÈíàÂØπredisÈ¢ÑÂáèÂ∫ìÂ≠òÂ≠òÂú®ÁöÑÂπ∂ÂèëÈóÆÈ¢òÔºåËøôÈáåÁöÑÊÄùË∑ØÊòØÁî®lua+redisÔºåÂú®È¢ÑÂáè‰πãÂâçÂà§Êñ≠Â∫ìÂ≠òÊòØÂê¶Â§üÔºåËøô‰∏§‰∏™Êìç‰ΩúË¶ÅÂú®‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúÈáåÈù¢ÊâçË°åÔºåluaÊÅ∞Â•ΩÂèØ‰ª•ÂÆûÁé∞ÂéüÂ≠êÊÄß„ÄÅÈ°∫Â∫èÊÄßÂú∞Êìç‰Ωú„ÄÇ ÊîØ‰ªòÊ®°Âùó ËøôÈáåÂØπÊé•ÁöÑÊòØÊîØ‰ªòÂÆù-Êâ´Á†ÅÊîØ‰ªòÔºåÁî®Âà∞ÊòØÊîØ‰ªòÂÆùÊ≤ôÁÆ±ÁéØÂ¢É„ÄÇÊîØ‰ªòÁöÑÊâ´Á†ÅÊîØ‰ªòËØ¶ÁªÜÊµÅÁ®ãÂú®ËøôÈáåËÅä‰∏ÄËÅäÂìà„ÄÇ ÂïÜÊà∑ÂâçÂè∞Â∞ÜÂïÜÂìÅÂèÇÊï∞ÂèëÈÄÅËá≥ÂïÜÊà∑ÂêéÂè∞ÔºåÂïÜÊà∑ÂêéÂè∞ÁîüÊàêÂÜÖÈÉ®ËÆ¢ÂçïÂè∑Âπ∂Áî®‰∫éËØ∑Ê±ÇÊîØ‰ªòÂπ≥Âè∞ÂàõÂª∫È¢Ñ‰∏ãÂçïÔºåÊîØ‰ªòÂπ≥Âè∞ÂàõÂª∫ÂÆåÈ¢ÑËÆ¢ÂçïÂêéÂ∞ÜËÆ¢Âçï‰∫åÁª¥Á†Å‰ø°ÊÅØËøîËøòÁªôÂïÜÊà∑ÔºåÊ≠§Êó∂Áî®Êà∑Âç≥ÂèØÊâ´Âèñ‰∫åÁª¥Á†ÅËøõË°å‰ªòÊ¨æÊìç‰Ωú„ÄÇ ÂÜÖÈÉ®ËÆ¢ÂçïÂè∑ÔºöËøôÊòØÁõ∏ÂØπ‰∫éÊîØ‰ªòÂÆùÂπ≥Âè∞ËÄåË®ÄÁöÑÔºåËøô‰∏™ËÆ¢ÂçïÂè∑ÊòØÊàë‰ª¨ÂïÜÂüéËá™Â∑±ÁîüÊàêÁöÑÔºåÂØπ‰∫éÊàë‰ª¨ÂïÜÂüéÊù•ËØ¥ÊòØÂÜÖÈÉ®ËÆ¢ÂçïÂè∑Ôºå‰ΩÜÊòØÂØπ‰∫éÊîØ‰ªòÂÆùÊù•ËØ¥ÊòØÂ§ñÈÉ®ËÆ¢ÂçïÂè∑„ÄÇ Â∞Ü‰∏ÄÁ≥ªÂàóÁöÑÊï∞ÊçÆÊåâÁÖßÊîØ‰ªòÂÆùÁöÑË¶ÅÊ±ÇÂèëÈÄÅÁªôÊîØ‰ªòÂÆùÂπ≥Âè∞ÔºåÂåÖÊã¨ÂïÜÂìÅ‰ø°ÊÅØÔºåÁîüÊàêÁöÑÈ™åÁ≠æsignÔºåÂÖ¨Èí•ÔºõÊîØ‰ªòÂÆùÂéªÂ∞ÜsignËß£ÂØÜÔºåËøõË°åÂïÜÂìÅÁöÑÂêÑÁßç‰ø°ÊÅØÊ†°È™å„ÄÇÊ†°È™åÈÄöËøáÔºåÂêåÊ≠•ËøîÂõû‰∫åÁª¥Á†Å‰∏≤„ÄÇ ÊîØ‰ªò‰∏öÂä°ÊµÅÁ®ãÂõæÔºö Âú®Ëé∑ÂèñÊîØ‰ªòÁöÑ‰∫åÁª¥Á†Å‰∏≤‰πãÂêéÔºåÁî®Â∑•ÂÖ∑ÂåÖÂ∞ÜÂÖ∂ËΩ¨Êç¢Êú™‰∫åÁª¥Á†ÅÂ±ïÁ§∫ÁªôÁî®Êà∑Êâ´Á†Å„ÄÇ Áî®Êà∑Êâ´Á†ÅÂêéÔºå‰ºöÊî∂Âà∞Á¨¨‰∏ÄÊ¨°ÊîØ‰ªòÂÆùÁöÑÂõûË∞ÉÔºåÂ±ïÁ§∫Ë¶ÅÊîØ‰ªòÁöÑÈáëÈ¢ùÔºåÂïÜÂìÅ‰ø°ÊÅØÁ≠â„ÄÇ Áî®Êà∑ËæìÂÖ•ÂØÜÁ†ÅÊàêÂäüÂêéÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰ºöÊî∂Âà∞ÊîØ‰ªòÂÆùÁöÑÁ¨¨‰∫åÊ¨°ÂõûË∞ÉÔºåÂç≥ÊîØ‰ªòÊàêÂäü‰ø°ÊÅØ„ÄÇ ‰ΩÜÊòØ‰πüÂèØËÉΩ‰ºöÁî±‰∫éÁΩëÁªúÁ≠âÂéüÂõ†ÔºåËøüËøüÊî∂‰∏çÂà∞ÊîØ‰ªòÂÆùÁöÑÂõûË∞ÉÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶Å‰∏ªÂä®ÂèëËµ∑ËΩÆËØ¢ÂéªÊü•ÁúãÊîØ‰ªòÁä∂ÊÄÅ„ÄÇ Âú®ÊîØ‰ªòÊàêÂäü‰πãÂêéÔºåÊé•Êî∂ÂõûË∞ÉÁöÑÊé•Âè£Ë¶ÅËÆ∞ÂæóËøîÂõûsuccessÂëäËØâÊîØ‰ªòÂÆùÊàëÂ∑≤ÁªèÊî∂Âà∞‰Ω†ÁöÑÂõûË∞É‰∫ÜÔºå‰∏çË¶ÅÂÜçÈáçÂ§çÂèëÁªôÊàë‰∫Ü„ÄÇÊé•Êî∂ÂõûË∞ÉÁöÑÊé•Âè£‰πüË¶ÅÂÅöÂ•ΩÂéªÈô§ÈáçÂ§çÊ∂àÊÅØÁöÑÈÄªËæë„ÄÇ Ëøô‰∏™ÊµÅÁ®ãÊòØÂ§ö‰πàÂú∞ÁÆÄÂçïËÄåÁêÜÊâÄÂΩìÁÑ∂ÔºÅ ÂØπÂ∫î‰∫é‰ª£Á†ÅÂ±ÇÈù¢ÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏§‰∏™Êé•Âè£Ôºå‰∏Ä‰∏™ÊòØÁî®Êà∑ÁÇπÂáªÂéªÊîØ‰ªòÊåâÈíÆÔºåÊ≠§Êó∂ÂèëËµ∑È¢Ñ‰∏ãÂçïÔºåÂ±ïÁ§∫‰ªòÊ¨æ‰∫åÁª¥Á†ÅÔºåÂè¶‰∏Ä‰∏™ÊòØÊé•Êî∂ÊîØ‰ªòÂÆùÂõûË∞ÉÔºö È¢Ñ‰∏ãÂçïÔºö Êé•Êî∂ÊîØ‰ªòÂÆùÊîØ‰ªòÁä∂ÊÄÅÂõûË∞ÉÔºö È°πÁõÆËøõÂ±ï [x] 2018/12/31 ÂÆåÊàê‰∫ÜËÅöÂêàÂ∑•Á®ãÁöÑÂàõÂª∫„ÄÅEurekaÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉ„ÄÅspring cloud config+gitHub+spring cloud busÔºàrabbitMQÔºâÂÆûÁé∞ÈÖçÁΩÆËá™Âä®Âà∑Êñ∞‚Äìv1.0 [x] 2018/12/31 Â∞ÜEurekaÊ≥®ÂÜå‰∏≠ÂøÉ(ÂçïÊú∫)ÂíåÈÖçÁΩÆ‰∏≠ÂøÉÈÉ®ÁΩ≤Âà∞ÊúçÂä°Âô®‰∏äÔºåËøôÊØîËæÉÂõ∫ÂÆöÔºåÊâÄ‰ª•ÂÖàÈÉ®ÁΩ≤‰∏äÂéªÔºå‰ª•ÂêéÊú¨Âú∞Â∞±Áõ¥Êé•Áî®Ëøô‰∏§‰∏™Âç≥ÂèØÔºåÂØπÈÖçÁΩÆËøõË°å‰∫Ü‰∏ÄÁÇπÁÇπ‰øÆÊîπ [ ] 2018/12/31 ÂÖ≥‰∫éÈÖçÁΩÆÁöÑËá™Âä®Âà∑Êñ∞ÔºåÁî®postmanÂèëÈÄÅpostËØ∑Ê±ÇÊòØÂèØ‰ª•ÁöÑÔºå‰ΩÜÊòØÁî®github webhook‰∏çË°åÔºå‰∏çÁü•ÈÅìÊòØ‰∏çÊòØËøô‰∏™ÁâàÊú¨ÁöÑÈóÆÈ¢ò [x] 2018/12/31 Áî®Êà∑Ê®°ÂùóÁöÑÈÄªËæëÂÆûÁé∞,È¶ñÂÖàÂ¢ûÂä†‰∫Ü‰∏Ä‰∫õpomÊñá‰ª∂ÁöÑÊîØÊåÅÔºåÊï¥ÂêàmybatisÔºåÊµãËØïÊï∞ÊçÆÂ∫ìÈÉΩÈÄöËøáÔºå‰∏ãÈù¢Â∞±ÂèØ‰ª•ÁúüÊ≠£ÂéªÂÆûÁé∞‰∏öÂä°‰ª£Á†Å‰∫Ü [x] 2019/1/1 ÂÆåÊàêÁî®Êà∑Ê≥®ÂÜå„ÄÅÁôªÈôÜ„ÄÅÊ†°È™åÁî®Êà∑ÂêçÈÇÆÁÆ±ÊúâÊïàÊÄß„ÄÅÊü•ÁúãÁôªÈôÜÁî®Êà∑‰ø°ÊÅØ„ÄÅÊ†πÊçÆÁî®Êà∑ÂêçÂéªÊãøÂà∞ÂØπÂ∫îÁöÑÈóÆÈ¢ò„ÄÅÊ†°È™åÁ≠îÊ°àÊòØÂê¶Ê≠£Á°Æ„ÄÅÈáçÁΩÆÂØÜÁ†ÅËøô‰∏™Âá†‰∏™Êé•Âè£ÔºåÂú®Ê≥®ÂÜåËøô‰∏™Êé•Âè£ÔºåÂ¢ûÂä†‰∏Ä‰∏™ZKÂàÜÂ∏ÉÂºèÈîÅÊù•Èò≤Ê≠¢Âú®È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÂá∫Áé∞Áî®Êà∑ÂêçÊàñÈÇÆÁÆ±ÈáçÂ§çÈóÆÈ¢ò [x] 2019/1/2 ‰∏äÂçàÂÆåÊàêÈó®Êà∑Áî®Êà∑Ê®°ÂùóÊâÄÊúâÊé•Âè£‚Äìv2.0 [x] 2019/1/2 ‰∏ãÂçàÂÆåÊàêÂìÅÁ±ªÁÆ°ÁêÜÊ®°ÂùóÔºåÂÖ≥‰∫éÁπÅÁêêÁöÑËé∑ÂèñÁî®Êà∑Âπ∂‰∏îÈâ¥ÊùÉÂ∑•‰ΩúÔºåËøôÈáåÂÖàÊîæÊØè‰∏™Êé•Âè£ÈáåÈù¢Â§ÑÁêÜÔºåÂêéÈù¢ÊîæÂà∞ÁΩëÂÖ≥‰∏≠ÂéªÂÆûÁé∞‚Äìv3.0 [x] 2019/1/3 ‰∏äÂçàÂºïÂÖ•ÁΩëÂÖ≥ÊúçÂä°ÔºåÂ∞ÜÂêéÂè∞ÈáçÂ§çÁöÑÊùÉÈôêÊ†°È™åÁªü‰∏ÄÊîæÂà∞ÁΩëÂÖ≥‰∏≠ÂéªÂÅöÔºåÂπ∂‰∏îÂä†‰∫ÜÈôêÊµÅÔºåËß£ÂÜ≥‰∫Ü‰∏Ä‰∏ãË∑®ÂüüÈóÆÈ¢ò„ÄÇ‚Äìv4.0 [x] 2019/1/3 ‰∏ãÂçàÂíåÊôö‰∏äÂÆåÊàêÈó®Êà∑ÂíåÂêéÂè∞ÁöÑÂïÜÂìÅÁÆ°ÁêÜÊ®°ÂùóÊâÄÊúâÁöÑÊé•Âè£ÂäüËÉΩÔºåÈô§‰∫Ü‰∏ä‰º†Êñá‰ª∂ÁöÑ‰∏§‰∏™Êé•Âè£Ê≤°ÊúâÊµãËØï‰ª•Â§ñÔºåÂÖ∂‰ªñÊé•Âè£ÈÉΩËøõË°å‰∫ÜÁÆÄÂçïÁöÑÊµãËØïÔºåÂÖ∂‰∏≠ËøòÁî®FeignÂéªË∞ÉÁî®‰∫ÜÂìÅÁ±ªÊúçÂä°Êé•Âè£‚Äìv5.0 [x] 2019/1/3 ÂàùÊ≠•ÊääË¥≠Áâ©ËΩ¶Ê®°ÂùóÂíåÊ®°ÂùóÂºïÂÖ•ÔºåÈÄöËøáÂü∫Á°ÄÊµãËØïÔºåÂêéÈù¢Âú®Ê≠§Âü∫Á°Ä‰∏äÁõ¥Êé•ÂºÄÂèë‰ª£Á†ÅÂç≥ÂèØÔºåÊòéÂ§©‰∏ãÂçàÁúã„ÄäÂ§ßÈªÑËúÇ„ÄãÔºåÊôö‰∏äÂ∏àÈó®ËÅöÈ§êÂêÉÁÅ´ÈîÖÔºåÊòéÂ§©Êó©‰∏äËµ∂‰∏ÄËµ∂ÂêßÔºå‰ªäÂ§©‰ªªÂä°ÁªìÊùüÔºÅ [x] 2019/1/4 Êï¥ÁêÜ‰∫ÜÊé•Âè£ÊñáÊ°£ÔºåÂπ∂‰∏îÁîª‰∫Ü‰∏Ä‰∏ãË¥≠Áâ©ËΩ¶Ê®°ÂùóÁöÑÊµÅÁ®ãÂõæ‰ª•ÂèäËÆ¢ÂçïÊúçÂä°ÁöÑÊµÅÁ®ãÂõæÔºåÈíàÂØπËÆ¢ÂçïÊúçÂä°‰∏≠ÔºåËÆ∞ÂΩï‰∫ÜÈúÄË¶Å‰∏Ä‰∫õÊ≥®ÊÑèÁöÑÈóÆÈ¢òÔºåÂ∞ΩÂèØËÉΩÂú∞ÂÆåÂñÑÔºåÊèêÈ´òÂèØÁî®ÊÄßÂíåÊÄßËÉΩ„ÄÇÂπ∂‰∏îÂÆåÊàêË¥≠Áâ©ËΩ¶Ê®°ÂùóÁöÑcontrollerÂ±Ç„ÄÇ [x] 2019/1/5 ÂÆåÊàêË¥≠Áâ©ËΩ¶Ê®°ÂùóÔºåÂπ∂‰∏îËøõË°å‰∫ÜÁÆÄÂçïÁöÑÊµãËØïÔºåËøôÈáåËøõË°å‰∫Ü‰∏§Â§ÑÊîπÈÄ†Ôºå‰∏Ä‰∏™ÊòØÂà§Êñ≠‰∫Ü‰∏Ä‰∏ãÊòØÂê¶ÈúÄË¶ÅÂà§Êñ≠Â∫ìÂ≠òÔºõÂè¶‰∏Ä‰∏™ÊòØÂïÜÂìÅ‰ø°ÊÅØ‰ªéredis‰∏≠ÂèñÔºåÂèñ‰∏çÂá∫Êù•ÂàôË∞ÉÁî®ÂïÜÂìÅÊúçÂä°ÂàùÂßãÂåñÂÄº [x] 2019/1/5 Êî∂Ë¥ßÂú∞ÂùÄÁÆ°ÁêÜÊ®°ÂùóÔºåËøô‰∏™Ê®°ÂùóÂ∞±ÊòØ‰∏™Â¢ûÂà†ÊîπÊü•ÔºåÊ≤°Âï•‰∏úË•øÂÜôÔºåËøôÈáåÂ∞±‰∏çÂä†ÁºìÂ≠ò‰∫Ü„ÄÇ [x] 2019/1/6 ÂÆåÊàê‰∫ÜÂêéÂè∞ËÆ¢ÂçïÁÆ°ÁêÜÊ®°ÂùóÂπ∂‰∏îËøõË°å‰∫ÜÊµãËØïÔºåË∞ÉÁî®Êî∂Ë¥ßÂú∞ÂùÄÊúçÂä°Êó∂ÔºåÂèëÁé∞Êî∂Ë¥ßÂú∞ÂùÄÊúçÂä°Êó†Ê≥ïËØªÂèñÂà∞cookieÔºåÈÄöËøáËøô‰∏™ÊñπÊ≥ï(https://blog.csdn.net/WYA1993/article/details/84304243) ÊöÇÊó∂Ëß£ÂÜ≥‰∫ÜÈóÆÈ¢ò [x] 2019/1/6 È¢ÑÁΩÆÊâÄÊúâÂïÜÂìÅÂ∫ìÂ≠òÂà∞redis‰∏≠ÔºõÈ¢ÑÁΩÆÊâÄÊúâÂïÜÂìÅÂà∞redis‰∏≠ÔºõÂ§ßÊ¶ÇÁ°ÆÂÆöÂ•ΩËÆ¢ÂçïÊúçÂä°ÊÄùË∑ØÔºöÈ¢ÑÂáèÂ∫ìÂ≠òÔºàredisÂà§Êñ≠Â∫ìÂ≠òÔºâ‚ÄîÂØπuserIDÂ¢ûÂä†ÂàÜÂ∏ÉÂºèÈîÅÈò≤Ê≠¢Áî®Êà∑ÈáçÂ§çÊèê‰∫§ËÆ¢Âçï‚ÄìMQÂºÇÊ≠•‰∏ãËÆ¢Âçï [x] 2019/1/6 Êñ∞Â¢ûÂÖ®Â±ÄÂîØ‰∏ÄIDÁîüÊàêÊúçÂä°ÔºåÈõ™Ëä±ÁÆóÊ≥ïÂÆûÁé∞ [x] 2019/1/7 ÂÆåÂñÑËÆ¢ÂçïÊúçÂä°-Ëøô‰∏ÄÂùóÊ∂âÂèäË∑®Â∫ìÊìç‰ΩúÔºåÂπ∂‰∏î‰∏çÂÅúÂú∞Ë∞ÉÁî®ÂÖ∂‰ªñÊúçÂä°ÔºåËÑëÂ≠êÈÉΩÂø´Êôï‰∫ÜÔºåËøôÈáåÈááÂèñÁöÑÁ≠ñÁï•ÊòØÔºöÁî®Âà∞Ë¥≠Áâ©ËΩ¶ÁöÑÊó∂ÂÄôÔºåÂéªË∞ÉÁî®Ë¥≠Áâ©ËΩ¶ÊúçÂä°Ëé∑ÂèñÔºõ‰∫ßÂìÅËØ¶ÊÉÖ‰ªéredis‰∏≠Ëé∑Âèñ„ÄÇÈ¶ñÂÖàÂ∞ÜÂïÜÂìÅ‰ª•ÂèäÂïÜÂìÅÂ∫ìÂ≠òÂÖ®ÈÉ®ÁºìÂ≠òÂà∞redis‰∏≠ÔºåÁÑ∂ÂêéÁî®Êà∑‰∏ãÂçïÔºåÂÖà‰ªéredis‰∏≠Âà§Êñ≠Â∫ìÂ≠òÔºåÂ§üÂàôÂáèÔºåÂà§Êñ≠ ÂíåÊâ£ÂáèÊîæÂú®luaËÑöÊú¨‰∏≠ÂéüÂ≠êÊâßË°åÔºåÁÑ∂ÂêéMQÂºÇÊ≠•Âá∫ÂéªÁîüÊàêËÆ¢ÂçïÔºàÁîüÊàêËÆ¢Âçï‰∏ªË°®ÂíåËÆ¢ÂçïËØ¶ÊÉÖË°®ÊîæÂú®‰∏Ä‰∏™Êú¨Âú∞‰∫ãÂä°‰∏≠ÔºâÔºåËøô‰∏§Ê≠•Êìç‰ΩúÊàêÂäü‰πãÂêéÔºåÂÜçÁî®MQÂéªÂºÇÊ≠•Âà†Èô§Ë¥≠Áâ©ËΩ¶„ÄÇMQÊ∂àË¥π‰∏çÊàêÂäüÂàôÈáçËØï„ÄÇ ÂØπ‰∫éÊâ£ÂáèÂ∫ìÂ≠òËøô‰∏ÄÊ≠•ÔºåÊÉ≥Ê≥ïÊòØÁî®ÂÆöÊó∂‰ªªÂä°ÔºåÂÆöÊó∂‰∏éredis‰∏≠ËøõË°åÂêåÊ≠•„ÄÇËøôÈáåÊòØÊ®°Êãü‰∫ÜÁßíÊùÄÂú∫ÊôØÔºåÈ¢ÑÂáèÂ∫ìÂ≠ò+MQÂºÇÊ≠•ÔºåÊèê‰∫§ËÆ¢Âçï‚Äì&gt;redisÂà§Êñ≠Âπ∂‰∏îÂáèÂ∫ìÂ≠ò‚Äì&gt;Ë∞ÉÁî®cart-serviceËé∑ÂèñË¥≠Áâ©ËΩ¶‚Äì&gt;MQÂºÇÊ≠•(userId,shippingId)ÁîüÊàêËÆ¢Âçï‰∏ªË°®ÂíåËØ¶ÊÉÖË°®‚Äì&gt;‰∏äÈù¢ÈÉΩÊàêÂäüÔºåÂàôMQÂºÇÊ≠•(userId) ÂéªÊ∏ÖÈô§Ë¥≠Áâ©ËΩ¶ÔºåÂ∫ìÂ≠òÁî®ÂÆöÊó∂‰ªªÂä°ÂéªÂêåÊ≠•(Êú™ÂÅö)ÔºåÁêÜÊÉ≥ÁöÑÂÅöÊ≥ïÊòØÔºöMQÂºÇÊ≠•Êâ£ÂáèÂ∫ìÂ≠òÔºåËÆ¢ÂçïÊúçÂä°ËÆ¢ÈòÖÊâ£ÂáèÂ∫ìÂ≠òÊ∂àÊÅØÔºå‰∏ÄÊó¶Â∫ìÂ≠òÊâ£ÂáèÊàêÂäüÔºåÂàôËøõË°åËÆ¢ÂçïÁîüÊàê„ÄÇ [x] 2019/1/8 ÁªßÁª≠ÂÆåÂñÑËÆ¢ÂçïÊé•Âè£ÔºåÂÆåÊàêÊîØ‰ªòÊúçÂä°ÔºåÂ∞±Áõ¥Êé•ÊîæÂú®ËÆ¢ÂçïÊúçÂä°ÈáåÈù¢‰∫ÜÔºåÂõ†‰∏∫‰∏éËÆ¢ÂçïÈÄªËæëÁ¥ßÂØÜÔºåÂ∞±ÊîæÂú®‰∏ÄËµ∑‰∫Ü„ÄÇ [x] 2019/1/8 ‰ΩøÁî®‰∫Ü‰∏Ä‰∏ãswaggerÔºåÂèëÁé∞‰ª£Á†Å‰æµÂÖ•ÊØîËæÉÂº∫ÔºåÊØè‰∏Ä‰∏™Êé•Âè£‰∏äÈù¢ÈÉΩË¶ÅÊâãÂä®Êâì‰∏äÂìçÂ∫îÁöÑÊ≥®Ëß£ [x] 2019/1/8 ÂÖ≥‰∫éhystrixÁÜîÊñ≠‰∏éÈôçÁ∫ßÔºåÂèØ‰ª•ÂºïÂÖ•hystrixÁöÑ‰æùËµñÔºåÁî®@HystrixCommandÊ≥®Ëß£Êù•ÊéßÂà∂Ë∂ÖÊó∂Êó∂Èó¥„ÄÅÊúçÂä°ÈôçÁ∫ß‰ª•ÂèäÊúçÂä°ÁÜîÊñ≠„ÄÇ‰πüÂèØ‰ª•Áõ¥Êé•ÂÜç@FeignClientÊé•Âè£‰∏≠ÊåáÂÆöÊúçÂä°ÈôçÁ∫ßÁöÑÁ±ªÔºåËøôÈáå‰∏çÊºîÁ§∫‰∫ÜÔºåÂõ†‰∏∫ËÆæÁΩÆÊØîÂ¶ÇË∂ÖÊó∂Êó∂Èó¥ÔºåÊàëËøòË¶ÅÈáçÊñ∞ÊµãËØïÔºåÂÜôËµ∑Êù•ÂæàÁÆÄÂçïÔºåÊµãËµ∑Êù•ÊúâÁÇπÂÑøÈ∫ªÁÉ¶ [x] 2019/1/9 ÊúçÂä°Ë∑üË∏™ÔºåÊúçÂä°Á´ØÊòØÁõ¥Êé•Áî®ÁöÑÁ∫øÁ®ãÁöÑÔºåÂè™ÈúÄË¶Å‰∏ãËΩΩÔºöwget -O zipkin.jar ‚Äòhttps://search.maven.org/remote_content?g=io.zipkin.java&amp;a=zipkin-server&amp;v=LATEST&amp;c=exec‚ÄôÔºåÁÑ∂Âêénohup java -jar zipkin.jar &gt; zipkin.server.out &amp; ÔºåÂºÄÊîæ9411Á´ØÂè£ÔºåÊâìÂºÄÊµèËßàÂô®http://ip:9411ÁúãÂà∞È°µÈù¢Âç≥ÂèØ„ÄÇ ÂÆ¢Êà∑Á´ØÂè™ÈúÄË¶ÅÊ∑ªÂä†Áõ∏Â∫î‰æùËµñÂíåÈÖçÁΩÆÊñá‰ª∂Âç≥ÂèØ„ÄÇÁî®ÂÆ¢Êà∑Á´ØÊµãËØïÔºåÂèëÁé∞Ê≠ªÊ¥ª‰∏çÂá∫Áé∞ÊàëÁöÑËØ∑Ê±ÇÔºåÁªèËøáÊêúÁ¥¢ÔºåÂèëÁé∞ÈúÄË¶ÅÂ¢ûÂä†spring.zipkin.sender.type= webËøô‰∏™ÈÖçÁΩÆÈ°πÊâçË°å. [x] 2019/1/10 ÂàùÊ≠•ÊääÈ°πÁõÆÈÉ®ÁΩ≤Âà∞ÊúçÂä°Âô®‰∏äÔºåËøõË°åÊµãËØïÔºåbugÂ§öÂ§öÔºå‰øÆÊîπ‰∏≠‚Ä¶ [x] 2019/1/10 Êîπ‰∫Ü‰∏ÄÂ§©ÁöÑbugÔºåÂÖ∂‰∏≠ÁΩëÂÖ≥ÁöÑË∂ÖÊó∂Êó∂Èó¥‰ª•ÂèäfeignÁöÑË∂ÖÊó∂Êó∂Èó¥ÈÉΩË¶ÅÊîπÂ§ß‰∏ÄÁÇπÔºåÂê¶Âàô‰ºöË∂ÖÊó∂Êä•Èîô„ÄÇÊúÄÁªàÊàêÂäüÔºåËä±‰∫Ü‰∏âÂè∞ÊúçÂä°Âô®ÔºåÈÉ®ÁΩ≤‰∫Ü11‰∏™ÊúçÂä°„ÄÇÂêéÈù¢ÊääÈÉ®ÁΩ≤ËøáÁ®ãÂÜô‰∏Ä‰∏ã„ÄÇ [x] 2019/1/11 Â∞ÜÊ≥®ÂÜå‰∏≠ÂøÉÂÅöÊàêÈõÜÁæ§ÔºåÂõ†‰∏∫Êó©‰∏ä‰∏ÄËµ∑Êù•ÔºåÊ≥®ÂÜå‰∏≠ÂøÉÊåÇ‰∫ÜÔºüÔºüÔºü [ ] 2019/1/11 dockerÈÉ®ÁΩ≤(ÂïÜÂüéÁ¨¨ÂõõÊúüÁöÑÊîπÈÄ†ÁõÆÊ†á:ÂÆπÂô®Âåñ+ÂÆπÂô®ÁºñÊéí)ÔºåÊú¨ÊúüÊîπÈÄ†ÁªìÊùü„ÄÇ [x] 2019/1/11 ÂÆåÂñÑreadmeÊñáÊ°£ [x] 2019/1/12 ‰∏§Ê¨°ÂèëÁé∞redisÊï∞ÊçÆË¢´Ëé´ÂêçÂÖ∂Â¶ôÊ∏ÖÁ©∫ÔºåÊàëÁ°ÆÂÆö‰∏çÊòØÁºìÂ≠òÂà∞ÊúüÔºå‰∏∫‰∫ÜÂÆâÂÖ®Ëµ∑ËßÅÔºåËÆæÁΩÆ‰∫ÜredisÁöÑÂØÜÁ†ÅÔºåÊòéÂ§©ÁúãÁºìÂ≠òÊï∞ÊçÆËøòÂú®‰∏çÂú®„ÄÇ [x] 2019/1/14 redisÊï∞ÊçÆÊ≤°ÊúâÂÜç‰∏¢Â§±Ôºå‰øÆÂ§çÁî®Êà∑Êõ¥Êñ∞‰ø°ÊÅØÁöÑbug È°πÁõÆÂêØÂä® ÂÆâË£Öredis„ÄÅzookeeper„ÄÅmysql„ÄÅjdk„ÄÅnginx‰ª•ÂèärabbitMQ„ÄÇ ÂØπ‰ª£Á†ÅËøõË°åmaven-packageÊìç‰Ωú„ÄÇÊâìÂåÖÊàêjarÂåÖ„ÄÇÂ∞ÜÂÖ∂ÊîæÂà∞ÊúçÂä°Âô®‰∏äÔºö ÊâßË°ånohup java -jar snailmall-user-service.8081 &gt; user-service.out &amp;ÂêéÂè∞ÂêØÂä®Âç≥ÂèØ„ÄÇ Ë°•ÂÖÖÔºöÈíàÂØπÈÖçÁΩÆÂà∑Êñ∞Ôºå‰øÆÊîπ‰∫Ügithub‰ø°ÊÅØÔºåÁî®postmanËØ∑Ê±Çhttp://xxxxx:8079/actuator/bus-refresh Ëß¶ÂèëÊõ¥Êñ∞„ÄÇ Êú¨ÊîπÈÄ†ÊòØÂü∫‰∫éÂø´‰πêÊÖïÂïÜÂüé‰∏ÄÊúüÂíåÂø´‰πêÊÖïÂïÜÂüé‰∫åÊúüÁöÑÂü∫Á°Ä‰∏äËøõË°åÊîπÈÄ†„ÄÇÊâÄ‰ª•ÈúÄË¶ÅÂú®ÂÖ∂‰∏öÂä°Âü∫Á°Ä‰∏äÊîπÈÄ†‰ºöÊØîËæÉÈ°∫Êâã„ÄÇÂÖ≥‰∫éÂæÆÊúçÂä°ÔºåÂ∞§ÂÖ∂ÊòØÁîµÂïÜ‰∏≠ÁöÑ‰∏Ä‰∫õÂ§ÑÁêÜÊâãÊÆµÔºåÂæàÂ§öÊÄùË∑ØÈÉΩÊòØÂ≠¶‰π†‰∫éÁ†ÅÂêóÂú®Á∫ø‰∏≠ÂàÜÂ∏ÉÂºèÁîµÂïÜÈ°πÁõÆ„ÄÇÂÜçÂä†‰∏äÊÖïËØæÁΩëÂªñÂ∏àÂÖÑÁöÑspring cloudÂæÆÊúçÂä°ÂÆûË∑µ„ÄÇ ÂâçÂè∞È°πÁõÆ Âè™Ë¶ÅÈòÖËØªreadmeÊñáÊ°£Âç≥ÂèØ„ÄÇ‰ª£Á†Å‰ªìÂ∫ì‰∏∫Ôºöhttps://github.com/sunweiguo/snailmall-front Â≠¶‰π†‰∏ç‰ªÖË¶ÅÊúâËæìÂÖ•ÔºåÊõ¥Ë¶ÅÊúâËá™Â∑±ÁöÑËæìÂá∫ÔºåÂÆûË∑µÊòØÊèêÂçáÁöÑÊç∑ÂæÑÔºÅ]]></content>
      <tags>
        <tag>ÂÆûÊàò</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Èù¢ËØï-ËøõÁ®ã‰∏éÁ∫øÁ®ã]]></title>
    <url>%2F2019%2F01%2F19%2F%E9%9D%A2%E8%AF%95-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ÈÉΩÊòØÊìç‰ΩúÁ≥ªÁªüÁÆ°ÁêÜÁöÑÂØπË±°ÔºåÊØîËæÉÂÆπÊòìÊ∑∑Ê∑ÜÔºå‰ΩÜÊòØÂèàÊòØ‰∏§Ê†∑ÂÆåÂÖ®‰∏çÂêåÁöÑ‰∏úË•øÔºåÂõ†Ê≠§Âå∫Âà´ÂæàÂ§ö„ÄÇ‰ªé‰ªñ‰ª¨Âå∫Âà´‰πüÂèØ‰ª•ÂèëÊï£Âá∫ÂæàÂ§öÂÖ≥‰∫éÊìç‰ΩúÁ≥ªÁªüÊØîËæÉÈáçË¶ÅÁöÑÁü•ËØÜ„ÄÇÊâÄ‰ª•Èù¢ËØïÊØîËæÉÂ∏∏ÈóÆ„ÄÇ 1. ËøõÁ®ãÂà∞Â∫ïÊòØ‰ªÄ‰πàÔºü Áøª‰∫Ü‰∏Ä‰∏ã‰π¶Ôºö„ÄäÊìç‰ΩúÁ≥ªÁªüÊ¶ÇÂøµ„ÄãÁ¨¨‰∏âÁ´†‰∏≠ÊèêÂèä‰∫ÜËøõÁ®ãÁöÑÊ¶ÇÂøµ„ÄÇ‰ªñÊòØËøôÊ†∑ËØ¥ÁöÑÔºö ËøõÁ®ãÊòØÊâßË°å‰∏≠ÁöÑÁ®ãÂ∫èÔºåËøôÊòØ‰∏ÄÁßçÈùûÊ≠£ÂºèËØ¥Ê≥ï„ÄÇËøõÁ®ã‰∏çÂè™ÊòØÁ®ãÂ∫è‰ª£Á†ÅÔºà‰ª£Á†ÅÂùóÔºâÔºåËøõÁ®ãËøòÂåÖÂê´‰∫ÜÂΩìÂâçÊ¥ªÂä®ÔºåÈÄöËøáÁ®ãÂ∫èËÆ°Êï∞Âô®ÁöÑÂÄºÂíåÂ§ÑÁêÜÂô®ÂØÑÂ≠òÂô®ÁöÑÂÜÖÂÆπÊù•Ë°®Á§∫„ÄÇÊ≠§Â§ñÔºåËøõÁ®ãËøòÂåÖÂê´ËøõÁ®ãÂ†ÜÊ†àÊÆµÔºàÂåÖÊã¨‰∏¥Êó∂Êï∞ÊçÆÔºåÂ¶ÇÂáΩÊï∞ÂèÇÊï∞„ÄÅËøîÂõûÂú∞ÂùÄÂíåÂ±ÄÈÉ®ÂèòÈáèÔºâÂíåÊï∞ÊçÆÊÆµÔºàÂåÖÊã¨ÂÖ®Â±ÄÂèòÈáèÔºâ„ÄÇËøõÁ®ãËøòÂèØËÉΩÂåÖÂê´Â†ÜÔºåÊòØÂú®ËøõÁ®ãËøêË°åÊúüÈó¥Âä®ÊÄÅÂàÜÈÖçÁöÑÂÜÖÂ≠ò„ÄÇ Á®ãÂ∫èÊú¨Ë∫´‰∏çÊòØËøõÁ®ã„ÄÇÁ®ãÂ∫èÂè™ÊòØË¢´Âä®ÂÆû‰ΩìÔºåÂ¶ÇÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏äÂåÖÂê´‰∏ÄÁ≥ªÂàóÊåá‰ª§ÁöÑÊñá‰ª∂ÂÜÖÂÆπ„ÄÇËÄåËøõÁ®ãÊòØÊ¥ªÂä®ÂÆû‰ΩìÔºåÂÆÉÊúâ‰∏Ä‰∏™Á®ãÂ∫èËÆ°Êï∞Âô®Êù•Ë°®Á§∫‰∏ã‰∏Ä‰∏™Ë¶ÅÊâßË°åÁöÑÂëΩ‰ª§ÂíåÁõ∏ÂÖ≥ËµÑÊ∫êÈõÜÂêà„ÄÇÂΩì‰∏Ä‰∏™ÂèØÊâßË°åÊñá‰ª∂Ë¢´Ë£ÖÂÖ•ÂÜÖÂ≠òÊó∂Ôºå‰∏Ä‰∏™Á®ãÂ∫èÊâçËÉΩÊàê‰∏∫ËøõÁ®ã„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãËøõÁ®ãÊòØ‰ªÄ‰πàÔºåÊòØÊàë‰∏™‰∫∫ÁêÜËß£ÔºöÂÆÉÊòØ‰∏Ä‰∏™Ê¥ªÂä®ÂÆû‰ΩìÔºåËøêË°åÂú®ÂÜÖÂ≠ò‰∏ä„ÄÇÁÑ∂ÂêéÂÆÉÂç†Áî®ÂæàÂ§öÁã¨Á´ãÁöÑËµÑÊ∫êÔºåÊØîÂ¶ÇÔºöÂÜÖÂ≠òËµÑÊ∫ê„ÄÅÁ®ãÂ∫èËøêË°åËÇØÂÆöÊ∂âÂèäCPUËÆ°ÁÆó„ÄÅÂç†Áî®ÁöÑÁ´ØÂè£ËµÑÊ∫êÔºàÂÖ¨ÂÖ±ÁöÑÔºâ„ÄÅÊñá‰ª∂ËµÑÊ∫êÔºàÂÖ¨ÂÖ±ÁöÑÔºâ„ÄÅÁΩëÁªúËµÑÊ∫êÔºàÂÖ¨ÂÖ±ÁöÑÔºâÁ≠âÁ≠âÁ≠â„ÄÇË¶ÅÊÉ≥ÊâßË°åËøô‰∏™ËøõÁ®ãÔºåÈ¶ñÂÖàË¶ÅÊúâ‰∏Ä‰∏™ÂèØÊâßË°åÊñá‰ª∂ÔºåÊúâ‰∫ÜËøô‰∏™ÂèØÊâßË°åÊñá‰ª∂ÔºåËøòË¶ÅÊúâÁõ∏Â∫îÁöÑÊâßË°åÈúÄË¶ÅÁöÑËµÑÊ∫ê„ÄÇÊâÄ‰ª•Â∞ÜÂèØÊâßË°åÊñá‰ª∂„ÄÅÂΩìÂâçËøõÁ®ãÁöÑ‰∏ä‰∏ãÊñá„ÄÅÂÜÖÂ≠òÁ≠âËµÑÊ∫êÁªìÂêàËµ∑Êù•ÔºåÊâçÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑËøõÁ®ã„ÄÇ ÈÇ£‰πàÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÁêÜËß£‰∏ÄÂè•ËØùÔºöËøõÁ®ãÊòØËµÑÊ∫êÂàÜÈÖçÁöÑÂü∫Êú¨Âçï‰Ωç„ÄÇ ËøõÁ®ã‰∏≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºàËôΩÁÑ∂Á©∫Èó¥Â§ßÂ∞èÈÉΩ‰∏ÄÊ†∑Ôºå‰∏ãÊñá‰ºöËØ¥ÊòéÔºâÊòØÁã¨Á´ãÁöÑÔºåÂê¶ÂàôÂ∞±‰ºöÂá∫Áé∞‰∏ÄÁßçÊÉÖÂÜµÔºö‰øÆÊîπËá™Â∑±Á®ãÂ∫è‰∏≠ÁöÑÊüê‰∏™ÊåáÈíàÂ∞±ÂèØ‰ª•ÊåáÂêëÂÖ∂‰ªñÁ®ãÂ∫è‰∏≠ÁöÑÂú∞ÂùÄÔºåÁÑ∂ÂêéÊãøÂà∞ÈáåÈù¢ÁöÑÊï∞ÊçÆÔºåÂ≤Ç‰∏çÊòØÂæàÊÅêÊÄñÁöÑÂú∫ÊôØÔºü Â¶Ç‰∏äÂõæÔºåËøõÁ®ã‰∏≠ÂåÖÂê´‰∫ÜÁ∫øÁ®ã„ÄÇÊìç‰ΩúÁ≥ªÁªüÂèØËÉΩ‰ºöËøêË°åÂá†Áôæ‰∏™ËøõÁ®ãÔºåËøõÁ®ã‰∏≠‰πüÂèØËÉΩÊúâÂá†‰∏™Âà∞Âá†Áôæ‰∏™Á∫øÁ®ãÂú®ËøêË°å„ÄÇ Êñá‰ª∂ÂíåÁΩëÁªúÂè•ÊüÑÊòØÊâÄÊúâËøõÁ®ãÂÖ±‰∫´ÁöÑÔºåÂ§ö‰∏™ËøõÁ®ãÂèØ‰ª•ÂéªÊâìÂºÄÂêå‰∏Ä‰∏™Êñá‰ª∂ÔºåÂéªÊä¢Âç†Âêå‰∏Ä‰∏™ÁΩëÁªúÁ´ØÂè£„ÄÇ Âõæ‰∏≠ËøòÊúâ‰∏™ÂÜÖÂ≠ò„ÄÇËøô‰∏™ÂÜÖÂ≠ò‰∏çÊòØÊàë‰ª¨ÁªèÂ∏∏ËØ¥ÁöÑÂÜÖÂ≠òÊù°ÔºåÂç≥Áâ©ÁêÜÂÜÖÂ≠òÔºåËÄåÊòØËôöÊãüÂÜÖÂ≠òÔºåÊòØËøõÁ®ãÁã¨Á´ãÁöÑÔºåÂ§ßÂ∞è‰∏éÂÆûÈôÖÁâ©ÁêÜÂÜÖÂ≠òÊó†ÂÖ≥„ÄÇ 2. ÂØªÂùÄÁ©∫Èó¥ ÊØîÂ¶Ç8086Âè™Êúâ20Ê†πÂú∞ÂùÄÁ∫øÔºåÈÇ£‰πàÂÆÉÁöÑÂØªÂùÄÁ©∫Èó¥Â∞±ÊòØ1MBÔºåÊàë‰ª¨Â∞±ËØ¥8086ËÉΩÊîØÊåÅ1MBÁöÑÁâ©ÁêÜÂÜÖÂ≠òÔºåÂèäÊó∂Êàë‰ª¨ÂÆâË£Ö‰∫Ü128MÁöÑÂÜÖÂ≠òÊù°Âú®ÊùøÂ≠ê‰∏äÔºåÊàë‰ª¨‰πüÂè™ËÉΩËØ¥8086Êã•Êúâ1MBÁöÑÁâ©ÁêÜÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ ‰ª•ÂâçÂè´ÂçñÁöÑ32‰ΩçÁöÑÊú∫Â≠êÔºå32‰ΩçÊòØÊåáÂØªÂùÄÁ©∫Èó¥‰∏∫2ÁöÑ32Ê¨°Êñπ„ÄÇ32‰ΩçÁöÑ386‰ª•‰∏äCPUÂ∞±ÂèØ‰ª•ÊîØÊåÅÊúÄÂ§ß4GBÁöÑÁâ©ÁêÜÂÜÖÂ≠òÁ©∫Èó¥‰∫Ü„ÄÇ 3. ‰∏∫‰ªÄ‰πà‰ºöÊúâËôöÊãüÂÜÖÂ≠òÂíåÁâ©ÁêÜÂÜÖÂ≠òÁöÑÂå∫Âà´ Ê≠£Âú®ËøêË°åÁöÑ‰∏Ä‰∏™ËøõÁ®ãÔºå‰ªñÊâÄÈúÄÁöÑÂÜÖÂ≠òÊòØÊúâÂèØËÉΩÂ§ß‰∫éÂÜÖÂ≠òÊù°ÂÆπÈáè‰πãÂíåÁöÑÔºåÊØîÂ¶Ç‰Ω†ÁöÑÂÜÖÂ≠òÊù°ÊòØ256MÔºå‰Ω†ÁöÑÁ®ãÂ∫èÂç¥Ë¶ÅÂàõÂª∫‰∏Ä‰∏™2GÁöÑÊï∞ÊçÆÂå∫ÔºåÈÇ£‰πà‰∏çÊòØÊâÄÊúâÊï∞ÊçÆÈÉΩËÉΩ‰∏ÄËµ∑Âä†ËΩΩÂà∞ÂÜÖÂ≠òÔºàÁâ©ÁêÜÂÜÖÂ≠òÔºâ‰∏≠ÔºåÂäøÂøÖÊúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆË¶ÅÊîæÂà∞ÂÖ∂‰ªñ‰ªãË¥®‰∏≠ÔºàÊØîÂ¶ÇÁ°¨ÁõòÔºâÔºåÂæÖËøõÁ®ãÈúÄË¶ÅËÆøÈóÆÈÇ£ÈÉ®ÂàÜÊï∞ÊçÆÊó∂ÔºåÂú®ÈÄöËøáË∞ÉÂ∫¶ËøõÂÖ•Áâ©ÁêÜÂÜÖÂ≠ò„ÄÇ ÊâÄ‰ª•ÔºåËôöÊãüÂÜÖÂ≠òÊòØËøõÁ®ãËøêË°åÊó∂ÊâÄÊúâÂÜÖÂ≠òÁ©∫Èó¥ÁöÑÊÄªÂíåÔºåÂπ∂‰∏îÂèØËÉΩÊúâ‰∏ÄÈÉ®ÂàÜ‰∏çÂú®Áâ©ÁêÜÂÜÖÂ≠ò‰∏≠ÔºåËÄåÁâ©ÁêÜÂÜÖÂ≠òÂ∞±ÊòØÊàë‰ª¨Âπ≥Êó∂ÊâÄ‰∫ÜËß£ÁöÑÂÜÖÂ≠òÊù°„ÄÇ ÂÖ≥ÈîÆÁöÑÊòØ‰∏çË¶ÅÊääËôöÊãüÂÜÖÂ≠òË∑üÁúüÂÆûÁöÑÊèíÂú®‰∏ªÊùø‰∏äÁöÑÂÜÖÂ≠òÊù°Áõ∏ÊåÇÈí©ÔºåËôöÊãüÂÜÖÂ≠òÂÆÉÊòØ‚ÄúËôöÊãüÁöÑ‚Äù‰∏çÂ≠òÂú®ÔºåÂÅáÁöÑÂï¶ÔºåÂÆÉÂè™ÊòØÂÜÖÂ≠òÁÆ°ÁêÜÁöÑ‰∏ÄÁßçÊäΩË±°ÔºÅ 4. ËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÂíåÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄÊòØÂ¶Ç‰ΩïÊò†Â∞ÑÂë¢ ÂÅáËÆæ‰Ω†ÁöÑËÆ°ÁÆóÊú∫ÊòØ32‰ΩçÔºåÈÇ£‰πàÂÆÉÁöÑÂú∞ÂùÄÊÄªÁ∫øÊòØ32‰ΩçÁöÑÔºå‰πüÂ∞±ÊòØÂÆÉÂèØ‰ª•ÂØªÂùÄ0 ~ 0xFFFFFFFFÔºà4GÔºâÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºå‰ΩÜÂ¶ÇÊûú‰Ω†ÁöÑËÆ°ÁÆóÊú∫Âè™Êúâ256MÁöÑÁâ©ÁêÜÂÜÖÂ≠ò0x~0x0FFFFFFFÔºà256MÔºâÔºåÂêåÊó∂‰Ω†ÁöÑËøõÁ®ã‰∫ßÁîü‰∫Ü‰∏Ä‰∏™‰∏çÂú®Ëøô256MÂú∞ÂùÄÁ©∫Èó¥‰∏≠ÁöÑÂú∞ÂùÄÔºåÈÇ£‰πàËÆ°ÁÆóÊú∫ËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÂë¢ÔºüÂõûÁ≠îËøô‰∏™ÈóÆÈ¢òÂâçÔºåÂÖàËØ¥ÊòéËÆ°ÁÆóÊú∫ÁöÑÂÜÖÂ≠òÂàÜÈ°µÊú∫Âà∂„ÄÇ ËÆ°ÁÆóÊú∫‰ºöÂØπËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÁ©∫Èó¥Ôºà32‰Ωç‰∏∫4GÔºâÂàÜÈ°µ‰∫ßÁîüÈ°µÔºàpageÔºâÔºåÂØπÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄÁ©∫Èó¥ÔºàÂÅáËÆæ256MÔºâÂàÜÈ°µ‰∫ßÁîüÈ°µÂ∏ßÔºàpage frameÔºâÔºåËøô‰∏™È°µÂíåÈ°µÂ∏ßÁöÑÂ§ßÂ∞èÊòØ‰∏ÄÊ†∑Â§ßÁöÑÔºåÊâÄ‰ª•Âë¢ÔºåÂú®ËøôÈáåÔºåËôöÊãüÂÜÖÂ≠òÈ°µÁöÑ‰∏™Êï∞ÂäøÂøÖË¶ÅÂ§ß‰∫éÁâ©ÁêÜÂÜÖÂ≠òÈ°µÂ∏ßÁöÑ‰∏™Êï∞„ÄÇ Âú®ËÆ°ÁÆóÊú∫‰∏äÊúâ‰∏Ä‰∏™È°µË°®Ôºàpage tableÔºâÔºåÂ∞±ÊòØÊò†Â∞ÑËôöÊãüÂÜÖÂ≠òÈ°µÂà∞Áâ©ÁêÜÂÜÖÂ≠òÈ°µÁöÑÔºåÊõ¥Á°ÆÂàáÁöÑËØ¥ÊòØÈ°µÂè∑Âà∞È°µÂ∏ßÂè∑ÁöÑÊò†Â∞ÑÔºåËÄå‰∏îÊòØ‰∏ÄÂØπ‰∏ÄÁöÑÊò†Â∞Ñ„ÄÇ‰ΩÜÊòØÈóÆÈ¢òÊù•‰∫ÜÔºåËôöÊãüÂÜÖÂ≠òÈ°µÁöÑ‰∏™Êï∞ &gt; Áâ©ÁêÜÂÜÖÂ≠òÈ°µÂ∏ßÁöÑ‰∏™Êï∞ÔºåÂ≤Ç‰∏çÊòØÊúâ‰∫õËôöÊãüÂÜÖÂ≠òÈ°µÁöÑÂú∞ÂùÄÊ∞∏ËøúÊ≤°ÊúâÂØπÂ∫îÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄÁ©∫Èó¥Ôºü ‰∏çÊòØÁöÑÔºåÊìç‰ΩúÁ≥ªÁªüÊòØËøôÊ†∑Â§ÑÁêÜÁöÑ„ÄÇÊìç‰ΩúÁ≥ªÁªüÊúâ‰∏™È°µÈù¢Â§±ÊïàÔºàpage faultÔºâÂäüËÉΩ„ÄÇÊìç‰ΩúÁ≥ªÁªüÊâæÂà∞‰∏Ä‰∏™ÊúÄÂ∞ë‰ΩøÁî®ÁöÑÈ°µÂ∏ßÔºåËÆ©‰ªñÂ§±ÊïàÔºåÂπ∂ÊääÂÆÉÂÜôÂÖ•Á£ÅÁõòÔºåÈöèÂêé‰ªéÁ£ÅÁõò‰∏≠ÊääÊääÈúÄË¶ÅËÆøÈóÆÁöÑÊï∞ÊçÆÊâÄÂú®ÁöÑÈ°µÊîæÂà∞ÊúÄÂ∞ë‰ΩøÁî®ÁöÑÈ°µÂ∏ß‰∏≠ÔºåÂπ∂‰øÆÊîπÈ°µË°®‰∏≠ÁöÑÊò†Â∞ÑÔºàÂç≥‰øÆÊîπÈ°µÂè∑ÊåáÂêëÂΩìÂâçÈ°µÂ∏ßÔºâÔºåËøôÊ†∑Â∞±‰øùËØÅÊâÄÊúâÁöÑÈ°µÈÉΩÊúâË¢´Ë∞ÉÂ∫¶ÁöÑÂèØËÉΩ‰∫Ü„ÄÇËøôÂ∞±ÊòØÂ§ÑÁêÜËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÂà∞Áâ©ÁêÜÂÜÖÂ≠òÁöÑÊ≠•È™§„ÄÇ Ëá≥‰∫éÈáåÈù¢Â¶Ç‰ΩïÂÆûÁé∞ÁöÑÁªÜËäÇÔºåÊàëÊ≤°ÊúâËøáÂ§öÂéªÊé¢Á©∂„ÄÇ 5. ‰ªÄ‰πàÊòØËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÂíåÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄ ËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÁî±È°µÂè∑ÂíåÂÅèÁßªÈáèÁªÑÊàê„ÄÇÈ°µÂè∑Â∞±ÊòØ‰∏äÈù¢ÊâÄËØ¥ÁöÑ„ÄÇÂÅèÁßªÈáèÂ∞±ÊòØÊàë‰∏äÈù¢ËØ¥ÁöÑÈ°µÔºàÊàñËÄÖÈ°µÂ∏ßÔºâÁöÑÂ§ßÂ∞èÔºåÂç≥Ëøô‰∏™È°µÔºàÊàñËÄÖÈ°µÂ∏ßÔºâÂà∞Â∫ïËÉΩÂ≠òÂ§öÂ∞ëÊï∞ÊçÆ„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºåÊúâ‰∏Ä‰∏™ËôöÊãüÂú∞ÂùÄÂÆÉÁöÑÈ°µÂè∑ÊòØ4ÔºåÂÅèÁßªÈáèÊòØ20ÔºåÈÇ£‰πà‰ªñÁöÑÂØªÂùÄËøáÁ®ãÊòØËøôÊ†∑ÁöÑÔºöÈ¶ñÂÖàÂà∞È°µË°®‰∏≠ÊâæÂà∞È°µÂè∑4ÂØπÂ∫îÁöÑÈ°µÂ∏ßÂè∑ÔºàÊØîÂ¶Ç‰∏∫8ÔºâÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞ÂØπÂ∫îÁöÑÈ°µÊ°¢ÔºåÂàôÁî®Â§±ÊïàÊú∫Âà∂Ë∞ÉÂÖ•È°µ„ÄÇÂ¶ÇÊûúÂ≠òÂú®ÔºåÊääÈ°µÂ∏ßÂè∑ÂíåÂÅèÁßªÈáè‰º†ÁªôMMUÔºàCPUÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÂçïÂÖÉÔºâÁªÑÊàê‰∏Ä‰∏™Áâ©ÁêÜ‰∏äÁúüÊ≠£Â≠òÂú®ÁöÑÂú∞ÂùÄÔºåÊé•ÁùÄÂ∞±ÊòØËÆøÈóÆÁâ©ÁêÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∫Ü„ÄÇ 6. Á∫øÁ®ãÈáåÈù¢Êúâ‰ªÄ‰πà ÂÜôÂà∞ËøôÈáåÔºåÂ•ΩÂÉèËøò‰∏éÊú¨Ê†áÈ¢òÊó†ÂÖ≥ÔºåÂç≥ËøõÁ®ãÂíåÁ∫øÁ®ãÂà∞Â∫ïÊòØ‰ªÄ‰πàÂÖ≥Á≥ªÂíåÂå∫Âà´Á≠â„ÄÇ‰ΩÜÊòØÊàë‰ª¨Ë¶ÅÁü•ÈÅìÔºåÈù¢ËØïÊàñËÄÖÂ≠¶‰π†‰∏Ä‰∏™Áü•ËØÜÁÇπÔºå‰∏çÊòØ‰∏∫‰∫ÜÂ≠¶‰π†Ëøô‰∏™Âå∫Âà´ËÄåÂ≠¶‰π†Ôºå Êàë‰ª¨Â∫îËØ•Â≠¶‰π†‰∏∫‰ªÄ‰πàÊúâËøõÁ®ãÂíåÁ∫øÁ®ãÔºåÊúâ‰∫ÜËøõÁ®ãËøòÈúÄË¶ÅÁ∫øÁ®ãÂêóÔºüÊúâ‰∫ÜÁ∫øÁ®ãËøòË¶ÅËøõÁ®ãÂêóÔºü‰Ω†ËØ¥ËøõÁ®ãÊòØËµÑÊ∫êÂàÜÈÖçÁöÑÂçï‰ΩçÔºåÂàÜÈÖçÁöÑÊòØ‰ªÄ‰πàËµÑÊ∫êÂë¢ÔºüËøõÁ®ã‰∏≠ÁöÑÂÜÖÂ≠òÊòØÂíãÁÆ°ÁêÜÁöÑÂë¢ÔºüËôöÊãüÂÜÖÂ≠òÂíåÁâ©ÁêÜÂÜÖÂ≠òÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πàÊòØËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÂíåÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄÔºüÁ≠âÁ≠âÁ≠âÔºåÊâÄ‰ª•Èù¢ËØïÊòØÂçÉÂèò‰∏áÂåñÁöÑÔºåÈáçË¶ÅÁöÑÊòØÊàë‰ª¨Â∞ΩÂèØËÉΩÂú∞Â§öÈóÆËá™Â∑±Âá†‰∏™‰∏∫‰ªÄ‰πàÔºåÁÑ∂Âêé‰ªé‰∏∫‰ªÄ‰πàÂºÄÂßãÂéªÈÄê‰∏™ÂáªÁ†¥ÔºåÂΩ¢Êàê‰∏Ä‰∏™‰ΩìÁ≥ª„ÄÇ ËØ¥ËØ¥Ëøô‰∏™Ê†àÔºåÊàë‰ª¨Áü•ÈÅìÔºåÊâßË°åÁ®ãÂ∫è‰ªé‰∏ªÁ®ãÂ∫èÂÖ•Âè£ËøõÂÖ•ÂºÄÂßãÔºåÂèØËÉΩ‰ºöË∞ÉÁî®ÂæàÂ§öÁöÑÂáΩÊï∞ÔºåÈÇ£‰πàËøô‰∫õÂáΩÊï∞ÁöÑÂèÇÊï∞ÂíåËøîÂõûÂú∞ÂùÄÈÉΩ‰ºöË¢´ÂéãÂÖ•Ê†à‰∏≠ÔºåÂåÖÊã¨Ëøô‰∫õÂáΩÊï∞‰∏≠ÂÆö‰πâÁöÑ‰∏¥Êó∂Â±ÄÈÉ®ÂèòÈáèÈÉΩ‰ºöÂéãÂÖ•Ê†à‰∏≠ÔºåÈöèÁùÄÂáΩÊï∞ÁöÑÊâßË°åÂÆåÊØïÔºåÂÜçÈÄêÂ±ÇÂú∞ÂºπÂá∫Ê†àÔºåÂõûÂà∞‰∏ªÂáΩÊï∞ËøêË°åÁöÑÂú∞ÊñπÔºåÂÜçÁªßÁª≠ÊâßË°å„ÄÇ PC(program counter)ÔºåÂ∞±ÊòØÁ®ãÂ∫èËÆ°Êï∞Âô®ÔºåÊåáÂêëÁöÑ‰∏ã‰∏ÄÊù°Êåá‰ª§ÊâßË°åÁöÑÂú∞ÂùÄ„ÄÇ Áî±Ê≠§ÂèØËßÅÔºåÊìç‰ΩúÁ≥ªÁªüËøêË°åÁöÑÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™‰∏Ä‰∏™ÁöÑÁ∫øÁ®ãÔºåËÄåËøõÁ®ãÂè™ÊòØ‰∏Ä‰∏™ÈöîÁ¶ªËµÑÊ∫êÁöÑÂÆπÂô®„ÄÇ ‰∏äÈù¢ËØ¥Âà∞ÔºåPCÊòØÊåáÂêë‰∏ã‰∏ÄÊù°Êåá‰ª§ÊâßË°åÁöÑÂú∞ÂùÄ„ÄÇËÄåËøô‰∫õÊåá‰ª§ÊòØÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑ„ÄÇ Êàë‰ª¨ÁöÑËÆ°ÁÆóÊú∫Â§ßÂ§öÊï∞ÊòØÂ≠òÂÇ®Á®ãÂ∫èÂûãÁöÑ„ÄÇÂ∞±ÊòØËØ¥Êï∞ÊçÆÂíåÁ®ãÂ∫èÊòØÂêåÊó∂Â≠òÂÇ®Âú®Âêå‰∏ÄÁâáÂÜÖÂ≠òÈáåÁöÑ„ÄÇ ÊâÄ‰ª•Êàë‰ª¨ÁªèÂ∏∏‰ºöÂê¨Âà∞‰∏Ä‰∏™ÊºèÊ¥ûÂè´ÂÅö‚ÄúÁºìÂÜ≤Âå∫Ê∫¢Âá∫‚ÄùÔºöÊØîÂ¶ÇÊúâ‰∏Ä‰∏™Âú∞ÊñπËÆ©Áî®Êà∑ËæìÂÖ•Áî®Êà∑ÂêçÔºå‰ΩÜÊòØÈªëÂÆ¢ËæìÂÖ•ÂæàÈïøÂæàÈïøÁöÑÂ≠óÁ¨¶‰∏≤ËøõÂéªÔºåÈÇ£‰πàÂæàÊúâÂèØËÉΩÂ∞±‰ºöË∂ÖÂá∫Â≠òÊîæËøô‰∏™Áî®Êà∑ÂêçÁöÑ‰∏ÄÁâáÁºìÂÜ≤Âå∫ÔºåËÄåÁõ¥Êé•‰æµÂÖ•Âà∞Â≠òÊîæÁ®ãÂ∫èÁöÑÂú∞ÊñπÔºåÈÇ£‰πàÈªëÂÆ¢Â∞±ÂèØ‰ª•Ê§çÂÖ•Á®ãÂ∫èÂéªÊâßË°å„ÄÇËß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÈôêÂà∂ËæìÂÖ•ÁöÑÁî®Êà∑ÂêçÈïøÂ∫¶Ôºå‰∏çË¶ÅË∂ÖËøáÁºìÂÜ≤Âå∫Â§ßÂ∞è„ÄÇ ËøòÊúâ‰∏ÄÂùóÊòØTLS(thread local storage)ÔºåÊàë‰ª¨Áü•ÈÅìËøõÁ®ãÊúâËá™Â∑±Áã¨Á´ãÁöÑÂÜÖÂ≠òÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑÁ∫øÁ®ãËÉΩ‰∏çËÉΩ‰πüÊúâ‰∏ÄÂ∞èÂùóÂ±û‰∫éËá™Â∑±ÁöÑÂÜÖÂ≠òÂå∫ÂüüÂë¢Ôºü Ëøô‰∏™‰∏úË•øÔºåÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂ∞±ÊòØËØ¥ÔºåÊØîÂ¶Çnew‰∏Ä‰∏™ÂØπË±°ÔºåÂæÄÂæÄÊòØÂú®Â†Ü‰∏≠ÂºÄËæüÁ©∫Èó¥ÁöÑÔºå‰ΩÜÊòØÁé∞Âú®ÁöÑÊÉÖÂÜµÊòØÔºöÂú®‰∏Ä‰∏™ÂáΩÊï∞ÂÜÖÔºånewÂá∫Êù•‰∏Ä‰∏™ÂØπË±°ÔºåËøô‰∏™ÂØπË±°‰∏çÂºïÁî®Â§ñÈÉ®ÂØπË±°Ôºå‰πü‰∏ç‰ºöË¢´Â§ñÈÉ®ÂºïÁî®ÔºåÊòØÁ∫ØÁ≤πÂ±û‰∫éËøô‰∏™ÂáΩÊï∞ÊÆµÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Ëøô‰∏™ÂØπË±°ÊòØÂ±û‰∫éËøô‰∏™ÂáΩÊï∞ÁöÑÂ±ÄÈÉ®‰∏¥Êó∂ÂèòÈáè„ÄÇ Ê≠§Êó∂ÔºånewËøô‰∏™ÂØπË±°Â∞±‰∏çÈúÄË¶ÅÂÜçÂéªÂ†Ü‰∏≠ÂºÄËæüÁ©∫Èó¥‰∫ÜÔºåÂõ†‰∏∫‰∏ÄÊñπÈù¢‰∏çÈúÄË¶ÅÂÖ±‰∫´ÔºåÂè¶‰∏ÄÊñπÈù¢ÊòØÂú®Â†Ü‰∏≠ÂºÄËæüÊòØÊØîËæÉÊÖ¢ÁöÑÔºåÂπ∂‰∏îÂèØËÉΩÊúâÂæàÂ§öÂáΩÊï∞ÔºåËøôÁßçÂ±ÄÈÉ®ÂØπË±°Èõ∂Èõ∂ÊÄªÊÄªÂä†Ëµ∑Êù•ËøòÊòØÂæàÂ§öÁöÑÔºåÂú®Â†Ü‰∏≠ÂºÄËæü‰ºöÊµ™Ë¥πÁ©∫Èó¥„ÄÇ ÊâÄ‰ª•ÔºåËÉΩ‰∏çËÉΩÂú®Ê†à‰∏≠Â∞±ÂèØ‰ª•newÂá∫Ëøô‰∏™ÂØπË±°ÔºåÂèçÊ≠£Áî®ÂÆåÂ∞±Êâî„ÄÇTLSÂèØ‰ª•ÊòØÁé∞Âú®Ëøô‰∏™„ÄÇÊ†à‰∏≠Áõ¥Êé•newÂ§öÊñπ‰æøÂ§öÂø´ÔºåÂõ†‰∏∫‰∏çÈúÄË¶ÅËµ∞ÂûÉÂúæÂõûÊî∂Êú∫Âà∂ÔºåËøòÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇÂèØ‰ª•ÂéªÊêúÁ¥¢ÔºöÊ†à‰∏äÂàÜÈÖçÂíåÈÄÉÈÄ∏ÂàÜÊûê 7. Á∫øÁ®ãVSËøõÁ®ã Âà∞ËøôÈáåÔºåÂ∞±Ê∏ÖÊô∞‰∫ÜÂæàÂ§ö„ÄÇÊàë‰ª¨‰πüÂèØ‰ª•Â§öÂ§öÂ∞ëÂ∞ëÁêÜËß£‰ªñ‰ª¨ÁöÑÂå∫Âà´„ÄÇ ÂèØ‰ª•ÂÅö‰∏™ÁÆÄÂçïÁöÑÊØîÂñªÔºå‰æø‰∫éËÆ∞ÂøÜÔºöËøõÁ®ã=ÁÅ´ËΩ¶ÔºåÁ∫øÁ®ã=ËΩ¶Âé¢ Á∫øÁ®ãÂú®ËøõÁ®ã‰∏ãË°åËøõÔºàÂçïÁ∫ØÁöÑËΩ¶Âé¢Êó†Ê≥ïËøêË°åÔºâ ‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™Á∫øÁ®ãÔºà‰∏ÄËæÜÁÅ´ËΩ¶ÂèØ‰ª•ÊúâÂ§ö‰∏™ËΩ¶Âé¢Ôºâ ‰∏çÂêåËøõÁ®ãÈó¥Êï∞ÊçÆÂæàÈöæÂÖ±‰∫´Ôºà‰∏ÄËæÜÁÅ´ËΩ¶‰∏äÁöÑ‰πòÂÆ¢ÂæàÈöæÊç¢Âà∞Âè¶Â§ñ‰∏ÄËæÜÁÅ´ËΩ¶ÔºåÊØîÂ¶ÇÁ´ôÁÇπÊç¢‰πòÔºâ Âêå‰∏ÄËøõÁ®ã‰∏ã‰∏çÂêåÁ∫øÁ®ãÈó¥Êï∞ÊçÆÂæàÊòìÂÖ±‰∫´ÔºàAËΩ¶Âé¢Êç¢Âà∞BËΩ¶Âé¢ÂæàÂÆπÊòìÔºâ ËøõÁ®ãË¶ÅÊØîÁ∫øÁ®ãÊ∂àËÄóÊõ¥Â§öÁöÑËÆ°ÁÆóÊú∫ËµÑÊ∫êÔºàÈááÁî®Â§öÂàóÁÅ´ËΩ¶Áõ∏ÊØîÂ§ö‰∏™ËΩ¶Âé¢Êõ¥ËÄóËµÑÊ∫êÔºâ ËøõÁ®ãÈó¥‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºå‰∏Ä‰∏™Á∫øÁ®ãÊåÇÊéâÂ∞ÜÂØºËá¥Êï¥‰∏™ËøõÁ®ãÊåÇÊéâÔºà‰∏ÄÂàóÁÅ´ËΩ¶‰∏ç‰ºöÂΩ±ÂìçÂà∞Âè¶Â§ñ‰∏ÄÂàóÁÅ´ËΩ¶Ôºå‰ΩÜÊòØÂ¶ÇÊûú‰∏ÄÂàóÁÅ´ËΩ¶‰∏ä‰∏≠Èó¥ÁöÑ‰∏ÄËäÇËΩ¶Âé¢ÁùÄÁÅ´‰∫ÜÔºåÂ∞ÜÂΩ±ÂìçÂà∞ÊâÄÊúâËΩ¶Âé¢Ôºâ ËøõÁ®ãÂèØ‰ª•ÊãìÂ±ïÂà∞Â§öÊú∫ÔºåËøõÁ®ãÊúÄÂ§öÈÄÇÂêàÂ§öÊ†∏Ôºà‰∏çÂêåÁÅ´ËΩ¶ÂèØ‰ª•ÂºÄÂú®Â§ö‰∏™ËΩ®ÈÅì‰∏äÔºåÂêå‰∏ÄÁÅ´ËΩ¶ÁöÑËΩ¶Âé¢‰∏çËÉΩÂú®Ë°åËøõÁöÑ‰∏çÂêåÁöÑËΩ®ÈÅì‰∏äÔºâ ËøõÁ®ã‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÂèØ‰ª•‰∏äÈîÅÔºåÂç≥‰∏Ä‰∏™Á∫øÁ®ã‰ΩøÁî®Êüê‰∫õÂÖ±‰∫´ÂÜÖÂ≠òÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂøÖÈ°ªÁ≠âÂÆÉÁªìÊùüÔºåÊâçËÉΩ‰ΩøÁî®Ëøô‰∏ÄÂùóÂÜÖÂ≠ò„ÄÇÔºàÊØîÂ¶ÇÁÅ´ËΩ¶‰∏äÁöÑÊ¥óÊâãÈó¥ÔºâÔºç‚Äú‰∫íÊñ•ÈîÅ‚Äù ËøõÁ®ã‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÂèØ‰ª•ÈôêÂÆö‰ΩøÁî®ÈáèÔºàÊØîÂ¶ÇÁÅ´ËΩ¶‰∏äÁöÑÈ§êÂéÖÔºåÊúÄÂ§öÂè™ÂÖÅËÆ∏Â§öÂ∞ë‰∫∫ËøõÂÖ•ÔºåÂ¶ÇÊûúÊª°‰∫ÜÈúÄË¶ÅÂú®Èó®Âè£Á≠âÔºåÁ≠âÊúâ‰∫∫Âá∫Êù•‰∫ÜÊâçËÉΩËøõÂéªÔºâÔºç‚Äú‰ø°Âè∑Èáè‚Äù ÂÜçË°•ÂÖÖÂá†Âè•„ÄÇ Á∫øÁ®ãÊòØË∞ÉÂ∫¶ÁöÑÂü∫Êú¨Âçï‰ΩçÔºåËøõÁ®ãÊòØËµÑÊ∫êÂàÜÈÖçÁöÑÂü∫Êú¨Âçï‰Ωç ËøõÁ®ãÈó¥Ê≤°ÊúâÂÖ±‰∫´ÂÜÖÂ≠òÔºåÊâÄ‰ª•‰∫§‰∫íË¶ÅÈÄöËøáTCP/IPÁ´ØÂè£ÁöÑÁ≠âÊñπÂºèÊù•ÂÆûÁé∞„ÄÇÁ∫øÁ®ãÈó¥Áî±‰∫éÊúâÂÖ±‰∫´ÂÜÖÂ≠òÔºåÊâÄ‰ª•‰∫§‰∫íÊØîËæÉÊñπ‰æø„ÄÇ Á∫øÁ®ãÂç†Áî®ÂæàÂ§öËµÑÊ∫êÔºåËÄåÁ∫øÁ®ãÂè™ÈúÄË¶ÅÂàÜÈÖçÊ†àÂíåPCÂç≥ÂèØ„ÄÇ 8. ÈíàÂØπËôöÊãüÂÜÖÂ≠òÂíåÁâ©ÁêÜÂÜÖÂ≠òÁöÑÊÄªÁªì ÊØè‰∏™ËøõÁ®ãÈÉΩÊúâËá™Â∑±Áã¨Á´ãÁöÑ4G(32‰ΩçÁ≥ªÁªü‰∏ã)ÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂêÑ‰∏™ËøõÁ®ãÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÂÖ∑ÊúâÁ±ª‰ººÁöÑÁªìÊûÑ ‰∏Ä‰∏™Êñ∞ËøõÁ®ãÂª∫Á´ãÁöÑÊó∂ÂÄôÔºåÂ∞Ü‰ºöÂª∫Á´ãËµ∑Ëá™Â∑±ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÊ≠§ËøõÁ®ãÁöÑÊï∞ÊçÆÔºå‰ª£Á†ÅÁ≠â‰ªéÁ£ÅÁõòÊã∑Ë¥ùÂà∞Ëá™Â∑±ÁöÑËøõÁ®ãÁ©∫Èó¥ÔºàÂª∫Á´ã‰∏Ä‰∏™ËøõÁ®ãÔºåÂ∞±Ë¶ÅÊääÁ£ÅÁõò‰∏äÁöÑÁ®ãÂ∫èÊñá‰ª∂Êã∑Ë¥ùÂà∞ËøõÁ®ãÂØπÂ∫îÁöÑÂÜÖÂ≠ò‰∏≠ÂéªÔºåÂØπ‰∫é‰∏Ä‰∏™Á®ãÂ∫èÂØπÂ∫îÁöÑÂ§ö‰∏™ËøõÁ®ãËøôÁßçÊÉÖÂÜµÔºåÊµ™Ë¥πÂÜÖÂ≠òÔºÅÔºâÔºåÂì™‰∫õÊï∞ÊçÆÂú®Âì™ÈáåÔºåÈÉΩÁî±ËøõÁ®ãÊéßÂà∂Ë°®‰∏≠ÁöÑtask_structËÆ∞ÂΩï ÊØè‰∏™ËøõÁ®ãÁöÑ4GÂÜÖÂ≠òÁ©∫Èó¥Âè™ÊòØËôöÊãüÂÜÖÂ≠òÁ©∫Èó¥ÔºåÊØèÊ¨°ËÆøÈóÆÂÜÖÂ≠òÁ©∫Èó¥ÁöÑÊüê‰∏™Âú∞ÂùÄÔºåÈÉΩÈúÄË¶ÅÊääÂú∞ÂùÄÁøªËØë‰∏∫ÂÆûÈôÖÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄ ÊâÄÊúâËøõÁ®ãÂÖ±‰∫´Âêå‰∏ÄÁâ©ÁêÜÂÜÖÂ≠òÔºåÊØè‰∏™ËøõÁ®ãÂè™ÊääËá™Â∑±ÁõÆÂâçÈúÄË¶ÅÁöÑËôöÊãüÂÜÖÂ≠òÁ©∫Èó¥Êò†Â∞ÑÂπ∂Â≠òÂÇ®Âà∞Áâ©ÁêÜÂÜÖÂ≠ò‰∏ä„ÄÇ ËøõÁ®ãË¶ÅÁü•ÈÅìÂì™‰∫õÂÜÖÂ≠òÂú∞ÂùÄ‰∏äÁöÑÊï∞ÊçÆÂú®Áâ©ÁêÜÂÜÖÂ≠ò‰∏äÔºåÂì™‰∫õ‰∏çÂú®ÔºåËøòÊúâÂú®Áâ©ÁêÜÂÜÖÂ≠ò‰∏äÁöÑÂì™ÈáåÔºåÈúÄË¶ÅÁî®È°µË°®Êù•ËÆ∞ÂΩï È°µË°®ÁöÑÊØè‰∏Ä‰∏™Ë°®È°πÂàÜ‰∏§ÈÉ®ÂàÜÔºåÁ¨¨‰∏ÄÈÉ®ÂàÜËÆ∞ÂΩïÊ≠§È°µÊòØÂê¶Âú®Áâ©ÁêÜÂÜÖÂ≠ò‰∏äÔºåÁ¨¨‰∫åÈÉ®ÂàÜËÆ∞ÂΩïÁâ©ÁêÜÂÜÖÂ≠òÈ°µÁöÑÂú∞ÂùÄÔºàÂ¶ÇÊûúÂú®ÁöÑËØùÔºâ ÂΩìËøõÁ®ãËÆøÈóÆÊüê‰∏™ËôöÊãüÂú∞ÂùÄÔºåÂéªÁúãÈ°µË°®ÔºåÂ¶ÇÊûúÂèëÁé∞ÂØπÂ∫îÁöÑÊï∞ÊçÆ‰∏çÂú®Áâ©ÁêÜÂÜÖÂ≠ò‰∏≠ÔºåÂàôÁº∫È°µÂºÇÂ∏∏ Áº∫È°µÂºÇÂ∏∏ÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÂ∞±ÊòØÊääËøõÁ®ãÈúÄË¶ÅÁöÑÊï∞ÊçÆ‰ªéÁ£ÅÁõò‰∏äÊã∑Ë¥ùÂà∞Áâ©ÁêÜÂÜÖÂ≠ò‰∏≠ÔºåÂ¶ÇÊûúÂÜÖÂ≠òÂ∑≤ÁªèÊª°‰∫ÜÔºåÊ≤°ÊúâÁ©∫Âú∞Êñπ‰∫ÜÔºåÈÇ£Â∞±Êâæ‰∏Ä‰∏™È°µË¶ÜÁõñÔºåÂΩìÁÑ∂Â¶ÇÊûúË¢´Ë¶ÜÁõñÁöÑÈ°µÊõæÁªèË¢´‰øÆÊîπËøáÔºåÈúÄË¶ÅÂ∞ÜÊ≠§È°µÂÜôÂõûÁ£ÅÁõò 9. ÂÖ≥‰∫éËøõÁ®ãÂíåÁ∫øÁ®ãÊõ¥Ê∑±ÁöÑËÆ§ËØÜ ÂÖ≥‰∫é‰∏∫‰ªÄ‰πàË¶ÅÂàÜËøõÁ®ãÂíåÁ∫øÁ®ãÔºåÂÖàÊäõÂá∫ÁªìËÆ∫Ôºö ËøõÁ®ãprocessÔºöËøõÁ®ãÂ∞±ÊòØÊó∂Èó¥ÊÄªÂíå=ÊâßË°åÁéØÂ¢ÉÂàáÊç¢Êó∂Èó¥+Á®ãÂ∫èÊâßË°åÊó∂Èó¥------&gt;CPUÂä†ËΩΩÊâßË°åÁéØÂ¢É-&gt;CPUÊâßË°åÁ®ãÂ∫è-&gt;CPU‰øùÂ≠òÊâßË°åÁéØÂ¢É Á∫øÁ®ãthreadÔºöÁ∫øÁ®ã‰πüÊòØÊó∂Èó¥ÊÄªÂíå=ÊâßË°åÁéØÂ¢ÉÂàáÊç¢Êó∂Èó¥ÔºàÂÖ±‰∫´ËøõÁ®ãÁöÑÔºâ+Á®ãÂ∫èÊ®°ÂùóÊâßË°åÊó∂Èó¥------&gt;CPUÂä†ËΩΩÊâßË°åÁéØÂ¢ÉÔºàÂÖ±‰∫´ËøõÁ®ãÁöÑÔºâ-&gt;CPUÊâßË°åÁ®ãÂ∫èÊë∏Âùó-&gt;CPU‰øùÂ≠òÊâßË°åÁéØÂ¢ÉÔºàÂÖ±‰∫´ËøõÁ®ãÁöÑÔºâ ËøõÁ®ãÂíåÁ∫øÁ®ãÈÉΩÊòØÊèèËø∞CPUÂ∑•‰ΩúÁöÑÊó∂Èó¥ÊÆµÔºåÁ∫øÁ®ãÊòØÊõ¥ÁªÜÂ∞èÁöÑÊó∂Èó¥ÊÆµ„ÄÇ ÈÇ£‰πàÔºåÂ¶ÇÊûúCPUÊó∂Èó¥Áâá‰∏¥Âπ∏Êú¨ËøõÁ®ãÔºåÈÇ£‰πàËøô‰∏™ËøõÁ®ãÂú®ÊÅ¢Â§çÊâßË°åÁéØÂ¢É‰πãÂêéÔºåÊâßË°åÈáåÈù¢ÁöÑËã•Âπ≤Á∫øÁ®ãÂ∞±‰∏çÈúÄË¶ÅÂÜç‰∏çÂÅúÂú∞ÂàáÊç¢ÊâßË°åÁéØÂ¢É‰∫ÜÔºåÊâÄ‰ª•ËØ¥ÔºåÁ∫øÁ®ãÁõ∏ÊØî‰∫éËøõÁ®ãÊòØÊØîËæÉËΩªÈáèÁöÑ„ÄÇ Âú®CPUÁúãÊù•ÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÊòØ‰∏Ä‰∏™‰∏Ä‰∏™ÁöÑËΩÆÊµÅÊâßË°åÁöÑÔºåÂÖ∑‰ΩìÁöÑËΩÆÊµÅÊñπÊ≥ïÂ∞±ÊòØÔºöÂÖàÂä†ËΩΩÁ®ãÂ∫èAÁöÑ‰∏ä‰∏ãÊñáÔºåÁÑ∂ÂêéÂºÄÂßãÊâßË°åAÔºå‰øùÂ≠òÁ®ãÂ∫èAÁöÑ‰∏ä‰∏ãÊñáÔºåË∞ÉÂÖ•‰∏ã‰∏Ä‰∏™Ë¶ÅÊâßË°åÁöÑÁ®ãÂ∫èBÁöÑÁ®ãÂ∫è‰∏ä‰∏ãÊñáÔºåÁÑ∂ÂêéÂºÄÂßãÊâßË°åB,‰øùÂ≠òÁ®ãÂ∫èBÁöÑ‰∏ä‰∏ãÊñá„ÄÇ„ÄÇ„ÄÇ„ÄÇ ËøõÁ®ãÂ∞±ÊòØÂåÖÊç¢‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÁ®ãÂ∫èÊâßË°åÊó∂Èó¥ÊÄªÂíå = CPUÂä†ËΩΩ‰∏ä‰∏ãÊñá+CPUÊâßË°å+CPU‰øùÂ≠ò‰∏ä‰∏ãÊñá Á∫øÁ®ãÊòØ‰ªÄ‰πàÂë¢ÔºüËøõÁ®ãÁöÑÈ¢óÁ≤íÂ∫¶Â§™Â§ßÔºåÊØèÊ¨°ÈÉΩË¶ÅÊúâ‰∏ä‰∏ãÁöÑË∞ÉÂÖ•Ôºå‰øùÂ≠òÔºåË∞ÉÂá∫„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÊääËøõÁ®ãÊØîÂñª‰∏∫‰∏Ä‰∏™ËøêË°åÂú®ÁîµËÑë‰∏äÁöÑËΩØ‰ª∂ÔºåÈÇ£‰πà‰∏Ä‰∏™ËΩØ‰ª∂ÁöÑÊâßË°å‰∏çÂèØËÉΩÊòØ‰∏ÄÊù°ÈÄªËæëÊâßË°åÁöÑÔºåÂøÖÂÆöÊúâÂ§ö‰∏™ÂàÜÊîØÂíåÂ§ö‰∏™Á®ãÂ∫èÊÆµÔºåÂ∞±Â•ΩÊØîË¶ÅÂÆûÁé∞Á®ãÂ∫èAÔºåÂÆûÈôÖÂàÜÊàê aÔºåbÔºåcÁ≠âÂ§ö‰∏™ÂùóÁªÑÂêàËÄåÊàê„ÄÇÈÇ£‰πàËøôÈáåÂÖ∑‰ΩìÁöÑÊâßË°åÂ∞±ÂèØËÉΩÂèòÊàêÔºöÁ®ãÂ∫èAÂæóÂà∞CPU =„ÄãCPUÂä†ËΩΩ‰∏ä‰∏ãÊñáÔºåÂºÄÂßãÊâßË°åÁ®ãÂ∫èAÁöÑaÂ∞èÊÆµÔºåÁÑ∂ÂêéÊâßË°åAÁöÑbÂ∞èÊÆµÔºåÁÑ∂ÂêéÂÜçÊâßË°åAÁöÑcÂ∞èÊÆµÔºåÊúÄÂêéCPU‰øùÂ≠òAÁöÑ‰∏ä‰∏ãÊñá„ÄÇ ËøôÈáåaÔºåbÔºåcÁöÑÊâßË°åÊòØÂÖ±‰∫´‰∫ÜAÁöÑ‰∏ä‰∏ãÊñáÔºåCPUÂú®ÊâßË°åÁöÑÊó∂ÂÄôÊ≤°ÊúâËøõË°å‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑ„ÄÇËøôÈáåÁöÑaÔºåbÔºåcÂ∞±ÊòØÁ∫øÁ®ãÔºå‰πüÂ∞±ÊòØËØ¥Á∫øÁ®ãÊòØÂÖ±‰∫´‰∫ÜËøõÁ®ãÁöÑ‰∏ä‰∏ãÊñáÁéØÂ¢É„ÄÅÊõ¥‰∏∫ÁªÜÂ∞èÁöÑCPUÊó∂Èó¥ÊÆµ„ÄÇ ËøõÁ®ãÂíåÁ∫øÁ®ãÈÉΩÊòØ‰∏Ä‰∏™Êó∂Èó¥ÊÆµÁöÑÊèèËø∞ÔºåÊòØCPUÂ∑•‰ΩúÊó∂Èó¥ÊÆµÁöÑÊèèËø∞Ôºå‰∏çËøáÊòØÈ¢óÁ≤íÂ§ßÂ∞è‰∏çÂêå„ÄÇ Êï¥ÁêÜËá™Ôºö https://www.zhihu.com/question/25532384 https://blog.csdn.net/moshenglv/article/details/52242153 https://blog.csdn.net/u012861978/article/details/53048077]]></content>
      <tags>
        <tag>Êìç‰ΩúÁ≥ªÁªüÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏ÄÊ≠•‰∏ÄÊ≠•ÁêÜËß£HTTPS]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F7.%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3HTTPS%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨‰∏ÉÁØáÊñáÁ´†„ÄÇHTTPSÔºàSSL/TLSÔºâÁöÑÂä†ÂØÜÊú∫Âà∂ÊòØÂâçÁ´ØÂêéÁ´ØiosÂÆâÂçìÁ≠âÈÉΩÂ∫î‰∫ÜËß£ÁöÑÂü∫Êú¨ÈóÆÈ¢ò„ÄÇ‰πüÊòØÈù¢ËØïÁªèÂ∏∏ÈóÆÁöÑÁÇπ„ÄÇ ‰∏Ä„ÄÅ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂä†ÂØÜÔºü Â∞èÊó∂ÂÄôÁúãË∞çÊàòÁâáÔºåÊÉÖÊä•ÂèëËøáÊù•‰∫Ü‰πãÂêéÔºåÁî®‰∏Ä‰∏™Â∞èÊú¨Êú¨ËøõË°åÁøªËØëÔºåÁÑ∂ÂêéËß£ÂØÜÂá∫ÊÉÖÊä•„ÄÇÂä†ÂØÜÂ∞±ÊòØÈò≤Ê≠¢ÊòéÊñáË¢´Âà´‰∫∫ÁúãÂà∞ÁîöËá≥ÁØ°ÊîπÂòõÔºÅ ÂõûÂà∞‰∫íËÅîÁΩëÔºåÂõ†‰∏∫httpÁöÑÂÜÖÂÆπÊòØÊòéÊñá‰º†ËæìÁöÑÔºåÊòéÊñáÊï∞ÊçÆ‰ºöÁªèËøá‰∏≠Èó¥‰ª£ÁêÜÊúçÂä°Âô®„ÄÅË∑ØÁî±Âô®„ÄÅwifiÁÉ≠ÁÇπ„ÄÅÈÄö‰ø°ÊúçÂä°ËøêËê•ÂïÜÁ≠âÂ§ö‰∏™Áâ©ÁêÜËäÇÁÇπÔºåÂ¶ÇÊûú‰ø°ÊÅØÂú®‰º†ËæìËøáÁ®ã‰∏≠Ë¢´Âä´ÊåÅÔºå‰º†ËæìÁöÑÂÜÖÂÆπÂ∞±ÂÆåÂÖ®Êö¥Èú≤‰∫ÜÔºå‰ªñËøòÂèØ‰ª•ÁØ°Êîπ‰º†ËæìÁöÑ‰ø°ÊÅØ‰∏î‰∏çË¢´ÂèåÊñπÂØüËßâÔºåËøôÂ∞±ÊòØ‰∏≠Èó¥‰∫∫ÊîªÂáª„ÄÇÊâÄ‰ª•Êàë‰ª¨ÊâçÈúÄË¶ÅÂØπ‰ø°ÊÅØËøõË°åÂä†ÂØÜ„ÄÇÊúÄÁÆÄÂçïÂÆπÊòìÁêÜËß£ÁöÑÂ∞±ÊòØÂØπÁß∞Âä†ÂØÜ „ÄÇ ‰∫å„ÄÅ‰ªÄ‰πàÊòØÂØπÁß∞Âä†ÂØÜÔºü Â∞èÊòéÂÜô‰∏™Ê±ÇÁà±‰ø°ÁªôÂ∞èÁ∫¢ÔºåÂ∞èÊòéÊãÖÂøÉÂ∞èÁ∫¢ÁöÑÂ¶àÂ¶àÁúãÂà∞ËøôÂ∞Å‰ø°ÁöÑÂÜÖÂÆπÔºå‰ªñÁÅµÊú∫‰∏ÄÂä®ÔºåÂØπ‰ø°Âä†‰∏™ÂØÜÔºåÂπ∂Á°ÆÂÆöÂ•ΩÊàëÁî®Ëøô‰∏™ÂØÜÈí•Âä†ÂØÜÁöÑÔºåÂ∞èÁ∫¢Êî∂Âà∞‰πãÂêé‰πüÁî®Ëøô‰∏™ÂØÜÈí•Ëß£ÂØÜÊâçË°å„ÄÇ ‰ΩÜÊòØÂë¢ÔºåËøôÈáåÊúâ‰∏™È∫ªÁÉ¶ÁöÑÂú∞ÊñπÂ∞±ÊòØÔºåÂ∞èÊòéÂíåÂ∞èÁ∫¢‰∏çÂú®‰∏Ä‰∏™Â≠¶Ê†°ÔºåËøô‰∏™Èí•ÂåôÂë¢Ôºå‰∏çÊñπ‰æøÁõ¥Êé•ÈÄÅÂà∞ÊâãÈáå„ÄÇÊâÄ‰ª•Âë¢ÔºåÂ∞èÊòéÂæóÊÉ≥ÂäûÊ≥ïÊääËøô‰∏™Èí•ÂåôÂØÑ‰∏Ä‰∏™ÈÄÅÁªôÂ∞èÁ∫¢ÔºåÂ•ΩÂêßÔºåÂ∞±Áî®ÊúÄË¥µÁöÑÈ°∫‰∏∞ÂêßÔºÅ Â∞±ÊòØÊúâ‰∏Ä‰∏™ÂØÜÈí•ÔºåÂÆÉÂèØ‰ª•ÂØπ‰∏ÄÊÆµÂÜÖÂÆπÂä†ÂØÜÔºåÂä†ÂØÜÂêéÂè™ËÉΩÁî®ÂÆÉÊâçËÉΩËß£ÂØÜÁúãÂà∞ÂéüÊú¨ÁöÑÂÜÖÂÆπÔºåÂíåÊàë‰ª¨Êó•Â∏∏ÁîüÊ¥ª‰∏≠Áî®ÁöÑÈí•Âåô‰ΩúÁî®Â∑Æ‰∏çÂ§ö„ÄÇ ‰∏â„ÄÅÁî®ÂØπÁß∞Âä†ÂØÜÂèØË°åÂêóÔºü È°∫‰∏∞Âø´ÈÄíÂà∞‰∫ÜÔºåÁªìÊûúÂ∞èÁ∫¢‰∏çÂú®ÂÆ∂ÔºåÂ∞èÁ∫¢ÁöÑÂ¶àÂ¶àÊî∂Âà∞‰∫ÜÔºå‰∏ÄÁúãÊòØ‰∏™Áî∑ÂêåÂ≠¶ÂØÑÁöÑÔºåÊÄé‰πàËÉΩÂøç‰ΩèÔºåËµ∂Á¥ßÊâìÂºÄÔºå‰ª•ÁúãÊòØ‰∏ÄÊääÈí•ÂåôÔºå‰Ωú‰∏∫Á®ãÂ∫èÁåøÔºåÂ¶àÂ¶àÂæóÊÑè‰∏ÄÁ¨ëÔºöÂìºÂìºÔºåËøòËÉΩÈÄÉËøáÊàëÁöÑÁúºÁùõÔºüÊàëËµ∂Á¥ßÂ§çÂà∂‰∏ÄÊääËóèÁùÄÔºåÊàëÂÄíË¶ÅÁúãÁúã‰ªñÂêéÈù¢Ë¶ÅÂØÑÂï•Êù•ÔºåËøòË¶ÅÂä†ÂØÜÔºüÔºÅ ÊûúÁÑ∂Â∞èÁ∫¢ÁöÑÂ¶àÂ¶àÁ≠âÂà∞‰∫ÜÊù•Ëá™Â∞èÊòéÂØÑËøáÊù•ÁöÑÊÉÖ‰π¶ÔºåËß£ÂØÜ‰∏ÄÁúãÔºåÂÆûÈî§Êó©ÊÅã„ÄÇ ÂêåÊ†∑Âú∞ÔºåÂ∞èÊòéËøôËæπ‰πüÈùûÂ∏∏Âç±Èô©ÔºåÂø´ÈÄíÂëòÂàöÂá∫ÂèëÔºåÂ∞±Ë¢´Â∞èÊòéÁöÑÂ¶àÂ¶àÊã¶Êà™‰∫ÜÔºåÊãøÂà∞‰∫ÜËøô‰∏™Èí•ÂåôÔºåÈÇ£Â∞èÊòéËøòÊ≤°ÂØÑÂá∫ÁöÑ‰ø°Â∑≤ÁªèË¢´Â¶àÂ¶àÁúãÂÖâ‰∫Ü„ÄÇ ÊâÄ‰ª•ÈóÆÈ¢òÁöÑÊ†πÊú¨Â∞±ÊòØÔºåËøôÊääÈí•ÂåôË¶Å‰º†ËæìÔºå‰º†ËæìÂ∞±ÂèØËÉΩË¢´Êà™Âèñ„ÄÇ ÂõûÂà∞‰∫íËÅîÁΩëÔºåÂ¶ÇÊûúÈÄö‰ø°ÂèåÊñπÈÉΩÂêÑËá™ÊåÅÊúâÂêå‰∏Ä‰∏™ÂØÜÈí•Ôºå‰∏îÊ≤°ÊúâÂà´‰∫∫Áü•ÈÅìÔºåËøô‰∏§ÊñπÁöÑÈÄö‰ø°ÂÆâÂÖ®ÂΩìÁÑ∂ÊòØÂèØ‰ª•Ë¢´‰øùËØÅÁöÑÔºàÈô§ÈùûÂØÜÈí•Ë¢´Á†¥Ëß£Ôºâ„ÄÇ ÁÑ∂ËÄåÊúÄÂ§ßÁöÑÈóÆÈ¢òÂ∞±ÊòØËøô‰∏™ÂØÜÈí•ÊÄé‰πàËÆ©‰º†ËæìÁöÑÂèåÊñπÁü•ÊôìÔºåÂêåÊó∂‰∏çË¢´Âà´‰∫∫Áü•ÈÅì„ÄÇ Â¶ÇÊûúÁî±ÊúçÂä°Âô®ÁîüÊàê‰∏Ä‰∏™ÂØÜÈí•Âπ∂‰º†ËæìÁªôÊµèËßàÂô®ÔºåÈÇ£Ëøô‰∏™‰º†ËæìËøáÁ®ã‰∏≠ÂØÜÈí•Ë¢´Âà´‰∫∫Âä´ÊåÅÂºÑÂà∞Êâã‰∫ÜÊÄé‰πàÂäûÔºü Êç¢ÁßçÊÄùË∑ØÔºüËØïÊÉ≥‰∏Ä‰∏ãÔºåÂ¶ÇÊûúÊµèËßàÂô®ÂÜÖÈÉ®Â∞±È¢ÑÂ≠ò‰∫ÜÁΩëÁ´ôAÁöÑÂØÜÈí•Ôºå‰∏îÂèØ‰ª•Á°Æ‰øùÈô§‰∫ÜÊµèËßàÂô®ÂíåÁΩëÁ´ôAÔºå‰∏ç‰ºöÊúâ‰ªª‰ΩïÂ§ñ‰∫∫Áü•ÈÅìËØ•ÂØÜÈí•ÔºåÈÇ£ÁêÜËÆ∫‰∏äÁî®ÂØπÁß∞Âä†ÂØÜÊòØÂèØ‰ª•ÁöÑÔºåËøôÊ†∑ÊµèËßàÂô®Âè™Ë¶ÅÈ¢ÑÂ≠òÂ•Ω‰∏ñÁïå‰∏äÊâÄÊúâHTTPSÁΩëÁ´ôÁöÑÂØÜÈí•Â∞±Ë°åÂï¶ÔºÅËøô‰πàÂÅöÊòæÁÑ∂‰∏çÁé∞ÂÆû„ÄÇ ÊÄé‰πàÂäûÔºüÊâÄ‰ª•Êàë‰ª¨Â∞±ÈúÄË¶ÅÁ•ûÂ•áÁöÑÈùûÂØπÁß∞Âä†ÂØÜ„ÄÇ Âõõ„ÄÅ‰ªÄ‰πàÊòØÈùûÂØπÁß∞Âä†ÂØÜÔºü Êúâ‰∏§ÊääÂØÜÈí•ÔºåÈÄöÂ∏∏‰∏ÄÊääÂè´ÂÅöÂÖ¨Èí•„ÄÅ‰∏ÄÊääÂè´ÂÅöÁßÅÈí•„ÄÇ Áî®ÂÖ¨Èí•Âä†ÂØÜÁöÑÂÜÖÂÆπÂøÖÈ°ªÁî®ÁßÅÈí•ÊâçËÉΩËß£ÂºÄÔºåÂêåÊ†∑ÔºåÁßÅÈí•Âä†ÂØÜÁöÑÂÜÖÂÆπÂè™ÊúâÂÖ¨Èí•ËÉΩËß£ÂºÄ„ÄÇ ‰∫î„ÄÅÁî®ÈùûÂØπÁß∞Âä†ÂØÜÂèØË°åÂêóÔºü ÂÖ¨Èí•Âë¢ÔºåËøòÊòØË¶ÅÈÄöËøáÂø´ÈÄíÂëòÈÄÅÁªôÂ∞èÁ∫¢ÁöÑ„ÄÇOKÔºåÂÅáËÆæÂ∞èÁ∫¢Ë¶ÅÂõû‰ø°ÔºåÂÜôÂ•Ω‰∫ÜÁî®ÂÖ¨Èí•Âä†ÂØÜÔºåÂ∞èÁ∫¢ÁöÑÂ¶àÂ¶àÂõ†‰∏∫Êãø‰∏çÂà∞ÁßÅÈí•ÔºåÁúã‰∏çÂà∞‰ø°ÁöÑÂÜÖÂÆπ„ÄÇ OKÔºå‰ΩÜÊòØÂèçËøáÊù•Âë¢ÔºüÂ∞èÊòéÁî®ÁßÅÈí•Âä†ÂØÜ‰º†ÁªôÂ∞èÁ∫¢ÔºåÈÇ£‰πàÂ∞èÁ∫¢ÁöÑÂ¶àÂ¶àÂèØÂ∞±ËÉΩËß£ÂØÜ‰∫ÜÔºàÂõ†‰∏∫ÂÖ¨Èí•ÂèØËÉΩ‰ºöË¢´Â∞èÁ∫¢ÁöÑÂ¶àÂ¶àÊãøÂà∞Ôºâ„ÄÇ ÂõûÂà∞‰∫íËÅîÁΩëÔºåÊúçÂä°Âô®ÂÖàÊääÂÖ¨Èí•Áõ¥Êé•ÊòéÊñá‰º†ËæìÁªôÊµèËßàÂô®Ôºå‰πãÂêéÊµèËßàÂô®ÂêëÊúçÂä°Âô®‰º†Êï∞ÊçÆÂâçÈÉΩÂÖàÁî®Ëøô‰∏™ÂÖ¨Èí•Âä†ÂØÜÂ•ΩÂÜç‰º†ÔºåËøôÊù°Êï∞ÊçÆÁöÑÂÆâÂÖ®‰ºº‰πéÂèØ‰ª•‰øùÈöú‰∫ÜÔºÅÂõ†‰∏∫Âè™ÊúâÊúçÂä°Âô®ÊúâÁõ∏Â∫îÁöÑÁßÅÈí•ËÉΩËß£ÂºÄËøôÊù°Êï∞ÊçÆ„ÄÇ ÁÑ∂ËÄåÁî±ÊúçÂä°Âô®Âà∞ÊµèËßàÂô®ÁöÑËøôÊù°Ë∑ØÊÄé‰πà‰øùÈöúÂÆâÂÖ®Ôºü Â¶ÇÊûúÊúçÂä°Âô®Áî®ÂÆÉÁöÑÁöÑÁßÅÈí•Âä†ÂØÜÊï∞ÊçÆ‰º†ÁªôÊµèËßàÂô®ÔºåÈÇ£‰πàÊµèËßàÂô®Áî®ÂÖ¨Èí•ÂèØ‰ª•Ëß£ÂØÜÂÆÉÔºåËÄåËøô‰∏™ÂÖ¨Èí•ÊòØ‰∏ÄÂºÄÂßãÈÄöËøáÊòéÊñá‰º†ËæìÁªôÊµèËßàÂô®ÁöÑÔºåËøô‰∏™ÂÖ¨Èí•Ë¢´Ë∞ÅÂä´ÊåÅÂà∞ÁöÑËØùÔºå‰ªñ‰πüËÉΩÁî®ËØ•ÂÖ¨Èí•Ëß£ÂØÜÊúçÂä°Âô®‰º†Êù•ÁöÑ‰ø°ÊÅØ‰∫Ü„ÄÇ ÊâÄ‰ª•ÁõÆÂâç‰ºº‰πéÂè™ËÉΩ‰øùËØÅÁî±ÊµèËßàÂô®ÂêëÊúçÂä°Âô®‰º†ËæìÊï∞ÊçÆÊó∂ÁöÑÂÆâÂÖ®ÊÄßÔºàÂÖ∂ÂÆû‰ªçÊúâÊºèÊ¥ûÔºå‰∏ãÊñá‰ºöËØ¥Ôºâ„ÄÇ ÂÖ≠„ÄÅÊîπËâØÁöÑÈùûÂØπÁß∞Âä†ÂØÜÊñπÊ°àÔºå‰ºº‰πéÂèØ‰ª•Ôºü Â∞èÊòéÂíåÂ∞èÁ∫¢Âπ¥Á∫™‰∏çÂ§ßÔºå‰ΩÜÊòØÂæàËÅ™ÊòéÔºåÈíàÂØπËøô‰∏™ÊÉÖÂÜµÔºåËøòÊòØËøÖÈÄüÂçáÁ∫ßÂä†ÂØÜÊñπÊ≥ï„ÄÇ‰ªñ‰ª¨ÊÉ≥Âà∞Êó¢ÁÑ∂‰∏ÄÁªÑÂÖ¨Èí•ÁßÅÈí•‰∏çÂ§üÔºåÈÇ£‰∏§ÁªÑÂë¢Ôºü OKÔºåÂ∞èÊòéÂíåÂ∞èÁ∫¢ÂêÑÈÄ†‰∫Ü‰∏ÄÂØπ„ÄÇ‰∏ãÈù¢Â∞±ÊòØ‰∫íÁõ∏‰∫§Êç¢ÂÖ¨Èí•„ÄÇÈÇ£‰πàÂ∞±ÂèòÊàêÔºö ‰∏ãÈù¢Â∞±Â•ΩÂäûÂï¶ÔºåÂ∞èÊòéÂÜô‰ø°Áî®ÂÖ¨Èí•BÂä†ÂØÜÔºåÈÇ£‰πà‰ø°ÁöÑÂÜÖÂÆπÂè™ÊúâÂ∞èÁ∫¢ËÉΩÁ†¥Ëß£ÔºåÂõ†‰∏∫Â∞èÁ∫¢ÊòØÈöèË∫´Êê∫Â∏¶ÁßÅÈí•B„ÄÇÁõ∏ÂèçÔºåÂ∞èÁ∫¢Áî®ÂÖ¨Èí•AÂØπ‰ø°Âä†ÂØÜÔºåËøôÊ†∑Âè™ÊúâÂ∞èÊòéËÉΩÁ†¥Ëß£ÔºåÂõ†‰∏∫Â∞èÊòé‰πüÊòØÈöèË∫´Êê∫Â∏¶ÁßÅÈí•A„ÄÇÂ•ΩÂÉèÂæàÂÆâÂÖ®Âï¶ÔºÅÈô§‰∫Ü‰∏ãÈù¢ÊèêÂà∞ÁöÑÊºèÊ¥ûÔºåÂîØ‰∏ÄÁöÑÁº∫ÁÇπÂèØËÉΩÊòØÔºöÂ∞èÁ∫¢ÂæóËä±ÂçäÂ§©Êó∂Èó¥ÊâçËÉΩËß£ÂØÜÂÆåËøôÂ∞Å‰ø°ÔºåÊúâÁÇπÂèó‰∏ç‰∫Ü„ÄÇ ÂõûÂà∞‰∫íËÅîÁΩë„ÄÇËØ∑Áúã‰∏ãÈù¢ÁöÑËøáÁ®ãÔºö ÊüêÁΩëÁ´ôÊã•ÊúâÁî®‰∫éÈùûÂØπÁß∞Âä†ÂØÜÁöÑÂÖ¨Èí•A„ÄÅÁßÅÈí•AÔºõÊµèËßàÂô®Êã•ÊúâÁî®‰∫éÈùûÂØπÁß∞Âä†ÂØÜÁöÑÂÖ¨Èí•B„ÄÅÁßÅÈí•B„ÄÇ ÊµèËßàÂô®ÂÉèÁΩëÁ´ôÊúçÂä°Âô®ËØ∑Ê±ÇÔºåÊúçÂä°Âô®ÊääÂÖ¨Èí•AÊòéÊñáÁªô‰º†ËæìÊµèËßàÂô®„ÄÇ ÊµèËßàÂô®ÊääÂÖ¨Èí•BÊòéÊñá‰º†ËæìÁªôÊúçÂä°Âô®„ÄÇ ‰πãÂêéÊµèËßàÂô®ÂêëÊúçÂä°Âô®‰º†ËæìÁöÑÊâÄÊúâ‰∏úË•øÈÉΩÁî®ÂÖ¨Èí•AÂä†ÂØÜÔºåÊúçÂä°Âô®Êî∂Âà∞ÂêéÁî®ÁßÅÈí•AËß£ÂØÜ„ÄÇÁî±‰∫éÂè™ÊúâÊúçÂä°Âô®Êã•ÊúâËøô‰∏™ÁßÅÈí•AÂèØ‰ª•Ëß£ÂØÜÔºåÊâÄ‰ª•ËÉΩ‰øùËØÅËøôÊù°Êï∞ÊçÆÁöÑÂÆâÂÖ®„ÄÇ ÊúçÂä°Âô®ÂêëÊµèËßàÂô®‰º†ËæìÁöÑÊâÄÊúâ‰∏úË•øÈÉΩÁî®ÂÖ¨Èí•BÂä†ÂØÜÔºåÊµèËßàÂô®Êî∂Âà∞ÂêéÁî®ÁßÅÈí•BËß£ÂØÜ„ÄÇÂêå‰∏ä‰πüÂèØ‰ª•‰øùËØÅËøôÊù°Êï∞ÊçÆÁöÑÂÆâÂÖ®„ÄÇ ÁöÑÁ°ÆÂèØ‰ª•ÔºÅÊäõÂºÄËøôÈáåÈù¢‰ªçÊúâÁöÑÊºèÊ¥û‰∏çË∞àÔºà‰∏ãÊñá‰ºöËÆ≤ÔºâÔºåHTTPSÁöÑÂä†ÂØÜÂç¥Ê≤°‰ΩøÁî®ËøôÁßçÊñπÊ°àÔºå‰∏∫‰ªÄ‰πàÔºüÊúÄ‰∏ªË¶ÅÁöÑÂéüÂõ†ÊòØÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÈùûÂ∏∏ËÄóÊó∂ÔºåÁâπÂà´ÊòØÂä†ÂØÜËß£ÂØÜ‰∏Ä‰∫õËæÉÂ§ßÊï∞ÊçÆÁöÑÊó∂ÂÄôÊúâ‰∫õÂäõ‰∏ç‰ªéÂøÉ„ÄÇ ‰∏É„ÄÅÈùûÂØπÁß∞Âä†ÂØÜ+ÂØπÁß∞Âä†ÂØÜÔºü Â∞èÊòé‰πüÁü•ÈÅìÔºåËøô‰∏™‰ø°ÂæàÈïøÔºåÁî®ÈùûÂØπÁß∞Âä†ÂØÜÔºåÂ§™ÊÖ¢ÔºÅÂäûÊ≥ï‰πüÊúâÔºåÊ≤°ÊúâÂøÖË¶ÅÂØπÈÇ£‰πàÈïøÁöÑ‰ø°Âä†ÂØÜÔºåÊàëÂè™Ë¶Å‰øùËØÅËøô‰∏™ÁúüÊ≠£Ëß£ÂØÜÁöÑÈí•Âåô‰∏çË¢´Âà´‰∫∫ÊãøÂà∞Â∞±Ë°åÔºåÈÇ£‰πà‰ªñÁÅµÊú∫‰∏ÄÂä®ÊÉ≥Âà∞Ëøô‰∏™ÊñπÊ≥ïÔºö Â∞èÊòéÂíåÂ∞èÁ∫¢Âà©Áî®ÈùûÂØπÁß∞Âä†ÂØÜÂØπÈí•ÂåôÂä†ÂØÜÔºåÂßë‰∏îËÆ§‰∏∫ÊòØËøô‰∏™Èí•ÂåôË¢´ÊîæÂú®‰∫Ü‰∏Ä‰∏™ÁõíÂ≠êÈáåÔºåËøô‰∏™ÁõíÂ≠ê‰πüË¢´ÈîÅËµ∑Êù•‰∫ÜÔºåÂè™ÊúâÂ∞èÁ∫¢ÊàñËÄÖÂ∞èÊòéÊâçËÉΩÊâìÂºÄÁõíÂ≠êÔºåÂÜçÁî®Èí•ÂåôÂéªËß£ÂØÜ„ÄÇ Ëøô‰∏™ÁúüÊ≠£Áî®‰∫éÂØπÁß∞Âä†ÂØÜËß£ÂØÜÁöÑÈí•ÂåôÂà´‰∫∫Â∞±Êãø‰∏çÂà∞Âï¶ÔºÅ Ëá™‰ªéÁî®‰∫ÜËøô‰∏™ÊñπÊ°àÔºåÊÑüËßâÂèàÂÆâÂÖ®ÔºåËß£ÂØÜÂèàÂø´ÔºåÊÑüÊÉÖÂèàÊ∑±Ê∏©‰∫ÜÂë¢ÔºÅ ÂõûÂà∞‰∫íËÅîÁΩëÔºåÊ≠•È™§Â¶Ç‰∏ãÔºö ÊüêÁΩëÁ´ôÊã•ÊúâÁî®‰∫éÈùûÂØπÁß∞Âä†ÂØÜÁöÑÂÖ¨Èí•A„ÄÅÁßÅÈí•A„ÄÇ ÊµèËßàÂô®ÂÉèÁΩëÁ´ôÊúçÂä°Âô®ËØ∑Ê±ÇÔºåÊúçÂä°Âô®ÊääÂÖ¨Èí•AÊòéÊñáÁªô‰º†ËæìÊµèËßàÂô®„ÄÇ ÊµèËßàÂô®ÈöèÊú∫ÁîüÊàê‰∏Ä‰∏™Áî®‰∫éÂØπÁß∞Âä†ÂØÜÁöÑÂØÜÈí•XÔºåÁî®ÂÖ¨Èí•AÂä†ÂØÜÂêé‰º†ÁªôÊúçÂä°Âô®„ÄÇ ÊúçÂä°Âô®ÊãøÂà∞ÂêéÁî®ÁßÅÈí•AËß£ÂØÜÂæóÂà∞ÂØÜÈí•X„ÄÇ ËøôÊ†∑ÂèåÊñπÂ∞±ÈÉΩÊã•ÊúâÂØÜÈí•X‰∫ÜÔºå‰∏îÂà´‰∫∫Êó†Ê≥ïÁü•ÈÅìÂÆÉ„ÄÇ‰πãÂêéÂèåÊñπÊâÄÊúâÊï∞ÊçÆÈÉΩÁî®ÂØÜÈí•XÂä†ÂØÜËß£ÂØÜ„ÄÇ HTTPSÁöÑÂü∫Êú¨ÊÄùÊÉ≥Â∞±ÊòØÂü∫‰∫éËøô‰∏™„ÄÇ‰ΩÜÊòØËøô‰∏™ÊñπÊ°à‰πüÂ≠òÂú®‰∏äÈù¢‰∏ÄÁõ¥Âú®ËØ¥ÁöÑÊºèÊ¥û„ÄÇ ÂÖ´„ÄÅ‰∏≠Èó¥‰∫∫ÊîªÂáª ÂÉèÂ¶àÂ¶àËøôÊ†∑Á∫ßÂà´ÁöÑÁ®ãÂ∫èÁåøÂèØËÉΩÊòØÈÇ£‰ªñ‰ª¨‰∏§Ê≤°ÂäûÊ≥ïÂï¶Ôºå‰ΩÜÊòØÂë¢ÔºåÊ†°Âå∫Êúâ‰∏™ÁúãÈó®ÁöÑÂ§ßÁà∑Ôºå‰ª•ÂâçÊòØ‰∏™ÈªëÂÆ¢Ôºå‰πü‰∏çÁü•ÈÅìÂíãÂõû‰∫ãÔºåÊòéÊòéÊâç50Â≤ÅÔºå‰ΩÜÊòØÁúãËµ∑Êù•ÂÉè80Â≤ÅÔºåÂ§¥‰∏äÂÖâÊ∫úÊ∫úÁöÑÔºåÂÜ¨Â§©ÂÜ∑Âë¢„ÄÇÊï¥Â§©Âú®ÈÇ£ËÉ°Ë®Ä‰π±ËØ≠ÔºödockerÁâõÈÄºÂïäÔºåspring cloudÁâõÈÄºÂïäÔºåËøô‰∏™ÂºÄÊ∫êËΩØ‰ª∂XXXÂÜôÁöÑÁúüÂ•ΩÔºåË∑üÂë®Âõ¥ÁöÑËÄÅÂ§ßÁà∑ËÄÅÂ§ßÂ¶àÊ†πÊú¨Ë∞à‰∏çÂà∞‰∏ÄËµ∑Âéª„ÄÇ ‰ªñ‰πüÊòØÈó≤ÁöÑËõãÁñºÔºåÈùûË¶ÅÊé∫ÂíåÔºåÂõ†‰∏∫ÊçÆËØ¥‰ªñ‰ª•ÂâçÂçïË∫´30Âπ¥ÔºåËã¶ÈÄºÊï≤‰ª£Á†ÅÔºå‰∏çÁü•ÈÅìË∞àÊÅãÁà±ÊòØÂï•ÊªãÂë≥ÔºåÂßë‰∏îËÆ§‰∏∫‰ªñÂ•ΩÂ•áÂøÉÈáçÂêß„ÄÇ Âú®Â∞èÊòéÁ¨¨‰∏ÄÊ¨°ÂØÑÂÖ¨Èí•AÁöÑÊó∂ÂÄôÔºåÂ§ßÁà∑Âá∫Êâã‰∫ÜÔºåÊà™Âèñ‰∏ãÊù•„ÄÇÊç¢ÊàêËá™Â∑±ÂÅöÁöÑÂÖ¨Èí•B„ÄÇÁÑ∂ÂêéÈÄÅÁªôÂ∞èÁ∫¢„ÄÇ Â∞èÁ∫¢Âì™Èáå‰ºöÁü•ÈÅìËøôÂÖ¨Èí•Ë¢´ÊéâÂåÖ‰∫ÜÂë¢ÔºåÊâÄ‰ª•Áõ¥Êé•Â∞±Áî®‰∫ÜÔºåÊåâÁÖßÊ≠£Â∏∏Ê≠•È™§ÔºåÂ∞èÁ∫¢ÊÉ≥‰∫Ü‰∏Ä‰∏™ÈöèÊú∫Â≠óÁ¨¶‰∏≤ÔºåËøôÊ¨°Â∞±Âè´xiaomingwoxuanniÂêßÔºåOKÔºåÁî®Ëøô‰∏™ÂÖ¨Èí•BÂØπËøô‰∏™Â≠óÁ¨¶‰∏≤Âä†‰∏™ÂØÜÔºåËøô‰∏™Â≠óÁ¨¶‰∏≤Â∞±Ë¢´ÈîÅËøõ‰∫ÜÁî®Â§ßÁà∑ÂÖ¨Èí•BÈîÅÁöÑÁõíÂ≠êÈáå„ÄÇ ËÄÅÂ§ßÁà∑Âú®Èó®Âè£ÂÆàÁùÄÂë¢Ôºå‰∏ÄÁúãÂà∞Â∞èÁ∫¢ÂØÑ‰∏úË•ø‰∫ÜÔºåÂèàÂÅ∑ÂÅ∑Âú∞Êà™Âèñ‰∏ãÊù•ÔºåÁî®Ëá™Â∑±ÁöÑÁßÅÈí•BÊù•Ëß£ÂØÜËøô‰∏™ÁõíÂ≠ê„ÄÇËΩªÊòìÂú∞ÊãøÂà∞‰∫ÜÈáåÈù¢ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåOKÔºåÊÄïÂ∞èÊòéÂØüËßâÔºåÂÜçÁî®Â∞èÊòéÂØÑÊù•ÁöÑÂÖ¨Èí•AÂä†ÂØÜ‰º†ÁªôÂ∞èÊòéÔºåËøôÊ†∑ÂèåÊñπÈÉΩ‰∏çÁü•ÈÅì‰ªñ‰ª¨ÁöÑÈí•ÂåôÂ∑≤ÁªèË¢´Â§ßÁà∑ÁªôËé∑Âèñ‰∫Ü„ÄÇ Â∞èÊòéÂíåÂ∞èÁ∫¢‰πãÈó¥ÁöÑ‰ø°Â∞±Áî®xiaomingwoxuanniËøô‰∏™Èí•ÂåôËøõË°åÂØπÁß∞Âä†ÂØÜÂíåÂØπÁß∞Ëß£ÂØÜÔºåÂÆåÂÖ®‰∏çÁü•ÈÅìÊúâ‰∏™Â§ßÁà∑Â∞±Â§©Â§©ÊãøÁùÄËøô‰∏™Â≠óÁ¨¶‰∏≤ÂéªËß£ÂØÜ‰ø°‰ª∂ÔºåÁúãÁöÑ‰∏ç‰∫¶‰πê‰πéÔºåÁîöËá≥ËøòÂÅ∑ÂÅ∑ÊîπÂá†‰∏™Â≠óÂë¢„ÄÇ ÂõûÂà∞‰∫íËÅîÁΩë„ÄÇ‰∏≠Èó¥‰∫∫ÁöÑÁ°ÆÊó†Ê≥ïÂæóÂà∞ÊµèËßàÂô®ÁîüÊàêÁöÑÂØÜÈí•BÔºåËøô‰∏™ÂØÜÈí•Êú¨Ë∫´Ë¢´ÂÖ¨Èí•AÂä†ÂØÜ‰∫ÜÔºåÂè™ÊúâÊúçÂä°Âô®ÊâçÊúâÁßÅÈí•AËß£ÂºÄÊãøÂà∞ÂÆÉÂëÄÔºÅÁÑ∂ËÄå‰∏≠Èó¥‰∫∫Âç¥ÂÆåÂÖ®‰∏çÈúÄË¶ÅÊãøÂà∞ÂØÜÈí•AÂ∞±ËÉΩÂπ≤Âùè‰∫ã‰∫Ü„ÄÇËØ∑ÁúãÔºö ÊüêÁΩëÁ´ôÊã•ÊúâÁî®‰∫éÈùûÂØπÁß∞Âä†ÂØÜÁöÑÂÖ¨Èí•A„ÄÅÁßÅÈí•A„ÄÇ ÊµèËßàÂô®ÂêëÁΩëÁ´ôÊúçÂä°Âô®ËØ∑Ê±ÇÔºåÊúçÂä°Âô®ÊääÂÖ¨Èí•AÊòéÊñáÁªô‰º†ËæìÊµèËßàÂô®„ÄÇ ‰∏≠Èó¥‰∫∫Âä´ÊåÅÂà∞ÂÖ¨Èí•AÔºå‰øùÂ≠ò‰∏ãÊù•ÔºåÊääÊï∞ÊçÆÂåÖ‰∏≠ÁöÑÂÖ¨Èí•AÊõøÊç¢ÊàêËá™Â∑±‰º™ÈÄ†ÁöÑÂÖ¨Èí•BÔºàÂÆÉÂΩìÁÑ∂‰πüÊã•ÊúâÂÖ¨Èí•BÂØπÂ∫îÁöÑÁßÅÈí•BÔºâ„ÄÇ ÊµèËßàÂô®ÈöèÊú∫ÁîüÊàê‰∏Ä‰∏™Áî®‰∫éÂØπÁß∞Âä†ÂØÜÁöÑÂØÜÈí•XÔºåÁî®ÂÖ¨Èí•BÔºàÊµèËßàÂô®‰∏çÁü•ÈÅìÂÖ¨Èí•Ë¢´ÊõøÊç¢‰∫ÜÔºâÂä†ÂØÜÂêé‰º†ÁªôÊúçÂä°Âô®„ÄÇ ‰∏≠Èó¥‰∫∫Âä´ÊåÅÂêéÁî®ÁßÅÈí•BËß£ÂØÜÂæóÂà∞ÂØÜÈí•XÔºåÂÜçÁî®ÂÖ¨Èí•AÂä†ÂØÜÂêé‰º†ÁªôÊúçÂä°Âô®„ÄÇ ÊúçÂä°Âô®ÊãøÂà∞ÂêéÁî®ÁßÅÈí•AËß£ÂØÜÂæóÂà∞ÂØÜÈí•X„ÄÇ ËøôÊ†∑Âú®ÂèåÊñπÈÉΩ‰∏ç‰ºöÂèëÁé∞ÂºÇÂ∏∏ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏≠Èó¥‰∫∫ÂæóÂà∞‰∫ÜÂØÜÈí•B„ÄÇÊ†πÊú¨ÂéüÂõ†ÊòØÊµèËßàÂô®Êó†Ê≥ïÁ°ÆËÆ§Ëá™Â∑±Êî∂Âà∞ÁöÑÂÖ¨Èí•ÊòØ‰∏çÊòØÁΩëÁ´ôËá™Â∑±ÁöÑ„ÄÇÂè™Ë¶ÅËß£ÂÜ≥‰∫ÜËøô‰∏™ÂÖ¨Èí•‰∏ÄÂÆöÊòØËøô‰∏™ÁΩëÁ´ôÂèëÊù•ÁöÑÔºåÈÇ£‰πàÂü∫Êú¨Â∞±OK‰∫Ü ‰πù„ÄÅÂ¶Ç‰ΩïËØÅÊòéÊµèËßàÂô®Êî∂Âà∞ÁöÑÂÖ¨Èí•‰∏ÄÂÆöÊòØËØ•ÁΩëÁ´ôÁöÑÂÖ¨Èí•Ôºü Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂ¶ÇÊûúÊÉ≥ËØÅÊòéÊüêË∫´‰ªΩËØÅÂè∑‰∏ÄÂÆöÊòØÂ∞èÊòéÁöÑÔºåÊÄé‰πàÂäûÔºüÁúãË∫´‰ªΩËØÅ„ÄÇËøôÈáåÊîøÂ∫úÊú∫ÊûÑËµ∑Âà∞‰∫Ü‚ÄúÂÖ¨‰ø°‚ÄùÁöÑ‰ΩúÁî®ÔºåË∫´‰ªΩËØÅÊòØÁî±ÂÆÉÈ¢ÅÂèëÁöÑÔºåÂÆÉÊú¨Ë∫´ÁöÑÊùÉÂ®ÅÂèØ‰ª•ÂØπ‰∏Ä‰∏™‰∫∫ÁöÑË∫´‰ªΩ‰ø°ÊÅØ‰ΩúÂá∫ËØÅÊòé„ÄÇ‰∫íËÅîÁΩë‰∏≠ËÉΩ‰∏çËÉΩÊêûËøô‰πà‰∏™ÂÖ¨‰ø°Êú∫ÊûÑÂë¢ÔºüÁªôÁΩëÁ´ôÈ¢ÅÂèë‰∏Ä‰∏™‚ÄúË∫´‰ªΩËØÅ‚ÄùÔºü ÂçÅ„ÄÅÊï∞Â≠óËØÅ‰π¶ ÁΩëÁ´ôÂú®‰ΩøÁî®HTTPSÂâçÔºåÈúÄË¶ÅÂêë‚ÄúCAÊú∫ÊûÑ‚ÄùÁî≥ËØ∑È¢ÅÂèë‰∏Ä‰ªΩÊï∞Â≠óËØÅ‰π¶ÔºåÂç≥SSLËØÅ‰π¶ÔºåÊï∞Â≠óËØÅ‰π¶ÈáåÊúâËØÅ‰π¶ÊåÅÊúâËÄÖ„ÄÅËØÅ‰π¶ÊåÅÊúâËÄÖÁöÑÂÖ¨Èí•Á≠â‰ø°ÊÅØÔºåÊúçÂä°Âô®ÊääËØÅ‰π¶‰º†ËæìÁªôÊµèËßàÂô®ÔºåÊµèËßàÂô®‰ªéËØÅ‰π¶ÈáåÂèñÂÖ¨Èí•Â∞±Ë°å‰∫ÜÔºåËØÅ‰π¶Â∞±Â¶ÇË∫´‰ªΩËØÅ‰∏ÄÊ†∑ÔºåÂèØ‰ª•ËØÅÊòé‚ÄúËØ•ÂÖ¨Èí•ÂØπÂ∫îËØ•ÁΩëÁ´ô‚Äù„ÄÇÁÑ∂ËÄåËøôÈáåÂèàÊúâ‰∏Ä‰∏™ÊòæËÄåÊòìËßÅÁöÑÈóÆÈ¢ò‰∫ÜÔºåËØÅ‰π¶Êú¨Ë∫´ÁöÑ‰º†ËæìËøáÁ®ã‰∏≠ÔºåÂ¶Ç‰ΩïÈò≤Ê≠¢Ë¢´ÁØ°ÊîπÔºüÂç≥Â¶Ç‰ΩïËØÅÊòéËØÅ‰π¶Êú¨Ë∫´ÁöÑÁúüÂÆûÊÄßÔºüË∫´‰ªΩËØÅÊúâ‰∏Ä‰∫õÈò≤‰º™ÊäÄÊúØÔºåÊï∞Â≠óËØÅ‰π¶ÊÄé‰πàÈò≤‰º™Âë¢ÔºüËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÊàë‰ª¨Â∞±Âü∫Êú¨Êé•ËøëËÉúÂà©‰∫ÜÔºÅ SSLËØÅ‰π¶ÂÜÖÂÆπÔºö ËØÅ‰π¶ÁöÑÂèëÂ∏ÉÊú∫ÊûÑCA ËØÅ‰π¶ÁöÑÊúâÊïàÊúü ÂÖ¨Èí• ËØÅ‰π¶ÊâÄÊúâËÄÖ Á≠æÂêç ÂçÅ‰∏Ä„ÄÅÂ¶Ç‰ΩïÊîæÈò≤Ê≠¢Êï∞Â≠óËØÅ‰π¶Ë¢´ÁØ°ÊîπÔºü Êàë‰ª¨ÊääËØÅ‰π¶ÂÜÖÂÆπÁîüÊàê‰∏Ä‰ªΩ‚ÄúÁ≠æÂêç‚ÄùÔºåÊØîÂØπËØÅ‰π¶ÂÜÖÂÆπÂíåÁ≠æÂêçÊòØÂê¶‰∏ÄËá¥Â∞±ËÉΩÂØüËßâÊòØÂê¶Ë¢´ÁØ°Êîπ„ÄÇËøôÁßçÊäÄÊúØÂ∞±Âè´Êï∞Â≠óÁ≠æÂêç„ÄÇ ÊèêÂà∞Êï∞Â≠óÁ≠æÂêçÔºåÂÖ∂ÂÆûÂéüÁêÜÂæàÁÆÄÂçïÂï¶ÔºåÂ∞±ÊòØÊØîÂ¶ÇÊàëË¶Å‰º†Ëæì‰∏ÄÂè•ËØùÂè´Ôºö‚Äú‰Ω†ÁªôÊàëËΩ¨100ÂùóÈí±ÔºåÊàëÁöÑË¥¶Âè∑ÊòØ123456ÔºåËΩ¨ÂÆå‰∫ÜÂëäËØâÊàë‰∏ÄÂ£∞„ÄÇ‚ÄùÔºåÂ¶ÇÊûú‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜÔºåË¢´ÂàöÊâçÁöÑËÄÅÂ§ßÁà∑Êà™Âèñ‰∫ÜÔºå‰ªñÂÅ∑ÂÅ∑Âú∞Êîπ‰∏Ä‰∏ãÂÜÖÂÆπ‚Äú‰Ω†ÁªôÊàëËΩ¨200ÂùóÈí±ÔºåÊàëÁöÑË¥¶Âè∑ÊòØ654321Ôºå‰∏çË¶ÅÂëäËØâ‰ªª‰Ωï‰∫∫ÔºåÂ∞§ÂÖ∂ÊòØ‰Ω†Â´ÇÂ≠ê„ÄÇ‚Äù ÊòØ‰∏çÊòØÂ§™Âùè‰∫ÜÔºåÂºÑ‰∏çÂ•ΩË¢´ÊäìÔºåÂ§ßÁà∑ÂèØ‰∏çÊï¢ÂÅöÂ§ßÁöÑÔºåÂè™Êï¢È™ó‰∏™ÂñùÈÖíÈí±„ÄÇ ÈÇ£‰πàÊÄé‰πàÈò≤Ê≠¢Â§ßÁà∑ËøôÁßçÁå•ÁêêÊäÄÊúØÂèàÈ´òÁöÑ‰∫∫ÁØ°ÊîπÂë¢ÔºüÊï∞Â≠óÁ≠æÂêçÊéí‰∏äÁî®Âú∫Âï¶ÔºÅ ‰ª•ÂêéÂÜç‰º†Ê∂àÊÅØÂ∞±ÊòØ‚Äú‰Ω†ÁªôÊàëËΩ¨100ÂùóÈí±ÔºåÊàëÁöÑË¥¶Âè∑ÊòØ123456ÔºåËΩ¨ÂÆå‰∫ÜÂëäËØâÊàë‰∏ÄÂ£∞„ÄÇ‚Äù+‚ÄúÔºÅ‚Ä¶‚Ä¶@&amp;@%#‚Ä¶‚Ä¶ÔºÅÔø•@Ôø•ÔºÅ@%‚Ä¶‚Ä¶#Ôø•ÔºÅ%‚Ä¶‚Ä¶‚Äù,ÂêéÈù¢ÈÇ£‰∏Ä‰∏≤‰∏úË•øÂ∞±ÊòØÊï∞Â≠óÁ≠æÂêçÔºåÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØÊÉ≥ÂäûÊ≥ïÂØπÂâçÈù¢ÁöÑÂÜÖÂÆπËøõË°åÈùûÂØπÁß∞Âä†ÂØÜÔºàËøôÊ†∑Âà´‰∫∫Ê†πÊú¨‰∏çÁü•ÈÅì‰Ω†Âä†ÂØÜÁöÑÁßÅÈí•ÊòØ‰ªÄ‰πàÔºå‰πüÂ∞±‰º™Ë£Ö‰∏ç‰∫ÜÁ≠æÂêç‰∫ÜÔºâ„ÄÇ‰º†ËøáÂéª‰πãÂêéÔºåÊàëË¶ÅÂØπÂÖ∂ËøõË°åËß£ÂØÜÔºå‰∏é‰º†ËøáÊù•ÁöÑÊòéÊñá‰∏Ä‰∏ÄÂØπÊØîÂèÇÊï∞ÔºåÁúãÊúâÊ≤°ÊúâË¢´ÊîπÂä®Ëøá„ÄÇ‰∏ÄÊó¶ÂèëÁé∞Âì™Èáå‰∏çÂØπÂ∫îÔºåËØ¥ÊòéÂ∑≤ÁªèË¢´ÁØ°Êîπ‰∫Ü„ÄÇ ‚ÄúCAÊú∫ÊûÑ‚ÄùÂà∂‰ΩúÁ≠æÂêçÁöÑËøáÁ®ãÔºö CAÊã•ÊúâÈùûÂØπÁß∞Âä†ÂØÜÁöÑÁßÅÈí•ÂíåÂÖ¨Èí•„ÄÇ CAÂØπËØÅ‰π¶ÊòéÊñá‰ø°ÊÅØËøõË°åhash„ÄÇ ÂØπhashÂêéÁöÑÂÄºÁî®ÁßÅÈí•Âä†ÂØÜÔºåÂæóÂà∞Êï∞Â≠óÁ≠æÂêç„ÄÇ ÊòéÊñáÂíåÊï∞Â≠óÁ≠æÂêçÂÖ±ÂêåÁªÑÊàê‰∫ÜÊï∞Â≠óËØÅ‰π¶ÔºåËøôÊ†∑‰∏Ä‰ªΩÊï∞Â≠óËØÅ‰π¶Â∞±ÂèØ‰ª•È¢ÅÂèëÁªôÁΩëÁ´ô‰∫Ü„ÄÇÁΩëÁ´ôÊääËøô‰∏™Êï∞Â≠óËØÅ‰π¶‰º†ÁªôÊµèËßàÂô®„ÄÇ ÈÇ£ÊµèËßàÂô®ÊãøÂà∞ÊúçÂä°Âô®‰º†Êù•ÁöÑÊï∞Â≠óËØÅ‰π¶ÂêéÔºåÂ¶Ç‰ΩïÈ™åËØÅÂÆÉÊòØ‰∏çÊòØÁúüÁöÑÔºüÔºàÊúâÊ≤°ÊúâË¢´ÁØ°Êîπ„ÄÅÊéâÂåÖÔºâ ÊµèËßàÂô®È™åËØÅËøáÁ®ãÔºö ÊãøÂà∞ËØÅ‰π¶ÔºåÂæóÂà∞ÊòéÊñáTÔºåÊï∞Â≠óÁ≠æÂêçS„ÄÇ Áî®CAÊú∫ÊûÑÁöÑÂÖ¨Èí•ÂØπSËß£ÂØÜÔºàÁî±‰∫éÊòØÊµèËßàÂô®‰ø°‰ªªÁöÑÊú∫ÊûÑÔºåÊâÄ‰ª•ÊµèËßàÂô®‰øùÊúâÂÆÉÁöÑÂÖ¨Èí•„ÄÇËØ¶ÊÉÖËßÅ‰∏ãÊñáÔºâÔºåÂæóÂà∞S‚Äô„ÄÇ Áî®ËØÅ‰π¶ÈáåËØ¥ÊòéÁöÑhashÁÆóÊ≥ïÂØπÊòéÊñáTËøõË°åhashÂæóÂà∞T‚Äô„ÄÇ ÊØîËæÉS‚ÄôÊòØÂê¶Á≠â‰∫éT‚ÄôÔºåÁ≠â‰∫éÂàôË°®ÊòéËØÅ‰π¶ÂèØ‰ø°„ÄÇ ‰∏∫‰ªÄ‰πàËøôÊ†∑ÂèØ‰ª•ËØÅÊòéËØÅ‰π¶ÂèØ‰ø°Âë¢ÔºüÊàë‰ª¨Êù•‰ªîÁªÜÊÉ≥‰∏Ä‰∏ã„ÄÇ ÂçÅ‰∫å„ÄÅ‰∏≠Èó¥‰∫∫ÊúâÂèØËÉΩÁØ°ÊîπËØ•ËØÅ‰π¶ÂêóÔºü ËÄÅÂ§ßÁà∑Â∞±ÁÆóÊúâÂ§©Â§ßÁöÑËÉΩËÄêÔºå‰πüÊãø‰∏çÂà∞Âä†ÂØÜÁöÑÁßÅÈí•ÔºåÈÇ£‰πàÂè™ÊòØÂçïÁ∫ØÂú∞ÁØ°ÊîπÊòéÊñáÔºåÂè™‰ºöÈÄ†ÊàêÊ†°È™å‰∏çÈÄöËøá„ÄÇ ÂõûÂà∞‰∫íËÅîÁΩëÔºåÂÅáËÆæ‰∏≠Èó¥‰∫∫ÁØ°Êîπ‰∫ÜËØÅ‰π¶ÁöÑÂéüÊñáÔºåÁî±‰∫é‰ªñÊ≤°ÊúâCAÊú∫ÊûÑÁöÑÁßÅÈí•ÔºåÊâÄ‰ª•Êó†Ê≥ïÂæóÂà∞Ê≠§Êó∂Âä†ÂØÜÂêéÁ≠æÂêçÔºåÊó†Ê≥ïÁõ∏Â∫îÂú∞ÁØ°ÊîπÁ≠æÂêç„ÄÇ ÊµèËßàÂô®Êî∂Âà∞ËØ•ËØÅ‰π¶Âêé‰ºöÂèëÁé∞ÂéüÊñáÂíåÁ≠æÂêçËß£ÂØÜÂêéÁöÑÂÄº‰∏ç‰∏ÄËá¥ÔºåÂàôËØ¥ÊòéËØÅ‰π¶Â∑≤Ë¢´ÁØ°ÊîπÔºåËØÅ‰π¶‰∏çÂèØ‰ø°Ôºå‰ªéËÄåÁªàÊ≠¢ÂêëÊúçÂä°Âô®‰º†Ëæì‰ø°ÊÅØÔºåÈò≤Ê≠¢‰ø°ÊÅØÊ≥ÑÈú≤Áªô‰∏≠Èó¥‰∫∫„ÄÇ ÂçÅ‰∏â„ÄÅ‰∏≠Èó¥‰∫∫ÊúâÂèØËÉΩÊääËØÅ‰π¶ÊéâÂåÖÂêóÔºü ÂÅáËÆæÊúâÂè¶‰∏Ä‰∏™ÁΩëÁ´ôB‰πüÊãøÂà∞‰∫ÜCAÊú∫ÊûÑËÆ§ËØÅÁöÑËØÅ‰π¶ÔºåÂÆÉÊÉ≥ÊêûÂûÆÁΩëÁ´ôAÔºåÊÉ≥Âä´ÊåÅÁΩëÁ´ôAÁöÑ‰ø°ÊÅØ„ÄÇ‰∫éÊòØÂÆÉÊàê‰∏∫‰∏≠Èó¥‰∫∫Êã¶Êà™Âà∞‰∫ÜA‰º†ÁªôÊµèËßàÂô®ÁöÑËØÅ‰π¶ÔºåÁÑ∂ÂêéÊõøÊç¢ÊàêËá™Â∑±ÁöÑËØÅ‰π¶Ôºå‰º†ÁªôÊµèËßàÂô®Ôºå‰πãÂêéÊµèËßàÂô®Â∞±‰ºöÈîôËØØÂú∞ÊãøÂà∞BÁöÑËØÅ‰π¶ÈáåÁöÑÂÖ¨Èí•‰∫ÜÔºå‰ºöÂØºËá¥‰∏äÊñáÊèêÂà∞ÁöÑÊºèÊ¥û„ÄÇ ÂÖ∂ÂÆûËøôÂπ∂‰∏ç‰ºöÂèëÁîüÔºåÂõ†‰∏∫ËØÅ‰π¶ÈáåÂåÖÂê´‰∫ÜÁΩëÁ´ôAÁöÑ‰ø°ÊÅØÔºåÂåÖÊã¨ÂüüÂêçÔºåÊµèËßàÂô®ÊääËØÅ‰π¶ÈáåÁöÑÂüüÂêç‰∏éËá™Â∑±ËØ∑Ê±ÇÁöÑÂüüÂêçÊØîÂØπ‰∏Ä‰∏ãÂ∞±Áü•ÈÅìÊúâÊ≤°ÊúâË¢´ÊéâÂåÖ‰∫Ü„ÄÇ ÊÄªÁªìÔºöÂõ†‰∏∫‰∏Ä‰∏™ÁΩëÁ´ôÂüüÂêçÂØπÂ∫î‰∏Ä‰∏™ËØÅ‰π¶Ôºå‰Ω†ÁöÑËØÅ‰π¶Ê†πÂÖ∂‰ªñ‰∫∫ÁöÑËØÅ‰π¶ËÇØÂÆöÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÈÇ£‰πà‰Ω†Â∞±ÁÆóÊãøÂà∞‰∫ÜÂÖ∂‰ªñ‰∫∫ÁöÑËØÅ‰π¶ÂÜçÊéâÂåÖÊàêËá™Â∑±ÁöÑÔºå‰πüÊ≤°Áî®ÔºåÊØïÁ´üÊµèËßàÂô®ÈÇ£ËæπÂè™Ë¶ÅÁúã‰∏Ä‰∏ãÊòØ‰∏çÊòØÊàëË¶ÅÊü•ÁúãÁöÑÂüüÂêç„ÄÇ ÂçÅÂõõ„ÄÅ‰∏∫‰ªÄ‰πàÂà∂‰ΩúÊï∞Â≠óÁ≠æÂêçÊó∂ÈúÄË¶Åhash‰∏ÄÊ¨°Ôºü ÊúÄÊòæÁÑ∂ÁöÑÊòØÊÄßËÉΩÈóÆÈ¢òÔºåÂâçÈù¢Êàë‰ª¨Â∑≤ÁªèËØ¥‰∫ÜÈùûÂØπÁß∞Âä†ÂØÜÊïàÁéáËæÉÂ∑ÆÔºåËØÅ‰π¶‰ø°ÊÅØ‰∏ÄËà¨ËæÉÈïøÔºåÊØîËæÉËÄóÊó∂„ÄÇËÄåhashÂêéÂæóÂà∞ÁöÑÊòØÂõ∫ÂÆöÈïøÂ∫¶ÁöÑ‰ø°ÊÅØÔºàÊØîÂ¶ÇÁî®md5ÁÆóÊ≥ïhashÂêéÂèØ‰ª•ÂæóÂà∞Âõ∫ÂÆöÁöÑ128‰ΩçÁöÑÂÄºÔºâÔºåËøôÊ†∑Âä†ÂØÜËß£ÂØÜÂ∞±‰ºöÂø´ÂæàÂ§ö„ÄÇ ÂçÅ‰∫î„ÄÅÊÄé‰πàËØÅÊòéCAÊú∫ÊûÑÁöÑÂÖ¨Èí•ÊòØÂèØ‰ø°ÁöÑÔºü ËÆ©Êàë‰ª¨ÂõûÊÉ≥‰∏Ä‰∏ãÊï∞Â≠óËØÅ‰π¶Âà∞Â∫ïÊòØÂπ≤Âï•ÁöÑÔºüÊ≤°ÈîôÔºå‰∏∫‰∫ÜËØÅÊòéÊüêÂÖ¨Èí•ÊòØÂèØ‰ø°ÁöÑÔºåÂç≥‚ÄúËØ•ÂÖ¨Èí•ÊòØÂê¶ÂØπÂ∫îËØ•ÁΩëÁ´ô/Êú∫ÊûÑÁ≠â‚ÄùÔºåÈÇ£Ëøô‰∏™CAÊú∫ÊûÑÁöÑÂÖ¨Èí•ÊòØ‰∏çÊòØ‰πüÂèØ‰ª•Áî®Êï∞Â≠óËØÅ‰π¶Êù•ËØÅÊòéÔºüÊ≤°ÈîôÔºåÊìç‰ΩúÁ≥ªÁªü„ÄÅÊµèËßàÂô®Êú¨Ë∫´‰ºöÈ¢ÑË£Ö‰∏Ä‰∫õÂÆÉ‰ª¨‰ø°‰ªªÁöÑÊ†πËØÅ‰π¶ÔºåÂ¶ÇÊûúÂÖ∂‰∏≠ÊúâËØ•CAÊú∫ÊûÑÁöÑÊ†πËØÅ‰π¶ÔºåÈÇ£Â∞±ÂèØ‰ª•ÊãøÂà∞ÂÆÉÂØπÂ∫îÁöÑÂèØ‰ø°ÂÖ¨Èí•‰∫Ü„ÄÇ ÂÆûÈôÖ‰∏äËØÅ‰π¶‰πãÈó¥ÁöÑËÆ§ËØÅ‰πüÂèØ‰ª•‰∏çÊ≠¢‰∏ÄÂ±ÇÔºåÂèØ‰ª•A‰ø°‰ªªBÔºåB‰ø°‰ªªCÔºå‰ª•Ê≠§Á±ªÊé®ÔºåÊàë‰ª¨ÊääÂÆÉÂè´ÂÅö‰ø°‰ªªÈìæÊàñÊï∞Â≠óËØÅ‰π¶ÈìæÔºå‰πüÂ∞±ÊòØ‰∏ÄËøû‰∏≤ÁöÑÊï∞Â≠óËØÅ‰π¶ÔºåÁî±Ê†πËØÅ‰π¶‰∏∫Ëµ∑ÁÇπÔºåÈÄèËøáÂ±ÇÂ±Ç‰ø°‰ªªÔºå‰ΩøÁªàÁ´ØÂÆû‰ΩìËØÅ‰π¶ÁöÑÊåÅÊúâËÄÖÂèØ‰ª•Ëé∑ÂæóËΩ¨ÊéàÁöÑ‰ø°‰ªªÔºå‰ª•ËØÅÊòéË∫´‰ªΩ„ÄÇ Âè¶Â§ñÔºå‰∏çÁü•‰Ω†‰ª¨ÊòØÂê¶ÈÅáÂà∞ËøáÁΩëÁ´ôËÆøÈóÆ‰∏ç‰∫Ü„ÄÅÊèêÁ§∫Ë¶ÅÂÆâË£ÖËØÅ‰π¶ÁöÑÊÉÖÂÜµÔºüËøôÈáåÂÆâË£ÖÁöÑÂ∞±ÊòØÊ†πËØÅ‰π¶„ÄÇËØ¥ÊòéÊµèËßàÂô®‰∏çËÆ§ÁªôËøô‰∏™ÁΩëÁ´ôÈ¢ÅÂèëËØÅ‰π¶ÁöÑÊú∫ÊûÑÔºåÈÇ£‰πàÊ≤°ÊúâËØ•Êú∫ÊûÑÁöÑÊ†πËØÅ‰π¶Ôºå‰Ω†Â∞±ÂæóÊâãÂä®‰∏ãËΩΩÂÆâË£ÖÔºàÈ£éÈô©Ëá™Â∑±ÊâøÊãÖXDÔºâ„ÄÇÂÆâË£ÖËØ•Êú∫ÊûÑÁöÑÊ†πËØÅ‰π¶ÂêéÔºå‰Ω†Â∞±Êúâ‰∫ÜÂÆÉÁöÑÂÖ¨Èí•ÔºåÂ∞±ÂèØ‰ª•Áî®ÂÆÉÈ™åËØÅÊúçÂä°Âô®ÂèëÊù•ÁöÑËØÅ‰π¶ÊòØÂê¶ÂèØ‰ø°‰∫Ü„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÂÖ¨Èí•ÊòØ‰ªéËØÅ‰π¶‰∏≠Ëé∑ÂèñÁöÑ„ÄÇËØÅ‰π¶ÊòØÁΩëÁ´ô‰ªéÊú∫ÊûÑÈÇ£ËæπÁî≥ËØ∑Êù•ÁöÑÔºåËØÅ‰π¶+Á≠æÂêç‰º†ÁªôÊµèËßàÂô®„ÄÇÂè™Ë¶ÅÊ†°È™åÈÄöËøáÔºåÈÇ£‰πàÂÖ¨Èí•ÂøÖÁÑ∂Ê≤°ÊúâË¢´ÁØ°ÊîπËøáÔºåÂπ∂‰∏î‰∏ÄÂÆöÊòØËøô‰∏™ÁΩëÁ´ô‰º†Êù•ÁöÑÔºåÈÇ£‰πàËß£ÂÜ≥‰∫ÜÊàë‰ª¨ÊúÄÊ†∏ÂøÉÁöÑÈóÆÈ¢òÔºöÁ°ÆÂÆöÂÖ¨Èí•ÊòØÊàë‰ª¨ÊåáÂÆöÁöÑÁΩëÁ´ô‰º†Êù•ÁöÑ„ÄÇ Êó¢ÁÑ∂ÂÖ¨Èí•ÊòØÊ≠£Á°ÆÁöÑÔºåÈÇ£‰πàÂ∞èÁ∫¢Â∞±‰ºöÁî®Ê≠£Á°ÆÁöÑÂÖ¨Èí•ÂØπÈöèÊú∫Â≠óÁ¨¶‰∏≤Âä†ÂØÜÔºå‰∏≠Èó¥‰∏ç‰ºöÂá∫Áé∞ÁØ°Êîπ„ÄÇ ÂçÅÂÖ≠„ÄÅHTTPSÂøÖÈ°ªÂú®ÊØèÊ¨°ËØ∑Ê±Ç‰∏≠ÈÉΩË¶ÅÂÖàÂú®SSL/TLSÂ±ÇËøõË°åÊè°Êâã‰º†ËæìÂØÜÈí•ÂêóÔºü Ëøô‰πüÊòØÊàëÂΩìÊó∂ÁöÑÂõ∞ÊÉë‰πã‰∏ÄÔºåÊòæÁÑ∂ÊØèÊ¨°ËØ∑Ê±ÇÈÉΩÁªèÂéÜ‰∏ÄÊ¨°ÂØÜÈí•‰º†ËæìËøáÁ®ãÈùûÂ∏∏ËÄóÊó∂ÔºåÈÇ£ÊÄé‰πàËææÂà∞Âè™‰º†Ëæì‰∏ÄÊ¨°Âë¢ÔºüÁî®sessionÂ∞±Ë°å„ÄÇ ÊúçÂä°Âô®‰ºö‰∏∫ÊØè‰∏™ÊµèËßàÂô®ÔºàÊàñÂÆ¢Êà∑Á´ØËΩØ‰ª∂ÔºâÁª¥Êä§‰∏Ä‰∏™session IDÔºåÂú®TSLÊè°ÊâãÈò∂ÊÆµ‰º†ÁªôÊµèËßàÂô®ÔºåÊµèËßàÂô®ÁîüÊàêÂ•ΩÂØÜÈí•‰º†ÁªôÊúçÂä°Âô®ÂêéÔºåÊúçÂä°Âô®‰ºöÊääËØ•ÂØÜÈí•Â≠òÂà∞Áõ∏Â∫îÁöÑsession ID‰∏ãÔºå‰πãÂêéÊµèËßàÂô®ÊØèÊ¨°ËØ∑Ê±ÇÈÉΩ‰ºöÊê∫Â∏¶session IDÔºåÊúçÂä°Âô®‰ºöÊ†πÊçÆsession IDÊâæÂà∞Áõ∏Â∫îÁöÑÂØÜÈí•Âπ∂ËøõË°åËß£ÂØÜÂä†ÂØÜÊìç‰ΩúÔºåËøôÊ†∑Â∞±‰∏çÂøÖË¶ÅÊØèÊ¨°ÈáçÊñ∞Âà∂‰Ωú„ÄÅ‰º†ËæìÂØÜÈí•‰∫ÜÔºÅ ÂçÅ‰∏É„ÄÅHTTPSÂéüÁêÜ ‰∏ãÈù¢ÂÜçÊù•ÁúãÁúãHTTPSÂéüÁêÜÂ∞±ÁâπÂà´ÁÆÄÂçïÂï¶ÔºÅ HTTPS ÂçèËÆÆÔºàHyperText Transfer Protocol over Secure Socket LayerÔºâÔºöÂèØ‰ª•ÁêÜËß£‰∏∫HTTP+SSL/TLSÔºå Âç≥ HTTP ‰∏ãÂä†ÂÖ• SSL Â±ÇÔºåHTTPS ÁöÑÂÆâÂÖ®Âü∫Á°ÄÊòØ SSLÔºåÂõ†Ê≠§Âä†ÂØÜÁöÑËØ¶ÁªÜÂÜÖÂÆπÂ∞±ÈúÄË¶Å SSLÔºåÁî®‰∫éÂÆâÂÖ®ÁöÑ HTTP Êï∞ÊçÆ‰º†Ëæì„ÄÇ 1234HTTPSSL/TLSTCPIP Êàë‰ª¨Âè™Ë¶ÅÁü•ÈÅìÔºåÂú®SSLÂ±ÇÈáåÈù¢ÂèØ‰ª•ÂÆåÊàêÊ†°È™åÂíåÂØÜÈí•ÁöÑ‰º†Ëæì„ÄÇ ÁêÜËß£‰∫Ü‰∏äÈù¢ÔºåËøô‰∏™Âõæ‰πüÂ∞±Ê≤°Âï•Â•ΩËß£ÈáäÁöÑ‰∫Ü„ÄÇ Êï¥ÁêÜËá™Ôºöhttps://zhuanlan.zhihu.com/p/43789231]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPÂü∫Á°ÄÁü•ËØÜÊèêÁÇº]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F6.HTTP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%8F%90%E7%82%BC%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨ÂÖ≠ÁØáÊñáÁ´†„ÄÇËøôÈáåÁÆÄÂçïËÆ∞ÂΩï‰∏Ä‰∫õÂÖ≥‰∫éHTTPÁöÑÂü∫Êú¨Ê¶ÇÂøµÔºåÊØîËæÉÂü∫Á°Ä„ÄÇ‰∏ãÈù¢ÁöÑÂÜÖÂÆπÊòØÂØπ„ÄäÂõæËß£HTTP„ÄãÊèêÁÇºÁöÑÂÜçÊèêÁÇºÔºå‰∏ªË¶ÅÂéüÂõ†ÊòØÂæàÂ§öÈáçË¶ÅÁöÑ‰∏úË•øÂâçÈù¢Â∑≤ÁªèËØ¶ÁªÜËØ¥Ëøá‰∫ÜÔºåËøòÊúâ‰∏Ä‰∫õ‰∏úË•øÁü•ÈÅìÂç≥ÂèØÔºåÁî®Âà∞ÂÜçÂéªÊü•Ôºå‰Ωú‰∏∫‰∏Ä‰∏™ÂêéÁ´ØÊîªÂüéÁãÆÔºå‰πüÊ≤°ÊúâÂøÖË¶Å‰∫ÜËß£ÈÇ£‰πàÁêêÁ¢é„ÄÇ HTTPÊòØ‰∏ç‰øùÂ≠òÁä∂ÊÄÅÁöÑÂçèËÆÆ HTTPÊòØÊó†Áä∂ÊÄÅÂçèËÆÆ„ÄÇËá™Ë∫´‰∏çÂØπËØ∑Ê±ÇÂíåÂìçÂ∫î‰πãÈó¥ÈÄö‰ø°Áä∂ÊÄÅËøõË°å‰øùÂ≠òÔºàÂç≥‰∏çÂÅöÊåÅ‰πÖÂåñÂ§ÑÁêÜÔºâ„ÄÇ HTTP‰πãÊâÄ‰ª•ËÆæËÆ°ÂæóÂ¶ÇÊ≠§ÁÆÄÂçïÔºåÊòØ‰∏∫‰∫ÜÊõ¥Âø´Âú∞Â§ÑÁêÜÂ§ßÈáè‰∫ãÁâ©ÔºåÁ°Æ‰øùÂçèËÆÆÁöÑÂèØ‰º∏Áº©ÊÄß„ÄÇ HTTP/1.1 ÈöèÊó∂Êó†Áä∂ÊÄÅÂçèËÆÆÔºå‰ΩÜÂèØÈÄöËøá Cookie ÊäÄÊúØ‰øùÂ≠òÁä∂ÊÄÅ„ÄÇ ÂëäÁü•ÊúçÂä°Âô®ÊÑèÂõæÁöÑHTTPÊñπÊ≥ï GETÔºöËé∑ÂèñËµÑÊ∫ê POSTÔºö‰º†ËæìÂÆû‰Ωì‰∏ª‰Ωì PUTÔºö‰º†ËæìÊñá‰ª∂ HEADÔºöËé∑ÂæóÊä•ÊñáÈ¶ñÈÉ®Ôºå‰∏éGETÊñπÊ≥ï‰∏ÄÊ†∑ÔºåÂè™ÊòØ‰∏çËøîÂõûÊä•Êñá‰∏ª‰ΩìÂÜÖÂÆπ„ÄÇÁî®‰∫éÁ°ÆËÆ§URIÁöÑÊúâÊïàÊÄßÂèäËµÑÊ∫êÊõ¥Êñ∞ÁöÑÊó•ÊúüÊó∂Èó¥Á≠â„ÄÇ DELETEÔºöÂà†Èô§Êñá‰ª∂Ôºå‰∏éPUTÁõ∏ÂèçÔºàÂìçÂ∫îËøîÂõû204 No ContentÔºâ„ÄÇ OPTIONSÔºöËØ¢ÈóÆÊîØÊåÅÁöÑÊñπÊ≥ïÔºåÊü•ËØ¢ÈíàÂØπËØ∑Ê±ÇURIÊåáÂÆöÁöÑËµÑÊ∫êÊîØÊåÅÁöÑÊñπÊ≥ïÔºàAllow:GET„ÄÅPOST„ÄÅHEAD„ÄÅOPTIONSÔºâ„ÄÇ TRACEÔºöËøΩË∏™Ë∑ØÂæÑ CONNECTÔºöË¶ÅÊ±ÇÁî®ÈößÈÅìÂçèËÆÆËøûÊé•‰ª£ÁêÜÔºà‰∏ªË¶Å‰ΩøÁî®SSLÔºàSecure Sockets LayerÔºåÂÆâÂÖ®Â•óÊé•Â±ÇÔºâÂíåTLSÔºàTransport Layer SecurityÔºå‰º†ËæìÂ±ÇÂÆâÂÖ®ÔºâÂçèËÆÆÊääÈÄö‰ø°ÂÜÖÂÆπÂä†ÂØÜÂêéÁªèÁΩëÁªúÈößÈÅì‰º†ËæìÔºâ„ÄÇ URI„ÄÅURL ÂÆòÊñπËß£ÈáäÈÉΩÊòØ‰ªÄ‰πà‰π±Ëµ∑ÂÖ´Á≥üÁöÑ‰∏úË•ø„ÄÇÂêÑÁßçÂçöÂÆ¢‰πüÊòØË∑üÁùÄÊäÑÔºåËøô‰∏§ËÄÖÂà∞Â∫ïÊòØ‰ªÄ‰πàÂÖ≥Á≥ªÂíåÊÑè‰πâÔºü Áªü‰∏ÄËµÑÊ∫êÊ†áÂøóÁ¨¶URIÂ∞±ÊòØÂú®Êüê‰∏ÄËßÑÂàô‰∏ãËÉΩÊää‰∏Ä‰∏™ËµÑÊ∫êÁã¨‰∏ÄÊó†‰∫åÂú∞Ê†áËØÜÂá∫Êù•„ÄÇ ÂØπÂ∫î‰∫éÂÆûÈôÖ‰æãÂ≠êÂ∞±ÊòØÔºöÊØè‰∏™‰∫∫ÈÉΩÊúâË∫´‰ªΩËØÅÔºåËøô‰∏™Ë∫´‰ªΩËØÅÂè∑Á†ÅÂ∞±ÂØπÂ∫îËøô‰∏™‰∫∫„ÄÇÊØîÂ¶ÇÂº†‰∏âÁöÑË∫´‰ªΩËØÅÂè∑Á†Å‰∏∫123456ÔºåÈÇ£‰πàÊàëÂè™Ë¶ÅÁü•ÈÅì123456Â∞±ÂèØ‰ª•ÊâæÂà∞Ëøô‰∏™‰∫∫„ÄÇ ÈÇ£‰ªÄ‰πàÊòØURLÂë¢Ôºü‰ªéÂêçÂ≠óÁúãÊòØÔºöÁªü‰∏ÄËµÑÊ∫êÂÆö‰ΩçÂô®„ÄÇ Â¶ÇÊûúÂÅöÁ±ªÊØîÔºåURLÂ∞±ÊòØÔºöÂä®Áâ©‰ΩèÂùÄÂçèËÆÆ://Âú∞ÁêÉ/‰∏≠ÂõΩ/ÊµôÊ±üÁúÅ/Êù≠Â∑ûÂ∏Ç/Ë•øÊπñÂå∫/ÊüêÂ§ßÂ≠¶/14Âè∑ÂÆøËàçÊ•º/525Âè∑ÂØù/Âº†‰∏â.‰∫∫ Êàë‰ª¨ÈÄöËøáËøô‰∏™ËØ¶ÁªÜÁöÑÂú∞ÂùÄ‰πüÂèØ‰ª•ÊâæÂà∞Âº†‰∏âËøô‰∏™‰∫∫„ÄÇ ÈÇ£‰πà‰ªñ‰ª¨‰ø©Âà∞Â∫ïÊòØ‰ªÄ‰πàÂÖ≥Á≥ªÂë¢Ôºü URIÊòØ‰ª•ÊüêÁßçËßÑÂàôÂîØ‰∏ÄÂú∞Ê†áËØÜËµÑÊ∫êÔºåÊâãÊÆµ‰∏çÈôêÔºåÊØîÂ¶ÇË∫´‰ªΩËØÅÂè∑„ÄÇÂΩìÁÑ∂‰∫ÜÔºåÂú∞ÂùÄÂèØ‰ª•ÂîØ‰∏ÄÊ†áËØÜÔºåÈÇ£‰πà‰πüÂ±û‰∫éURIÁöÑ‰∏ÄÁßçÊâãÊÆµ„ÄÇÊâÄ‰ª•ËØ¥URLÊòØURIÁöÑÂ≠êÈõÜ„ÄÇ ÂõûÂà∞Web‰∏äÔºåÂÅáËÆæÊâÄÊúâÁöÑHtmlÊñáÊ°£ÈÉΩÊúâÂîØ‰∏ÄÁöÑÁºñÂè∑ÔºåËÆ∞‰Ωúhtml:xxxxxÔºåxxxxxÊòØ‰∏Ä‰∏≤Êï∞Â≠óÔºåÂç≥HtmlÊñáÊ°£ÁöÑË∫´‰ªΩËØÅÂè∑Á†ÅÔºåËøô‰∏™ËÉΩÂîØ‰∏ÄÊ†áËØÜ‰∏Ä‰∏™HtmlÊñáÊ°£ÔºåÈÇ£‰πàËøô‰∏™Âè∑Á†ÅÂ∞±ÊòØ‰∏Ä‰∏™URI„ÄÇ ËÄåURLÂàôÈÄöËøáÊèèËø∞ÊòØÂì™‰∏™‰∏ªÊú∫‰∏äÂì™‰∏™Ë∑ØÂæÑ‰∏äÁöÑÊñá‰ª∂Êù•ÂîØ‰∏ÄÁ°ÆÂÆö‰∏Ä‰∏™ËµÑÊ∫êÔºå‰πüÂ∞±ÊòØÂÆö‰ΩçÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÁöÑURI„ÄÇ ÂØπ‰∫éÁé∞Âú®ÁΩëÂùÄÊàëÊõ¥ÂÄæÂêë‰∫éÂè´ÂÆÉURLÔºåÊØïÁ´üÂÆÉÊèê‰æõ‰∫ÜËµÑÊ∫êÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÂ¶ÇÊûúÊúâ‰∏ÄÂ§©ÁΩëÂùÄÈÄöËøáÂè∑Á†ÅÊù•Ê†áËØÜÂèòÊàê‰∫Ühttp://741236985.htmlÔºåÈÇ£ÊÑüËßâÂè´ÊàêURIÊõ¥‰∏∫ÂêàÈÄÇ„ÄÇ HTTPËØ∑Ê±ÇÊä•Êñá ËøîÂõûÁªìÊûúÁöÑHTTPÁä∂ÊÄÅÁ†Å Áä∂ÊÄÅÁ†ÅÁöÑËÅåË¥£ÊòØÂΩìÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®Á´ØÂèëÈÄÅËØ∑Ê±ÇÊó∂ÔºåÊèèËø∞ËøîÂõûÁöÑËØ∑Ê±ÇÁªìÊûú„ÄÇ Áä∂ÊÄÅÁ†ÅÂ¶Ç200 OKÔºå‰ª•3‰∏∫Êï∞Â≠óÂíåÂéüÂõ†Áü≠ËØ≠ÁªÑÊàê„ÄÇ Êï∞Â≠ó‰∏≠ÁöÑÁ¨¨‰∏Ä‰ΩçÂÆö‰πâ‰∫ÜÂìçÂ∫îÁ±ªÂà´ÔºåÂêé‰∏§‰ΩçÊó†ÂàÜÁ±ª„ÄÇÂìçÂ∫îÁ±ªÂà´Êúâ‰ª•‰∏ã‰∫îÁßçÔºö Á±ªÂà´ ÂéüÂõ†Áü≠ËØ≠ 1XX Informational(‰ø°ÊÅØÊÄßÁä∂ÊÄÅÁ†Å) 2XX SuccessÔºàÊàêÂäüÁä∂ÊÄÅÁ†ÅÔºâ 3XX RedirectionÔºàÈáçÂÆöÂêëÁä∂ÊÄÅÁ†ÅÔºâ 4XX Client ErrorÔºàÂÆ¢Êà∑Á´ØÈîôËØØÁä∂ÊÄÅÁ†ÅÔºâ 5XX Server ErrorÔºàÊúçÂä°Âô®ÈîôËØØÁä∂ÊÄÅÁ†ÅÔºâ ‚≠ê2XX ÊàêÂäü 200 OKÔºöËØ∑Ê±ÇË¢´Ê≠£Â∏∏Â§ÑÁêÜ 204 No ContentÔºö‰∏ÄËà¨Âú®Âè™ÈúÄ‰ªéÂÆ¢Êà∑Á´ØÂæÄÊúçÂä°Âô®ÂèëÈÄÅ‰ø°ÊÅØÔºåËÄåÂØπÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅÂèëÈÄÅÊñ∞‰ø°ÊÅØÂÜÖÂÆπÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®„ÄÇ 206 Partial ContentÔºöÂÆ¢Êà∑Á´ØËøõË°åËåÉÂõ¥ËØ∑Ê±Ç ‚≠ê3XX ÈáçÂÆöÂêë 301 Moved PermanentlyÔºöÊ∞∏‰πÖÈáçÂÆöÂêë„ÄÇË°®Á§∫ËØ∑Ê±ÇÁöÑËµÑÊ∫êÂ∑≤Ë¢´ÂàÜÈÖç‰∫ÜÊñ∞ÁöÑURIÔºå‰ª•ÂêéÂ∫î‰ΩøÁî®ËµÑÊ∫êÁé∞Âú®ÊâÄÊåáÁöÑURI„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊääËµÑÊ∫êÂØπÂ∫îÁöÑURI‰øùÂ≠ò‰∏∫‰π¶Á≠æ‰∫ÜÔºåËøôÊó∂Â∫îËØ•ÊåâLocationÈ¶ñÈÉ®Â≠óÊÆµÊèêÁ§∫ÁöÑURIÈáçÊñ∞‰øùÂ≠ò„ÄÇ 302 FoundÔºö‰∏¥Êó∂ÊÄßÈáçÂÆöÂêë„ÄÇË°®Á§∫ËØ∑Ê±ÇÁöÑËµÑÊ∫êÂ∑≤Ë¢´ÂàÜÈÖç‰∫ÜÊñ∞ÁöÑURIÔºåÂ∏åÊúõÁî®Êà∑ÔºàÊú¨Ê¨°ÔºâËÉΩ‰ΩøÁî®Êñ∞ÁöÑURIËÆøÈóÆ„ÄÇ Âíå301 Moved PermanentlyÁä∂ÊÄÅÁ†ÅÁõ∏‰ººÔºå‰ΩÜ302Áä∂ÊÄÅÁ†Å‰ª£Ë°®ÁöÑËµÑÊ∫ê‰∏çÊòØË¢´Ê∞∏‰πÖÁßªÂä®ÔºåÂè™ÊòØ‰∏¥Êó∂ÊÄßË¥®ÁöÑ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂ∑≤ÁßªÂä®ÁöÑËµÑÊ∫êÂØπÂ∫îÁöÑURIÂ∞ÜÊù•ËøòÊúâÂèØËÉΩÂèëÁîüÊîπÂèò„ÄÇÊØîÂ¶ÇÔºåÁî®Êà∑ÊääURI‰øùÂ≠òÊàê‰π¶Á≠æÔºå‰ΩÜ‰∏ç‰ºöÂÉè301Áä∂ÊÄÅÁ†ÅÂá∫Áé∞Êó∂ÈÇ£Ê†∑ÂéªÊõ¥Êñ∞‰π¶Á≠æÔºåËÄåÊòØ‰ªçÊóß‰øùÁïôËøîÂõû302Áä∂ÊÄÅÁ†ÅÁöÑÈ°µÈù¢ÂØπÂ∫îÁöÑURIÔºàÂú®Chrome‰∏≠ÔºåËøòÊòØ‰ºö‰øùÂ≠ò‰∏∫ÈáçÂÆöÂêëÂêéÁöÑURIÔºå‰∏çËß£Ôºâ„ÄÇ 303 See OtherÔºöË°®Á§∫Áî±‰∫éËØ∑Ê±ÇÂØπÂ∫îÁöÑËµÑÊ∫êÂ≠òÂú®ÁùÄÂè¶‰∏Ä‰∏™URIÔºåÂ∫î‰ΩøÁî®GETÊñπÊ≥ïÂÆöÂêëËé∑ÂèñËØ∑Ê±ÇÁöÑËµÑÊ∫ê„ÄÇËøô‰∏é302Á±ª‰ººÔºå‰ΩÜ303ÊòéÁ°ÆË°®Á§∫ÂÆ¢Êà∑Á´ØÂ∫îÂΩìÈááÁî®GETÊñπÊ≥ïËé∑ÂèñËµÑÊ∫ê„ÄÇ 304 Not ModifiedÔºöËØ•Áä∂ÊÄÅÁ†ÅË°®Á§∫ÂÆ¢Êà∑Á´ØÂèëÈÄÅÈôÑÂ∏¶Êù°‰ª∂ÁöÑËØ∑Ê±ÇÔºàÊåáÈááÁî®GETÊñπÊ≥ïÁöÑËØ∑Ê±ÇÊä•Êñá‰∏≠ÂåÖÂê´If-Match,If-Modified-SinceÔºåIf-None-MarchÔºåIf-RangeÔºåIf-Unmodified-Since‰∏≠‰ªª‰∏ÄÈ¶ñÈÉ®„ÄÇÔºâÊó∂ÔºåÊúçÂä°Âô®Á´ØÂÖÅËÆ∏ËØ∑Ê±ÇËÆøÈóÆËµÑÊ∫êÔºå‰ΩÜÂõ†ÂèëÁîüËØ∑Ê±Ç‰∏∫Êª°Ë∂≥Êù°‰ª∂ÁöÑÊÉÖÂÜµÂêéÔºåÁõ¥Êé•ËøîÂõû304ÔºàÊúçÂä°Âô®Á´ØËµÑÊ∫êÊú™ÊîπÂèòÔºåÂèØÁõ¥Êé•‰ΩøÁî®ÂÆ¢Êà∑Á´ØÊú™ËøáÊúüÁöÑÁºìÂ≠òÔºâ„ÄÇ304Áä∂ÊÄÅÁ†ÅËøîÂõûÊó∂Ôºå‰∏çÂåÖÂê´‰ªª‰ΩïÂìçÂ∫îÁöÑ‰∏ª‰ΩìÈÉ®ÂàÜ„ÄÇ 304ËôΩË¢´ÂàíÂàÜÂú®3XXÁ±ªÂà´Ôºå‰ΩÜÊòØÂíåÈáçÂÆöÂêëÊ≤°ÊúâÂÖ≥Á≥ª„ÄÇ 307 Temporary RedirectÔºö‰∏¥Êó∂ÈáçÂÆöÂêë„ÄÇ‰∏é302ÊúâÁõ∏ÂêåÂê´‰πâ„ÄÇ307ÈÅµÂÆàÊµèËßàÂô®Ê†áÂáÜÔºå‰∏ç‰ºö‰ªéPOSTÂèòÊàêGET„ÄÇ ‚≠ê4XX ÂÆ¢Êà∑Á´ØÈîôËØØ 4XXÁöÑÂìçÂ∫îÁªìÊûúË°®ÊòéÂÆ¢Êà∑Á´ØÊòØÂèëÁîüÈîôËØØÁöÑÂéüÂõ†ÊâÄÂú®„ÄÇ 400 Bad RequestÔºöË°®Á§∫ËØ∑Ê±ÇÊä•Êñá‰∏≠Â≠òÂú®ËØ≠Ê≥ïÈîôËØØ„ÄÇ 401 UnauthorizedÔºöË°®Á§∫ÂèëÈÄÅÁöÑËØ∑Ê±ÇÈúÄË¶ÅÊúâÈÄöËøáHTTPËÆ§ËØÅÔºàBASICËÆ§ËØÅ„ÄÅDIGESTËÆ§ËØÅÔºâÁöÑËÆ§ËØÅ‰ø°ÊÅØ„ÄÇ 403 ForbiddenÔºöË°®ÊòéÂØπËØ∑Ê±ÇËµÑÊ∫êÁöÑËÆøÈóÆË¢´ÊúçÂä°Âô®ÊãíÁªù‰∫Ü„ÄÇÊúçÂä°Âô®Á´ØÂèØÂú®ÂÆû‰ΩìÁöÑ‰∏ª‰ΩìÈÉ®ÂàÜÂØπÂéüÂõ†ËøõË°åÊèèËø∞ÔºàÂèØÈÄâÔºâ 404 Not FoundÔºöË°®ÊòéÊúçÂä°Âô®‰∏äÊó†Ê≥ïÊâæÂà∞ËØ∑Ê±ÇÁöÑËµÑÊ∫ê„ÄÇÈô§Ê≠§‰πãÂ§ñÔºå‰πüÂèØ‰ª•Âú®ÊúçÂä°Âô®Á´ØÊãíÁªùËØ∑Ê±Ç‰∏î‰∏çÊÉ≥ËØ¥ÊòéÁêÜÁî±Êó∂Êó∂Áî®„ÄÇ ‚≠ê5XX ÊúçÂä°Âô®ÈîôËØØ 5XXÁöÑÂìçÂ∫îÁªìÊûúË°®ÊòéÊúçÂä°Âô®Êú¨Ë∫´ÂèëÁîüÈîôËØØ„ÄÇ 500 Interval Server ErrorÔºöË°®ÊòéÊúçÂä°Âô®Á´ØÂú®ÊâßË°åËØ∑Ê±ÇÊó∂ÂèëÁîü‰∫ÜÈîôËØØ„ÄÇ‰πüÊúâÂèØËÉΩÊòØWebÂ∫îÁî®Â≠òÂú®ÁöÑbugÊàñÊüê‰∫õ‰∏¥Êó∂ÁöÑÊïÖÈöú„ÄÇ 503 Service UnavailableÔºöË°®ÊòéÊúçÂä°Âô®ÊöÇÊó∂Â§Ñ‰∫éË∂ÖË¥üËΩΩÊàñÊ≠£Âú®ËøõË°åÂÅúÊú∫Áª¥Êä§ÔºåÁé∞Âú®Êó†Ê≥ïÂ§ÑÁêÜËØ∑Ê±Ç„ÄÇÂ¶ÇÊûú‰∫ãÂÖàÂæóÁü•Ëß£Èô§‰ª•‰∏äÁä∂ÂÜµÈúÄË¶ÅÁöÑÊó∂Èó¥ÔºåÊúÄÂ•ΩÂÜôÂÖ•Retry-AfterÈ¶ñÈÉ®Â≠óÊÆµÂÜçËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ HTTPÁöÑÁì∂È¢à ‰∏ÄÊù°ËøûÊé•‰∏äÂè™ÂèØÂèëÈÄÅ‰∏Ä‰∏™ËØ∑Ê±ÇÔºàÂâçÈù¢ËÆ≤Âà∞ÔºåÊåÅ‰πÖÂåñÂèØ‰øùÊåÅTCPËøûÊé•Áä∂ÊÄÅÔºå‰ΩÜ‰ªçÂÆåÊàê‰∏ÄÊ¨°ËØ∑Ê±Ç/ÂìçÂ∫îÂêéÊâçËÉΩËøõË°å‰∏ã‰∏ÄÊ¨°ËØ∑Ê±Ç/ÂìçÂ∫îÔºåËÄåÁÆ°Á∫øÂåñÊñπÂºèÂèØËÆ©‰∏Ä‰∏™TCPËøûÊé•Âπ∂Ë°åÂèëÈÄÅÂ§ö‰∏™ËØ∑Ê±Ç„ÄÇÔºâ ËØ∑Ê±ÇÂè™ËÉΩ‰ªéÂÆ¢Êà∑Á´ØÂºÄÂßã„ÄÇÂÆ¢Êà∑Á´Ø‰∏çÂèØ‰ª•Êé•Êî∂Èô§ÂìçÂ∫î‰ª•Â§ñÁöÑÊåá‰ª§ ËØ∑Ê±Ç/ÂìçÂ∫îÈ¶ñÈÉ®Êú™ÁªèÂéãÁº©Â∞±ÂèëÈÄÅ„ÄÇÈ¶ñÈÉ®‰ø°ÊÅØË∂äÂ§öÂª∂ËøüË∂äÂ§ß ÂèëÈÄÅÂÜóÈïø(ÈáçÂ§ç)ÁöÑÈ¶ñÈÉ®„ÄÇÊØèÊ¨°‰∫íÁõ∏ÂèëÈÄÅÁõ∏ÂêåÁöÑÈ¶ñÈÉ®ÈÄ†ÊàêÁöÑÊµ™Ë¥πËæÉÂ§ö SPDY‰ª•‰ºöËØùÂ±ÇÁöÑÂΩ¢ÂºèÂä†ÂÖ•ÔºåÊéßÂà∂ÂØπÊï∞ÊçÆÁöÑÊµÅÂä®Ôºå‰ΩÜËøòÊòØÈááÁî®HTTPÂª∫Á´ãÈÄö‰ø°ËøûÊé•„ÄÇÂõ†Ê≠§ÔºåÂèØÁÖßÂ∏∏‰ΩøÁî®HTTPÁöÑGETÂíåPOSTÁ≠âÊñπÊ≥ï„ÄÅCookie‰ª•ÂèäHTTPÊä•ÊñáÁ≠â„ÄÇ ‰ΩøÁî® SPDYÂêéÔºåHTTPÂçèËÆÆÈ¢ùÂ§ñËé∑Âæó‰ª•‰∏ãÂäüËÉΩ„ÄÇ Â§öË∑ØÂ§çÁî®ÊµÅÔºöÈÄöËøáÂçï‰∏ÄÁöÑTCPËøûÊé•ÔºåÂèØ‰ª•Êó†ÈôêÂà∂Â§ÑÁêÜÂ§ö‰∏™HTTPËØ∑Ê±Ç„ÄÇÊâÄÊúâËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÉΩÂú®‰∏ÄÊù°TCPËøûÊé•‰∏äÂÆåÊàêÔºåÂõ†Ê≠§TCPÁöÑÂ§ÑÁêÜÊïàÁéáÂæóÂà∞ÊèêÈ´ò„ÄÇ Ëµã‰∫àËØ∑Ê±Ç‰ºòÂÖàÁ∫ßÔºöSPDY‰∏ç‰ªÖÂèØ‰ª•Êó†ÈôêÂà∂Âú∞Âπ∂ÂèëÂ§ÑÁêÜËØ∑Ê±ÇÔºåËøòÂèØ‰ª•ÁªôËØ∑Ê±ÇÈÄê‰∏™ÂàÜÈÖç‰ºòÂÖàÁ∫ßÈ°∫Â∫è„ÄÇËøôÊ†∑‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂú®ÂèëÈÄÅÂ§ö‰∏™ËØ∑Ê±ÇÊó∂ÔºåËß£ÂÜ≥Âõ†Â∏¶ÂÆΩ‰ΩéËÄåÂØºËá¥ÂìçÂ∫îÂèòÊÖ¢ÁöÑÈóÆÈ¢ò„ÄÇ ÂéãÁº©HTTPÈ¶ñÈÉ®ÔºöÂéãÁº©HTTPËØ∑Ê±ÇÂíåÂìçÂ∫îÁöÑÈ¶ñÈÉ®„ÄÇ Êé®ÈÄÅÂäüËÉΩÔºöÊîØÊåÅÊúçÂä°Âô®‰∏ªÂä®ÂêëÂÆ¢Êà∑Á´ØÊé®ÈÄÅÊï∞ÊçÆÁöÑÂäüËÉΩ„ÄÇ ÊúçÂä°Âô®ÊèêÁ§∫ÂäüËÉΩÔºöÊúçÂä°Âô®ÂèØ‰ª•‰∏ªÂä®ÊèêÁ§∫ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÊâÄÈúÄÁöÑËµÑÊ∫ê„ÄÇÁî±‰∫éÂú®ÂÆ¢Êà∑Á´ØÂèëÁé∞ËµÑÊ∫ê‰πãÂâçÂ∞±ÂèØ‰ª•Ëé∑Áü•ËµÑÊ∫êÁöÑÂ≠òÂú®ÔºåÂõ†Ê≠§Âú®ËµÑÊ∫êÂ∑≤ÁºìÂ≠òÁ≠âÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÈÅøÂÖçÂèëÈÄÅ‰∏çÂøÖË¶ÅÁöÑËØ∑Ê±Ç„ÄÇ WebSocket Âà©Áî®AjaxÂíåCometÊäÄÊúØËøõË°åÈÄö‰ø°ÂèØ‰ª•ÊèêÂçáWebÁöÑÊµèËßàÈÄüÂ∫¶„ÄÇ‰ΩÜÈóÆÈ¢òÂú®‰∫éÈÄö‰ø°Ëã•‰ΩøÁî®HTTPÂçèËÆÆÔºåÂ∞±Êó†Ê≥ïÂΩªÂ∫ïËß£ÂÜ≥Áì∂È¢àÈóÆÈ¢ò„ÄÇ WebSocketÊäÄÊúØ‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜËß£ÂÜ≥AjaxÂíåCometÈáåXMLHttpRequstÈôÑÂ∏¶ÁöÑÁº∫Èô∑ÊâÄÂºïËµ∑ÁöÑÈóÆÈ¢ò„ÄÇ ‰∏ÄÊó¶WebÊúçÂä°Âô®‰∏éÂÆ¢Êà∑Á´Ø‰πãÈó¥Âª∫Á´ãËµ∑WebSocketÂçèËÆÆÁöÑÈÄö‰ø°ËøûÊé•Ôºå‰πãÂêéÊâÄÊúâÁöÑÈÄö‰ø°ÈÉΩ‰æùÈù†Ëøô‰∏™‰∏ìÁî®ÂçèËÆÆËøõË°å„ÄÇÈÄö‰ø°ËøáÁ®ã‰∏≠ÂèØ‰∫íÁõ∏ÂèëÈÄÅJSON„ÄÅXML„ÄÅHTMLÊàñÂõæÁâáÁ≠â‰ªªÊÑèÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇ WebSocketÁöÑ‰∏ªË¶ÅÁâπÁÇπÔºö Êé®ÈÄÅÂäüËÉΩÔºöÊîØÊåÅÁî±ÊúçÂä°Âô®ÂêëÂÆ¢Êà∑Á´ØÊé®ÈÄÅÊï∞ÊçÆ„ÄÇ ÂáèÂ∞ëÈÄö‰ø°ÈáèÔºöÂíåHTTPÁõ∏ÊØîÔºå‰∏ç‰ΩÜÊØèÊ¨°ËøûÊé•Êó∂ÁöÑÊÄªÂºÄÈîÄÂáèÂ∞ëÔºåËÄå‰∏îÁî±‰∫éWebSocketÁöÑÈ¶ñÈÉ®‰ø°ÊÅØÂæàÂ∞èÔºåÈÄö‰ø°Èáè‰πüÁõ∏Â∫îËæÉÂ∞ë„ÄÇ ‰∏∫‰∫ÜÂÆûÁé∞WebSocketÈÄö‰ø°ÔºåÂú®HTTPËøûÊé•Âª∫Á´ã‰πãÂêéÔºåÈúÄË¶ÅÂÆåÊàê‰∏ÄÊ¨°‚ÄúÊè°Êâã‚ÄùÁöÑÊ≠•È™§„ÄÇ Êè°Êâã¬∑ËØ∑Ê±ÇÔºö‰∏∫‰∫ÜÂÆûÁé∞WebSocketÈÄö‰ø°ÔºåÈúÄË¶ÅÁî®Âà∞HTTPÁöÑUpgradeÈ¶ñÈÉ®Â≠óÊÆµÔºåÂëäÁü•ÊúçÂä°Âô®ÈÄö‰ø°ÂçèËÆÆÂèëÁîüÊîπÂèòÔºå‰ª•ËææÂà∞Êè°ÊâãÁöÑÁõÆÁöÑ„ÄÇ Êè°Êâã¬∑ÂìçÂ∫îÔºöÂØπ‰∫é‰πãÂâçÁöÑËØ∑Ê±ÇÔºåËøîÂõûÁä∂ÊÄÅÁ†Å101 Switching Protocols ÁöÑÂìçÂ∫î„ÄÇ ÊàêÂäüÊè°ÊâãÁ°ÆÁ´ãWebSocketËøûÊé•ÂêéÔºåÈÄö‰ø°Êó∂‰∏çÂÜç‰ΩøÁî®HTTPÁöÑÊï∞ÊçÆÂ∏ßÔºåËÄåÈááÁî®WebSocketÁã¨Á´ãÁöÑÊï∞ÊçÆÂ∏ß„ÄÇ Áî±‰∫éÊòØÂª∫Á´ãÂú®HTTPÂü∫Á°Ä‰∏äÁöÑÂçèËÆÆÔºåÂõ†Ê≠§ËøûÊé•ÁöÑÂèëËµ∑Êñπ‰ªçÊòØÂÆ¢Êà∑Á´ØÔºåËÄå‰∏ÄÊó¶Á°ÆÁ´ãWebSocketÈÄö‰ø°ËøûÊé•Ôºå‰∏çËÆ∫ÊúçÂä°Âô®Á´ØËøòÊòØÂÆ¢Êà∑Á´ØÔºå‰ªªÊÑè‰∏ÄÊñπÈÉΩÂèØÁõ¥Êé•ÂêëÂØπÊñπÂèëÈÄÅÊä•Êñá„ÄÇ Êï¥ÁêÜËá™Ôºöhttps://github.com/JChehe/blog/blob/master/posts/„ÄäÂõæËß£HTTP„ÄãËØª‰π¶Á¨îËÆ∞.md]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCP‰∏âÊ¨°Êè°ÊâãÂíåÂõõÊ¨°Êå•Êâã]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F5.TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨‰∫îÁØáÊñáÁ´†„ÄÇÈù¢ËØïËÆ≤Âà∞TCPÔºåÈÇ£‰πàÂü∫Êú¨ÈÉΩ‰ºöÈóÆ‰∏âÊ¨°Êè°ÊâãÂíåÂõõÊ¨°Êå•ÊâãÁöÑËøáÁ®ãÔºå‰ª•ÂèäÊØîÂ¶ÇÂØπ‰∫éÊè°ÊâãÔºå‰∏∫‰ªÄ‰πàÊòØ‰∏âÊ¨°ÔºåËÄå‰∏çÊòØ‰∏§Ê¨°ÊàñËÄÖÂõõÊ¨°ÔºåÊú¨Á´†ËØ¶ÁªÜÊé¢ËÆ®ÂÖ∂‰∏≠ÁöÑÈó®ÈÅì„ÄÇ 1.Â§ç‰π† È¶ñÂÖàÈíàÂØπhttpÂçèËÆÆÔºåÊàë‰ª¨ÊúâÂøÖË¶ÅÂ§ç‰π†‰∏Ä‰∏ãÊúÄÈáçË¶ÅÁöÑ‰∏úË•ø„ÄÇ HTTPÂçèËÆÆÂç≥Ë∂ÖÊñáÊú¨‰º†ÈÄÅÂçèËÆÆ(Hypertext Transfer Protocol )ÔºåÊòØWebËÅîÁΩëÁöÑÂü∫Á°ÄÔºå‰πüÊòØÊâãÊú∫ËÅîÁΩëÂ∏∏Áî®ÁöÑÂçèËÆÆ‰πã‰∏ÄÔºåHTTPÂçèËÆÆÊòØÂª∫Á´ãÂú®TCPÂçèËÆÆ‰πã‰∏äÁöÑ‰∏ÄÁßçÂ∫îÁî®„ÄÇ Âú®HTTP 1.0‰ª•0.9ÁâàÊú¨‰∏≠ÔºåÂÆ¢Êà∑Á´ØÁöÑÊØèÊ¨°ËØ∑Ê±ÇÈÉΩË¶ÅÊ±ÇÂª∫Á´ã‰∏ÄÊ¨°ÂçïÁã¨ÁöÑËøûÊé•ÔºåÂú®Â§ÑÁêÜÂÆåÊú¨Ê¨°ËØ∑Ê±ÇÂêéÔºåÂ∞±Ëá™Âä®ÈáäÊîæËøûÊé•„ÄÇ Âú®HTTP 1.1‰∏≠ÂàôÂèØ‰ª•Âú®‰∏ÄÊ¨°ËøûÊé•‰∏≠Â§ÑÁêÜÂ§ö‰∏™ËØ∑Ê±ÇÔºåÂπ∂‰∏îÂ§ö‰∏™ËØ∑Ê±ÇÂèØ‰ª•ÈáçÂè†ËøõË°åÔºå‰∏çÈúÄË¶ÅÁ≠âÂæÖ‰∏Ä‰∏™ËØ∑Ê±ÇÁªìÊùüÂêéÂÜçÂèëÈÄÅ‰∏ã‰∏Ä‰∏™ËØ∑Ê±Ç„ÄÇ Áî±‰∫éHTTPÂú®ÊØèÊ¨°ËØ∑Ê±ÇÁªìÊùüÂêéÈÉΩ‰ºö‰∏ªÂä®ÈáäÊîæËøûÊé•ÔºåÂõ†Ê≠§HTTPËøûÊé•ÊòØ‰∏ÄÁßç‚ÄúÁü≠ËøûÊé•‚ÄùÔºåË¶Å‰øùÊåÅÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁöÑÂú®Á∫øÁä∂ÊÄÅÔºåÈúÄË¶Å‰∏çÊñ≠Âú∞ÂêëÊúçÂä°Âô®ÂèëËµ∑ËøûÊé•ËØ∑Ê±Ç„ÄÇ ÈÄöÂ∏∏ÁöÑÂÅöÊ≥ïÊòØÂç≥‰Ωø‰∏çÈúÄË¶ÅËé∑Âæó‰ªª‰ΩïÊï∞ÊçÆÔºåÂÆ¢Êà∑Á´Ø‰πü‰øùÊåÅÊØèÈöî‰∏ÄÊÆµÂõ∫ÂÆöÁöÑÊó∂Èó¥ÂêëÊúçÂä°Âô®ÂèëÈÄÅ‰∏ÄÊ¨°‚Äú‰øùÊåÅËøûÊé•‚ÄùÁöÑËØ∑Ê±ÇÔºåÊúçÂä°Âô®Âú®Êî∂Âà∞ËØ•ËØ∑Ê±ÇÂêéÂØπÂÆ¢Êà∑Á´ØËøõË°åÂõûÂ§çÔºåË°®ÊòéÁü•ÈÅì ÂÆ¢Êà∑Á´Ø‚ÄúÂú®Á∫ø‚Äù„ÄÇ Ëã•ÊúçÂä°Âô®ÈïøÊó∂Èó¥Êó†Ê≥ïÊî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÂàôËÆ§‰∏∫ÂÆ¢Êà∑Á´Ø‚Äú‰∏ãÁ∫ø‚ÄùÔºåËã•ÂÆ¢Êà∑Á´ØÈïøÊó∂Èó¥Êó†Ê≥ïÊî∂Âà∞ÊúçÂä°Âô®ÁöÑÂõûÂ§çÔºåÂàôËÆ§‰∏∫ÁΩëÁªúÂ∑≤ÁªèÊñ≠ÂºÄ„ÄÇ 2.SOCKETÂéüÁêÜ 2.1 Â•óÊé•Â≠óÔºàsocketÔºâÊ¶ÇÂøµ ÂàùÊ¨°Êé•Ëß¶Ëøô‰∏™ÂêçËØçÔºö‚ÄúÂ•óÊé•Â≠ó‚ÄùÔºåËØ¥ÂÆûËØùÔºåÂøÉÈáåÊòØËíôËîΩÁöÑÔºåËøôÊòØÂï•Áé©ÊÑèÔºå‰ΩÜÊòØÂèØ‰ª•ÂéªÊêúÁ¥¢‰∏Ä‰∏ã‰ªÄ‰πàÊòØÂ•óÊé•ÁÆ°Ôºö Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫Êù•Ôºå‰∏§‰∏™ÁÆ°Â≠êÂèØËÉΩÁõ¥Êé•ËøûÁöÑËØùËøû‰∏çËµ∑Êù•ÔºåÈÇ£‰πàÂèØ‰ª•ÈÄöËøá‰∏≠Èó¥‰∏Ä‰∏™‰∏úË•øËøûÊé•Ëµ∑Êù•„ÄÇ ÈÇ£‰πàÔºåÁé∞Âú®Â∞±Â•ΩÁêÜËß£‰∫ÜÔºå‰∏§‰∏™Á®ãÂ∫èË¶ÅÈÄö‰ø°ÔºåÈúÄË¶ÅÁü•ÈÅìÂØπÊñπÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºöËøûÊé•‰ΩøÁî®ÁöÑÂçèËÆÆÔºåÊú¨Âú∞‰∏ªÊú∫ÁöÑIPÂú∞ÂùÄÔºåÊú¨Âú∞ËøõÁ®ãÁöÑÂçèËÆÆÁ´ØÂè£ÔºåËøúÂú∞‰∏ªÊú∫ÁöÑIPÂú∞ÂùÄÔºåËøúÂú∞ËøõÁ®ãÁöÑÂçèËÆÆÁ´ØÂè£„ÄÇ ÂÆÉÊòØ‰ªÄ‰πàÂë¢ÔºüÂÆÉÊòØÁΩëÁªúÈÄö‰ø°ËøáÁ®ã‰∏≠Á´ØÁÇπÁöÑÊäΩË±°Ë°®Á§∫ÔºåËøô‰∏™ÊäΩË±°ÈáåÈù¢Â∞±ÂåÖÂê´‰∫ÜÁΩëÁªúÈÄö‰ø°ÂøÖÈ°ªÁöÑ‰∫îÁßç‰ø°ÊÅØÔºöËøûÊé•‰ΩøÁî®ÁöÑÂçèËÆÆÔºåÊú¨Âú∞‰∏ªÊú∫ÁöÑIPÂú∞ÂùÄÔºåÊú¨Âú∞ËøõÁ®ãÁöÑÂçèËÆÆÁ´ØÂè£ÔºåËøúÂú∞‰∏ªÊú∫ÁöÑIPÂú∞ÂùÄÔºåËøúÂú∞ËøõÁ®ãÁöÑÂçèËÆÆÁ´ØÂè£„ÄÇ ÈÇ£‰∏∫‰ªÄ‰πà‰∏ÄÂÆöË¶ÅÁî®ÂÆÉÂë¢Ôºü Âú®Âêå‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äÔºåTCPÂçèËÆÆ‰∏éUDPÂçèËÆÆÂèØ‰ª•ÂêåÊó∂‰ΩøÁî®Áõ∏ÂêåÁöÑportËÄå‰∫í‰∏çÂπ≤Êâ∞„ÄÇ Êìç‰ΩúÁ≥ªÁªüÊ†πÊçÆÂ•óÊé•Â≠óÂú∞ÂùÄÔºåÂèØ‰ª•ÂÜ≥ÂÆöÂ∫îËØ•Â∞ÜÊï∞ÊçÆÈÄÅËææÁâπÂÆöÁöÑËøõÁ®ãÊàñÁ∫øÁ®ã„ÄÇËøôÂ∞±ÂÉèÊòØÁîµËØùÁ≥ªÁªü‰∏≠Ôºå‰ª•ÁîµËØùÂè∑Á†ÅÂä†‰∏äÂàÜÊú∫Âè∑Á†ÅÔºåÊù•ÂÜ≥ÂÆöÈÄöËØùÂØπË±°‰∏ÄËà¨„ÄÇ Âõ†‰∏∫Êàë‰ª¨ÁîµËÑë‰∏äÂèØËÉΩ‰ºöË∑ëÂæàÂ§öÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåTCPÂçèËÆÆÁ´ØÂè£ÈúÄË¶Å‰∏∫Ëøô‰∫õÂêåÊó∂ËøêË°åÁöÑÁ®ãÂ∫èÊèê‰æõÂπ∂ÂèëÊúçÂä°ÔºåÊàñËÄÖËØ¥Ôºå‰º†ËæìÂ±ÇÈúÄË¶Å‰∏∫Â∫îÁî®Â±ÇÁöÑÂ§ö‰∏™ËøõÁ®ãÊèê‰æõÈÄö‰ø°ÊúçÂä°ÔºåÊØè‰∏™ËøõÁ®ãËµ∑‰∏Ä‰∏™TCPËøûÊé•ÔºåÈÇ£‰πàËøôÂ§ö‰∏™TCPËøûÊé•ÂèØËÉΩÊòØÈÄöËøáÂêå‰∏Ä‰∏™ TCPÂçèËÆÆÁ´ØÂè£‰º†ËæìÊï∞ÊçÆ„ÄÇ Â¶Ç‰ΩïÂå∫Âà´Âì™‰∏™ËøõÁ®ãÂØπÂ∫îÂì™‰∏™TCPËøûÊé•Âë¢Ôºü ËÆ∏Â§öËÆ°ÁÆóÊú∫Êìç‰ΩúÁ≥ªÁªü‰∏∫Â∫îÁî®Á®ãÂ∫è‰∏éTCPÔºèIPÂçèËÆÆ‰∫§‰∫íÊèê‰æõ‰∫ÜÂ•óÊé•Â≠ó(Socket)Êé•Âè£„ÄÇÂ∫î Áî®Â±ÇÂèØ‰ª•Âíå‰º†ËæìÂ±ÇÈÄöËøáSocketÊé•Âè£ÔºåÂå∫ÂàÜÊù•Ëá™‰∏çÂêåÂ∫îÁî®Á®ãÂ∫èËøõÁ®ãÊàñÁΩëÁªúËøûÊé•ÁöÑÈÄö‰ø°ÔºåÂÆûÁé∞Êï∞ÊçÆ‰º†ËæìÁöÑÂπ∂ÂèëÊúçÂä°„ÄÇ 2.2 Âª∫Á´ãsocketËøûÊé• Âª∫Á´ãSocketËøûÊé•Ëá≥Â∞ëÈúÄË¶Å‰∏ÄÂØπÂ•óÊé•Â≠óÔºåÂÖ∂‰∏≠‰∏Ä‰∏™ËøêË°å‰∫éÂÆ¢Êà∑Á´ØÔºåÁß∞‰∏∫ClientSocket ÔºåÂè¶‰∏Ä‰∏™ËøêË°å‰∫éÊúçÂä°Âô®Á´ØÔºåÁß∞‰∏∫ServerSocket „ÄÇ Â•óÊé•Â≠ó‰πãÈó¥ÁöÑËøûÊé•ËøáÁ®ãÂàÜ‰∏∫‰∏â‰∏™Ê≠•È™§ÔºöÊúçÂä°Âô®ÁõëÂê¨ÔºåÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåËøûÊé•Á°ÆËÆ§„ÄÇ ÊúçÂä°Âô®ÁõëÂê¨ÔºöÊúçÂä°Âô®Á´ØÂ•óÊé•Â≠óÂπ∂‰∏çÂÆö‰ΩçÂÖ∑‰ΩìÁöÑÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÔºåËÄåÊòØÂ§Ñ‰∫éÁ≠âÂæÖËøûÊé•ÁöÑÁä∂ÊÄÅÔºåÂÆûÊó∂ÁõëÊéßÁΩëÁªúÁä∂ÊÄÅÔºåÁ≠âÂæÖÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºöÊåáÂÆ¢Êà∑Á´ØÁöÑÂ•óÊé•Â≠óÊèêÂá∫ËøûÊé•ËØ∑Ê±ÇÔºåË¶ÅËøûÊé•ÁöÑÁõÆÊ†áÊòØÊúçÂä°Âô®Á´ØÁöÑÂ•óÊé•Â≠ó„ÄÇ‰∏∫Ê≠§ÔºåÂÆ¢Êà∑Á´ØÁöÑÂ•óÊé•Â≠óÂøÖÈ°ªÈ¶ñÂÖàÊèèËø∞ÂÆÉË¶ÅËøûÊé•ÁöÑÊúçÂä°Âô®ÁöÑÂ•óÊé•Â≠óÔºåÊåáÂá∫ÊúçÂä°Âô®Á´ØÂ•óÊé•Â≠óÁöÑÂú∞ÂùÄÂíåÁ´ØÂè£Âè∑ÔºåÁÑ∂ÂêéÂ∞±ÂêëÊúçÂä°Âô®Á´ØÂ•óÊé•Â≠óÊèêÂá∫ËøûÊé•ËØ∑Ê±Ç„ÄÇ ËøûÊé•Á°ÆËÆ§ÔºöÂΩìÊúçÂä°Âô®Á´ØÂ•óÊé•Â≠óÁõëÂê¨Âà∞ÊàñËÄÖËØ¥Êé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÁöÑËøûÊé•ËØ∑Ê±ÇÊó∂ÔºåÂ∞±ÂìçÂ∫îÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÁöÑËØ∑Ê±ÇÔºåÂª∫Á´ã‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÔºåÊääÊúçÂä°Âô®Á´ØÂ•óÊé•Â≠óÁöÑÊèèËø∞Âèë ÁªôÂÆ¢Êà∑Á´ØÔºå‰∏ÄÊó¶ÂÆ¢Êà∑Á´ØÁ°ÆËÆ§‰∫ÜÊ≠§ÊèèËø∞ÔºåÂèåÊñπÂ∞±Ê≠£ÂºèÂª∫Á´ãËøûÊé•„ÄÇËÄåÊúçÂä°Âô®Á´ØÂ•óÊé•Â≠óÁªßÁª≠Â§Ñ‰∫éÁõëÂê¨Áä∂ÊÄÅÔºåÁªßÁª≠Êé•Êî∂ÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ 2.3 SOCKETËøûÊé•‰∏éTCPËøûÊé• ÂàõÂª∫SocketËøûÊé•Êó∂ÔºåÂèØ‰ª•ÊåáÂÆö‰ΩøÁî®ÁöÑ‰º†ËæìÂ±ÇÂçèËÆÆÔºåSocketÂèØ‰ª•ÊîØÊåÅ‰∏çÂêåÁöÑ‰º†ËæìÂ±ÇÂçèËÆÆÔºàTCPÊàñUDPÔºâÔºåÂΩì‰ΩøÁî®TCPÂçèËÆÆËøõË°åËøûÊé•Êó∂ÔºåËØ•SocketËøûÊé•Â∞±ÊòØ‰∏Ä‰∏™TCPËøûÊé•„ÄÇ 3.TCPÂü∫Êú¨Â≠óÊÆµ TCPÔºàTransmission Control Protocol ‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºâÊòØ‰∏ÄÁßçÈù¢ÂêëËøûÊé•ÁöÑ„ÄÅÂèØÈù†ÁöÑ„ÄÅÂü∫‰∫éÂ≠óËäÇÊµÅÁöÑ‰º†ËæìÂ±ÇÈÄö‰ø°ÂçèËÆÆ„ÄÇ ÈíàÂØπÂçèËÆÆ‰∏≠ÁöÑÂ≠óÊÆµÔºåÊàë‰ª¨Âè™ÈúÄË¶Å‰∫ÜËß£‰∏Ä‰∏ãÔºöACK„ÄÅSYN„ÄÅÂ∫èÂè∑Ëøô‰∏â‰∏™ÈÉ®ÂàÜ„ÄÇ ACK : Á°ÆËÆ§ TCPÂçèËÆÆËßÑÂÆöÔºåÂè™ÊúâACK=1Êó∂ÊúâÊïàÔºå‰πüËßÑÂÆöËøûÊé•Âª∫Á´ãÂêéÊâÄÊúâÂèëÈÄÅÁöÑÊä•ÊñáÁöÑACKÂøÖÈ°ª‰∏∫1 SYN Ôºö Âú®ËøûÊé•Âª∫Á´ãÊó∂Áî®Êù•ÂêåÊ≠•Â∫èÂè∑„ÄÇ ÂΩìSYN=1ËÄåACK=0Êó∂ÔºåË°®ÊòéËøôÊòØ‰∏Ä‰∏™ËøûÊé•ËØ∑Ê±ÇÊä•Êñá„ÄÇ ÂØπÊñπËã•ÂêåÊÑèÂª∫Á´ãËøûÊé•ÔºåÂàôÂ∫îÂú®ÂìçÂ∫îÊä•Êñá‰∏≠‰ΩøSYN=1ÂíåACK=1. Âõ†Ê≠§, SYNÁΩÆ1Â∞±Ë°®Á§∫ËøôÊòØ‰∏Ä‰∏™ËøûÊé•ËØ∑Ê±ÇÊàñËøûÊé•Êé•ÂèóÊä•Êñá„ÄÇ FIN Âç≥ÁªàÁªìÁöÑÊÑèÊÄùÔºå Áî®Êù•ÈáäÊîæ‰∏Ä‰∏™ËøûÊé•„ÄÇ ÂΩì FIN = 1 Êó∂ÔºåË°®ÊòéÊ≠§Êä•ÊñáÊÆµÁöÑÂèëÈÄÅÊñπÁöÑÊï∞ÊçÆÂ∑≤ÁªèÂèëÈÄÅÂÆåÊØïÔºåÂπ∂Ë¶ÅÊ±ÇÈáäÊîæËøûÊé•„ÄÇ 4.‰∏âÊ¨°Êè°Êâã(ÈáçË¶ÅÔºåÁªÜËØª) È¶ñÂÖàÔºåTCP‰Ωú‰∏∫‰∏ÄÁßçÂèØÈù†‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºåÂÖ∂Ê†∏ÂøÉÊÄùÊÉ≥ÔºöÊó¢Ë¶Å‰øùËØÅÊï∞ÊçÆÂèØÈù†‰º†ËæìÔºåÂèàË¶ÅÊèêÈ´ò‰º†ËæìÁöÑÊïàÁéáÔºåËÄåÁî®‰∏âÊ¨°ÊÅ∞ÊÅ∞ÂèØ‰ª•Êª°Ë∂≥‰ª•‰∏ä‰∏§ÊñπÈù¢ÁöÑÈúÄÊ±ÇÔºÅ ÁÑ∂ÂêéÔºåË¶ÅÊòéÁ°ÆTCPËøûÊé•Êè°ÊâãÔºåÊè°ÁöÑÊòØÂï•Ôºü Á≠îÊ°àÔºöÈÄö‰ø°ÂèåÊñπÊï∞ÊçÆÂéüÁÇπÁöÑÂ∫èÂàóÂè∑ÔºÅ Êàë‰ª¨Âú®‰∏äÈù¢‰∏ÄÁØáÊñáÁ´†Áü•ÈÅìÔºåÊ∂àÊÅØÁöÑÂÆåÊï¥ÊòØÈù†ÁªôÊØè‰∏™Ê∂àÊÅØÂåÖÊêû‰∏Ä‰∏™ÁºñÂè∑Ôºå‰æùÊ¨°Âú∞ACKÁ°ÆËÆ§„ÄÇÁ°ÆËÆ§Êú∫Âà∂ÊòØÁ¥ØËÆ°ÁöÑÔºåÊÑèÂë≥ÁùÄ X Â∫èÂàóÂè∑‰πãÂâç(‰∏çÂåÖÊã¨ X) ÂåÖÈÉΩÊòØË¢´Á°ÆËÆ§Êé•Êî∂Âà∞ÁöÑ„ÄÇ TCPÂèØÈù†‰º†ËæìÁöÑÁ≤æÈ´ìÔºöTCPËøûÊé•ÁöÑ‰∏ÄÊñπAÔºåÁî±Êìç‰ΩúÁ≥ªÁªüÂä®ÊÄÅÈöèÊú∫ÈÄâÂèñ‰∏Ä‰∏™32‰ΩçÈïøÁöÑÂ∫èÂàóÂè∑ÔºàInitial Sequence NumberÔºâ„ÄÇ ÂÅáËÆæAÁöÑÂàùÂßãÂ∫èÂàóÂè∑‰∏∫1000Ôºå‰ª•ËØ•Â∫èÂàóÂè∑‰∏∫ÂéüÁÇπÔºåÂØπËá™Â∑±Â∞ÜË¶ÅÂèëÈÄÅÁöÑÊØè‰∏™Â≠óËäÇÁöÑÊï∞ÊçÆËøõË°åÁºñÂè∑Ôºå1001Ôºå1002Ôºå1003‚Ä¶ÔºåÂπ∂ÊääËá™Â∑±ÁöÑÂàùÂßãÂ∫èÂàóÂè∑ISNÂëäËØâB„ÄÇ ËÆ©BÊúâ‰∏Ä‰∏™ÊÄùÊÉ≥ÂáÜÂ§áÔºå‰ªÄ‰πàÊ†∑ÁºñÂè∑ÁöÑÊï∞ÊçÆÊòØÂêàÊ≥ïÁöÑÔºå‰ªÄ‰πàÁºñÂè∑ÊòØÈùûÊ≥ïÁöÑÔºåÊØîÂ¶ÇÁºñÂè∑900Â∞±ÊòØÈùûÊ≥ïÁöÑÔºåÂêåÊó∂BËøòÂèØ‰ª•ÂØπAÊØè‰∏Ä‰∏™ÁºñÂè∑ÁöÑÂ≠óËäÇÊï∞ÊçÆËøõË°åÁ°ÆËÆ§„ÄÇ Â¶ÇÊûúAÊî∂Âà∞BÁ°ÆËÆ§ÁºñÂè∑‰∏∫2001ÔºåÂàôÊÑèÂë≥ÁùÄÂ≠óËäÇÁºñÂè∑‰∏∫1001-2000ÔºåÂÖ±1000‰∏™Â≠óËäÇÂ∑≤ÁªèÂÆâÂÖ®Âà∞Ëææ„ÄÇ ÂêåÁêÜB‰πüÊòØÁ±ª‰ººÁöÑÊìç‰ΩúÔºåÂÅáËÆæBÁöÑÂàùÂßãÂ∫èÂàóÂè∑ISN‰∏∫2000Ôºå‰ª•ËØ•Â∫èÂàóÂè∑‰∏∫ÂéüÁÇπÔºåÂØπËá™Â∑±Â∞ÜË¶ÅÂèëÈÄÅÁöÑÊØè‰∏™Â≠óËäÇÁöÑÊï∞ÊçÆËøõË°åÁºñÂè∑Ôºå2001Ôºå2002Ôºå2003‚Ä¶ÔºåÂπ∂ÊääËá™Â∑±ÁöÑÂàùÂßãÂ∫èÂàóÂè∑ISNÂëäËØâAÔºå‰ª•‰æøAÂèØ‰ª•Á°ÆËÆ§BÂèëÈÄÅÁöÑÊØè‰∏Ä‰∏™Â≠óËäÇ„ÄÇÂ¶ÇÊûúBÊî∂Âà∞AÁ°ÆËÆ§ÁºñÂè∑‰∏∫4001ÔºåÂàôÊÑèÂë≥ÁùÄÂ≠óËäÇÁºñÂè∑‰∏∫2001-4000ÔºåÂÖ±2000‰∏™Â≠óËäÇÂ∑≤ÁªèÂÆâÂÖ®Âà∞Ëææ„ÄÇ Â•Ω‰∫ÜÔºåÂú®ÁêÜËß£‰∫ÜÊè°ÊâãÁöÑÊú¨Ë¥®‰πãÂêéÔºå‰∏ãÈù¢Â∞±ÂèØ‰ª•ÊÄªÁªì‰∏äÈù¢ÂõæÁöÑÊè°ÊâãËøáÁ®ã‰∫Ü„ÄÇ ÂØπ‰∫éA‰∏éBÁöÑÊè°ÊâãËøáÁ®ãÔºåÂèØ‰ª•ÊÄªÁªì‰∏∫Ôºö A ÂèëÈÄÅÂêåÊ≠•‰ø°Âè∑SYN + A's Initial sequence numberÔºà‰∏¢Â§±‰ºöA‰ºöÈáç‰º†Ôºâ B Á°ÆËÆ§Êî∂Âà∞AÁöÑÂêåÊ≠•‰ø°Âè∑ÔºåÂπ∂ËÆ∞ÂΩï A's ISN Âà∞Êú¨Âú∞ÔºåÂëΩÂêç B's ACK sequence number BÂèëÈÄÅÂêåÊ≠•‰ø°Âè∑SYN + B's Initial sequence number Ôºà‰∏¢Â§±B‰ºöÂë®ÊúüÊÄßË∂ÖÊó∂Èáç‰º†ÔºåÁõ¥Âà∞Êî∂Âà∞AÁöÑÁ°ÆËÆ§Ôºâ AÁ°ÆËÆ§Êî∂Âà∞BÁöÑÂêåÊ≠•‰ø°Âè∑ÔºåÂπ∂ËÆ∞ÂΩï B's ISN Âà∞Êú¨Âú∞ÔºåÂëΩÂêç A's ACK sequence number ÂæàÊòæÁÑ∂2Âíå3 Ëøô‰∏§‰∏™Ê≠•È™§ÂèØ‰ª•ÂêàÂπ∂ÔºåÂè™ÈúÄË¶Å‰∏âÊ¨°Êè°ÊâãÔºåÂèØ‰ª•ÊèêÈ´òËøûÊé•ÁöÑÈÄüÂ∫¶‰∏éÊïàÁéá„ÄÇ ËøôÈáåÂ∞±‰ºöÂºïÂá∫‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰∏§Ê¨°‰∏çË°åÂêóÔºü A ÂèëÈÄÅÂêåÊ≠•‰ø°Âè∑SYN + A‚Äôs Initial sequence number BÂèëÈÄÅÂêåÊ≠•‰ø°Âè∑SYN + B‚Äôs Initial sequence number + B‚Äôs ACK sequence number ËøôÈáåÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåA‰∏éBÂ∞±AÁöÑÂàùÂßãÂ∫èÂàóÂè∑ËææÊàê‰∫Ü‰∏ÄËá¥Ôºå‰ΩÜÊòØBÊó†Ê≥ïÁü•ÈÅìAÊòØÂê¶Â∑≤ÁªèÊé•Êî∂Âà∞Ëá™Â∑±ÁöÑÂêåÊ≠•‰ø°Âè∑ÔºåÂ¶ÇÊûúËøô‰∏™ÂêåÊ≠•‰ø°Âè∑‰∏¢Â§±‰∫ÜÔºåAÂíåBÂ∞±BÁöÑÂàùÂßãÂ∫èÂàóÂè∑Â∞ÜÊó†Ê≥ïËææÊàê‰∏ÄËá¥„ÄÇ ÊâÄ‰ª•AÂøÖÈ°ªÂÜçÁªôB‰∏Ä‰∏™Á°ÆËÆ§Ôºå‰ª•Á°ÆËÆ§AÂ∑≤ÁªèÊé•Êî∂Âà∞BÁöÑÂêåÊ≠•‰ø°Âè∑„ÄÇ Â¶ÇÊûúAÂèëÁªôBÁöÑÁ°ÆËÆ§‰∏¢‰∫ÜÔºåËØ•Â¶Ç‰ΩïÔºü A‰ºöË∂ÖÊó∂Èáç‰º†Ëøô‰∏™ACKÂêóÔºü‰∏ç‰ºöÔºÅTCP‰∏ç‰ºö‰∏∫Ê≤°ÊúâÊï∞ÊçÆÁöÑACKË∂ÖÊó∂Èáç‰º†„ÄÇ ÈÇ£ËØ•Â¶Ç‰ΩïÊòØÂ•ΩÔºüBÂ¶ÇÊûúÊ≤°ÊúâÊî∂Âà∞AÁöÑACKÔºå‰ºöË∂ÖÊó∂Èáç‰º†Ëá™Â∑±ÁöÑSYNÂêåÊ≠•‰ø°Âè∑Ôºå‰∏ÄÁõ¥Âà∞Êî∂Âà∞AÁöÑACK‰∏∫Ê≠¢„ÄÇ ÂÜôÂà∞ËøôÈáåÔºåÂÖ∂ÂÆûÊàë‰ª¨Â∑≤ÁªèÊòéÁôΩ‰∫ÜÔºåÊè°ÊâãÂÖ∂ÂÆûÂ∞±ÊòØÂêÑËá™Á°ÆËÆ§ÂØπÊñπÁöÑÂ∫èÂàóÂè∑„ÄÇÂõ†‰∏∫ÂêéÈù¢ÁöÑÊï∞ÊçÆÁºñÂè∑Â∞±‰ºö‰ª•Ê≠§‰∏∫Âü∫Á°ÄÔºå‰ªéËÄå‰øùËØÅÂêéÁª≠Êï∞ÊçÆÁöÑÂèØÈù†ÊÄß„ÄÇ Ë∞¢Â∏å‰ªÅÁâà„ÄäËÆ°ÁÆóÊú∫ÁΩëÁªú„Äã‰∏≠ÁöÑ‰æãÂ≠êÊòØËøôÊ†∑ÁöÑÔºå‚ÄúÂ∑≤Â§±ÊïàÁöÑËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÊÆµ‚ÄùÁöÑ‰∫ßÁîüÂú®ËøôÊ†∑‰∏ÄÁßçÊÉÖÂÜµ‰∏ãÔºöclientÂèëÂá∫ÁöÑÁ¨¨‰∏Ä‰∏™ËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÊÆµÂπ∂Ê≤°Êúâ‰∏¢Â§±ÔºåËÄåÊòØÂú®Êüê‰∏™ÁΩëÁªúÁªìÁÇπÈïøÊó∂Èó¥ÁöÑÊªûÁïô‰∫ÜÔºå‰ª•Ëá¥Âª∂ËØØÂà∞ËøûÊé•ÈáäÊîæ‰ª•ÂêéÁöÑÊüê‰∏™Êó∂Èó¥ÊâçÂà∞Ëææserver„ÄÇÊú¨Êù•ËøôÊòØ‰∏Ä‰∏™Êó©Â∑≤Â§±ÊïàÁöÑÊä•ÊñáÊÆµ„ÄÇ‰ΩÜserverÊî∂Âà∞Ê≠§Â§±ÊïàÁöÑËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÊÆµÂêéÔºåÂ∞±ËØØËÆ§‰∏∫ÊòØclientÂÜçÊ¨°ÂèëÂá∫ÁöÑ‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ‰∫éÊòØÂ∞±ÂêëclientÂèëÂá∫Á°ÆËÆ§Êä•ÊñáÊÆµÔºåÂêåÊÑèÂª∫Á´ãËøûÊé•„ÄÇÂÅáËÆæ‰∏çÈááÁî®‚Äú‰∏âÊ¨°Êè°Êâã‚ÄùÔºåÈÇ£‰πàÂè™Ë¶ÅserverÂèëÂá∫Á°ÆËÆ§ÔºåÊñ∞ÁöÑËøûÊé•Â∞±Âª∫Á´ã‰∫Ü„ÄÇÁî±‰∫éÁé∞Âú®clientÂπ∂Ê≤°ÊúâÂèëÂá∫Âª∫Á´ãËøûÊé•ÁöÑËØ∑Ê±ÇÔºåÂõ†Ê≠§‰∏ç‰ºöÁêÜÁù¨serverÁöÑÁ°ÆËÆ§Ôºå‰πü‰∏ç‰ºöÂêëserverÂèëÈÄÅÊï∞ÊçÆ„ÄÇ‰ΩÜserverÂç¥‰ª•‰∏∫Êñ∞ÁöÑËøêËæìËøûÊé•Â∑≤ÁªèÂª∫Á´ãÔºåÂπ∂‰∏ÄÁõ¥Á≠âÂæÖclientÂèëÊù•Êï∞ÊçÆ„ÄÇËøôÊ†∑ÔºåserverÁöÑÂæàÂ§öËµÑÊ∫êÂ∞±ÁôΩÁôΩÊµ™Ë¥πÊéâ‰∫Ü„ÄÇÈááÁî®‚Äú‰∏âÊ¨°Êè°Êâã‚ÄùÁöÑÂäûÊ≥ïÂèØ‰ª•Èò≤Ê≠¢‰∏äËø∞Áé∞Ë±°ÂèëÁîü„ÄÇ‰æãÂ¶ÇÂàöÊâçÈÇ£ÁßçÊÉÖÂÜµÔºåclient‰∏ç‰ºöÂêëserverÁöÑÁ°ÆËÆ§ÂèëÂá∫Á°ÆËÆ§„ÄÇserverÁî±‰∫éÊî∂‰∏çÂà∞Á°ÆËÆ§ÔºåÂ∞±Áü•ÈÅìclientÂπ∂Ê≤°ÊúâË¶ÅÊ±ÇÂª∫Á´ãËøûÊé•„ÄÇ‚Äù ‰ΩÜÊòØÊúâÁöÑ‰∫∫ÊåáÂá∫ÔºåÂÖ∂ÂÆûËøôÂè™ÊòØË°®Ë±°ÔºåÊàñËÄÖËØ¥Âπ∂‰∏çÊòØ‰∏âÊ¨°Êè°ÊâãÁöÑËÆæËÆ°ÂàùË°∑ÔºåÊàëË°®Á§∫ËÆ§ÂêåÔºåËøô‰∏™Èò≤Ê≠¢Â∑≤Â§±ÊïàÁöÑËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÊÆµÂ∫îËØ•Âè™ÊòØÈôÑÂä†ÁöÑ‰∏Ä‰∫õÂ•ΩÂ§ÑÔºåËÄå‰∏çÂ∫îËØ•ÊòØËß£Èáä‰∏∫‰ªÄ‰πàÊòØ‰∏âÊ¨°Êè°ÊâãÁöÑÂéüÂõ†„ÄÇ TCPÂàùÂßãÈò∂ÊÆµ‰∏∫‰ªÄ‰πàÊòØ‰∏âÊ¨°Êè°ÊâãÔºåÂéüÂõ†ÊÄªÁªìÂ¶Ç‰∏ãÔºö ‰∏∫‰∫ÜÂÆûÁé∞ÂèØÈù†Êï∞ÊçÆ‰º†ËæìÔºå TCP ÂçèËÆÆÁöÑÈÄö‰ø°ÂèåÊñπÔºå ÈÉΩÂøÖÈ°ªÁª¥Êä§‰∏Ä‰∏™Â∫èÂàóÂè∑Ôºå ‰ª•Ê†áËØÜÂèëÈÄÅÂá∫ÂéªÁöÑÊï∞ÊçÆÂåÖ‰∏≠Ôºå Âì™‰∫õÊòØÂ∑≤ÁªèË¢´ÂØπÊñπÊî∂Âà∞ÁöÑ„ÄÇ ‰∏âÊ¨°Êè°ÊâãÁöÑËøáÁ®ãÂç≥ÊòØÈÄö‰ø°ÂèåÊñπÁõ∏‰∫íÂëäÁü•Â∫èÂàóÂè∑Ëµ∑ÂßãÂÄºÔºå Âπ∂Á°ÆËÆ§ÂØπÊñπÂ∑≤ÁªèÊî∂Âà∞‰∫ÜÂ∫èÂàóÂè∑Ëµ∑ÂßãÂÄºÁöÑÂøÖÁªèÊ≠•È™§ÔºåÂ¶ÇÊûúÂè™ÊòØ‰∏§Ê¨°Êè°ÊâãÔºå Ëá≥Â§öÂè™ÊúâËøûÊé•ÂèëËµ∑ÊñπÁöÑËµ∑ÂßãÂ∫èÂàóÂè∑ËÉΩË¢´Á°ÆËÆ§Ôºå Âè¶‰∏ÄÊñπÈÄâÊã©ÁöÑÂ∫èÂàóÂè∑ÂàôÂæó‰∏çÂà∞Á°ÆËÆ§„ÄÇ 5.ÂõõÊ¨°Êå•Êâã ÂΩì‰∏ªÊú∫1ÂèëÂá∫FINÊä•ÊñáÊÆµÊó∂ÔºåÂè™ÊòØË°®Á§∫‰∏ªÊú∫1Â∑≤ÁªèÊ≤°ÊúâÊï∞ÊçÆË¶ÅÂèëÈÄÅ‰∫ÜÔºå‰∏ªÊú∫1ÂëäËØâ‰∏ªÊú∫2ÔºåÂÆÉÁöÑÊï∞ÊçÆÂ∑≤ÁªèÂÖ®ÈÉ®ÂèëÈÄÅÂÆåÊØï‰∫ÜÔºõ ‰ΩÜÊòØÔºåËøô‰∏™Êó∂ÂÄô‰∏ªÊú∫1ËøòÊòØÂèØ‰ª•Êé•ÂèóÊù•Ëá™‰∏ªÊú∫2ÁöÑÊï∞ÊçÆÔºõ ÂΩì‰∏ªÊú∫2ËøîÂõûACKÊä•ÊñáÊÆµÊó∂ÔºåË°®Á§∫ÂÆÉÂ∑≤ÁªèÁü•ÈÅì‰∏ªÊú∫1Ê≤°ÊúâÊï∞ÊçÆÂèëÈÄÅ‰∫ÜÔºå‰ΩÜÊòØ‰∏ªÊú∫2ËøòÊòØÂèØ‰ª•ÂèëÈÄÅÊï∞ÊçÆÂà∞‰∏ªÊú∫1ÁöÑÔºõ ÂΩì‰∏ªÊú∫2‰πüÂèëÈÄÅ‰∫ÜFINÊä•ÊñáÊÆµÊó∂ÔºåËøô‰∏™Êó∂ÂÄôÂ∞±Ë°®Á§∫‰∏ªÊú∫2‰πüÊ≤°ÊúâÊï∞ÊçÆË¶ÅÂèëÈÄÅ‰∫ÜÔºåÂ∞±‰ºöÂëäËØâ‰∏ªÊú∫1ÔºåÊàë‰πüÊ≤°ÊúâÊï∞ÊçÆË¶ÅÂèëÈÄÅ‰∫ÜÔºõ ‰∏ªÊú∫1ÂëäËØâ‰∏ªÊú∫2Áü•ÈÅì‰∫ÜÔºå‰∏ªÊú∫2Êî∂Âà∞Ëøô‰∏™Á°ÆËÆ§‰πãÂêéÂ∞±Á´ãÈ©¨ÂÖ≥Èó≠Ëá™Â∑±„ÄÇ ‰∏ªÊú∫1Á≠âÂæÖ2MSL‰πãÂêé‰πüÂÖ≥Èó≠‰∫ÜËá™Â∑±„ÄÇ ÈíàÂØπÊúÄÂêé‰∏ÄÊù°Ê∂àÊÅØÔºåÂç≥‰∏ªÊú∫1ÂèëÈÄÅackÂêéÔºå‰∏ªÊú∫2Êé•Êî∂Âà∞Ê≠§Ê∂àÊÅØÔºåÂç≥ËÆ§‰∏∫ÂèåÊñπËææÊàê‰∫ÜÂêåÊ≠•ÔºöÂèåÊñπÈÉΩÁü•ÈÅìËøûÊé•ÂèØ‰ª•ÈáäÊîæ‰∫ÜÔºåÊ≠§Êó∂BÂèØ‰ª•ÂÆâÂÖ®Âú∞ÈáäÊîæÊ≠§TCPËøûÊé•ÊâÄÂç†Áî®ÁöÑÂÜÖÂ≠òËµÑÊ∫ê„ÄÅÁ´ØÂè£Âè∑„ÄÇ ÊâÄ‰ª•Ë¢´Âä®ÂÖ≥Èó≠ÁöÑBÊó†ÈúÄ‰ªª‰Ωïwait timeÔºåÁõ¥Êé•ÈáäÊîæËµÑÊ∫ê„ÄÇ ‰ΩÜÊòØ‰∏ªÊú∫1Âπ∂‰∏çÁü•ÈÅì‰∏ªÊú∫2ÊòØÂê¶Êé•Âà∞Ëá™Â∑±ÁöÑACKÔºå‰∏ªÊú∫1ÊòØËøô‰πàÊÉ≥ÁöÑÔºö Â¶ÇÊûú‰∏ªÊú∫2Ê≤°ÊúâÊî∂Âà∞Ëá™Â∑±ÁöÑACKÔºå‰∏ªÊú∫2‰ºöË∂ÖÊó∂Èáç‰º†FiNÔºåÈÇ£‰πà‰∏ªÊú∫1ÂÜçÊ¨°Êé•Âà∞Èáç‰º†ÁöÑFINÔºå‰ºöÂÜçÊ¨°ÂèëÈÄÅACK Â¶ÇÊûú‰∏ªÊú∫2Êî∂Âà∞Ëá™Â∑±ÁöÑACKÔºå‰πü‰∏ç‰ºöÂÜçÂèë‰ªª‰ΩïÊ∂àÊÅØÔºåÂåÖÊã¨ACK Êó†ËÆ∫ÊòØÊÉÖÂÜµ1ËøòÊòØ2ÔºåAÈÉΩÈúÄË¶ÅÁ≠âÂæÖÔºåË¶ÅÂèñËøô‰∏§ÁßçÊÉÖÂÜµÁ≠âÂæÖÊó∂Èó¥ÁöÑÊúÄÂ§ßÂÄºÔºå‰ª•Â∫îÂØπÊúÄÂùèÁöÑÊÉÖÂÜµÂèëÁîüÔºåËøô‰∏™ÊúÄÂùèÊÉÖÂÜµÊòØÔºö ‰∏ªÊú∫2Ê≤°ÊúâÊî∂Âà∞‰∏ªÊú∫1ÁöÑACKÔºåÈÇ£‰πàË∂ÖÊó∂‰πãÂêé‰∏ªÊú∫2‰ºöÈáç‰º†FINÔºå‰πüÂ∞±ÊòØËØ¥ÔºåË¶ÅÊµ™Ë¥π‰∏Ä‰∏™‰∏ªÊú∫1ÂèëÂá∫ACKÁöÑÊúÄÂ§ßÂ≠òÊ¥ªÊó∂Èó¥(MSL)+FINÊ∂àÊÅØÁöÑÊúÄÂ§ßÂ≠òÊ¥ªÊó∂Èó¥(MSL) ‰∏çÂèØËÉΩÊó∂Èó¥ÂÜçÂ§ö‰∫ÜÔºåËøô‰∏™Â∑≤ÁªèÈíàÂØπÊúÄÁ≥üÁ≥ïÁöÑÁä∂ÂÜµ„ÄÇ Á≠âÂæÖ2MSLÊó∂Èó¥ÔºåAÂ∞±ÂèØ‰ª•ÊîæÂøÉÂú∞ÈáäÊîæTCPÂç†Áî®ÁöÑËµÑÊ∫ê„ÄÅÁ´ØÂè£Âè∑ÔºåÊ≠§Êó∂ÂèØ‰ª•‰ΩøÁî®ËØ•Á´ØÂè£Âè∑ËøûÊé•‰ªª‰ΩïÊúçÂä°Âô®„ÄÇ Âú®Á≠âÂæÖÁöÑÊó∂Èó¥ÂÜÖÔºå‰∏ªÊú∫2ÂèØ‰ª•ÈáçËØïÂ§öÊ¨°ÔºåÂõ†‰∏∫2MSLÊó∂Èó¥‰∏∫240ÁßíÔºåË∂ÖÊó∂Èáç‰º†Âè™Êúâ0.5ÁßíÔºå1ÁßíÔºå2ÁßíÔºåÔºå16Áßí„ÄÇ ÂΩì‰∏ªÊú∫2ÈáçËØïÊ¨°Êï∞ËææÂà∞‰∏äÈôêÔºå‰∏ªÊú∫2‰ºöresetËøûÊé•„ÄÇ ÈÇ£‰πà‰∏∫‰ªÄ‰πàÊòØ2MSLÊàë‰ª¨Â∑≤Áªè‰∫ÜËß£‰∫ÜÔºå‰ΩÜÊòØ‰∏∫‰ªÄ‰πàË¶ÅÁ≠âËøô‰∏™Êó∂Èó¥Âë¢Ôºü Â¶ÇÊûú‰∏çÁ≠âÔºåÈáäÊîæÁöÑÁ´ØÂè£ÂèØËÉΩ‰ºöÈáçËøûÂàöÊñ≠ÂºÄÁöÑÊúçÂä°Âô®Á´ØÂè£ÔºåËøôÊ†∑‰æùÁÑ∂Â≠òÊ¥ªÂú®ÁΩëÁªúÈáåÁöÑËÄÅÁöÑTCPÊä•ÊñáÂèØËÉΩ‰∏éÊñ∞TCPËøûÊé•Êä•ÊñáÂÜ≤Á™ÅÔºåÈÄ†ÊàêÊï∞ÊçÆÂÜ≤Á™ÅÔºå‰∏∫ÈÅøÂÖçÊ≠§ÁßçÊÉÖÂÜµÔºåÈúÄË¶ÅËÄêÂøÉÁ≠âÂæÖÁΩëÁªúËÄÅÁöÑTCPËøûÊé•ÁöÑÊ¥ªË∑ÉÊä•ÊñáÂÖ®ÈÉ®Ê≠ªÁøòÁøòÔºå2MSLÊó∂Èó¥ÂèØ‰ª•Êª°Ë∂≥Ëøô‰∏™ÈúÄÊ±Ç„ÄÇ Êï¥ÁêÜËá™Ôºö https://www.zhihu.com/question/24853633 https://www.zhihu.com/question/67013338 https://github.com/jawil/blog/issues/14 https://www.jianshu.com/p/9968b16b607e]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCPÂçèËÆÆÂÖ•Èó®]]></title>
    <url>%2F2019%2F01%2F18%2Fnetwork%2F4.TCP%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨ÂõõÁØáÊñáÁ´†„ÄÇÈ¶ñÂÖàË¶ÅÊòéÁ°ÆÔºö‰ø°ÈÅìÊú¨Ë∫´‰∏çÂèØÈù†Ôºà‰∏¢ÂåÖ„ÄÅÈáçÂ§çÂåÖ„ÄÅÂá∫Èîô„ÄÅ‰π±Â∫èÔºâÔºå‰∏çÂÆâÂÖ®„ÄÇÊâÄ‰ª•ÂºïÂá∫‰∫Ü‰∏ÉÂ±ÇÊàñ‰∫îÂ±ÇÊ®°ÂûãÊù•‰øùËØÅ„ÄÇÂõ†Ê≠§Ôºå‰ªª‰Ωï‰∏Ä‰∏™‰∏úË•øÁöÑÊèêÂá∫ÈÉΩÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Êüê‰∏™ÈóÆÈ¢òÁöÑ„ÄÇÂ≠¶‰π†ËÆ°ÁÆóÊú∫Ôºå‰ªé‰ªñÁöÑÂéÜÂè≤Âá∫ÂèëÔºåÁêÜËß£‰∏∫‰ªÄ‰πà‰ºöÊúâ‰∏çÊñ≠‰ΩéËø≠‰ª£ÔºåÂõ†‰∏∫ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Êüê‰∏™ÁóõÁÇπÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇHTTPÁöÑÂèëÂ±ïÔºå‰∏∫‰ªÄ‰πàÂú®HTTP1.0Âü∫Á°Ä‰∏äËøòË¶ÅÊèêÂá∫HTTP1.1Ôºå‰∏∫‰ªÄ‰πàËøòË¶ÅÊèêÂá∫HTTP2.0ÔºåÊàë‰ª¨Â≠¶‰π†‰∫Ü‰ªñÁöÑÂèëÂ±ïÂéÜÂè≤‰πãÂêéÂ∞±‰ºöÊòéÁôΩ‰∫Ü„ÄÇÂêåÊ†∑Ôºå‰∏ãÈù¢ÂÜçËØ¥‰∏ÄËØ¥‰∏∫‰ªÄ‰πàË¶ÅÊúâTCPÂçèËÆÆÔºåTCPÂà∞Â∫ïËß£ÂÜ≥‰∫Ü‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ ‰∏Ä„ÄÅÂõûÈ°æ È¶ñÂÖàÁÆÄÂçïÂõûÈ°æ‰∏Ä‰∏ã„ÄÇ 1.1 Áâ©ÁêÜÂ±Ç Áâ©ÁêÜÂ±ÇÊòØÁõ∏ÂΩì‰∫éÁâ©ÁêÜËøûÊé•ÔºåÂ∞Ü0101‰ª•Áîµ‰ø°Âè∑ÁöÑÂΩ¢Âºè‰º†ËæìÂá∫Âéª„ÄÇ 1.2 Êï∞ÊçÆÈìæË∑ØÂ±Ç Êï∞ÊçÆÈìæË∑ØÂ±ÇÔºåÊúâ‰∏Ä‰∏™Âè´ÂÅö‰ª•Â§™ÁΩëÂçèËÆÆÔºåËßÑÂÆö‰∫ÜÁîµÂ≠ê‰ø°Âè∑ÊòØÂ¶Ç‰ΩïÁªÑÊàêÊï∞ÊçÆÂåÖÁöÑÔºåËøô‰∏™ÂçèËÆÆÁöÑÂ§¥ÈáåÈù¢ÔºåÂåÖÂê´‰∫ÜËá™Ë∫´ÁöÑÁΩëÂç°‰ø°ÊÅØÔºåËøòÊúâÁõÆÁöÑÂú∞ÁöÑÁΩëÂç°‰ø°ÊÅØÔºà‰∏ÄËà¨Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂØπÊñπÁöÑIPÔºåIPÂèØ‰ª•ÈÄöËøáDNSËß£ÊûêÂà∞ÔºåÁÑ∂ÂêéÊ†πÊçÆARPÂçèËÆÆÂ∞ÜIPËΩ¨Êç¢‰∏∫MACÂú∞ÂùÄÔºâ„ÄÇÈÇ£‰πàÔºåÂ¶ÇÊûúÂú®Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩëÂÜÖÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøáÂπøÊí≠ÁöÑÊñπÂºèÊâæÂà∞ÂØπÂ∫îMACÂú∞ÂùÄÁöÑ‰∏ªÊú∫„ÄÇ‚ÄîÂç≥‰ª•Â§™ÁΩëÂçèËÆÆËß£ÂÜ≥‰∫ÜÂ≠êÁΩëÂÜÖÈÉ®ÁöÑÁÇπÂØπÁÇπÈÄö‰ø°„ÄÇ 1.3 ÁΩëÁªúÂ±Ç ‰ΩÜÊòØÂë¢Ôºå‰ª•Â§™ÁΩëÂçèËÆÆ‰∏çËÉΩËß£ÂÜ≥Â§ö‰∏™Â±ÄÂüüÁΩëÈÄö‰ø°ÔºåÊØè‰∏™Â±ÄÂüüÁΩë‰πãÈó¥‰∏çÊòØ‰∫íÈÄöÁöÑÔºåÈÇ£‰πà‰ª•Â§™ÁΩëËøôÁßçÂπøÊí≠ÁöÑÊñπÂºè‰∏çÂèØÁî®ÔºåÂ∞±ÁÆóÂèØÁî®ÔºåÁΩëÁªúÈÇ£‰πàÂ§ßÔºåÈÄöËøáÂπøÊí≠ËøõË°åÊâæÔºåÊòØ‰∏Ä‰∏™ÂèØÊÄïÁöÑÂú∫ÊôØ„ÄÇÈÇ£‰πàÔºåIPÂçèËÆÆÂèØ‰ª•ËøûÊé•Â§ö‰∏™Â±ÄÂüüÁΩëÔºåÁÆÄÂçïÊù•ËØ¥ÔºåIP ÂçèËÆÆÂÆö‰πâ‰∫Ü‰∏ÄÂ•óËá™Â∑±ÁöÑÂú∞ÂùÄËßÑÂàôÔºåÁß∞‰∏∫ IP Âú∞ÂùÄ„ÄÇÁâ©ÁêÜÂô®‰ª∂ÔºåÊØîÂ¶ÇËØ¥Ë∑ØÁî±Âô®ÔºåÂ∞±ÊòØÂü∫‰∫éIPÂçèËÆÆÔºåÈáåÈù¢‰øùÂ≠ò‰∏ÄÂ•óÂú∞ÂùÄÊåáË∑ØÁâåÔºåÊÉ≥ÂéªÂì™‰∏™Â±ÄÂüüÁΩëÔºåÂèØ‰ª•ÈÄöËøáËøô‰∏™ÁâåÂ≠êÊù•ÊâæÔºåÁÑ∂ÂêéÈÄêÊ≠•Ë∑ØÁî±Âà∞ÁõÆÊ†áÂ±ÄÂüüÁΩëÔºåÊúÄÂêéÂ∞±ÂèØ‰ª•ÊâæÂà∞ÈÇ£Âè∞‰∏ªÊú∫‰∫Ü„ÄÇIPÂ±ÇÂ∞±ÊòØÂØπÂ∫î‰∫ÜÁΩëÁªúÂ±Ç„ÄÇ 1.4 ‰º†ËæìÂ±Ç ÈÇ£‰πàÔºåÊ≠§Êó∂Ëß£ÂÜ≥‰∫ÜÂ§ö‰∏™Â±ÄÂüüÁΩëË∑ØÁî±ÈóÆÈ¢òÔºå‰πüËß£ÂÜ≥‰∫ÜÂ±ÄÂüüÁΩëÂÜÖÂØªÂùÄÈóÆÈ¢òÔºåÂç≥ÊàëËøôÂè∞‰∏ªÊú∫Â∑≤ÁªèÂèØ‰ª•ÊâæÂà∞ÈÇ£Âè∞‰∏ªÊú∫‰∫ÜÔºå‰∏ãÈù¢ËøòÊúâ‰ªÄ‰πà‰∫ãÊÉÖÈúÄË¶ÅÂÅöÂë¢ÔºüÊòæÁÑ∂ÔºåÊâæÂà∞‰∏ªÊú∫Ëøò‰∏çË°åÂïäÔºåÊØîÂ¶ÇÊàëÁî®ÂæÆ‰ø°Âèë‰∏ÄÊù°Ê∂àÊÅØÔºåÊàëÂèëÂà∞‰Ω†‰∏ªÊú∫‰∫ÜÔºå‰ΩÜÊòØ‰Ω†‰∏ªÊú∫‰∏äÁöÑÂæÆ‰ø°‰∏çÁü•ÈÅìËøôÊù°Ê∂àÊÅØÂèëÁªô‰ªñ‰∫ÜÔºåËøôÈáåËØ¥ÁöÑÂ∞±ÊòØÁ´ØÂè£Ôºå‰ø°ÊÅØË¶ÅÂèëÂà∞Ëøô‰∏™Á´ØÂè£‰∏äÔºåÁõëÂê¨Ëøô‰∏™Á´ØÂè£ÁöÑÁ®ãÂ∫èÊâç‰ºöÊî∂Âà∞Ê∂àÊÅØ„ÄÇ 1.5 Â∫îÁî®Â±Ç OKÔºåÊúÄ‰∏äÂ±ÇÁöÑÂ∫îÁî®Â±ÇÔºåÂ∞±ÊòØÊúÄË¥¥ËøëÁî®Êà∑ÁöÑÔºå‰ªñÁöÑ‰∏ÄÁ≥ªÂàóÂçèËÆÆÂè™ÊòØ‰∏∫‰∫ÜËÆ©‰∏§Âè∞‰∏ªÊú∫‰ºö‰∫íÁõ∏ÈÉΩÁêÜËß£ËÄåÂ∑≤„ÄÇ ‰∫å„ÄÅÈóÆÈ¢òÂíåËß£ÂÜ≥ 2.1 Â≠òÂú®ÁöÑÈóÆÈ¢ò Âú®ÊòéÁôΩ‰∫ÜËÆ°ÁÆóÊú∫ÁΩëÁªú‰∏∫‰ªÄ‰πàË¶ÅËøôÂá†Â±ÇÊ®°Âûã‰πãÂêéÔºåÊàë‰ª¨ÂÜçÂõûÂà∞‰∏ÄÂºÄÂßãÔºåÂ¶Ç‰Ωï‰øùËØÅÂÆâÂÖ®„ÄÅÂèØÈù†„ÄÅÂÆåÊï¥Âú∞‰º†Ëæì‰ø°ÊÅØÂë¢Ôºü ÂæàÊòæÁÑ∂Ôºå‰∏äÈù¢ÊèêÂà∞ÁöÑÔºåÂè™ÊòØ‰øùËØÅ‰ø°ÊÅØËÉΩÊâæÂà∞ÂØπÊñπ‰∏ªÊú∫ÂíåÁ´ØÂè£Ôºå‰ΩÜÊòØËøô‰∏™‰ø°ÊÅØ‰∏≠ÈÄîË¢´Êã¶Êà™‰∫Ü„ÄÅÁîöËá≥Ë¢´ÁØ°Êîπ‰∫Ü„ÄÅ‰ø°ÊÅØÂª∂Ëøü‰∫ÜÔºàÂá†ÂàÜÈíüÊàñËÄÖÂá†‰∏™Â∞èÊó∂ÔºåÊàñËÄÖÂá†‰∏™‰∏ñÁ∫™Ôºâ„ÄÅÁΩëÁªú‰∏çÈÄöÊàñËÄÖÊåÇ‰∫ÜÔºå‰ø°ÊÅØËá™Â∑±ÂèØ‰∏ç‰ºöÂëäËØâ‰Ω†‰ªñÊåÇ‰∫ÜÊàñËÄÖË¶ÅËøüÂà∞‰∏Ä‰ºöÔºåÂ¶ÇÊûúÊ≤°Êúâ‰∏Ä‰∏™ÂçèËÆÆÊù•‰øùÈöúÂèØÈù†ÊÄßÔºåÈÇ£‰πàÊàëËøôÊù°Ê∂àÊÅØÂèëÂá∫ÂéªÔºåËÉΩ‰∏çËÉΩÂà∞„ÄÅËÉΩ‰∏çËÉΩÂèäÊó∂Âà∞„ÄÅËÉΩ‰∏çËÉΩÂÆåÊï¥Âà∞„ÄÅËÉΩ‰∏çËÉΩ‰∏çË¢´ÁØ°ÊîπÂà∞Á≠âËøô‰∫õÈóÆÈ¢òÂ∞Ü‰ºöÈÄ†ÊàêÁÅæÈöæÔºåÁΩëÁªú‰º†Ëæì‰πüÂ∞±Ê≤°Êúâ‰∫ÜÊÑè‰πâ„ÄÇ ËÆ°ÁÆóÊú∫ÁöÑÂâçËæà‰ª¨Ôºå‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊé™ÊñΩÊù•Â∞ΩÂèØËÉΩ‰øùËØÅ‰ø°ÊÅØËÉΩÊ≠£Á°ÆÈÄÅËææ„ÄÇ 2.2 Êï∞ÊçÆÊ†°È™å È¶ñÂÖàÂú®Êï∞ÊçÆÈìæË∑ØÂ±ÇÔºåÂèØ‰ª•ÈÄöËøáÂêÑÁßçÊ†°È™åÔºåÊØîÂ¶ÇÂ•áÂÅ∂Ê†°È™åÁ≠âÊâãÊÆµÊù•Âà§Êñ≠Êï∞ÊçÆÂåÖ‰º†ÁöÑÊòØÂê¶Ê≠£Á°Æ„ÄÇ 2.3 Êï∞ÊçÆÂèØÈù†ÊÄß Â•Ω‰∫ÜÔºåËß£ÂÜ≥‰∫ÜÊï∞ÊçÆÊòØÂê¶Ê≠£Á°Æ‰πãÂêéÔºå‰ΩÜÊòØËøò‰∏çËÉΩ‰øùËØÅÁ∫øË∑ØÊòØÂèØÈù†ÁöÑÔºåÂä†ÂÖ•Êüê‰∏™ÂåÖÊ≤°ÂèëÂá∫ÂéªÊàñËÄÖÂèëÈîô‰∫ÜÔºåÂ∫îËØ•Êúâ‰∏Ä‰∏™Âá∫ÈîôÈáç‰º†Êú∫Âà∂Ôºå‰øùËØÅ‰ø°ÊÅØ‰º†ËæìÁöÑÂèØÈù†ÊÄß„ÄÇËøôÂ∞±ÂºïÂá∫‰∫ÜTCPÂçèËÆÆ„ÄÇ TCPÔºàTransmission Control Protocol ‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºâÊòØ‰∏ÄÁßçÈù¢ÂêëËøûÊé•ÁöÑ„ÄÅÂèØÈù†ÁöÑ„ÄÅÂü∫‰∫éÂ≠óËäÇÊµÅÁöÑ‰º†ËæìÂ±ÇÈÄö‰ø°ÂçèËÆÆ„ÄÇ ‰∏ãÈù¢Êù•ÁúãÁúãTCPÊòØÂ¶Ç‰ΩïËß£ÂÜ≥‰∏¢ÂåÖ„ÄÅÈáçÂ§çÂåÖ„ÄÅÂá∫Èîô„ÄÅ‰π±Â∫èÁ≠â‰∏çÂèØÈù†ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÁöÑ„ÄÇ ‰∏â„ÄÅÊªëÂä®Á™óÂè£ÂçèËÆÆÁöÑÊèêÂá∫ ËøôÂ∞±ÂºïÂá∫‰∫ÜTCP‰∏≠ÊúÄÁªàÁöÑ‰∏Ä‰∏™‰∏úË•øÔºöÊªëÂä®Á™óÂè£ÂçèËÆÆ„ÄÇ 3.1 Êú¥Á¥†ÁöÑÊñπÊ≥ïÊù•Á°Æ‰øùÂèØÈù†ÊÄß ÂÖà‰ªéÁÆÄÂçïÁöÑËßíÂ∫¶Âá∫ÂèëÔºåËá™Â∑±ÊÉ≥‰∏Ä‰∏ãÔºåÂ¶Ç‰Ωï‰øùËØÅ‰∏ç‰∏¢ÂåÖ„ÄÅ‰∏ç‰π±Â∫è„ÄÇ ÊåâÁÖßÈ°∫Â∫èÔºåÂèëÈÄÅ‰∏Ä‰∏™Á°ÆËÆ§‰∏Ä‰∏™ÔºåÊòæÁÑ∂ÔºåÂêûÂêêÈáèÈùûÂ∏∏‰Ωé„ÄÇÈÇ£‰πàÔºå‰∏ÄÊ¨°ÊÄßÂèëÂá†‰∏™ÂåÖÔºåÁÑ∂Âêé‰∏ÄËµ∑Á°ÆËÆ§Âë¢Ôºü 3.2 ÊîπËøõÊñπÊ°à ÈÇ£‰πàÂ∞±ÂºïÂá∫Á¨¨‰∫å‰∏™ÈóÆÈ¢òÔºåÊàë‰∏ÄÊ¨°ÊÄßÂèëÂá†‰∏™ÂåÖÂêàÈÄÇÂë¢ÔºüÂ∞±ËøôÂºïÂá∫‰∫ÜÊªëÂä®Á™óÂè£„ÄÇ Âõõ„ÄÅÊï∞ÊçÆÂåÖÁºñÂè∑ÂíåÈáç‰º†Êú∫Âà∂ 4.1 Êï∞ÊçÆÂåÖÁºñÂè∑ Âú®ËØ¥ÊòéÊªëÂä®Á™óÂè£ÂéüÁêÜ‰πãÂâçÔºåÂøÖÈ°ªË¶ÅËØ¥‰∏Ä‰∏ãTCPÊï∞ÊçÆÂåÖÁöÑÁºñÂè∑SEQ„ÄÇ Êàë‰ª¨Áü•ÈÅìÔºåÁî±‰∫é‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÂ§ßÂ∞èÈôêÂà∂ÔºåÊâÄ‰ª•ÊØè‰∏™ÂåÖÊâøËΩΩÁöÑÊï∞ÊçÆÊòØÊúâÈôêÁöÑÔºåÂ¶ÇÊûúÂèë‰∏Ä‰∏™ÂæàÂ§ßÁöÑÂåÖÔºåÂøÖÁÑ∂ÊòØË¶ÅÊãÜÂàÜÁöÑ„ÄÇ ÂèëÈÄÅÁöÑÊó∂ÂÄôÔºåTCP ÂçèËÆÆ‰∏∫ÊØè‰∏™ÂåÖÁºñÂè∑Ôºàsequence numberÔºåÁÆÄÁß∞ SEQÔºâÔºå‰ª•‰æøÊé•Êî∂ÁöÑ‰∏ÄÊñπÊåâÁÖßÈ°∫Â∫èËøòÂéü„ÄÇ‰∏á‰∏ÄÂèëÁîü‰∏¢ÂåÖÔºå‰πüÂèØ‰ª•Áü•ÈÅì‰∏¢Â§±ÁöÑÊòØÂì™‰∏Ä‰∏™ÂåÖ„ÄÇ Á¨¨‰∏Ä‰∏™ÂåÖÁöÑÁºñÂè∑ÊòØ‰∏Ä‰∏™ÈöèÊú∫Êï∞„ÄÇ‰∏∫‰∫Ü‰æø‰∫éÁêÜËß£ÔºåËøôÈáåÂ∞±ÊääÂÆÉÁß∞‰∏∫1Âè∑ÂåÖ„ÄÇÂÅáÂÆöËøô‰∏™ÂåÖÁöÑË¥üËΩΩÈïøÂ∫¶ÊòØ100Â≠óËäÇÔºåÈÇ£‰πàÂèØ‰ª•Êé®ÁÆóÂá∫‰∏ã‰∏Ä‰∏™ÂåÖÁöÑÁºñÂè∑Â∫îËØ•ÊòØ101„ÄÇËøôÂ∞±ÊòØËØ¥ÔºåÊØè‰∏™Êï∞ÊçÆÂåÖÈÉΩÂèØ‰ª•ÂæóÂà∞‰∏§‰∏™ÁºñÂè∑ÔºöËá™Ë∫´ÁöÑÁºñÂè∑Ôºå‰ª•Âèä‰∏ã‰∏Ä‰∏™ÂåÖÁöÑÁºñÂè∑„ÄÇÊé•Êî∂ÊñπÁî±Ê≠§Áü•ÈÅìÔºåÂ∫îËØ•ÊåâÁÖß‰ªÄ‰πàÈ°∫Â∫èÂ∞ÜÂÆÉ‰ª¨ËøòÂéüÊàêÂéüÂßãÊñá‰ª∂„ÄÇ 4.2 Êï∞ÊçÆÈáç‰º†Êú∫Âà∂ TCPÂçèËÆÆÂ∞±ÊòØÊ†πÊçÆËøô‰∫õÁºñÂè∑Êù•ÈáçÊñ∞ËøòÂéüÊñá‰ª∂ÁöÑ„ÄÇÂπ∂‰∏îÊé•Êî∂Á´Ø‰øùËØÅÈ°∫Â∫èÊÄßËøîÂõûACKÁ°ÆËÆ§ÔºåÊØîÂ¶ÇÊúâ‰∏§‰∏™ÂåÖÂèëËøáÂéªÔºå‰∏∫1Âè∑Âíå2Âè∑Ôºå2Âè∑Êé•Êî∂ÊàêÂäüÔºå‰ΩÜÊòØÂèëÁé∞1Âè∑ÂåÖËøòÊ≤°Êé•Êî∂Âà∞ÔºåÊâÄ‰ª•2Âè∑ÁöÑACKÊòØ‰∏ç‰ºöÂèëÂõûÂéªÁöÑÔºåËøô‰∏™Êó∂ÂÄôÔºåÂ¶ÇÊûúÂú®Èáç‰º†Êó∂Èó¥ÂÜÖÊî∂Âà∞1Âè∑‰∫ÜÔºåÈÇ£‰πàÂ∞±ÊääËøô‰∏§‰∏™ÂåÖÁöÑACKÈÉΩËøîÂõûÂõûÂéªÔºåÂ¶ÇÊûúË∂ÖÊó∂‰∫ÜÔºåÂ∞±Èáç‰º†1Âè∑ÂåÖ„ÄÇÁü•ÈÅì1Âè∑ÂåÖÊé•Êî∂ÊàêÂäüÔºåÂêéÁª≠ÁöÑÊâç‰ºöËøîÂõûACK„ÄÇ ÂÖ∑‰ΩìÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÂë¢Ôºü ÂâçÈù¢ËØ¥ËøáÔºåÊØè‰∏Ä‰∏™Êï∞ÊçÆÂåÖÈÉΩÂ∏¶Êúâ‰∏ã‰∏Ä‰∏™Êï∞ÊçÆÂåÖÁöÑÁºñÂè∑„ÄÇÂ¶ÇÊûú‰∏ã‰∏Ä‰∏™Êï∞ÊçÆÂåÖÊ≤°ÊúâÊî∂Âà∞ÔºåÈÇ£‰πà ACK ÁöÑÁºñÂè∑Â∞±‰∏ç‰ºöÂèëÁîüÂèòÂåñ„ÄÇ ‰∏æ‰æãÊù•ËØ¥ÔºåÁé∞Âú®Êî∂Âà∞‰∫Ü4Âè∑ÂåÖÔºå‰ΩÜÊòØÊ≤°ÊúâÊî∂Âà∞5Âè∑ÂåÖ„ÄÇACK Â∞±‰ºöËÆ∞ÂΩïÔºåÊúüÂæÖÊî∂Âà∞5Âè∑ÂåÖ„ÄÇËøá‰∫Ü‰∏ÄÊÆµÊó∂Èó¥Ôºå5Âè∑ÂåÖÊî∂Âà∞‰∫ÜÔºåÈÇ£‰πà‰∏ã‰∏ÄËΩÆ ACK ‰ºöÊõ¥Êñ∞ÁºñÂè∑„ÄÇÂ¶ÇÊûú5Âè∑ÂåÖËøòÊòØÊ≤°Êî∂Âà∞Ôºå‰ΩÜÊòØÊî∂Âà∞‰∫Ü6Âè∑ÂåÖÊàñ7Âè∑ÂåÖÔºåÈÇ£‰πà ACK ÈáåÈù¢ÁöÑÁºñÂè∑‰∏ç‰ºöÂèòÂåñÔºåÊÄªÊòØÊòæÁ§∫5Âè∑ÂåÖ„ÄÇËøô‰ºöÂØºËá¥Â§ßÈáèÈáçÂ§çÂÜÖÂÆπÁöÑ ACK„ÄÇ Â¶ÇÊûúÂèëÈÄÅÊñπÂèëÁé∞Êî∂Âà∞‰∏â‰∏™ËøûÁª≠ÁöÑÈáçÂ§ç ACKÔºåÊàñËÄÖË∂ÖÊó∂‰∫ÜËøòÊ≤°ÊúâÊî∂Âà∞‰ªª‰Ωï ACKÔºåÂ∞±‰ºöÁ°ÆËÆ§‰∏¢ÂåÖÔºåÂç≥5Âè∑ÂåÖÈÅóÂ§±‰∫ÜÔºå‰ªéËÄåÂÜçÊ¨°ÂèëÈÄÅËøô‰∏™ÂåÖ„ÄÇÈÄöËøáËøôÁßçÊú∫Âà∂ÔºåTCP ‰øùËØÅ‰∫Ü‰∏ç‰ºöÊúâÊï∞ÊçÆÂåÖ‰∏¢Â§±„ÄÇ ÔºàÂõæÁâáËØ¥ÊòéÔºöHost B Ê≤°ÊúâÊî∂Âà∞100Âè∑Êï∞ÊçÆÂåÖÔºå‰ºöËøûÁª≠ÂèëÂá∫Áõ∏ÂêåÁöÑ ACKÔºåËß¶Âèë Host A ÈáçÂèë100Âè∑Êï∞ÊçÆÂåÖ„ÄÇÔºâ ‰∫î„ÄÅÊÖ¢ÂêØÂä® ‰∏ãÈù¢ÂÜçÊù•ËØ¥ËØ¥ÊÖ¢ÂêØÂä®„ÄÇ ÊúçÂä°Âô®ÂèëÈÄÅÊï∞ÊçÆÂåÖÔºåÂΩìÁÑ∂Ë∂äÂø´Ë∂äÂ•ΩÔºåÊúÄÂ•Ω‰∏ÄÊ¨°ÊÄßÂÖ®ÂèëÂá∫Âéª„ÄÇ‰ΩÜÊòØÔºåÂèëÂæóÂ§™Âø´ÔºåÂ∞±ÊúâÂèØËÉΩ‰∏¢ÂåÖ„ÄÇÂ∏¶ÂÆΩÂ∞è„ÄÅË∑ØÁî±Âô®ËøáÁÉ≠„ÄÅÁºìÂ≠òÊ∫¢Âá∫Á≠âËÆ∏Â§öÂõ†Á¥†ÈÉΩ‰ºöÂØºËá¥‰∏¢ÂåÖ„ÄÇÁ∫øË∑Ø‰∏çÂ•ΩÁöÑËØùÔºåÂèëÂæóË∂äÂø´Ôºå‰∏¢ÂæóË∂äÂ§ö„ÄÇ ÊúÄÁêÜÊÉ≥ÁöÑÁä∂ÊÄÅÊòØÔºåÂú®Á∫øË∑ØÂÖÅËÆ∏ÁöÑÊÉÖÂÜµ‰∏ãÔºåËææÂà∞ÊúÄÈ´òÈÄüÁéá„ÄÇ‰ΩÜÊòØÊàë‰ª¨ÊÄé‰πàÁü•ÈÅìÔºåÂØπÊñπÁ∫øË∑ØÁöÑÁêÜÊÉ≥ÈÄüÁéáÊòØÂ§öÂ∞ëÂë¢ÔºüÁ≠îÊ°àÂ∞±ÊòØÊÖ¢ÊÖ¢ËØï„ÄÇ TCP ÂçèËÆÆ‰∏∫‰∫ÜÂÅöÂà∞ÊïàÁéá‰∏éÂèØÈù†ÊÄßÁöÑÁªü‰∏ÄÔºåËÆæËÆ°‰∫Ü‰∏Ä‰∏™ÊÖ¢ÂêØÂä®Ôºàslow startÔºâÊú∫Âà∂„ÄÇÂºÄÂßãÁöÑÊó∂ÂÄôÔºåÂèëÈÄÅÂæóËæÉÊÖ¢ÔºåÁÑ∂ÂêéÊ†πÊçÆ‰∏¢ÂåÖÁöÑÊÉÖÂÜµÔºåË∞ÉÊï¥ÈÄüÁéáÔºöÂ¶ÇÊûú‰∏ç‰∏¢ÂåÖÔºåÂ∞±Âä†Âø´ÂèëÈÄÅÈÄüÂ∫¶ÔºõÂ¶ÇÊûú‰∏¢ÂåÖÔºåÂ∞±Èôç‰ΩéÂèëÈÄÅÈÄüÂ∫¶„ÄÇ Linux ÂÜÖÊ†∏ÈáåÈù¢ËÆæÂÆö‰∫ÜÔºàÂ∏∏ÈáèTCP_INIT_CWNDÔºâÔºåÂàöÂºÄÂßãÈÄö‰ø°ÁöÑÊó∂ÂÄôÔºåÂèëÈÄÅÊñπ‰∏ÄÊ¨°ÊÄßÂèëÈÄÅ10‰∏™Êï∞ÊçÆÂåÖÔºåÂç≥&quot;ÂèëÈÄÅÁ™óÂè£&quot;ÁöÑÂ§ßÂ∞è‰∏∫10„ÄÇÁÑ∂ÂêéÂÅú‰∏ãÊù•ÔºåÁ≠âÂæÖÊé•Êî∂ÊñπÁöÑÁ°ÆËÆ§ÔºåÂÜçÁªßÁª≠ÂèëÈÄÅ„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊé•Êî∂ÊñπÊØèÊî∂Âà∞‰∏§‰∏™ TCP Êï∞ÊçÆÂåÖÔºåÂ∞±Ë¶ÅÂèëÈÄÅ‰∏Ä‰∏™Á°ÆËÆ§Ê∂àÊÅØ„ÄÇ&quot;Á°ÆËÆ§&quot;ÁöÑËã±ËØ≠ÊòØ acknowledgementÔºåÊâÄ‰ª•Ëøô‰∏™Á°ÆËÆ§Ê∂àÊÅØÂ∞±ÁÆÄÁß∞ ACK„ÄÇ ACK Êê∫Â∏¶‰∏§‰∏™‰ø°ÊÅØÔºö ÊúüÂæÖË¶ÅÊî∂Âà∞‰∏ã‰∏Ä‰∏™Êï∞ÊçÆÂåÖÁöÑÁºñÂè∑ Êé•Êî∂ÊñπÁöÑÊé•Êî∂Á™óÂè£ÁöÑÂâ©‰ΩôÂÆπÈáè ÂèëÈÄÅÊñπÊúâ‰∫ÜËøô‰∏§‰∏™‰ø°ÊÅØÔºåÂÜçÂä†‰∏äËá™Â∑±Â∑≤ÁªèÂèëÂá∫ÁöÑÊï∞ÊçÆÂåÖÁöÑÊúÄÊñ∞ÁºñÂè∑ÔºåÂ∞±‰ºöÊé®ÊµãÂá∫Êé•Êî∂ÊñπÂ§ßÊ¶ÇÁöÑÊé•Êî∂ÈÄüÂ∫¶Ôºå‰ªéËÄåÈôç‰ΩéÊàñÂ¢ûÂä†ÂèëÈÄÅÈÄüÁéá„ÄÇËøôË¢´Áß∞‰∏∫&quot;ÂèëÈÄÅÁ™óÂè£&quot;ÔºåËøô‰∏™Á™óÂè£ÁöÑÂ§ßÂ∞èÊòØÂèØÂèòÁöÑ„ÄÇ Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÔºåÂèëÈÄÅÂèëÂíåÊé•Êî∂ÊñπÈÉΩÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÁºìÂÜ≤Âå∫ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Á™óÂè£„ÄÇÊ†πÊçÆÊé•Êî∂ÈÄüÂ∫¶ÂèØ‰ª•Ë∞ÉÊï¥ÂèëÈÄÅÈÄüÂ∫¶ÔºåÈÄêÊ∏êËææÂà∞ËøôÊù°Á∫øË∑ØÊúÄÈ´òÁöÑ‰º†ËæìÈÄüÁéá„ÄÇ okÔºå‰∏ãÈù¢Â∞±ÂèØ‰ª•Á†îÁ©∂‰∏Ä‰∏ãÊªëÂä®Á™óÂè£‰∫Ü„ÄÇ ÂÖ≠„ÄÅÊªëÂä®Á™óÂè£ÂéüÁêÜ Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºö ÔºàÂ¶ÇÂõæÔºå123Ë°®Á§∫Â∑≤ÁªèÊ≠£Â∏∏ÂèëÈÄÅÂπ∂‰∏îÊî∂Âà∞‰∫ÜACKÁ°ÆËÆ§„ÄÇ4567Â±û‰∫éÂ∑≤ÂèëÈÄÅ‰ΩÜÊòØËøòÊ≤°ÊúâÊî∂Âà∞ACK„ÄÇ8910Ë°®Á§∫ÂæÖÂèëÈÄÅ„ÄÇËøô‰∏™Á™óÂè£ÂΩìÂâçÈïøÂ∫¶‰∏∫7.Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºå4Âè∑ÂåÖÊî∂Âà∞ACKÔºåÈÇ£‰πàÁ™óÂè£Â∞±‰ºöÂè≥Áßª‰∏ÄÊ†º„ÄÇÔºâ ‰ΩÜÊòØÂæÄÂæÄ‰ºöÂá∫Áé∞‰∏Ä‰∫õÈóÆÈ¢òÔºåÊØîÂ¶Ç5Âè∑ÂåÖËøüËøüÊî∂‰∏çÂà∞ACKÔºåÂú®Êé•Êî∂Á´ØÂèØËÉΩÊòØÊ≤°ÊúâÊî∂Âà∞5Âè∑ÂåÖÔºå‰ΩÜÊòØÂèØËÉΩ‰ºöÊî∂Âà∞6Âè∑ÂåÖÁîöËá≥ÊòØ7„ÄÅ8Âè∑ÂåÖÔºåÈÇ£‰πàÊ≠§Êó∂Âè™ËÉΩÁ≠âÂæÖ5Âè∑ÂåÖÔºåÂ¶ÇÊûú5Âè∑ÂåÖÈ°∫Âà©Âà∞Ëææ‰∫ÜÔºåÈÇ£‰πàÂ∞±Êää5678Âè∑ÂåÖÁöÑACKÈÉΩÂèëÁªôÂèëÈÄÅÁ´ØÔºåÈÇ£‰πàÂèëÈÄÅÁ´ØÊªëÂä®Á™óÂè£ÂêëÂè≥Âè≥ÁßªÂõõÊ†º„ÄÇÂ¶ÇÊûúËøüËøüÊî∂‰∏çÂà∞5Âè∑ÂåÖÔºåÂè™ËÉΩÈáç‰º†„ÄÇ ‰ª•‰∏äÂ∞±ÊòØÂÖ≥‰∫éTCP‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÂá∫ÈîôÈáç‰º†„ÄÅÁºñÂè∑„ÄÅÊÖ¢ÂêØÂä®‰ª•ÂèäÊªëÂä®Á™óÂè£„ÄÇËøô‰∫õ‰øùËØÅ‰∫ÜÊï∞ÊçÆ‰º†ËæìÁöÑÂèØÈù†ÊÄß„ÄÇ Êï¥ÁêÜËá™Ôºöhttp://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[httpÁöÑÂâç‰∏ñ‰ªäÁîü]]></title>
    <url>%2F2019%2F01%2F17%2Fnetwork%2F3.http%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨‰∏âÁØáÊñáÁ´†„ÄÇ‰Ωú‰∏∫‰∏Ä‰∏™ÂêéÁ´ØÊîªÂüéÁãÆÔºåÊØèÂ§©Êâì‰∫§ÈÅìÊúÄÂ§öÁöÑÂ∞±ÊòØHTTPÂçèËÆÆÔºåÂú®Â¶Ç‰ªäÁÅ´ÁÉ≠ÁöÑÂæÆÊúçÂä°ÂÆûÁé∞ÊñπÊ°à‰∏≠ÔºåÈô§‰∫ÜÈòøÈáåÁöÑdubboÔºåÂ∞±ÊòØspring cloudÔºåËÄåspring cloudÁõÆÂâçÈÄÇÁî®ÁöÑÊúçÂä°Èó¥ÈÄö‰ø°ÊñπÂºè‰πüÂ∞±ÊòØÂü∫‰∫éHTTP ÁöÑ restfulÊé•Âè£Êù•ÂÆûÁé∞„ÄÇÂπ∂‰∏î‰Ωú‰∏∫ÊµèËßàÂô®‰∏äÁî®ÁöÑÊúÄÂ§öÁöÑÂçèËÆÆÔºåÊó†ËÆ∫ÊòØÂâçÁ´Ø„ÄÅÂêéÁ´ØËøòÊòØÊµãËØïÈÉΩÂ∫îËØ•ÂéªÁÜüÊÇâÂÆÉÔºåËΩØ‰ª∂ÁöÑÂèëÂ±ïÊòØÂæ™Â∫èÊ∏êËøõÁöÑÔºåÊØèÊ¨°ÁöÑËø≠‰ª£ÂçáÁ∫ßÈÉΩÊòØ‰∏∫‰∫ÜËß£ÂÜ≥‰∏ä‰∏ÄÁâàÊú¨ÁöÑÁóõÁÇπÔºåHTTPÂçèËÆÆÁöÑÂèëÂ±ï‰πüÊòØÂ¶ÇÊ≠§ÔºåÊú¨Á´†ÁùÄÈáçËÆ≤Ëß£HTTPÁöÑÂâç‰∏ñ‰ªäÁîüÔºåËÆ©Êàë‰ª¨Êõ¥Âä†‰∫ÜËß£HTTP„ÄÇ HTTP ÊòØÂü∫‰∫é TCP/IP ÂçèËÆÆÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆ„ÄÇÂÆÉ‰∏çÊ∂âÂèäÊï∞ÊçÆÂåÖÔºàpacketÔºâ‰º†ËæìÔºå‰∏ªË¶ÅËßÑÂÆö‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®‰πãÈó¥ÁöÑÈÄö‰ø°Ê†ºÂºèÔºåÈªòËÆ§‰ΩøÁî®80Á´ØÂè£„ÄÇ ‰∏Ä„ÄÅHTTP/0.9 1.1 ÁÆÄ‰ªã ËøôÊòØÁ¨¨‰∏Ä‰∏™ÂÆöÁ®øÁöÑHTTPÂçèËÆÆ„ÄÇ ÂÜÖÂÆπÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™Êúâ‰∏Ä‰∏™ÂëΩ‰ª§GET Ê≤°ÊúâHEADERÁ≠âÊèèËø∞Êï∞ÊçÆÁöÑ‰ø°ÊÅØ ÊúçÂä°Âô®ÂèëÈÄÅÂÆåÊØïÔºåÂ∞±ÂÖ≥Èó≠TCPËøûÊé•Ôºà‰∏Ä‰∏™HTTPËØ∑Ê±ÇÂú®‰∏Ä‰∏™TCPËøûÊé•‰∏≠ÂÆåÊàêÔºâ 1.2 ËØ∑Ê±ÇÊ†ºÂºè ÊØîÂ¶ÇÂèëËµ∑‰∏Ä‰∏™GETËØ∑Ê±ÇÔºö GET /index.html ‰∏äÈù¢ÂëΩ‰ª§Ë°®Á§∫ÔºåTCP ËøûÊé•ÔºàconnectionÔºâÂª∫Á´ãÂêéÔºåÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®ËØ∑Ê±ÇÔºàrequestÔºâÁΩëÈ°µindex.html„ÄÇ 1.3 ÂìçÂ∫îÊ†ºÂºè ÂçèËÆÆËßÑÂÆöÔºåÊúçÂä°Âô®Âè™ËÉΩÂõûÂ∫îHTMLÊ†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰∏çËÉΩÂõûÂ∫îÂà´ÁöÑÊ†ºÂºè„ÄÇ 123&lt;html&gt; &lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt; ÊúçÂä°Âô®ÂèëÈÄÅÂÆåÊØïÔºåÂ∞±ÂÖ≥Èó≠TCPËøûÊé•„ÄÇ ‰∫å„ÄÅHTTP/1.0 2.1 ÁÆÄ‰ªã Ë∑üÁé∞Âú®ÊØîËæÉÊôÆÈÅçÈÄÇÁî®ÁöÑ1.1ÁâàÊú¨Â∑≤ÁªèÁõ∏Â∑Æ‰∏çÂ§ö„ÄÇ Â¢ûÂä†ÂæàÂ§öÂëΩ‰ª§ÔºåÊØîÂ¶ÇPOST„ÄÅHEADÁ≠âÂëΩ‰ª§ Â¢ûÂä†status code Âíå header Â§öÂ≠óÁ¨¶ÈõÜÊîØÊåÅ„ÄÅÂ§öÈÉ®ÂàÜÂèëÈÄÅ„ÄÅÊùÉÈôê„ÄÅÁºìÂ≠òÁ≠â È¶ñÂÖàÔºå‰ªª‰ΩïÊ†ºÂºèÁöÑÂÜÖÂÆπÈÉΩÂèØ‰ª•ÂèëÈÄÅ„ÄÇËøô‰ΩøÂæó‰∫íËÅîÁΩë‰∏ç‰ªÖÂèØ‰ª•‰º†ËæìÊñáÂ≠óÔºåËøòËÉΩ‰º†ËæìÂõæÂÉè„ÄÅËßÜÈ¢ë„ÄÅ‰∫åËøõÂà∂Êñá‰ª∂„ÄÇËøô‰∏∫‰∫íËÅîÁΩëÁöÑÂ§ßÂèëÂ±ïÂ•†ÂÆö‰∫ÜÂü∫Á°Ä„ÄÇ ÂÖ∂Ê¨°ÔºåÈô§‰∫ÜGETÂëΩ‰ª§ÔºåËøòÂºïÂÖ•‰∫ÜPOSTÂëΩ‰ª§ÂíåHEADÂëΩ‰ª§Ôºå‰∏∞ÂØå‰∫ÜÊµèËßàÂô®‰∏éÊúçÂä°Âô®ÁöÑ‰∫íÂä®ÊâãÊÆµ„ÄÇ ÂÜçÊ¨°ÔºåHTTPËØ∑Ê±ÇÂíåÂõûÂ∫îÁöÑÊ†ºÂºè‰πüÂèò‰∫Ü„ÄÇÈô§‰∫ÜÊï∞ÊçÆÈÉ®ÂàÜÔºåÊØèÊ¨°ÈÄö‰ø°ÈÉΩÂøÖÈ°ªÂåÖÊã¨Â§¥‰ø°ÊÅØÔºàHTTP headerÔºâÔºåÁî®Êù•ÊèèËø∞‰∏Ä‰∫õÂÖÉÊï∞ÊçÆ„ÄÇ ÂÖ∂‰ªñÁöÑÊñ∞Â¢ûÂäüËÉΩËøòÂåÖÊã¨Áä∂ÊÄÅÁ†ÅÔºàstatus codeÔºâ„ÄÅÂ§öÂ≠óÁ¨¶ÈõÜÊîØÊåÅ„ÄÅÂ§öÈÉ®ÂàÜÂèëÈÄÅÔºàmulti-part typeÔºâ„ÄÅÊùÉÈôêÔºàauthorizationÔºâ„ÄÅÁºìÂ≠òÔºàcacheÔºâ„ÄÅÂÜÖÂÆπÁºñÁ†ÅÔºàcontent encodingÔºâÁ≠â„ÄÇ 2.2 ËØ∑Ê±ÇÊ†ºÂºè ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™1.0ÁâàÁöÑHTTPËØ∑Ê±ÇÁöÑ‰æãÂ≠ê„ÄÇ 123GET / HTTP/1.0User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)Accept: */* ÂèØ‰ª•ÁúãÂà∞ÔºåËøô‰∏™Ê†ºÂºè‰∏é0.9ÁâàÊúâÂæàÂ§ßÂèòÂåñ„ÄÇ Á¨¨‰∏ÄË°åÊòØËØ∑Ê±ÇÂëΩ‰ª§ÔºåÂøÖÈ°ªÂú®Â∞æÈÉ®Ê∑ªÂä†ÂçèËÆÆÁâàÊú¨ÔºàHTTP/1.0Ôºâ„ÄÇÂêéÈù¢Â∞±ÊòØÂ§öË°åÂ§¥‰ø°ÊÅØÔºåÊèèËø∞ÂÆ¢Êà∑Á´ØÁöÑÊÉÖÂÜµ„ÄÇ ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•‰ΩøÁî®AcceptÂ≠óÊÆµÂ£∞ÊòéËá™Â∑±ÂèØ‰ª•Êé•ÂèóÂì™‰∫õÊï∞ÊçÆÊ†ºÂºè„ÄÇ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂÆ¢Êà∑Á´ØÂ£∞ÊòéËá™Â∑±ÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇ 2.3 ÂìçÂ∫îÊ†ºÂºè ÊúçÂä°Âô®ÁöÑÂõûÂ∫îÂ¶Ç‰∏ãÔºö 12345678910HTTP/1.0 200 OK Content-Type: text/plainContent-Length: 137582Expires: Thu, 05 Dec 1997 16:00:00 GMTLast-Modified: Wed, 5 August 1996 15:55:28 GMTServer: Apache 0.84&lt;html&gt; &lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt; ÂõûÂ∫îÁöÑÊ†ºÂºèÊòØ&quot;Â§¥‰ø°ÊÅØ + ‰∏Ä‰∏™Á©∫Ë°åÔºà\r\nÔºâ + Êï∞ÊçÆ&quot;„ÄÇÂÖ∂‰∏≠ÔºåÁ¨¨‰∏ÄË°åÊòØ&quot;ÂçèËÆÆÁâàÊú¨ + Áä∂ÊÄÅÁ†ÅÔºàstatus codeÔºâ + Áä∂ÊÄÅÊèèËø∞&quot;„ÄÇ 2.4 Content-Type Â≠óÊÆµ ÂÖ≥‰∫éÂ≠óÁ¨¶ÁöÑÁºñÁ†ÅÔºå1.0ÁâàËßÑÂÆöÔºåÂ§¥‰ø°ÊÅØÂøÖÈ°ªÊòØ ASCII Á†ÅÔºåÂêéÈù¢ÁöÑÊï∞ÊçÆÂèØ‰ª•ÊòØ‰ªª‰ΩïÊ†ºÂºè„ÄÇÂõ†Ê≠§ÔºåÊúçÂä°Âô®ÂõûÂ∫îÁöÑÊó∂ÂÄôÔºåÂøÖÈ°ªÂëäËØâÂÆ¢Êà∑Á´ØÔºåÊï∞ÊçÆÊòØ‰ªÄ‰πàÊ†ºÂºèÔºåËøôÂ∞±ÊòØContent-TypeÂ≠óÊÆµÁöÑ‰ΩúÁî®„ÄÇ 2.5 Áº∫ÁÇπ ÊØè‰∏™TCPËøûÊé•Âè™ËÉΩÂèëÈÄÅ‰∏Ä‰∏™ËØ∑Ê±Ç„ÄÇÂèëÈÄÅÊï∞ÊçÆÂÆåÊØïÔºåËøûÊé•Â∞±ÂÖ≥Èó≠ÔºåÂ¶ÇÊûúËøòË¶ÅËØ∑Ê±ÇÂÖ∂‰ªñËµÑÊ∫êÔºåÂ∞±ÂøÖÈ°ªÂÜçÊñ∞Âª∫‰∏Ä‰∏™ËøûÊé•„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊúâ‰∫õÊµèËßàÂô®Âú®ËØ∑Ê±ÇÊó∂ÔºåÁî®‰∫Ü‰∏Ä‰∏™ÈùûÊ†áÂáÜÁöÑConnectionÂ≠óÊÆµ„ÄÇ Connection: keep-alive Ëøô‰∏™Â≠óÊÆµË¶ÅÊ±ÇÊúçÂä°Âô®‰∏çË¶ÅÂÖ≥Èó≠TCPËøûÊé•Ôºå‰ª•‰æøÂÖ∂‰ªñËØ∑Ê±ÇÂ§çÁî®„ÄÇÊúçÂä°Âô®ÂêåÊ†∑ÂõûÂ∫îËøô‰∏™Â≠óÊÆµ„ÄÇ Connection: keep-alive ‰∏Ä‰∏™ÂèØ‰ª•Â§çÁî®ÁöÑTCPËøûÊé•Â∞±Âª∫Á´ã‰∫ÜÔºåÁõ¥Âà∞ÂÆ¢Êà∑Á´ØÊàñÊúçÂä°Âô®‰∏ªÂä®ÂÖ≥Èó≠ËøûÊé•„ÄÇ‰ΩÜÊòØÔºåËøô‰∏çÊòØÊ†áÂáÜÂ≠óÊÆµÔºå‰∏çÂêåÂÆûÁé∞ÁöÑË°å‰∏∫ÂèØËÉΩ‰∏ç‰∏ÄËá¥ÔºåÂõ†Ê≠§‰∏çÊòØÊ†πÊú¨ÁöÑËß£ÂÜ≥ÂäûÊ≥ï„ÄÇ ‰∏â„ÄÅHTTP/1.1 3.1 ÊåÅ‰πÖËøûÊé•ÂíåÁÆ°ÈÅìÊú∫Âà∂ ÊåÅ‰πÖËøûÊé•Ôºà‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠Ôºå‰∏Ä‰∏™HTTPËØ∑Ê±ÇÂ∞±ÂàõÂª∫‰∏Ä‰∏™TCPËøûÊé•ÔºåËØ∑Ê±ÇËøîÂõû‰πãÂêéÂ∞±ÂÖ≥Èó≠TCPËøûÊé•ÔºåÁÑ∂ËÄåÂª∫Á´ã‰∏ÄÊ¨°TCPËøûÊé•ÁöÑËøáÁ®ãÊòØÊØîËæÉËÄóÊó∂ÁöÑÔºåÊïàÁéá‰ºöÊØîËæÉ‰ΩéÔºåÁé∞Âú®Âª∫Á´ã‰∏Ä‰∏™TCPËøûÊé•ÂêéÔºåÂêéÈù¢ÁöÑHTTPËØ∑Ê±ÇÈÉΩÂèØ‰ª•Â§çÁî®Ëøô‰∏™TCPËøûÊé•ÔºåÂç≥ÂÖÅËÆ∏‰∫ÜÂú®Âêå‰∏Ä‰∏™ËøûÊé•ÈáåÈù¢ÂèëÈÄÅÂ§ö‰∏™ËØ∑Ê±ÇÔºå‰ºöÊèêÈ´òÊïàÁéáÔºâ pipelineÔºàËß£ÂÜ≥‰∫ÜÂêå‰∏Ä‰∏™TCPËøûÊé•‰∏≠ÂÆ¢Êà∑Á´ØÂèØ‰ª•ÂèëÈÄÅÂ§ö‰∏™HTTPËØ∑Ê±ÇÔºå‰ΩÜÊòØÂØπ‰∫éÊúçÂä°Á´ØÊù•ËØ¥ÔºåÂØπ‰∫éËøõÊù•ÁöÑËØ∑Ê±ÇË¶ÅÊåâÁÖßÈ°∫Â∫èËøõË°åÂÜÖÂÆπÁöÑËøîÂõûÔºåÂ¶ÇÊûúÂâç‰∏Ä‰∏™ËØ∑Ê±ÇÂ§ÑÁêÜÊó∂Èó¥ÈïøÔºåËÄåÂêé‰∏Ä‰∏™ËØ∑Ê±ÇÂ§ÑÁêÜÊó∂Èó¥Á´ØÔºåÂç≥‰æøÂêéÈù¢‰∏Ä‰∏™ËØ∑Ê±ÇÂ∑≤ÁªèÂ§ÑÁêÜÂÆåÊØï‰∫ÜÔºå‰πüË¶ÅÁ≠âÂæÖÂâç‰∏Ä‰∏™ËØ∑Ê±ÇÂ§ÑÁêÜÂÆåÊØïËøîÂõû‰ªñÊâçÂèØ‰ª•ËøîÂõûÁªìÊûúÔºåËøôÁßç‰∏≤Ë°åÁöÑÊñπÂºèÊØîËæÉÊÖ¢Ôºâ Âú®1.1ÁâàÊú¨‰ª•ÂâçÔºåÊØèÊ¨°HTTPËØ∑Ê±ÇÔºåÈÉΩ‰ºöÈáçÊñ∞Âª∫Á´ã‰∏ÄÊ¨°TCPËøûÊé•ÔºåÊúçÂä°Âô®ÂìçÂ∫îÂêéÔºåÂ∞±Á´ãÂàªÂÖ≥Èó≠„ÄÇ‰ºóÊâÄÂë®Áü•ÔºåÂª∫Á´ãTCPËøûÊé•ÁöÑÊñ∞Âª∫ÊàêÊú¨ÂæàÈ´òÔºåÂõ†‰∏∫ÈúÄË¶Å‰∏âÊ¨°Êè°ÊâãÔºåÂπ∂‰∏îÊúâÁùÄÊÖ¢ÂêØÂä®ÁöÑÁâπÊÄßÂØºËá¥ÂèëÈÄÅÈÄüÂ∫¶ËæÉÊÖ¢„ÄÇËÄå1.1ÁâàÊú¨Ê∑ªÂä†ÁöÑÊåÅ‰πÖËøûÊé•ÂäüËÉΩÂèØ‰ª•ËÆ©‰∏ÄÊ¨°TCPËøûÊé•‰∏≠ÂèëÈÄÅÂ§öÊù°HTTPËØ∑Ê±ÇÔºåÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÈªòËÆ§ÊòØÔºåÊéßÂà∂ÊåÅ‰πÖËøûÊé•ÁöÑConnectionÂ≠óÊÆµÈªòËÆ§ÂÄºÊòØkeep-aliveÔºå‰πüÂ∞±ÊòØËØ¥ÊòØÈªòËÆ§ÊâìÂºÄÊåÅ‰πÖËøûÊé•ÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÂÖ≥Èó≠ÔºåÂè™ÈúÄÂ∞ÜËØ•Â≠óÊÆµÁöÑÂÄºÊîπ‰∏∫close„ÄÇ Connection: close ËÄåÁÆ°ÈÅìÂåñÂàôËµã‰∫à‰∫ÜÂÆ¢Êà∑Á´ØÂú®‰∏Ä‰∏™TCPËøûÊé•‰∏≠ËøûÁª≠ÂèëÈÄÅÂ§ö‰∏™ËØ∑Ê±ÇÁöÑËÉΩÂäõÔºåËÄå‰∏çÈúÄË¶ÅÁ≠âÂà∞Ââç‰∏Ä‰∏™ËØ∑Ê±ÇÂìçÂ∫îÔºåËøôÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÊïàÁéá„ÄÇÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºåËôΩÁÑ∂ÂÆ¢Êà∑Á´ØÂèØ‰ª•ËøûÁª≠ÂèëÈÄÅÂ§ö‰∏™ËØ∑Ê±ÇÔºå‰ΩÜÊòØÊúçÂä°Âô®ËøîÂõû‰æùÁÑ∂ÊòØÊåâÁÖßÂèëÈÄÅÁöÑÈ°∫Â∫èËøîÂõû„ÄÇÔºàÂº∫Ë∞ÉÁöÑÊòØrequest‰∏çÈúÄË¶ÅÁ≠âÂæÖ‰∏ä‰∏Ä‰∏™requestÁöÑresponseÔºåÂÖ∂ÂÆûÂèëÈÄÅÁöÑrequestËøòÊòØÊúâÈ°∫Â∫èÁöÑÔºåÊúçÂä°Á´ØÊåâÁÖßËøô‰∏™È°∫Â∫èÊé•Êî∂Ôºå‰æùÊ¨°ËøîÂõûÂìçÂ∫îÔºâ HTTP/1.1ÂÖÅËÆ∏Â§ö‰∏™httpËØ∑Ê±ÇÈÄöËøá‰∏Ä‰∏™Â•óÊé•Â≠óÂêåÊó∂Ë¢´ËæìÂá∫ ÔºåËÄå‰∏çÁî®Á≠âÂæÖÁõ∏Â∫îÁöÑÂìçÂ∫î„ÄÇÁÑ∂ÂêéËØ∑Ê±ÇËÄÖÂ∞±‰ºöÁ≠âÂæÖÂêÑËá™ÁöÑÂìçÂ∫îÔºåËøô‰∫õÂìçÂ∫îÊòØÊåâÁÖß‰πãÂâçËØ∑Ê±ÇÁöÑÈ°∫Â∫è‰æùÊ¨°Âà∞Ëææ„ÄÇÔºàmeÔºöÊâÄÊúâËØ∑Ê±Ç‰øùÊåÅ‰∏Ä‰∏™FIFOÁöÑÈòüÂàóÔºå‰∏Ä‰∏™ËØ∑Ê±ÇÂèëÈÄÅÂÆå‰πãÂêéÔºå‰∏çÂøÖÁ≠âÂæÖËøô‰∏™ËØ∑Ê±ÇÁöÑÂìçÂ∫îË¢´Êé•ÂèóÂà∞Ôºå‰∏ã‰∏Ä‰∏™ËØ∑Ê±ÇÂ∞±ÂèØ‰ª•Ë¢´ÂÜçÊ¨°ÂèëÂá∫ÔºõÂêåÊó∂ÔºåÊúçÂä°Âô®Á´ØËøîÂõûËøô‰∫õËØ∑Ê±ÇÁöÑÂìçÂ∫îÊó∂‰πüÊòØÊåâÁÖßFIFOÁöÑÈ°∫Â∫èÔºâ„ÄÇÁÆ°ÈÅìÂåñÁöÑË°®Áé∞ÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÁöÑÈÄüÂ∫¶ÔºåÂ∞§ÂÖ∂ÊòØÂú®È´òÂª∂ËøüËøûÊé•‰∏≠„ÄÇ 3.2 Content-Length Â≠óÊÆµ ‰∏Ä‰∏™TCPËøûÊé•Áé∞Âú®ÂèØ‰ª•‰º†ÈÄÅÂ§ö‰∏™ÂõûÂ∫îÔºåÂäøÂøÖÂ∞±Ë¶ÅÊúâ‰∏ÄÁßçÊú∫Âà∂ÔºåÂå∫ÂàÜÊï∞ÊçÆÂåÖÊòØÂ±û‰∫éÂì™‰∏Ä‰∏™ÂõûÂ∫îÁöÑ„ÄÇËøôÂ∞±ÊòØContent-lengthÂ≠óÊÆµÁöÑ‰ΩúÁî®ÔºåÂ£∞ÊòéÊú¨Ê¨°ÂõûÂ∫îÁöÑÊï∞ÊçÆÈïøÂ∫¶„ÄÇ Content-Length: 3495 ‰∏äÈù¢‰ª£Á†ÅÂëäËØâÊµèËßàÂô®ÔºåÊú¨Ê¨°ÂõûÂ∫îÁöÑÈïøÂ∫¶ÊòØ3495‰∏™Â≠óËäÇÔºåÂêéÈù¢ÁöÑÂ≠óËäÇÂ∞±Â±û‰∫é‰∏ã‰∏Ä‰∏™ÂõûÂ∫î‰∫Ü„ÄÇ Âú®1.0Áâà‰∏≠ÔºåContent-LengthÂ≠óÊÆµ‰∏çÊòØÂøÖÈúÄÁöÑÔºåÂõ†‰∏∫ÊµèËßàÂô®ÂèëÁé∞ÊúçÂä°Âô®ÂÖ≥Èó≠‰∫ÜTCPËøûÊé•ÔºåÂ∞±Ë°®ÊòéÊî∂Âà∞ÁöÑÊï∞ÊçÆÂåÖÂ∑≤ÁªèÂÖ®‰∫Ü„ÄÇ 3.3 ÂàÜÂùó‰º†ËæìÁºñÁ†Å ÂØπ‰∫é‰∏Ä‰∫õÂæàËÄóÊó∂ÁöÑÂä®ÊÄÅÊìç‰ΩúÊù•ËØ¥ÔºåËøôÊÑèÂë≥ÁùÄÔºåÊúçÂä°Âô®Ë¶ÅÁ≠âÂà∞ÊâÄÊúâÊìç‰ΩúÂÆåÊàêÔºåÊâçËÉΩÂèëÈÄÅÊï∞ÊçÆÔºåÊòæÁÑ∂ËøôÊ†∑ÁöÑÊïàÁéá‰∏çÈ´ò„ÄÇÊõ¥Â•ΩÁöÑÂ§ÑÁêÜÊñπÊ≥ïÊòØÔºå‰∫ßÁîü‰∏ÄÂùóÊï∞ÊçÆÔºåÂ∞±ÂèëÈÄÅ‰∏ÄÂùóÔºåÈááÁî®&quot;ÊµÅÊ®°Âºè&quot;ÔºàstreamÔºâÂèñ‰ª£&quot;ÁºìÂ≠òÊ®°Âºè&quot;ÔºàbufferÔºâ„ÄÇ Âõ†Ê≠§Ôºå1.1ÁâàËßÑÂÆöÂèØ‰ª•‰∏ç‰ΩøÁî®Content-LengthÂ≠óÊÆµÔºåËÄå‰ΩøÁî®&quot;ÂàÜÂùó‰º†ËæìÁºñÁ†Å&quot;Ôºàchunked transfer encodingÔºâ„ÄÇÂè™Ë¶ÅËØ∑Ê±ÇÊàñÂõûÂ∫îÁöÑÂ§¥‰ø°ÊÅØÊúâTransfer-EncodingÂ≠óÊÆµÔºåÂ∞±Ë°®ÊòéÂõûÂ∫îÂ∞ÜÁî±Êï∞ÈáèÊú™ÂÆöÁöÑÊï∞ÊçÆÂùóÁªÑÊàê„ÄÇ Transfer-Encoding: chunked ÊØè‰∏™ÈùûÁ©∫ÁöÑÊï∞ÊçÆÂùó‰πãÂâçÔºå‰ºöÊúâ‰∏Ä‰∏™16ËøõÂà∂ÁöÑÊï∞ÂÄºÔºåË°®Á§∫Ëøô‰∏™ÂùóÁöÑÈïøÂ∫¶„ÄÇÊúÄÂêéÊòØ‰∏Ä‰∏™Â§ßÂ∞è‰∏∫0ÁöÑÂùóÔºåÂ∞±Ë°®Á§∫Êú¨Ê¨°ÂõûÂ∫îÁöÑÊï∞ÊçÆÂèëÈÄÅÂÆå‰∫Ü„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ 1234567891011121314151617HTTP/1.1 200 OKContent-Type: text/plainTransfer-Encoding: chunked25This is the data in the first chunk1Cand this is the second one3con8sequence0 3.3 ÂÖ∂‰ªñÂäüËÉΩ 1.1ÁâàËøòÊñ∞Â¢û‰∫ÜËÆ∏Â§öÂä®ËØçÊñπÊ≥ïÔºöPUT„ÄÅPATCH„ÄÅHEAD„ÄÅ OPTIONS„ÄÅDELETE„ÄÇ Âè¶Â§ñÔºåÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑÂ§¥‰ø°ÊÅØÊñ∞Â¢û‰∫ÜHostÂ≠óÊÆµÔºåÁî®Êù•ÊåáÂÆöÊúçÂä°Âô®ÁöÑÂüüÂêç„ÄÇ Host: www.example.com Êúâ‰∫ÜHostÂ≠óÊÆµÔºåÂ∞±ÂèØ‰ª•Â∞ÜËØ∑Ê±ÇÂèëÂæÄÂêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÁöÑ‰∏çÂêåÁΩëÁ´ôÔºå‰∏∫ËôöÊãü‰∏ªÊú∫ÁöÑÂÖ¥Ëµ∑Êâì‰∏ã‰∫ÜÂü∫Á°Ä„ÄÇ 3.4 Áº∫ÁÇπ ËôΩÁÑ∂1.1ÁâàÂÖÅËÆ∏Â§çÁî®TCPËøûÊé•Ôºå‰ΩÜÊòØÂêå‰∏Ä‰∏™TCPËøûÊé•ÈáåÈù¢ÔºåÊâÄÊúâÁöÑÊï∞ÊçÆÈÄö‰ø°ÊòØÊåâÊ¨°Â∫èËøõË°åÁöÑ„ÄÇÊúçÂä°Âô®Âè™ÊúâÂ§ÑÁêÜÂÆå‰∏Ä‰∏™ÂõûÂ∫îÔºåÊâç‰ºöËøõË°å‰∏ã‰∏Ä‰∏™ÂõûÂ∫î„ÄÇË¶ÅÊòØÂâçÈù¢ÁöÑÂõûÂ∫îÁâπÂà´ÊÖ¢ÔºåÂêéÈù¢Â∞±‰ºöÊúâËÆ∏Â§öËØ∑Ê±ÇÊéíÈòüÁ≠âÁùÄ„ÄÇËøôÁß∞‰∏∫&quot;ÈòüÂ§¥Â†µÂ°û&quot;ÔºàHead-of-line blockingÔºâ„ÄÇ Âõõ„ÄÅSPDY ÂçèËÆÆ 2009Âπ¥ÔºåË∞∑Ê≠åÂÖ¨ÂºÄ‰∫ÜËá™Ë°åÁ†îÂèëÁöÑ SPDY ÂçèËÆÆÔºå‰∏ªË¶ÅËß£ÂÜ≥ HTTP/1.1 ÊïàÁéá‰∏çÈ´òÁöÑÈóÆÈ¢ò„ÄÇ Ëøô‰∏™ÂçèËÆÆÂú®ChromeÊµèËßàÂô®‰∏äËØÅÊòéÂèØË°å‰ª•ÂêéÔºåÂ∞±Ë¢´ÂΩì‰Ωú HTTP/2 ÁöÑÂü∫Á°ÄÔºå‰∏ªË¶ÅÁâπÊÄßÈÉΩÂú® HTTP/2 ‰πã‰∏≠ÂæóÂà∞ÁªßÊâø„ÄÇ ‰∫î„ÄÅHTTP/2 5.1 ‰∫åËøõÂà∂ÂçèËÆÆ HTTP/1.1 ÁâàÁöÑÂ§¥‰ø°ÊÅØËÇØÂÆöÊòØÊñáÊú¨ÔºàASCIIÁºñÁ†ÅÔºâÔºåÊï∞ÊçÆ‰ΩìÂèØ‰ª•ÊòØÊñáÊú¨Ôºå‰πüÂèØ‰ª•ÊòØ‰∫åËøõÂà∂„ÄÇ HTTP/2 ÂàôÊòØ‰∏Ä‰∏™ÂΩªÂ∫ïÁöÑ‰∫åËøõÂà∂ÂçèËÆÆÔºåÂ§¥‰ø°ÊÅØÂíåÊï∞ÊçÆ‰ΩìÈÉΩÊòØ‰∫åËøõÂà∂ÔºåÂπ∂‰∏îÁªüÁß∞‰∏∫&quot;Â∏ß&quot;ÔºàframeÔºâÔºöÂ§¥‰ø°ÊÅØÂ∏ßÂíåÊï∞ÊçÆÂ∏ß„ÄÇ ‰∫åËøõÂà∂ÂçèËÆÆÁöÑ‰∏Ä‰∏™Â•ΩÂ§ÑÊòØÔºåÂèØ‰ª•ÂÆö‰πâÈ¢ùÂ§ñÁöÑÂ∏ß„ÄÇHTTP/2 ÂÆö‰πâ‰∫ÜËøëÂçÅÁßçÂ∏ßÔºå‰∏∫Â∞ÜÊù•ÁöÑÈ´òÁ∫ßÂ∫îÁî®ÊâìÂ•Ω‰∫ÜÂü∫Á°Ä„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÊñáÊú¨ÂÆûÁé∞ËøôÁßçÂäüËÉΩÔºåËß£ÊûêÊï∞ÊçÆÂ∞Ü‰ºöÂèòÂæóÈùûÂ∏∏È∫ªÁÉ¶Ôºå‰∫åËøõÂà∂Ëß£ÊûêÂàôÊñπ‰æøÂæóÂ§ö„ÄÇ 5.2 Â§öÂ∑• HTTP/2 Â§çÁî®TCPËøûÊé•ÔºåÂú®‰∏Ä‰∏™ËøûÊé•ÈáåÔºåÂÆ¢Êà∑Á´ØÂíåÊµèËßàÂô®ÈÉΩÂèØ‰ª•ÂêåÊó∂ÂèëÈÄÅÂ§ö‰∏™ËØ∑Ê±ÇÊàñÂõûÂ∫îÔºåËÄå‰∏î‰∏çÁî®ÊåâÁÖßÈ°∫Â∫è‰∏Ä‰∏ÄÂØπÂ∫îÔºåËøôÊ†∑Â∞±ÈÅøÂÖç‰∫Ü&quot;ÈòüÂ§¥Â†µÂ°û&quot;„ÄÇ ‰∏æ‰æãÊù•ËØ¥ÔºåÂú®‰∏Ä‰∏™TCPËøûÊé•ÈáåÈù¢ÔºåÊúçÂä°Âô®ÂêåÊó∂Êî∂Âà∞‰∫ÜAËØ∑Ê±ÇÂíåBËØ∑Ê±ÇÔºå‰∫éÊòØÂÖàÂõûÂ∫îAËØ∑Ê±ÇÔºåÁªìÊûúÂèëÁé∞Â§ÑÁêÜËøáÁ®ãÈùûÂ∏∏ËÄóÊó∂Ôºå‰∫éÊòØÂ∞±ÂèëÈÄÅAËØ∑Ê±ÇÂ∑≤ÁªèÂ§ÑÁêÜÂ•ΩÁöÑÈÉ®ÂàÜÔºå Êé•ÁùÄÂõûÂ∫îBËØ∑Ê±ÇÔºåÂÆåÊàêÂêéÔºåÂÜçÂèëÈÄÅAËØ∑Ê±ÇÂâ©‰∏ãÁöÑÈÉ®ÂàÜ„ÄÇ ËøôÊ†∑ÂèåÂêëÁöÑ„ÄÅÂÆûÊó∂ÁöÑÈÄö‰ø°ÔºåÂ∞±Âè´ÂÅöÂ§öÂ∑•ÔºàMultiplexingÔºâ„ÄÇ 5.3 Êï∞ÊçÆÊµÅ Âõ†‰∏∫ HTTP/2 ÁöÑÊï∞ÊçÆÂåÖÊòØ‰∏çÊåâÈ°∫Â∫èÂèëÈÄÅÁöÑÔºåÂêå‰∏Ä‰∏™ËøûÊé•ÈáåÈù¢ËøûÁª≠ÁöÑÊï∞ÊçÆÂåÖÔºåÂèØËÉΩÂ±û‰∫é‰∏çÂêåÁöÑÂõûÂ∫î„ÄÇÂõ†Ê≠§ÔºåÂøÖÈ°ªË¶ÅÂØπÊï∞ÊçÆÂåÖÂÅöÊ†áËÆ∞ÔºåÊåáÂá∫ÂÆÉÂ±û‰∫éÂì™‰∏™ÂõûÂ∫î„ÄÇ HTTP/2 Â∞ÜÊØè‰∏™ËØ∑Ê±ÇÊàñÂõûÂ∫îÁöÑÊâÄÊúâÊï∞ÊçÆÂåÖÔºåÁß∞‰∏∫‰∏Ä‰∏™Êï∞ÊçÆÊµÅÔºàstreamÔºâ„ÄÇÊØè‰∏™Êï∞ÊçÆÊµÅÈÉΩÊúâ‰∏Ä‰∏™Áã¨‰∏ÄÊó†‰∫åÁöÑÁºñÂè∑„ÄÇÊï∞ÊçÆÂåÖÂèëÈÄÅÁöÑÊó∂ÂÄôÔºåÈÉΩÂøÖÈ°ªÊ†áËÆ∞Êï∞ÊçÆÊµÅIDÔºåÁî®Êù•Âå∫ÂàÜÂÆÉÂ±û‰∫éÂì™‰∏™Êï∞ÊçÆÊµÅ„ÄÇÂè¶Â§ñËøòËßÑÂÆöÔºåÂÆ¢Êà∑Á´ØÂèëÂá∫ÁöÑÊï∞ÊçÆÊµÅÔºåID‰∏ÄÂæã‰∏∫Â•áÊï∞ÔºåÊúçÂä°Âô®ÂèëÂá∫ÁöÑÔºåID‰∏∫ÂÅ∂Êï∞„ÄÇ Êï∞ÊçÆÊµÅÂèëÈÄÅÂà∞‰∏ÄÂçäÁöÑÊó∂ÂÄôÔºåÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÈÉΩÂèØ‰ª•ÂèëÈÄÅ‰ø°Âè∑ÔºàRST_STREAMÂ∏ßÔºâÔºåÂèñÊ∂àËøô‰∏™Êï∞ÊçÆÊµÅ„ÄÇ1.1ÁâàÂèñÊ∂àÊï∞ÊçÆÊµÅÁöÑÂîØ‰∏ÄÊñπÊ≥ïÔºåÂ∞±ÊòØÂÖ≥Èó≠TCPËøûÊé•„ÄÇËøôÂ∞±ÊòØËØ¥ÔºåHTTP/2 ÂèØ‰ª•ÂèñÊ∂àÊüê‰∏ÄÊ¨°ËØ∑Ê±ÇÔºåÂêåÊó∂‰øùËØÅTCPËøûÊé•ËøòÊâìÂºÄÁùÄÔºåÂèØ‰ª•Ë¢´ÂÖ∂‰ªñËØ∑Ê±Ç‰ΩøÁî®„ÄÇ ÂÆ¢Êà∑Á´ØËøòÂèØ‰ª•ÊåáÂÆöÊï∞ÊçÆÊµÅÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ‰ºòÂÖàÁ∫ßË∂äÈ´òÔºåÊúçÂä°Âô®Â∞±‰ºöË∂äÊó©ÂõûÂ∫î„ÄÇ 5.4 Â§¥‰ø°ÊÅØÂéãÁº© HTTP ÂçèËÆÆ‰∏çÂ∏¶ÊúâÁä∂ÊÄÅÔºåÊØèÊ¨°ËØ∑Ê±ÇÈÉΩÂøÖÈ°ªÈôÑ‰∏äÊâÄÊúâ‰ø°ÊÅØ„ÄÇÊâÄ‰ª•ÔºåËØ∑Ê±ÇÁöÑÂæàÂ§öÂ≠óÊÆµÈÉΩÊòØÈáçÂ§çÁöÑÔºåÊØîÂ¶ÇCookieÂíåUser AgentÔºå‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÂÜÖÂÆπÔºåÊØèÊ¨°ËØ∑Ê±ÇÈÉΩÂøÖÈ°ªÈôÑÂ∏¶ÔºåËøô‰ºöÊµ™Ë¥πÂæàÂ§öÂ∏¶ÂÆΩÔºå‰πüÂΩ±ÂìçÈÄüÂ∫¶„ÄÇ HTTP/2 ÂØπËøô‰∏ÄÁÇπÂÅö‰∫Ü‰ºòÂåñÔºåÂºïÂÖ•‰∫ÜÂ§¥‰ø°ÊÅØÂéãÁº©Êú∫Âà∂Ôºàheader compressionÔºâ„ÄÇ‰∏ÄÊñπÈù¢ÔºåÂ§¥‰ø°ÊÅØ‰ΩøÁî®gzipÊàñcompressÂéãÁº©ÂêéÂÜçÂèëÈÄÅÔºõÂè¶‰∏ÄÊñπÈù¢ÔºåÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂêåÊó∂Áª¥Êä§‰∏ÄÂº†Â§¥‰ø°ÊÅØË°®ÔºåÊâÄÊúâÂ≠óÊÆµÈÉΩ‰ºöÂ≠òÂÖ•Ëøô‰∏™Ë°®ÔºåÁîüÊàê‰∏Ä‰∏™Á¥¢ÂºïÂè∑Ôºå‰ª•ÂêéÂ∞±‰∏çÂèëÈÄÅÂêåÊ†∑Â≠óÊÆµ‰∫ÜÔºåÂè™ÂèëÈÄÅÁ¥¢ÂºïÂè∑ÔºåËøôÊ†∑Â∞±ÊèêÈ´òÈÄüÂ∫¶‰∫Ü„ÄÇ 5.5 ÊúçÂä°Âô®Êé®ÈÄÅ HTTP/2 ÂÖÅËÆ∏ÊúçÂä°Âô®Êú™ÁªèËØ∑Ê±ÇÔºå‰∏ªÂä®ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅËµÑÊ∫êÔºåËøôÂè´ÂÅöÊúçÂä°Âô®Êé®ÈÄÅÔºàserver pushÔºâ„ÄÇ Â∏∏ËßÅÂú∫ÊôØÊòØÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰∏Ä‰∏™ÁΩëÈ°µÔºåËøô‰∏™ÁΩëÈ°µÈáåÈù¢ÂåÖÂê´ÂæàÂ§öÈùôÊÄÅËµÑÊ∫ê„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂÆ¢Êà∑Á´ØÂøÖÈ°ªÊî∂Âà∞ÁΩëÈ°µÂêéÔºåËß£ÊûêHTMLÊ∫êÁ†ÅÔºåÂèëÁé∞ÊúâÈùôÊÄÅËµÑÊ∫êÔºåÂÜçÂèëÂá∫ÈùôÊÄÅËµÑÊ∫êËØ∑Ê±Ç„ÄÇÂÖ∂ÂÆûÔºåÊúçÂä°Âô®ÂèØ‰ª•È¢ÑÊúüÂà∞ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁΩëÈ°µÂêéÔºåÂæàÂèØËÉΩ‰ºöÂÜçËØ∑Ê±ÇÈùôÊÄÅËµÑÊ∫êÔºåÊâÄ‰ª•Â∞±‰∏ªÂä®ÊääËøô‰∫õÈùôÊÄÅËµÑÊ∫êÈöèÁùÄÁΩëÈ°µ‰∏ÄËµ∑ÂèëÁªôÂÆ¢Êà∑Á´Ø‰∫Ü„ÄÇ Êï¥ÁêÜËá™Ôºöhttp://www.ruanyifeng.com/blog/2016/08/http.html]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ªé‰∏äÂà∞‰∏ãÁúã‰∫îÂ±ÇÊ®°Âûã]]></title>
    <url>%2F2019%2F01%2F17%2Fnetwork%2F2.%E4%BB%8E%E4%B8%8A%E5%88%B0%E4%B8%8B%E7%9C%8B%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨‰∫åÁØáÊñáÁ´†„ÄÇÁªèËøá‰∏ä‰∏ÄÁØáÊñáÁ´†ÁöÑËØ¶ÁªÜ‰ªãÁªçÔºåÊàë‰ª¨‰∫ÜËß£‰∫Ü‰∏Ä‰∏™Êï∞ÊçÆÊòØÂ¶Ç‰Ωï‰ªéÁâ©ÁêÜÂ±Ç‰∏ÄÊ≠•‰∏ÄÊ≠•Âà∞ËææÂ∫îÁî®Â±ÇÁöÑÔºåÈÇ£‰πàÊú¨Á´†‰ªé‰∏äËÄå‰∏ãÁöÑËßíÂ∫¶Êù•ÁúãÁúã‰∏ÄÊù°ËØ∑Ê±ÇÊó∂Â¶Ç‰Ωï‰ªéÊµèËßàÂô®‰º†ÈÄíÂà∞ÊúçÂä°Âô®Âπ∂‰∏îËøîÂõûÁöÑ„ÄÇ Ëøô‰∏™ËøáÁ®ãÁúãÁöÑÂ∞±ÊòØÁî®Êà∑‰ªéÊµèËßàÂô®ËæìÂÖ•‰∏ÄÊù°url‰πãÂêéÔºåÊòØÂ¶Ç‰ΩïÂèëÈÄÅËøáÂéªÁöÑ„ÄÇ 1.‰∏ä‰∏ÄÁØáÊñáÁ´†ÁöÑÂ∞èÁªì Êàë‰ª¨Â∑≤ÁªèÁü•ÈÅìÔºåÁΩëÁªúÈÄö‰ø°Â∞±ÊòØ‰∫§Êç¢Êï∞ÊçÆÂåÖ„ÄÇÁîµËÑëAÂêëÁîµËÑëBÂèëÈÄÅ‰∏Ä‰∏™Êï∞ÊçÆÂåÖÔºåÂêéËÄÖÊî∂Âà∞‰∫ÜÔºåÂõûÂ§ç‰∏Ä‰∏™Êï∞ÊçÆÂåÖÔºå‰ªéËÄåÂÆûÁé∞‰∏§Âè∞ÁîµËÑë‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇÊï∞ÊçÆÂåÖÁöÑÁªìÊûÑÔºåÂü∫Êú¨‰∏äÊòØ‰∏ãÈù¢ËøôÊ†∑Ôºö ÂèëÈÄÅËøô‰∏™ÂåÖÔºåÈúÄË¶ÅÁü•ÈÅì‰∏§‰∏™Âú∞ÂùÄÔºö ÂØπÊñπÁöÑMACÂú∞ÂùÄ ÂØπÊñπÁöÑIPÂú∞ÂùÄ Êúâ‰∫ÜËøô‰∏§‰∏™Âú∞ÂùÄÔºåÊï∞ÊçÆÂåÖÊâçËÉΩÂáÜÁ°ÆÈÄÅÂà∞Êé•Êî∂ËÄÖÊâã‰∏≠„ÄÇ‰ΩÜÊòØÔºåÂâçÈù¢ËØ¥ËøáÔºåMACÂú∞ÂùÄÊúâÂ±ÄÈôêÊÄßÔºåÂ¶ÇÊûú‰∏§Âè∞ÁîµËÑë‰∏çÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÂ∞±Êó†Ê≥ïÁü•ÈÅìÂØπÊñπÁöÑMACÂú∞ÂùÄÔºåÂøÖÈ°ªÈÄöËøáÁΩëÂÖ≥ÔºàgatewayÔºâËΩ¨Âèë„ÄÇ ‰∏äÂõæ‰∏≠Ôºå1Âè∑ÁîµËÑëË¶ÅÂêë4Âè∑ÁîµËÑëÂèëÈÄÅ‰∏Ä‰∏™Êï∞ÊçÆÂåÖ„ÄÇÂÆÉÂÖàÂà§Êñ≠4Âè∑ÁîµËÑëÊòØÂê¶Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÁªìÊûúÂèëÁé∞‰∏çÊòØÔºàÂêéÊñá‰ªãÁªçÂà§Êñ≠ÊñπÊ≥ïÔºâÔºå‰∫éÊòØÂ∞±ÊääËøô‰∏™Êï∞ÊçÆÂåÖÂèëÂà∞ÁΩëÂÖ≥A„ÄÇÁΩëÂÖ≥AÈÄöËøáË∑ØÁî±ÂçèËÆÆÔºåÂèëÁé∞4Âè∑ÁîµËÑë‰Ωç‰∫éÂ≠êÁΩëÁªúBÔºåÂèàÊääÊï∞ÊçÆÂåÖÂèëÁªôÁΩëÂÖ≥BÔºåÁΩëÂÖ≥BÂÜçËΩ¨ÂèëÂà∞4Âè∑ÁîµËÑë„ÄÇ 1Âè∑ÁîµËÑëÊääÊï∞ÊçÆÂåÖÂèëÂà∞ÁΩëÂÖ≥AÔºåÂøÖÈ°ªÁü•ÈÅìÁΩëÂÖ≥AÁöÑMACÂú∞ÂùÄ„ÄÇ ÂèëÈÄÅÊï∞ÊçÆÂåÖ‰πãÂâçÔºåÁîµËÑëÂøÖÈ°ªÂà§Êñ≠ÂØπÊñπÊòØÂê¶Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÁÑ∂ÂêéÈÄâÊã©Áõ∏Â∫îÁöÑMACÂú∞ÂùÄ„ÄÇ Êúâ‰∫Ü‰∏ÄÂè∞Êñ∞ÁîµËÑë‰πãÂêéÔºåË¶ÅÊÉ≥‰∏äÁΩëÔºå‰∏ÄÁßçÊñπÂºèÊòØËá™Â∑±ÈÖçÁΩÆÈùôÊÄÅIPÔºö ÂæàÂ§ö‰∫∫ÈÉΩÊ≤°ÊúâËøõË°åËøáËøô‰∏™ÈÖçÁΩÆÔºåÂõ†‰∏∫‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊàë‰ª¨Ê†πÊú¨‰∏çÈúÄË¶ÅËøôÊ†∑„ÄÇ‰ΩÜÊòØÊúâÁöÑÊó∂ÂÄô‰πü‰ºöÁî®Âà∞ÔºåÊØîÂ¶ÇÊàëÂú®Áîµ‰ø°ÂÆû‰π†ÁöÑÊó∂ÂÄôÔºå‰ªñ‰ª¨ÊØè‰∏Ä‰∏™ÁΩëÂè£ÊóÅËæπÈÉΩË¥¥ÁùÄËøôÂõõ‰∏™ÂèÇÊï∞Ôºå‰Ω†ËÅîÁΩëÂøÖÈ°ªË¶ÅÈÄÇÁî®‰ªñÊèê‰æõÁöÑ‰∏ÄÁ≥ªÂàóÂú∞ÂùÄÊâçË°å„ÄÇÂÖ∂ÂÆûÁªèËøá‰∏äÈù¢ÁöÑÂ≠¶‰π†ÔºåÊàë‰ª¨Â∑≤ÁªèÁü•ÈÅìÔºåÈÄö‰ø°ÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÁü•ÈÅìÂØπÊñπÁöÑIPÔºàARPÁü•ÈÅìÂØπÊñπÁöÑMACÂú∞ÂùÄÔºâ„ÄÅÂ≠êÁΩëÊé©Á†ÅÔºàÁ°ÆÂÆöÊâÄÂú®ÁöÑÂ≠êÁΩëÔºâ„ÄÅÈªòËÆ§ÁΩëÂÖ≥Ôºà‰∏çÂú®‰∏Ä‰∏™Â≠êÁΩëÔºåË¶ÅÈÄöËøáÁΩëÂÖ≥ÂèñËΩ¨Âèë„ÄÅË∑ØÁî±Ôºâ„ÄÅDNSÊúçÂä°Âô®ÔºàËß£ÊûêÂüüÂêç‰∏∫IPÂú∞ÂùÄÔºâ„ÄÇ ‰ΩÜÊòØÔºåËøôÊ†∑ÁöÑËÆæÁΩÆÂæà‰∏ì‰∏öÔºåÊôÆÈÄöÁî®Êà∑ÊúõËÄåÁîüÁïèÔºåËÄå‰∏îÂ¶ÇÊûú‰∏ÄÂè∞ÁîµËÑëÁöÑIPÂú∞ÂùÄ‰øùÊåÅ‰∏çÂèòÔºåÂÖ∂‰ªñÁîµËÑëÂ∞±‰∏çËÉΩ‰ΩøÁî®Ëøô‰∏™Âú∞ÂùÄÔºå‰∏çÂ§üÁÅµÊ¥ª„ÄÇÂá∫‰∫éËøô‰∏§‰∏™ÂéüÂõ†ÔºåÂ§ßÂ§öÊï∞Áî®Êà∑‰ΩøÁî®&quot;Âä®ÊÄÅIPÂú∞ÂùÄ‰∏äÁΩë&quot;„ÄÇ 2.DHCPÂçèËÆÆ ÊâÄË∞ì&quot;Âä®ÊÄÅIPÂú∞ÂùÄ&quot;ÔºåÊåáËÆ°ÁÆóÊú∫ÂºÄÊú∫ÂêéÔºå‰ºöËá™Âä®ÂàÜÈÖçÂà∞‰∏Ä‰∏™IPÂú∞ÂùÄÔºå‰∏çÁî®‰∫∫‰∏∫ËÆæÂÆö„ÄÇÂÆÉ‰ΩøÁî®ÁöÑÂçèËÆÆÂè´ÂÅöDHCPÂçèËÆÆ„ÄÇ Ëøô‰∏™ÂçèËÆÆËßÑÂÆöÔºåÊØè‰∏Ä‰∏™Â≠êÁΩëÁªú‰∏≠ÔºåÊúâ‰∏ÄÂè∞ËÆ°ÁÆóÊú∫Ë¥üË¥£ÁÆ°ÁêÜÊú¨ÁΩëÁªúÁöÑÊâÄÊúâIPÂú∞ÂùÄÔºåÂÆÉÂè´ÂÅö&quot;DHCPÊúçÂä°Âô®&quot;„ÄÇÊñ∞ÁöÑËÆ°ÁÆóÊú∫Âä†ÂÖ•ÁΩëÁªúÔºåÂøÖÈ°ªÂêë&quot;DHCPÊúçÂä°Âô®&quot;ÂèëÈÄÅ‰∏Ä‰∏™&quot;DHCPËØ∑Ê±Ç&quot;Êï∞ÊçÆÂåÖÔºåÁî≥ËØ∑IPÂú∞ÂùÄÂíåÁõ∏ÂÖ≥ÁöÑÁΩëÁªúÂèÇÊï∞„ÄÇ ÂâçÈù¢ËØ¥ËøáÔºåÂ¶ÇÊûú‰∏§Âè∞ËÆ°ÁÆóÊú∫Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÂøÖÈ°ªÁü•ÈÅìÂØπÊñπÁöÑMACÂú∞ÂùÄÂíåIPÂú∞ÂùÄÔºåÊâçËÉΩÂèëÈÄÅÊï∞ÊçÆÂåÖ„ÄÇ‰ΩÜÊòØÔºåÊñ∞Âä†ÂÖ•ÁöÑËÆ°ÁÆóÊú∫‰∏çÁü•ÈÅìDHCPÊúçÂä°Âô®ÁöÑ‰∏§‰∏™Âú∞ÂùÄÔºåÊÄé‰πàÂèëÈÄÅÊï∞ÊçÆÂåÖÂë¢Ôºü DHCPÂçèËÆÆÂÅö‰∫Ü‰∏Ä‰∫õÂ∑ßÂ¶ôÁöÑËßÑÂÆö„ÄÇ È¶ñÂÖàÔºåÂÆÉÊòØ‰∏ÄÁßçÂ∫îÁî®Â±ÇÂçèËÆÆÔºåÂª∫Á´ãÂú®UDPÂçèËÆÆ‰πã‰∏äÔºåÊâÄ‰ª•Êï¥‰∏™Êï∞ÊçÆÂåÖÊòØËøôÊ†∑ÁöÑÔºö Ôºà1ÔºâÊúÄÂâçÈù¢ÁöÑ&quot;‰ª•Â§™ÁΩëÊ†áÂ§¥&quot;ÔºåËÆæÁΩÆÂèëÂá∫ÊñπÔºàÊú¨Êú∫ÔºâÁöÑMACÂú∞ÂùÄÂíåÊé•Êî∂ÊñπÔºàDHCPÊúçÂä°Âô®ÔºâÁöÑMACÂú∞ÂùÄ„ÄÇÂâçËÄÖÂ∞±ÊòØÊú¨Êú∫ÁΩëÂç°ÁöÑMACÂú∞ÂùÄÔºåÂêéËÄÖËøôÊó∂‰∏çÁü•ÈÅìÔºåÂ∞±Â°´ÂÖ•‰∏Ä‰∏™ÂπøÊí≠Âú∞ÂùÄÔºöFF-FF-FF-FF-FF-FF„ÄÇ Ôºà2ÔºâÂêéÈù¢ÁöÑ&quot;IPÊ†áÂ§¥&quot;ÔºåËÆæÁΩÆÂèëÂá∫ÊñπÁöÑIPÂú∞ÂùÄÂíåÊé•Êî∂ÊñπÁöÑIPÂú∞ÂùÄ„ÄÇËøôÊó∂ÔºåÂØπ‰∫éËøô‰∏§ËÄÖÔºåÊú¨Êú∫ÈÉΩ‰∏çÁü•ÈÅì„ÄÇ‰∫éÊòØÔºåÂèëÂá∫ÊñπÁöÑIPÂú∞ÂùÄÂ∞±ËÆæ‰∏∫0.0.0.0ÔºåÊé•Êî∂ÊñπÁöÑIPÂú∞ÂùÄËÆæ‰∏∫255.255.255.255„ÄÇ Ôºà3ÔºâÊúÄÂêéÁöÑ&quot;UDPÊ†áÂ§¥&quot;ÔºåËÆæÁΩÆÂèëÂá∫ÊñπÁöÑÁ´ØÂè£ÂíåÊé•Êî∂ÊñπÁöÑÁ´ØÂè£„ÄÇËøô‰∏ÄÈÉ®ÂàÜÊòØDHCPÂçèËÆÆËßÑÂÆöÂ•ΩÁöÑÔºåÂèëÂá∫ÊñπÊòØ68Á´ØÂè£ÔºåÊé•Êî∂ÊñπÊòØ67Á´ØÂè£„ÄÇ Ëøô‰∏™Êï∞ÊçÆÂåÖÊûÑÈÄ†ÂÆåÊàêÂêéÔºåÂ∞±ÂèØ‰ª•ÂèëÂá∫‰∫Ü„ÄÇ‰ª•Â§™ÁΩëÊòØÂπøÊí≠ÂèëÈÄÅÔºåÂêå‰∏Ä‰∏™Â≠êÁΩëÁªúÁöÑÊØèÂè∞ËÆ°ÁÆóÊú∫ÈÉΩÊî∂Âà∞‰∫ÜËøô‰∏™ÂåÖ„ÄÇ Âõ†‰∏∫Êé•Êî∂ÊñπÁöÑMACÂú∞ÂùÄÊòØFF-FF-FF-FF-FF-FFÔºåÁúã‰∏çÂá∫ÊòØÂèëÁªôË∞ÅÁöÑÔºåÊâÄ‰ª•ÊØèÂè∞Êî∂Âà∞Ëøô‰∏™ÂåÖÁöÑËÆ°ÁÆóÊú∫ÔºåËøòÂøÖÈ°ªÂàÜÊûêËøô‰∏™ÂåÖÁöÑIPÂú∞ÂùÄÔºåÊâçËÉΩÁ°ÆÂÆöÊòØ‰∏çÊòØÂèëÁªôËá™Â∑±ÁöÑ„ÄÇ ÂΩìÁúãÂà∞ÂèëÂá∫ÊñπIPÂú∞ÂùÄÊòØ0.0.0.0ÔºåÊé•Êî∂ÊñπÊòØ255.255.255.255Ôºå‰∫éÊòØDHCPÊúçÂä°Âô®Áü•ÈÅì&quot;Ëøô‰∏™ÂåÖÊòØÂèëÁªôÊàëÁöÑ&quot;ÔºåËÄåÂÖ∂‰ªñËÆ°ÁÆóÊú∫Â∞±ÂèØ‰ª•‰∏¢ÂºÉËøô‰∏™ÂåÖ„ÄÇ Êé•‰∏ãÊù•ÔºåDHCPÊúçÂä°Âô®ËØªÂá∫Ëøô‰∏™ÂåÖÁöÑÊï∞ÊçÆÂÜÖÂÆπÔºåÂàÜÈÖçÂ•ΩIPÂú∞ÂùÄÔºåÂèëÈÄÅÂõûÂéª‰∏Ä‰∏™&quot;DHCPÂìçÂ∫î&quot;Êï∞ÊçÆÂåÖ„ÄÇ Ëøô‰∏™ÂìçÂ∫îÂåÖÁöÑÁªìÊûÑ‰πüÊòØÁ±ª‰ººÁöÑÔºå‰ª•Â§™ÁΩëÊ†áÂ§¥ÁöÑMACÂú∞ÂùÄÊòØÂèåÊñπÁöÑÁΩëÂç°Âú∞ÂùÄÔºåIPÊ†áÂ§¥ÁöÑIPÂú∞ÂùÄÊòØDHCPÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÔºàÂèëÂá∫ÊñπÔºâÂíå255.255.255.255ÔºàÊé•Êî∂ÊñπÔºâÔºåUDPÊ†áÂ§¥ÁöÑÁ´ØÂè£ÊòØ67ÔºàÂèëÂá∫ÊñπÔºâÂíå68ÔºàÊé•Êî∂ÊñπÔºâÔºåÂàÜÈÖçÁªôËØ∑Ê±ÇÁ´ØÁöÑIPÂú∞ÂùÄÂíåÊú¨ÁΩëÁªúÁöÑÂÖ∑‰ΩìÂèÇÊï∞ÂàôÂåÖÂê´Âú®DataÈÉ®ÂàÜ„ÄÇ Êñ∞Âä†ÂÖ•ÁöÑËÆ°ÁÆóÊú∫Êî∂Âà∞Ëøô‰∏™ÂìçÂ∫îÂåÖÔºå‰∫éÊòØÂ∞±Áü•ÈÅì‰∫ÜËá™Â∑±ÁöÑIPÂú∞ÂùÄ„ÄÅÂ≠êÁΩëÊé©Á†Å„ÄÅÁΩëÂÖ≥Âú∞ÂùÄ„ÄÅDNSÊúçÂä°Âô®Á≠âÁ≠âÂèÇÊï∞„ÄÇ Âä®ÊÄÅÊãøÂà∞ÊúÄÊ†∏ÂøÉÁöÑÂõõ‰∏™ÂèÇÊï∞ÔºöËá™Â∑±ÁöÑIPÂú∞ÂùÄ„ÄÅÂ≠êÁΩëÊé©Á†Å„ÄÅÁΩëÂÖ≥Âú∞ÂùÄ„ÄÅDNSÊúçÂä°Âô®ÔºåÂ∞±ÂèØ‰ª•ËÅîÁΩë‰∫Ü„ÄÇ 3.ËÆøÈóÆgoogleÁöÑËøáÁ®ã Êàë‰ª¨ÂÅáÂÆöÔºåÁªèËøá‰∏ä‰∏ÄËäÇÁöÑÊ≠•È™§ÔºåÁî®Êà∑ËÆæÁΩÆÂ•Ω‰∫ÜËá™Â∑±ÁöÑÁΩëÁªúÂèÇÊï∞Ôºö Êú¨Êú∫ÁöÑIPÂú∞ÂùÄÔºö192.168.1.100 Â≠êÁΩëÊé©Á†ÅÔºö255.255.255.0 ÁΩëÂÖ≥ÁöÑIPÂú∞ÂùÄÔºö192.168.1.1 DNSÁöÑIPÂú∞ÂùÄÔºö8.8.8.8 ÁÑ∂Âêé‰ªñÊâìÂºÄÊµèËßàÂô®ÔºåÊÉ≥Ë¶ÅËÆøÈóÆGoogleÔºåÂú®Âú∞ÂùÄÊ†èËæìÂÖ•‰∫ÜÁΩëÂùÄÔºöwww.google.com„ÄÇ ËøôÊÑèÂë≥ÁùÄÔºåÊµèËßàÂô®Ë¶ÅÂêëGoogleÂèëÈÄÅ‰∏Ä‰∏™ÁΩëÈ°µËØ∑Ê±ÇÁöÑÊï∞ÊçÆÂåÖ„ÄÇ 3.1 DNSÂçèËÆÆ Êàë‰ª¨Áü•ÈÅìÔºåÂèëÈÄÅÊï∞ÊçÆÂåÖÔºåÂøÖÈ°ªË¶ÅÁü•ÈÅìÂØπÊñπÁöÑIPÂú∞ÂùÄ„ÄÇ‰ΩÜÊòØÔºåÁé∞Âú®ÔºåÊàë‰ª¨Âè™Áü•ÈÅìÁΩëÂùÄwww.google.comÔºå‰∏çÁü•ÈÅìÂÆÉÁöÑIPÂú∞ÂùÄ„ÄÇ DNSÂçèËÆÆÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨ÔºåÂ∞ÜËøô‰∏™ÁΩëÂùÄËΩ¨Êç¢ÊàêIPÂú∞ÂùÄ„ÄÇÂ∑≤Áü•DNSÊúçÂä°Âô®‰∏∫8.8.8.8Ôºå‰∫éÊòØÊàë‰ª¨ÂêëËøô‰∏™Âú∞ÂùÄÂèëÈÄÅ‰∏Ä‰∏™DNSÊï∞ÊçÆÂåÖÔºà53Á´ØÂè£Ôºâ„ÄÇ ÁÑ∂ÂêéÔºåDNSÊúçÂä°Âô®ÂÅöÂá∫ÂìçÂ∫îÔºåÂëäËØâÊàë‰ª¨GoogleÁöÑIPÂú∞ÂùÄÊòØ172.194.72.105„ÄÇ‰∫éÊòØÔºåÊàë‰ª¨Áü•ÈÅì‰∫ÜÂØπÊñπÁöÑIPÂú∞ÂùÄ„ÄÇ 3.2 Â≠êÁΩëÊé©Á†Å Êé•‰∏ãÊù•ÔºåÊàë‰ª¨Ë¶ÅÂà§Êñ≠ÔºåËøô‰∏™IPÂú∞ÂùÄÊòØ‰∏çÊòØÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåËøôÂ∞±Ë¶ÅÁî®Âà∞Â≠êÁΩëÊé©Á†Å„ÄÇ Â∑≤Áü•Â≠êÁΩëÊé©Á†ÅÊòØ255.255.255.0ÔºåÊú¨Êú∫Áî®ÂÆÉÂØπËá™Â∑±ÁöÑIPÂú∞ÂùÄ192.168.1.100ÔºåÂÅö‰∏Ä‰∏™‰∫åËøõÂà∂ÁöÑANDËøêÁÆóÔºà‰∏§‰∏™Êï∞‰ΩçÈÉΩ‰∏∫1ÔºåÁªìÊûú‰∏∫1ÔºåÂê¶Âàô‰∏∫0ÔºâÔºåËÆ°ÁÆóÁªìÊûú‰∏∫192.168.1.0ÔºõÁÑ∂ÂêéÂØπGoogleÁöÑIPÂú∞ÂùÄ172.194.72.105‰πüÂÅö‰∏Ä‰∏™ANDËøêÁÆóÔºåËÆ°ÁÆóÁªìÊûú‰∏∫172.194.72.0„ÄÇËøô‰∏§‰∏™ÁªìÊûú‰∏çÁõ∏Á≠âÔºåÊâÄ‰ª•ÁªìËÆ∫ÊòØÔºåGoogle‰∏éÊú¨Êú∫‰∏çÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªú„ÄÇ Âõ†Ê≠§ÔºåÊàë‰ª¨Ë¶ÅÂêëGoogleÂèëÈÄÅÊï∞ÊçÆÂåÖÔºåÂøÖÈ°ªÈÄöËøáÁΩëÂÖ≥192.168.1.1ËΩ¨ÂèëÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊé•Êî∂ÊñπÁöÑMACÂú∞ÂùÄÂ∞ÜÊòØÁΩëÂÖ≥ÁöÑMACÂú∞ÂùÄ„ÄÇ 3.3 Â∫îÁî®Â±ÇÂçèËÆÆ ÊµèËßàÁΩëÈ°µÁî®ÁöÑÊòØHTTPÂçèËÆÆÔºåÂÆÉÁöÑÊï¥‰∏™Êï∞ÊçÆÂåÖÊûÑÈÄ†ÊòØËøôÊ†∑ÁöÑÔºö HTTPÈÉ®ÂàÜÁöÑÂÜÖÂÆπÔºåÁ±ª‰ºº‰∫é‰∏ãÈù¢ËøôÊ†∑Ôºö 123456789 GET / HTTP/1.1 Host: www.google.com Connection: keep-alive User-Agent: Mozilla/5.0 (Windows NT 6.1) ...... Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Encoding: gzip,deflate,sdch Accept-Language: zh-CN,zh;q=0.8 Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3 Cookie: ... ... Êàë‰ª¨ÂÅáÂÆöËøô‰∏™ÈÉ®ÂàÜÁöÑÈïøÂ∫¶‰∏∫4960Â≠óËäÇÔºåÂÆÉ‰ºöË¢´ÂµåÂú®TCPÊï∞ÊçÆÂåÖ‰πã‰∏≠„ÄÇ 3.4 TCPÂçèËÆÆ TCPÊï∞ÊçÆÂåÖÈúÄË¶ÅËÆæÁΩÆÁ´ØÂè£ÔºåÊé•Êî∂ÊñπÔºàGoogleÔºâÁöÑHTTPÁ´ØÂè£ÈªòËÆ§ÊòØ80ÔºåÂèëÈÄÅÊñπÔºàÊú¨Êú∫ÔºâÁöÑÁ´ØÂè£ÊòØ‰∏Ä‰∏™ÈöèÊú∫ÁîüÊàêÁöÑ1024-65535‰πãÈó¥ÁöÑÊï¥Êï∞ÔºåÂÅáÂÆö‰∏∫51775„ÄÇ TCPÊï∞ÊçÆÂåÖÁöÑÊ†áÂ§¥ÈïøÂ∫¶‰∏∫20Â≠óËäÇÔºåÂä†‰∏äÂµåÂÖ•HTTPÁöÑÊï∞ÊçÆÂåÖÔºåÊÄªÈïøÂ∫¶Âèò‰∏∫4980Â≠óËäÇ„ÄÇ 3.5 IPÂçèËÆÆ ÁÑ∂ÂêéÔºåTCPÊï∞ÊçÆÂåÖÂÜçÂµåÂÖ•IPÊï∞ÊçÆÂåÖ„ÄÇIPÊï∞ÊçÆÂåÖÈúÄË¶ÅËÆæÁΩÆÂèåÊñπÁöÑIPÂú∞ÂùÄÔºåËøôÊòØÂ∑≤Áü•ÁöÑÔºåÂèëÈÄÅÊñπÊòØ192.168.1.100ÔºàÊú¨Êú∫ÔºâÔºåÊé•Êî∂ÊñπÊòØ172.194.72.105ÔºàGoogleÔºâ„ÄÇ IPÊï∞ÊçÆÂåÖÁöÑÊ†áÂ§¥ÈïøÂ∫¶‰∏∫20Â≠óËäÇÔºåÂä†‰∏äÂµåÂÖ•ÁöÑTCPÊï∞ÊçÆÂåÖÔºåÊÄªÈïøÂ∫¶Âèò‰∏∫5000Â≠óËäÇ„ÄÇ 3.6 ‰ª•Â§™ÁΩëÂçèËÆÆ ÊúÄÂêéÔºåIPÊï∞ÊçÆÂåÖÂµåÂÖ•‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖ„ÄÇ‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÈúÄË¶ÅËÆæÁΩÆÂèåÊñπÁöÑMACÂú∞ÂùÄÔºåÂèëÈÄÅÊñπ‰∏∫Êú¨Êú∫ÁöÑÁΩëÂç°MACÂú∞ÂùÄÔºåÊé•Êî∂Êñπ‰∏∫ÁΩëÂÖ≥192.168.1.1ÁöÑMACÂú∞ÂùÄÔºàÈÄöËøáARPÂçèËÆÆÂæóÂà∞Ôºâ„ÄÇ ‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÁöÑÊï∞ÊçÆÈÉ®ÂàÜÔºåÊúÄÂ§ßÈïøÂ∫¶‰∏∫1500Â≠óËäÇÔºåËÄåÁé∞Âú®ÁöÑIPÊï∞ÊçÆÂåÖÈïøÂ∫¶‰∏∫5000Â≠óËäÇ„ÄÇÂõ†Ê≠§ÔºåIPÊï∞ÊçÆÂåÖÂøÖÈ°ªÂàÜÂâ≤ÊàêÂõõ‰∏™ÂåÖ„ÄÇÂõ†‰∏∫ÊØè‰∏™ÂåÖÈÉΩÊúâËá™Â∑±ÁöÑIPÊ†áÂ§¥Ôºà20Â≠óËäÇÔºâÔºåÊâÄ‰ª•Âõõ‰∏™ÂåÖÁöÑIPÊï∞ÊçÆÂåÖÁöÑÈïøÂ∫¶ÂàÜÂà´‰∏∫1500„ÄÅ1500„ÄÅ1500„ÄÅ560„ÄÇ 3.7 ÊúçÂä°Âô®ÂìçÂ∫î ÁªèËøáÂ§ö‰∏™ÁΩëÂÖ≥ÁöÑËΩ¨ÂèëÔºåGoogleÁöÑÊúçÂä°Âô®172.194.72.105ÔºåÊî∂Âà∞‰∫ÜËøôÂõõ‰∏™‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖ„ÄÇ Ê†πÊçÆIPÊ†áÂ§¥ÁöÑÂ∫èÂè∑ÔºåGoogleÂ∞ÜÂõõ‰∏™ÂåÖÊãºËµ∑Êù•ÔºåÂèñÂá∫ÂÆåÊï¥ÁöÑTCPÊï∞ÊçÆÂåÖÔºåÁÑ∂ÂêéËØªÂá∫ÈáåÈù¢ÁöÑ&quot;HTTPËØ∑Ê±Ç&quot;ÔºåÊé•ÁùÄÂÅöÂá∫&quot;HTTPÂìçÂ∫î&quot;ÔºåÂÜçÁî®TCPÂçèËÆÆÂèëÂõûÊù•„ÄÇ Êú¨Êú∫Êî∂Âà∞HTTPÂìçÂ∫î‰ª•ÂêéÔºåÂ∞±ÂèØ‰ª•Â∞ÜÁΩëÈ°µÊòæÁ§∫Âá∫Êù•ÔºåÂÆåÊàê‰∏ÄÊ¨°ÁΩëÁªúÈÄö‰ø°„ÄÇ Êï¥ÁêÜËá™Ôºöhttp://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ªé‰∏ãÂà∞‰∏äÁúã‰∫îÂ±ÇÊ®°Âûã]]></title>
    <url>%2F2019%2F01%2F17%2Fnetwork%2F1.%E4%BB%8E%E4%B8%8B%E5%88%B0%E4%B8%8A%E7%9C%8B%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[ËøôÊòØËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÁ¨¨‰∏ÄÁØáÊñáÁ´†„ÄÇË¶ÅÊÉ≥‰∫ÜËß£HTTPÂçèËÆÆÔºåÂøÖÁÑ∂Ë¶Å‰ªéÊúÄÂü∫Êú¨ÁöÑËÆ°ÁÆóÊú∫ÁΩëÁªúÁü•ËØÜÂºÄÂßãÂÖ•Êâã„ÄÇÊú¨ÁØáÊñáÁ´†‰ªé‰∏ãÂà∞‰∏äÂÖ∑‰Ωì‰ªãÁªç‰∫îÂ±ÇÁªèÂÖ∏Ê®°ÂûãÔºåÊûÅÈÄüÂÖ•Èó®ËÆ°ÁÆóÊú∫ÁΩëÁªú„ÄÇ ÁªèÂÖ∏‰∫îÂ±ÇÊ®°Âûã ‰∏ãÈù¢Êàë‰ª¨ÂÖàÊù•‰∫ÜËß£‰∏Ä‰∏ãÂêÑÂ±ÇÂÅöÁöÑ‰∫ãÊÉÖÔºÅ 1.Áâ©ÁêÜÂ±Ç ÁîµËÑëË¶ÅÁªÑÁΩëÔºåÁ¨¨‰∏Ä‰ª∂‰∫ãË¶ÅÂπ≤‰ªÄ‰πàÔºüÂΩìÁÑ∂ÊòØÂÖàÊääÁîµËÑëËøûËµ∑Êù•ÔºåÂèØ‰ª•Áî®ÂÖâÁºÜ„ÄÅÁîµÁºÜ„ÄÅÂèåÁªûÁ∫ø„ÄÅÊó†Á∫øÁîµÊ≥¢Á≠âÊñπÂºè„ÄÇ ËøôÂ∞±Âè´ÂÅö&quot;Áâ©ÁêÜÂ±Ç&quot;ÔºåÂÆÉÂ∞±ÊòØÊääÁîµËÑëËøûÊé•Ëµ∑Êù•ÁöÑÁâ©ÁêÜÊâãÊÆµ„ÄÇÂÆÉ‰∏ªË¶ÅËßÑÂÆö‰∫ÜÁΩëÁªúÁöÑ‰∏Ä‰∫õÁîµÊ∞îÁâπÊÄßÔºå‰ΩúÁî®ÊòØË¥üË¥£‰º†ÈÄÅ0Âíå1ÁöÑÁîµ‰ø°Âè∑„ÄÇ 2.Êï∞ÊçÆÈìæË∑ØÂ±Ç ÂçïÁ∫ØÁöÑ0Âíå1Ê≤°Êúâ‰ªª‰ΩïÊÑè‰πâÔºåÂøÖÈ°ªËßÑÂÆöËß£ËØªÊñπÂºèÔºöÂ§öÂ∞ë‰∏™Áîµ‰ø°Âè∑ÁÆó‰∏ÄÁªÑÔºüÊØè‰∏™‰ø°Âè∑‰ΩçÊúâ‰ΩïÊÑè‰πâÔºü ËøôÂ∞±ÊòØ&quot;ÈìæÊé•Â±Ç&quot;ÁöÑÂäüËÉΩÔºåÂÆÉÂú®&quot;ÂÆû‰ΩìÂ±Ç&quot;ÁöÑ‰∏äÊñπÔºåÁ°ÆÂÆö‰∫Ü0Âíå1ÁöÑÂàÜÁªÑÊñπÂºè„ÄÇ 2.1 ‰ª•Â§™ÁΩëÂçèËÆÆ Êó©ÊúüÁöÑÊó∂ÂÄôÔºåÊØèÂÆ∂ÂÖ¨Âè∏ÈÉΩÊúâËá™Â∑±ÁöÑÁîµ‰ø°Âè∑ÂàÜÁªÑÊñπÂºè„ÄÇÈÄêÊ∏êÂú∞Ôºå‰∏ÄÁßçÂè´ÂÅö&quot;‰ª•Â§™ÁΩë&quot;ÔºàEthernetÔºâÁöÑÂçèËÆÆÔºåÂç†ÊçÆ‰∫Ü‰∏ªÂØºÂú∞‰Ωç„ÄÇ ‰ª•Â§™ÁΩëËßÑÂÆöÔºå‰∏ÄÁªÑÁîµ‰ø°Âè∑ÊûÑÊàê‰∏Ä‰∏™Êï∞ÊçÆÂåÖÔºåÂè´ÂÅö&quot;Â∏ß&quot;ÔºàFrameÔºâ„ÄÇÊØè‰∏ÄÂ∏ßÂàÜÊàê‰∏§‰∏™ÈÉ®ÂàÜÔºöÊ†áÂ§¥ÔºàHeadÔºâÂíåÊï∞ÊçÆÔºàDataÔºâ„ÄÇ &quot;Ê†áÂ§¥&quot;ÂåÖÂê´Êï∞ÊçÆÂåÖÁöÑ‰∏Ä‰∫õËØ¥ÊòéÈ°πÔºåÊØîÂ¶ÇÂèëÈÄÅËÄÖ„ÄÅÊé•ÂèóËÄÖ„ÄÅÊï∞ÊçÆÁ±ªÂûãÁ≠âÁ≠âÔºõ&quot;Êï∞ÊçÆ&quot;ÂàôÊòØÊï∞ÊçÆÂåÖÁöÑÂÖ∑‰ΩìÂÜÖÂÆπ„ÄÇ &quot;Ê†áÂ§¥&quot;ÁöÑÈïøÂ∫¶ÔºåÂõ∫ÂÆö‰∏∫18Â≠óËäÇ„ÄÇ&quot;Êï∞ÊçÆ&quot;ÁöÑÈïøÂ∫¶ÔºåÊúÄÁü≠‰∏∫46Â≠óËäÇÔºåÊúÄÈïø‰∏∫1500Â≠óËäÇ„ÄÇÂõ†Ê≠§ÔºåÊï¥‰∏™&quot;Â∏ß&quot;ÊúÄÁü≠‰∏∫64Â≠óËäÇÔºåÊúÄÈïø‰∏∫1518Â≠óËäÇ„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÂæàÈïøÔºåÂ∞±ÂøÖÈ°ªÂàÜÂâ≤ÊàêÂ§ö‰∏™Â∏ßËøõË°åÂèëÈÄÅ„ÄÇ 2.2 MACÂú∞ÂùÄ ‰∏äÈù¢ÊèêÂà∞Ôºå‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÁöÑ&quot;Ê†áÂ§¥&quot;ÔºåÂåÖÂê´‰∫ÜÂèëÈÄÅËÄÖÂíåÊé•ÂèóËÄÖÁöÑ‰ø°ÊÅØ„ÄÇÈÇ£‰πàÔºåÂèëÈÄÅËÄÖÂíåÊé•ÂèóËÄÖÊòØÂ¶Ç‰ΩïÊ†áËØÜÂë¢Ôºü ‰ª•Â§™ÁΩëËßÑÂÆöÔºåËøûÂÖ•ÁΩëÁªúÁöÑÊâÄÊúâËÆæÂ§áÔºåÈÉΩÂøÖÈ°ªÂÖ∑Êúâ&quot;ÁΩëÂç°&quot;Êé•Âè£„ÄÇÊï∞ÊçÆÂåÖÂøÖÈ°ªÊòØ‰ªé‰∏ÄÂùóÁΩëÂç°Ôºå‰º†ÈÄÅÂà∞Âè¶‰∏ÄÂùóÁΩëÂç°„ÄÇÁΩëÂç°ÁöÑÂú∞ÂùÄÔºåÂ∞±ÊòØÊï∞ÊçÆÂåÖÁöÑÂèëÈÄÅÂú∞ÂùÄÂíåÊé•Êî∂Âú∞ÂùÄÔºåËøôÂè´ÂÅöMACÂú∞ÂùÄ„ÄÇ ÊØèÂùóÁΩëÂç°Âá∫ÂéÇÁöÑÊó∂ÂÄôÔºåÈÉΩÊúâ‰∏Ä‰∏™ÂÖ®‰∏ñÁïåÁã¨‰∏ÄÊó†‰∫åÁöÑMACÂú∞ÂùÄÔºåÈïøÂ∫¶ÊòØ48‰∏™‰∫åËøõÂà∂‰ΩçÔºåÈÄöÂ∏∏Áî®12‰∏™ÂçÅÂÖ≠ËøõÂà∂Êï∞Ë°®Á§∫„ÄÇ Ââç6‰∏™ÂçÅÂÖ≠ËøõÂà∂Êï∞ÊòØÂéÇÂïÜÁºñÂè∑ÔºåÂêé6‰∏™ÊòØËØ•ÂéÇÂïÜÁöÑÁΩëÂç°ÊµÅÊ∞¥Âè∑„ÄÇÊúâ‰∫ÜMACÂú∞ÂùÄÔºåÂ∞±ÂèØ‰ª•ÂÆö‰ΩçÁΩëÂç°ÂíåÊï∞ÊçÆÂåÖÁöÑË∑ØÂæÑ‰∫Ü„ÄÇ 2.3 ÂπøÊí≠ ÂÆö‰πâÂú∞ÂùÄÂè™ÊòØÁ¨¨‰∏ÄÊ≠•ÔºåÂêéÈù¢ËøòÊúâÊõ¥Â§öÁöÑÊ≠•È™§„ÄÇ È¶ñÂÖàÔºå‰∏ÄÂùóÁΩëÂç°ÊÄé‰πà‰ºöÁü•ÈÅìÂè¶‰∏ÄÂùóÁΩëÂç°ÁöÑMACÂú∞ÂùÄÔºü ÂõûÁ≠îÊòØÊúâ‰∏ÄÁßçARPÂçèËÆÆÔºåÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ‰∏ãÈù¢‰ªãÁªçARP„ÄÇ ÂÖ∂Ê¨°ÔºåÂ∞±ÁÆóÊúâ‰∫ÜMACÂú∞ÂùÄÔºåÁ≥ªÁªüÊÄéÊ†∑ÊâçËÉΩÊääÊï∞ÊçÆÂåÖÂáÜÁ°ÆÈÄÅÂà∞Êé•Êî∂ÊñπÔºü ÂõûÁ≠îÊòØ‰ª•Â§™ÁΩëÈááÁî®‰∫Ü‰∏ÄÁßçÂæà&quot;ÂéüÂßã&quot;ÁöÑÊñπÂºèÔºåÂÆÉ‰∏çÊòØÊääÊï∞ÊçÆÂåÖÂáÜÁ°ÆÈÄÅÂà∞Êé•Êî∂ÊñπÔºåËÄåÊòØÂêëÊú¨ÁΩëÁªúÂÜÖÊâÄÊúâËÆ°ÁÆóÊú∫ÂèëÈÄÅÔºåËÆ©ÊØèÂè∞ËÆ°ÁÆóÊú∫Ëá™Â∑±Âà§Êñ≠ÔºåÊòØÂê¶‰∏∫Êé•Êî∂Êñπ„ÄÇ ‰∏äÂõæ‰∏≠Ôºå1Âè∑ËÆ°ÁÆóÊú∫Âêë2Âè∑ËÆ°ÁÆóÊú∫ÂèëÈÄÅ‰∏Ä‰∏™Êï∞ÊçÆÂåÖÔºåÂêå‰∏Ä‰∏™Â≠êÁΩëÁªúÁöÑ3Âè∑„ÄÅ4Âè∑„ÄÅ5Âè∑ËÆ°ÁÆóÊú∫ÈÉΩ‰ºöÊî∂Âà∞Ëøô‰∏™ÂåÖ„ÄÇÂÆÉ‰ª¨ËØªÂèñËøô‰∏™ÂåÖÁöÑ&quot;Ê†áÂ§¥&quot;ÔºåÊâæÂà∞Êé•Êî∂ÊñπÁöÑMACÂú∞ÂùÄÔºåÁÑ∂Âêé‰∏éËá™Ë∫´ÁöÑMACÂú∞ÂùÄÁõ∏ÊØîËæÉÔºåÂ¶ÇÊûú‰∏§ËÄÖÁõ∏ÂêåÔºåÂ∞±Êé•ÂèóËøô‰∏™ÂåÖÔºåÂÅöËøõ‰∏ÄÊ≠•Â§ÑÁêÜÔºåÂê¶ÂàôÂ∞±‰∏¢ÂºÉËøô‰∏™ÂåÖ„ÄÇËøôÁßçÂèëÈÄÅÊñπÂºèÂ∞±Âè´ÂÅö&quot;ÂπøÊí≠&quot;ÔºàbroadcastingÔºâ„ÄÇ Êúâ‰∫ÜÊï∞ÊçÆÂåÖÁöÑÂÆö‰πâ„ÄÅÁΩëÂç°ÁöÑMACÂú∞ÂùÄ„ÄÅÂπøÊí≠ÁöÑÂèëÈÄÅÊñπÂºèÔºå&quot;ÈìæÊé•Â±Ç&quot;Â∞±ÂèØ‰ª•Âú®Â§öÂè∞ËÆ°ÁÆóÊú∫‰πãÈó¥‰º†ÈÄÅÊï∞ÊçÆ‰∫Ü„ÄÇ 3.ÁΩëÁªúÂ±Ç ‰ª•Â§™ÁΩëÂçèËÆÆÔºå‰æùÈù†MACÂú∞ÂùÄÂèëÈÄÅÊï∞ÊçÆ„ÄÇÁêÜËÆ∫‰∏äÔºåÂçïÂçï‰æùÈù†MACÂú∞ÂùÄÔºå‰∏äÊµ∑ÁöÑÁΩëÂç°Â∞±ÂèØ‰ª•ÊâæÂà∞Ê¥õÊùâÁü∂ÁöÑÁΩëÂç°‰∫ÜÔºåÊäÄÊúØ‰∏äÊòØÂèØ‰ª•ÂÆûÁé∞ÁöÑ„ÄÇ ‰ΩÜÊòØÔºåËøôÊ†∑ÂÅöÊúâ‰∏Ä‰∏™ÈáçÂ§ßÁöÑÁº∫ÁÇπ„ÄÇ‰ª•Â§™ÁΩëÈááÁî®ÂπøÊí≠ÊñπÂºèÂèëÈÄÅÊï∞ÊçÆÂåÖÔºåÊâÄÊúâÊàêÂëò‰∫∫Êâã‰∏Ä&quot;ÂåÖ&quot;Ôºå‰∏ç‰ªÖÊïàÁéá‰ΩéÔºåËÄå‰∏îÂ±ÄÈôêÂú®ÂèëÈÄÅËÄÖÊâÄÂú®ÁöÑÂ≠êÁΩëÁªú„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûú‰∏§Âè∞ËÆ°ÁÆóÊú∫‰∏çÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÂπøÊí≠ÊòØ‰º†‰∏çËøáÂéªÁöÑ„ÄÇËøôÁßçËÆæËÆ°ÊòØÂêàÁêÜÁöÑÔºåÂê¶Âàô‰∫íËÅîÁΩë‰∏äÊØè‰∏ÄÂè∞ËÆ°ÁÆóÊú∫ÈÉΩ‰ºöÊî∂Âà∞ÊâÄÊúâÂåÖÔºåÈÇ£‰ºöÂºïËµ∑ÁÅæÈöæ„ÄÇ ‰∫íËÅîÁΩëÊòØÊó†Êï∞Â≠êÁΩëÁªúÂÖ±ÂêåÁªÑÊàêÁöÑ‰∏Ä‰∏™Â∑®ÂûãÁΩëÁªúÔºåÂæàÂÉèÊÉ≥Ë±°‰∏äÊµ∑ÂíåÊ¥õÊùâÁü∂ÁöÑÁîµËÑë‰ºöÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåËøôÂá†‰πéÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ Âõ†Ê≠§ÔºåÂøÖÈ°ªÊâæÂà∞‰∏ÄÁßçÊñπÊ≥ïÔºåËÉΩÂ§üÂå∫ÂàÜÂì™‰∫õMACÂú∞ÂùÄÂ±û‰∫éÂêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÂì™‰∫õ‰∏çÊòØ„ÄÇÂ¶ÇÊûúÊòØÂêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÂ∞±ÈááÁî®ÂπøÊí≠ÊñπÂºèÂèëÈÄÅÔºåÂê¶ÂàôÂ∞±ÈááÁî®&quot;Ë∑ØÁî±&quot;ÊñπÂºèÂèëÈÄÅ„ÄÇÔºà&quot;Ë∑ØÁî±&quot;ÁöÑÊÑèÊÄùÔºåÂ∞±ÊòØÊåáÂ¶Ç‰ΩïÂêë‰∏çÂêåÁöÑÂ≠êÁΩëÁªúÂàÜÂèëÊï∞ÊçÆÂåÖÔºåËøôÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑ‰∏ªÈ¢òÔºåÊú¨Êñá‰∏çÊ∂âÂèä„ÄÇÔºâÈÅóÊÜæÁöÑÊòØÔºåMACÂú∞ÂùÄÊú¨Ë∫´Êó†Ê≥ïÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇÂÆÉÂè™‰∏éÂéÇÂïÜÊúâÂÖ≥Ôºå‰∏éÊâÄÂ§ÑÁΩëÁªúÊó†ÂÖ≥„ÄÇ ËøôÂ∞±ÂØºËá¥‰∫Ü&quot;ÁΩëÁªúÂ±Ç&quot;ÁöÑËØûÁîü„ÄÇÂÆÉÁöÑ‰ΩúÁî®ÊòØÂºïËøõ‰∏ÄÂ•óÊñ∞ÁöÑÂú∞ÂùÄÔºå‰ΩøÂæóÊàë‰ª¨ËÉΩÂ§üÂå∫ÂàÜ‰∏çÂêåÁöÑËÆ°ÁÆóÊú∫ÊòØÂê¶Â±û‰∫éÂêå‰∏Ä‰∏™Â≠êÁΩëÁªú„ÄÇËøôÂ•óÂú∞ÂùÄÂ∞±Âè´ÂÅö&quot;ÁΩëÁªúÂú∞ÂùÄ&quot;ÔºåÁÆÄÁß∞&quot;ÁΩëÂùÄ&quot;„ÄÇ ‰∫éÊòØÔºå&quot;ÁΩëÁªúÂ±Ç&quot;Âá∫Áé∞‰ª•ÂêéÔºåÊØèÂè∞ËÆ°ÁÆóÊú∫Êúâ‰∫Ü‰∏§ÁßçÂú∞ÂùÄÔºå‰∏ÄÁßçÊòØMACÂú∞ÂùÄÔºåÂè¶‰∏ÄÁßçÊòØÁΩëÁªúÂú∞ÂùÄ„ÄÇ‰∏§ÁßçÂú∞ÂùÄ‰πãÈó¥Ê≤°Êúâ‰ªª‰ΩïËÅîÁ≥ªÔºåMACÂú∞ÂùÄÊòØÁªëÂÆöÂú®ÁΩëÂç°‰∏äÁöÑÔºåÁΩëÁªúÂú∞ÂùÄÂàôÊòØÁÆ°ÁêÜÂëòÂàÜÈÖçÁöÑÔºåÂÆÉ‰ª¨Âè™ÊòØÈöèÊú∫ÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇ ÁΩëÁªúÂú∞ÂùÄÂ∏ÆÂä©Êàë‰ª¨Á°ÆÂÆöËÆ°ÁÆóÊú∫ÊâÄÂú®ÁöÑÂ≠êÁΩëÁªúÔºåMACÂú∞ÂùÄÂàôÂ∞ÜÊï∞ÊçÆÂåÖÈÄÅÂà∞ËØ•Â≠êÁΩëÁªú‰∏≠ÁöÑÁõÆÊ†áÁΩëÂç°„ÄÇÂõ†Ê≠§Ôºå‰ªéÈÄªËæë‰∏äÂèØ‰ª•Êé®Êñ≠ÔºåÂøÖÂÆöÊòØÂÖàÂ§ÑÁêÜÁΩëÁªúÂú∞ÂùÄÔºåÁÑ∂ÂêéÂÜçÂ§ÑÁêÜMACÂú∞ÂùÄ„ÄÇ 3.1 IPÂçèËÆÆ ËßÑÂÆöÁΩëÁªúÂú∞ÂùÄÁöÑÂçèËÆÆÔºåÂè´ÂÅöIPÂçèËÆÆ„ÄÇÂÆÉÊâÄÂÆö‰πâÁöÑÂú∞ÂùÄÔºåÂ∞±Ë¢´Áß∞‰∏∫IPÂú∞ÂùÄ„ÄÇ ÁõÆÂâçÔºåÂπøÊ≥õÈááÁî®ÁöÑÊòØIPÂçèËÆÆÁ¨¨ÂõõÁâàÔºåÁÆÄÁß∞IPv4„ÄÇËøô‰∏™ÁâàÊú¨ËßÑÂÆöÔºåÁΩëÁªúÂú∞ÂùÄÁî±32‰∏™‰∫åËøõÂà∂‰ΩçÁªÑÊàê„ÄÇ ‰π†ÊÉØ‰∏äÔºåÊàë‰ª¨Áî®ÂàÜÊàêÂõõÊÆµÁöÑÂçÅËøõÂà∂Êï∞Ë°®Á§∫IPÂú∞ÂùÄÔºå‰ªé0.0.0.0‰∏ÄÁõ¥Âà∞255.255.255.255„ÄÇ ‰∫íËÅîÁΩë‰∏äÁöÑÊØè‰∏ÄÂè∞ËÆ°ÁÆóÊú∫ÔºåÈÉΩ‰ºöÂàÜÈÖçÂà∞‰∏Ä‰∏™IPÂú∞ÂùÄ„ÄÇËøô‰∏™Âú∞ÂùÄÂàÜÊàê‰∏§‰∏™ÈÉ®ÂàÜÔºåÂâç‰∏ÄÈÉ®ÂàÜ‰ª£Ë°®ÁΩëÁªúÔºåÂêé‰∏ÄÈÉ®ÂàÜ‰ª£Ë°®‰∏ªÊú∫„ÄÇÊØîÂ¶ÇÔºåIPÂú∞ÂùÄ172.16.254.1ÔºåËøôÊòØ‰∏Ä‰∏™32‰ΩçÁöÑÂú∞ÂùÄÔºåÂÅáÂÆöÂÆÉÁöÑÁΩëÁªúÈÉ®ÂàÜÊòØÂâç24‰ΩçÔºà172.16.254ÔºâÔºåÈÇ£‰πà‰∏ªÊú∫ÈÉ®ÂàÜÂ∞±ÊòØÂêé8‰ΩçÔºàÊúÄÂêéÁöÑÈÇ£‰∏™1Ôºâ„ÄÇÂ§Ñ‰∫éÂêå‰∏Ä‰∏™Â≠êÁΩëÁªúÁöÑÁîµËÑëÔºåÂÆÉ‰ª¨IPÂú∞ÂùÄÁöÑÁΩëÁªúÈÉ®ÂàÜÂøÖÂÆöÊòØÁõ∏ÂêåÁöÑÔºå‰πüÂ∞±ÊòØËØ¥172.16.254.2Â∫îËØ•‰∏é172.16.254.1Â§ÑÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªú„ÄÇ ‰ΩÜÊòØÔºåÈóÆÈ¢òÂú®‰∫éÂçïÂçï‰ªéIPÂú∞ÂùÄÔºåÊàë‰ª¨Êó†Ê≥ïÂà§Êñ≠ÁΩëÁªúÈÉ®ÂàÜ„ÄÇËøòÊòØ‰ª•172.16.254.1‰∏∫‰æãÔºåÂÆÉÁöÑÁΩëÁªúÈÉ®ÂàÜÔºåÂà∞Â∫ïÊòØÂâç24‰ΩçÔºåËøòÊòØÂâç16‰ΩçÔºåÁîöËá≥Ââç28‰ΩçÔºå‰ªéIPÂú∞ÂùÄ‰∏äÊòØÁúã‰∏çÂá∫Êù•ÁöÑ„ÄÇ ÈÇ£‰πàÔºåÊÄéÊ†∑ÊâçËÉΩ‰ªéIPÂú∞ÂùÄÔºåÂà§Êñ≠‰∏§Âè∞ËÆ°ÁÆóÊú∫ÊòØÂê¶Â±û‰∫éÂêå‰∏Ä‰∏™Â≠êÁΩëÁªúÂë¢ÔºüËøôÂ∞±Ë¶ÅÁî®Âà∞Âè¶‰∏Ä‰∏™ÂèÇÊï∞&quot;Â≠êÁΩëÊé©Á†Å&quot;Ôºàsubnet maskÔºâ„ÄÇ ÊâÄË∞ì&quot;Â≠êÁΩëÊé©Á†Å&quot;ÔºåÂ∞±ÊòØË°®Á§∫Â≠êÁΩëÁªúÁâπÂæÅÁöÑ‰∏Ä‰∏™ÂèÇÊï∞„ÄÇÂÆÉÂú®ÂΩ¢Âºè‰∏äÁ≠âÂêå‰∫éIPÂú∞ÂùÄÔºå‰πüÊòØ‰∏Ä‰∏™32‰Ωç‰∫åËøõÂà∂Êï∞Â≠óÔºåÂÆÉÁöÑÁΩëÁªúÈÉ®ÂàÜÂÖ®ÈÉ®‰∏∫1Ôºå‰∏ªÊú∫ÈÉ®ÂàÜÂÖ®ÈÉ®‰∏∫0„ÄÇÊØîÂ¶ÇÔºåIPÂú∞ÂùÄ172.16.254.1ÔºåÂ¶ÇÊûúÂ∑≤Áü•ÁΩëÁªúÈÉ®ÂàÜÊòØÂâç24‰ΩçÔºå‰∏ªÊú∫ÈÉ®ÂàÜÊòØÂêé8‰ΩçÔºåÈÇ£‰πàÂ≠êÁΩëÁªúÊé©Á†ÅÂ∞±ÊòØ11111111.11111111.11111111.00000000ÔºåÂÜôÊàêÂçÅËøõÂà∂Â∞±ÊòØ255.255.255.0„ÄÇ Áü•ÈÅì&quot;Â≠êÁΩëÊé©Á†Å&quot;ÔºåÊàë‰ª¨Â∞±ËÉΩÂà§Êñ≠Ôºå‰ªªÊÑè‰∏§‰∏™IPÂú∞ÂùÄÊòØÂê¶Â§ÑÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªú„ÄÇÊñπÊ≥ïÊòØÂ∞Ü‰∏§‰∏™IPÂú∞ÂùÄ‰∏éÂ≠êÁΩëÊé©Á†ÅÂàÜÂà´ËøõË°åANDËøêÁÆóÔºà‰∏§‰∏™Êï∞‰ΩçÈÉΩ‰∏∫1ÔºåËøêÁÆóÁªìÊûú‰∏∫1ÔºåÂê¶Âàô‰∏∫0ÔºâÔºåÁÑ∂ÂêéÊØîËæÉÁªìÊûúÊòØÂê¶Áõ∏ÂêåÔºåÂ¶ÇÊûúÊòØÁöÑËØùÔºåÂ∞±Ë°®ÊòéÂÆÉ‰ª¨Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªú‰∏≠ÔºåÂê¶ÂàôÂ∞±‰∏çÊòØ„ÄÇ ÊØîÂ¶ÇÔºåÂ∑≤Áü•IPÂú∞ÂùÄ172.16.254.1Âíå172.16.254.233ÁöÑÂ≠êÁΩëÊé©Á†ÅÈÉΩÊòØ255.255.255.0ÔºåËØ∑ÈóÆÂÆÉ‰ª¨ÊòØÂê¶Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºü‰∏§ËÄÖ‰∏éÂ≠êÁΩëÊé©Á†ÅÂàÜÂà´ËøõË°åANDËøêÁÆóÔºåÁªìÊûúÈÉΩÊòØ172.16.254.0ÔºåÂõ†Ê≠§ÂÆÉ‰ª¨Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªú„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÔºåIPÂçèËÆÆÁöÑ‰ΩúÁî®‰∏ªË¶ÅÊúâ‰∏§‰∏™Ôºå‰∏Ä‰∏™ÊòØ‰∏∫ÊØè‰∏ÄÂè∞ËÆ°ÁÆóÊú∫ÂàÜÈÖçIPÂú∞ÂùÄÔºåÂè¶‰∏Ä‰∏™ÊòØÁ°ÆÂÆöÂì™‰∫õÂú∞ÂùÄÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªú„ÄÇ 3.2 IPÊï∞ÊçÆÂåÖ Ê†πÊçÆIPÂçèËÆÆÂèëÈÄÅÁöÑÊï∞ÊçÆÔºåÂ∞±Âè´ÂÅöIPÊï∞ÊçÆÂåÖ„ÄÇ‰∏çÈöæÊÉ≥Ë±°ÔºåÂÖ∂‰∏≠ÂøÖÂÆöÂåÖÊã¨IPÂú∞ÂùÄ‰ø°ÊÅØ„ÄÇ ‰ΩÜÊòØÂâçÈù¢ËØ¥ËøáÔºå‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÂè™ÂåÖÂê´MACÂú∞ÂùÄÔºåÂπ∂Ê≤°ÊúâIPÂú∞ÂùÄÁöÑÊ†è‰Ωç„ÄÇÈÇ£‰πàÊòØÂê¶ÈúÄË¶Å‰øÆÊîπÊï∞ÊçÆÂÆö‰πâÔºåÂÜçÊ∑ªÂä†‰∏Ä‰∏™Ê†è‰ΩçÂë¢Ôºü ÂõûÁ≠îÊòØ‰∏çÈúÄË¶ÅÔºåÊàë‰ª¨ÂèØ‰ª•ÊääIPÊï∞ÊçÆÂåÖÁõ¥Êé•ÊîæËøõ‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÁöÑ&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜÔºåÂõ†Ê≠§ÂÆåÂÖ®‰∏çÁî®‰øÆÊîπ‰ª•Â§™ÁΩëÁöÑËßÑÊ†º„ÄÇËøôÂ∞±ÊòØ‰∫íËÅîÁΩëÂàÜÂ±ÇÁªìÊûÑÁöÑÂ•ΩÂ§ÑÔºö‰∏äÂ±ÇÁöÑÂèòÂä®ÂÆåÂÖ®‰∏çÊ∂âÂèä‰∏ãÂ±ÇÁöÑÁªìÊûÑ„ÄÇ ÂÖ∑‰ΩìÊù•ËØ¥ÔºåIPÊï∞ÊçÆÂåÖ‰πüÂàÜ‰∏∫&quot;Ê†áÂ§¥&quot;Âíå&quot;Êï∞ÊçÆ&quot;‰∏§‰∏™ÈÉ®ÂàÜ„ÄÇ&quot;Ê†áÂ§¥&quot;ÈÉ®ÂàÜ‰∏ªË¶ÅÂåÖÊã¨ÁâàÊú¨„ÄÅÈïøÂ∫¶„ÄÅIPÂú∞ÂùÄÁ≠â‰ø°ÊÅØÔºå&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜÂàôÊòØIPÊï∞ÊçÆÂåÖÁöÑÂÖ∑‰ΩìÂÜÖÂÆπ„ÄÇÂÆÉÊîæËøõ‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÂêéÔºå‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÂ∞±ÂèòÊàê‰∫Ü‰∏ãÈù¢ËøôÊ†∑„ÄÇ IPÊï∞ÊçÆÂåÖÁöÑ&quot;Ê†áÂ§¥&quot;ÈÉ®ÂàÜÁöÑÈïøÂ∫¶‰∏∫20‰∏™Â≠óËäÇÔºåÊï¥‰∏™Êï∞ÊçÆÂåÖÁöÑÊÄªÈïøÂ∫¶ÊúÄÂ§ß‰∏∫65,535Â≠óËäÇ„ÄÇÂõ†Ê≠§ÔºåÁêÜËÆ∫‰∏äÔºå‰∏Ä‰∏™IPÊï∞ÊçÆÂåÖÁöÑ&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜÔºåÊúÄÈïø‰∏∫65,515Â≠óËäÇ„ÄÇÂâçÈù¢ËØ¥ËøáÔºå‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÁöÑ&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜÔºåÊúÄÈïøÂè™Êúâ1500Â≠óËäÇ„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúIPÊï∞ÊçÆÂåÖË∂ÖËøá‰∫Ü1500Â≠óËäÇÔºåÂÆÉÂ∞±ÈúÄË¶ÅÂàÜÂâ≤ÊàêÂá†‰∏™‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÔºåÂàÜÂºÄÂèëÈÄÅ‰∫Ü„ÄÇ 3.3 ARPÂçèËÆÆ ÂÖ≥‰∫é&quot;ÁΩëÁªúÂ±Ç&quot;ÔºåËøòÊúâÊúÄÂêé‰∏ÄÁÇπÈúÄË¶ÅËØ¥Êòé„ÄÇ Âõ†‰∏∫IPÊï∞ÊçÆÂåÖÊòØÊîæÂú®‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÈáåÂèëÈÄÅÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂøÖÈ°ªÂêåÊó∂Áü•ÈÅì‰∏§‰∏™Âú∞ÂùÄÔºå‰∏Ä‰∏™ÊòØÂØπÊñπÁöÑMACÂú∞ÂùÄÔºåÂè¶‰∏Ä‰∏™ÊòØÂØπÊñπÁöÑIPÂú∞ÂùÄ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂØπÊñπÁöÑIPÂú∞ÂùÄÊòØÂ∑≤Áü•ÁöÑÔºå‰ΩÜÊòØÊàë‰ª¨‰∏çÁü•ÈÅìÂÆÉÁöÑMACÂú∞ÂùÄ„ÄÇ ÊâÄ‰ª•ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏ÄÁßçÊú∫Âà∂ÔºåËÉΩÂ§ü‰ªéIPÂú∞ÂùÄÂæóÂà∞MACÂú∞ÂùÄ„ÄÇ ËøôÈáåÂèàÂèØ‰ª•ÂàÜÊàê‰∏§ÁßçÊÉÖÂÜµ„ÄÇÁ¨¨‰∏ÄÁßçÊÉÖÂÜµÔºåÂ¶ÇÊûú‰∏§Âè∞‰∏ªÊú∫‰∏çÂú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÈÇ£‰πà‰∫ãÂÆû‰∏äÊ≤°ÊúâÂäûÊ≥ïÂæóÂà∞ÂØπÊñπÁöÑMACÂú∞ÂùÄÔºåÂè™ËÉΩÊääÊï∞ÊçÆÂåÖ‰º†ÈÄÅÂà∞‰∏§‰∏™Â≠êÁΩëÁªúËøûÊé•Â§ÑÁöÑ&quot;ÁΩëÂÖ≥&quot;ÔºàgatewayÔºâÔºåËÆ©ÁΩëÂÖ≥ÂéªÂ§ÑÁêÜ„ÄÇ Á¨¨‰∫åÁßçÊÉÖÂÜµÔºåÂ¶ÇÊûú‰∏§Âè∞‰∏ªÊú∫Âú®Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•Áî®ARPÂçèËÆÆÔºåÂæóÂà∞ÂØπÊñπÁöÑMACÂú∞ÂùÄ„ÄÇARPÂçèËÆÆ‰πüÊòØÂèëÂá∫‰∏Ä‰∏™Êï∞ÊçÆÂåÖÔºàÂåÖÂê´Âú®‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖ‰∏≠ÔºâÔºåÂÖ∂‰∏≠ÂåÖÂê´ÂÆÉÊâÄË¶ÅÊü•ËØ¢‰∏ªÊú∫ÁöÑIPÂú∞ÂùÄÔºåÂú®ÂØπÊñπÁöÑMACÂú∞ÂùÄËøô‰∏ÄÊ†èÔºåÂ°´ÁöÑÊòØFF:FF:FF:FF:FF:FFÔºåË°®Á§∫ËøôÊòØ‰∏Ä‰∏™&quot;ÂπøÊí≠&quot;Âú∞ÂùÄ„ÄÇÂÆÉÊâÄÂú®Â≠êÁΩëÁªúÁöÑÊØè‰∏ÄÂè∞‰∏ªÊú∫ÔºåÈÉΩ‰ºöÊî∂Âà∞Ëøô‰∏™Êï∞ÊçÆÂåÖÔºå‰ªé‰∏≠ÂèñÂá∫IPÂú∞ÂùÄÔºå‰∏éËá™Ë∫´ÁöÑIPÂú∞ÂùÄËøõË°åÊØîËæÉ„ÄÇÂ¶ÇÊûú‰∏§ËÄÖÁõ∏ÂêåÔºåÈÉΩÂÅöÂá∫ÂõûÂ§çÔºåÂêëÂØπÊñπÊä•ÂëäËá™Â∑±ÁöÑMACÂú∞ÂùÄÔºåÂê¶ÂàôÂ∞±‰∏¢ÂºÉËøô‰∏™ÂåÖ„ÄÇ ÊÄª‰πãÔºåÊúâ‰∫ÜARPÂçèËÆÆ‰πãÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÂæóÂà∞Âêå‰∏Ä‰∏™Â≠êÁΩëÁªúÂÜÖÁöÑ‰∏ªÊú∫MACÂú∞ÂùÄÔºåÂèØ‰ª•ÊääÊï∞ÊçÆÂåÖÂèëÈÄÅÂà∞‰ªªÊÑè‰∏ÄÂè∞‰∏ªÊú∫‰πã‰∏ä‰∫Ü„ÄÇ 4. ‰º†ËæìÂ±Ç Êúâ‰∫ÜMACÂú∞ÂùÄÂíåIPÂú∞ÂùÄÔºåÊàë‰ª¨Â∑≤ÁªèÂèØ‰ª•Âú®‰∫íËÅîÁΩë‰∏ä‰ªªÊÑè‰∏§Âè∞‰∏ªÊú∫‰∏äÂª∫Á´ãÈÄö‰ø°„ÄÇ Êé•‰∏ãÊù•ÁöÑÈóÆÈ¢òÊòØÔºåÂêå‰∏ÄÂè∞‰∏ªÊú∫‰∏äÊúâËÆ∏Â§öÁ®ãÂ∫èÈÉΩÈúÄË¶ÅÁî®Âà∞ÁΩëÁªúÔºåÊØîÂ¶ÇÔºå‰Ω†‰∏ÄËæπÊµèËßàÁΩëÈ°µÔºå‰∏ÄËæπ‰∏éÊúãÂèãÂú®Á∫øËÅäÂ§©„ÄÇÂΩì‰∏Ä‰∏™Êï∞ÊçÆÂåÖ‰ªé‰∫íËÅîÁΩë‰∏äÂèëÊù•ÁöÑÊó∂ÂÄôÔºå‰Ω†ÊÄé‰πàÁü•ÈÅìÔºåÂÆÉÊòØË°®Á§∫ÁΩëÈ°µÁöÑÂÜÖÂÆπÔºåËøòÊòØË°®Á§∫Âú®Á∫øËÅäÂ§©ÁöÑÂÜÖÂÆπÔºü ‰πüÂ∞±ÊòØËØ¥ÔºåÊàë‰ª¨ËøòÈúÄË¶Å‰∏Ä‰∏™ÂèÇÊï∞ÔºåË°®Á§∫Ëøô‰∏™Êï∞ÊçÆÂåÖÂà∞Â∫ï‰æõÂì™‰∏™Á®ãÂ∫èÔºàËøõÁ®ãÔºâ‰ΩøÁî®„ÄÇËøô‰∏™ÂèÇÊï∞Â∞±Âè´ÂÅö&quot;Á´ØÂè£&quot;ÔºàportÔºâÔºåÂÆÉÂÖ∂ÂÆûÊòØÊØè‰∏Ä‰∏™‰ΩøÁî®ÁΩëÂç°ÁöÑÁ®ãÂ∫èÁöÑÁºñÂè∑„ÄÇÊØè‰∏™Êï∞ÊçÆÂåÖÈÉΩÂèëÂà∞‰∏ªÊú∫ÁöÑÁâπÂÆöÁ´ØÂè£ÔºåÊâÄ‰ª•‰∏çÂêåÁöÑÁ®ãÂ∫èÂ∞±ËÉΩÂèñÂà∞Ëá™Â∑±ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÇ &quot;Á´ØÂè£&quot;ÊòØ0Âà∞65535‰πãÈó¥ÁöÑ‰∏Ä‰∏™Êï¥Êï∞ÔºåÊ≠£Â•Ω16‰∏™‰∫åËøõÂà∂‰Ωç„ÄÇ0Âà∞1023ÁöÑÁ´ØÂè£Ë¢´Á≥ªÁªüÂç†Áî®ÔºåÁî®Êà∑Âè™ËÉΩÈÄâÁî®Â§ß‰∫é1023ÁöÑÁ´ØÂè£„ÄÇ‰∏çÁÆ°ÊòØÊµèËßàÁΩëÈ°µËøòÊòØÂú®Á∫øËÅäÂ§©ÔºåÂ∫îÁî®Á®ãÂ∫è‰ºöÈöèÊú∫ÈÄâÁî®‰∏Ä‰∏™Á´ØÂè£ÔºåÁÑ∂Âêé‰∏éÊúçÂä°Âô®ÁöÑÁõ∏Â∫îÁ´ØÂè£ËÅîÁ≥ª„ÄÇ &quot;‰º†ËæìÂ±Ç&quot;ÁöÑÂäüËÉΩÔºåÂ∞±ÊòØÂª∫Á´ã&quot;Á´ØÂè£Âà∞Á´ØÂè£&quot;ÁöÑÈÄö‰ø°„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºå‚ÄúÁΩëÁªúÂ±Ç&quot;ÁöÑÂäüËÉΩÊòØÂª∫Á´ã&quot;‰∏ªÊú∫Âà∞‰∏ªÊú∫&quot;ÁöÑÈÄö‰ø°„ÄÇÂè™Ë¶ÅÁ°ÆÂÆö‰∏ªÊú∫ÂíåÁ´ØÂè£ÔºåÊàë‰ª¨Â∞±ËÉΩÂÆûÁé∞Á®ãÂ∫è‰πãÈó¥ÁöÑ‰∫§ÊµÅ„ÄÇÂõ†Ê≠§ÔºåUnixÁ≥ªÁªüÂ∞±Êää‰∏ªÊú∫+Á´ØÂè£ÔºåÂè´ÂÅö&quot;Â•óÊé•Â≠ó‚ÄùÔºàsocketÔºâ„ÄÇÊúâ‰∫ÜÂÆÉÔºåÂ∞±ÂèØ‰ª•ËøõË°åÁΩëÁªúÂ∫îÁî®Á®ãÂ∫èÂºÄÂèë‰∫Ü„ÄÇ 4.1 UDPÂçèËÆÆ Áé∞Âú®ÔºåÊàë‰ª¨ÂøÖÈ°ªÂú®Êï∞ÊçÆÂåÖ‰∏≠Âä†ÂÖ•Á´ØÂè£‰ø°ÊÅØÔºåËøôÂ∞±ÈúÄË¶ÅÊñ∞ÁöÑÂçèËÆÆ„ÄÇÊúÄÁÆÄÂçïÁöÑÂÆûÁé∞Âè´ÂÅöUDPÂçèËÆÆÔºåÂÆÉÁöÑÊ†ºÂºèÂá†‰πéÂ∞±ÊòØÂú®Êï∞ÊçÆÂâçÈù¢ÔºåÂä†‰∏äÁ´ØÂè£Âè∑„ÄÇ UDPÊï∞ÊçÆÂåÖÔºå‰πüÊòØÁî±&quot;Ê†áÂ§¥&quot;Âíå&quot;Êï∞ÊçÆ&quot;‰∏§ÈÉ®ÂàÜÁªÑÊàê„ÄÇ &quot;Ê†áÂ§¥&quot;ÈÉ®ÂàÜ‰∏ªË¶ÅÂÆö‰πâ‰∫ÜÂèëÂá∫Á´ØÂè£ÂíåÊé•Êî∂Á´ØÂè£Ôºå&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜÂ∞±ÊòØÂÖ∑‰ΩìÁöÑÂÜÖÂÆπ„ÄÇÁÑ∂ÂêéÔºåÊääÊï¥‰∏™UDPÊï∞ÊçÆÂåÖÊîæÂÖ•IPÊï∞ÊçÆÂåÖÁöÑ&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜÔºåËÄåÂâçÈù¢ËØ¥ËøáÔºåIPÊï∞ÊçÆÂåÖÂèàÊòØÊîæÂú®‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖ‰πã‰∏≠ÁöÑÔºåÊâÄ‰ª•Êï¥‰∏™‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÁé∞Âú®ÂèòÊàê‰∫Ü‰∏ãÈù¢ËøôÊ†∑Ôºö UDPÊï∞ÊçÆÂåÖÈùûÂ∏∏ÁÆÄÂçïÔºå&quot;Ê†áÂ§¥&quot;ÈÉ®ÂàÜ‰∏ÄÂÖ±Âè™Êúâ8‰∏™Â≠óËäÇÔºåÊÄªÈïøÂ∫¶‰∏çË∂ÖËøá65,535Â≠óËäÇÔºåÊ≠£Â•ΩÊîæËøõ‰∏Ä‰∏™IPÊï∞ÊçÆÂåÖ„ÄÇ 4.2 TCPÂçèËÆÆ UDPÂçèËÆÆÁöÑ‰ºòÁÇπÊòØÊØîËæÉÁÆÄÂçïÔºåÂÆπÊòìÂÆûÁé∞Ôºå‰ΩÜÊòØÁº∫ÁÇπÊòØÂèØÈù†ÊÄßËæÉÂ∑ÆÔºå‰∏ÄÊó¶Êï∞ÊçÆÂåÖÂèëÂá∫ÔºåÊó†Ê≥ïÁü•ÈÅìÂØπÊñπÊòØÂê¶Êî∂Âà∞„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊèêÈ´òÁΩëÁªúÂèØÈù†ÊÄßÔºåTCPÂçèËÆÆÂ∞±ËØûÁîü‰∫Ü„ÄÇËøô‰∏™ÂçèËÆÆÈùûÂ∏∏Â§çÊùÇÔºå‰ΩÜÂèØ‰ª•Ëøë‰ººËÆ§‰∏∫ÔºåÂÆÉÂ∞±ÊòØÊúâÁ°ÆËÆ§Êú∫Âà∂ÁöÑUDPÂçèËÆÆÔºåÊØèÂèëÂá∫‰∏Ä‰∏™Êï∞ÊçÆÂåÖÈÉΩË¶ÅÊ±ÇÁ°ÆËÆ§„ÄÇÂ¶ÇÊûúÊúâ‰∏Ä‰∏™Êï∞ÊçÆÂåÖÈÅóÂ§±ÔºåÂ∞±Êî∂‰∏çÂà∞Á°ÆËÆ§ÔºåÂèëÂá∫ÊñπÂ∞±Áü•ÈÅìÊúâÂøÖË¶ÅÈáçÂèëËøô‰∏™Êï∞ÊçÆÂåÖ‰∫Ü„ÄÇ Âõ†Ê≠§ÔºåTCPÂçèËÆÆËÉΩÂ§üÁ°Æ‰øùÊï∞ÊçÆ‰∏ç‰ºöÈÅóÂ§±„ÄÇÂÆÉÁöÑÁº∫ÁÇπÊòØËøáÁ®ãÂ§çÊùÇ„ÄÅÂÆûÁé∞Âõ∞Èöæ„ÄÅÊ∂àËÄóËæÉÂ§öÁöÑËµÑÊ∫ê„ÄÇ TCPÊï∞ÊçÆÂåÖÂíåUDPÊï∞ÊçÆÂåÖ‰∏ÄÊ†∑ÔºåÈÉΩÊòØÂÜÖÂµåÂú®IPÊï∞ÊçÆÂåÖÁöÑ&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜ„ÄÇTCPÊï∞ÊçÆÂåÖÊ≤°ÊúâÈïøÂ∫¶ÈôêÂà∂ÔºåÁêÜËÆ∫‰∏äÂèØ‰ª•Êó†ÈôêÈïøÔºå‰ΩÜÊòØ‰∏∫‰∫Ü‰øùËØÅÁΩëÁªúÁöÑÊïàÁéáÔºåÈÄöÂ∏∏TCPÊï∞ÊçÆÂåÖÁöÑÈïøÂ∫¶‰∏ç‰ºöË∂ÖËøáIPÊï∞ÊçÆÂåÖÁöÑÈïøÂ∫¶Ôºå‰ª•Á°Æ‰øùÂçï‰∏™TCPÊï∞ÊçÆÂåÖ‰∏çÂøÖÂÜçÂàÜÂâ≤„ÄÇ ÂÖ≥‰∫éTCPÁªÜËäÇ‰ª•ÂêéÂÜçÊé¢ËÆ®„ÄÇ 5. Â∫îÁî®Â±Ç Â∫îÁî®Á®ãÂ∫èÊî∂Âà∞&quot;‰º†ËæìÂ±Ç&quot;ÁöÑÊï∞ÊçÆÔºåÊé•‰∏ãÊù•Â∞±Ë¶ÅËøõË°åËß£ËØª„ÄÇÁî±‰∫é‰∫íËÅîÁΩëÊòØÂºÄÊîæÊû∂ÊûÑÔºåÊï∞ÊçÆÊù•Ê∫ê‰∫îËä±ÂÖ´Èó®ÔºåÂøÖÈ°ª‰∫ãÂÖàËßÑÂÆöÂ•ΩÊ†ºÂºèÔºåÂê¶ÂàôÊ†πÊú¨Êó†Ê≥ïËß£ËØª„ÄÇ &quot;Â∫îÁî®Â±Ç&quot;ÁöÑ‰ΩúÁî®ÔºåÂ∞±ÊòØËßÑÂÆöÂ∫îÁî®Á®ãÂ∫èÁöÑÊï∞ÊçÆÊ†ºÂºè„ÄÇ ‰∏æ‰æãÊù•ËØ¥ÔºåTCPÂçèËÆÆÂèØ‰ª•‰∏∫ÂêÑÁßçÂêÑÊ†∑ÁöÑÁ®ãÂ∫è‰º†ÈÄíÊï∞ÊçÆÔºåÊØîÂ¶ÇEmail„ÄÅWWW„ÄÅFTPÁ≠âÁ≠â„ÄÇÈÇ£‰πàÔºåÂøÖÈ°ªÊúâ‰∏çÂêåÂçèËÆÆËßÑÂÆöÁîµÂ≠êÈÇÆ‰ª∂„ÄÅÁΩëÈ°µ„ÄÅFTPÊï∞ÊçÆÁöÑÊ†ºÂºèÔºåËøô‰∫õÂ∫îÁî®Á®ãÂ∫èÂçèËÆÆÂ∞±ÊûÑÊàê‰∫Ü&quot;Â∫îÁî®Â±Ç&quot;„ÄÇ ËøôÊòØÊúÄÈ´òÁöÑ‰∏ÄÂ±ÇÔºåÁõ¥Êé•Èù¢ÂØπÁî®Êà∑„ÄÇÂÆÉÁöÑÊï∞ÊçÆÂ∞±ÊîæÂú®TCPÊï∞ÊçÆÂåÖÁöÑ&quot;Êï∞ÊçÆ&quot;ÈÉ®ÂàÜ„ÄÇÂõ†Ê≠§ÔºåÁé∞Âú®ÁöÑ‰ª•Â§™ÁΩëÁöÑÊï∞ÊçÆÂåÖÂ∞±ÂèòÊàê‰∏ãÈù¢ËøôÊ†∑„ÄÇ *Ê≥®ÔºöUDPÂ§¥‰∏∫8‰∏™Â≠óËäÇÔºåTCPÂ§¥‰∏∫20‰∏™Â≠óËäÇ Êï¥ÁêÜ‰∫éÔºöhttp://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html]]></content>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫ÁΩëÁªúÁõ∏ÂÖ≥</tag>
      </tags>
  </entry>
</search>
